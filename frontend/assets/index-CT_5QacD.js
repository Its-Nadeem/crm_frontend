function V6(t,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qp={exports:{}},Ml={},Zp={exports:{}},ut={};var t2;function K6(){if(t2)return ut;t2=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=p&&R[p]||R["@@iterator"],typeof R=="function"?R:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function y(R,L,G){this.props=R,this.context=L,this.refs=b,this.updater=G||g}y.prototype.isReactComponent={},y.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,L,"setState")},y.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function S(){}S.prototype=y.prototype;function C(R,L,G){this.props=R,this.context=L,this.refs=b,this.updater=G||g}var k=C.prototype=new S;k.constructor=C,v(k,y.prototype),k.isPureReactComponent=!0;var T=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function P(R,L,G){var K,ie={},xe=null,pe=null;if(L!=null)for(K in L.ref!==void 0&&(pe=L.ref),L.key!==void 0&&(xe=""+L.key),L)N.call(L,K)&&!E.hasOwnProperty(K)&&(ie[K]=L[K]);var be=arguments.length-2;if(be===1)ie.children=G;else if(1<be){for(var me=Array(be),X=0;X<be;X++)me[X]=arguments[X+2];ie.children=me}if(R&&R.defaultProps)for(K in be=R.defaultProps,be)ie[K]===void 0&&(ie[K]=be[K]);return{$$typeof:t,type:R,key:xe,ref:pe,props:ie,_owner:O.current}}function I(R,L){return{$$typeof:t,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function M(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function D(R){var L={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(G){return L[G]})}var U=/\/+/g;function F(R,L){return typeof R=="object"&&R!==null&&R.key!=null?D(""+R.key):L.toString(36)}function W(R,L,G,K,ie){var xe=typeof R;(xe==="undefined"||xe==="boolean")&&(R=null);var pe=!1;if(R===null)pe=!0;else switch(xe){case"string":case"number":pe=!0;break;case"object":switch(R.$$typeof){case t:case r:pe=!0}}if(pe)return pe=R,ie=ie(pe),R=K===""?"."+F(pe,0):K,T(ie)?(G="",R!=null&&(G=R.replace(U,"$&/")+"/"),W(ie,L,G,"",function(X){return X})):ie!=null&&(M(ie)&&(ie=I(ie,G+(!ie.key||pe&&pe.key===ie.key?"":(""+ie.key).replace(U,"$&/")+"/")+R)),L.push(ie)),1;if(pe=0,K=K===""?".":K+":",T(R))for(var be=0;be<R.length;be++){xe=R[be];var me=K+F(xe,be);pe+=W(xe,L,G,me,ie)}else if(me=x(R),typeof me=="function")for(R=me.call(R),be=0;!(xe=R.next()).done;)xe=xe.value,me=K+F(xe,be++),pe+=W(xe,L,G,me,ie);else if(xe==="object")throw L=String(R),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return pe}function $(R,L,G){if(R==null)return R;var K=[],ie=0;return W(R,K,"","",function(xe){return L.call(G,xe,ie++)}),K}function H(R){if(R._status===-1){var L=R._result;L=L(),L.then(function(G){(R._status===0||R._status===-1)&&(R._status=1,R._result=G)},function(G){(R._status===0||R._status===-1)&&(R._status=2,R._result=G)}),R._status===-1&&(R._status=0,R._result=L)}if(R._status===1)return R._result.default;throw R._result}var z={current:null},q={transition:null},Q={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:q,ReactCurrentOwner:O};function ee(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:$,forEach:function(R,L,G){$(R,function(){L.apply(this,arguments)},G)},count:function(R){var L=0;return $(R,function(){L++}),L},toArray:function(R){return $(R,function(L){return L})||[]},only:function(R){if(!M(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ut.Component=y,ut.Fragment=n,ut.Profiler=s,ut.PureComponent=C,ut.StrictMode=a,ut.Suspense=u,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,ut.act=ee,ut.cloneElement=function(R,L,G){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var K=v({},R.props),ie=R.key,xe=R.ref,pe=R._owner;if(L!=null){if(L.ref!==void 0&&(xe=L.ref,pe=O.current),L.key!==void 0&&(ie=""+L.key),R.type&&R.type.defaultProps)var be=R.type.defaultProps;for(me in L)N.call(L,me)&&!E.hasOwnProperty(me)&&(K[me]=L[me]===void 0&&be!==void 0?be[me]:L[me])}var me=arguments.length-2;if(me===1)K.children=G;else if(1<me){be=Array(me);for(var X=0;X<me;X++)be[X]=arguments[X+2];K.children=be}return{$$typeof:t,type:R.type,key:ie,ref:xe,props:K,_owner:pe}},ut.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:i,_context:R},R.Consumer=R},ut.createElement=P,ut.createFactory=function(R){var L=P.bind(null,R);return L.type=R,L},ut.createRef=function(){return{current:null}},ut.forwardRef=function(R){return{$$typeof:d,render:R}},ut.isValidElement=M,ut.lazy=function(R){return{$$typeof:f,_payload:{_status:-1,_result:R},_init:H}},ut.memo=function(R,L){return{$$typeof:m,type:R,compare:L===void 0?null:L}},ut.startTransition=function(R){var L=q.transition;q.transition={};try{R()}finally{q.transition=L}},ut.unstable_act=ee,ut.useCallback=function(R,L){return z.current.useCallback(R,L)},ut.useContext=function(R){return z.current.useContext(R)},ut.useDebugValue=function(){},ut.useDeferredValue=function(R){return z.current.useDeferredValue(R)},ut.useEffect=function(R,L){return z.current.useEffect(R,L)},ut.useId=function(){return z.current.useId()},ut.useImperativeHandle=function(R,L,G){return z.current.useImperativeHandle(R,L,G)},ut.useInsertionEffect=function(R,L){return z.current.useInsertionEffect(R,L)},ut.useLayoutEffect=function(R,L){return z.current.useLayoutEffect(R,L)},ut.useMemo=function(R,L){return z.current.useMemo(R,L)},ut.useReducer=function(R,L,G){return z.current.useReducer(R,L,G)},ut.useRef=function(R){return z.current.useRef(R)},ut.useState=function(R){return z.current.useState(R)},ut.useSyncExternalStore=function(R,L,G){return z.current.useSyncExternalStore(R,L,G)},ut.useTransition=function(){return z.current.useTransition()},ut.version="18.3.1",ut}var r2;function Ny(){return r2||(r2=1,Zp.exports=K6()),Zp.exports}var n2;function Y6(){if(n2)return Ml;n2=1;var t=Ny(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,m){var f,p={},x=null,g=null;m!==void 0&&(x=""+m),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(g=u.ref);for(f in u)a.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(d&&d.defaultProps)for(f in u=d.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:r,type:d,key:x,ref:g,props:p,_owner:s.current}}return Ml.Fragment=n,Ml.jsx=l,Ml.jsxs=l,Ml}var a2;function X6(){return a2||(a2=1,Qp.exports=Y6()),Qp.exports}var e=X6(),w=Ny();const Y=wt(w),J6=V6({__proto__:null,default:Y},[w]);var iu={},eh={exports:{}},Vr={},th={exports:{}},rh={};var s2;function Q6(){return s2||(s2=1,(function(t){function r(q,Q){var ee=q.length;q.push(Q);e:for(;0<ee;){var R=ee-1>>>1,L=q[R];if(0<s(L,Q))q[R]=Q,q[ee]=L,ee=R;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var Q=q[0],ee=q.pop();if(ee!==Q){q[0]=ee;e:for(var R=0,L=q.length,G=L>>>1;R<G;){var K=2*(R+1)-1,ie=q[K],xe=K+1,pe=q[xe];if(0>s(ie,ee))xe<L&&0>s(pe,ie)?(q[R]=pe,q[xe]=ee,R=xe):(q[R]=ie,q[K]=ee,R=K);else if(xe<L&&0>s(pe,ee))q[R]=pe,q[xe]=ee,R=xe;else break e}}return Q}function s(q,Q){var ee=q.sortIndex-Q.sortIndex;return ee!==0?ee:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],m=[],f=1,p=null,x=3,g=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(q){for(var Q=n(m);Q!==null;){if(Q.callback===null)a(m);else if(Q.startTime<=q)a(m),Q.sortIndex=Q.expirationTime,r(u,Q);else break;Q=n(m)}}function T(q){if(b=!1,k(q),!v)if(n(u)!==null)v=!0,H(N);else{var Q=n(m);Q!==null&&z(T,Q.startTime-q)}}function N(q,Q){v=!1,b&&(b=!1,S(P),P=-1),g=!0;var ee=x;try{for(k(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||q&&!D());){var R=p.callback;if(typeof R=="function"){p.callback=null,x=p.priorityLevel;var L=R(p.expirationTime<=Q);Q=t.unstable_now(),typeof L=="function"?p.callback=L:p===n(u)&&a(u),k(Q)}else a(u);p=n(u)}if(p!==null)var G=!0;else{var K=n(m);K!==null&&z(T,K.startTime-Q),G=!1}return G}finally{p=null,x=ee,g=!1}}var O=!1,E=null,P=-1,I=5,M=-1;function D(){return!(t.unstable_now()-M<I)}function U(){if(E!==null){var q=t.unstable_now();M=q;var Q=!0;try{Q=E(!0,q)}finally{Q?F():(O=!1,E=null)}}else O=!1}var F;if(typeof C=="function")F=function(){C(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=U,F=function(){$.postMessage(null)}}else F=function(){y(U,0)};function H(q){E=q,O||(O=!0,F())}function z(q,Q){P=y(function(){q(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,H(N))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var ee=x;x=Q;try{return q()}finally{x=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=x;x=q;try{return Q()}finally{x=ee}},t.unstable_scheduleCallback=function(q,Q,ee){var R=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?R+ee:R):ee=R,q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ee+L,q={id:f++,callback:Q,priorityLevel:q,startTime:ee,expirationTime:L,sortIndex:-1},ee>R?(q.sortIndex=ee,r(m,q),n(u)===null&&q===n(m)&&(b?(S(P),P=-1):b=!0,z(T,ee-R))):(q.sortIndex=L,r(u,q),v||g||(v=!0,H(N))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var Q=x;return function(){var ee=x;x=Q;try{return q.apply(this,arguments)}finally{x=ee}}}})(rh)),rh}var i2;function Z6(){return i2||(i2=1,th.exports=Q6()),th.exports}var o2;function e_(){if(o2)return Vr;o2=1;var t=Ny(),r=Z6();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)a.add(c[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function x(o){return u.call(p,o)?!0:u.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function g(o,c,h,j){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return j?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function v(o,c,h,j){if(c===null||typeof c>"u"||g(o,c,h,j))return!0;if(j)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,h,j,A,_,B){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=j,this.attributeNamespace=A,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=_,this.removeEmptyString=B}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){y[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];y[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){y[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){y[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){y[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){y[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){y[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){y[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){y[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function C(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(S,C);y[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(S,C);y[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(S,C);y[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){y[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),y.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){y[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,c,h,j){var A=y.hasOwnProperty(c)?y[c]:null;(A!==null?A.type!==0:j||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(v(c,h,A,j)&&(h=null),j||A===null?x(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):A.mustUseProperty?o[A.propertyName]=h===null?A.type===3?!1:"":h:(c=A.attributeName,j=A.attributeNamespace,h===null?o.removeAttribute(c):(A=A.type,h=A===3||A===4&&h===!0?"":""+h,j?o.setAttributeNS(j,c,h):o.setAttribute(c,h))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Object.assign,R;function L(o){if(R===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);R=c&&c[1]||""}return`
`+R+o}var G=!1;function K(o,c){if(!o||G)return"";G=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(he){var j=he}Reflect.construct(o,[],c)}else{try{c.call()}catch(he){j=he}o.call(c.prototype)}else{try{throw Error()}catch(he){j=he}o()}}catch(he){if(he&&j&&typeof he.stack=="string"){for(var A=he.stack.split(`
`),_=j.stack.split(`
`),B=A.length-1,J=_.length-1;1<=B&&0<=J&&A[B]!==_[J];)J--;for(;1<=B&&0<=J;B--,J--)if(A[B]!==_[J]){if(B!==1||J!==1)do if(B--,J--,0>J||A[B]!==_[J]){var ne=`
`+A[B].replace(" at new "," at ");return o.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",o.displayName)),ne}while(1<=B&&0<=J);break}}}finally{G=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?L(o):""}function ie(o){switch(o.tag){case 5:return L(o.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return o=K(o.type,!1),o;case 11:return o=K(o.type.render,!1),o;case 1:return o=K(o.type,!0),o;default:return""}}function xe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case O:return"Portal";case I:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case D:return(o.displayName||"Context")+".Consumer";case M:return(o._context.displayName||"Context")+".Provider";case U:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case $:return c=o.displayName||null,c!==null?c:xe(o.type)||"Memo";case H:c=o._payload,o=o._init;try{return xe(o(c))}catch{}}return null}function pe(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function me(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function X(o){var c=me(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),j=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var A=h.get,_=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return A.call(this)},set:function(B){j=""+B,_.call(this,B)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return j},setValue:function(B){j=""+B},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function re(o){o._valueTracker||(o._valueTracker=X(o))}function de(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),j="";return o&&(j=me(o)?o.checked?"true":"false":o.value),o=j,o!==h?(c.setValue(o),!0):!1}function Be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Me(o,c){var h=c.checked;return ee({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Ee(o,c){var h=c.defaultValue==null?"":c.defaultValue,j=c.checked!=null?c.checked:c.defaultChecked;h=be(c.value!=null?c.value:h),o._wrapperState={initialChecked:j,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Xe(o,c){c=c.checked,c!=null&&k(o,"checked",c,!1)}function ge(o,c){Xe(o,c);var h=be(c.value),j=c.type;if(h!=null)j==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(j==="submit"||j==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?ae(o,c.type,h):c.hasOwnProperty("defaultValue")&&ae(o,c.type,be(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function De(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var j=c.type;if(!(j!=="submit"&&j!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function ae(o,c,h){(c!=="number"||Be(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var ye=Array.isArray;function Oe(o,c,h,j){if(o=o.options,c){c={};for(var A=0;A<h.length;A++)c["$"+h[A]]=!0;for(h=0;h<o.length;h++)A=c.hasOwnProperty("$"+o[h].value),o[h].selected!==A&&(o[h].selected=A),A&&j&&(o[h].defaultSelected=!0)}else{for(h=""+be(h),c=null,A=0;A<o.length;A++){if(o[A].value===h){o[A].selected=!0,j&&(o[A].defaultSelected=!0);return}c!==null||o[A].disabled||(c=o[A])}c!==null&&(c.selected=!0)}}function Z(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Pe(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(ye(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:be(h)}}function lt(o,c){var h=be(c.value),j=be(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),j!=null&&(o.defaultValue=""+j)}function At(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ft(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fr(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ft(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ur,Br=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,j,A){MSApp.execUnsafeLocalFunction(function(){return o(c,h,j,A)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ur.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function br(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Or=["Webkit","ms","Moz","O"];Object.keys(Ye).forEach(function(o){Or.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ye[c]=Ye[o]})});function vr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ye.hasOwnProperty(o)&&Ye[o]?(""+c).trim():c+"px"}function oe(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var j=h.indexOf("--")===0,A=vr(h,c[h],j);h==="float"&&(h="cssFloat"),j?o.setProperty(h,A):o[h]=A}}var fe=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(o,c){if(c){if(fe[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Ke(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=null;function Xt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var dt=null,pt=null,Nr=null;function ha(o){if(o=vl(o)){if(typeof dt!="function")throw Error(n(280));var c=o.stateNode;c&&(c=yd(c),dt(o.stateNode,o.type,c))}}function ji(o){pt?Nr?Nr.push(o):Nr=[o]:pt=o}function _s(){if(pt){var o=pt,c=Nr;if(Nr=pt=null,ha(o),c)for(o=0;o<c.length;o++)ha(c[o])}}function On(o,c){return o(c)}function wi(){}var ln=!1;function Ni(o,c,h){if(ln)return o(c,h);ln=!0;try{return On(o,c,h)}finally{ln=!1,(pt!==null||Nr!==null)&&(wi(),_s())}}function xa(o,c){var h=o.stateNode;if(h===null)return null;var j=yd(h);if(j===null)return null;h=j[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(o=o.type,j=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!j;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var ga=!1;if(d)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){ga=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{ga=!1}function Va(o,c,h,j,A,_,B,J,ne){var he=Array.prototype.slice.call(arguments,3);try{c.apply(h,he)}catch(Ne){this.onError(Ne)}}var ba=!1,va=null,Ka=!1,Pn=null,Ya={onError:function(o){ba=!0,va=o}};function Xa(o,c,h,j,A,_,B,J,ne){ba=!1,va=null,Va.apply(Ya,arguments)}function Ja(o,c,h,j,A,_,B,J,ne){if(Xa.apply(this,arguments),ba){if(ba){var he=va;ba=!1,va=null}else throw Error(n(198));Ka||(Ka=!0,Pn=he)}}function Pr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Is(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Si(o){if(Pr(o)!==o)throw Error(n(188))}function Zn(o){var c=o.alternate;if(!c){if(c=Pr(o),c===null)throw Error(n(188));return c!==o?null:o}for(var h=o,j=c;;){var A=h.return;if(A===null)break;var _=A.alternate;if(_===null){if(j=A.return,j!==null){h=j;continue}break}if(A.child===_.child){for(_=A.child;_;){if(_===h)return Si(A),o;if(_===j)return Si(A),c;_=_.sibling}throw Error(n(188))}if(h.return!==j.return)h=A,j=_;else{for(var B=!1,J=A.child;J;){if(J===h){B=!0,h=A,j=_;break}if(J===j){B=!0,j=A,h=_;break}J=J.sibling}if(!B){for(J=_.child;J;){if(J===h){B=!0,h=_,j=A;break}if(J===j){B=!0,j=_,h=A;break}J=J.sibling}if(!B)throw Error(n(189))}}if(h.alternate!==j)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:c}function te(o){return o=Zn(o),o!==null?ke(o):null}function ke(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=ke(o);if(c!==null)return c;o=o.sibling}return null}var Ie=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,$e=r.unstable_shouldYield,nr=r.unstable_requestPaint,Nt=r.unstable_now,gt=r.unstable_getCurrentPriorityLevel,et=r.unstable_ImmediatePriority,_n=r.unstable_UserBlockingPriority,Qa=r.unstable_NormalPriority,bf=r.unstable_LowPriority,td=r.unstable_IdlePriority,Za=null,cn=null;function el(o){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Za,o,void 0,(o.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:yf,tl=Math.log,vf=Math.LN2;function yf(o){return o>>>=0,o===0?32:31-(tl(o)/vf|0)|0}var ki=64,Ci=4194304;function Ms(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ai(o,c){var h=o.pendingLanes;if(h===0)return 0;var j=0,A=o.suspendedLanes,_=o.pingedLanes,B=h&268435455;if(B!==0){var J=B&~A;J!==0?j=Ms(J):(_&=B,_!==0&&(j=Ms(_)))}else B=h&~A,B!==0?j=Ms(B):_!==0&&(j=Ms(_));if(j===0)return 0;if(c!==0&&c!==j&&(c&A)===0&&(A=j&-j,_=c&-c,A>=_||A===16&&(_&4194240)!==0))return c;if((j&4)!==0&&(j|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=j;0<c;)h=31-Xr(c),A=1<<h,j|=o[h],c&=~A;return j}function jf(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wf(o,c){for(var h=o.suspendedLanes,j=o.pingedLanes,A=o.expirationTimes,_=o.pendingLanes;0<_;){var B=31-Xr(_),J=1<<B,ne=A[B];ne===-1?((J&h)===0||(J&j)!==0)&&(A[B]=jf(J,c)):ne<=c&&(o.expiredLanes|=J),_&=~J}}function rl(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function rd(){var o=ki;return ki<<=1,(ki&4194240)===0&&(ki=64),o}function nl(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ls(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Xr(c),o[c]=h}function Nf(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var j=o.eventTimes;for(o=o.expirationTimes;0<h;){var A=31-Xr(h),_=1<<A;c[A]=0,j[A]=-1,o[A]=-1,h&=~_}}function al(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var j=31-Xr(h),A=1<<j;A&c|o[j]&c&&(o[j]|=c),h&=~A}}var yt=0;function nd(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ad,sl,sd,id,Ti,il=!1,Ei=[],ea=null,dn=null,ta=null,le=new Map,_e=new Map,je=[],Ve="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ot(o,c){switch(o){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":le.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":_e.delete(c.pointerId)}}function ht(o,c,h,j,A,_){return o===null||o.nativeEvent!==_?(o={blockedOn:c,domEventName:h,eventSystemFlags:j,nativeEvent:_,targetContainers:[A]},c!==null&&(c=vl(c),c!==null&&sl(c)),o):(o.eventSystemFlags|=j,c=o.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),o)}function un(o,c,h,j,A){switch(c){case"focusin":return ea=ht(ea,o,c,h,j,A),!0;case"dragenter":return dn=ht(dn,o,c,h,j,A),!0;case"mouseover":return ta=ht(ta,o,c,h,j,A),!0;case"pointerover":var _=A.pointerId;return le.set(_,ht(le.get(_)||null,o,c,h,j,A)),!0;case"gotpointercapture":return _=A.pointerId,_e.set(_,ht(_e.get(_)||null,o,c,h,j,A)),!0}return!1}function ya(o){var c=Rs(o.target);if(c!==null){var h=Pr(c);if(h!==null){if(c=h.tag,c===13){if(c=Is(h),c!==null){o.blockedOn=c,Ti(o.priority,function(){sd(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function es(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=kf(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var j=new h.constructor(h.type,h);Mt=j,h.target.dispatchEvent(j),Mt=null}else return c=vl(h),c!==null&&sl(c),o.blockedOn=h,!1;c.shift()}return!0}function ol(o,c,h){es(o)&&h.delete(c)}function Ds(){il=!1,ea!==null&&es(ea)&&(ea=null),dn!==null&&es(dn)&&(dn=null),ta!==null&&es(ta)&&(ta=null),le.forEach(ol),_e.forEach(ol)}function ts(o,c){o.blockedOn===c&&(o.blockedOn=null,il||(il=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ds)))}function ja(o){function c(A){return ts(A,o)}if(0<Ei.length){ts(Ei[0],o);for(var h=1;h<Ei.length;h++){var j=Ei[h];j.blockedOn===o&&(j.blockedOn=null)}}for(ea!==null&&ts(ea,o),dn!==null&&ts(dn,o),ta!==null&&ts(ta,o),le.forEach(c),_e.forEach(c),h=0;h<je.length;h++)j=je[h],j.blockedOn===o&&(j.blockedOn=null);for(;0<je.length&&(h=je[0],h.blockedOn===null);)ya(h),h.blockedOn===null&&je.shift()}var Oi=T.ReactCurrentBatchConfig,od=!0;function bP(o,c,h,j){var A=yt,_=Oi.transition;Oi.transition=null;try{yt=1,Sf(o,c,h,j)}finally{yt=A,Oi.transition=_}}function vP(o,c,h,j){var A=yt,_=Oi.transition;Oi.transition=null;try{yt=4,Sf(o,c,h,j)}finally{yt=A,Oi.transition=_}}function Sf(o,c,h,j){if(od){var A=kf(o,c,h,j);if(A===null)Wf(o,c,j,ld,h),ot(o,j);else if(un(A,o,c,h,j))j.stopPropagation();else if(ot(o,j),c&4&&-1<Ve.indexOf(o)){for(;A!==null;){var _=vl(A);if(_!==null&&ad(_),_=kf(o,c,h,j),_===null&&Wf(o,c,j,ld,h),_===A)break;A=_}A!==null&&j.stopPropagation()}else Wf(o,c,j,null,h)}}var ld=null;function kf(o,c,h,j){if(ld=null,o=Xt(j),o=Rs(o),o!==null)if(c=Pr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Is(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ld=o,null}function Uj(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gt()){case et:return 1;case _n:return 4;case Qa:case bf:return 16;case td:return 536870912;default:return 16}default:return 16}}var rs=null,Cf=null,cd=null;function Wj(){if(cd)return cd;var o,c=Cf,h=c.length,j,A="value"in rs?rs.value:rs.textContent,_=A.length;for(o=0;o<h&&c[o]===A[o];o++);var B=h-o;for(j=1;j<=B&&c[h-j]===A[_-j];j++);return cd=A.slice(o,1<j?1-j:void 0)}function dd(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ud(){return!0}function qj(){return!1}function Jr(o){function c(h,j,A,_,B){this._reactName=h,this._targetInst=A,this.type=j,this.nativeEvent=_,this.target=B,this.currentTarget=null;for(var J in o)o.hasOwnProperty(J)&&(h=o[J],this[J]=h?h(_):_[J]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ud:qj,this.isPropagationStopped=qj,this}return ee(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ud)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ud)},persist:function(){},isPersistent:ud}),c}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Af=Jr(Pi),ll=ee({},Pi,{view:0,detail:0}),yP=Jr(ll),Tf,Ef,cl,md=ee({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==cl&&(cl&&o.type==="mousemove"?(Tf=o.screenX-cl.screenX,Ef=o.screenY-cl.screenY):Ef=Tf=0,cl=o),Tf)},movementY:function(o){return"movementY"in o?o.movementY:Ef}}),zj=Jr(md),jP=ee({},md,{dataTransfer:0}),wP=Jr(jP),NP=ee({},ll,{relatedTarget:0}),Of=Jr(NP),SP=ee({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),kP=Jr(SP),CP=ee({},Pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),AP=Jr(CP),TP=ee({},Pi,{data:0}),Gj=Jr(TP),EP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _P(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=PP[o])?!!c[o]:!1}function Pf(){return _P}var IP=ee({},ll,{key:function(o){if(o.key){var c=EP[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=dd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?OP[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pf,charCode:function(o){return o.type==="keypress"?dd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?dd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),MP=Jr(IP),LP=ee({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hj=Jr(LP),DP=ee({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pf}),RP=Jr(DP),$P=ee({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),FP=Jr($P),BP=ee({},md,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),UP=Jr(BP),WP=[9,13,27,32],_f=d&&"CompositionEvent"in window,dl=null;d&&"documentMode"in document&&(dl=document.documentMode);var qP=d&&"TextEvent"in window&&!dl,Vj=d&&(!_f||dl&&8<dl&&11>=dl),Kj=" ",Yj=!1;function Xj(o,c){switch(o){case"keyup":return WP.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jj(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _i=!1;function zP(o,c){switch(o){case"compositionend":return Jj(c);case"keypress":return c.which!==32?null:(Yj=!0,Kj);case"textInput":return o=c.data,o===Kj&&Yj?null:o;default:return null}}function GP(o,c){if(_i)return o==="compositionend"||!_f&&Xj(o,c)?(o=Wj(),cd=Cf=rs=null,_i=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Vj&&c.locale!=="ko"?null:c.data;default:return null}}var HP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qj(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!HP[o.type]:c==="textarea"}function Zj(o,c,h,j){ji(j),c=gd(c,"onChange"),0<c.length&&(h=new Af("onChange","change",null,h,j),o.push({event:h,listeners:c}))}var ul=null,ml=null;function VP(o){g1(o,0)}function fd(o){var c=Ri(o);if(de(c))return o}function KP(o,c){if(o==="change")return c}var e1=!1;if(d){var If;if(d){var Mf="oninput"in document;if(!Mf){var t1=document.createElement("div");t1.setAttribute("oninput","return;"),Mf=typeof t1.oninput=="function"}If=Mf}else If=!1;e1=If&&(!document.documentMode||9<document.documentMode)}function r1(){ul&&(ul.detachEvent("onpropertychange",n1),ml=ul=null)}function n1(o){if(o.propertyName==="value"&&fd(ml)){var c=[];Zj(c,ml,o,Xt(o)),Ni(VP,c)}}function YP(o,c,h){o==="focusin"?(r1(),ul=c,ml=h,ul.attachEvent("onpropertychange",n1)):o==="focusout"&&r1()}function XP(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return fd(ml)}function JP(o,c){if(o==="click")return fd(c)}function QP(o,c){if(o==="input"||o==="change")return fd(c)}function ZP(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var In=typeof Object.is=="function"?Object.is:ZP;function fl(o,c){if(In(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),j=Object.keys(c);if(h.length!==j.length)return!1;for(j=0;j<h.length;j++){var A=h[j];if(!u.call(c,A)||!In(o[A],c[A]))return!1}return!0}function a1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function s1(o,c){var h=a1(o);o=0;for(var j;h;){if(h.nodeType===3){if(j=o+h.textContent.length,o<=c&&j>=c)return{node:h,offset:c-o};o=j}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=a1(h)}}function i1(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?i1(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function o1(){for(var o=window,c=Be();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Be(o.document)}return c}function Lf(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function e6(o){var c=o1(),h=o.focusedElem,j=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&i1(h.ownerDocument.documentElement,h)){if(j!==null&&Lf(h)){if(c=j.start,o=j.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var A=h.textContent.length,_=Math.min(j.start,A);j=j.end===void 0?_:Math.min(j.end,A),!o.extend&&_>j&&(A=j,j=_,_=A),A=s1(h,_);var B=s1(h,j);A&&B&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==B.node||o.focusOffset!==B.offset)&&(c=c.createRange(),c.setStart(A.node,A.offset),o.removeAllRanges(),_>j?(o.addRange(c),o.extend(B.node,B.offset)):(c.setEnd(B.node,B.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var t6=d&&"documentMode"in document&&11>=document.documentMode,Ii=null,Df=null,pl=null,Rf=!1;function l1(o,c,h){var j=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rf||Ii==null||Ii!==Be(j)||(j=Ii,"selectionStart"in j&&Lf(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),pl&&fl(pl,j)||(pl=j,j=gd(Df,"onSelect"),0<j.length&&(c=new Af("onSelect","select",null,c,h),o.push({event:c,listeners:j}),c.target=Ii)))}function pd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Mi={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},$f={},c1={};d&&(c1=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function hd(o){if($f[o])return $f[o];if(!Mi[o])return o;var c=Mi[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in c1)return $f[o]=c[h];return o}var d1=hd("animationend"),u1=hd("animationiteration"),m1=hd("animationstart"),f1=hd("transitionend"),p1=new Map,h1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(o,c){p1.set(o,c),i(c,[o])}for(var Ff=0;Ff<h1.length;Ff++){var Bf=h1[Ff],r6=Bf.toLowerCase(),n6=Bf[0].toUpperCase()+Bf.slice(1);ns(r6,"on"+n6)}ns(d1,"onAnimationEnd"),ns(u1,"onAnimationIteration"),ns(m1,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(f1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a6=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function x1(o,c,h){var j=o.type||"unknown-event";o.currentTarget=h,Ja(j,c,void 0,o),o.currentTarget=null}function g1(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var j=o[h],A=j.event;j=j.listeners;e:{var _=void 0;if(c)for(var B=j.length-1;0<=B;B--){var J=j[B],ne=J.instance,he=J.currentTarget;if(J=J.listener,ne!==_&&A.isPropagationStopped())break e;x1(A,J,he),_=ne}else for(B=0;B<j.length;B++){if(J=j[B],ne=J.instance,he=J.currentTarget,J=J.listener,ne!==_&&A.isPropagationStopped())break e;x1(A,J,he),_=ne}}}if(Ka)throw o=Pn,Ka=!1,Pn=null,o}function Lt(o,c){var h=c[Kf];h===void 0&&(h=c[Kf]=new Set);var j=o+"__bubble";h.has(j)||(b1(c,o,2,!1),h.add(j))}function Uf(o,c,h){var j=0;c&&(j|=4),b1(h,o,j,c)}var xd="_reactListening"+Math.random().toString(36).slice(2);function xl(o){if(!o[xd]){o[xd]=!0,a.forEach(function(h){h!=="selectionchange"&&(a6.has(h)||Uf(h,!1,o),Uf(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[xd]||(c[xd]=!0,Uf("selectionchange",!1,c))}}function b1(o,c,h,j){switch(Uj(c)){case 1:var A=bP;break;case 4:A=vP;break;default:A=Sf}h=A.bind(null,c,h,o),A=void 0,!ga||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),j?A!==void 0?o.addEventListener(c,h,{capture:!0,passive:A}):o.addEventListener(c,h,!0):A!==void 0?o.addEventListener(c,h,{passive:A}):o.addEventListener(c,h,!1)}function Wf(o,c,h,j,A){var _=j;if((c&1)===0&&(c&2)===0&&j!==null)e:for(;;){if(j===null)return;var B=j.tag;if(B===3||B===4){var J=j.stateNode.containerInfo;if(J===A||J.nodeType===8&&J.parentNode===A)break;if(B===4)for(B=j.return;B!==null;){var ne=B.tag;if((ne===3||ne===4)&&(ne=B.stateNode.containerInfo,ne===A||ne.nodeType===8&&ne.parentNode===A))return;B=B.return}for(;J!==null;){if(B=Rs(J),B===null)return;if(ne=B.tag,ne===5||ne===6){j=_=B;continue e}J=J.parentNode}}j=j.return}Ni(function(){var he=_,Ne=Xt(h),Se=[];e:{var we=p1.get(o);if(we!==void 0){var Fe=Af,qe=o;switch(o){case"keypress":if(dd(h)===0)break e;case"keydown":case"keyup":Fe=MP;break;case"focusin":qe="focus",Fe=Of;break;case"focusout":qe="blur",Fe=Of;break;case"beforeblur":case"afterblur":Fe=Of;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=zj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=wP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=RP;break;case d1:case u1:case m1:Fe=kP;break;case f1:Fe=FP;break;case"scroll":Fe=yP;break;case"wheel":Fe=UP;break;case"copy":case"cut":case"paste":Fe=AP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Hj}var ze=(c&4)!==0,Jt=!ze&&o==="scroll",ce=ze?we!==null?we+"Capture":null:we;ze=[];for(var se=he,ue;se!==null;){ue=se;var Te=ue.stateNode;if(ue.tag===5&&Te!==null&&(ue=Te,ce!==null&&(Te=xa(se,ce),Te!=null&&ze.push(gl(se,Te,ue)))),Jt)break;se=se.return}0<ze.length&&(we=new Fe(we,qe,null,h,Ne),Se.push({event:we,listeners:ze}))}}if((c&7)===0){e:{if(we=o==="mouseover"||o==="pointerover",Fe=o==="mouseout"||o==="pointerout",we&&h!==Mt&&(qe=h.relatedTarget||h.fromElement)&&(Rs(qe)||qe[wa]))break e;if((Fe||we)&&(we=Ne.window===Ne?Ne:(we=Ne.ownerDocument)?we.defaultView||we.parentWindow:window,Fe?(qe=h.relatedTarget||h.toElement,Fe=he,qe=qe?Rs(qe):null,qe!==null&&(Jt=Pr(qe),qe!==Jt||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(Fe=null,qe=he),Fe!==qe)){if(ze=zj,Te="onMouseLeave",ce="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(ze=Hj,Te="onPointerLeave",ce="onPointerEnter",se="pointer"),Jt=Fe==null?we:Ri(Fe),ue=qe==null?we:Ri(qe),we=new ze(Te,se+"leave",Fe,h,Ne),we.target=Jt,we.relatedTarget=ue,Te=null,Rs(Ne)===he&&(ze=new ze(ce,se+"enter",qe,h,Ne),ze.target=ue,ze.relatedTarget=Jt,Te=ze),Jt=Te,Fe&&qe)t:{for(ze=Fe,ce=qe,se=0,ue=ze;ue;ue=Li(ue))se++;for(ue=0,Te=ce;Te;Te=Li(Te))ue++;for(;0<se-ue;)ze=Li(ze),se--;for(;0<ue-se;)ce=Li(ce),ue--;for(;se--;){if(ze===ce||ce!==null&&ze===ce.alternate)break t;ze=Li(ze),ce=Li(ce)}ze=null}else ze=null;Fe!==null&&v1(Se,we,Fe,ze,!1),qe!==null&&Jt!==null&&v1(Se,Jt,qe,ze,!0)}}e:{if(we=he?Ri(he):window,Fe=we.nodeName&&we.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&we.type==="file")var Ge=KP;else if(Qj(we))if(e1)Ge=QP;else{Ge=XP;var Je=YP}else(Fe=we.nodeName)&&Fe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Ge=JP);if(Ge&&(Ge=Ge(o,he))){Zj(Se,Ge,h,Ne);break e}Je&&Je(o,we,he),o==="focusout"&&(Je=we._wrapperState)&&Je.controlled&&we.type==="number"&&ae(we,"number",we.value)}switch(Je=he?Ri(he):window,o){case"focusin":(Qj(Je)||Je.contentEditable==="true")&&(Ii=Je,Df=he,pl=null);break;case"focusout":pl=Df=Ii=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,l1(Se,h,Ne);break;case"selectionchange":if(t6)break;case"keydown":case"keyup":l1(Se,h,Ne)}var Qe;if(_f)e:{switch(o){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else _i?Xj(o,h)&&(rt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(rt="onCompositionStart");rt&&(Vj&&h.locale!=="ko"&&(_i||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&_i&&(Qe=Wj()):(rs=Ne,Cf="value"in rs?rs.value:rs.textContent,_i=!0)),Je=gd(he,rt),0<Je.length&&(rt=new Gj(rt,o,null,h,Ne),Se.push({event:rt,listeners:Je}),Qe?rt.data=Qe:(Qe=Jj(h),Qe!==null&&(rt.data=Qe)))),(Qe=qP?zP(o,h):GP(o,h))&&(he=gd(he,"onBeforeInput"),0<he.length&&(Ne=new Gj("onBeforeInput","beforeinput",null,h,Ne),Se.push({event:Ne,listeners:he}),Ne.data=Qe))}g1(Se,c)})}function gl(o,c,h){return{instance:o,listener:c,currentTarget:h}}function gd(o,c){for(var h=c+"Capture",j=[];o!==null;){var A=o,_=A.stateNode;A.tag===5&&_!==null&&(A=_,_=xa(o,h),_!=null&&j.unshift(gl(o,_,A)),_=xa(o,c),_!=null&&j.push(gl(o,_,A))),o=o.return}return j}function Li(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function v1(o,c,h,j,A){for(var _=c._reactName,B=[];h!==null&&h!==j;){var J=h,ne=J.alternate,he=J.stateNode;if(ne!==null&&ne===j)break;J.tag===5&&he!==null&&(J=he,A?(ne=xa(h,_),ne!=null&&B.unshift(gl(h,ne,J))):A||(ne=xa(h,_),ne!=null&&B.push(gl(h,ne,J)))),h=h.return}B.length!==0&&o.push({event:c,listeners:B})}var s6=/\r\n?/g,i6=/\u0000|\uFFFD/g;function y1(o){return(typeof o=="string"?o:""+o).replace(s6,`
`).replace(i6,"")}function bd(o,c,h){if(c=y1(c),y1(o)!==c&&h)throw Error(n(425))}function vd(){}var qf=null,zf=null;function Gf(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,o6=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,l6=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(o){return j1.resolve(null).then(o).catch(c6)}:Hf;function c6(o){setTimeout(function(){throw o})}function Vf(o,c){var h=c,j=0;do{var A=h.nextSibling;if(o.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"){if(j===0){o.removeChild(A),ja(c);return}j--}else h!=="$"&&h!=="$?"&&h!=="$!"||j++;h=A}while(h);ja(c)}function as(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function w1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var Di=Math.random().toString(36).slice(2),ra="__reactFiber$"+Di,bl="__reactProps$"+Di,wa="__reactContainer$"+Di,Kf="__reactEvents$"+Di,d6="__reactListeners$"+Di,u6="__reactHandles$"+Di;function Rs(o){var c=o[ra];if(c)return c;for(var h=o.parentNode;h;){if(c=h[wa]||h[ra]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=w1(o);o!==null;){if(h=o[ra])return h;o=w1(o)}return c}o=h,h=o.parentNode}return null}function vl(o){return o=o[ra]||o[wa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ri(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function yd(o){return o[bl]||null}var Yf=[],$i=-1;function ss(o){return{current:o}}function Dt(o){0>$i||(o.current=Yf[$i],Yf[$i]=null,$i--)}function Ot(o,c){$i++,Yf[$i]=o.current,o.current=c}var is={},Sr=ss(is),Wr=ss(!1),$s=is;function Fi(o,c){var h=o.type.contextTypes;if(!h)return is;var j=o.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===c)return j.__reactInternalMemoizedMaskedChildContext;var A={},_;for(_ in h)A[_]=c[_];return j&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=A),A}function qr(o){return o=o.childContextTypes,o!=null}function jd(){Dt(Wr),Dt(Sr)}function N1(o,c,h){if(Sr.current!==is)throw Error(n(168));Ot(Sr,c),Ot(Wr,h)}function S1(o,c,h){var j=o.stateNode;if(c=c.childContextTypes,typeof j.getChildContext!="function")return h;j=j.getChildContext();for(var A in j)if(!(A in c))throw Error(n(108,pe(o)||"Unknown",A));return ee({},h,j)}function wd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||is,$s=Sr.current,Ot(Sr,o),Ot(Wr,Wr.current),!0}function k1(o,c,h){var j=o.stateNode;if(!j)throw Error(n(169));h?(o=S1(o,c,$s),j.__reactInternalMemoizedMergedChildContext=o,Dt(Wr),Dt(Sr),Ot(Sr,o)):Dt(Wr),Ot(Wr,h)}var Na=null,Nd=!1,Xf=!1;function C1(o){Na===null?Na=[o]:Na.push(o)}function m6(o){Nd=!0,C1(o)}function os(){if(!Xf&&Na!==null){Xf=!0;var o=0,c=yt;try{var h=Na;for(yt=1;o<h.length;o++){var j=h[o];do j=j(!0);while(j!==null)}Na=null,Nd=!1}catch(A){throw Na!==null&&(Na=Na.slice(o+1)),Ie(et,os),A}finally{yt=c,Xf=!1}}return null}var Bi=[],Ui=0,Sd=null,kd=0,mn=[],fn=0,Fs=null,Sa=1,ka="";function Bs(o,c){Bi[Ui++]=kd,Bi[Ui++]=Sd,Sd=o,kd=c}function A1(o,c,h){mn[fn++]=Sa,mn[fn++]=ka,mn[fn++]=Fs,Fs=o;var j=Sa;o=ka;var A=32-Xr(j)-1;j&=~(1<<A),h+=1;var _=32-Xr(c)+A;if(30<_){var B=A-A%5;_=(j&(1<<B)-1).toString(32),j>>=B,A-=B,Sa=1<<32-Xr(c)+A|h<<A|j,ka=_+o}else Sa=1<<_|h<<A|j,ka=o}function Jf(o){o.return!==null&&(Bs(o,1),A1(o,1,0))}function Qf(o){for(;o===Sd;)Sd=Bi[--Ui],Bi[Ui]=null,kd=Bi[--Ui],Bi[Ui]=null;for(;o===Fs;)Fs=mn[--fn],mn[fn]=null,ka=mn[--fn],mn[fn]=null,Sa=mn[--fn],mn[fn]=null}var Qr=null,Zr=null,Bt=!1,Mn=null;function T1(o,c){var h=gn(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function E1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Qr=o,Zr=as(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Qr=o,Zr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Fs!==null?{id:Sa,overflow:ka}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=gn(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,Qr=o,Zr=null,!0):!1;default:return!1}}function Zf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ep(o){if(Bt){var c=Zr;if(c){var h=c;if(!E1(o,c)){if(Zf(o))throw Error(n(418));c=as(h.nextSibling);var j=Qr;c&&E1(o,c)?T1(j,h):(o.flags=o.flags&-4097|2,Bt=!1,Qr=o)}}else{if(Zf(o))throw Error(n(418));o.flags=o.flags&-4097|2,Bt=!1,Qr=o}}}function O1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Qr=o}function Cd(o){if(o!==Qr)return!1;if(!Bt)return O1(o),Bt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Gf(o.type,o.memoizedProps)),c&&(c=Zr)){if(Zf(o))throw P1(),Error(n(418));for(;c;)T1(o,c),c=as(c.nextSibling)}if(O1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Zr=as(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Zr=null}}else Zr=Qr?as(o.stateNode.nextSibling):null;return!0}function P1(){for(var o=Zr;o;)o=as(o.nextSibling)}function Wi(){Zr=Qr=null,Bt=!1}function tp(o){Mn===null?Mn=[o]:Mn.push(o)}var f6=T.ReactCurrentBatchConfig;function yl(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var j=h.stateNode}if(!j)throw Error(n(147,o));var A=j,_=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(B){var J=A.refs;B===null?delete J[_]:J[_]=B},c._stringRef=_,c)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function Ad(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function _1(o){var c=o._init;return c(o._payload)}function I1(o){function c(ce,se){if(o){var ue=ce.deletions;ue===null?(ce.deletions=[se],ce.flags|=16):ue.push(se)}}function h(ce,se){if(!o)return null;for(;se!==null;)c(ce,se),se=se.sibling;return null}function j(ce,se){for(ce=new Map;se!==null;)se.key!==null?ce.set(se.key,se):ce.set(se.index,se),se=se.sibling;return ce}function A(ce,se){return ce=hs(ce,se),ce.index=0,ce.sibling=null,ce}function _(ce,se,ue){return ce.index=ue,o?(ue=ce.alternate,ue!==null?(ue=ue.index,ue<se?(ce.flags|=2,se):ue):(ce.flags|=2,se)):(ce.flags|=1048576,se)}function B(ce){return o&&ce.alternate===null&&(ce.flags|=2),ce}function J(ce,se,ue,Te){return se===null||se.tag!==6?(se=Hp(ue,ce.mode,Te),se.return=ce,se):(se=A(se,ue),se.return=ce,se)}function ne(ce,se,ue,Te){var Ge=ue.type;return Ge===E?Ne(ce,se,ue.props.children,Te,ue.key):se!==null&&(se.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===H&&_1(Ge)===se.type)?(Te=A(se,ue.props),Te.ref=yl(ce,se,ue),Te.return=ce,Te):(Te=Jd(ue.type,ue.key,ue.props,null,ce.mode,Te),Te.ref=yl(ce,se,ue),Te.return=ce,Te)}function he(ce,se,ue,Te){return se===null||se.tag!==4||se.stateNode.containerInfo!==ue.containerInfo||se.stateNode.implementation!==ue.implementation?(se=Vp(ue,ce.mode,Te),se.return=ce,se):(se=A(se,ue.children||[]),se.return=ce,se)}function Ne(ce,se,ue,Te,Ge){return se===null||se.tag!==7?(se=Ks(ue,ce.mode,Te,Ge),se.return=ce,se):(se=A(se,ue),se.return=ce,se)}function Se(ce,se,ue){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Hp(""+se,ce.mode,ue),se.return=ce,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case N:return ue=Jd(se.type,se.key,se.props,null,ce.mode,ue),ue.ref=yl(ce,null,se),ue.return=ce,ue;case O:return se=Vp(se,ce.mode,ue),se.return=ce,se;case H:var Te=se._init;return Se(ce,Te(se._payload),ue)}if(ye(se)||Q(se))return se=Ks(se,ce.mode,ue,null),se.return=ce,se;Ad(ce,se)}return null}function we(ce,se,ue,Te){var Ge=se!==null?se.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Ge!==null?null:J(ce,se,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return ue.key===Ge?ne(ce,se,ue,Te):null;case O:return ue.key===Ge?he(ce,se,ue,Te):null;case H:return Ge=ue._init,we(ce,se,Ge(ue._payload),Te)}if(ye(ue)||Q(ue))return Ge!==null?null:Ne(ce,se,ue,Te,null);Ad(ce,ue)}return null}function Fe(ce,se,ue,Te,Ge){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ce=ce.get(ue)||null,J(se,ce,""+Te,Ge);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return ce=ce.get(Te.key===null?ue:Te.key)||null,ne(se,ce,Te,Ge);case O:return ce=ce.get(Te.key===null?ue:Te.key)||null,he(se,ce,Te,Ge);case H:var Je=Te._init;return Fe(ce,se,ue,Je(Te._payload),Ge)}if(ye(Te)||Q(Te))return ce=ce.get(ue)||null,Ne(se,ce,Te,Ge,null);Ad(se,Te)}return null}function qe(ce,se,ue,Te){for(var Ge=null,Je=null,Qe=se,rt=se=0,pr=null;Qe!==null&&rt<ue.length;rt++){Qe.index>rt?(pr=Qe,Qe=null):pr=Qe.sibling;var bt=we(ce,Qe,ue[rt],Te);if(bt===null){Qe===null&&(Qe=pr);break}o&&Qe&&bt.alternate===null&&c(ce,Qe),se=_(bt,se,rt),Je===null?Ge=bt:Je.sibling=bt,Je=bt,Qe=pr}if(rt===ue.length)return h(ce,Qe),Bt&&Bs(ce,rt),Ge;if(Qe===null){for(;rt<ue.length;rt++)Qe=Se(ce,ue[rt],Te),Qe!==null&&(se=_(Qe,se,rt),Je===null?Ge=Qe:Je.sibling=Qe,Je=Qe);return Bt&&Bs(ce,rt),Ge}for(Qe=j(ce,Qe);rt<ue.length;rt++)pr=Fe(Qe,ce,rt,ue[rt],Te),pr!==null&&(o&&pr.alternate!==null&&Qe.delete(pr.key===null?rt:pr.key),se=_(pr,se,rt),Je===null?Ge=pr:Je.sibling=pr,Je=pr);return o&&Qe.forEach(function(xs){return c(ce,xs)}),Bt&&Bs(ce,rt),Ge}function ze(ce,se,ue,Te){var Ge=Q(ue);if(typeof Ge!="function")throw Error(n(150));if(ue=Ge.call(ue),ue==null)throw Error(n(151));for(var Je=Ge=null,Qe=se,rt=se=0,pr=null,bt=ue.next();Qe!==null&&!bt.done;rt++,bt=ue.next()){Qe.index>rt?(pr=Qe,Qe=null):pr=Qe.sibling;var xs=we(ce,Qe,bt.value,Te);if(xs===null){Qe===null&&(Qe=pr);break}o&&Qe&&xs.alternate===null&&c(ce,Qe),se=_(xs,se,rt),Je===null?Ge=xs:Je.sibling=xs,Je=xs,Qe=pr}if(bt.done)return h(ce,Qe),Bt&&Bs(ce,rt),Ge;if(Qe===null){for(;!bt.done;rt++,bt=ue.next())bt=Se(ce,bt.value,Te),bt!==null&&(se=_(bt,se,rt),Je===null?Ge=bt:Je.sibling=bt,Je=bt);return Bt&&Bs(ce,rt),Ge}for(Qe=j(ce,Qe);!bt.done;rt++,bt=ue.next())bt=Fe(Qe,ce,rt,bt.value,Te),bt!==null&&(o&&bt.alternate!==null&&Qe.delete(bt.key===null?rt:bt.key),se=_(bt,se,rt),Je===null?Ge=bt:Je.sibling=bt,Je=bt);return o&&Qe.forEach(function(H6){return c(ce,H6)}),Bt&&Bs(ce,rt),Ge}function Jt(ce,se,ue,Te){if(typeof ue=="object"&&ue!==null&&ue.type===E&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:e:{for(var Ge=ue.key,Je=se;Je!==null;){if(Je.key===Ge){if(Ge=ue.type,Ge===E){if(Je.tag===7){h(ce,Je.sibling),se=A(Je,ue.props.children),se.return=ce,ce=se;break e}}else if(Je.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===H&&_1(Ge)===Je.type){h(ce,Je.sibling),se=A(Je,ue.props),se.ref=yl(ce,Je,ue),se.return=ce,ce=se;break e}h(ce,Je);break}else c(ce,Je);Je=Je.sibling}ue.type===E?(se=Ks(ue.props.children,ce.mode,Te,ue.key),se.return=ce,ce=se):(Te=Jd(ue.type,ue.key,ue.props,null,ce.mode,Te),Te.ref=yl(ce,se,ue),Te.return=ce,ce=Te)}return B(ce);case O:e:{for(Je=ue.key;se!==null;){if(se.key===Je)if(se.tag===4&&se.stateNode.containerInfo===ue.containerInfo&&se.stateNode.implementation===ue.implementation){h(ce,se.sibling),se=A(se,ue.children||[]),se.return=ce,ce=se;break e}else{h(ce,se);break}else c(ce,se);se=se.sibling}se=Vp(ue,ce.mode,Te),se.return=ce,ce=se}return B(ce);case H:return Je=ue._init,Jt(ce,se,Je(ue._payload),Te)}if(ye(ue))return qe(ce,se,ue,Te);if(Q(ue))return ze(ce,se,ue,Te);Ad(ce,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,se!==null&&se.tag===6?(h(ce,se.sibling),se=A(se,ue),se.return=ce,ce=se):(h(ce,se),se=Hp(ue,ce.mode,Te),se.return=ce,ce=se),B(ce)):h(ce,se)}return Jt}var qi=I1(!0),M1=I1(!1),Td=ss(null),Ed=null,zi=null,rp=null;function np(){rp=zi=Ed=null}function ap(o){var c=Td.current;Dt(Td),o._currentValue=c}function sp(o,c,h){for(;o!==null;){var j=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,j!==null&&(j.childLanes|=c)):j!==null&&(j.childLanes&c)!==c&&(j.childLanes|=c),o===h)break;o=o.return}}function Gi(o,c){Ed=o,rp=zi=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(zr=!0),o.firstContext=null)}function pn(o){var c=o._currentValue;if(rp!==o)if(o={context:o,memoizedValue:c,next:null},zi===null){if(Ed===null)throw Error(n(308));zi=o,Ed.dependencies={lanes:0,firstContext:o}}else zi=zi.next=o;return c}var Us=null;function ip(o){Us===null?Us=[o]:Us.push(o)}function L1(o,c,h,j){var A=c.interleaved;return A===null?(h.next=h,ip(c)):(h.next=A.next,A.next=h),c.interleaved=h,Ca(o,j)}function Ca(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var ls=!1;function op(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Aa(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function cs(o,c,h){var j=o.updateQueue;if(j===null)return null;if(j=j.shared,(xt&2)!==0){var A=j.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),j.pending=c,Ca(o,h)}return A=j.interleaved,A===null?(c.next=c,ip(j)):(c.next=A.next,A.next=c),j.interleaved=c,Ca(o,h)}function Od(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var j=c.lanes;j&=o.pendingLanes,h|=j,c.lanes=h,al(o,h)}}function R1(o,c){var h=o.updateQueue,j=o.alternate;if(j!==null&&(j=j.updateQueue,h===j)){var A=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var B={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?A=_=B:_=_.next=B,h=h.next}while(h!==null);_===null?A=_=c:_=_.next=c}else A=_=c;h={baseState:j.baseState,firstBaseUpdate:A,lastBaseUpdate:_,shared:j.shared,effects:j.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Pd(o,c,h,j){var A=o.updateQueue;ls=!1;var _=A.firstBaseUpdate,B=A.lastBaseUpdate,J=A.shared.pending;if(J!==null){A.shared.pending=null;var ne=J,he=ne.next;ne.next=null,B===null?_=he:B.next=he,B=ne;var Ne=o.alternate;Ne!==null&&(Ne=Ne.updateQueue,J=Ne.lastBaseUpdate,J!==B&&(J===null?Ne.firstBaseUpdate=he:J.next=he,Ne.lastBaseUpdate=ne))}if(_!==null){var Se=A.baseState;B=0,Ne=he=ne=null,J=_;do{var we=J.lane,Fe=J.eventTime;if((j&we)===we){Ne!==null&&(Ne=Ne.next={eventTime:Fe,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var qe=o,ze=J;switch(we=c,Fe=h,ze.tag){case 1:if(qe=ze.payload,typeof qe=="function"){Se=qe.call(Fe,Se,we);break e}Se=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=ze.payload,we=typeof qe=="function"?qe.call(Fe,Se,we):qe,we==null)break e;Se=ee({},Se,we);break e;case 2:ls=!0}}J.callback!==null&&J.lane!==0&&(o.flags|=64,we=A.effects,we===null?A.effects=[J]:we.push(J))}else Fe={eventTime:Fe,lane:we,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ne===null?(he=Ne=Fe,ne=Se):Ne=Ne.next=Fe,B|=we;if(J=J.next,J===null){if(J=A.shared.pending,J===null)break;we=J,J=we.next,we.next=null,A.lastBaseUpdate=we,A.shared.pending=null}}while(!0);if(Ne===null&&(ne=Se),A.baseState=ne,A.firstBaseUpdate=he,A.lastBaseUpdate=Ne,c=A.shared.interleaved,c!==null){A=c;do B|=A.lane,A=A.next;while(A!==c)}else _===null&&(A.shared.lanes=0);zs|=B,o.lanes=B,o.memoizedState=Se}}function $1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var j=o[c],A=j.callback;if(A!==null){if(j.callback=null,j=h,typeof A!="function")throw Error(n(191,A));A.call(j)}}}var jl={},na=ss(jl),wl=ss(jl),Nl=ss(jl);function Ws(o){if(o===jl)throw Error(n(174));return o}function lp(o,c){switch(Ot(Nl,c),Ot(wl,o),Ot(na,jl),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Fr(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Fr(c,o)}Dt(na),Ot(na,c)}function Hi(){Dt(na),Dt(wl),Dt(Nl)}function F1(o){Ws(Nl.current);var c=Ws(na.current),h=Fr(c,o.type);c!==h&&(Ot(wl,o),Ot(na,h))}function cp(o){wl.current===o&&(Dt(na),Dt(wl))}var zt=ss(0);function _d(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var dp=[];function up(){for(var o=0;o<dp.length;o++)dp[o]._workInProgressVersionPrimary=null;dp.length=0}var Id=T.ReactCurrentDispatcher,mp=T.ReactCurrentBatchConfig,qs=0,Gt=null,ar=null,mr=null,Md=!1,Sl=!1,kl=0,p6=0;function kr(){throw Error(n(321))}function fp(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!In(o[h],c[h]))return!1;return!0}function pp(o,c,h,j,A,_){if(qs=_,Gt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Id.current=o===null||o.memoizedState===null?b6:v6,o=h(j,A),Sl){_=0;do{if(Sl=!1,kl=0,25<=_)throw Error(n(301));_+=1,mr=ar=null,c.updateQueue=null,Id.current=y6,o=h(j,A)}while(Sl)}if(Id.current=Rd,c=ar!==null&&ar.next!==null,qs=0,mr=ar=Gt=null,Md=!1,c)throw Error(n(300));return o}function hp(){var o=kl!==0;return kl=0,o}function aa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Gt.memoizedState=mr=o:mr=mr.next=o,mr}function hn(){if(ar===null){var o=Gt.alternate;o=o!==null?o.memoizedState:null}else o=ar.next;var c=mr===null?Gt.memoizedState:mr.next;if(c!==null)mr=c,ar=o;else{if(o===null)throw Error(n(310));ar=o,o={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},mr===null?Gt.memoizedState=mr=o:mr=mr.next=o}return mr}function Cl(o,c){return typeof c=="function"?c(o):c}function xp(o){var c=hn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var j=ar,A=j.baseQueue,_=h.pending;if(_!==null){if(A!==null){var B=A.next;A.next=_.next,_.next=B}j.baseQueue=A=_,h.pending=null}if(A!==null){_=A.next,j=j.baseState;var J=B=null,ne=null,he=_;do{var Ne=he.lane;if((qs&Ne)===Ne)ne!==null&&(ne=ne.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),j=he.hasEagerState?he.eagerState:o(j,he.action);else{var Se={lane:Ne,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};ne===null?(J=ne=Se,B=j):ne=ne.next=Se,Gt.lanes|=Ne,zs|=Ne}he=he.next}while(he!==null&&he!==_);ne===null?B=j:ne.next=J,In(j,c.memoizedState)||(zr=!0),c.memoizedState=j,c.baseState=B,c.baseQueue=ne,h.lastRenderedState=j}if(o=h.interleaved,o!==null){A=o;do _=A.lane,Gt.lanes|=_,zs|=_,A=A.next;while(A!==o)}else A===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function gp(o){var c=hn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var j=h.dispatch,A=h.pending,_=c.memoizedState;if(A!==null){h.pending=null;var B=A=A.next;do _=o(_,B.action),B=B.next;while(B!==A);In(_,c.memoizedState)||(zr=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,j]}function B1(){}function U1(o,c){var h=Gt,j=hn(),A=c(),_=!In(j.memoizedState,A);if(_&&(j.memoizedState=A,zr=!0),j=j.queue,bp(z1.bind(null,h,j,o),[o]),j.getSnapshot!==c||_||mr!==null&&mr.memoizedState.tag&1){if(h.flags|=2048,Al(9,q1.bind(null,h,j,A,c),void 0,null),fr===null)throw Error(n(349));(qs&30)!==0||W1(h,c,A)}return A}function W1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Gt.updateQueue,c===null?(c={lastEffect:null,stores:null},Gt.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function q1(o,c,h,j){c.value=h,c.getSnapshot=j,G1(c)&&H1(o)}function z1(o,c,h){return h(function(){G1(c)&&H1(o)})}function G1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!In(o,h)}catch{return!0}}function H1(o){var c=Ca(o,1);c!==null&&$n(c,o,1,-1)}function V1(o){var c=aa();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:o},c.queue=o,o=o.dispatch=g6.bind(null,Gt,o),[c.memoizedState,o]}function Al(o,c,h,j){return o={tag:o,create:c,destroy:h,deps:j,next:null},c=Gt.updateQueue,c===null?(c={lastEffect:null,stores:null},Gt.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(j=h.next,h.next=o,o.next=j,c.lastEffect=o)),o}function K1(){return hn().memoizedState}function Ld(o,c,h,j){var A=aa();Gt.flags|=o,A.memoizedState=Al(1|c,h,void 0,j===void 0?null:j)}function Dd(o,c,h,j){var A=hn();j=j===void 0?null:j;var _=void 0;if(ar!==null){var B=ar.memoizedState;if(_=B.destroy,j!==null&&fp(j,B.deps)){A.memoizedState=Al(c,h,_,j);return}}Gt.flags|=o,A.memoizedState=Al(1|c,h,_,j)}function Y1(o,c){return Ld(8390656,8,o,c)}function bp(o,c){return Dd(2048,8,o,c)}function X1(o,c){return Dd(4,2,o,c)}function J1(o,c){return Dd(4,4,o,c)}function Q1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Z1(o,c,h){return h=h!=null?h.concat([o]):null,Dd(4,4,Q1.bind(null,c,o),h)}function vp(){}function ew(o,c){var h=hn();c=c===void 0?null:c;var j=h.memoizedState;return j!==null&&c!==null&&fp(c,j[1])?j[0]:(h.memoizedState=[o,c],o)}function tw(o,c){var h=hn();c=c===void 0?null:c;var j=h.memoizedState;return j!==null&&c!==null&&fp(c,j[1])?j[0]:(o=o(),h.memoizedState=[o,c],o)}function rw(o,c,h){return(qs&21)===0?(o.baseState&&(o.baseState=!1,zr=!0),o.memoizedState=h):(In(h,c)||(h=rd(),Gt.lanes|=h,zs|=h,o.baseState=!0),c)}function h6(o,c){var h=yt;yt=h!==0&&4>h?h:4,o(!0);var j=mp.transition;mp.transition={};try{o(!1),c()}finally{yt=h,mp.transition=j}}function nw(){return hn().memoizedState}function x6(o,c,h){var j=fs(o);if(h={lane:j,action:h,hasEagerState:!1,eagerState:null,next:null},aw(o))sw(c,h);else if(h=L1(o,c,h,j),h!==null){var A=Ir();$n(h,o,j,A),iw(h,c,j)}}function g6(o,c,h){var j=fs(o),A={lane:j,action:h,hasEagerState:!1,eagerState:null,next:null};if(aw(o))sw(c,A);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var B=c.lastRenderedState,J=_(B,h);if(A.hasEagerState=!0,A.eagerState=J,In(J,B)){var ne=c.interleaved;ne===null?(A.next=A,ip(c)):(A.next=ne.next,ne.next=A),c.interleaved=A;return}}catch{}finally{}h=L1(o,c,A,j),h!==null&&(A=Ir(),$n(h,o,j,A),iw(h,c,j))}}function aw(o){var c=o.alternate;return o===Gt||c!==null&&c===Gt}function sw(o,c){Sl=Md=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function iw(o,c,h){if((h&4194240)!==0){var j=c.lanes;j&=o.pendingLanes,h|=j,c.lanes=h,al(o,h)}}var Rd={readContext:pn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},b6={readContext:pn,useCallback:function(o,c){return aa().memoizedState=[o,c===void 0?null:c],o},useContext:pn,useEffect:Y1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Ld(4194308,4,Q1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Ld(4194308,4,o,c)},useInsertionEffect:function(o,c){return Ld(4,2,o,c)},useMemo:function(o,c){var h=aa();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var j=aa();return c=h!==void 0?h(c):c,j.memoizedState=j.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},j.queue=o,o=o.dispatch=x6.bind(null,Gt,o),[j.memoizedState,o]},useRef:function(o){var c=aa();return o={current:o},c.memoizedState=o},useState:V1,useDebugValue:vp,useDeferredValue:function(o){return aa().memoizedState=o},useTransition:function(){var o=V1(!1),c=o[0];return o=h6.bind(null,o[1]),aa().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var j=Gt,A=aa();if(Bt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),fr===null)throw Error(n(349));(qs&30)!==0||W1(j,c,h)}A.memoizedState=h;var _={value:h,getSnapshot:c};return A.queue=_,Y1(z1.bind(null,j,_,o),[o]),j.flags|=2048,Al(9,q1.bind(null,j,_,h,c),void 0,null),h},useId:function(){var o=aa(),c=fr.identifierPrefix;if(Bt){var h=ka,j=Sa;h=(j&~(1<<32-Xr(j)-1)).toString(32)+h,c=":"+c+"R"+h,h=kl++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=p6++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},v6={readContext:pn,useCallback:ew,useContext:pn,useEffect:bp,useImperativeHandle:Z1,useInsertionEffect:X1,useLayoutEffect:J1,useMemo:tw,useReducer:xp,useRef:K1,useState:function(){return xp(Cl)},useDebugValue:vp,useDeferredValue:function(o){var c=hn();return rw(c,ar.memoizedState,o)},useTransition:function(){var o=xp(Cl)[0],c=hn().memoizedState;return[o,c]},useMutableSource:B1,useSyncExternalStore:U1,useId:nw,unstable_isNewReconciler:!1},y6={readContext:pn,useCallback:ew,useContext:pn,useEffect:bp,useImperativeHandle:Z1,useInsertionEffect:X1,useLayoutEffect:J1,useMemo:tw,useReducer:gp,useRef:K1,useState:function(){return gp(Cl)},useDebugValue:vp,useDeferredValue:function(o){var c=hn();return ar===null?c.memoizedState=o:rw(c,ar.memoizedState,o)},useTransition:function(){var o=gp(Cl)[0],c=hn().memoizedState;return[o,c]},useMutableSource:B1,useSyncExternalStore:U1,useId:nw,unstable_isNewReconciler:!1};function Ln(o,c){if(o&&o.defaultProps){c=ee({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function yp(o,c,h,j){c=o.memoizedState,h=h(j,c),h=h==null?c:ee({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var $d={isMounted:function(o){return(o=o._reactInternals)?Pr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var j=Ir(),A=fs(o),_=Aa(j,A);_.payload=c,h!=null&&(_.callback=h),c=cs(o,_,A),c!==null&&($n(c,o,A,j),Od(c,o,A))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var j=Ir(),A=fs(o),_=Aa(j,A);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=cs(o,_,A),c!==null&&($n(c,o,A,j),Od(c,o,A))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ir(),j=fs(o),A=Aa(h,j);A.tag=2,c!=null&&(A.callback=c),c=cs(o,A,j),c!==null&&($n(c,o,j,h),Od(c,o,j))}};function ow(o,c,h,j,A,_,B){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(j,_,B):c.prototype&&c.prototype.isPureReactComponent?!fl(h,j)||!fl(A,_):!0}function lw(o,c,h){var j=!1,A=is,_=c.contextType;return typeof _=="object"&&_!==null?_=pn(_):(A=qr(c)?$s:Sr.current,j=c.contextTypes,_=(j=j!=null)?Fi(o,A):is),c=new c(h,_),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=$d,o.stateNode=c,c._reactInternals=o,j&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=_),c}function cw(o,c,h,j){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,j),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,j),c.state!==o&&$d.enqueueReplaceState(c,c.state,null)}function jp(o,c,h,j){var A=o.stateNode;A.props=h,A.state=o.memoizedState,A.refs={},op(o);var _=c.contextType;typeof _=="object"&&_!==null?A.context=pn(_):(_=qr(c)?$s:Sr.current,A.context=Fi(o,_)),A.state=o.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(yp(o,c,_,h),A.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(c=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),c!==A.state&&$d.enqueueReplaceState(A,A.state,null),Pd(o,h,A,j),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function Vi(o,c){try{var h="",j=c;do h+=ie(j),j=j.return;while(j);var A=h}catch(_){A=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:c,stack:A,digest:null}}function wp(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Np(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var j6=typeof WeakMap=="function"?WeakMap:Map;function dw(o,c,h){h=Aa(-1,h),h.tag=3,h.payload={element:null};var j=c.value;return h.callback=function(){Gd||(Gd=!0,$p=j),Np(o,c)},h}function uw(o,c,h){h=Aa(-1,h),h.tag=3;var j=o.type.getDerivedStateFromError;if(typeof j=="function"){var A=c.value;h.payload=function(){return j(A)},h.callback=function(){Np(o,c)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Np(o,c),typeof j!="function"&&(us===null?us=new Set([this]):us.add(this));var B=c.stack;this.componentDidCatch(c.value,{componentStack:B!==null?B:""})}),h}function mw(o,c,h){var j=o.pingCache;if(j===null){j=o.pingCache=new j6;var A=new Set;j.set(c,A)}else A=j.get(c),A===void 0&&(A=new Set,j.set(c,A));A.has(h)||(A.add(h),o=L6.bind(null,o,c,h),c.then(o,o))}function fw(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function pw(o,c,h,j,A){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Aa(-1,1),c.tag=2,cs(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=A,o)}var w6=T.ReactCurrentOwner,zr=!1;function _r(o,c,h,j){c.child=o===null?M1(c,null,h,j):qi(c,o.child,h,j)}function hw(o,c,h,j,A){h=h.render;var _=c.ref;return Gi(c,A),j=pp(o,c,h,j,_,A),h=hp(),o!==null&&!zr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~A,Ta(o,c,A)):(Bt&&h&&Jf(c),c.flags|=1,_r(o,c,j,A),c.child)}function xw(o,c,h,j,A){if(o===null){var _=h.type;return typeof _=="function"&&!Gp(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,gw(o,c,_,j,A)):(o=Jd(h.type,null,j,c,c.mode,A),o.ref=c.ref,o.return=c,c.child=o)}if(_=o.child,(o.lanes&A)===0){var B=_.memoizedProps;if(h=h.compare,h=h!==null?h:fl,h(B,j)&&o.ref===c.ref)return Ta(o,c,A)}return c.flags|=1,o=hs(_,j),o.ref=c.ref,o.return=c,c.child=o}function gw(o,c,h,j,A){if(o!==null){var _=o.memoizedProps;if(fl(_,j)&&o.ref===c.ref)if(zr=!1,c.pendingProps=j=_,(o.lanes&A)!==0)(o.flags&131072)!==0&&(zr=!0);else return c.lanes=o.lanes,Ta(o,c,A)}return Sp(o,c,h,j,A)}function bw(o,c,h){var j=c.pendingProps,A=j.children,_=o!==null?o.memoizedState:null;if(j.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Yi,en),en|=h;else{if((h&1073741824)===0)return o=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Ot(Yi,en),en|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=_!==null?_.baseLanes:h,Ot(Yi,en),en|=j}else _!==null?(j=_.baseLanes|h,c.memoizedState=null):j=h,Ot(Yi,en),en|=j;return _r(o,c,A,h),c.child}function vw(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Sp(o,c,h,j,A){var _=qr(h)?$s:Sr.current;return _=Fi(c,_),Gi(c,A),h=pp(o,c,h,j,_,A),j=hp(),o!==null&&!zr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~A,Ta(o,c,A)):(Bt&&j&&Jf(c),c.flags|=1,_r(o,c,h,A),c.child)}function yw(o,c,h,j,A){if(qr(h)){var _=!0;wd(c)}else _=!1;if(Gi(c,A),c.stateNode===null)Bd(o,c),lw(c,h,j),jp(c,h,j,A),j=!0;else if(o===null){var B=c.stateNode,J=c.memoizedProps;B.props=J;var ne=B.context,he=h.contextType;typeof he=="object"&&he!==null?he=pn(he):(he=qr(h)?$s:Sr.current,he=Fi(c,he));var Ne=h.getDerivedStateFromProps,Se=typeof Ne=="function"||typeof B.getSnapshotBeforeUpdate=="function";Se||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==j||ne!==he)&&cw(c,B,j,he),ls=!1;var we=c.memoizedState;B.state=we,Pd(c,j,B,A),ne=c.memoizedState,J!==j||we!==ne||Wr.current||ls?(typeof Ne=="function"&&(yp(c,h,Ne,j),ne=c.memoizedState),(J=ls||ow(c,h,J,j,we,ne,he))?(Se||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(c.flags|=4194308)):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=j,c.memoizedState=ne),B.props=j,B.state=ne,B.context=he,j=J):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),j=!1)}else{B=c.stateNode,D1(o,c),J=c.memoizedProps,he=c.type===c.elementType?J:Ln(c.type,J),B.props=he,Se=c.pendingProps,we=B.context,ne=h.contextType,typeof ne=="object"&&ne!==null?ne=pn(ne):(ne=qr(h)?$s:Sr.current,ne=Fi(c,ne));var Fe=h.getDerivedStateFromProps;(Ne=typeof Fe=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==Se||we!==ne)&&cw(c,B,j,ne),ls=!1,we=c.memoizedState,B.state=we,Pd(c,j,B,A);var qe=c.memoizedState;J!==Se||we!==qe||Wr.current||ls?(typeof Fe=="function"&&(yp(c,h,Fe,j),qe=c.memoizedState),(he=ls||ow(c,h,he,j,we,qe,ne)||!1)?(Ne||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(j,qe,ne),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(j,qe,ne)),typeof B.componentDidUpdate=="function"&&(c.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof B.componentDidUpdate!="function"||J===o.memoizedProps&&we===o.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===o.memoizedProps&&we===o.memoizedState||(c.flags|=1024),c.memoizedProps=j,c.memoizedState=qe),B.props=j,B.state=qe,B.context=ne,j=he):(typeof B.componentDidUpdate!="function"||J===o.memoizedProps&&we===o.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===o.memoizedProps&&we===o.memoizedState||(c.flags|=1024),j=!1)}return kp(o,c,h,j,_,A)}function kp(o,c,h,j,A,_){vw(o,c);var B=(c.flags&128)!==0;if(!j&&!B)return A&&k1(c,h,!1),Ta(o,c,_);j=c.stateNode,w6.current=c;var J=B&&typeof h.getDerivedStateFromError!="function"?null:j.render();return c.flags|=1,o!==null&&B?(c.child=qi(c,o.child,null,_),c.child=qi(c,null,J,_)):_r(o,c,J,_),c.memoizedState=j.state,A&&k1(c,h,!0),c.child}function jw(o){var c=o.stateNode;c.pendingContext?N1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&N1(o,c.context,!1),lp(o,c.containerInfo)}function ww(o,c,h,j,A){return Wi(),tp(A),c.flags|=256,_r(o,c,h,j),c.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Ap(o){return{baseLanes:o,cachePool:null,transitions:null}}function Nw(o,c,h){var j=c.pendingProps,A=zt.current,_=!1,B=(c.flags&128)!==0,J;if((J=B)||(J=o!==null&&o.memoizedState===null?!1:(A&2)!==0),J?(_=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),Ot(zt,A&1),o===null)return ep(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(B=j.children,o=j.fallback,_?(j=c.mode,_=c.child,B={mode:"hidden",children:B},(j&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=B):_=Qd(B,j,0,null),o=Ks(o,j,h,null),_.return=c,o.return=c,_.sibling=o,c.child=_,c.child.memoizedState=Ap(h),c.memoizedState=Cp,o):Tp(c,B));if(A=o.memoizedState,A!==null&&(J=A.dehydrated,J!==null))return N6(o,c,B,j,J,A,h);if(_){_=j.fallback,B=c.mode,A=o.child,J=A.sibling;var ne={mode:"hidden",children:j.children};return(B&1)===0&&c.child!==A?(j=c.child,j.childLanes=0,j.pendingProps=ne,c.deletions=null):(j=hs(A,ne),j.subtreeFlags=A.subtreeFlags&14680064),J!==null?_=hs(J,_):(_=Ks(_,B,h,null),_.flags|=2),_.return=c,j.return=c,j.sibling=_,c.child=j,j=_,_=c.child,B=o.child.memoizedState,B=B===null?Ap(h):{baseLanes:B.baseLanes|h,cachePool:null,transitions:B.transitions},_.memoizedState=B,_.childLanes=o.childLanes&~h,c.memoizedState=Cp,j}return _=o.child,o=_.sibling,j=hs(_,{mode:"visible",children:j.children}),(c.mode&1)===0&&(j.lanes=h),j.return=c,j.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=j,c.memoizedState=null,j}function Tp(o,c){return c=Qd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Fd(o,c,h,j){return j!==null&&tp(j),qi(c,o.child,null,h),o=Tp(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function N6(o,c,h,j,A,_,B){if(h)return c.flags&256?(c.flags&=-257,j=wp(Error(n(422))),Fd(o,c,B,j)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(_=j.fallback,A=c.mode,j=Qd({mode:"visible",children:j.children},A,0,null),_=Ks(_,A,B,null),_.flags|=2,j.return=c,_.return=c,j.sibling=_,c.child=j,(c.mode&1)!==0&&qi(c,o.child,null,B),c.child.memoizedState=Ap(B),c.memoizedState=Cp,_);if((c.mode&1)===0)return Fd(o,c,B,null);if(A.data==="$!"){if(j=A.nextSibling&&A.nextSibling.dataset,j)var J=j.dgst;return j=J,_=Error(n(419)),j=wp(_,j,void 0),Fd(o,c,B,j)}if(J=(B&o.childLanes)!==0,zr||J){if(j=fr,j!==null){switch(B&-B){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(j.suspendedLanes|B))!==0?0:A,A!==0&&A!==_.retryLane&&(_.retryLane=A,Ca(o,A),$n(j,o,A,-1))}return zp(),j=wp(Error(n(421))),Fd(o,c,B,j)}return A.data==="$?"?(c.flags|=128,c.child=o.child,c=D6.bind(null,o),A._reactRetry=c,null):(o=_.treeContext,Zr=as(A.nextSibling),Qr=c,Bt=!0,Mn=null,o!==null&&(mn[fn++]=Sa,mn[fn++]=ka,mn[fn++]=Fs,Sa=o.id,ka=o.overflow,Fs=c),c=Tp(c,j.children),c.flags|=4096,c)}function Sw(o,c,h){o.lanes|=c;var j=o.alternate;j!==null&&(j.lanes|=c),sp(o.return,c,h)}function Ep(o,c,h,j,A){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:j,tail:h,tailMode:A}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=j,_.tail=h,_.tailMode=A)}function kw(o,c,h){var j=c.pendingProps,A=j.revealOrder,_=j.tail;if(_r(o,c,j.children,h),j=zt.current,(j&2)!==0)j=j&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Sw(o,h,c);else if(o.tag===19)Sw(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}j&=1}if(Ot(zt,j),(c.mode&1)===0)c.memoizedState=null;else switch(A){case"forwards":for(h=c.child,A=null;h!==null;)o=h.alternate,o!==null&&_d(o)===null&&(A=h),h=h.sibling;h=A,h===null?(A=c.child,c.child=null):(A=h.sibling,h.sibling=null),Ep(c,!1,A,h,_);break;case"backwards":for(h=null,A=c.child,c.child=null;A!==null;){if(o=A.alternate,o!==null&&_d(o)===null){c.child=A;break}o=A.sibling,A.sibling=h,h=A,A=o}Ep(c,!0,h,null,_);break;case"together":Ep(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Bd(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ta(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),zs|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,h=hs(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=hs(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function S6(o,c,h){switch(c.tag){case 3:jw(c),Wi();break;case 5:F1(c);break;case 1:qr(c.type)&&wd(c);break;case 4:lp(c,c.stateNode.containerInfo);break;case 10:var j=c.type._context,A=c.memoizedProps.value;Ot(Td,j._currentValue),j._currentValue=A;break;case 13:if(j=c.memoizedState,j!==null)return j.dehydrated!==null?(Ot(zt,zt.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?Nw(o,c,h):(Ot(zt,zt.current&1),o=Ta(o,c,h),o!==null?o.sibling:null);Ot(zt,zt.current&1);break;case 19:if(j=(h&c.childLanes)!==0,(o.flags&128)!==0){if(j)return kw(o,c,h);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Ot(zt,zt.current),j)break;return null;case 22:case 23:return c.lanes=0,bw(o,c,h)}return Ta(o,c,h)}var Cw,Op,Aw,Tw;Cw=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Op=function(){},Aw=function(o,c,h,j){var A=o.memoizedProps;if(A!==j){o=c.stateNode,Ws(na.current);var _=null;switch(h){case"input":A=Me(o,A),j=Me(o,j),_=[];break;case"select":A=ee({},A,{value:void 0}),j=ee({},j,{value:void 0}),_=[];break;case"textarea":A=Z(o,A),j=Z(o,j),_=[];break;default:typeof A.onClick!="function"&&typeof j.onClick=="function"&&(o.onclick=vd)}Re(h,j);var B;h=null;for(he in A)if(!j.hasOwnProperty(he)&&A.hasOwnProperty(he)&&A[he]!=null)if(he==="style"){var J=A[he];for(B in J)J.hasOwnProperty(B)&&(h||(h={}),h[B]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(s.hasOwnProperty(he)?_||(_=[]):(_=_||[]).push(he,null));for(he in j){var ne=j[he];if(J=A?.[he],j.hasOwnProperty(he)&&ne!==J&&(ne!=null||J!=null))if(he==="style")if(J){for(B in J)!J.hasOwnProperty(B)||ne&&ne.hasOwnProperty(B)||(h||(h={}),h[B]="");for(B in ne)ne.hasOwnProperty(B)&&J[B]!==ne[B]&&(h||(h={}),h[B]=ne[B])}else h||(_||(_=[]),_.push(he,h)),h=ne;else he==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,J=J?J.__html:void 0,ne!=null&&J!==ne&&(_=_||[]).push(he,ne)):he==="children"?typeof ne!="string"&&typeof ne!="number"||(_=_||[]).push(he,""+ne):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(s.hasOwnProperty(he)?(ne!=null&&he==="onScroll"&&Lt("scroll",o),_||J===ne||(_=[])):(_=_||[]).push(he,ne))}h&&(_=_||[]).push("style",h);var he=_;(c.updateQueue=he)&&(c.flags|=4)}},Tw=function(o,c,h,j){h!==j&&(c.flags|=4)};function Tl(o,c){if(!Bt)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var j=null;h!==null;)h.alternate!==null&&(j=h),h=h.sibling;j===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:j.sibling=null}}function Cr(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,j=0;if(c)for(var A=o.child;A!==null;)h|=A.lanes|A.childLanes,j|=A.subtreeFlags&14680064,j|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)h|=A.lanes|A.childLanes,j|=A.subtreeFlags,j|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=j,o.childLanes=h,c}function k6(o,c,h){var j=c.pendingProps;switch(Qf(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(c),null;case 1:return qr(c.type)&&jd(),Cr(c),null;case 3:return j=c.stateNode,Hi(),Dt(Wr),Dt(Sr),up(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(o===null||o.child===null)&&(Cd(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Mn!==null&&(Up(Mn),Mn=null))),Op(o,c),Cr(c),null;case 5:cp(c);var A=Ws(Nl.current);if(h=c.type,o!==null&&c.stateNode!=null)Aw(o,c,h,j,A),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!j){if(c.stateNode===null)throw Error(n(166));return Cr(c),null}if(o=Ws(na.current),Cd(c)){j=c.stateNode,h=c.type;var _=c.memoizedProps;switch(j[ra]=c,j[bl]=_,o=(c.mode&1)!==0,h){case"dialog":Lt("cancel",j),Lt("close",j);break;case"iframe":case"object":case"embed":Lt("load",j);break;case"video":case"audio":for(A=0;A<hl.length;A++)Lt(hl[A],j);break;case"source":Lt("error",j);break;case"img":case"image":case"link":Lt("error",j),Lt("load",j);break;case"details":Lt("toggle",j);break;case"input":Ee(j,_),Lt("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!_.multiple},Lt("invalid",j);break;case"textarea":Pe(j,_),Lt("invalid",j)}Re(h,_),A=null;for(var B in _)if(_.hasOwnProperty(B)){var J=_[B];B==="children"?typeof J=="string"?j.textContent!==J&&(_.suppressHydrationWarning!==!0&&bd(j.textContent,J,o),A=["children",J]):typeof J=="number"&&j.textContent!==""+J&&(_.suppressHydrationWarning!==!0&&bd(j.textContent,J,o),A=["children",""+J]):s.hasOwnProperty(B)&&J!=null&&B==="onScroll"&&Lt("scroll",j)}switch(h){case"input":re(j),De(j,_,!0);break;case"textarea":re(j),At(j);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(j.onclick=vd)}j=A,c.updateQueue=j,j!==null&&(c.flags|=4)}else{B=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ft(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=B.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof j.is=="string"?o=B.createElement(h,{is:j.is}):(o=B.createElement(h),h==="select"&&(B=o,j.multiple?B.multiple=!0:j.size&&(B.size=j.size))):o=B.createElementNS(o,h),o[ra]=c,o[bl]=j,Cw(o,c,!1,!1),c.stateNode=o;e:{switch(B=Ke(h,j),h){case"dialog":Lt("cancel",o),Lt("close",o),A=j;break;case"iframe":case"object":case"embed":Lt("load",o),A=j;break;case"video":case"audio":for(A=0;A<hl.length;A++)Lt(hl[A],o);A=j;break;case"source":Lt("error",o),A=j;break;case"img":case"image":case"link":Lt("error",o),Lt("load",o),A=j;break;case"details":Lt("toggle",o),A=j;break;case"input":Ee(o,j),A=Me(o,j),Lt("invalid",o);break;case"option":A=j;break;case"select":o._wrapperState={wasMultiple:!!j.multiple},A=ee({},j,{value:void 0}),Lt("invalid",o);break;case"textarea":Pe(o,j),A=Z(o,j),Lt("invalid",o);break;default:A=j}Re(h,A),J=A;for(_ in J)if(J.hasOwnProperty(_)){var ne=J[_];_==="style"?oe(o,ne):_==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&Br(o,ne)):_==="children"?typeof ne=="string"?(h!=="textarea"||ne!=="")&&br(o,ne):typeof ne=="number"&&br(o,""+ne):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?ne!=null&&_==="onScroll"&&Lt("scroll",o):ne!=null&&k(o,_,ne,B))}switch(h){case"input":re(o),De(o,j,!1);break;case"textarea":re(o),At(o);break;case"option":j.value!=null&&o.setAttribute("value",""+be(j.value));break;case"select":o.multiple=!!j.multiple,_=j.value,_!=null?Oe(o,!!j.multiple,_,!1):j.defaultValue!=null&&Oe(o,!!j.multiple,j.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=vd)}switch(h){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Cr(c),null;case 6:if(o&&c.stateNode!=null)Tw(o,c,o.memoizedProps,j);else{if(typeof j!="string"&&c.stateNode===null)throw Error(n(166));if(h=Ws(Nl.current),Ws(na.current),Cd(c)){if(j=c.stateNode,h=c.memoizedProps,j[ra]=c,(_=j.nodeValue!==h)&&(o=Qr,o!==null))switch(o.tag){case 3:bd(j.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&bd(j.nodeValue,h,(o.mode&1)!==0)}_&&(c.flags|=4)}else j=(h.nodeType===9?h:h.ownerDocument).createTextNode(j),j[ra]=c,c.stateNode=j}return Cr(c),null;case 13:if(Dt(zt),j=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Bt&&Zr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)P1(),Wi(),c.flags|=98560,_=!1;else if(_=Cd(c),j!==null&&j.dehydrated!==null){if(o===null){if(!_)throw Error(n(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[ra]=c}else Wi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Cr(c),_=!1}else Mn!==null&&(Up(Mn),Mn=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(j=j!==null,j!==(o!==null&&o.memoizedState!==null)&&j&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(zt.current&1)!==0?sr===0&&(sr=3):zp())),c.updateQueue!==null&&(c.flags|=4),Cr(c),null);case 4:return Hi(),Op(o,c),o===null&&xl(c.stateNode.containerInfo),Cr(c),null;case 10:return ap(c.type._context),Cr(c),null;case 17:return qr(c.type)&&jd(),Cr(c),null;case 19:if(Dt(zt),_=c.memoizedState,_===null)return Cr(c),null;if(j=(c.flags&128)!==0,B=_.rendering,B===null)if(j)Tl(_,!1);else{if(sr!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(B=_d(o),B!==null){for(c.flags|=128,Tl(_,!1),j=B.updateQueue,j!==null&&(c.updateQueue=j,c.flags|=4),c.subtreeFlags=0,j=h,h=c.child;h!==null;)_=h,o=j,_.flags&=14680066,B=_.alternate,B===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=B.childLanes,_.lanes=B.lanes,_.child=B.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=B.memoizedProps,_.memoizedState=B.memoizedState,_.updateQueue=B.updateQueue,_.type=B.type,o=B.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Ot(zt,zt.current&1|2),c.child}o=o.sibling}_.tail!==null&&Nt()>Xi&&(c.flags|=128,j=!0,Tl(_,!1),c.lanes=4194304)}else{if(!j)if(o=_d(B),o!==null){if(c.flags|=128,j=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Tl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!B.alternate&&!Bt)return Cr(c),null}else 2*Nt()-_.renderingStartTime>Xi&&h!==1073741824&&(c.flags|=128,j=!0,Tl(_,!1),c.lanes=4194304);_.isBackwards?(B.sibling=c.child,c.child=B):(h=_.last,h!==null?h.sibling=B:c.child=B,_.last=B)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=Nt(),c.sibling=null,h=zt.current,Ot(zt,j?h&1|2:h&1),c):(Cr(c),null);case 22:case 23:return qp(),j=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==j&&(c.flags|=8192),j&&(c.mode&1)!==0?(en&1073741824)!==0&&(Cr(c),c.subtreeFlags&6&&(c.flags|=8192)):Cr(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function C6(o,c){switch(Qf(c),c.tag){case 1:return qr(c.type)&&jd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Hi(),Dt(Wr),Dt(Sr),up(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return cp(c),null;case 13:if(Dt(zt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Wi()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Dt(zt),null;case 4:return Hi(),null;case 10:return ap(c.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var Ud=!1,Ar=!1,A6=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Ki(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(j){Kt(o,c,j)}else h.current=null}function Pp(o,c,h){try{h()}catch(j){Kt(o,c,j)}}var Ew=!1;function T6(o,c){if(qf=od,o=o1(),Lf(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var j=h.getSelection&&h.getSelection();if(j&&j.rangeCount!==0){h=j.anchorNode;var A=j.anchorOffset,_=j.focusNode;j=j.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var B=0,J=-1,ne=-1,he=0,Ne=0,Se=o,we=null;t:for(;;){for(var Fe;Se!==h||A!==0&&Se.nodeType!==3||(J=B+A),Se!==_||j!==0&&Se.nodeType!==3||(ne=B+j),Se.nodeType===3&&(B+=Se.nodeValue.length),(Fe=Se.firstChild)!==null;)we=Se,Se=Fe;for(;;){if(Se===o)break t;if(we===h&&++he===A&&(J=B),we===_&&++Ne===j&&(ne=B),(Fe=Se.nextSibling)!==null)break;Se=we,we=Se.parentNode}Se=Fe}h=J===-1||ne===-1?null:{start:J,end:ne}}else h=null}h=h||{start:0,end:0}}else h=null;for(zf={focusedElem:o,selectionRange:h},od=!1,Ue=c;Ue!==null;)if(c=Ue,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ue=o;else for(;Ue!==null;){c=Ue;try{var qe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var ze=qe.memoizedProps,Jt=qe.memoizedState,ce=c.stateNode,se=ce.getSnapshotBeforeUpdate(c.elementType===c.type?ze:Ln(c.type,ze),Jt);ce.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Te){Kt(c,c.return,Te)}if(o=c.sibling,o!==null){o.return=c.return,Ue=o;break}Ue=c.return}return qe=Ew,Ew=!1,qe}function El(o,c,h){var j=c.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var A=j=j.next;do{if((A.tag&o)===o){var _=A.destroy;A.destroy=void 0,_!==void 0&&Pp(c,h,_)}A=A.next}while(A!==j)}}function Wd(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var j=h.create;h.destroy=j()}h=h.next}while(h!==c)}}function _p(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function Ow(o){var c=o.alternate;c!==null&&(o.alternate=null,Ow(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ra],delete c[bl],delete c[Kf],delete c[d6],delete c[u6])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Pw(o){return o.tag===5||o.tag===3||o.tag===4}function _w(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Pw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ip(o,c,h){var j=o.tag;if(j===5||j===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=vd));else if(j!==4&&(o=o.child,o!==null))for(Ip(o,c,h),o=o.sibling;o!==null;)Ip(o,c,h),o=o.sibling}function Mp(o,c,h){var j=o.tag;if(j===5||j===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(j!==4&&(o=o.child,o!==null))for(Mp(o,c,h),o=o.sibling;o!==null;)Mp(o,c,h),o=o.sibling}var yr=null,Dn=!1;function ds(o,c,h){for(h=h.child;h!==null;)Iw(o,c,h),h=h.sibling}function Iw(o,c,h){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Za,h)}catch{}switch(h.tag){case 5:Ar||Ki(h,c);case 6:var j=yr,A=Dn;yr=null,ds(o,c,h),yr=j,Dn=A,yr!==null&&(Dn?(o=yr,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):yr.removeChild(h.stateNode));break;case 18:yr!==null&&(Dn?(o=yr,h=h.stateNode,o.nodeType===8?Vf(o.parentNode,h):o.nodeType===1&&Vf(o,h),ja(o)):Vf(yr,h.stateNode));break;case 4:j=yr,A=Dn,yr=h.stateNode.containerInfo,Dn=!0,ds(o,c,h),yr=j,Dn=A;break;case 0:case 11:case 14:case 15:if(!Ar&&(j=h.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){A=j=j.next;do{var _=A,B=_.destroy;_=_.tag,B!==void 0&&((_&2)!==0||(_&4)!==0)&&Pp(h,c,B),A=A.next}while(A!==j)}ds(o,c,h);break;case 1:if(!Ar&&(Ki(h,c),j=h.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=h.memoizedProps,j.state=h.memoizedState,j.componentWillUnmount()}catch(J){Kt(h,c,J)}ds(o,c,h);break;case 21:ds(o,c,h);break;case 22:h.mode&1?(Ar=(j=Ar)||h.memoizedState!==null,ds(o,c,h),Ar=j):ds(o,c,h);break;default:ds(o,c,h)}}function Mw(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new A6),c.forEach(function(j){var A=R6.bind(null,o,j);h.has(j)||(h.add(j),j.then(A,A))})}}function Rn(o,c){var h=c.deletions;if(h!==null)for(var j=0;j<h.length;j++){var A=h[j];try{var _=o,B=c,J=B;e:for(;J!==null;){switch(J.tag){case 5:yr=J.stateNode,Dn=!1;break e;case 3:yr=J.stateNode.containerInfo,Dn=!0;break e;case 4:yr=J.stateNode.containerInfo,Dn=!0;break e}J=J.return}if(yr===null)throw Error(n(160));Iw(_,B,A),yr=null,Dn=!1;var ne=A.alternate;ne!==null&&(ne.return=null),A.return=null}catch(he){Kt(A,c,he)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Lw(c,o),c=c.sibling}function Lw(o,c){var h=o.alternate,j=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Rn(c,o),sa(o),j&4){try{El(3,o,o.return),Wd(3,o)}catch(ze){Kt(o,o.return,ze)}try{El(5,o,o.return)}catch(ze){Kt(o,o.return,ze)}}break;case 1:Rn(c,o),sa(o),j&512&&h!==null&&Ki(h,h.return);break;case 5:if(Rn(c,o),sa(o),j&512&&h!==null&&Ki(h,h.return),o.flags&32){var A=o.stateNode;try{br(A,"")}catch(ze){Kt(o,o.return,ze)}}if(j&4&&(A=o.stateNode,A!=null)){var _=o.memoizedProps,B=h!==null?h.memoizedProps:_,J=o.type,ne=o.updateQueue;if(o.updateQueue=null,ne!==null)try{J==="input"&&_.type==="radio"&&_.name!=null&&Xe(A,_),Ke(J,B);var he=Ke(J,_);for(B=0;B<ne.length;B+=2){var Ne=ne[B],Se=ne[B+1];Ne==="style"?oe(A,Se):Ne==="dangerouslySetInnerHTML"?Br(A,Se):Ne==="children"?br(A,Se):k(A,Ne,Se,he)}switch(J){case"input":ge(A,_);break;case"textarea":lt(A,_);break;case"select":var we=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!_.multiple;var Fe=_.value;Fe!=null?Oe(A,!!_.multiple,Fe,!1):we!==!!_.multiple&&(_.defaultValue!=null?Oe(A,!!_.multiple,_.defaultValue,!0):Oe(A,!!_.multiple,_.multiple?[]:"",!1))}A[bl]=_}catch(ze){Kt(o,o.return,ze)}}break;case 6:if(Rn(c,o),sa(o),j&4){if(o.stateNode===null)throw Error(n(162));A=o.stateNode,_=o.memoizedProps;try{A.nodeValue=_}catch(ze){Kt(o,o.return,ze)}}break;case 3:if(Rn(c,o),sa(o),j&4&&h!==null&&h.memoizedState.isDehydrated)try{ja(c.containerInfo)}catch(ze){Kt(o,o.return,ze)}break;case 4:Rn(c,o),sa(o);break;case 13:Rn(c,o),sa(o),A=o.child,A.flags&8192&&(_=A.memoizedState!==null,A.stateNode.isHidden=_,!_||A.alternate!==null&&A.alternate.memoizedState!==null||(Rp=Nt())),j&4&&Mw(o);break;case 22:if(Ne=h!==null&&h.memoizedState!==null,o.mode&1?(Ar=(he=Ar)||Ne,Rn(c,o),Ar=he):Rn(c,o),sa(o),j&8192){if(he=o.memoizedState!==null,(o.stateNode.isHidden=he)&&!Ne&&(o.mode&1)!==0)for(Ue=o,Ne=o.child;Ne!==null;){for(Se=Ue=Ne;Ue!==null;){switch(we=Ue,Fe=we.child,we.tag){case 0:case 11:case 14:case 15:El(4,we,we.return);break;case 1:Ki(we,we.return);var qe=we.stateNode;if(typeof qe.componentWillUnmount=="function"){j=we,h=we.return;try{c=j,qe.props=c.memoizedProps,qe.state=c.memoizedState,qe.componentWillUnmount()}catch(ze){Kt(j,h,ze)}}break;case 5:Ki(we,we.return);break;case 22:if(we.memoizedState!==null){$w(Se);continue}}Fe!==null?(Fe.return=we,Ue=Fe):$w(Se)}Ne=Ne.sibling}e:for(Ne=null,Se=o;;){if(Se.tag===5){if(Ne===null){Ne=Se;try{A=Se.stateNode,he?(_=A.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(J=Se.stateNode,ne=Se.memoizedProps.style,B=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,J.style.display=vr("display",B))}catch(ze){Kt(o,o.return,ze)}}}else if(Se.tag===6){if(Ne===null)try{Se.stateNode.nodeValue=he?"":Se.memoizedProps}catch(ze){Kt(o,o.return,ze)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===o)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===o)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===o)break e;Ne===Se&&(Ne=null),Se=Se.return}Ne===Se&&(Ne=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:Rn(c,o),sa(o),j&4&&Mw(o);break;case 21:break;default:Rn(c,o),sa(o)}}function sa(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(Pw(h)){var j=h;break e}h=h.return}throw Error(n(160))}switch(j.tag){case 5:var A=j.stateNode;j.flags&32&&(br(A,""),j.flags&=-33);var _=_w(o);Mp(o,_,A);break;case 3:case 4:var B=j.stateNode.containerInfo,J=_w(o);Ip(o,J,B);break;default:throw Error(n(161))}}catch(ne){Kt(o,o.return,ne)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function E6(o,c,h){Ue=o,Dw(o)}function Dw(o,c,h){for(var j=(o.mode&1)!==0;Ue!==null;){var A=Ue,_=A.child;if(A.tag===22&&j){var B=A.memoizedState!==null||Ud;if(!B){var J=A.alternate,ne=J!==null&&J.memoizedState!==null||Ar;J=Ud;var he=Ar;if(Ud=B,(Ar=ne)&&!he)for(Ue=A;Ue!==null;)B=Ue,ne=B.child,B.tag===22&&B.memoizedState!==null?Fw(A):ne!==null?(ne.return=B,Ue=ne):Fw(A);for(;_!==null;)Ue=_,Dw(_),_=_.sibling;Ue=A,Ud=J,Ar=he}Rw(o)}else(A.subtreeFlags&8772)!==0&&_!==null?(_.return=A,Ue=_):Rw(o)}}function Rw(o){for(;Ue!==null;){var c=Ue;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ar||Wd(5,c);break;case 1:var j=c.stateNode;if(c.flags&4&&!Ar)if(h===null)j.componentDidMount();else{var A=c.elementType===c.type?h.memoizedProps:Ln(c.type,h.memoizedProps);j.componentDidUpdate(A,h.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&$1(c,_,j);break;case 3:var B=c.updateQueue;if(B!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}$1(c,B,h)}break;case 5:var J=c.stateNode;if(h===null&&c.flags&4){h=J;var ne=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&h.focus();break;case"img":ne.src&&(h.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var he=c.alternate;if(he!==null){var Ne=he.memoizedState;if(Ne!==null){var Se=Ne.dehydrated;Se!==null&&ja(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ar||c.flags&512&&_p(c)}catch(we){Kt(c,c.return,we)}}if(c===o){Ue=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ue=h;break}Ue=c.return}}function $w(o){for(;Ue!==null;){var c=Ue;if(c===o){Ue=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ue=h;break}Ue=c.return}}function Fw(o){for(;Ue!==null;){var c=Ue;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Wd(4,c)}catch(ne){Kt(c,h,ne)}break;case 1:var j=c.stateNode;if(typeof j.componentDidMount=="function"){var A=c.return;try{j.componentDidMount()}catch(ne){Kt(c,A,ne)}}var _=c.return;try{_p(c)}catch(ne){Kt(c,_,ne)}break;case 5:var B=c.return;try{_p(c)}catch(ne){Kt(c,B,ne)}}}catch(ne){Kt(c,c.return,ne)}if(c===o){Ue=null;break}var J=c.sibling;if(J!==null){J.return=c.return,Ue=J;break}Ue=c.return}}var O6=Math.ceil,qd=T.ReactCurrentDispatcher,Lp=T.ReactCurrentOwner,xn=T.ReactCurrentBatchConfig,xt=0,fr=null,Zt=null,jr=0,en=0,Yi=ss(0),sr=0,Ol=null,zs=0,zd=0,Dp=0,Pl=null,Gr=null,Rp=0,Xi=1/0,Ea=null,Gd=!1,$p=null,us=null,Hd=!1,ms=null,Vd=0,_l=0,Fp=null,Kd=-1,Yd=0;function Ir(){return(xt&6)!==0?Nt():Kd!==-1?Kd:Kd=Nt()}function fs(o){return(o.mode&1)===0?1:(xt&2)!==0&&jr!==0?jr&-jr:f6.transition!==null?(Yd===0&&(Yd=rd()),Yd):(o=yt,o!==0||(o=window.event,o=o===void 0?16:Uj(o.type)),o)}function $n(o,c,h,j){if(50<_l)throw _l=0,Fp=null,Error(n(185));Ls(o,h,j),((xt&2)===0||o!==fr)&&(o===fr&&((xt&2)===0&&(zd|=h),sr===4&&ps(o,jr)),Hr(o,j),h===1&&xt===0&&(c.mode&1)===0&&(Xi=Nt()+500,Nd&&os()))}function Hr(o,c){var h=o.callbackNode;wf(o,c);var j=Ai(o,o===fr?jr:0);if(j===0)h!==null&&Ae(h),o.callbackNode=null,o.callbackPriority=0;else if(c=j&-j,o.callbackPriority!==c){if(h!=null&&Ae(h),c===1)o.tag===0?m6(Uw.bind(null,o)):C1(Uw.bind(null,o)),l6(function(){(xt&6)===0&&os()}),h=null;else{switch(nd(j)){case 1:h=et;break;case 4:h=_n;break;case 16:h=Qa;break;case 536870912:h=td;break;default:h=Qa}h=Yw(h,Bw.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function Bw(o,c){if(Kd=-1,Yd=0,(xt&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Ji()&&o.callbackNode!==h)return null;var j=Ai(o,o===fr?jr:0);if(j===0)return null;if((j&30)!==0||(j&o.expiredLanes)!==0||c)c=Xd(o,j);else{c=j;var A=xt;xt|=2;var _=qw();(fr!==o||jr!==c)&&(Ea=null,Xi=Nt()+500,Hs(o,c));do try{I6();break}catch(J){Ww(o,J)}while(!0);np(),qd.current=_,xt=A,Zt!==null?c=0:(fr=null,jr=0,c=sr)}if(c!==0){if(c===2&&(A=rl(o),A!==0&&(j=A,c=Bp(o,A))),c===1)throw h=Ol,Hs(o,0),ps(o,j),Hr(o,Nt()),h;if(c===6)ps(o,j);else{if(A=o.current.alternate,(j&30)===0&&!P6(A)&&(c=Xd(o,j),c===2&&(_=rl(o),_!==0&&(j=_,c=Bp(o,_))),c===1))throw h=Ol,Hs(o,0),ps(o,j),Hr(o,Nt()),h;switch(o.finishedWork=A,o.finishedLanes=j,c){case 0:case 1:throw Error(n(345));case 2:Vs(o,Gr,Ea);break;case 3:if(ps(o,j),(j&130023424)===j&&(c=Rp+500-Nt(),10<c)){if(Ai(o,0)!==0)break;if(A=o.suspendedLanes,(A&j)!==j){Ir(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=Hf(Vs.bind(null,o,Gr,Ea),c);break}Vs(o,Gr,Ea);break;case 4:if(ps(o,j),(j&4194240)===j)break;for(c=o.eventTimes,A=-1;0<j;){var B=31-Xr(j);_=1<<B,B=c[B],B>A&&(A=B),j&=~_}if(j=A,j=Nt()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*O6(j/1960))-j,10<j){o.timeoutHandle=Hf(Vs.bind(null,o,Gr,Ea),j);break}Vs(o,Gr,Ea);break;case 5:Vs(o,Gr,Ea);break;default:throw Error(n(329))}}}return Hr(o,Nt()),o.callbackNode===h?Bw.bind(null,o):null}function Bp(o,c){var h=Pl;return o.current.memoizedState.isDehydrated&&(Hs(o,c).flags|=256),o=Xd(o,c),o!==2&&(c=Gr,Gr=h,c!==null&&Up(c)),o}function Up(o){Gr===null?Gr=o:Gr.push.apply(Gr,o)}function P6(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var j=0;j<h.length;j++){var A=h[j],_=A.getSnapshot;A=A.value;try{if(!In(_(),A))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ps(o,c){for(c&=~Dp,c&=~zd,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Xr(c),j=1<<h;o[h]=-1,c&=~j}}function Uw(o){if((xt&6)!==0)throw Error(n(327));Ji();var c=Ai(o,0);if((c&1)===0)return Hr(o,Nt()),null;var h=Xd(o,c);if(o.tag!==0&&h===2){var j=rl(o);j!==0&&(c=j,h=Bp(o,j))}if(h===1)throw h=Ol,Hs(o,0),ps(o,c),Hr(o,Nt()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Vs(o,Gr,Ea),Hr(o,Nt()),null}function Wp(o,c){var h=xt;xt|=1;try{return o(c)}finally{xt=h,xt===0&&(Xi=Nt()+500,Nd&&os())}}function Gs(o){ms!==null&&ms.tag===0&&(xt&6)===0&&Ji();var c=xt;xt|=1;var h=xn.transition,j=yt;try{if(xn.transition=null,yt=1,o)return o()}finally{yt=j,xn.transition=h,xt=c,(xt&6)===0&&os()}}function qp(){en=Yi.current,Dt(Yi)}function Hs(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,o6(h)),Zt!==null)for(h=Zt.return;h!==null;){var j=h;switch(Qf(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&jd();break;case 3:Hi(),Dt(Wr),Dt(Sr),up();break;case 5:cp(j);break;case 4:Hi();break;case 13:Dt(zt);break;case 19:Dt(zt);break;case 10:ap(j.type._context);break;case 22:case 23:qp()}h=h.return}if(fr=o,Zt=o=hs(o.current,null),jr=en=c,sr=0,Ol=null,Dp=zd=zs=0,Gr=Pl=null,Us!==null){for(c=0;c<Us.length;c++)if(h=Us[c],j=h.interleaved,j!==null){h.interleaved=null;var A=j.next,_=h.pending;if(_!==null){var B=_.next;_.next=A,j.next=B}h.pending=j}Us=null}return o}function Ww(o,c){do{var h=Zt;try{if(np(),Id.current=Rd,Md){for(var j=Gt.memoizedState;j!==null;){var A=j.queue;A!==null&&(A.pending=null),j=j.next}Md=!1}if(qs=0,mr=ar=Gt=null,Sl=!1,kl=0,Lp.current=null,h===null||h.return===null){sr=1,Ol=c,Zt=null;break}e:{var _=o,B=h.return,J=h,ne=c;if(c=jr,J.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var he=ne,Ne=J,Se=Ne.tag;if((Ne.mode&1)===0&&(Se===0||Se===11||Se===15)){var we=Ne.alternate;we?(Ne.updateQueue=we.updateQueue,Ne.memoizedState=we.memoizedState,Ne.lanes=we.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Fe=fw(B);if(Fe!==null){Fe.flags&=-257,pw(Fe,B,J,_,c),Fe.mode&1&&mw(_,he,c),c=Fe,ne=he;var qe=c.updateQueue;if(qe===null){var ze=new Set;ze.add(ne),c.updateQueue=ze}else qe.add(ne);break e}else{if((c&1)===0){mw(_,he,c),zp();break e}ne=Error(n(426))}}else if(Bt&&J.mode&1){var Jt=fw(B);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),pw(Jt,B,J,_,c),tp(Vi(ne,J));break e}}_=ne=Vi(ne,J),sr!==4&&(sr=2),Pl===null?Pl=[_]:Pl.push(_),_=B;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var ce=dw(_,ne,c);R1(_,ce);break e;case 1:J=ne;var se=_.type,ue=_.stateNode;if((_.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(us===null||!us.has(ue)))){_.flags|=65536,c&=-c,_.lanes|=c;var Te=uw(_,J,c);R1(_,Te);break e}}_=_.return}while(_!==null)}Gw(h)}catch(Ge){c=Ge,Zt===h&&h!==null&&(Zt=h=h.return);continue}break}while(!0)}function qw(){var o=qd.current;return qd.current=Rd,o===null?Rd:o}function zp(){(sr===0||sr===3||sr===2)&&(sr=4),fr===null||(zs&268435455)===0&&(zd&268435455)===0||ps(fr,jr)}function Xd(o,c){var h=xt;xt|=2;var j=qw();(fr!==o||jr!==c)&&(Ea=null,Hs(o,c));do try{_6();break}catch(A){Ww(o,A)}while(!0);if(np(),xt=h,qd.current=j,Zt!==null)throw Error(n(261));return fr=null,jr=0,sr}function _6(){for(;Zt!==null;)zw(Zt)}function I6(){for(;Zt!==null&&!$e();)zw(Zt)}function zw(o){var c=Kw(o.alternate,o,en);o.memoizedProps=o.pendingProps,c===null?Gw(o):Zt=c,Lp.current=null}function Gw(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=k6(h,c,en),h!==null){Zt=h;return}}else{if(h=C6(h,c),h!==null){h.flags&=32767,Zt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{sr=6,Zt=null;return}}if(c=c.sibling,c!==null){Zt=c;return}Zt=c=o}while(c!==null);sr===0&&(sr=5)}function Vs(o,c,h){var j=yt,A=xn.transition;try{xn.transition=null,yt=1,M6(o,c,h,j)}finally{xn.transition=A,yt=j}return null}function M6(o,c,h,j){do Ji();while(ms!==null);if((xt&6)!==0)throw Error(n(327));h=o.finishedWork;var A=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var _=h.lanes|h.childLanes;if(Nf(o,_),o===fr&&(Zt=fr=null,jr=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Hd||(Hd=!0,Yw(Qa,function(){return Ji(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=xn.transition,xn.transition=null;var B=yt;yt=1;var J=xt;xt|=4,Lp.current=null,T6(o,h),Lw(h,o),e6(zf),od=!!qf,zf=qf=null,o.current=h,E6(h),nr(),xt=J,yt=B,xn.transition=_}else o.current=h;if(Hd&&(Hd=!1,ms=o,Vd=A),_=o.pendingLanes,_===0&&(us=null),el(h.stateNode),Hr(o,Nt()),c!==null)for(j=o.onRecoverableError,h=0;h<c.length;h++)A=c[h],j(A.value,{componentStack:A.stack,digest:A.digest});if(Gd)throw Gd=!1,o=$p,$p=null,o;return(Vd&1)!==0&&o.tag!==0&&Ji(),_=o.pendingLanes,(_&1)!==0?o===Fp?_l++:(_l=0,Fp=o):_l=0,os(),null}function Ji(){if(ms!==null){var o=nd(Vd),c=xn.transition,h=yt;try{if(xn.transition=null,yt=16>o?16:o,ms===null)var j=!1;else{if(o=ms,ms=null,Vd=0,(xt&6)!==0)throw Error(n(331));var A=xt;for(xt|=4,Ue=o.current;Ue!==null;){var _=Ue,B=_.child;if((Ue.flags&16)!==0){var J=_.deletions;if(J!==null){for(var ne=0;ne<J.length;ne++){var he=J[ne];for(Ue=he;Ue!==null;){var Ne=Ue;switch(Ne.tag){case 0:case 11:case 15:El(8,Ne,_)}var Se=Ne.child;if(Se!==null)Se.return=Ne,Ue=Se;else for(;Ue!==null;){Ne=Ue;var we=Ne.sibling,Fe=Ne.return;if(Ow(Ne),Ne===he){Ue=null;break}if(we!==null){we.return=Fe,Ue=we;break}Ue=Fe}}}var qe=_.alternate;if(qe!==null){var ze=qe.child;if(ze!==null){qe.child=null;do{var Jt=ze.sibling;ze.sibling=null,ze=Jt}while(ze!==null)}}Ue=_}}if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,Ue=B;else e:for(;Ue!==null;){if(_=Ue,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:El(9,_,_.return)}var ce=_.sibling;if(ce!==null){ce.return=_.return,Ue=ce;break e}Ue=_.return}}var se=o.current;for(Ue=se;Ue!==null;){B=Ue;var ue=B.child;if((B.subtreeFlags&2064)!==0&&ue!==null)ue.return=B,Ue=ue;else e:for(B=se;Ue!==null;){if(J=Ue,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Wd(9,J)}}catch(Ge){Kt(J,J.return,Ge)}if(J===B){Ue=null;break e}var Te=J.sibling;if(Te!==null){Te.return=J.return,Ue=Te;break e}Ue=J.return}}if(xt=A,os(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Za,o)}catch{}j=!0}return j}finally{yt=h,xn.transition=c}}return!1}function Hw(o,c,h){c=Vi(h,c),c=dw(o,c,1),o=cs(o,c,1),c=Ir(),o!==null&&(Ls(o,1,c),Hr(o,c))}function Kt(o,c,h){if(o.tag===3)Hw(o,o,h);else for(;c!==null;){if(c.tag===3){Hw(c,o,h);break}else if(c.tag===1){var j=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(us===null||!us.has(j))){o=Vi(h,o),o=uw(c,o,1),c=cs(c,o,1),o=Ir(),c!==null&&(Ls(c,1,o),Hr(c,o));break}}c=c.return}}function L6(o,c,h){var j=o.pingCache;j!==null&&j.delete(c),c=Ir(),o.pingedLanes|=o.suspendedLanes&h,fr===o&&(jr&h)===h&&(sr===4||sr===3&&(jr&130023424)===jr&&500>Nt()-Rp?Hs(o,0):Dp|=h),Hr(o,c)}function Vw(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var h=Ir();o=Ca(o,c),o!==null&&(Ls(o,c,h),Hr(o,h))}function D6(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),Vw(o,h)}function R6(o,c){var h=0;switch(o.tag){case 13:var j=o.stateNode,A=o.memoizedState;A!==null&&(h=A.retryLane);break;case 19:j=o.stateNode;break;default:throw Error(n(314))}j!==null&&j.delete(c),Vw(o,h)}var Kw;Kw=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Wr.current)zr=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return zr=!1,S6(o,c,h);zr=(o.flags&131072)!==0}else zr=!1,Bt&&(c.flags&1048576)!==0&&A1(c,kd,c.index);switch(c.lanes=0,c.tag){case 2:var j=c.type;Bd(o,c),o=c.pendingProps;var A=Fi(c,Sr.current);Gi(c,h),A=pp(null,c,j,o,A,h);var _=hp();return c.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,qr(j)?(_=!0,wd(c)):_=!1,c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,op(c),A.updater=$d,c.stateNode=A,A._reactInternals=c,jp(c,j,o,h),c=kp(null,c,j,!0,_,h)):(c.tag=0,Bt&&_&&Jf(c),_r(null,c,A,h),c=c.child),c;case 16:j=c.elementType;e:{switch(Bd(o,c),o=c.pendingProps,A=j._init,j=A(j._payload),c.type=j,A=c.tag=F6(j),o=Ln(j,o),A){case 0:c=Sp(null,c,j,o,h);break e;case 1:c=yw(null,c,j,o,h);break e;case 11:c=hw(null,c,j,o,h);break e;case 14:c=xw(null,c,j,Ln(j.type,o),h);break e}throw Error(n(306,j,""))}return c;case 0:return j=c.type,A=c.pendingProps,A=c.elementType===j?A:Ln(j,A),Sp(o,c,j,A,h);case 1:return j=c.type,A=c.pendingProps,A=c.elementType===j?A:Ln(j,A),yw(o,c,j,A,h);case 3:e:{if(jw(c),o===null)throw Error(n(387));j=c.pendingProps,_=c.memoizedState,A=_.element,D1(o,c),Pd(c,j,null,h);var B=c.memoizedState;if(j=B.element,_.isDehydrated)if(_={element:j,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){A=Vi(Error(n(423)),c),c=ww(o,c,j,h,A);break e}else if(j!==A){A=Vi(Error(n(424)),c),c=ww(o,c,j,h,A);break e}else for(Zr=as(c.stateNode.containerInfo.firstChild),Qr=c,Bt=!0,Mn=null,h=M1(c,null,j,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Wi(),j===A){c=Ta(o,c,h);break e}_r(o,c,j,h)}c=c.child}return c;case 5:return F1(c),o===null&&ep(c),j=c.type,A=c.pendingProps,_=o!==null?o.memoizedProps:null,B=A.children,Gf(j,A)?B=null:_!==null&&Gf(j,_)&&(c.flags|=32),vw(o,c),_r(o,c,B,h),c.child;case 6:return o===null&&ep(c),null;case 13:return Nw(o,c,h);case 4:return lp(c,c.stateNode.containerInfo),j=c.pendingProps,o===null?c.child=qi(c,null,j,h):_r(o,c,j,h),c.child;case 11:return j=c.type,A=c.pendingProps,A=c.elementType===j?A:Ln(j,A),hw(o,c,j,A,h);case 7:return _r(o,c,c.pendingProps,h),c.child;case 8:return _r(o,c,c.pendingProps.children,h),c.child;case 12:return _r(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(j=c.type._context,A=c.pendingProps,_=c.memoizedProps,B=A.value,Ot(Td,j._currentValue),j._currentValue=B,_!==null)if(In(_.value,B)){if(_.children===A.children&&!Wr.current){c=Ta(o,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var J=_.dependencies;if(J!==null){B=_.child;for(var ne=J.firstContext;ne!==null;){if(ne.context===j){if(_.tag===1){ne=Aa(-1,h&-h),ne.tag=2;var he=_.updateQueue;if(he!==null){he=he.shared;var Ne=he.pending;Ne===null?ne.next=ne:(ne.next=Ne.next,Ne.next=ne),he.pending=ne}}_.lanes|=h,ne=_.alternate,ne!==null&&(ne.lanes|=h),sp(_.return,h,c),J.lanes|=h;break}ne=ne.next}}else if(_.tag===10)B=_.type===c.type?null:_.child;else if(_.tag===18){if(B=_.return,B===null)throw Error(n(341));B.lanes|=h,J=B.alternate,J!==null&&(J.lanes|=h),sp(B,h,c),B=_.sibling}else B=_.child;if(B!==null)B.return=_;else for(B=_;B!==null;){if(B===c){B=null;break}if(_=B.sibling,_!==null){_.return=B.return,B=_;break}B=B.return}_=B}_r(o,c,A.children,h),c=c.child}return c;case 9:return A=c.type,j=c.pendingProps.children,Gi(c,h),A=pn(A),j=j(A),c.flags|=1,_r(o,c,j,h),c.child;case 14:return j=c.type,A=Ln(j,c.pendingProps),A=Ln(j.type,A),xw(o,c,j,A,h);case 15:return gw(o,c,c.type,c.pendingProps,h);case 17:return j=c.type,A=c.pendingProps,A=c.elementType===j?A:Ln(j,A),Bd(o,c),c.tag=1,qr(j)?(o=!0,wd(c)):o=!1,Gi(c,h),lw(c,j,A),jp(c,j,A,h),kp(null,c,j,!0,o,h);case 19:return kw(o,c,h);case 22:return bw(o,c,h)}throw Error(n(156,c.tag))};function Yw(o,c){return Ie(o,c)}function $6(o,c,h,j){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(o,c,h,j){return new $6(o,c,h,j)}function Gp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function F6(o){if(typeof o=="function")return Gp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===$)return 14}return 2}function hs(o,c){var h=o.alternate;return h===null?(h=gn(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Jd(o,c,h,j,A,_){var B=2;if(j=o,typeof o=="function")Gp(o)&&(B=1);else if(typeof o=="string")B=5;else e:switch(o){case E:return Ks(h.children,A,_,c);case P:B=8,A|=8;break;case I:return o=gn(12,h,c,A|2),o.elementType=I,o.lanes=_,o;case F:return o=gn(13,h,c,A),o.elementType=F,o.lanes=_,o;case W:return o=gn(19,h,c,A),o.elementType=W,o.lanes=_,o;case z:return Qd(h,A,_,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:B=10;break e;case D:B=9;break e;case U:B=11;break e;case $:B=14;break e;case H:B=16,j=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=gn(B,h,c,A),c.elementType=o,c.type=j,c.lanes=_,c}function Ks(o,c,h,j){return o=gn(7,o,j,c),o.lanes=h,o}function Qd(o,c,h,j){return o=gn(22,o,j,c),o.elementType=z,o.lanes=h,o.stateNode={isHidden:!1},o}function Hp(o,c,h){return o=gn(6,o,null,c),o.lanes=h,o}function Vp(o,c,h){return c=gn(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function B6(o,c,h,j,A){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=j,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Kp(o,c,h,j,A,_,B,J,ne){return o=new B6(o,c,h,J,ne),c===1?(c=1,_===!0&&(c|=8)):c=0,_=gn(3,null,null,c),o.current=_,_.stateNode=o,_.memoizedState={element:j,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},op(_),o}function U6(o,c,h){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:j==null?null:""+j,children:o,containerInfo:c,implementation:h}}function Xw(o){if(!o)return is;o=o._reactInternals;e:{if(Pr(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(qr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(qr(h))return S1(o,h,c)}return c}function Jw(o,c,h,j,A,_,B,J,ne){return o=Kp(h,j,!0,o,A,_,B,J,ne),o.context=Xw(null),h=o.current,j=Ir(),A=fs(h),_=Aa(j,A),_.callback=c??null,cs(h,_,A),o.current.lanes=A,Ls(o,A,j),Hr(o,j),o}function Zd(o,c,h,j){var A=c.current,_=Ir(),B=fs(A);return h=Xw(h),c.context===null?c.context=h:c.pendingContext=h,c=Aa(_,B),c.payload={element:o},j=j===void 0?null:j,j!==null&&(c.callback=j),o=cs(A,c,B),o!==null&&($n(o,A,B,_),Od(o,A,B)),B}function eu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Qw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Yp(o,c){Qw(o,c),(o=o.alternate)&&Qw(o,c)}function W6(){return null}var Zw=typeof reportError=="function"?reportError:function(o){console.error(o)};function Xp(o){this._internalRoot=o}tu.prototype.render=Xp.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));Zd(o,c,null,null)},tu.prototype.unmount=Xp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Gs(function(){Zd(null,o,null,null)}),c[wa]=null}};function tu(o){this._internalRoot=o}tu.prototype.unstable_scheduleHydration=function(o){if(o){var c=id();o={blockedOn:null,target:o,priority:c};for(var h=0;h<je.length&&c!==0&&c<je[h].priority;h++);je.splice(h,0,o),h===0&&ya(o)}};function Jp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ru(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function e2(){}function q6(o,c,h,j,A){if(A){if(typeof j=="function"){var _=j;j=function(){var he=eu(B);_.call(he)}}var B=Jw(c,j,o,0,null,!1,!1,"",e2);return o._reactRootContainer=B,o[wa]=B.current,xl(o.nodeType===8?o.parentNode:o),Gs(),B}for(;A=o.lastChild;)o.removeChild(A);if(typeof j=="function"){var J=j;j=function(){var he=eu(ne);J.call(he)}}var ne=Kp(o,0,!1,null,null,!1,!1,"",e2);return o._reactRootContainer=ne,o[wa]=ne.current,xl(o.nodeType===8?o.parentNode:o),Gs(function(){Zd(c,ne,h,j)}),ne}function nu(o,c,h,j,A){var _=h._reactRootContainer;if(_){var B=_;if(typeof A=="function"){var J=A;A=function(){var ne=eu(B);J.call(ne)}}Zd(c,B,o,A)}else B=q6(h,c,o,A,j);return eu(B)}ad=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Ms(c.pendingLanes);h!==0&&(al(c,h|1),Hr(c,Nt()),(xt&6)===0&&(Xi=Nt()+500,os()))}break;case 13:Gs(function(){var j=Ca(o,1);if(j!==null){var A=Ir();$n(j,o,1,A)}}),Yp(o,1)}},sl=function(o){if(o.tag===13){var c=Ca(o,134217728);if(c!==null){var h=Ir();$n(c,o,134217728,h)}Yp(o,134217728)}},sd=function(o){if(o.tag===13){var c=fs(o),h=Ca(o,c);if(h!==null){var j=Ir();$n(h,o,c,j)}Yp(o,c)}},id=function(){return yt},Ti=function(o,c){var h=yt;try{return yt=o,c()}finally{yt=h}},dt=function(o,c,h){switch(c){case"input":if(ge(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var j=h[c];if(j!==o&&j.form===o.form){var A=yd(j);if(!A)throw Error(n(90));de(j),ge(j,A)}}}break;case"textarea":lt(o,h);break;case"select":c=h.value,c!=null&&Oe(o,!!h.multiple,c,!1)}},On=Wp,wi=Gs;var z6={usingClientEntryPoint:!1,Events:[vl,Ri,yd,ji,_s,Wp]},Il={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G6={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=te(o),o===null?null:o.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||W6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{Za=au.inject(G6),cn=au}catch{}}return Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z6,Vr.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jp(c))throw Error(n(200));return U6(o,c,null,h)},Vr.createRoot=function(o,c){if(!Jp(o))throw Error(n(299));var h=!1,j="",A=Zw;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(j=c.identifierPrefix),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=Kp(o,1,!1,null,null,h,!1,j,A),o[wa]=c.current,xl(o.nodeType===8?o.parentNode:o),new Xp(c)},Vr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=te(c),o=o===null?null:o.stateNode,o},Vr.flushSync=function(o){return Gs(o)},Vr.hydrate=function(o,c,h){if(!ru(c))throw Error(n(200));return nu(null,o,c,!0,h)},Vr.hydrateRoot=function(o,c,h){if(!Jp(o))throw Error(n(405));var j=h!=null&&h.hydratedSources||null,A=!1,_="",B=Zw;if(h!=null&&(h.unstable_strictMode===!0&&(A=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),c=Jw(c,null,o,1,h??null,A,!1,_,B),o[wa]=c.current,xl(o),j)for(o=0;o<j.length;o++)h=j[o],A=h._getVersion,A=A(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,A]:c.mutableSourceEagerHydrationData.push(h,A);return new tu(c)},Vr.render=function(o,c,h){if(!ru(c))throw Error(n(200));return nu(null,o,c,!1,h)},Vr.unmountComponentAtNode=function(o){if(!ru(o))throw Error(n(40));return o._reactRootContainer?(Gs(function(){nu(null,null,o,!1,function(){o._reactRootContainer=null,o[wa]=null})}),!0):!1},Vr.unstable_batchedUpdates=Wp,Vr.unstable_renderSubtreeIntoContainer=function(o,c,h,j){if(!ru(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return nu(o,c,h,!1,j)},Vr.version="18.3.1-next-f1338f8080-20240426",Vr}var l2;function m3(){if(l2)return eh.exports;l2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),eh.exports=e_(),eh.exports}var c2;function t_(){if(c2)return iu;c2=1;var t=m3();return iu.createRoot=t.createRoot,iu.hydrateRoot=t.hydrateRoot,iu}var r_=t_();const n_=wt(r_);m3();function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sc.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const d2="popstate";function a_(t){t===void 0&&(t={});function r(a,s){let{pathname:i,search:l,hash:d}=a.location;return z0("",{pathname:i,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:Su(s)}return i_(r,n,null,t)}function Vt(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function f3(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function s_(){return Math.random().toString(36).substr(2,8)}function u2(t,r){return{usr:t.state,key:t.key,idx:r}}function z0(t,r,n,a){return n===void 0&&(n=null),sc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?Bo(r):r,{state:n,key:r&&r.key||a||s_()})}function Su(t){let{pathname:r="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Bo(t){let r={};if(t){let n=t.indexOf("#");n>=0&&(r.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function i_(t,r,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,d=js.Pop,u=null,m=f();m==null&&(m=0,l.replaceState(sc({},l.state,{idx:m}),""));function f(){return(l.state||{idx:null}).idx}function p(){d=js.Pop;let y=f(),S=y==null?null:y-m;m=y,u&&u({action:d,location:b.location,delta:S})}function x(y,S){d=js.Push;let C=z0(b.location,y,S);m=f()+1;let k=u2(C,m),T=b.createHref(C);try{l.pushState(k,"",T)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(T)}i&&u&&u({action:d,location:b.location,delta:1})}function g(y,S){d=js.Replace;let C=z0(b.location,y,S);m=f();let k=u2(C,m),T=b.createHref(C);l.replaceState(k,"",T),i&&u&&u({action:d,location:b.location,delta:0})}function v(y){let S=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof y=="string"?y:Su(y);return C=C.replace(/ $/,"%20"),Vt(S,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,S)}let b={get action(){return d},get location(){return t(s,l)},listen(y){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(d2,p),u=y,()=>{s.removeEventListener(d2,p),u=null}},createHref(y){return r(s,y)},createURL:v,encodeLocation(y){let S=v(y);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:x,replace:g,go(y){return l.go(y)}};return b}var m2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(m2||(m2={}));function o_(t,r,n){return n===void 0&&(n="/"),l_(t,r,n)}function l_(t,r,n,a){let s=typeof r=="string"?Bo(r):r,i=mo(s.pathname||"/",n);if(i==null)return null;let l=p3(t);c_(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let m=y_(i);d=b_(l[u],m)}return d}function p3(t,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(Vt(u.relativePath.startsWith(a),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(a.length));let m=Ss([a,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),p3(i.children,r,f,m)),!(i.path==null&&!i.index)&&r.push({path:m,score:x_(m,i.index),routesMeta:f})};return t.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let u of h3(i.path))s(i,l,u)}),r}function h3(t){let r=t.split("/");if(r.length===0)return[];let[n,...a]=r,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=h3(a.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function c_(t){t.sort((r,n)=>r.score!==n.score?n.score-r.score:g_(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const d_=/^:[\w-]+$/,u_=3,m_=2,f_=1,p_=10,h_=-2,f2=t=>t==="*";function x_(t,r){let n=t.split("/"),a=n.length;return n.some(f2)&&(a+=h_),r&&(a+=m_),n.filter(s=>!f2(s)).reduce((s,i)=>s+(d_.test(i)?u_:i===""?f_:p_),a)}function g_(t,r){return t.length===r.length&&t.slice(0,-1).every((a,s)=>a===r[s])?t[t.length-1]-r[r.length-1]:0}function b_(t,r,n){let{routesMeta:a}=t,s={},i="/",l=[];for(let d=0;d<a.length;++d){let u=a[d],m=d===a.length-1,f=i==="/"?r:r.slice(i.length)||"/",p=G0({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},f),x=u.route;if(!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Ss([i,p.pathname]),pathnameBase:S_(Ss([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=Ss([i,p.pathnameBase]))}return l}function G0(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=v_(t.path,t.caseSensitive,t.end),s=r.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((m,f,p)=>{let{paramName:x,isOptional:g}=f;if(x==="*"){let b=d[p]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=d[p];return g&&!v?m[x]=void 0:m[x]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:t}}function v_(t,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),f3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),a]}function y_(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return f3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function mo(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function j_(t,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:n?n.startsWith("/")?n:w_(n,r):r,search:k_(a),hash:C_(s)}}function w_(t,r){let n=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nh(t,r,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function N_(t){return t.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Sy(t,r){let n=N_(t);return r?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function ky(t,r,n,a){a===void 0&&(a=!1);let s;typeof t=="string"?s=Bo(t):(s=sc({},t),Vt(!s.pathname||!s.pathname.includes("?"),nh("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),nh("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),nh("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=n;else{let p=r.length-1;if(!a&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}d=p>=0?r[p]:"/"}let u=j_(s,d),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(m||f)&&(u.pathname+="/"),u}const Ss=t=>t.join("/").replace(/\/\/+/g,"/"),S_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),k_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function A_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const x3=["post","put","patch","delete"];new Set(x3);const T_=["get",...x3];new Set(T_);function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ic.apply(this,arguments)}const Am=w.createContext(null),g3=w.createContext(null),Wa=w.createContext(null),Tm=w.createContext(null),ma=w.createContext({outlet:null,matches:[],isDataRoute:!1}),b3=w.createContext(null);function E_(t,r){let{relative:n}=r===void 0?{}:r;Uo()||Vt(!1);let{basename:a,navigator:s}=w.useContext(Wa),{hash:i,pathname:l,search:d}=Em(t,{relative:n}),u=l;return a!=="/"&&(u=l==="/"?a:Ss([a,l])),s.createHref({pathname:u,search:d,hash:i})}function Uo(){return w.useContext(Tm)!=null}function fa(){return Uo()||Vt(!1),w.useContext(Tm).location}function v3(t){w.useContext(Wa).static||w.useLayoutEffect(t)}function An(){let{isDataRoute:t}=w.useContext(ma);return t?z_():O_()}function O_(){Uo()||Vt(!1);let t=w.useContext(Am),{basename:r,future:n,navigator:a}=w.useContext(Wa),{matches:s}=w.useContext(ma),{pathname:i}=fa(),l=JSON.stringify(Sy(s,n.v7_relativeSplatPath)),d=w.useRef(!1);return v3(()=>{d.current=!0}),w.useCallback(function(m,f){if(f===void 0&&(f={}),!d.current)return;if(typeof m=="number"){a.go(m);return}let p=ky(m,JSON.parse(l),i,f.relative==="path");t==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Ss([r,p.pathname])),(f.replace?a.replace:a.push)(p,f.state,f)},[r,a,l,i,t])}const P_=w.createContext(null);function __(t){let r=w.useContext(ma).outlet;return r&&w.createElement(P_.Provider,{value:t},r)}function y3(){let{matches:t}=w.useContext(ma),r=t[t.length-1];return r?r.params:{}}function Em(t,r){let{relative:n}=r===void 0?{}:r,{future:a}=w.useContext(Wa),{matches:s}=w.useContext(ma),{pathname:i}=fa(),l=JSON.stringify(Sy(s,a.v7_relativeSplatPath));return w.useMemo(()=>ky(t,JSON.parse(l),i,n==="path"),[t,l,i,n])}function I_(t,r){return M_(t,r)}function M_(t,r,n,a){Uo()||Vt(!1);let{navigator:s}=w.useContext(Wa),{matches:i}=w.useContext(ma),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=fa(),f;if(r){var p;let y=typeof r=="string"?Bo(r):r;u==="/"||(p=y.pathname)!=null&&p.startsWith(u)||Vt(!1),f=y}else f=m;let x=f.pathname||"/",g=x;if(u!=="/"){let y=u.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=o_(t,{pathname:g}),b=F_(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},d,y.params),pathname:Ss([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Ss([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,a);return r&&b?w.createElement(Tm.Provider,{value:{location:ic({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:js.Pop}},b):b}function L_(){let t=q_(),r=A_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},r),n?w.createElement("pre",{style:s},n):null,null)}const D_=w.createElement(L_,null);class R_ extends w.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?w.createElement(ma.Provider,{value:this.props.routeContext},w.createElement(b3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $_(t){let{routeContext:r,match:n,children:a}=t,s=w.useContext(Am);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ma.Provider,{value:r},a)}function F_(t,r,n,a){var s;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(s=n)==null?void 0:s.errors;if(d!=null){let f=l.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);f>=0||Vt(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,m=-1;if(n&&a&&a.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=f),p.route.id){let{loaderData:x,errors:g}=n,v=p.route.loader&&x[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||v){u=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((f,p,x)=>{let g,v=!1,b=null,y=null;n&&(g=d&&p.route.id?d[p.route.id]:void 0,b=p.route.errorElement||D_,u&&(m<0&&x===0?(G_("route-fallback"),v=!0,y=null):m===x&&(v=!0,y=p.route.hydrateFallbackElement||null)));let S=r.concat(l.slice(0,x+1)),C=()=>{let k;return g?k=b:v?k=y:p.route.Component?k=w.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=f,w.createElement($_,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?w.createElement(R_,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}var j3=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(j3||{}),w3=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(w3||{});function B_(t){let r=w.useContext(Am);return r||Vt(!1),r}function U_(t){let r=w.useContext(g3);return r||Vt(!1),r}function W_(t){let r=w.useContext(ma);return r||Vt(!1),r}function N3(t){let r=W_(),n=r.matches[r.matches.length-1];return n.route.id||Vt(!1),n.route.id}function q_(){var t;let r=w.useContext(b3),n=U_(),a=N3();return r!==void 0?r:(t=n.errors)==null?void 0:t[a]}function z_(){let{router:t}=B_(j3.UseNavigateStable),r=N3(w3.UseNavigateStable),n=w.useRef(!1);return v3(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ic({fromRouteId:r},i)))},[t,r])}const p2={};function G_(t,r,n){p2[t]||(p2[t]=!0)}function H_(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function ou(t){let{to:r,replace:n,state:a,relative:s}=t;Uo()||Vt(!1);let{future:i,static:l}=w.useContext(Wa),{matches:d}=w.useContext(ma),{pathname:u}=fa(),m=An(),f=ky(r,Sy(d,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return w.useEffect(()=>m(JSON.parse(p),{replace:n,state:a,relative:s}),[m,p,s,n,a]),null}function Cy(t){return __(t.context)}function mt(t){Vt(!1)}function V_(t){let{basename:r="/",children:n=null,location:a,navigationType:s=js.Pop,navigator:i,static:l=!1,future:d}=t;Uo()&&Vt(!1);let u=r.replace(/^\/*/,"/"),m=w.useMemo(()=>({basename:u,navigator:i,static:l,future:ic({v7_relativeSplatPath:!1},d)}),[u,d,i,l]);typeof a=="string"&&(a=Bo(a));let{pathname:f="/",search:p="",hash:x="",state:g=null,key:v="default"}=a,b=w.useMemo(()=>{let y=mo(f,u);return y==null?null:{location:{pathname:y,search:p,hash:x,state:g,key:v},navigationType:s}},[u,f,p,x,g,v,s]);return b==null?null:w.createElement(Wa.Provider,{value:m},w.createElement(Tm.Provider,{children:n,value:b}))}function h2(t){let{children:r,location:n}=t;return I_(H0(r),n)}new Promise(()=>{});function H0(t,r){r===void 0&&(r=[]);let n=[];return w.Children.forEach(t,(a,s)=>{if(!w.isValidElement(a))return;let i=[...r,s];if(a.type===w.Fragment){n.push.apply(n,H0(a.props.children,i));return}a.type!==mt&&Vt(!1),!a.props.index||!a.props.children||Vt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=H0(a.props.children,i)),n.push(l)}),n}function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ku.apply(this,arguments)}function S3(t,r){if(t==null)return{};var n={},a=Object.keys(t),s,i;for(i=0;i<a.length;i++)s=a[i],!(r.indexOf(s)>=0)&&(n[s]=t[s]);return n}function K_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Y_(t,r){return t.button===0&&(!r||r==="_self")&&!K_(t)}function V0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,n)=>{let a=t[n];return r.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function X_(t,r){let n=V0(t);return r&&r.forEach((a,s)=>{n.has(s)||r.getAll(s).forEach(i=>{n.append(s,i)})}),n}const J_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Q_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Z_="6";try{window.__reactRouterVersion=Z_}catch{}const eI=w.createContext({isTransitioning:!1}),tI="startTransition",x2=J6[tI];function rI(t){let{basename:r,children:n,future:a,window:s}=t,i=w.useRef();i.current==null&&(i.current=a_({window:s,v5Compat:!0}));let l=i.current,[d,u]=w.useState({action:l.action,location:l.location}),{v7_startTransition:m}=a||{},f=w.useCallback(p=>{m&&x2?x2(()=>u(p)):u(p)},[u,m]);return w.useLayoutEffect(()=>l.listen(f),[l,f]),w.useEffect(()=>H_(a),[a]),w.createElement(V_,{basename:r,children:n,location:d.location,navigationType:d.action,navigator:l,future:a})}const nI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jt=w.forwardRef(function(r,n){let{onClick:a,relative:s,reloadDocument:i,replace:l,state:d,target:u,to:m,preventScrollReset:f,viewTransition:p}=r,x=S3(r,J_),{basename:g}=w.useContext(Wa),v,b=!1;if(typeof m=="string"&&aI.test(m)&&(v=m,nI))try{let k=new URL(window.location.href),T=m.startsWith("//")?new URL(k.protocol+m):new URL(m),N=mo(T.pathname,g);T.origin===k.origin&&N!=null?m=N+T.search+T.hash:b=!0}catch{}let y=E_(m,{relative:s}),S=iI(m,{replace:l,state:d,target:u,preventScrollReset:f,relative:s,viewTransition:p});function C(k){a&&a(k),k.defaultPrevented||S(k)}return w.createElement("a",ku({},x,{href:v||y,onClick:b||i?a:C,ref:n,target:u}))}),k3=w.forwardRef(function(r,n){let{"aria-current":a="page",caseSensitive:s=!1,className:i="",end:l=!1,style:d,to:u,viewTransition:m,children:f}=r,p=S3(r,Q_),x=Em(u,{relative:p.relative}),g=fa(),v=w.useContext(g3),{navigator:b,basename:y}=w.useContext(Wa),S=v!=null&&lI(x)&&m===!0,C=b.encodeLocation?b.encodeLocation(x).pathname:x.pathname,k=g.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(k=k.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&y&&(T=mo(T,y)||T);const N=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=k===C||!l&&k.startsWith(C)&&k.charAt(N)==="/",E=T!=null&&(T===C||!l&&T.startsWith(C)&&T.charAt(C.length)==="/"),P={isActive:O,isPending:E,isTransitioning:S},I=O?a:void 0,M;typeof i=="function"?M=i(P):M=[i,O?"active":null,E?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof d=="function"?d(P):d;return w.createElement(jt,ku({},p,{"aria-current":I,className:M,ref:n,style:D,to:u,viewTransition:m}),typeof f=="function"?f(P):f)});var K0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(K0||(K0={}));var g2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(g2||(g2={}));function sI(t){let r=w.useContext(Am);return r||Vt(!1),r}function iI(t,r){let{target:n,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:d}=r===void 0?{}:r,u=An(),m=fa(),f=Em(t,{relative:l});return w.useCallback(p=>{if(Y_(p,n)){p.preventDefault();let x=a!==void 0?a:Su(m)===Su(f);u(t,{replace:x,state:s,preventScrollReset:i,relative:l,viewTransition:d})}},[m,u,f,a,s,n,t,i,l,d])}function oI(t){let r=w.useRef(V0(t)),n=w.useRef(!1),a=fa(),s=w.useMemo(()=>X_(a.search,n.current?null:r.current),[a.search]),i=An(),l=w.useCallback((d,u)=>{const m=V0(typeof d=="function"?d(s):d);n.current=!0,i("?"+m,u)},[i,s]);return[s,l]}function lI(t,r){r===void 0&&(r={});let n=w.useContext(eI);n==null&&Vt(!1);let{basename:a}=sI(K0.useViewTransitionState),s=Em(t,{relative:r.relative});if(!n.isTransitioning)return!1;let i=mo(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=mo(n.nextLocation.pathname,a)||n.nextLocation.pathname;return G0(s.pathname,l)!=null||G0(s.pathname,i)!=null}var _a=(t=>(t.WEBSITE="Website",t.FACEBOOK="Facebook",t.GOOGLE_ADS="Google Ads",t.REFERRAL="Referral",t.COLD_CALL="Cold Call",t.CHATBOT="Chatbot",t))(_a||{}),ei=(t=>(t.PENDING="Pending",t.INTERESTED="Interested",t.CALL_LATER="Call Later",t.NOT_INTERESTED="Not Interested",t.CONVERTED="Converted",t))(ei||{}),Wt=(t=>(t.SUPER_ADMIN="Super Admin",t.ADMIN="Admin",t.MANAGER="Manager",t.SALES_REP="Sales Rep",t))(Wt||{}),Qt=(t=>(t.VIEW_ALL_LEADS="view:all_leads",t.DELETE_LEADS="delete:leads",t.ASSIGN_LEADS="assign:leads",t.MANAGE_USERS="manage:users",t.MANAGE_TEAMS="manage:teams",t.MANAGE_SETTINGS="manage:settings",t.MANAGE_AUTOMATION="manage:automation",t.MANAGE_INTEGRATIONS="manage:integrations",t.VIEW_TRACKING_DASHBOARD="view:tracking_dashboard",t))(Qt||{}),C3=(t=>(t.NEW="New",t.CONTACTED="Contacted",t.DNP="DNP",t.CALL_BACK_LATER="Call Back Later",t.INTERESTED="Interested",t.NOT_INTERESTED="Not Interested",t.JUNK="Junk",t.INVALID="Invalid",t.CLOSED="Closed",t.CONVERTED="Converted",t))(C3||{});const cI=Array.from({length:5},(t,r)=>{const a=["10 Proven Strategies to Boost Your Sales Conversion Rate","How AI is Revolutionizing Lead Management in 2024","The Ultimate Guide to Sales Automation for Growing Teams","Building High-Performing Sales Teams: Best Practices","CRM Integration: Connecting Your Favorite Tools Seamlessly"][r]||`Blog Post ${r+1}`,s=a.split(" ").slice(0,2).join(" ").toLowerCase();return{_id:`blog-${r+1}`,id:`blog-${r+1}`,slug:a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),title:a,excerpt:"Discover actionable insights and proven strategies to supercharge your sales performance and grow your business with Clienn CRM's comprehensive platform.",content:`Detailed content for ${a} covering industry best practices, actionable tips, and real-world examples to help you optimize your sales process and achieve better results.`,authorId:2,publishedAt:new Date(Date.now()-r*7*24*60*60*1e3).toISOString(),tags:["Sales","Marketing","CRM","Growth Hacking","AI"].slice(0,3),featuredImage:{src:`https://picsum.photos/seed/${r+1}/800/400`,alt:`Blog post image for ${a}`},seo:{title:`${a} | Clienn CRM Blog`,description:`Learn ${a.toLowerCase()} with expert insights and practical tips.`},focusKeyword:s,views:Math.floor(Math.random()*1e4)+150,comments:Math.floor(Math.random()*50)}}),dI=[{id:"core-crm",category:"Core CRM",features:[{id:"users",name:"Users Included",description:"Number of users that can access the CRM.",values:{free:"1",basic:"5",pro:"20",enterprise:"Custom"}},{id:"leads",name:"Lead Capacity",description:"Total number of leads you can store.",values:{free:"500",basic:"5,000",pro:"Unlimited",enterprise:"Unlimited"}},{id:"contacts",name:"Contact Management",description:"Store and manage all your customer and lead information.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"pipelines",name:"Deal Pipelines",description:"Visual sales pipelines to track deals.",values:{free:"1",basic:"2",pro:"Unlimited",enterprise:"Unlimited"}},{id:"tasks",name:"Task Management",description:"Create and assign tasks to yourself or team members.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"custom-fields",name:"Custom Fields",description:"Create custom data fields to store specific information on your leads.",values:{free:"5 Fields",basic:"25 Fields",pro:"100 Fields",enterprise:"Unlimited"}},{id:"tagging",name:"Lead Tagging",description:"Organize your leads with custom tags.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"storage",name:"File Storage",description:"Storage space for attachments and files.",values:{free:"100 MB",basic:"5 GB",pro:"50 GB",enterprise:"Custom"}}]},{id:"communication",category:"Communication",features:[{id:"email-sync",name:"Email Integration (Gmail/Outlook)",description:"Sync your email conversations with leads.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"email-campaigns",name:"Email Campaigns",description:"Send bulk email campaigns to your leads.",values:{free:!1,basic:"500 sends/mo",pro:"10,000 sends/mo",enterprise:"Custom"}},{id:"sms-campaigns",name:"SMS Campaigns",description:"Send bulk SMS campaigns. Credits sold separately.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"whatsapp",name:"WhatsApp Integration",description:"Communicate with leads directly via WhatsApp.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"call-campaigns",name:"Call Campaigns & Logging",description:"Run call campaigns and automatically log call activities.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"email-templates",name:"Email Templates",description:"Create and reuse email templates for quick communication.",values:{free:"3 Templates",basic:"10 Templates",pro:"Unlimited",enterprise:"Unlimited"}},{id:"whatsapp-templates",name:"WhatsApp Templates",description:"Create and use approved WhatsApp message templates.",values:{free:!1,basic:"5 Templates",pro:"Unlimited",enterprise:"Unlimited"}}]},{id:"automation-ai",category:"Automation & AI",features:[{id:"automation-rules",name:"Automation Rules",description:'Build "if-this-then-that" rules to automate your workflows.',values:{free:"3 Rules",basic:"10 Rules",pro:"Unlimited",enterprise:"Unlimited"}},{id:"lead-assignment",name:"Lead Assignment Rules",description:"Automatically assign new leads to users or teams.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"ai-summaries",name:"AI-Powered Lead Summaries",description:"Get instant summaries of lead activities and history with one click.",values:{free:"10/mo",basic:"50/mo",pro:"500/mo",enterprise:"Unlimited"}},{id:"lead-scoring",name:"Lead Scoring",description:"Automatically score leads based on their properties and actions.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"chatbot",name:"Website Chatbot",description:"Capture leads from your website with an automated chatbot.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}}]},{id:"integrations",category:"Integrations",features:[{id:"facebook",name:"Facebook Lead Ads",description:"Sync leads directly from your Facebook campaigns.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"google-ads",name:"Google Ads",description:"Track leads from your Google Ads campaigns.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"website-forms",name:"Website Forms",description:"Capture leads from any form on your website.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"api-access",name:"API Access",description:"Build custom integrations with our REST API.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"webhooks",name:"Webhook Triggers",description:"Send data to other applications when events happen in the CRM.",values:{free:!1,basic:"1 Webhook",pro:"10 Webhooks",enterprise:"Unlimited"}}]},{id:"reporting",category:"Reporting & Analytics",features:[{id:"standard-dashboards",name:"Standard Dashboards",description:"Get an overview of your sales performance.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"custom-reports",name:"Custom Reports",description:"Build reports tailored to your business needs.",values:{free:!1,basic:"5 Reports",pro:"25 Reports",enterprise:"Unlimited"}},{id:"sales-forecasting",name:"Sales Forecasting",description:"Forecast future sales based on your pipeline data.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"activity-tracking",name:"Employee Tracking",description:"Monitor user activity and session logs.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"goal-setting",name:"Goal Setting",description:"Set and track sales goals for your team and individual reps.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}}]},{id:"support",category:"Support & Security",features:[{id:"email-support",name:"Email Support",description:"Get help from our support team via email.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"priority-support",name:"Priority Phone & Chat Support",description:"Get faster support via phone and live chat.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"dedicated-manager",name:"Dedicated Support Manager",description:"A dedicated manager to help you succeed.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"mfa",name:"Two-Factor Authentication (2FA)",description:"Secure your account with two-factor authentication.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"permissions",name:"User Roles & Permissions",description:"Control what your users can see and do.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"sso",name:"SSO & White-Labeling",description:"Use your own branding and single sign-on.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"sla",name:"Uptime SLA",description:"Service Level Agreement for platform uptime.",values:{free:!1,basic:!1,pro:"99.9%",enterprise:"99.99%"}}]}],A3={isEnabled:!1,text:"",ctaText:"",ctaLink:"",autoDisableAt:""},uI={hero:{title:"The Smarter Way to Manage",gradientTitle:"Leads, Sales & Growth",subtitle:"Boost sales, automate workflows, and manage your entire business from one powerful CRM platform. Designed for growing teams, trusted by businesses everywhere.",cta1:"Start 14-Day Free Trial",cta2:"Book a Demo"},loginPage:{title:"Make conversations that convert students",subtitle:"Know how Echo, a WhatsApp live chat platform, can streamline communication and make engagement personal, immediate, and more effective.",cta:"Schedule a Demo",image:{src:"https://uploads-ssl.webflow.com/62a86551224472314601183b/6475d19a4e062227289f8263_Group%2018260.webp",alt:"Screenshot of the Echo WhatsApp live chat platform dashboard."}},trustedBy:{title:"TRUSTED BY HIGH-PERFORMING TEAMS WORLDWIDE",logos:[{name:"Google",src:"https://logo.clearbit.com/google.com",alt:"Google Logo"},{name:"Microsoft",src:"https://logo.clearbit.com/microsoft.com",alt:"Microsoft Logo"},{name:"Slack",src:"https://logo.clearbit.com/slack.com",alt:"Slack Logo"},{name:"Salesforce",src:"https://logo.clearbit.com/salesforce.com",alt:"Salesforce Logo"},{name:"Hubspot",src:"https://logo.clearbit.com/hubspot.com",alt:"Hubspot Logo"},{name:"Stripe",src:"https://logo.clearbit.com/stripe.com",alt:"Stripe Logo"},{name:"Notion",src:"https://logo.clearbit.com/notion.so",alt:"Notion Logo"},{name:"Figma",src:"https://logo.clearbit.com/figma.com",alt:"Figma Logo"}]},howItWorks:{title:"Get Started in 3 Simple Steps",subtitle:"Clienn CRM is designed to be powerful yet easy to use.",steps:[{id:"hw1",icon:"Connect",title:"Connect Your Sources",description:"Integrate your website forms, social media ads, and other lead sources in minutes with our one-click integrations."},{id:"hw2",icon:"AutomateSteps",title:"Automate Your Workflow",description:"Set up powerful rules to automatically assign leads, send follow-ups, and update stages so you can focus on selling."},{id:"hw3",icon:"Grow",title:"Grow Your Business",description:"Use our analytics and AI-powered insights to understand your pipeline, improve conversion rates, and close more deals."}]},integrations:{title:"Connect to the Tools You Already Use",subtitle:"Clienn CRM plays well with others. Integrate seamlessly with your favorite apps.",logos:[{name:"Facebook",src:"https://logo.clearbit.com/facebook.com",alt:"Facebook Logo"},{name:"Google",src:"https://logo.clearbit.com/google.com",alt:"Google Logo"},{name:"Zapier",src:"https://logo.clearbit.com/zapier.com",alt:"Zapier Logo"},{name:"Twilio",src:"https://logo.clearbit.com/twilio.com",alt:"Twilio Logo"},{name:"Mailchimp",src:"https://logo.clearbit.com/mailchimp.com",alt:"Mailchimp Logo"},{name:"WordPress",src:"https://logo.clearbit.com/wordpress.com",alt:"WordPress Logo"}]},features:{title:"Everything You Need, All in One Place",subtitle:"Powerful features to supercharge your sales team.",items:[{id:"dashboard",title:"Unified Leads Dashboard",description:"Get a bird's-eye view of your entire sales pipeline. Track leads through every stage, monitor team performance, and visualize your sales data with beautiful, easy-to-understand charts.",image:{src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2070&auto=format&fit=crop",alt:"A modern analytics dashboard with various charts and graphs on a dark background."}},{id:"summary",title:"AI-Powered Lead Summaries",description:"Stop wasting time digging through activity logs. With a single click, our Gemini-powered AI analyzes all communication, notes, and lead data to give you a concise summary and suggest the next best action.",image:{src:"https://images.unsplash.com/photo-1674027444485-cec3da58eef4?q=80&w=1932&auto=format&fit=crop",alt:"Abstract image representing artificial intelligence with glowing neural network connections."}},{id:"automation",title:"Effortless Sales Automation",description:'Build powerful "if-this-then-that" automation rules with a simple visual editor. Assign new leads, send follow-up emails, add tags, and moreall on autopilot, so you can focus on selling.',image:{src:"https://images.unsplash.com/photo-1521791136064-7986c2920216?q=80&w=2070&auto=format&fit=crop",alt:"A team collaborating on a glass wall with sticky notes, representing workflow automation."}},{id:"reporting",title:"Comprehensive Reporting",description:"Gain deep insights into your sales performance with customizable reports. Track key metrics, identify trends, and make data-driven decisions to optimize your sales process.",image:{src:"https://images.unsplash.com/photo-1608421448635-c21406691c25?q=80&w=2070&auto=format&fit=crop",alt:"A detailed financial report with colorful charts and graphs laid out on a table."}}]},growthChart:{title:"Watch Your Conversion Rate Soar",subtitle:"Our customers see a significant increase in their lead-to-conversion rate within the first three months of using Clienn CRM. The chart below represents a typical growth trajectory.",chartData:[{month:"Jan",value:8},{month:"Feb",value:9},{month:"Mar",value:12},{month:"Apr",value:15},{month:"May",value:22},{month:"Jun",value:32}],stat:{value:32,label:"Average Conversion Rate Increase"}},funnel:{title:"Visualize Your Sales Pipeline",subtitle:"Track leads as they move from initial contact to a closed deal. Our visual funnel helps you identify bottlenecks and optimize your sales process for higher conversion rates.",stages:[{name:"Leads",value:1e3},{name:"Contacted",value:800},{name:"Demo Scheduled",value:500},{name:"Proposal Sent",value:300},{name:"Closed-Won",value:150}]},pricing:{title:"Flexible Pricing for Teams of All Sizes",subtitle:"Choose the plan that's right for you. No hidden fees.",monthlyPlans:[{name:"Free",price:"$0",description:"For individuals & small teams.",features:["1 User Limit","500 Leads","Core CRM tools"]},{name:"Basic",price:"$49",description:"For growing teams.",features:["5 User Limit","5,000 Leads","Basic Integrations","Team Management"]},{name:"Pro",price:"$99",description:"For scaling businesses.",features:["20 User Limit","Unlimited Leads","Advanced Automation","Reporting & Analytics"],isPopular:!0},{name:"Enterprise",price:"Contact Us",description:"For large organizations.",features:["Unlimited Users","White-Labeling & SSO","Dedicated Support","API Access"]}],yearlyPlans:[{name:"Free",price:"$0",description:"For individuals & small teams.",features:["1 User Limit","500 Leads","Core CRM tools"]},{name:"Basic",price:"$39",description:"For growing teams.",features:["5 User Limit","5,000 Leads","Basic Integrations","Team Management"]},{name:"Pro",price:"$79",description:"For scaling businesses.",features:["20 User Limit","Unlimited Leads","Advanced Automation","Reporting & Analytics"],isPopular:!0},{name:"Enterprise",price:"Contact Us",description:"For large organizations.",features:["Unlimited Users","White-Labeling & SSO","Dedicated Support","API Access"]}]},testimonials:{title:"What Our Customers Say",items:[{id:"t1",quote:"With Clienn CRM, our conversion rate improved by 32% in 3 months. The AI summaries save my sales team hours every week!",author:"Sarah Johnson",company:"Marketing Manager, TechStart Inc.",avatar:{src:"https://i.pravatar.cc/150?u=sarah",alt:"Avatar of Sarah Johnson"}},{id:"t2",quote:"The ability to manage leads from Facebook, our website, and calls all in one place has been a total game-changer for our team's efficiency.",author:"David Lee",company:"Sales Director, Realty Kings",avatar:{src:"https://i.pravatar.cc/150?u=david",alt:"Avatar of David Lee"}},{id:"t3",quote:"Finally, a CRM that is both powerful and easy to use. The learning curve was minimal, and the impact on our productivity was immediate.",author:"Maria Garcia",company:"Founder, Ed-Tech Global",avatar:{src:"https://i.pravatar.cc/150?u=maria",alt:"Avatar of Maria Garcia"}},{id:"t4",quote:"The automation features are a dream. We now have a consistent follow-up process that runs on autopilot, ensuring no lead falls through the cracks.",author:"Chris Evans",company:"Operations Head, Innovate Solutions",avatar:{src:"https://i.pravatar.cc/150?u=chris",alt:"Avatar of Chris Evans"}},{id:"t5",quote:"As a manager, the reporting dashboard is invaluable. I can see team performance at a glance and make data-driven decisions on the fly.",author:"Emily White",company:"VP of Sales, Growth Co.",avatar:{src:"https://i.pravatar.cc/150?u=emily",alt:"Avatar of Emily White"}},{id:"t6",quote:"The customer support is top-notch. They are responsive, helpful, and genuinely care about our success. Highly recommend!",author:"Michael Brown",company:"CEO, Bright Ideas Agency",avatar:{src:"https://i.pravatar.cc/150?u=michael",alt:"Avatar of Michael Brown"}}]},faq:{title:"Frequently Asked Questions",subtitle:"Have questions? We've got answers.",items:[{id:"f1",q:"Is there a free trial available?",a:"Yes! You can try our Pro plan for 14 days, no credit card required. Get full access to all features and see how Clienn CRM can transform your sales process."},{id:"f2",q:"Can I change my plan later?",a:"Absolutely. You can upgrade, downgrade, or cancel your plan at any time directly from your billing settings. Changes will be prorated."},{id:"f3",q:"What integrations do you support?",a:"We offer native integrations with Facebook Lead Ads, Google Ads, and any website form. You can also connect to thousands of other apps via our API and webhooks."},{id:"f4",q:"Is my data secure?",a:"Security is our top priority. We use industry-standard encryption, offer multi-factor authentication (MFA), and are fully compliant with GDPR. Your data is safe with us."},{id:"f5",q:"Do you offer support?",a:"Yes, all our paid plans come with email support. Our Enterprise plan includes a dedicated account manager and priority support."},{id:"f6",q:"Can I import my existing leads?",a:"Of course! You can easily import your existing leads via a CSV file. Our importer will help you map your data to the correct fields in Clienn CRM."}]},contactForm:{title:"Get in Touch",subtitle:"Have a question or want to see a personalized demo? Fill out the form below and we'll get back to you.",webhookUrl:"https://hooks.example.com/contact-form",address:"123 Innovation Drive, Suite 456, Tech City, 78910",email:"support@Clienn CRM.app",phone:"+1 (555) 123-4567",mapSrc:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.617141569737!2d-73.987846684594!3d40.748440979327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259a9b3117469%3A0xd134e199a405a163!2sEmpire%20State%20Building!5e0!3m2!1sen!2sus!4v1675281728271!5m2!1sen!2sus",fields:[{id:"f_name",label:"Full Name",type:"text",required:!0},{id:"f_email",label:"Work Email",type:"email",required:!0},{id:"f_company",label:"Company Name",type:"text",required:!1},{id:"f_message",label:"Your Message",type:"textarea",required:!0}]},chatbot:{enabled:!0,welcomeMessage:"Hi there! I'm the Clienn CRM assistant. I can help answer questions or get you connected with our team. What can I help you with?",questions:[{id:"cq1",question:"To get started, what's your name?",crmField:"name"},{id:"cq2",question:"Great, {{name}}! What's your work email?",crmField:"email"},{id:"cq3",question:"And what's your company's name?",crmField:"company"}],thankYouMessage:"Thanks! Someone from our team will be in touch shortly.",color:"#2563eb",style:"button"},blog:{title:"From Our Blog",subtitle:"Get the latest insights on sales, marketing, and growth."},footer:{description:"Clienn CRM is the all-in-one platform for growing businesses to manage their sales, marketing, and customer relationships with the power of AI.",address:"123 Innovation Drive, Suite 456, Tech City, 78910",columns:[{title:"Product",links:[{text:"Features",url:"#features"},{text:"Pricing",url:"/#/pricing"},{text:"Integrations",url:"#integrations"},{text:"Updates",url:"#"}]},{title:"Company",links:[{text:"About",url:"#"},{text:"Blog",url:"/#/blog"},{text:"Careers",url:"#"},{text:"Contact Us",url:"#contact"}]},{title:"Resources",links:[{text:"Help Center",url:"#"},{text:"API Docs",url:"//crm.clienn.com/api-docs"},{text:"Case Studies",url:"#"},{text:"Webinars",url:"#"}]}],socialLinks:[{name:"LinkedIn",url:"#"},{name:"Twitter",url:"#"},{name:"Facebook",url:"#"}],legal:{copyright:` ${new Date().getFullYear()} Clienn CRM. All rights reserved.`,links:[{text:"Privacy Policy",url:"/privacy"},{text:"Terms of Service",url:"#"}]}},finalCta:{title:"Ready to Grow Smarter?",subtitle:"Join thousands of businesses who have transformed their sales process with Clienn CRM. Get started today and see the difference.",cta:"Start Free Trial Now"}};function T3(t){var r,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=T3(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function st(){for(var t,r,n=0,a="",s=arguments.length;n<s;n++)(t=arguments[n])&&(r=T3(t))&&(a&&(a+=" "),a+=r);return a}var ah,b2;function $r(){if(b2)return ah;b2=1;var t=Array.isArray;return ah=t,ah}var sh,v2;function E3(){if(v2)return sh;v2=1;var t=typeof su=="object"&&su&&su.Object===Object&&su;return sh=t,sh}var ih,y2;function Yn(){if(y2)return ih;y2=1;var t=E3(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=t||r||Function("return this")();return ih=n,ih}var oh,j2;function Wo(){if(j2)return oh;j2=1;var t=Yn(),r=t.Symbol;return oh=r,oh}var lh,w2;function mI(){if(w2)return lh;w2=1;var t=Wo(),r=Object.prototype,n=r.hasOwnProperty,a=r.toString,s=t?t.toStringTag:void 0;function i(l){var d=n.call(l,s),u=l[s];try{l[s]=void 0;var m=!0}catch{}var f=a.call(l);return m&&(d?l[s]=u:delete l[s]),f}return lh=i,lh}var ch,N2;function fI(){if(N2)return ch;N2=1;var t=Object.prototype,r=t.toString;function n(a){return r.call(a)}return ch=n,ch}var dh,S2;function qa(){if(S2)return dh;S2=1;var t=Wo(),r=mI(),n=fI(),a="[object Null]",s="[object Undefined]",i=t?t.toStringTag:void 0;function l(d){return d==null?d===void 0?s:a:i&&i in Object(d)?r(d):n(d)}return dh=l,dh}var uh,k2;function Xn(){if(k2)return uh;k2=1;function t(r){return r!=null&&typeof r=="object"}return uh=t,uh}var mh,C2;function qo(){if(C2)return mh;C2=1;var t=qa(),r=Xn(),n="[object Symbol]";function a(s){return typeof s=="symbol"||r(s)&&t(s)==n}return mh=a,mh}var fh,A2;function Ay(){if(A2)return fh;A2=1;var t=$r(),r=qo(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){if(t(i))return!1;var d=typeof i;return d=="number"||d=="symbol"||d=="boolean"||i==null||r(i)?!0:a.test(i)||!n.test(i)||l!=null&&i in Object(l)}return fh=s,fh}var ph,T2;function Jn(){if(T2)return ph;T2=1;function t(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return ph=t,ph}var hh,E2;function Ty(){if(E2)return hh;E2=1;var t=qa(),r=Jn(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function l(d){if(!r(d))return!1;var u=t(d);return u==a||u==s||u==n||u==i}return hh=l,hh}var xh,O2;function pI(){if(O2)return xh;O2=1;var t=Yn(),r=t["__core-js_shared__"];return xh=r,xh}var gh,P2;function hI(){if(P2)return gh;P2=1;var t=pI(),r=(function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!r&&r in a}return gh=n,gh}var bh,_2;function O3(){if(_2)return bh;_2=1;var t=Function.prototype,r=t.toString;function n(a){if(a!=null){try{return r.call(a)}catch{}try{return a+""}catch{}}return""}return bh=n,bh}var vh,I2;function xI(){if(I2)return vh;I2=1;var t=Ty(),r=hI(),n=Jn(),a=O3(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,m=d.hasOwnProperty,f=RegExp("^"+u.call(m).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(x){if(!n(x)||r(x))return!1;var g=t(x)?f:i;return g.test(a(x))}return vh=p,vh}var yh,M2;function gI(){if(M2)return yh;M2=1;function t(r,n){return r?.[n]}return yh=t,yh}var jh,L2;function xi(){if(L2)return jh;L2=1;var t=xI(),r=gI();function n(a,s){var i=r(a,s);return t(i)?i:void 0}return jh=n,jh}var wh,D2;function Om(){if(D2)return wh;D2=1;var t=xi(),r=t(Object,"create");return wh=r,wh}var Nh,R2;function bI(){if(R2)return Nh;R2=1;var t=Om();function r(){this.__data__=t?t(null):{},this.size=0}return Nh=r,Nh}var Sh,$2;function vI(){if($2)return Sh;$2=1;function t(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}return Sh=t,Sh}var kh,F2;function yI(){if(F2)return kh;F2=1;var t=Om(),r="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var l=this.__data__;if(t){var d=l[i];return d===r?void 0:d}return a.call(l,i)?l[i]:void 0}return kh=s,kh}var Ch,B2;function jI(){if(B2)return Ch;B2=1;var t=Om(),r=Object.prototype,n=r.hasOwnProperty;function a(s){var i=this.__data__;return t?i[s]!==void 0:n.call(i,s)}return Ch=a,Ch}var Ah,U2;function wI(){if(U2)return Ah;U2=1;var t=Om(),r="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=t&&s===void 0?r:s,this}return Ah=n,Ah}var Th,W2;function NI(){if(W2)return Th;W2=1;var t=bI(),r=vI(),n=yI(),a=jI(),s=wI();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Th=i,Th}var Eh,q2;function SI(){if(q2)return Eh;q2=1;function t(){this.__data__=[],this.size=0}return Eh=t,Eh}var Oh,z2;function Pm(){if(z2)return Oh;z2=1;function t(r,n){return r===n||r!==r&&n!==n}return Oh=t,Oh}var Ph,G2;function _m(){if(G2)return Ph;G2=1;var t=Pm();function r(n,a){for(var s=n.length;s--;)if(t(n[s][0],a))return s;return-1}return Ph=r,Ph}var _h,H2;function kI(){if(H2)return _h;H2=1;var t=_m(),r=Array.prototype,n=r.splice;function a(s){var i=this.__data__,l=t(i,s);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():n.call(i,l,1),--this.size,!0}return _h=a,_h}var Ih,V2;function CI(){if(V2)return Ih;V2=1;var t=_m();function r(n){var a=this.__data__,s=t(a,n);return s<0?void 0:a[s][1]}return Ih=r,Ih}var Mh,K2;function AI(){if(K2)return Mh;K2=1;var t=_m();function r(n){return t(this.__data__,n)>-1}return Mh=r,Mh}var Lh,Y2;function TI(){if(Y2)return Lh;Y2=1;var t=_m();function r(n,a){var s=this.__data__,i=t(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return Lh=r,Lh}var Dh,X2;function Im(){if(X2)return Dh;X2=1;var t=SI(),r=kI(),n=CI(),a=AI(),s=TI();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Dh=i,Dh}var Rh,J2;function Ey(){if(J2)return Rh;J2=1;var t=xi(),r=Yn(),n=t(r,"Map");return Rh=n,Rh}var $h,Q2;function EI(){if(Q2)return $h;Q2=1;var t=NI(),r=Im(),n=Ey();function a(){this.size=0,this.__data__={hash:new t,map:new(n||r),string:new t}}return $h=a,$h}var Fh,Z2;function OI(){if(Z2)return Fh;Z2=1;function t(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}return Fh=t,Fh}var Bh,eN;function Mm(){if(eN)return Bh;eN=1;var t=OI();function r(n,a){var s=n.__data__;return t(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Bh=r,Bh}var Uh,tN;function PI(){if(tN)return Uh;tN=1;var t=Mm();function r(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return Uh=r,Uh}var Wh,rN;function _I(){if(rN)return Wh;rN=1;var t=Mm();function r(n){return t(this,n).get(n)}return Wh=r,Wh}var qh,nN;function II(){if(nN)return qh;nN=1;var t=Mm();function r(n){return t(this,n).has(n)}return qh=r,qh}var zh,aN;function MI(){if(aN)return zh;aN=1;var t=Mm();function r(n,a){var s=t(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return zh=r,zh}var Gh,sN;function Oy(){if(sN)return Gh;sN=1;var t=EI(),r=PI(),n=_I(),a=II(),s=MI();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Gh=i,Gh}var Hh,iN;function P3(){if(iN)return Hh;iN=1;var t=Oy(),r="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(r);var i=function(){var l=arguments,d=s?s.apply(this,l):l[0],u=i.cache;if(u.has(d))return u.get(d);var m=a.apply(this,l);return i.cache=u.set(d,m)||u,m};return i.cache=new(n.Cache||t),i}return n.Cache=t,Hh=n,Hh}var Vh,oN;function LI(){if(oN)return Vh;oN=1;var t=P3(),r=500;function n(a){var s=t(a,function(l){return i.size===r&&i.clear(),l}),i=s.cache;return s}return Vh=n,Vh}var Kh,lN;function DI(){if(lN)return Kh;lN=1;var t=LI(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(r,function(l,d,u,m){i.push(u?m.replace(n,"$1"):d||l)}),i});return Kh=a,Kh}var Yh,cN;function Lm(){if(cN)return Yh;cN=1;function t(r,n){for(var a=-1,s=r==null?0:r.length,i=Array(s);++a<s;)i[a]=n(r[a],a,r);return i}return Yh=t,Yh}var Xh,dN;function RI(){if(dN)return Xh;dN=1;var t=Wo(),r=Lm(),n=$r(),a=qo(),s=t?t.prototype:void 0,i=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(n(d))return r(d,l)+"";if(a(d))return i?i.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return Xh=l,Xh}var Jh,uN;function _3(){if(uN)return Jh;uN=1;var t=RI();function r(n){return n==null?"":t(n)}return Jh=r,Jh}var Qh,mN;function Dm(){if(mN)return Qh;mN=1;var t=$r(),r=Ay(),n=DI(),a=_3();function s(i,l){return t(i)?i:r(i,l)?[i]:n(a(i))}return Qh=s,Qh}var Zh,fN;function qc(){if(fN)return Zh;fN=1;var t=qo();function r(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Zh=r,Zh}var ex,pN;function Rm(){if(pN)return ex;pN=1;var t=Dm(),r=qc();function n(a,s){s=t(s,a);for(var i=0,l=s.length;a!=null&&i<l;)a=a[r(s[i++])];return i&&i==l?a:void 0}return ex=n,ex}var tx,hN;function I3(){if(hN)return tx;hN=1;var t=Rm();function r(n,a,s){var i=n==null?void 0:t(n,a);return i===void 0?s:i}return tx=r,tx}var $I=I3();const sn=wt($I);var rx,xN;function FI(){if(xN)return rx;xN=1;function t(r){return r==null}return rx=t,rx}var BI=FI();const nt=wt(BI);var nx,gN;function UI(){if(gN)return nx;gN=1;var t=qa(),r=$r(),n=Xn(),a="[object String]";function s(i){return typeof i=="string"||!r(i)&&n(i)&&t(i)==a}return nx=s,nx}var WI=UI();const Cs=wt(WI);var qI=Ty();const Ze=wt(qI);var zI=Jn();const zo=wt(zI);var ax={exports:{}},St={};var bN;function GI(){if(bN)return St;bN=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function b(y){if(typeof y=="object"&&y!==null){var S=y.$$typeof;switch(S){case t:switch(y=y.type,y){case n:case s:case a:case m:case f:return y;default:switch(y=y&&y.$$typeof,y){case d:case l:case u:case x:case p:case i:return y;default:return S}}case r:return S}}}return St.ContextConsumer=l,St.ContextProvider=i,St.Element=t,St.ForwardRef=u,St.Fragment=n,St.Lazy=x,St.Memo=p,St.Portal=r,St.Profiler=s,St.StrictMode=a,St.Suspense=m,St.SuspenseList=f,St.isAsyncMode=function(){return!1},St.isConcurrentMode=function(){return!1},St.isContextConsumer=function(y){return b(y)===l},St.isContextProvider=function(y){return b(y)===i},St.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},St.isForwardRef=function(y){return b(y)===u},St.isFragment=function(y){return b(y)===n},St.isLazy=function(y){return b(y)===x},St.isMemo=function(y){return b(y)===p},St.isPortal=function(y){return b(y)===r},St.isProfiler=function(y){return b(y)===s},St.isStrictMode=function(y){return b(y)===a},St.isSuspense=function(y){return b(y)===m},St.isSuspenseList=function(y){return b(y)===f},St.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===a||y===m||y===f||y===g||typeof y=="object"&&y!==null&&(y.$$typeof===x||y.$$typeof===p||y.$$typeof===i||y.$$typeof===l||y.$$typeof===u||y.$$typeof===v||y.getModuleId!==void 0)},St.typeOf=b,St}var vN;function HI(){return vN||(vN=1,ax.exports=GI()),ax.exports}var VI=HI(),sx,yN;function M3(){if(yN)return sx;yN=1;var t=qa(),r=Xn(),n="[object Number]";function a(s){return typeof s=="number"||r(s)&&t(s)==n}return sx=a,sx}var ix,jN;function KI(){if(jN)return ix;jN=1;var t=M3();function r(n){return t(n)&&n!=+n}return ix=r,ix}var YI=KI();const Go=wt(YI);var XI=M3();const L3=wt(XI);var Mr=function(r){return r===0?0:r>0?1:-1},ri=function(r){return Cs(r)&&r.indexOf("%")===r.length-1},Ce=function(r){return L3(r)&&!Go(r)},JI=function(r){return nt(r)},cr=function(r){return Ce(r)||Cs(r)},QI=0,gi=function(r){var n=++QI;return"".concat(r||"").concat(n)},Lr=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ce(r)&&!Cs(r))return a;var i;if(ri(r)){var l=r.indexOf("%");i=n*parseFloat(r.slice(0,l))/100}else i=+r;return Go(i)&&(i=a),s&&i>n&&(i=n),i},ys=function(r){if(!r)return null;var n=Object.keys(r);return n&&n.length?r[n[0]]:null},ZI=function(r){if(!Array.isArray(r))return!1;for(var n=r.length,a={},s=0;s<n;s++)if(!a[r[s]])a[r[s]]=!0;else return!0;return!1},Ct=function(r,n){return Ce(r)&&Ce(n)?function(a){return r+a*(n-r)}:function(){return n}};function Cu(t,r,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof r=="function"?r(a):sn(a,r))===n})}var eM=function(r,n){return Ce(r)&&Ce(n)?r-n:Cs(r)&&Cs(n)?r.localeCompare(n):r instanceof Date&&n instanceof Date?r.getTime()-n.getTime():String(r).localeCompare(String(n))};function lo(t,r){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(r,n)||t[n]!==r[n]))return!1;for(var a in r)if({}.hasOwnProperty.call(r,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function Y0(t){"@babel/helpers - typeof";return Y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Y0(t)}var tM=["viewBox","children"],rM=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],wN=["points","pathLength"],ox={svg:tM,polygon:wN,polyline:wN},Py=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Au=function(r,n){if(!r||typeof r=="function"||typeof r=="boolean")return null;var a=r;if(w.isValidElement(r)&&(a=r.props),!zo(a))return null;var s={};return Object.keys(a).forEach(function(i){Py.includes(i)&&(s[i]=n||function(l){return a[i](a,l)})}),s},nM=function(r,n,a){return function(s){return r(n,a,s),null}},As=function(r,n,a){if(!zo(r)||Y0(r)!=="object")return null;var s=null;return Object.keys(r).forEach(function(i){var l=r[i];Py.includes(i)&&typeof l=="function"&&(s||(s={}),s[i]=nM(l,n,a))}),s},aM=["children"],sM=["children"];function NN(t,r){if(t==null)return{};var n=iM(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function iM(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function X0(t){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},X0(t)}var SN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Da=function(r){return typeof r=="string"?r:r?r.displayName||r.name||"Component":""},kN=null,lx=null,_y=function t(r){if(r===kN&&Array.isArray(lx))return lx;var n=[];return w.Children.forEach(r,function(a){nt(a)||(VI.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),lx=n,kN=r,n};function Yr(t,r){var n=[],a=[];return Array.isArray(r)?a=r.map(function(s){return Da(s)}):a=[Da(r)],_y(t).forEach(function(s){var i=sn(s,"type.displayName")||sn(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function nn(t,r){var n=Yr(t,r);return n&&n[0]}var CN=function(r){if(!r||!r.props)return!1;var n=r.props,a=n.width,s=n.height;return!(!Ce(a)||a<=0||!Ce(s)||s<=0)},oM=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lM=function(r){return r&&r.type&&Cs(r.type)&&oM.indexOf(r.type)>=0},D3=function(r){return r&&X0(r)==="object"&&"clipDot"in r},cM=function(r,n,a,s){var i,l=(i=ox?.[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Ze(r)&&(s&&l.includes(n)||rM.includes(n))||a&&Py.includes(n)},He=function(r,n,a){if(!r||typeof r=="function"||typeof r=="boolean")return null;var s=r;if(w.isValidElement(r)&&(s=r.props),!zo(s))return null;var i={};return Object.keys(s).forEach(function(l){var d;cM((d=s)===null||d===void 0?void 0:d[l],l,n,a)&&(i[l]=s[l])}),i},J0=function t(r,n){if(r===n)return!0;var a=w.Children.count(r);if(a!==w.Children.count(n))return!1;if(a===0)return!0;if(a===1)return AN(Array.isArray(r)?r[0]:r,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=r[s],l=n[s];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!AN(i,l))return!1}return!0},AN=function(r,n){if(nt(r)&&nt(n))return!0;if(!nt(r)&&!nt(n)){var a=r.props||{},s=a.children,i=NN(a,aM),l=n.props||{},d=l.children,u=NN(l,sM);return s&&d?lo(i,u)&&J0(s,d):!s&&!d?lo(i,u):!1}return!1},TN=function(r,n){var a=[],s={};return _y(r).forEach(function(i,l){if(lM(i))a.push(i);else if(i){var d=Da(i.type),u=n[d]||{},m=u.handler,f=u.once;if(m&&(!f||!s[d])){var p=m(i,d,l);a.push(p),s[d]=!0}}}),a},dM=function(r){var n=r&&r.type;return n&&SN[n]?SN[n]:null},uM=function(r,n){return _y(n).indexOf(r)},mM=["children","width","height","viewBox","className","style","title","desc"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Q0.apply(this,arguments)}function fM(t,r){if(t==null)return{};var n=pM(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function pM(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Z0(t){var r=t.children,n=t.width,a=t.height,s=t.viewBox,i=t.className,l=t.style,d=t.title,u=t.desc,m=fM(t,mM),f=s||{width:n,height:a,x:0,y:0},p=st("recharts-surface",i);return Y.createElement("svg",Q0({},He(m,!0,"svg"),{className:p,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Y.createElement("title",null,d),Y.createElement("desc",null,u),r)}var hM=["children","className"];function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ev.apply(this,arguments)}function xM(t,r){if(t==null)return{};var n=gM(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function gM(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}var ct=Y.forwardRef(function(t,r){var n=t.children,a=t.className,s=xM(t,hM),i=st("recharts-layer",a);return Y.createElement("g",ev({className:i},He(s,!0),{ref:r}),n)}),Gn=function(r,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},cx,EN;function R3(){if(EN)return cx;EN=1;function t(r,n,a){var s=-1,i=r.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var l=Array(i);++s<i;)l[s]=r[s+n];return l}return cx=t,cx}var dx,ON;function bM(){if(ON)return dx;ON=1;var t=R3();function r(n,a,s){var i=n.length;return s=s===void 0?i:s,!a&&s>=i?n:t(n,a,s)}return dx=r,dx}var ux,PN;function $3(){if(PN)return ux;PN=1;var t="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+n+a,i="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+t+s+i+"]");function u(m){return d.test(m)}return ux=u,ux}var mx,_N;function vM(){if(_N)return mx;_N=1;function t(r){return r.split("")}return mx=t,mx}var fx,IN;function yM(){if(IN)return fx;IN=1;var t="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+n+a,i="\\ufe0e\\ufe0f",l="["+t+"]",d="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",m="(?:"+d+"|"+u+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=m+"?",b="["+i+"]?",y="(?:"+g+"(?:"+[f,p,x].join("|")+")"+b+v+")*",S=b+v+y,C="(?:"+[f+d+"?",d,p,x,l].join("|")+")",k=RegExp(u+"(?="+u+")|"+C+S,"g");function T(N){return N.match(k)||[]}return fx=T,fx}var px,MN;function jM(){if(MN)return px;MN=1;var t=vM(),r=$3(),n=yM();function a(s){return r(s)?n(s):t(s)}return px=a,px}var hx,LN;function wM(){if(LN)return hx;LN=1;var t=bM(),r=$3(),n=jM(),a=_3();function s(i){return function(l){l=a(l);var d=r(l)?n(l):void 0,u=d?d[0]:l.charAt(0),m=d?t(d,1).join(""):l.slice(1);return u[i]()+m}}return hx=s,hx}var xx,DN;function NM(){if(DN)return xx;DN=1;var t=wM(),r=t("toUpperCase");return xx=r,xx}var SM=NM();const $m=wt(SM);function _t(t){return function(){return t}}const F3=Math.cos,Tu=Math.sin,Qn=Math.sqrt,Eu=Math.PI,Fm=2*Eu,tv=Math.PI,rv=2*tv,Qs=1e-6,kM=rv-Qs;function B3(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function CM(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return B3;const n=10**r;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class AM{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?B3:CM(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,a,s){this._append`Q${+r},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(r,n,a,s,i,l){this._append`C${+r},${+n},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(r,n,a,s,i){if(r=+r,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,d=this._y1,u=a-r,m=s-n,f=l-r,p=d-n,x=f*f+p*p;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(x>Qs)if(!(Math.abs(p*u-m*f)>Qs)||!i)this._append`L${this._x1=r},${this._y1=n}`;else{let g=a-l,v=s-d,b=u*u+m*m,y=g*g+v*v,S=Math.sqrt(b),C=Math.sqrt(x),k=i*Math.tan((tv-Math.acos((b+x-y)/(2*S*C)))/2),T=k/C,N=k/S;Math.abs(T-1)>Qs&&this._append`L${r+T*f},${n+T*p}`,this._append`A${i},${i},0,0,${+(p*g>f*v)},${this._x1=r+N*u},${this._y1=n+N*m}`}}arc(r,n,a,s,i,l){if(r=+r,n=+n,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(s),u=a*Math.sin(s),m=r+d,f=n+u,p=1^l,x=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>Qs||Math.abs(this._y1-f)>Qs)&&this._append`L${m},${f}`,a&&(x<0&&(x=x%rv+rv),x>kM?this._append`A${a},${a},0,1,${p},${r-d},${n-u}A${a},${a},0,1,${p},${this._x1=m},${this._y1=f}`:x>Qs&&this._append`A${a},${a},0,${+(x>=tv)},${p},${this._x1=r+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(r,n,a,s){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Iy(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);r=a}return t},()=>new AM(r)}function My(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function U3(t){this._context=t}U3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function Bm(t){return new U3(t)}function W3(t){return t[0]}function q3(t){return t[1]}function z3(t,r){var n=_t(!0),a=null,s=Bm,i=null,l=Iy(d);t=typeof t=="function"?t:t===void 0?W3:_t(t),r=typeof r=="function"?r:r===void 0?q3:_t(r);function d(u){var m,f=(u=My(u)).length,p,x=!1,g;for(a==null&&(i=s(g=l())),m=0;m<=f;++m)!(m<f&&n(p=u[m],m,u))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(p,m,u),+r(p,m,u));if(g)return i=null,g+""||null}return d.x=function(u){return arguments.length?(t=typeof u=="function"?u:_t(+u),d):t},d.y=function(u){return arguments.length?(r=typeof u=="function"?u:_t(+u),d):r},d.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_t(!!u),d):n},d.curve=function(u){return arguments.length?(s=u,a!=null&&(i=s(a)),d):s},d.context=function(u){return arguments.length?(u==null?a=i=null:i=s(a=u),d):a},d}function lu(t,r,n){var a=null,s=_t(!0),i=null,l=Bm,d=null,u=Iy(m);t=typeof t=="function"?t:t===void 0?W3:_t(+t),r=typeof r=="function"?r:_t(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?q3:_t(+n);function m(p){var x,g,v,b=(p=My(p)).length,y,S=!1,C,k=new Array(b),T=new Array(b);for(i==null&&(d=l(C=u())),x=0;x<=b;++x){if(!(x<b&&s(y=p[x],x,p))===S)if(S=!S)g=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),v=x-1;v>=g;--v)d.point(k[v],T[v]);d.lineEnd(),d.areaEnd()}S&&(k[x]=+t(y,x,p),T[x]=+r(y,x,p),d.point(a?+a(y,x,p):k[x],n?+n(y,x,p):T[x]))}if(C)return d=null,C+""||null}function f(){return z3().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(t=typeof p=="function"?p:_t(+p),a=null,m):t},m.x0=function(p){return arguments.length?(t=typeof p=="function"?p:_t(+p),m):t},m.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:_t(+p),m):a},m.y=function(p){return arguments.length?(r=typeof p=="function"?p:_t(+p),n=null,m):r},m.y0=function(p){return arguments.length?(r=typeof p=="function"?p:_t(+p),m):r},m.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:_t(+p),m):n},m.lineX0=m.lineY0=function(){return f().x(t).y(r)},m.lineY1=function(){return f().x(t).y(n)},m.lineX1=function(){return f().x(a).y(r)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:_t(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(d=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=d=null:d=l(i=p),m):i},m}class G3{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function TM(t){return new G3(t,!0)}function EM(t){return new G3(t,!1)}const Ly={draw(t,r){const n=Qn(r/Eu);t.moveTo(n,0),t.arc(0,0,n,0,Fm)}},OM={draw(t,r){const n=Qn(r/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},H3=Qn(1/3),PM=H3*2,_M={draw(t,r){const n=Qn(r/PM),a=n*H3;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},IM={draw(t,r){const n=Qn(r),a=-n/2;t.rect(a,a,n,n)}},MM=.8908130915292852,V3=Tu(Eu/10)/Tu(7*Eu/10),LM=Tu(Fm/10)*V3,DM=-F3(Fm/10)*V3,RM={draw(t,r){const n=Qn(r*MM),a=LM*n,s=DM*n;t.moveTo(0,-n),t.lineTo(a,s);for(let i=1;i<5;++i){const l=Fm*i/5,d=F3(l),u=Tu(l);t.lineTo(u*n,-d*n),t.lineTo(d*a-u*s,u*a+d*s)}t.closePath()}},gx=Qn(3),$M={draw(t,r){const n=-Qn(r/(gx*3));t.moveTo(0,n*2),t.lineTo(-gx*n,-n),t.lineTo(gx*n,-n),t.closePath()}},bn=-.5,vn=Qn(3)/2,nv=1/Qn(12),FM=(nv/2+1)*3,BM={draw(t,r){const n=Qn(r/FM),a=n/2,s=n*nv,i=a,l=n*nv+n,d=-i,u=l;t.moveTo(a,s),t.lineTo(i,l),t.lineTo(d,u),t.lineTo(bn*a-vn*s,vn*a+bn*s),t.lineTo(bn*i-vn*l,vn*i+bn*l),t.lineTo(bn*d-vn*u,vn*d+bn*u),t.lineTo(bn*a+vn*s,bn*s-vn*a),t.lineTo(bn*i+vn*l,bn*l-vn*i),t.lineTo(bn*d+vn*u,bn*u-vn*d),t.closePath()}};function UM(t,r){let n=null,a=Iy(s);t=typeof t=="function"?t:_t(t||Ly),r=typeof r=="function"?r:_t(r===void 0?64:+r);function s(){let i;if(n||(n=i=a()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:_t(i),s):t},s.size=function(i){return arguments.length?(r=typeof i=="function"?i:_t(+i),s):r},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function Ou(){}function Pu(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function K3(t){this._context=t}K3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pu(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function WM(t){return new K3(t)}function Y3(t){this._context=t}Y3.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Pu(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function qM(t){return new Y3(t)}function X3(t){this._context=t}X3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Pu(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function zM(t){return new X3(t)}function J3(t){this._context=t}J3.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function GM(t){return new J3(t)}function RN(t){return t<0?-1:1}function $N(t,r,n){var a=t._x1-t._x0,s=r-t._x1,i=(t._y1-t._y0)/(a||s<0&&-0),l=(n-t._y1)/(s||a<0&&-0),d=(i*s+l*a)/(a+s);return(RN(i)+RN(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(d))||0}function FN(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function bx(t,r,n){var a=t._x0,s=t._y0,i=t._x1,l=t._y1,d=(i-a)/3;t._context.bezierCurveTo(a+d,s+d*r,i-d,l-d*n,i,l)}function _u(t){this._context=t}_u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bx(this,this._t0,FN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,bx(this,FN(this,n=$N(this,t,r)),n);break;default:bx(this,this._t0,n=$N(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};function Q3(t){this._context=new Z3(t)}(Q3.prototype=Object.create(_u.prototype)).point=function(t,r){_u.prototype.point.call(this,r,t)};function Z3(t){this._context=t}Z3.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,a,s,i){this._context.bezierCurveTo(r,t,a,n,i,s)}};function HM(t){return new _u(t)}function VM(t){return new Q3(t)}function eT(t){this._context=t}eT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var a=BN(t),s=BN(r),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],t[l],r[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function BN(t){var r,n=t.length-1,a,s=new Array(n),i=new Array(n),l=new Array(n);for(s[0]=0,i[0]=2,l[0]=t[0]+2*t[1],r=1;r<n-1;++r)s[r]=1,i[r]=4,l[r]=4*t[r]+2*t[r+1];for(s[n-1]=2,i[n-1]=7,l[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)a=s[r]/i[r-1],i[r]-=a,l[r]-=a*l[r-1];for(s[n-1]=l[n-1]/i[n-1],r=n-2;r>=0;--r)s[r]=(l[r]-s[r+1])/i[r];for(i[n-1]=(t[n]+s[n-1])/2,r=0;r<n-1;++r)i[r]=2*t[r+1]-s[r+1];return[s,i]}function KM(t){return new eT(t)}function Um(t,r){this._context=t,this._t=r}Um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}};function YM(t){return new Um(t,.5)}function XM(t){return new Um(t,0)}function JM(t){return new Um(t,1)}function fo(t,r){if((l=t.length)>1)for(var n=1,a,s,i=t[r[0]],l,d=i.length;n<l;++n)for(s=i,i=t[r[n]],a=0;a<d;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function av(t){for(var r=t.length,n=new Array(r);--r>=0;)n[r]=r;return n}function QM(t,r){return t[r]}function ZM(t){const r=[];return r.key=t,r}function eL(){var t=_t([]),r=av,n=fo,a=QM;function s(i){var l=Array.from(t.apply(this,arguments),ZM),d,u=l.length,m=-1,f;for(const p of i)for(d=0,++m;d<u;++d)(l[d][m]=[0,+a(p,l[d].key,m,i)]).data=p;for(d=0,f=My(r(l));d<u;++d)l[f[d]].index=d;return n(l,f),l}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:_t(Array.from(i)),s):t},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:_t(+i),s):a},s.order=function(i){return arguments.length?(r=i==null?av:typeof i=="function"?i:_t(Array.from(i)),s):r},s.offset=function(i){return arguments.length?(n=i??fo,s):n},s}function tL(t,r){if((a=t.length)>0){for(var n,a,s=0,i=t[0].length,l;s<i;++s){for(l=n=0;n<a;++n)l+=t[n][s][1]||0;if(l)for(n=0;n<a;++n)t[n][s][1]/=l}fo(t,r)}}function rL(t,r){if((s=t.length)>0){for(var n=0,a=t[r[0]],s,i=a.length;n<i;++n){for(var l=0,d=0;l<s;++l)d+=t[l][n][1]||0;a[n][1]+=a[n][0]=-d/2}fo(t,r)}}function nL(t,r){if(!(!((l=t.length)>0)||!((i=(s=t[r[0]]).length)>0))){for(var n=0,a=1,s,i,l;a<i;++a){for(var d=0,u=0,m=0;d<l;++d){for(var f=t[r[d]],p=f[a][1]||0,x=f[a-1][1]||0,g=(p-x)/2,v=0;v<d;++v){var b=t[r[v]],y=b[a][1]||0,S=b[a-1][1]||0;g+=y-S}u+=p,m+=g*p}s[a-1][1]+=s[a-1][0]=n,u&&(n-=m/u)}s[a-1][1]+=s[a-1][0]=n,fo(t,r)}}function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oc(t)}var aL=["type","size","sizeType"];function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},sv.apply(this,arguments)}function UN(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function WN(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?UN(Object(n),!0).forEach(function(a){sL(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UN(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function sL(t,r,n){return r=iL(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function iL(t){var r=oL(t,"string");return oc(r)=="symbol"?r:r+""}function oL(t,r){if(oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function lL(t,r){if(t==null)return{};var n=cL(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function cL(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}var tT={symbolCircle:Ly,symbolCross:OM,symbolDiamond:_M,symbolSquare:IM,symbolStar:RM,symbolTriangle:$M,symbolWye:BM},dL=Math.PI/180,uL=function(r){var n="symbol".concat($m(r));return tT[n]||Ly},mL=function(r,n,a){if(n==="area")return r;switch(a){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var s=18*dL;return 1.25*r*r*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},fL=function(r,n){tT["symbol".concat($m(r))]=n},Dy=function(r){var n=r.type,a=n===void 0?"circle":n,s=r.size,i=s===void 0?64:s,l=r.sizeType,d=l===void 0?"area":l,u=lL(r,aL),m=WN(WN({},u),{},{type:a,size:i,sizeType:d}),f=function(){var y=uL(a),S=UM().type(y).size(mL(i,d,a));return S()},p=m.className,x=m.cx,g=m.cy,v=He(m,!0);return x===+x&&g===+g&&i===+i?Y.createElement("path",sv({},v,{className:st("recharts-symbols",p),transform:"translate(".concat(x,", ").concat(g,")"),d:f()})):null};Dy.registerSymbol=fL;function po(t){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},po(t)}function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iv.apply(this,arguments)}function qN(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function pL(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qN(Object(n),!0).forEach(function(a){lc(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function hL(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function xL(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,nT(a.key),a)}}function gL(t,r,n){return r&&xL(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bL(t,r,n){return r=Iu(r),vL(t,rT()?Reflect.construct(r,n||[],Iu(t).constructor):r.apply(t,n))}function vL(t,r){if(r&&(po(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yL(t)}function yL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rT=function(){return!!t})()}function Iu(t){return Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iu(t)}function jL(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ov(t,r)}function ov(t,r){return ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ov(t,r)}function lc(t,r,n){return r=nT(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function nT(t){var r=wL(t,"string");return po(r)=="symbol"?r:r+""}function wL(t,r){if(po(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yn=32,Ry=(function(t){function r(){return hL(this,r),bL(this,r,arguments)}return jL(r,t),gL(r,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=yn/2,l=yn/6,d=yn/3,u=a.inactive?s:a.color;if(a.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:yn,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(i,`
            H`).concat(yn,"M").concat(2*d,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return Y.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(yn/8,"h").concat(yn,"v").concat(yn*3/4,"h").concat(-yn,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(a.legendIcon)){var m=pL({},a);return delete m.legendIcon,Y.cloneElement(a.legendIcon,m)}return Y.createElement(Dy,{fill:u,cx:i,cy:i,size:yn,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,l=s.iconSize,d=s.layout,u=s.formatter,m=s.inactiveColor,f={x:0,y:0,width:yn,height:yn},p={display:d==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,v){var b=g.formatter||u,y=st(lc(lc({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",g.inactive));if(g.type==="none")return null;var S=Ze(g.value)?null:g.value;Gn(!Ze(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=g.inactive?m:g.color;return Y.createElement("li",iv({className:y,style:p,key:"legend-item-".concat(v)},As(a.props,g,v)),Y.createElement(Z0,{width:l,height:l,viewBox:f,style:x},a.renderIcon(g)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},b?b(S,g,v):S))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,l=a.align;if(!s||!s.length)return null;var d={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])})(w.PureComponent);lc(Ry,"displayName","Legend");lc(Ry,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var vx,zN;function NL(){if(zN)return vx;zN=1;var t=Im();function r(){this.__data__=new t,this.size=0}return vx=r,vx}var yx,GN;function SL(){if(GN)return yx;GN=1;function t(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}return yx=t,yx}var jx,HN;function kL(){if(HN)return jx;HN=1;function t(r){return this.__data__.get(r)}return jx=t,jx}var wx,VN;function CL(){if(VN)return wx;VN=1;function t(r){return this.__data__.has(r)}return wx=t,wx}var Nx,KN;function AL(){if(KN)return Nx;KN=1;var t=Im(),r=Ey(),n=Oy(),a=200;function s(i,l){var d=this.__data__;if(d instanceof t){var u=d.__data__;if(!r||u.length<a-1)return u.push([i,l]),this.size=++d.size,this;d=this.__data__=new n(u)}return d.set(i,l),this.size=d.size,this}return Nx=s,Nx}var Sx,YN;function $y(){if(YN)return Sx;YN=1;var t=Im(),r=NL(),n=SL(),a=kL(),s=CL(),i=AL();function l(d){var u=this.__data__=new t(d);this.size=u.size}return l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,Sx=l,Sx}var kx,XN;function TL(){if(XN)return kx;XN=1;var t="__lodash_hash_undefined__";function r(n){return this.__data__.set(n,t),this}return kx=r,kx}var Cx,JN;function EL(){if(JN)return Cx;JN=1;function t(r){return this.__data__.has(r)}return Cx=t,Cx}var Ax,QN;function aT(){if(QN)return Ax;QN=1;var t=Oy(),r=TL(),n=EL();function a(s){var i=-1,l=s==null?0:s.length;for(this.__data__=new t;++i<l;)this.add(s[i])}return a.prototype.add=a.prototype.push=r,a.prototype.has=n,Ax=a,Ax}var Tx,ZN;function sT(){if(ZN)return Tx;ZN=1;function t(r,n){for(var a=-1,s=r==null?0:r.length;++a<s;)if(n(r[a],a,r))return!0;return!1}return Tx=t,Tx}var Ex,eS;function iT(){if(eS)return Ex;eS=1;function t(r,n){return r.has(n)}return Ex=t,Ex}var Ox,tS;function oT(){if(tS)return Ox;tS=1;var t=aT(),r=sT(),n=iT(),a=1,s=2;function i(l,d,u,m,f,p){var x=u&a,g=l.length,v=d.length;if(g!=v&&!(x&&v>g))return!1;var b=p.get(l),y=p.get(d);if(b&&y)return b==d&&y==l;var S=-1,C=!0,k=u&s?new t:void 0;for(p.set(l,d),p.set(d,l);++S<g;){var T=l[S],N=d[S];if(m)var O=x?m(N,T,S,d,l,p):m(T,N,S,l,d,p);if(O!==void 0){if(O)continue;C=!1;break}if(k){if(!r(d,function(E,P){if(!n(k,P)&&(T===E||f(T,E,u,m,p)))return k.push(P)})){C=!1;break}}else if(!(T===N||f(T,N,u,m,p))){C=!1;break}}return p.delete(l),p.delete(d),C}return Ox=i,Ox}var Px,rS;function lT(){if(rS)return Px;rS=1;var t=Yn(),r=t.Uint8Array;return Px=r,Px}var _x,nS;function OL(){if(nS)return _x;nS=1;function t(r){var n=-1,a=Array(r.size);return r.forEach(function(s,i){a[++n]=[i,s]}),a}return _x=t,_x}var Ix,aS;function Fy(){if(aS)return Ix;aS=1;function t(r){var n=-1,a=Array(r.size);return r.forEach(function(s){a[++n]=s}),a}return Ix=t,Ix}var Mx,sS;function PL(){if(sS)return Mx;sS=1;var t=Wo(),r=lT(),n=Pm(),a=oT(),s=OL(),i=Fy(),l=1,d=2,u="[object Boolean]",m="[object Date]",f="[object Error]",p="[object Map]",x="[object Number]",g="[object RegExp]",v="[object Set]",b="[object String]",y="[object Symbol]",S="[object ArrayBuffer]",C="[object DataView]",k=t?t.prototype:void 0,T=k?k.valueOf:void 0;function N(O,E,P,I,M,D,U){switch(P){case C:if(O.byteLength!=E.byteLength||O.byteOffset!=E.byteOffset)return!1;O=O.buffer,E=E.buffer;case S:return!(O.byteLength!=E.byteLength||!D(new r(O),new r(E)));case u:case m:case x:return n(+O,+E);case f:return O.name==E.name&&O.message==E.message;case g:case b:return O==E+"";case p:var F=s;case v:var W=I&l;if(F||(F=i),O.size!=E.size&&!W)return!1;var $=U.get(O);if($)return $==E;I|=d,U.set(O,E);var H=a(F(O),F(E),I,M,D,U);return U.delete(O),H;case y:if(T)return T.call(O)==T.call(E)}return!1}return Mx=N,Mx}var Lx,iS;function By(){if(iS)return Lx;iS=1;function t(r,n){for(var a=-1,s=n.length,i=r.length;++a<s;)r[i+a]=n[a];return r}return Lx=t,Lx}var Dx,oS;function cT(){if(oS)return Dx;oS=1;var t=By(),r=$r();function n(a,s,i){var l=s(a);return r(a)?l:t(l,i(a))}return Dx=n,Dx}var Rx,lS;function _L(){if(lS)return Rx;lS=1;function t(r,n){for(var a=-1,s=r==null?0:r.length,i=0,l=[];++a<s;){var d=r[a];n(d,a,r)&&(l[i++]=d)}return l}return Rx=t,Rx}var $x,cS;function dT(){if(cS)return $x;cS=1;function t(){return[]}return $x=t,$x}var Fx,dS;function Uy(){if(dS)return Fx;dS=1;var t=_L(),r=dT(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(l){return l==null?[]:(l=Object(l),t(s(l),function(d){return a.call(l,d)}))}:r;return Fx=i,Fx}var Bx,uS;function IL(){if(uS)return Bx;uS=1;function t(r,n){for(var a=-1,s=Array(r);++a<r;)s[a]=n(a);return s}return Bx=t,Bx}var Ux,mS;function ML(){if(mS)return Ux;mS=1;var t=qa(),r=Xn(),n="[object Arguments]";function a(s){return r(s)&&t(s)==n}return Ux=a,Ux}var Wx,fS;function Wy(){if(fS)return Wx;fS=1;var t=ML(),r=Xn(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(l){return r(l)&&a.call(l,"callee")&&!s.call(l,"callee")};return Wx=i,Wx}var Kl={exports:{}},qx,pS;function LL(){if(pS)return qx;pS=1;function t(){return!1}return qx=t,qx}Kl.exports;var hS;function qy(){return hS||(hS=1,(function(t,r){var n=Yn(),a=LL(),s=r&&!r.nodeType&&r,i=s&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===s,d=l?n.Buffer:void 0,u=d?d.isBuffer:void 0,m=u||a;t.exports=m})(Kl,Kl.exports)),Kl.exports}var zx,xS;function zy(){if(xS)return zx;xS=1;var t=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??t,!!s&&(i=="number"||i!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<s}return zx=n,zx}var Gx,gS;function Gy(){if(gS)return Gx;gS=1;var t=9007199254740991;function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Gx=r,Gx}var Hx,bS;function DL(){if(bS)return Hx;bS=1;var t=qa(),r=Gy(),n=Xn(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",m="[object Map]",f="[object Number]",p="[object Object]",x="[object RegExp]",g="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",S="[object DataView]",C="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",N="[object Int16Array]",O="[object Int32Array]",E="[object Uint8Array]",P="[object Uint8ClampedArray]",I="[object Uint16Array]",M="[object Uint32Array]",D={};D[C]=D[k]=D[T]=D[N]=D[O]=D[E]=D[P]=D[I]=D[M]=!0,D[a]=D[s]=D[y]=D[i]=D[S]=D[l]=D[d]=D[u]=D[m]=D[f]=D[p]=D[x]=D[g]=D[v]=D[b]=!1;function U(F){return n(F)&&r(F.length)&&!!D[t(F)]}return Hx=U,Hx}var Vx,vS;function Wm(){if(vS)return Vx;vS=1;function t(r){return function(n){return r(n)}}return Vx=t,Vx}var Yl={exports:{}};Yl.exports;var yS;function Hy(){return yS||(yS=1,(function(t,r){var n=E3(),a=r&&!r.nodeType&&r,s=a&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===a,l=i&&n.process,d=(function(){try{var u=s&&s.require&&s.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}})();t.exports=d})(Yl,Yl.exports)),Yl.exports}var Kx,jS;function uT(){if(jS)return Kx;jS=1;var t=DL(),r=Wm(),n=Hy(),a=n&&n.isTypedArray,s=a?r(a):t;return Kx=s,Kx}var Yx,wS;function mT(){if(wS)return Yx;wS=1;var t=IL(),r=Wy(),n=$r(),a=qy(),s=zy(),i=uT(),l=Object.prototype,d=l.hasOwnProperty;function u(m,f){var p=n(m),x=!p&&r(m),g=!p&&!x&&a(m),v=!p&&!x&&!g&&i(m),b=p||x||g||v,y=b?t(m.length,String):[],S=y.length;for(var C in m)(f||d.call(m,C))&&!(b&&(C=="length"||g&&(C=="offset"||C=="parent")||v&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||s(C,S)))&&y.push(C);return y}return Yx=u,Yx}var Xx,NS;function Vy(){if(NS)return Xx;NS=1;var t=Object.prototype;function r(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||t;return n===s}return Xx=r,Xx}var Jx,SS;function fT(){if(SS)return Jx;SS=1;function t(r,n){return function(a){return r(n(a))}}return Jx=t,Jx}var Qx,kS;function RL(){if(kS)return Qx;kS=1;var t=fT(),r=t(Object.keys,Object);return Qx=r,Qx}var Zx,CS;function $L(){if(CS)return Zx;CS=1;var t=Vy(),r=RL(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!t(i))return r(i);var l=[];for(var d in Object(i))a.call(i,d)&&d!="constructor"&&l.push(d);return l}return Zx=s,Zx}var eg,AS;function Ho(){if(AS)return eg;AS=1;var t=Ty(),r=Gy();function n(a){return a!=null&&r(a.length)&&!t(a)}return eg=n,eg}var tg,TS;function Vo(){if(TS)return tg;TS=1;var t=mT(),r=$L(),n=Ho();function a(s){return n(s)?t(s):r(s)}return tg=a,tg}var rg,ES;function pT(){if(ES)return rg;ES=1;var t=cT(),r=Uy(),n=Vo();function a(s){return t(s,n,r)}return rg=a,rg}var ng,OS;function FL(){if(OS)return ng;OS=1;var t=pT(),r=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d,u,m,f){var p=d&r,x=t(i),g=x.length,v=t(l),b=v.length;if(g!=b&&!p)return!1;for(var y=g;y--;){var S=x[y];if(!(p?S in l:a.call(l,S)))return!1}var C=f.get(i),k=f.get(l);if(C&&k)return C==l&&k==i;var T=!0;f.set(i,l),f.set(l,i);for(var N=p;++y<g;){S=x[y];var O=i[S],E=l[S];if(u)var P=p?u(E,O,S,l,i,f):u(O,E,S,i,l,f);if(!(P===void 0?O===E||m(O,E,d,u,f):P)){T=!1;break}N||(N=S=="constructor")}if(T&&!N){var I=i.constructor,M=l.constructor;I!=M&&"constructor"in i&&"constructor"in l&&!(typeof I=="function"&&I instanceof I&&typeof M=="function"&&M instanceof M)&&(T=!1)}return f.delete(i),f.delete(l),T}return ng=s,ng}var ag,PS;function BL(){if(PS)return ag;PS=1;var t=xi(),r=Yn(),n=t(r,"DataView");return ag=n,ag}var sg,_S;function UL(){if(_S)return sg;_S=1;var t=xi(),r=Yn(),n=t(r,"Promise");return sg=n,sg}var ig,IS;function hT(){if(IS)return ig;IS=1;var t=xi(),r=Yn(),n=t(r,"Set");return ig=n,ig}var og,MS;function WL(){if(MS)return og;MS=1;var t=xi(),r=Yn(),n=t(r,"WeakMap");return og=n,og}var lg,LS;function qm(){if(LS)return lg;LS=1;var t=BL(),r=Ey(),n=UL(),a=hT(),s=WL(),i=qa(),l=O3(),d="[object Map]",u="[object Object]",m="[object Promise]",f="[object Set]",p="[object WeakMap]",x="[object DataView]",g=l(t),v=l(r),b=l(n),y=l(a),S=l(s),C=i;return(t&&C(new t(new ArrayBuffer(1)))!=x||r&&C(new r)!=d||n&&C(n.resolve())!=m||a&&C(new a)!=f||s&&C(new s)!=p)&&(C=function(k){var T=i(k),N=T==u?k.constructor:void 0,O=N?l(N):"";if(O)switch(O){case g:return x;case v:return d;case b:return m;case y:return f;case S:return p}return T}),lg=C,lg}var cg,DS;function qL(){if(DS)return cg;DS=1;var t=$y(),r=oT(),n=PL(),a=FL(),s=qm(),i=$r(),l=qy(),d=uT(),u=1,m="[object Arguments]",f="[object Array]",p="[object Object]",x=Object.prototype,g=x.hasOwnProperty;function v(b,y,S,C,k,T){var N=i(b),O=i(y),E=N?f:s(b),P=O?f:s(y);E=E==m?p:E,P=P==m?p:P;var I=E==p,M=P==p,D=E==P;if(D&&l(b)){if(!l(y))return!1;N=!0,I=!1}if(D&&!I)return T||(T=new t),N||d(b)?r(b,y,S,C,k,T):n(b,y,E,S,C,k,T);if(!(S&u)){var U=I&&g.call(b,"__wrapped__"),F=M&&g.call(y,"__wrapped__");if(U||F){var W=U?b.value():b,$=F?y.value():y;return T||(T=new t),k(W,$,S,C,T)}}return D?(T||(T=new t),a(b,y,S,C,k,T)):!1}return cg=v,cg}var dg,RS;function Ky(){if(RS)return dg;RS=1;var t=qL(),r=Xn();function n(a,s,i,l,d){return a===s?!0:a==null||s==null||!r(a)&&!r(s)?a!==a&&s!==s:t(a,s,i,l,n,d)}return dg=n,dg}var ug,$S;function zL(){if($S)return ug;$S=1;var t=$y(),r=Ky(),n=1,a=2;function s(i,l,d,u){var m=d.length,f=m,p=!u;if(i==null)return!f;for(i=Object(i);m--;){var x=d[m];if(p&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++m<f;){x=d[m];var g=x[0],v=i[g],b=x[1];if(p&&x[2]){if(v===void 0&&!(g in i))return!1}else{var y=new t;if(u)var S=u(v,b,g,i,l,y);if(!(S===void 0?r(b,v,n|a,u,y):S))return!1}}return!0}return ug=s,ug}var mg,FS;function xT(){if(FS)return mg;FS=1;var t=Jn();function r(n){return n===n&&!t(n)}return mg=r,mg}var fg,BS;function GL(){if(BS)return fg;BS=1;var t=xT(),r=Vo();function n(a){for(var s=r(a),i=s.length;i--;){var l=s[i],d=a[l];s[i]=[l,d,t(d)]}return s}return fg=n,fg}var pg,US;function gT(){if(US)return pg;US=1;function t(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==void 0||r in Object(a))}}return pg=t,pg}var hg,WS;function HL(){if(WS)return hg;WS=1;var t=zL(),r=GL(),n=gT();function a(s){var i=r(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(l){return l===s||t(l,s,i)}}return hg=a,hg}var xg,qS;function VL(){if(qS)return xg;qS=1;function t(r,n){return r!=null&&n in Object(r)}return xg=t,xg}var gg,zS;function KL(){if(zS)return gg;zS=1;var t=Dm(),r=Wy(),n=$r(),a=zy(),s=Gy(),i=qc();function l(d,u,m){u=t(u,d);for(var f=-1,p=u.length,x=!1;++f<p;){var g=i(u[f]);if(!(x=d!=null&&m(d,g)))break;d=d[g]}return x||++f!=p?x:(p=d==null?0:d.length,!!p&&s(p)&&a(g,p)&&(n(d)||r(d)))}return gg=l,gg}var bg,GS;function YL(){if(GS)return bg;GS=1;var t=VL(),r=KL();function n(a,s){return a!=null&&r(a,s,t)}return bg=n,bg}var vg,HS;function XL(){if(HS)return vg;HS=1;var t=Ky(),r=I3(),n=YL(),a=Ay(),s=xT(),i=gT(),l=qc(),d=1,u=2;function m(f,p){return a(f)&&s(p)?i(l(f),p):function(x){var g=r(x,f);return g===void 0&&g===p?n(x,f):t(p,g,d|u)}}return vg=m,vg}var yg,VS;function Ko(){if(VS)return yg;VS=1;function t(r){return r}return yg=t,yg}var jg,KS;function JL(){if(KS)return jg;KS=1;function t(r){return function(n){return n?.[r]}}return jg=t,jg}var wg,YS;function QL(){if(YS)return wg;YS=1;var t=Rm();function r(n){return function(a){return t(a,n)}}return wg=r,wg}var Ng,XS;function ZL(){if(XS)return Ng;XS=1;var t=JL(),r=QL(),n=Ay(),a=qc();function s(i){return n(i)?t(a(i)):r(i)}return Ng=s,Ng}var Sg,JS;function pa(){if(JS)return Sg;JS=1;var t=HL(),r=XL(),n=Ko(),a=$r(),s=ZL();function i(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?a(l)?r(l[0],l[1]):t(l):s(l)}return Sg=i,Sg}var kg,QS;function bT(){if(QS)return kg;QS=1;function t(r,n,a,s){for(var i=r.length,l=a+(s?1:-1);s?l--:++l<i;)if(n(r[l],l,r))return l;return-1}return kg=t,kg}var Cg,ZS;function eD(){if(ZS)return Cg;ZS=1;function t(r){return r!==r}return Cg=t,Cg}var Ag,ek;function tD(){if(ek)return Ag;ek=1;function t(r,n,a){for(var s=a-1,i=r.length;++s<i;)if(r[s]===n)return s;return-1}return Ag=t,Ag}var Tg,tk;function rD(){if(tk)return Tg;tk=1;var t=bT(),r=eD(),n=tD();function a(s,i,l){return i===i?n(s,i,l):t(s,r,l)}return Tg=a,Tg}var Eg,rk;function nD(){if(rk)return Eg;rk=1;var t=rD();function r(n,a){var s=n==null?0:n.length;return!!s&&t(n,a,0)>-1}return Eg=r,Eg}var Og,nk;function aD(){if(nk)return Og;nk=1;function t(r,n,a){for(var s=-1,i=r==null?0:r.length;++s<i;)if(a(n,r[s]))return!0;return!1}return Og=t,Og}var Pg,ak;function sD(){if(ak)return Pg;ak=1;function t(){}return Pg=t,Pg}var _g,sk;function iD(){if(sk)return _g;sk=1;var t=hT(),r=sD(),n=Fy(),a=1/0,s=t&&1/n(new t([,-0]))[1]==a?function(i){return new t(i)}:r;return _g=s,_g}var Ig,ik;function oD(){if(ik)return Ig;ik=1;var t=aT(),r=nD(),n=aD(),a=iT(),s=iD(),i=Fy(),l=200;function d(u,m,f){var p=-1,x=r,g=u.length,v=!0,b=[],y=b;if(f)v=!1,x=n;else if(g>=l){var S=m?null:s(u);if(S)return i(S);v=!1,x=a,y=new t}else y=m?[]:b;e:for(;++p<g;){var C=u[p],k=m?m(C):C;if(C=f||C!==0?C:0,v&&k===k){for(var T=y.length;T--;)if(y[T]===k)continue e;m&&y.push(k),b.push(C)}else x(y,k,f)||(y!==b&&y.push(k),b.push(C))}return b}return Ig=d,Ig}var Mg,ok;function lD(){if(ok)return Mg;ok=1;var t=pa(),r=oD();function n(a,s){return a&&a.length?r(a,t(s,2)):[]}return Mg=n,Mg}var cD=lD();const lk=wt(cD);function vT(t,r,n){return r===!0?lk(t,n):Ze(r)?lk(t,r):t}function ho(t){"@babel/helpers - typeof";return ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ho(t)}var dD=["ref"];function ck(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Oa(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ck(Object(n),!0).forEach(function(a){zm(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function uD(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function dk(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,jT(a.key),a)}}function mD(t,r,n){return r&&dk(t.prototype,r),n&&dk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fD(t,r,n){return r=Mu(r),pD(t,yT()?Reflect.construct(r,n||[],Mu(t).constructor):r.apply(t,n))}function pD(t,r){if(r&&(ho(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hD(t)}function hD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yT=function(){return!!t})()}function Mu(t){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mu(t)}function xD(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&lv(t,r)}function lv(t,r){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lv(t,r)}function zm(t,r,n){return r=jT(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function jT(t){var r=gD(t,"string");return ho(r)=="symbol"?r:r+""}function gD(t,r){if(ho(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(ho(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bD(t,r){if(t==null)return{};var n=vD(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function vD(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function yD(t){return t.value}function jD(t,r){if(Y.isValidElement(t))return Y.cloneElement(t,r);if(typeof t=="function")return Y.createElement(t,r);r.ref;var n=bD(r,dD);return Y.createElement(Ry,n)}var uk=1,Nn=(function(t){function r(){var n;uD(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=fD(this,r,[].concat(s)),zm(n,"lastBoundingBox",{width:-1,height:-1}),n}return xD(r,t),mD(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>uk||Math.abs(s.height-this.lastBoundingBox.height)>uk)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Oa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,l=s.align,d=s.verticalAlign,u=s.margin,m=s.chartWidth,f=s.chartHeight,p,x;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();p={left:((m||0)-g.width)/2}}else p=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(d==="middle"){var v=this.getBBoxSnapshot();x={top:((f||0)-v.height)/2}}else x=d==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Oa(Oa({},p),x)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,l=s.width,d=s.height,u=s.wrapperStyle,m=s.payloadUniqBy,f=s.payload,p=Oa(Oa({position:"absolute",width:l||"auto",height:d||"auto"},this.getDefaultPosition(u)),u);return Y.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(g){a.wrapperNode=g}},jD(i,Oa(Oa({},this.props),{},{payload:vT(f,m,yD)})))}}],[{key:"getWithHeight",value:function(a,s){var i=Oa(Oa({},this.defaultProps),a.props),l=i.layout;return l==="vertical"&&Ce(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||s}:null}}])})(w.PureComponent);zm(Nn,"displayName","Legend");zm(Nn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Lg,mk;function wD(){if(mk)return Lg;mk=1;var t=Wo(),r=Wy(),n=$r(),a=t?t.isConcatSpreadable:void 0;function s(i){return n(i)||r(i)||!!(a&&i&&i[a])}return Lg=s,Lg}var Dg,fk;function Yy(){if(fk)return Dg;fk=1;var t=By(),r=wD();function n(a,s,i,l,d){var u=-1,m=a.length;for(i||(i=r),d||(d=[]);++u<m;){var f=a[u];s>0&&i(f)?s>1?n(f,s-1,i,l,d):t(d,f):l||(d[d.length]=f)}return d}return Dg=n,Dg}var Rg,pk;function ND(){if(pk)return Rg;pk=1;function t(r){return function(n,a,s){for(var i=-1,l=Object(n),d=s(n),u=d.length;u--;){var m=d[r?u:++i];if(a(l[m],m,l)===!1)break}return n}}return Rg=t,Rg}var $g,hk;function SD(){if(hk)return $g;hk=1;var t=ND(),r=t();return $g=r,$g}var Fg,xk;function wT(){if(xk)return Fg;xk=1;var t=SD(),r=Vo();function n(a,s){return a&&t(a,s,r)}return Fg=n,Fg}var Bg,gk;function kD(){if(gk)return Bg;gk=1;var t=Ho();function r(n,a){return function(s,i){if(s==null)return s;if(!t(s))return n(s,i);for(var l=s.length,d=a?l:-1,u=Object(s);(a?d--:++d<l)&&i(u[d],d,u)!==!1;);return s}}return Bg=r,Bg}var Ug,bk;function Xy(){if(bk)return Ug;bk=1;var t=wT(),r=kD(),n=r(t);return Ug=n,Ug}var Wg,vk;function NT(){if(vk)return Wg;vk=1;var t=Xy(),r=Ho();function n(a,s){var i=-1,l=r(a)?Array(a.length):[];return t(a,function(d,u,m){l[++i]=s(d,u,m)}),l}return Wg=n,Wg}var qg,yk;function CD(){if(yk)return qg;yk=1;function t(r,n){var a=r.length;for(r.sort(n);a--;)r[a]=r[a].value;return r}return qg=t,qg}var zg,jk;function AD(){if(jk)return zg;jk=1;var t=qo();function r(n,a){if(n!==a){var s=n!==void 0,i=n===null,l=n===n,d=t(n),u=a!==void 0,m=a===null,f=a===a,p=t(a);if(!m&&!p&&!d&&n>a||d&&u&&f&&!m&&!p||i&&u&&f||!s&&f||!l)return 1;if(!i&&!d&&!p&&n<a||p&&s&&l&&!i&&!d||m&&s&&l||!u&&l||!f)return-1}return 0}return zg=r,zg}var Gg,wk;function TD(){if(wk)return Gg;wk=1;var t=AD();function r(n,a,s){for(var i=-1,l=n.criteria,d=a.criteria,u=l.length,m=s.length;++i<u;){var f=t(l[i],d[i]);if(f){if(i>=m)return f;var p=s[i];return f*(p=="desc"?-1:1)}}return n.index-a.index}return Gg=r,Gg}var Hg,Nk;function ED(){if(Nk)return Hg;Nk=1;var t=Lm(),r=Rm(),n=pa(),a=NT(),s=CD(),i=Wm(),l=TD(),d=Ko(),u=$r();function m(f,p,x){p.length?p=t(p,function(b){return u(b)?function(y){return r(y,b.length===1?b[0]:b)}:b}):p=[d];var g=-1;p=t(p,i(n));var v=a(f,function(b,y,S){var C=t(p,function(k){return k(b)});return{criteria:C,index:++g,value:b}});return s(v,function(b,y){return l(b,y,x)})}return Hg=m,Hg}var Vg,Sk;function OD(){if(Sk)return Vg;Sk=1;function t(r,n,a){switch(a.length){case 0:return r.call(n);case 1:return r.call(n,a[0]);case 2:return r.call(n,a[0],a[1]);case 3:return r.call(n,a[0],a[1],a[2])}return r.apply(n,a)}return Vg=t,Vg}var Kg,kk;function ST(){if(kk)return Kg;kk=1;var t=OD(),r=Math.max;function n(a,s,i){return s=r(s===void 0?a.length-1:s,0),function(){for(var l=arguments,d=-1,u=r(l.length-s,0),m=Array(u);++d<u;)m[d]=l[s+d];d=-1;for(var f=Array(s+1);++d<s;)f[d]=l[d];return f[s]=i(m),t(a,this,f)}}return Kg=n,Kg}var Yg,Ck;function PD(){if(Ck)return Yg;Ck=1;function t(r){return function(){return r}}return Yg=t,Yg}var Xg,Ak;function kT(){if(Ak)return Xg;Ak=1;var t=xi(),r=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Xg=r,Xg}var Jg,Tk;function _D(){if(Tk)return Jg;Tk=1;var t=PD(),r=kT(),n=Ko(),a=r?function(s,i){return r(s,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:n;return Jg=a,Jg}var Qg,Ek;function ID(){if(Ek)return Qg;Ek=1;var t=800,r=16,n=Date.now;function a(s){var i=0,l=0;return function(){var d=n(),u=r-(d-l);if(l=d,u>0){if(++i>=t)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Qg=a,Qg}var Zg,Ok;function CT(){if(Ok)return Zg;Ok=1;var t=_D(),r=ID(),n=r(t);return Zg=n,Zg}var eb,Pk;function MD(){if(Pk)return eb;Pk=1;var t=Ko(),r=ST(),n=CT();function a(s,i){return n(r(s,i,t),s+"")}return eb=a,eb}var tb,_k;function Gm(){if(_k)return tb;_k=1;var t=Pm(),r=Ho(),n=zy(),a=Jn();function s(i,l,d){if(!a(d))return!1;var u=typeof l;return(u=="number"?r(d)&&n(l,d.length):u=="string"&&l in d)?t(d[l],i):!1}return tb=s,tb}var rb,Ik;function LD(){if(Ik)return rb;Ik=1;var t=Yy(),r=ED(),n=MD(),a=Gm(),s=n(function(i,l){if(i==null)return[];var d=l.length;return d>1&&a(i,l[0],l[1])?l=[]:d>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),r(i,t(l,1),[])});return rb=s,rb}var DD=LD();const Jy=wt(DD);function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cc(t)}function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cv.apply(this,arguments)}function RD(t,r){return UD(t)||BD(t,r)||FD(t,r)||$D()}function $D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FD(t,r){if(t){if(typeof t=="string")return Mk(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mk(t,r)}}function Mk(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function BD(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function UD(t){if(Array.isArray(t))return t}function Lk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function nb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Lk(Object(n),!0).forEach(function(a){WD(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function WD(t,r,n){return r=qD(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function qD(t){var r=zD(t,"string");return cc(r)=="symbol"?r:r+""}function zD(t,r){if(cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function GD(t){return Array.isArray(t)&&cr(t[0])&&cr(t[1])?t.join(" ~ "):t}var HD=function(r){var n=r.separator,a=n===void 0?" : ":n,s=r.contentStyle,i=s===void 0?{}:s,l=r.itemStyle,d=l===void 0?{}:l,u=r.labelStyle,m=u===void 0?{}:u,f=r.payload,p=r.formatter,x=r.itemSorter,g=r.wrapperClassName,v=r.labelClassName,b=r.label,y=r.labelFormatter,S=r.accessibilityLayer,C=S===void 0?!1:S,k=function(){if(f&&f.length){var U={padding:0,margin:0},F=(x?Jy(f,x):f).map(function(W,$){if(W.type==="none")return null;var H=nb({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},d),z=W.formatter||p||GD,q=W.value,Q=W.name,ee=q,R=Q;if(z&&ee!=null&&R!=null){var L=z(q,Q,W,$,f);if(Array.isArray(L)){var G=RD(L,2);ee=G[0],R=G[1]}else ee=L}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:H},cr(R)?Y.createElement("span",{className:"recharts-tooltip-item-name"},R):null,cr(R)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},ee),Y.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:U},F)}return null},T=nb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=nb({margin:0},m),O=!nt(b),E=O?b:"",P=st("recharts-default-tooltip",g),I=st("recharts-tooltip-label",v);O&&y&&f!==void 0&&f!==null&&(E=y(b,f));var M=C?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",cv({className:P,style:T},M),Y.createElement("p",{className:I,style:N},Y.isValidElement(E)?E:"".concat(E)),k())};function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dc(t)}function cu(t,r,n){return r=VD(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function VD(t){var r=KD(t,"string");return dc(r)=="symbol"?r:r+""}function KD(t,r){if(dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Ll="recharts-tooltip-wrapper",YD={visibility:"hidden"};function XD(t){var r=t.coordinate,n=t.translateX,a=t.translateY;return st(Ll,cu(cu(cu(cu({},"".concat(Ll,"-right"),Ce(n)&&r&&Ce(r.x)&&n>=r.x),"".concat(Ll,"-left"),Ce(n)&&r&&Ce(r.x)&&n<r.x),"".concat(Ll,"-bottom"),Ce(a)&&r&&Ce(r.y)&&a>=r.y),"".concat(Ll,"-top"),Ce(a)&&r&&Ce(r.y)&&a<r.y))}function Dk(t){var r=t.allowEscapeViewBox,n=t.coordinate,a=t.key,s=t.offsetTopLeft,i=t.position,l=t.reverseDirection,d=t.tooltipDimension,u=t.viewBox,m=t.viewBoxDimension;if(i&&Ce(i[a]))return i[a];var f=n[a]-d-s,p=n[a]+s;if(r[a])return l[a]?f:p;if(l[a]){var x=f,g=u[a];return x<g?Math.max(p,u[a]):Math.max(f,u[a])}var v=p+d,b=u[a]+m;return v>b?Math.max(f,u[a]):Math.max(p,u[a])}function JD(t){var r=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function QD(t){var r=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,s=t.position,i=t.reverseDirection,l=t.tooltipBox,d=t.useTranslate3d,u=t.viewBox,m,f,p;return l.height>0&&l.width>0&&n?(f=Dk({allowEscapeViewBox:r,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),p=Dk({allowEscapeViewBox:r,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),m=JD({translateX:f,translateY:p,useTranslate3d:d})):m=YD,{cssProperties:m,cssClasses:XD({translateX:f,translateY:p,coordinate:n})}}function xo(t){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xo(t)}function Rk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function $k(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Rk(Object(n),!0).forEach(function(a){uv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ZD(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e8(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,TT(a.key),a)}}function t8(t,r,n){return r&&e8(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r8(t,r,n){return r=Lu(r),n8(t,AT()?Reflect.construct(r,n||[],Lu(t).constructor):r.apply(t,n))}function n8(t,r){if(r&&(xo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a8(t)}function a8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AT=function(){return!!t})()}function Lu(t){return Lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lu(t)}function s8(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&dv(t,r)}function dv(t,r){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},dv(t,r)}function uv(t,r,n){return r=TT(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function TT(t){var r=i8(t,"string");return xo(r)=="symbol"?r:r+""}function i8(t,r){if(xo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(xo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fk=1,o8=(function(t){function r(){var n;ZD(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=r8(this,r,[].concat(s)),uv(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),uv(n,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,m,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(m=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&m!==void 0?m:0}})}}),n}return s8(r,t),t8(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>Fk||Math.abs(a.height-this.state.lastBoundingBox.height)>Fk)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,m=s.children,f=s.coordinate,p=s.hasPayload,x=s.isAnimationActive,g=s.offset,v=s.position,b=s.reverseDirection,y=s.useTranslate3d,S=s.viewBox,C=s.wrapperStyle,k=QD({allowEscapeViewBox:l,coordinate:f,offsetTopLeft:g,position:v,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:S}),T=k.cssClasses,N=k.cssProperties,O=$k($k({transition:x&&i?"transform ".concat(d,"ms ").concat(u):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},C);return Y.createElement("div",{tabIndex:-1,className:T,style:O,ref:function(P){a.wrapperNode=P}},m)}}])})(w.PureComponent),l8=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},za={isSsr:l8()};function go(t){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},go(t)}function Bk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Uk(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Bk(Object(n),!0).forEach(function(a){Qy(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function c8(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function d8(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OT(a.key),a)}}function u8(t,r,n){return r&&d8(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function m8(t,r,n){return r=Du(r),f8(t,ET()?Reflect.construct(r,n||[],Du(t).constructor):r.apply(t,n))}function f8(t,r){if(r&&(go(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p8(t)}function p8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ET(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ET=function(){return!!t})()}function Du(t){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Du(t)}function h8(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&mv(t,r)}function mv(t,r){return mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},mv(t,r)}function Qy(t,r,n){return r=OT(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function OT(t){var r=x8(t,"string");return go(r)=="symbol"?r:r+""}function x8(t,r){if(go(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(go(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function g8(t){return t.dataKey}function b8(t,r){return Y.isValidElement(t)?Y.cloneElement(t,r):typeof t=="function"?Y.createElement(t,r):Y.createElement(HD,r)}var Ut=(function(t){function r(){return c8(this,r),m8(this,r,arguments)}return h8(r,t),u8(r,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,m=s.content,f=s.coordinate,p=s.filterNull,x=s.isAnimationActive,g=s.offset,v=s.payload,b=s.payloadUniqBy,y=s.position,S=s.reverseDirection,C=s.useTranslate3d,k=s.viewBox,T=s.wrapperStyle,N=v??[];p&&N.length&&(N=vT(v.filter(function(E){return E.value!=null&&(E.hide!==!0||a.props.includeHidden)}),b,g8));var O=N.length>0;return Y.createElement(o8,{allowEscapeViewBox:l,animationDuration:d,animationEasing:u,isAnimationActive:x,active:i,coordinate:f,hasPayload:O,offset:g,position:y,reverseDirection:S,useTranslate3d:C,viewBox:k,wrapperStyle:T},b8(m,Uk(Uk({},this.props),{},{payload:N})))}}])})(w.PureComponent);Qy(Ut,"displayName","Tooltip");Qy(Ut,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!za.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ab,Wk;function v8(){if(Wk)return ab;Wk=1;var t=Yn(),r=function(){return t.Date.now()};return ab=r,ab}var sb,qk;function y8(){if(qk)return sb;qk=1;var t=/\s/;function r(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return sb=r,sb}var ib,zk;function j8(){if(zk)return ib;zk=1;var t=y8(),r=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(r,"")}return ib=n,ib}var ob,Gk;function PT(){if(Gk)return ob;Gk=1;var t=j8(),r=Jn(),n=qo(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(m){if(typeof m=="number")return m;if(n(m))return a;if(r(m)){var f=typeof m.valueOf=="function"?m.valueOf():m;m=r(f)?f+"":f}if(typeof m!="string")return m===0?m:+m;m=t(m);var p=i.test(m);return p||l.test(m)?d(m.slice(2),p?2:8):s.test(m)?a:+m}return ob=u,ob}var lb,Hk;function w8(){if(Hk)return lb;Hk=1;var t=Jn(),r=v8(),n=PT(),a="Expected a function",s=Math.max,i=Math.min;function l(d,u,m){var f,p,x,g,v,b,y=0,S=!1,C=!1,k=!0;if(typeof d!="function")throw new TypeError(a);u=n(u)||0,t(m)&&(S=!!m.leading,C="maxWait"in m,x=C?s(n(m.maxWait)||0,u):x,k="trailing"in m?!!m.trailing:k);function T(F){var W=f,$=p;return f=p=void 0,y=F,g=d.apply($,W),g}function N(F){return y=F,v=setTimeout(P,u),S?T(F):g}function O(F){var W=F-b,$=F-y,H=u-W;return C?i(H,x-$):H}function E(F){var W=F-b,$=F-y;return b===void 0||W>=u||W<0||C&&$>=x}function P(){var F=r();if(E(F))return I(F);v=setTimeout(P,O(F))}function I(F){return v=void 0,k&&f?T(F):(f=p=void 0,g)}function M(){v!==void 0&&clearTimeout(v),y=0,f=b=p=v=void 0}function D(){return v===void 0?g:I(r())}function U(){var F=r(),W=E(F);if(f=arguments,p=this,b=F,W){if(v===void 0)return N(b);if(C)return clearTimeout(v),v=setTimeout(P,u),T(b)}return v===void 0&&(v=setTimeout(P,u)),g}return U.cancel=M,U.flush=D,U}return lb=l,lb}var cb,Vk;function N8(){if(Vk)return cb;Vk=1;var t=w8(),r=Jn(),n="Expected a function";function a(s,i,l){var d=!0,u=!0;if(typeof s!="function")throw new TypeError(n);return r(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),t(s,i,{leading:d,maxWait:i,trailing:u})}return cb=a,cb}var S8=N8();const _T=wt(S8);function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},uc(t)}function Kk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function du(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Kk(Object(n),!0).forEach(function(a){k8(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function k8(t,r,n){return r=C8(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function C8(t){var r=A8(t,"string");return uc(r)=="symbol"?r:r+""}function A8(t,r){if(uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(uc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function T8(t,r){return _8(t)||P8(t,r)||O8(t,r)||E8()}function E8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O8(t,r){if(t){if(typeof t=="string")return Yk(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yk(t,r)}}function Yk(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function P8(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function _8(t){if(Array.isArray(t))return t}var Rr=w.forwardRef(function(t,r){var n=t.aspect,a=t.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=t.width,l=i===void 0?"100%":i,d=t.height,u=d===void 0?"100%":d,m=t.minWidth,f=m===void 0?0:m,p=t.minHeight,x=t.maxHeight,g=t.children,v=t.debounce,b=v===void 0?0:v,y=t.id,S=t.className,C=t.onResize,k=t.style,T=k===void 0?{}:k,N=w.useRef(null),O=w.useRef();O.current=C,w.useImperativeHandle(r,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var E=w.useState({containerWidth:s.width,containerHeight:s.height}),P=T8(E,2),I=P[0],M=P[1],D=w.useCallback(function(F,W){M(function($){var H=Math.round(F),z=Math.round(W);return $.containerWidth===H&&$.containerHeight===z?$:{containerWidth:H,containerHeight:z}})},[]);w.useEffect(function(){var F=function(Q){var ee,R=Q[0].contentRect,L=R.width,G=R.height;D(L,G),(ee=O.current)===null||ee===void 0||ee.call(O,L,G)};b>0&&(F=_T(F,b,{trailing:!0,leading:!1}));var W=new ResizeObserver(F),$=N.current.getBoundingClientRect(),H=$.width,z=$.height;return D(H,z),W.observe(N.current),function(){W.disconnect()}},[D,b]);var U=w.useMemo(function(){var F=I.containerWidth,W=I.containerHeight;if(F<0||W<0)return null;Gn(ri(l)||ri(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Gn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var $=ri(l)?F:l,H=ri(u)?W:u;n&&n>0&&($?H=$/n:H&&($=H*n),x&&H>x&&(H=x)),Gn($>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,H,l,u,f,p,n);var z=!Array.isArray(g)&&Da(g.type).endsWith("Chart");return Y.Children.map(g,function(q){return Y.isValidElement(q)?w.cloneElement(q,du({width:$,height:H},z?{style:du({height:"100%",width:"100%",maxHeight:H,maxWidth:$},q.props.style)}:{})):q})},[n,g,u,x,p,f,I,l]);return Y.createElement("div",{id:y?"".concat(y):void 0,className:st("recharts-responsive-container",S),style:du(du({},T),{},{width:l,height:u,minWidth:f,minHeight:p,maxHeight:x}),ref:N},U)}),Hn=function(r){return null};Hn.displayName="Cell";function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mc(t)}function Xk(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function fv(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Xk(Object(n),!0).forEach(function(a){I8(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function I8(t,r,n){return r=M8(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function M8(t){var r=L8(t,"string");return mc(r)=="symbol"?r:r+""}function L8(t,r){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(mc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Qi={widthCache:{},cacheCount:0},D8=2e3,R8={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Jk="recharts_measurement_span";function $8(t){var r=fv({},t);return Object.keys(r).forEach(function(n){r[n]||delete r[n]}),r}var Ql=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||za.isSsr)return{width:0,height:0};var a=$8(n),s=JSON.stringify({text:r,copyStyle:a});if(Qi.widthCache[s])return Qi.widthCache[s];try{var i=document.getElementById(Jk);i||(i=document.createElement("span"),i.setAttribute("id",Jk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=fv(fv({},R8),a);Object.assign(i.style,l),i.textContent="".concat(r);var d=i.getBoundingClientRect(),u={width:d.width,height:d.height};return Qi.widthCache[s]=u,++Qi.cacheCount>D8&&(Qi.cacheCount=0,Qi.widthCache={}),u}catch{return{width:0,height:0}}},F8=function(r){return{top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft}};function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fc(t)}function Ru(t,r){return q8(t)||W8(t,r)||U8(t,r)||B8()}function B8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U8(t,r){if(t){if(typeof t=="string")return Qk(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qk(t,r)}}function Qk(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function W8(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function q8(t){if(Array.isArray(t))return t}function z8(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Zk(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,H8(a.key),a)}}function G8(t,r,n){return r&&Zk(t.prototype,r),n&&Zk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function H8(t){var r=V8(t,"string");return fc(r)=="symbol"?r:r+""}function V8(t,r){if(fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var e4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K8=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Y8=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,IT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},X8=Object.keys(IT),no="NaN";function J8(t,r){return t*IT[r]}var uu=(function(){function t(r,n){z8(this,t),this.num=r,this.unit=n,this.num=r,this.unit=n,Number.isNaN(r)&&(this.unit=""),n!==""&&!K8.test(n)&&(this.num=NaN,this.unit=""),X8.includes(n)&&(this.num=J8(r,n),this.unit="px")}return G8(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,s=(a=Y8.exec(n))!==null&&a!==void 0?a:[],i=Ru(s,3),l=i[1],d=i[2];return new t(parseFloat(l),d??"")}}])})();function MT(t){if(t.includes(no))return no;for(var r=t;r.includes("*")||r.includes("/");){var n,a=(n=e4.exec(r))!==null&&n!==void 0?n:[],s=Ru(a,4),i=s[1],l=s[2],d=s[3],u=uu.parse(i??""),m=uu.parse(d??""),f=l==="*"?u.multiply(m):u.divide(m);if(f.isNaN())return no;r=r.replace(e4,f.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var p,x=(p=t4.exec(r))!==null&&p!==void 0?p:[],g=Ru(x,4),v=g[1],b=g[2],y=g[3],S=uu.parse(v??""),C=uu.parse(y??""),k=b==="+"?S.add(C):S.subtract(C);if(k.isNaN())return no;r=r.replace(t4,k.toString())}return r}var r4=/\(([^()]*)\)/;function Q8(t){for(var r=t;r.includes("(");){var n=r4.exec(r),a=Ru(n,2),s=a[1];r=r.replace(r4,MT(s))}return r}function Z8(t){var r=t.replace(/\s+/g,"");return r=Q8(r),r=MT(r),r}function eR(t){try{return Z8(t)}catch{return no}}function db(t){var r=eR(t.slice(5,-1));return r===no?"":r}var tR=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rR=["dx","dy","angle","className","breakAll"];function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pv.apply(this,arguments)}function n4(t,r){if(t==null)return{};var n=nR(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function nR(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function a4(t,r){return oR(t)||iR(t,r)||sR(t,r)||aR()}function aR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sR(t,r){if(t){if(typeof t=="string")return s4(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s4(t,r)}}function s4(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function iR(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function oR(t){if(Array.isArray(t))return t}var LT=/[ \f\n\r\t\v\u2028\u2029]+/,DT=function(r){var n=r.children,a=r.breakAll,s=r.style;try{var i=[];nt(n)||(a?i=n.toString().split(""):i=n.toString().split(LT));var l=i.map(function(u){return{word:u,width:Ql(u,s).width}}),d=a?0:Ql("",s).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}},lR=function(r,n,a,s,i){var l=r.maxLines,d=r.children,u=r.style,m=r.breakAll,f=Ce(l),p=d,x=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce(function(H,z){var q=z.word,Q=z.width,ee=H[H.length-1];if(ee&&(s==null||i||ee.width+Q+a<Number(s)))ee.words.push(q),ee.width+=Q+a;else{var R={words:[q],width:Q};H.push(R)}return H},[])},g=x(n),v=function($){return $.reduce(function(H,z){return H.width>z.width?H:z})};if(!f)return g;for(var b="",y=function($){var H=p.slice(0,$),z=DT({breakAll:m,style:u,children:H+b}).wordsWithComputedWidth,q=x(z),Q=q.length>l||v(q).width>Number(s);return[Q,q]},S=0,C=p.length-1,k=0,T;S<=C&&k<=p.length-1;){var N=Math.floor((S+C)/2),O=N-1,E=y(O),P=a4(E,2),I=P[0],M=P[1],D=y(N),U=a4(D,1),F=U[0];if(!I&&!F&&(S=N+1),I&&F&&(C=N-1),!I&&F){T=M;break}k++}return T||g},i4=function(r){var n=nt(r)?[]:r.toString().split(LT);return[{words:n}]},cR=function(r){var n=r.width,a=r.scaleToFit,s=r.children,i=r.style,l=r.breakAll,d=r.maxLines;if((n||a)&&!za.isSsr){var u,m,f=DT({breakAll:l,children:s,style:i});if(f){var p=f.wordsWithComputedWidth,x=f.spaceWidth;u=p,m=x}else return i4(s);return lR({breakAll:l,children:s,maxLines:d,style:i},u,m,n,a)}return i4(s)},o4="#808080",ui=function(r){var n=r.x,a=n===void 0?0:n,s=r.y,i=s===void 0?0:s,l=r.lineHeight,d=l===void 0?"1em":l,u=r.capHeight,m=u===void 0?"0.71em":u,f=r.scaleToFit,p=f===void 0?!1:f,x=r.textAnchor,g=x===void 0?"start":x,v=r.verticalAnchor,b=v===void 0?"end":v,y=r.fill,S=y===void 0?o4:y,C=n4(r,tR),k=w.useMemo(function(){return cR({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:p,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,p,C.style,C.width]),T=C.dx,N=C.dy,O=C.angle,E=C.className,P=C.breakAll,I=n4(C,rR);if(!cr(a)||!cr(i))return null;var M=a+(Ce(T)?T:0),D=i+(Ce(N)?N:0),U;switch(b){case"start":U=db("calc(".concat(m,")"));break;case"middle":U=db("calc(".concat((k.length-1)/2," * -").concat(d," + (").concat(m," / 2))"));break;default:U=db("calc(".concat(k.length-1," * -").concat(d,")"));break}var F=[];if(p){var W=k[0].width,$=C.width;F.push("scale(".concat((Ce($)?$/W:1)/W,")"))}return O&&F.push("rotate(".concat(O,", ").concat(M,", ").concat(D,")")),F.length&&(I.transform=F.join(" ")),Y.createElement("text",pv({},He(I,!0),{x:M,y:D,className:st("recharts-text",E),textAnchor:g,fill:S.includes("url")?o4:S}),k.map(function(H,z){var q=H.words.join(P?"":" ");return Y.createElement("tspan",{x:M,dy:z===0?U:d,key:"".concat(q,"-").concat(z)},q)}))};function ks(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function dR(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function Zy(t){let r,n,a;t.length!==2?(r=ks,n=(d,u)=>ks(t(d),u),a=(d,u)=>t(d)-u):(r=t===ks||t===dR?t:uR,n=t,a=t);function s(d,u,m=0,f=d.length){if(m<f){if(r(u,u)!==0)return f;do{const p=m+f>>>1;n(d[p],u)<0?m=p+1:f=p}while(m<f)}return m}function i(d,u,m=0,f=d.length){if(m<f){if(r(u,u)!==0)return f;do{const p=m+f>>>1;n(d[p],u)<=0?m=p+1:f=p}while(m<f)}return m}function l(d,u,m=0,f=d.length){const p=s(d,u,m,f-1);return p>m&&a(d[p-1],u)>-a(d[p],u)?p-1:p}return{left:s,center:l,right:i}}function uR(){return 0}function RT(t){return t===null?NaN:+t}function*mR(t,r){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const fR=Zy(ks),zc=fR.right;Zy(RT).center;class l4 extends Map{constructor(r,n=xR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[a,s]of r)this.set(a,s)}get(r){return super.get(c4(this,r))}has(r){return super.has(c4(this,r))}set(r,n){return super.set(pR(this,r),n)}delete(r){return super.delete(hR(this,r))}}function c4({_intern:t,_key:r},n){const a=r(n);return t.has(a)?t.get(a):n}function pR({_intern:t,_key:r},n){const a=r(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function hR({_intern:t,_key:r},n){const a=r(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function xR(t){return t!==null&&typeof t=="object"?t.valueOf():t}function gR(t=ks){if(t===ks)return $T;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,n)=>{const a=t(r,n);return a||a===0?a:(t(n,n)===0)-(t(r,r)===0)}}function $T(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const bR=Math.sqrt(50),vR=Math.sqrt(10),yR=Math.sqrt(2);function $u(t,r,n){const a=(r-t)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=bR?10:i>=vR?5:i>=yR?2:1;let d,u,m;return s<0?(m=Math.pow(10,-s)/l,d=Math.round(t*m),u=Math.round(r*m),d/m<t&&++d,u/m>r&&--u,m=-m):(m=Math.pow(10,s)*l,d=Math.round(t/m),u=Math.round(r/m),d*m<t&&++d,u*m>r&&--u),u<d&&.5<=n&&n<2?$u(t,r,n*2):[d,u,m]}function hv(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];const a=r<t,[s,i,l]=a?$u(r,t,n):$u(t,r,n);if(!(i>=s))return[];const d=i-s+1,u=new Array(d);if(a)if(l<0)for(let m=0;m<d;++m)u[m]=(i-m)/-l;else for(let m=0;m<d;++m)u[m]=(i-m)*l;else if(l<0)for(let m=0;m<d;++m)u[m]=(s+m)/-l;else for(let m=0;m<d;++m)u[m]=(s+m)*l;return u}function xv(t,r,n){return r=+r,t=+t,n=+n,$u(t,r,n)[2]}function gv(t,r,n){r=+r,t=+t,n=+n;const a=r<t,s=a?xv(r,t,n):xv(t,r,n);return(a?-1:1)*(s<0?1/-s:s)}function d4(t,r){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function u4(t,r){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function FT(t,r,n=0,a=1/0,s){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=r&&r<=a))return t;for(s=s===void 0?$T:gR(s);a>n;){if(a-n>600){const u=a-n+1,m=r-n+1,f=Math.log(u),p=.5*Math.exp(2*f/3),x=.5*Math.sqrt(f*p*(u-p)/u)*(m-u/2<0?-1:1),g=Math.max(n,Math.floor(r-m*p/u+x)),v=Math.min(a,Math.floor(r+(u-m)*p/u+x));FT(t,r,g,v,s)}const i=t[r];let l=n,d=a;for(Dl(t,n,r),s(t[a],i)>0&&Dl(t,n,a);l<d;){for(Dl(t,l,d),++l,--d;s(t[l],i)<0;)++l;for(;s(t[d],i)>0;)--d}s(t[n],i)===0?Dl(t,n,d):(++d,Dl(t,d,a)),d<=r&&(n=d+1),r<=d&&(a=d-1)}return t}function Dl(t,r,n){const a=t[r];t[r]=t[n],t[n]=a}function jR(t,r,n){if(t=Float64Array.from(mR(t)),!(!(a=t.length)||isNaN(r=+r))){if(r<=0||a<2)return u4(t);if(r>=1)return d4(t);var a,s=(a-1)*r,i=Math.floor(s),l=d4(FT(t,i).subarray(0,i+1)),d=u4(t.subarray(i+1));return l+(d-l)*(s-i)}}function wR(t,r,n=RT){if(!(!(a=t.length)||isNaN(r=+r))){if(r<=0||a<2)return+n(t[0],0,t);if(r>=1)return+n(t[a-1],a-1,t);var a,s=(a-1)*r,i=Math.floor(s),l=+n(t[i],i,t),d=+n(t[i+1],i+1,t);return l+(d-l)*(s-i)}}function NR(t,r,n){t=+t,r=+r,n=(s=arguments.length)<2?(r=t,t=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((r-t)/n))|0,i=new Array(s);++a<s;)i[a]=t+a*n;return i}function Tn(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Ga(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const bv=Symbol("implicit");function ej(){var t=new l4,r=[],n=[],a=bv;function s(i){let l=t.get(i);if(l===void 0){if(a!==bv)return a;t.set(i,l=r.push(i)-1)}return n[l%n.length]}return s.domain=function(i){if(!arguments.length)return r.slice();r=[],t=new l4;for(const l of i)t.has(l)||t.set(l,r.push(l)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return ej(r,n).unknown(a)},Tn.apply(s,arguments),s}function pc(){var t=ej().unknown(void 0),r=t.domain,n=t.range,a=0,s=1,i,l,d=!1,u=0,m=0,f=.5;delete t.unknown;function p(){var x=r().length,g=s<a,v=g?s:a,b=g?a:s;i=(b-v)/Math.max(1,x-u+m*2),d&&(i=Math.floor(i)),v+=(b-v-i*(x-u))*f,l=i*(1-u),d&&(v=Math.round(v),l=Math.round(l));var y=NR(x).map(function(S){return v+i*S});return n(g?y.reverse():y)}return t.domain=function(x){return arguments.length?(r(x),p()):r()},t.range=function(x){return arguments.length?([a,s]=x,a=+a,s=+s,p()):[a,s]},t.rangeRound=function(x){return[a,s]=x,a=+a,s=+s,d=!0,p()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(x){return arguments.length?(d=!!x,p()):d},t.padding=function(x){return arguments.length?(u=Math.min(1,m=+x),p()):u},t.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),p()):u},t.paddingOuter=function(x){return arguments.length?(m=+x,p()):m},t.align=function(x){return arguments.length?(f=Math.max(0,Math.min(1,x)),p()):f},t.copy=function(){return pc(r(),[a,s]).round(d).paddingInner(u).paddingOuter(m).align(f)},Tn.apply(p(),arguments)}function BT(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BT(r())},t}function Zl(){return BT(pc.apply(null,arguments).paddingInner(1))}function tj(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function UT(t,r){var n=Object.create(t.prototype);for(var a in r)n[a]=r[a];return n}function Gc(){}var hc=.7,Fu=1/hc,co="\\s*([+-]?\\d+)\\s*",xc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SR=/^#([0-9a-f]{3,8})$/,kR=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),CR=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),AR=new RegExp(`^rgba\\(${co},${co},${co},${xc}\\)$`),TR=new RegExp(`^rgba\\(${la},${la},${la},${xc}\\)$`),ER=new RegExp(`^hsl\\(${xc},${la},${la}\\)$`),OR=new RegExp(`^hsla\\(${xc},${la},${la},${xc}\\)$`),m4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tj(Gc,gc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:f4,formatHex:f4,formatHex8:PR,formatHsl:_R,formatRgb:p4,toString:p4});function f4(){return this.rgb().formatHex()}function PR(){return this.rgb().formatHex8()}function _R(){return WT(this).formatHsl()}function p4(){return this.rgb().formatRgb()}function gc(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=SR.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?h4(r):n===3?new Kr(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?mu(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?mu(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=kR.exec(t))?new Kr(r[1],r[2],r[3],1):(r=CR.exec(t))?new Kr(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=AR.exec(t))?mu(r[1],r[2],r[3],r[4]):(r=TR.exec(t))?mu(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=ER.exec(t))?b4(r[1],r[2]/100,r[3]/100,1):(r=OR.exec(t))?b4(r[1],r[2]/100,r[3]/100,r[4]):m4.hasOwnProperty(t)?h4(m4[t]):t==="transparent"?new Kr(NaN,NaN,NaN,0):null}function h4(t){return new Kr(t>>16&255,t>>8&255,t&255,1)}function mu(t,r,n,a){return a<=0&&(t=r=n=NaN),new Kr(t,r,n,a)}function IR(t){return t instanceof Gc||(t=gc(t)),t?(t=t.rgb(),new Kr(t.r,t.g,t.b,t.opacity)):new Kr}function vv(t,r,n,a){return arguments.length===1?IR(t):new Kr(t,r,n,a??1)}function Kr(t,r,n,a){this.r=+t,this.g=+r,this.b=+n,this.opacity=+a}tj(Kr,vv,UT(Gc,{brighter(t){return t=t==null?Fu:Math.pow(Fu,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hc:Math.pow(hc,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kr(li(this.r),li(this.g),li(this.b),Bu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x4,formatHex:x4,formatHex8:MR,formatRgb:g4,toString:g4}));function x4(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}`}function MR(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}${ni((isNaN(this.opacity)?1:this.opacity)*255)}`}function g4(){const t=Bu(this.opacity);return`${t===1?"rgb(":"rgba("}${li(this.r)}, ${li(this.g)}, ${li(this.b)}${t===1?")":`, ${t})`}`}function Bu(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function li(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ni(t){return t=li(t),(t<16?"0":"")+t.toString(16)}function b4(t,r,n,a){return a<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new zn(t,r,n,a)}function WT(t){if(t instanceof zn)return new zn(t.h,t.s,t.l,t.opacity);if(t instanceof Gc||(t=gc(t)),!t)return new zn;if(t instanceof zn)return t;t=t.rgb();var r=t.r/255,n=t.g/255,a=t.b/255,s=Math.min(r,n,a),i=Math.max(r,n,a),l=NaN,d=i-s,u=(i+s)/2;return d?(r===i?l=(n-a)/d+(n<a)*6:n===i?l=(a-r)/d+2:l=(r-n)/d+4,d/=u<.5?i+s:2-i-s,l*=60):d=u>0&&u<1?0:l,new zn(l,d,u,t.opacity)}function LR(t,r,n,a){return arguments.length===1?WT(t):new zn(t,r,n,a??1)}function zn(t,r,n,a){this.h=+t,this.s=+r,this.l=+n,this.opacity=+a}tj(zn,LR,UT(Gc,{brighter(t){return t=t==null?Fu:Math.pow(Fu,t),new zn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hc:Math.pow(hc,t),new zn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,s=2*n-a;return new Kr(ub(t>=240?t-240:t+120,s,a),ub(t,s,a),ub(t<120?t+240:t-120,s,a),this.opacity)},clamp(){return new zn(v4(this.h),fu(this.s),fu(this.l),Bu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Bu(this.opacity);return`${t===1?"hsl(":"hsla("}${v4(this.h)}, ${fu(this.s)*100}%, ${fu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function v4(t){return t=(t||0)%360,t<0?t+360:t}function fu(t){return Math.max(0,Math.min(1,t||0))}function ub(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const rj=t=>()=>t;function DR(t,r){return function(n){return t+n*r}}function RR(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(a){return Math.pow(t+a*r,n)}}function $R(t){return(t=+t)==1?qT:function(r,n){return n-r?RR(r,n,t):rj(isNaN(r)?n:r)}}function qT(t,r){var n=r-t;return n?DR(t,n):rj(isNaN(t)?r:t)}const y4=(function t(r){var n=$R(r);function a(s,i){var l=n((s=vv(s)).r,(i=vv(i)).r),d=n(s.g,i.g),u=n(s.b,i.b),m=qT(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=d(f),s.b=u(f),s.opacity=m(f),s+""}}return a.gamma=t,a})(1);function FR(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,a=r.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=t[s]*(1-i)+r[s]*i;return a}}function BR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UR(t,r){var n=r?r.length:0,a=t?Math.min(n,t.length):0,s=new Array(a),i=new Array(n),l;for(l=0;l<a;++l)s[l]=Yo(t[l],r[l]);for(;l<n;++l)i[l]=r[l];return function(d){for(l=0;l<a;++l)i[l]=s[l](d);return i}}function WR(t,r){var n=new Date;return t=+t,r=+r,function(a){return n.setTime(t*(1-a)+r*a),n}}function Uu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}function qR(t,r){var n={},a={},s;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in t?n[s]=Yo(t[s],r[s]):a[s]=r[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var yv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mb=new RegExp(yv.source,"g");function zR(t){return function(){return t}}function GR(t){return function(r){return t(r)+""}}function HR(t,r){var n=yv.lastIndex=mb.lastIndex=0,a,s,i,l=-1,d=[],u=[];for(t=t+"",r=r+"";(a=yv.exec(t))&&(s=mb.exec(r));)(i=s.index)>n&&(i=r.slice(n,i),d[l]?d[l]+=i:d[++l]=i),(a=a[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,u.push({i:l,x:Uu(a,s)})),n=mb.lastIndex;return n<r.length&&(i=r.slice(n),d[l]?d[l]+=i:d[++l]=i),d.length<2?u[0]?GR(u[0].x):zR(r):(r=u.length,function(m){for(var f=0,p;f<r;++f)d[(p=u[f]).i]=p.x(m);return d.join("")})}function Yo(t,r){var n=typeof r,a;return r==null||n==="boolean"?rj(r):(n==="number"?Uu:n==="string"?(a=gc(r))?(r=a,y4):HR:r instanceof gc?y4:r instanceof Date?WR:BR(r)?FR:Array.isArray(r)?UR:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?qR:Uu)(t,r)}function nj(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}function VR(t,r){r===void 0&&(r=t,t=Yo);for(var n=0,a=r.length-1,s=r[0],i=new Array(a<0?0:a);n<a;)i[n]=t(s,s=r[++n]);return function(l){var d=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[d](l-d)}}function KR(t){return function(){return t}}function Wu(t){return+t}var j4=[0,1];function Dr(t){return t}function jv(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:KR(isNaN(r)?NaN:.5)}function YR(t,r){var n;return t>r&&(n=t,t=r,r=n),function(a){return Math.max(t,Math.min(r,a))}}function XR(t,r,n){var a=t[0],s=t[1],i=r[0],l=r[1];return s<a?(a=jv(s,a),i=n(l,i)):(a=jv(a,s),i=n(i,l)),function(d){return i(a(d))}}function JR(t,r,n){var a=Math.min(t.length,r.length)-1,s=new Array(a),i=new Array(a),l=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++l<a;)s[l]=jv(t[l],t[l+1]),i[l]=n(r[l],r[l+1]);return function(d){var u=zc(t,d,1,a)-1;return i[u](s[u](d))}}function Hc(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hm(){var t=j4,r=j4,n=Yo,a,s,i,l=Dr,d,u,m;function f(){var x=Math.min(t.length,r.length);return l!==Dr&&(l=YR(t[0],t[x-1])),d=x>2?JR:XR,u=m=null,p}function p(x){return x==null||isNaN(x=+x)?i:(u||(u=d(t.map(a),r,n)))(a(l(x)))}return p.invert=function(x){return l(s((m||(m=d(r,t.map(a),Uu)))(x)))},p.domain=function(x){return arguments.length?(t=Array.from(x,Wu),f()):t.slice()},p.range=function(x){return arguments.length?(r=Array.from(x),f()):r.slice()},p.rangeRound=function(x){return r=Array.from(x),n=nj,f()},p.clamp=function(x){return arguments.length?(l=x?!0:Dr,f()):l!==Dr},p.interpolate=function(x){return arguments.length?(n=x,f()):n},p.unknown=function(x){return arguments.length?(i=x,p):i},function(x,g){return a=x,s=g,f()}}function aj(){return Hm()(Dr,Dr)}function QR(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qu(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function bo(t){return t=qu(Math.abs(t)),t?t[1]:NaN}function ZR(t,r){return function(n,a){for(var s=n.length,i=[],l=0,d=t[0],u=0;s>0&&d>0&&(u+d+1>a&&(d=Math.max(1,a-u)),i.push(n.substring(s-=d,s+d)),!((u+=d+1)>a));)d=t[l=(l+1)%t.length];return i.reverse().join(r)}}function e$(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var t$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bc(t){if(!(r=t$.exec(t)))throw new Error("invalid format: "+t);var r;return new sj({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}bc.prototype=sj.prototype;function sj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r$(t){e:for(var r=t.length,n=1,a=-1,s;n<r;++n)switch(t[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(s+1):t}var zT;function n$(t,r){var n=qu(t,r);if(!n)return t+"";var a=n[0],s=n[1],i=s-(zT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+qu(t,Math.max(0,r+i-1))[0]}function w4(t,r){var n=qu(t,r);if(!n)return t+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const N4={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:QR,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>w4(t*100,r),r:w4,s:n$,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function S4(t){return t}var k4=Array.prototype.map,C4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a$(t){var r=t.grouping===void 0||t.thousands===void 0?S4:ZR(k4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?S4:e$(k4.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function m(p){p=bc(p);var x=p.fill,g=p.align,v=p.sign,b=p.symbol,y=p.zero,S=p.width,C=p.comma,k=p.precision,T=p.trim,N=p.type;N==="n"?(C=!0,N="g"):N4[N]||(k===void 0&&(k=12),T=!0,N="g"),(y||x==="0"&&g==="=")&&(y=!0,x="0",g="=");var O=b==="$"?n:b==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",E=b==="$"?a:/[%p]/.test(N)?l:"",P=N4[N],I=/[defgprs%]/.test(N);k=k===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function M(D){var U=O,F=E,W,$,H;if(N==="c")F=P(D)+F,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?u:P(Math.abs(D),k),T&&(D=r$(D)),z&&+D==0&&v!=="+"&&(z=!1),U=(z?v==="("?v:d:v==="-"||v==="("?"":v)+U,F=(N==="s"?C4[8+zT/3]:"")+F+(z&&v==="("?")":""),I){for(W=-1,$=D.length;++W<$;)if(H=D.charCodeAt(W),48>H||H>57){F=(H===46?s+D.slice(W+1):D.slice(W))+F,D=D.slice(0,W);break}}}C&&!y&&(D=r(D,1/0));var q=U.length+D.length+F.length,Q=q<S?new Array(S-q+1).join(x):"";switch(C&&y&&(D=r(Q+D,Q.length?S-F.length:1/0),Q=""),g){case"<":D=U+D+F+Q;break;case"=":D=U+Q+D+F;break;case"^":D=Q.slice(0,q=Q.length>>1)+U+D+F+Q.slice(q);break;default:D=Q+U+D+F;break}return i(D)}return M.toString=function(){return p+""},M}function f(p,x){var g=m((p=bc(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(bo(x)/3)))*3,b=Math.pow(10,-v),y=C4[8+v/3];return function(S){return g(b*S)+y}}return{format:m,formatPrefix:f}}var pu,ij,GT;s$({thousands:",",grouping:[3],currency:["$",""]});function s$(t){return pu=a$(t),ij=pu.format,GT=pu.formatPrefix,pu}function i$(t){return Math.max(0,-bo(Math.abs(t)))}function o$(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bo(r)/3)))*3-bo(Math.abs(t)))}function l$(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,bo(r)-bo(t))+1}function HT(t,r,n,a){var s=gv(t,r,n),i;switch(a=bc(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(r));return a.precision==null&&!isNaN(i=o$(s,l))&&(a.precision=i),GT(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=l$(s,Math.max(Math.abs(t),Math.abs(r))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=i$(s))&&(a.precision=i-(a.type==="%")*2);break}}return ij(a)}function Es(t){var r=t.domain;return t.ticks=function(n){var a=r();return hv(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var s=r();return HT(s[0],s[s.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=r(),s=0,i=a.length-1,l=a[s],d=a[i],u,m,f=10;for(d<l&&(m=l,l=d,d=m,m=s,s=i,i=m);f-- >0;){if(m=xv(l,d,n),m===u)return a[s]=l,a[i]=d,r(a);if(m>0)l=Math.floor(l/m)*m,d=Math.ceil(d/m)*m;else if(m<0)l=Math.ceil(l*m)/m,d=Math.floor(d*m)/m;else break;u=m}return t},t}function zu(){var t=aj();return t.copy=function(){return Hc(t,zu())},Tn.apply(t,arguments),Es(t)}function VT(t){var r;function n(a){return a==null||isNaN(a=+a)?r:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Wu),n):t.slice()},n.unknown=function(a){return arguments.length?(r=a,n):r},n.copy=function(){return VT(t).unknown(r)},t=arguments.length?Array.from(t,Wu):[0,1],Es(n)}function KT(t,r){t=t.slice();var n=0,a=t.length-1,s=t[n],i=t[a],l;return i<s&&(l=n,n=a,a=l,l=s,s=i,i=l),t[n]=r.floor(s),t[a]=r.ceil(i),t}function A4(t){return Math.log(t)}function T4(t){return Math.exp(t)}function c$(t){return-Math.log(-t)}function d$(t){return-Math.exp(-t)}function u$(t){return isFinite(t)?+("1e"+t):t<0?0:t}function m$(t){return t===10?u$:t===Math.E?Math.exp:r=>Math.pow(t,r)}function f$(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function E4(t){return(r,n)=>-t(-r,n)}function oj(t){const r=t(A4,T4),n=r.domain;let a=10,s,i;function l(){return s=f$(a),i=m$(a),n()[0]<0?(s=E4(s),i=E4(i),t(c$,d$)):t(A4,T4),r}return r.base=function(d){return arguments.length?(a=+d,l()):a},r.domain=function(d){return arguments.length?(n(d),l()):n()},r.ticks=d=>{const u=n();let m=u[0],f=u[u.length-1];const p=f<m;p&&([m,f]=[f,m]);let x=s(m),g=s(f),v,b;const y=d==null?10:+d;let S=[];if(!(a%1)&&g-x<y){if(x=Math.floor(x),g=Math.ceil(g),m>0){for(;x<=g;++x)for(v=1;v<a;++v)if(b=x<0?v/i(-x):v*i(x),!(b<m)){if(b>f)break;S.push(b)}}else for(;x<=g;++x)for(v=a-1;v>=1;--v)if(b=x>0?v/i(-x):v*i(x),!(b<m)){if(b>f)break;S.push(b)}S.length*2<y&&(S=hv(m,f,y))}else S=hv(x,g,Math.min(g-x,y)).map(i);return p?S.reverse():S},r.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=a===10?"s":","),typeof u!="function"&&(!(a%1)&&(u=bc(u)).precision==null&&(u.trim=!0),u=ij(u)),d===1/0)return u;const m=Math.max(1,a*d/r.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*a<a-.5&&(p*=a),p<=m?u(f):""}},r.nice=()=>n(KT(n(),{floor:d=>i(Math.floor(s(d))),ceil:d=>i(Math.ceil(s(d)))})),r}function YT(){const t=oj(Hm()).domain([1,10]);return t.copy=()=>Hc(t,YT()).base(t.base()),Tn.apply(t,arguments),t}function O4(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function P4(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function lj(t){var r=1,n=t(O4(r),P4(r));return n.constant=function(a){return arguments.length?t(O4(r=+a),P4(r)):r},Es(n)}function XT(){var t=lj(Hm());return t.copy=function(){return Hc(t,XT()).constant(t.constant())},Tn.apply(t,arguments)}function _4(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function p$(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function h$(t){return t<0?-t*t:t*t}function cj(t){var r=t(Dr,Dr),n=1;function a(){return n===1?t(Dr,Dr):n===.5?t(p$,h$):t(_4(n),_4(1/n))}return r.exponent=function(s){return arguments.length?(n=+s,a()):n},Es(r)}function dj(){var t=cj(Hm());return t.copy=function(){return Hc(t,dj()).exponent(t.exponent())},Tn.apply(t,arguments),t}function x$(){return dj.apply(null,arguments).exponent(.5)}function I4(t){return Math.sign(t)*t*t}function g$(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function JT(){var t=aj(),r=[0,1],n=!1,a;function s(i){var l=g$(t(i));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(i){return t.invert(I4(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((r=Array.from(i,Wu)).map(I4)),s):r.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return JT(t.domain(),r).round(n).clamp(t.clamp()).unknown(a)},Tn.apply(s,arguments),Es(s)}function QT(){var t=[],r=[],n=[],a;function s(){var l=0,d=Math.max(1,r.length);for(n=new Array(d-1);++l<d;)n[l-1]=wR(t,l/d);return i}function i(l){return l==null||isNaN(l=+l)?a:r[zc(n,l)]}return i.invertExtent=function(l){var d=r.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:t[0],d<n.length?n[d]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let d of l)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(ks),s()},i.range=function(l){return arguments.length?(r=Array.from(l),s()):r.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return QT().domain(t).range(r).unknown(a)},Tn.apply(i,arguments)}function ZT(){var t=0,r=1,n=1,a=[.5],s=[0,1],i;function l(u){return u!=null&&u<=u?s[zc(a,u,0,n)]:i}function d(){var u=-1;for(a=new Array(n);++u<n;)a[u]=((u+1)*r-(u-n)*t)/(n+1);return l}return l.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,d()):[t,r]},l.range=function(u){return arguments.length?(n=(s=Array.from(u)).length-1,d()):s.slice()},l.invertExtent=function(u){var m=s.indexOf(u);return m<0?[NaN,NaN]:m<1?[t,a[0]]:m>=n?[a[n-1],r]:[a[m-1],a[m]]},l.unknown=function(u){return arguments.length&&(i=u),l},l.thresholds=function(){return a.slice()},l.copy=function(){return ZT().domain([t,r]).range(s).unknown(i)},Tn.apply(Es(l),arguments)}function eE(){var t=[.5],r=[0,1],n,a=1;function s(i){return i!=null&&i<=i?r[zc(t,i,0,a)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),a=Math.min(t.length,r.length-1),s):t.slice()},s.range=function(i){return arguments.length?(r=Array.from(i),a=Math.min(t.length,r.length-1),s):r.slice()},s.invertExtent=function(i){var l=r.indexOf(i);return[t[l-1],t[l]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return eE().domain(t).range(r).unknown(n)},Tn.apply(s,arguments)}const fb=new Date,pb=new Date;function dr(t,r,n,a){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),r(i,1),t(i),i),s.round=i=>{const l=s(i),d=s.ceil(i);return i-l<d-i?l:d},s.offset=(i,l)=>(r(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,d)=>{const u=[];if(i=s.ceil(i),d=d==null?1:Math.floor(d),!(i<l)||!(d>0))return u;let m;do u.push(m=new Date(+i)),r(i,d),t(i);while(m<i&&i<l);return u},s.filter=i=>dr(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;r(l,-1),!i(l););else for(;--d>=0;)for(;r(l,1),!i(l););}),n&&(s.count=(i,l)=>(fb.setTime(+i),pb.setTime(+l),t(fb),t(pb),Math.floor(n(fb,pb))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Gu=dr(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Gu.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?dr(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Gu);Gu.range;const Ia=1e3,wn=Ia*60,Ma=wn*60,Fa=Ma*24,uj=Fa*7,M4=Fa*30,hb=Fa*365,ai=dr(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*Ia)},(t,r)=>(r-t)/Ia,t=>t.getUTCSeconds());ai.range;const mj=dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ia)},(t,r)=>{t.setTime(+t+r*wn)},(t,r)=>(r-t)/wn,t=>t.getMinutes());mj.range;const fj=dr(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*wn)},(t,r)=>(r-t)/wn,t=>t.getUTCMinutes());fj.range;const pj=dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ia-t.getMinutes()*wn)},(t,r)=>{t.setTime(+t+r*Ma)},(t,r)=>(r-t)/Ma,t=>t.getHours());pj.range;const hj=dr(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*Ma)},(t,r)=>(r-t)/Ma,t=>t.getUTCHours());hj.range;const Vc=dr(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*wn)/Fa,t=>t.getDate()-1);Vc.range;const Vm=dr(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Fa,t=>t.getUTCDate()-1);Vm.range;const tE=dr(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Fa,t=>Math.floor(t/Fa));tE.range;function bi(t){return dr(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*wn)/uj)}const Km=bi(0),Hu=bi(1),b$=bi(2),v$=bi(3),vo=bi(4),y$=bi(5),j$=bi(6);Km.range;Hu.range;b$.range;v$.range;vo.range;y$.range;j$.range;function vi(t){return dr(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/uj)}const Ym=vi(0),Vu=vi(1),w$=vi(2),N$=vi(3),yo=vi(4),S$=vi(5),k$=vi(6);Ym.range;Vu.range;w$.range;N$.range;yo.range;S$.range;k$.range;const xj=dr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xj.range;const gj=dr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gj.range;const Ba=dr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dr(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});Ba.range;const Ua=dr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ua.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dr(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});Ua.range;function rE(t,r,n,a,s,i){const l=[[ai,1,Ia],[ai,5,5*Ia],[ai,15,15*Ia],[ai,30,30*Ia],[i,1,wn],[i,5,5*wn],[i,15,15*wn],[i,30,30*wn],[s,1,Ma],[s,3,3*Ma],[s,6,6*Ma],[s,12,12*Ma],[a,1,Fa],[a,2,2*Fa],[n,1,uj],[r,1,M4],[r,3,3*M4],[t,1,hb]];function d(m,f,p){const x=f<m;x&&([m,f]=[f,m]);const g=p&&typeof p.range=="function"?p:u(m,f,p),v=g?g.range(m,+f+1):[];return x?v.reverse():v}function u(m,f,p){const x=Math.abs(f-m)/p,g=Zy(([,,y])=>y).right(l,x);if(g===l.length)return t.every(gv(m/hb,f/hb,p));if(g===0)return Gu.every(Math.max(gv(m,f,p),1));const[v,b]=l[x/l[g-1][2]<l[g][2]/x?g-1:g];return v.every(b)}return[d,u]}const[C$,A$]=rE(Ua,gj,Ym,tE,hj,fj),[T$,E$]=rE(Ba,xj,Km,Vc,pj,mj);function xb(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gb(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rl(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function O$(t){var r=t.dateTime,n=t.date,a=t.time,s=t.periods,i=t.days,l=t.shortDays,d=t.months,u=t.shortMonths,m=$l(s),f=Fl(s),p=$l(i),x=Fl(i),g=$l(l),v=Fl(l),b=$l(d),y=Fl(d),S=$l(u),C=Fl(u),k={a:z,A:q,b:Q,B:ee,c:null,d:B4,e:B4,f:Z$,g:c7,G:u7,H:X$,I:J$,j:Q$,L:nE,m:e7,M:t7,p:R,q:L,Q:q4,s:z4,S:r7,u:n7,U:a7,V:s7,w:i7,W:o7,x:null,X:null,y:l7,Y:d7,Z:m7,"%":W4},T={a:G,A:K,b:ie,B:xe,c:null,d:U4,e:U4,f:x7,g:C7,G:T7,H:f7,I:p7,j:h7,L:sE,m:g7,M:b7,p:pe,q:be,Q:q4,s:z4,S:v7,u:y7,U:j7,V:w7,w:N7,W:S7,x:null,X:null,y:k7,Y:A7,Z:E7,"%":W4},N={a:M,A:D,b:U,B:F,c:W,d:$4,e:$4,f:H$,g:R4,G:D4,H:F4,I:F4,j:W$,L:G$,m:U$,M:q$,p:I,q:B$,Q:K$,s:Y$,S:z$,u:L$,U:D$,V:R$,w:M$,W:$$,x:$,X:H,y:R4,Y:D4,Z:F$,"%":V$};k.x=O(n,k),k.X=O(a,k),k.c=O(r,k),T.x=O(n,T),T.X=O(a,T),T.c=O(r,T);function O(me,X){return function(re){var de=[],Be=-1,Me=0,Ee=me.length,Xe,ge,De;for(re instanceof Date||(re=new Date(+re));++Be<Ee;)me.charCodeAt(Be)===37&&(de.push(me.slice(Me,Be)),(ge=L4[Xe=me.charAt(++Be)])!=null?Xe=me.charAt(++Be):ge=Xe==="e"?" ":"0",(De=X[Xe])&&(Xe=De(re,ge)),de.push(Xe),Me=Be+1);return de.push(me.slice(Me,Be)),de.join("")}}function E(me,X){return function(re){var de=Rl(1900,void 0,1),Be=P(de,me,re+="",0),Me,Ee;if(Be!=re.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(X&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Me=gb(Rl(de.y,0,1)),Ee=Me.getUTCDay(),Me=Ee>4||Ee===0?Vu.ceil(Me):Vu(Me),Me=Vm.offset(Me,(de.V-1)*7),de.y=Me.getUTCFullYear(),de.m=Me.getUTCMonth(),de.d=Me.getUTCDate()+(de.w+6)%7):(Me=xb(Rl(de.y,0,1)),Ee=Me.getDay(),Me=Ee>4||Ee===0?Hu.ceil(Me):Hu(Me),Me=Vc.offset(Me,(de.V-1)*7),de.y=Me.getFullYear(),de.m=Me.getMonth(),de.d=Me.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Ee="Z"in de?gb(Rl(de.y,0,1)).getUTCDay():xb(Rl(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Ee+5)%7:de.w+de.U*7-(Ee+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,gb(de)):xb(de)}}function P(me,X,re,de){for(var Be=0,Me=X.length,Ee=re.length,Xe,ge;Be<Me;){if(de>=Ee)return-1;if(Xe=X.charCodeAt(Be++),Xe===37){if(Xe=X.charAt(Be++),ge=N[Xe in L4?X.charAt(Be++):Xe],!ge||(de=ge(me,re,de))<0)return-1}else if(Xe!=re.charCodeAt(de++))return-1}return de}function I(me,X,re){var de=m.exec(X.slice(re));return de?(me.p=f.get(de[0].toLowerCase()),re+de[0].length):-1}function M(me,X,re){var de=g.exec(X.slice(re));return de?(me.w=v.get(de[0].toLowerCase()),re+de[0].length):-1}function D(me,X,re){var de=p.exec(X.slice(re));return de?(me.w=x.get(de[0].toLowerCase()),re+de[0].length):-1}function U(me,X,re){var de=S.exec(X.slice(re));return de?(me.m=C.get(de[0].toLowerCase()),re+de[0].length):-1}function F(me,X,re){var de=b.exec(X.slice(re));return de?(me.m=y.get(de[0].toLowerCase()),re+de[0].length):-1}function W(me,X,re){return P(me,r,X,re)}function $(me,X,re){return P(me,n,X,re)}function H(me,X,re){return P(me,a,X,re)}function z(me){return l[me.getDay()]}function q(me){return i[me.getDay()]}function Q(me){return u[me.getMonth()]}function ee(me){return d[me.getMonth()]}function R(me){return s[+(me.getHours()>=12)]}function L(me){return 1+~~(me.getMonth()/3)}function G(me){return l[me.getUTCDay()]}function K(me){return i[me.getUTCDay()]}function ie(me){return u[me.getUTCMonth()]}function xe(me){return d[me.getUTCMonth()]}function pe(me){return s[+(me.getUTCHours()>=12)]}function be(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var X=O(me+="",k);return X.toString=function(){return me},X},parse:function(me){var X=E(me+="",!1);return X.toString=function(){return me},X},utcFormat:function(me){var X=O(me+="",T);return X.toString=function(){return me},X},utcParse:function(me){var X=E(me+="",!0);return X.toString=function(){return me},X}}}var L4={"-":"",_:" ",0:"0"},gr=/^\s*\d+/,P$=/^%/,_$=/[\\^$*+?|[\]().{}]/g;function vt(t,r,n){var a=t<0?"-":"",s=(a?-t:t)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(r)+s:s)}function I$(t){return t.replace(_$,"\\$&")}function $l(t){return new RegExp("^(?:"+t.map(I$).join("|")+")","i")}function Fl(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function M$(t,r,n){var a=gr.exec(r.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function L$(t,r,n){var a=gr.exec(r.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function D$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function R$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function $$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function D4(t,r,n){var a=gr.exec(r.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function R4(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function F$(t,r,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function B$(t,r,n){var a=gr.exec(r.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function U$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function $4(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function W$(t,r,n){var a=gr.exec(r.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function F4(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function q$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function z$(t,r,n){var a=gr.exec(r.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function G$(t,r,n){var a=gr.exec(r.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function H$(t,r,n){var a=gr.exec(r.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function V$(t,r,n){var a=P$.exec(r.slice(n,n+1));return a?n+a[0].length:-1}function K$(t,r,n){var a=gr.exec(r.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function Y$(t,r,n){var a=gr.exec(r.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function B4(t,r){return vt(t.getDate(),r,2)}function X$(t,r){return vt(t.getHours(),r,2)}function J$(t,r){return vt(t.getHours()%12||12,r,2)}function Q$(t,r){return vt(1+Vc.count(Ba(t),t),r,3)}function nE(t,r){return vt(t.getMilliseconds(),r,3)}function Z$(t,r){return nE(t,r)+"000"}function e7(t,r){return vt(t.getMonth()+1,r,2)}function t7(t,r){return vt(t.getMinutes(),r,2)}function r7(t,r){return vt(t.getSeconds(),r,2)}function n7(t){var r=t.getDay();return r===0?7:r}function a7(t,r){return vt(Km.count(Ba(t)-1,t),r,2)}function aE(t){var r=t.getDay();return r>=4||r===0?vo(t):vo.ceil(t)}function s7(t,r){return t=aE(t),vt(vo.count(Ba(t),t)+(Ba(t).getDay()===4),r,2)}function i7(t){return t.getDay()}function o7(t,r){return vt(Hu.count(Ba(t)-1,t),r,2)}function l7(t,r){return vt(t.getFullYear()%100,r,2)}function c7(t,r){return t=aE(t),vt(t.getFullYear()%100,r,2)}function d7(t,r){return vt(t.getFullYear()%1e4,r,4)}function u7(t,r){var n=t.getDay();return t=n>=4||n===0?vo(t):vo.ceil(t),vt(t.getFullYear()%1e4,r,4)}function m7(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+vt(r/60|0,"0",2)+vt(r%60,"0",2)}function U4(t,r){return vt(t.getUTCDate(),r,2)}function f7(t,r){return vt(t.getUTCHours(),r,2)}function p7(t,r){return vt(t.getUTCHours()%12||12,r,2)}function h7(t,r){return vt(1+Vm.count(Ua(t),t),r,3)}function sE(t,r){return vt(t.getUTCMilliseconds(),r,3)}function x7(t,r){return sE(t,r)+"000"}function g7(t,r){return vt(t.getUTCMonth()+1,r,2)}function b7(t,r){return vt(t.getUTCMinutes(),r,2)}function v7(t,r){return vt(t.getUTCSeconds(),r,2)}function y7(t){var r=t.getUTCDay();return r===0?7:r}function j7(t,r){return vt(Ym.count(Ua(t)-1,t),r,2)}function iE(t){var r=t.getUTCDay();return r>=4||r===0?yo(t):yo.ceil(t)}function w7(t,r){return t=iE(t),vt(yo.count(Ua(t),t)+(Ua(t).getUTCDay()===4),r,2)}function N7(t){return t.getUTCDay()}function S7(t,r){return vt(Vu.count(Ua(t)-1,t),r,2)}function k7(t,r){return vt(t.getUTCFullYear()%100,r,2)}function C7(t,r){return t=iE(t),vt(t.getUTCFullYear()%100,r,2)}function A7(t,r){return vt(t.getUTCFullYear()%1e4,r,4)}function T7(t,r){var n=t.getUTCDay();return t=n>=4||n===0?yo(t):yo.ceil(t),vt(t.getUTCFullYear()%1e4,r,4)}function E7(){return"+0000"}function W4(){return"%"}function q4(t){return+t}function z4(t){return Math.floor(+t/1e3)}var Zi,oE,lE;O7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function O7(t){return Zi=O$(t),oE=Zi.format,Zi.parse,lE=Zi.utcFormat,Zi.utcParse,Zi}function P7(t){return new Date(t)}function _7(t){return t instanceof Date?+t:+new Date(+t)}function bj(t,r,n,a,s,i,l,d,u,m){var f=aj(),p=f.invert,x=f.domain,g=m(".%L"),v=m(":%S"),b=m("%I:%M"),y=m("%I %p"),S=m("%a %d"),C=m("%b %d"),k=m("%B"),T=m("%Y");function N(O){return(u(O)<O?g:d(O)<O?v:l(O)<O?b:i(O)<O?y:a(O)<O?s(O)<O?S:C:n(O)<O?k:T)(O)}return f.invert=function(O){return new Date(p(O))},f.domain=function(O){return arguments.length?x(Array.from(O,_7)):x().map(P7)},f.ticks=function(O){var E=x();return t(E[0],E[E.length-1],O??10)},f.tickFormat=function(O,E){return E==null?N:m(E)},f.nice=function(O){var E=x();return(!O||typeof O.range!="function")&&(O=r(E[0],E[E.length-1],O??10)),O?x(KT(E,O)):f},f.copy=function(){return Hc(f,bj(t,r,n,a,s,i,l,d,u,m))},f}function I7(){return Tn.apply(bj(T$,E$,Ba,xj,Km,Vc,pj,mj,ai,oE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function M7(){return Tn.apply(bj(C$,A$,Ua,gj,Ym,Vm,hj,fj,ai,lE).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xm(){var t=0,r=1,n,a,s,i,l=Dr,d=!1,u;function m(p){return p==null||isNaN(p=+p)?u:l(s===0?.5:(p=(i(p)-n)*s,d?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,r]=p,n=i(t=+t),a=i(r=+r),s=n===a?0:1/(a-n),m):[t,r]},m.clamp=function(p){return arguments.length?(d=!!p,m):d},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(x){var g,v;return arguments.length?([g,v]=x,l=p(g,v),m):[l(0),l(1)]}}return m.range=f(Yo),m.rangeRound=f(nj),m.unknown=function(p){return arguments.length?(u=p,m):u},function(p){return i=p,n=p(t),a=p(r),s=n===a?0:1/(a-n),m}}function Os(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cE(){var t=Es(Xm()(Dr));return t.copy=function(){return Os(t,cE())},Ga.apply(t,arguments)}function dE(){var t=oj(Xm()).domain([1,10]);return t.copy=function(){return Os(t,dE()).base(t.base())},Ga.apply(t,arguments)}function uE(){var t=lj(Xm());return t.copy=function(){return Os(t,uE()).constant(t.constant())},Ga.apply(t,arguments)}function vj(){var t=cj(Xm());return t.copy=function(){return Os(t,vj()).exponent(t.exponent())},Ga.apply(t,arguments)}function L7(){return vj.apply(null,arguments).exponent(.5)}function mE(){var t=[],r=Dr;function n(a){if(a!=null&&!isNaN(a=+a))return r((zc(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ks),n},n.interpolator=function(a){return arguments.length?(r=a,n):r},n.range=function(){return t.map((a,s)=>r(s/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>jR(t,i/a))},n.copy=function(){return mE(r).domain(t)},Ga.apply(n,arguments)}function Jm(){var t=0,r=.5,n=1,a=1,s,i,l,d,u,m=Dr,f,p=!1,x;function g(b){return isNaN(b=+b)?x:(b=.5+((b=+f(b))-i)*(a*b<a*i?d:u),m(p?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([t,r,n]=b,s=f(t=+t),i=f(r=+r),l=f(n=+n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,g):[t,r,n]},g.clamp=function(b){return arguments.length?(p=!!b,g):p},g.interpolator=function(b){return arguments.length?(m=b,g):m};function v(b){return function(y){var S,C,k;return arguments.length?([S,C,k]=y,m=VR(b,[S,C,k]),g):[m(0),m(.5),m(1)]}}return g.range=v(Yo),g.rangeRound=v(nj),g.unknown=function(b){return arguments.length?(x=b,g):x},function(b){return f=b,s=b(t),i=b(r),l=b(n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,g}}function fE(){var t=Es(Jm()(Dr));return t.copy=function(){return Os(t,fE())},Ga.apply(t,arguments)}function pE(){var t=oj(Jm()).domain([.1,1,10]);return t.copy=function(){return Os(t,pE()).base(t.base())},Ga.apply(t,arguments)}function hE(){var t=lj(Jm());return t.copy=function(){return Os(t,hE()).constant(t.constant())},Ga.apply(t,arguments)}function yj(){var t=cj(Jm());return t.copy=function(){return Os(t,yj()).exponent(t.exponent())},Ga.apply(t,arguments)}function D7(){return yj.apply(null,arguments).exponent(.5)}const G4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pc,scaleDiverging:fE,scaleDivergingLog:pE,scaleDivergingPow:yj,scaleDivergingSqrt:D7,scaleDivergingSymlog:hE,scaleIdentity:VT,scaleImplicit:bv,scaleLinear:zu,scaleLog:YT,scaleOrdinal:ej,scalePoint:Zl,scalePow:dj,scaleQuantile:QT,scaleQuantize:ZT,scaleRadial:JT,scaleSequential:cE,scaleSequentialLog:dE,scaleSequentialPow:vj,scaleSequentialQuantile:mE,scaleSequentialSqrt:L7,scaleSequentialSymlog:uE,scaleSqrt:x$,scaleSymlog:XT,scaleThreshold:eE,scaleTime:I7,scaleUtc:M7,tickFormat:HT},Symbol.toStringTag,{value:"Module"}));var bb,H4;function Qm(){if(H4)return bb;H4=1;var t=qo();function r(n,a,s){for(var i=-1,l=n.length;++i<l;){var d=n[i],u=a(d);if(u!=null&&(m===void 0?u===u&&!t(u):s(u,m)))var m=u,f=d}return f}return bb=r,bb}var vb,V4;function xE(){if(V4)return vb;V4=1;function t(r,n){return r>n}return vb=t,vb}var yb,K4;function R7(){if(K4)return yb;K4=1;var t=Qm(),r=xE(),n=Ko();function a(s){return s&&s.length?t(s,n,r):void 0}return yb=a,yb}var $7=R7();const ws=wt($7);var jb,Y4;function gE(){if(Y4)return jb;Y4=1;function t(r,n){return r<n}return jb=t,jb}var wb,X4;function F7(){if(X4)return wb;X4=1;var t=Qm(),r=gE(),n=Ko();function a(s){return s&&s.length?t(s,n,r):void 0}return wb=a,wb}var B7=F7();const Zm=wt(B7);var Nb,J4;function U7(){if(J4)return Nb;J4=1;var t=Lm(),r=pa(),n=NT(),a=$r();function s(i,l){var d=a(i)?t:n;return d(i,r(l,3))}return Nb=s,Nb}var Sb,Q4;function W7(){if(Q4)return Sb;Q4=1;var t=Yy(),r=U7();function n(a,s){return t(r(a,s),1)}return Sb=n,Sb}var q7=W7();const z7=wt(q7);var kb,Z4;function G7(){if(Z4)return kb;Z4=1;var t=Ky();function r(n,a){return t(n,a)}return kb=r,kb}var H7=G7();const Ts=wt(H7);var Xo=1e9,V7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wj,qt=!0,Sn="[DecimalError] ",ci=Sn+"Invalid argument: ",jj=Sn+"Exponent out of range: ",Jo=Math.floor,Zs=Math.pow,K7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,an,hr=1e7,$t=7,bE=9007199254740991,Ku=Jo(bE/$t),We={};We.absoluteValue=We.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};We.comparedTo=We.cmp=function(t){var r,n,a,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(a=i.d.length,s=t.d.length,r=0,n=a<s?a:s;r<n;++r)if(i.d[r]!==t.d[r])return i.d[r]>t.d[r]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};We.decimalPlaces=We.dp=function(){var t=this,r=t.d.length-1,n=(r-t.e)*$t;if(r=t.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};We.dividedBy=We.div=function(t){return Ra(this,new this.constructor(t))};We.dividedToIntegerBy=We.idiv=function(t){var r=this,n=r.constructor;return Et(Ra(r,new n(t),0,1),n.precision)};We.equals=We.eq=function(t){return!this.cmp(t)};We.exponent=function(){return rr(this)};We.greaterThan=We.gt=function(t){return this.cmp(t)>0};We.greaterThanOrEqualTo=We.gte=function(t){return this.cmp(t)>=0};We.isInteger=We.isint=function(){return this.e>this.d.length-2};We.isNegative=We.isneg=function(){return this.s<0};We.isPositive=We.ispos=function(){return this.s>0};We.isZero=function(){return this.s===0};We.lessThan=We.lt=function(t){return this.cmp(t)<0};We.lessThanOrEqualTo=We.lte=function(t){return this.cmp(t)<1};We.logarithm=We.log=function(t){var r,n=this,a=n.constructor,s=a.precision,i=s+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(an))throw Error(Sn+"NaN");if(n.s<1)throw Error(Sn+(n.s?"NaN":"-Infinity"));return n.eq(an)?new a(0):(qt=!1,r=Ra(vc(n,i),vc(t,i),i),qt=!0,Et(r,s))};We.minus=We.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?jE(r,t):vE(r,(t.s=-t.s,t))};We.modulo=We.mod=function(t){var r,n=this,a=n.constructor,s=a.precision;if(t=new a(t),!t.s)throw Error(Sn+"NaN");return n.s?(qt=!1,r=Ra(n,t,0,1).times(t),qt=!0,n.minus(r)):Et(new a(n),s)};We.naturalExponential=We.exp=function(){return yE(this)};We.naturalLogarithm=We.ln=function(){return vc(this)};We.negated=We.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};We.plus=We.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?vE(r,t):jE(r,(t.s=-t.s,t))};We.precision=We.sd=function(t){var r,n,a,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ci+t);if(r=rr(s)+1,a=s.d.length-1,n=a*$t+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return t&&r>n?r:n};We.squareRoot=We.sqrt=function(){var t,r,n,a,s,i,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(Sn+"NaN")}for(t=rr(d),qt=!1,s=Math.sqrt(+d),s==0||s==1/0?(r=ia(d.d),(r.length+t)%2==0&&(r+="0"),s=Math.sqrt(r),t=Jo((t+1)/2)-(t<0||t%2),s==1/0?r="5e"+t:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),a=new u(r)):a=new u(s.toString()),n=u.precision,s=l=n+3;;)if(i=a,a=i.plus(Ra(d,i,l+2)).times(.5),ia(i.d).slice(0,l)===(r=ia(a.d)).slice(0,l)){if(r=r.slice(l-3,l+1),s==l&&r=="4999"){if(Et(i,n+1,0),i.times(i).eq(d)){a=i;break}}else if(r!="9999")break;l+=4}return qt=!0,Et(a,n)};We.times=We.mul=function(t){var r,n,a,s,i,l,d,u,m,f=this,p=f.constructor,x=f.d,g=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,u=x.length,m=g.length,u<m&&(i=x,x=g,g=i,l=u,u=m,m=l),i=[],l=u+m,a=l;a--;)i.push(0);for(a=m;--a>=0;){for(r=0,s=u+a;s>a;)d=i[s]+g[a]*x[s-a-1]+r,i[s--]=d%hr|0,r=d/hr|0;i[s]=(i[s]+r)%hr|0}for(;!i[--l];)i.pop();return r?++n:i.shift(),t.d=i,t.e=n,qt?Et(t,p.precision):t};We.toDecimalPlaces=We.todp=function(t,r){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(ua(t,0,Xo),r===void 0?r=a.rounding:ua(r,0,8),Et(n,t+rr(n)+1,r))};We.toExponential=function(t,r){var n,a=this,s=a.constructor;return t===void 0?n=mi(a,!0):(ua(t,0,Xo),r===void 0?r=s.rounding:ua(r,0,8),a=Et(new s(a),t+1,r),n=mi(a,!0,t+1)),n};We.toFixed=function(t,r){var n,a,s=this,i=s.constructor;return t===void 0?mi(s):(ua(t,0,Xo),r===void 0?r=i.rounding:ua(r,0,8),a=Et(new i(s),t+rr(s)+1,r),n=mi(a.abs(),!1,t+rr(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};We.toInteger=We.toint=function(){var t=this,r=t.constructor;return Et(new r(t),rr(t)+1,r.rounding)};We.toNumber=function(){return+this};We.toPower=We.pow=function(t){var r,n,a,s,i,l,d=this,u=d.constructor,m=12,f=+(t=new u(t));if(!t.s)return new u(an);if(d=new u(d),!d.s){if(t.s<1)throw Error(Sn+"Infinity");return d}if(d.eq(an))return d;if(a=u.precision,t.eq(an))return Et(d,a);if(r=t.e,n=t.d.length-1,l=r>=n,i=d.s,l){if((n=f<0?-f:f)<=bE){for(s=new u(an),r=Math.ceil(a/$t+4),qt=!1;n%2&&(s=s.times(d),tC(s.d,r)),n=Jo(n/2),n!==0;)d=d.times(d),tC(d.d,r);return qt=!0,t.s<0?new u(an).div(s):Et(s,a)}}else if(i<0)throw Error(Sn+"NaN");return i=i<0&&t.d[Math.max(r,n)]&1?-1:1,d.s=1,qt=!1,s=t.times(vc(d,a+m)),qt=!0,s=yE(s),s.s=i,s};We.toPrecision=function(t,r){var n,a,s=this,i=s.constructor;return t===void 0?(n=rr(s),a=mi(s,n<=i.toExpNeg||n>=i.toExpPos)):(ua(t,1,Xo),r===void 0?r=i.rounding:ua(r,0,8),s=Et(new i(s),t,r),n=rr(s),a=mi(s,t<=n||n<=i.toExpNeg,t)),a};We.toSignificantDigits=We.tosd=function(t,r){var n=this,a=n.constructor;return t===void 0?(t=a.precision,r=a.rounding):(ua(t,1,Xo),r===void 0?r=a.rounding:ua(r,0,8)),Et(new a(n),t,r)};We.toString=We.valueOf=We.val=We.toJSON=We[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=rr(t),n=t.constructor;return mi(t,r<=n.toExpNeg||r>=n.toExpPos)};function vE(t,r){var n,a,s,i,l,d,u,m,f=t.constructor,p=f.precision;if(!t.s||!r.s)return r.s||(r=new f(t)),qt?Et(r,p):r;if(u=t.d,m=r.d,l=t.e,s=r.e,u=u.slice(),i=l-s,i){for(i<0?(a=u,i=-i,d=m.length):(a=m,s=l,d=u.length),l=Math.ceil(p/$t),d=l>d?l+1:d+1,i>d&&(i=d,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(d=u.length,i=m.length,d-i<0&&(i=d,a=m,m=u,u=a),n=0;i;)n=(u[--i]=u[i]+m[i]+n)/hr|0,u[i]%=hr;for(n&&(u.unshift(n),++s),d=u.length;u[--d]==0;)u.pop();return r.d=u,r.e=s,qt?Et(r,p):r}function ua(t,r,n){if(t!==~~t||t<r||t>n)throw Error(ci+t)}function ia(t){var r,n,a,s=t.length-1,i="",l=t[0];if(s>0){for(i+=l,r=1;r<s;r++)a=t[r]+"",n=$t-a.length,n&&(i+=vs(n)),i+=a;l=t[r],a=l+"",n=$t-a.length,n&&(i+=vs(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ra=(function(){function t(a,s){var i,l=0,d=a.length;for(a=a.slice();d--;)i=a[d]*s+l,a[d]=i%hr|0,l=i/hr|0;return l&&a.unshift(l),a}function r(a,s,i,l){var d,u;if(i!=l)u=i>l?1:-1;else for(d=u=0;d<i;d++)if(a[d]!=s[d]){u=a[d]>s[d]?1:-1;break}return u}function n(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*hr+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var d,u,m,f,p,x,g,v,b,y,S,C,k,T,N,O,E,P,I=a.constructor,M=a.s==s.s?1:-1,D=a.d,U=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(Sn+"Division by zero");for(u=a.e-s.e,E=U.length,N=D.length,g=new I(M),v=g.d=[],m=0;U[m]==(D[m]||0);)++m;if(U[m]>(D[m]||0)&&--u,i==null?C=i=I.precision:l?C=i+(rr(a)-rr(s))+1:C=i,C<0)return new I(0);if(C=C/$t+2|0,m=0,E==1)for(f=0,U=U[0],C++;(m<N||f)&&C--;m++)k=f*hr+(D[m]||0),v[m]=k/U|0,f=k%U|0;else{for(f=hr/(U[0]+1)|0,f>1&&(U=t(U,f),D=t(D,f),E=U.length,N=D.length),T=E,b=D.slice(0,E),y=b.length;y<E;)b[y++]=0;P=U.slice(),P.unshift(0),O=U[0],U[1]>=hr/2&&++O;do f=0,d=r(U,b,E,y),d<0?(S=b[0],E!=y&&(S=S*hr+(b[1]||0)),f=S/O|0,f>1?(f>=hr&&(f=hr-1),p=t(U,f),x=p.length,y=b.length,d=r(p,b,x,y),d==1&&(f--,n(p,E<x?P:U,x))):(f==0&&(d=f=1),p=U.slice()),x=p.length,x<y&&p.unshift(0),n(b,p,y),d==-1&&(y=b.length,d=r(U,b,E,y),d<1&&(f++,n(b,E<y?P:U,y))),y=b.length):d===0&&(f++,b=[0]),v[m++]=f,d&&b[0]?b[y++]=D[T]||0:(b=[D[T]],y=1);while((T++<N||b[0]!==void 0)&&C--)}return v[0]||v.shift(),g.e=u,Et(g,l?i+rr(g)+1:i)}})();function yE(t,r){var n,a,s,i,l,d,u=0,m=0,f=t.constructor,p=f.precision;if(rr(t)>16)throw Error(jj+rr(t));if(!t.s)return new f(an);for(qt=!1,d=p,l=new f(.03125);t.abs().gte(.1);)t=t.times(l),m+=5;for(a=Math.log(Zs(2,m))/Math.LN10*2+5|0,d+=a,n=s=i=new f(an),f.precision=d;;){if(s=Et(s.times(t),d),n=n.times(++u),l=i.plus(Ra(s,n,d)),ia(l.d).slice(0,d)===ia(i.d).slice(0,d)){for(;m--;)i=Et(i.times(i),d);return f.precision=p,r==null?(qt=!0,Et(i,p)):i}i=l}}function rr(t){for(var r=t.e*$t,n=t.d[0];n>=10;n/=10)r++;return r}function Cb(t,r,n){if(r>t.LN10.sd())throw qt=!0,n&&(t.precision=n),Error(Sn+"LN10 precision limit exceeded");return Et(new t(t.LN10),r)}function vs(t){for(var r="";t--;)r+="0";return r}function vc(t,r){var n,a,s,i,l,d,u,m,f,p=1,x=10,g=t,v=g.d,b=g.constructor,y=b.precision;if(g.s<1)throw Error(Sn+(g.s?"NaN":"-Infinity"));if(g.eq(an))return new b(0);if(r==null?(qt=!1,m=y):m=r,g.eq(10))return r==null&&(qt=!0),Cb(b,m);if(m+=x,b.precision=m,n=ia(v),a=n.charAt(0),i=rr(g),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)g=g.times(t),n=ia(g.d),a=n.charAt(0),p++;i=rr(g),a>1?(g=new b("0."+n),i++):g=new b(a+"."+n.slice(1))}else return u=Cb(b,m+2,y).times(i+""),g=vc(new b(a+"."+n.slice(1)),m-x).plus(u),b.precision=y,r==null?(qt=!0,Et(g,y)):g;for(d=l=g=Ra(g.minus(an),g.plus(an),m),f=Et(g.times(g),m),s=3;;){if(l=Et(l.times(f),m),u=d.plus(Ra(l,new b(s),m)),ia(u.d).slice(0,m)===ia(d.d).slice(0,m))return d=d.times(2),i!==0&&(d=d.plus(Cb(b,m+2,y).times(i+""))),d=Ra(d,new b(p),m),b.precision=y,r==null?(qt=!0,Et(d,y)):d;d=u,s+=2}}function eC(t,r){var n,a,s;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(n<0&&(n=a),n+=+r.slice(a+1),r=r.substring(0,a)):n<0&&(n=r.length),a=0;r.charCodeAt(a)===48;)++a;for(s=r.length;r.charCodeAt(s-1)===48;)--s;if(r=r.slice(a,s),r){if(s-=a,n=n-a-1,t.e=Jo(n/$t),t.d=[],a=(n+1)%$t,n<0&&(a+=$t),a<s){for(a&&t.d.push(+r.slice(0,a)),s-=$t;a<s;)t.d.push(+r.slice(a,a+=$t));r=r.slice(a),a=$t-r.length}else a-=s;for(;a--;)r+="0";if(t.d.push(+r),qt&&(t.e>Ku||t.e<-Ku))throw Error(jj+n)}else t.s=0,t.e=0,t.d=[0];return t}function Et(t,r,n){var a,s,i,l,d,u,m,f,p=t.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(a=r-l,a<0)a+=$t,s=r,m=p[f=0];else{if(f=Math.ceil((a+1)/$t),i=p.length,f>=i)return t;for(m=i=p[f],l=1;i>=10;i/=10)l++;a%=$t,s=a-$t+l}if(n!==void 0&&(i=Zs(10,l-s-1),d=m/i%10|0,u=r<0||p[f+1]!==void 0||m%i,u=n<4?(d||u)&&(n==0||n==(t.s<0?3:2)):d>5||d==5&&(n==4||u||n==6&&(a>0?s>0?m/Zs(10,l-s):0:p[f-1])%10&1||n==(t.s<0?8:7))),r<1||!p[0])return u?(i=rr(t),p.length=1,r=r-i-1,p[0]=Zs(10,($t-r%$t)%$t),t.e=Jo(-r/$t)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,i=1,f--):(p.length=f+1,i=Zs(10,$t-a),p[f]=s>0?(m/Zs(10,l-s)%Zs(10,s)|0)*i:0),u)for(;;)if(f==0){(p[0]+=i)==hr&&(p[0]=1,++t.e);break}else{if(p[f]+=i,p[f]!=hr)break;p[f--]=0,i=1}for(a=p.length;p[--a]===0;)p.pop();if(qt&&(t.e>Ku||t.e<-Ku))throw Error(jj+rr(t));return t}function jE(t,r){var n,a,s,i,l,d,u,m,f,p,x=t.constructor,g=x.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new x(t),qt?Et(r,g):r;if(u=t.d,p=r.d,a=r.e,m=t.e,u=u.slice(),l=m-a,l){for(f=l<0,f?(n=u,l=-l,d=p.length):(n=p,a=m,d=u.length),s=Math.max(Math.ceil(g/$t),d)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=u.length,d=p.length,f=s<d,f&&(d=s),s=0;s<d;s++)if(u[s]!=p[s]){f=u[s]<p[s];break}l=0}for(f&&(n=u,u=p,p=n,r.s=-r.s),d=u.length,s=p.length-d;s>0;--s)u[d++]=0;for(s=p.length;s>l;){if(u[--s]<p[s]){for(i=s;i&&u[--i]===0;)u[i]=hr-1;--u[i],u[s]+=hr}u[s]-=p[s]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--a;return u[0]?(r.d=u,r.e=a,qt?Et(r,g):r):new x(0)}function mi(t,r,n){var a,s=rr(t),i=ia(t.d),l=i.length;return r?(n&&(a=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+vs(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+vs(-s-1)+i,n&&(a=n-l)>0&&(i+=vs(a))):s>=l?(i+=vs(s+1-l),n&&(a=n-s-1)>0&&(i=i+"."+vs(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(i+="."),i+=vs(a))),t.s<0?"-"+i:i}function tC(t,r){if(t.length>r)return t.length=r,!0}function wE(t){var r,n,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ci+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return eC(l,i.toString())}else if(typeof i!="string")throw Error(ci+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,K7.test(i))eC(l,i);else throw Error(ci+i)}if(s.prototype=We,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=wE,s.config=s.set=Y7,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return s.config(t),s}function Y7(t){if(!t||typeof t!="object")throw Error(Sn+"Object expected");var r,n,a,s=["precision",1,Xo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<s.length;r+=3)if((a=t[n=s[r]])!==void 0)if(Jo(a)===a&&a>=s[r+1]&&a<=s[r+2])this[n]=a;else throw Error(ci+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ci+n+": "+a);return this}var wj=wE(V7);an=new wj(1);const Tt=wj;function X7(t){return eF(t)||Z7(t)||Q7(t)||J7()}function J7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q7(t,r){if(t){if(typeof t=="string")return wv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wv(t,r)}}function Z7(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function eF(t){if(Array.isArray(t))return wv(t)}function wv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}var tF=function(r){return r},NE={},SE=function(r){return r===NE},rC=function(r){return function n(){return arguments.length===0||arguments.length===1&&SE(arguments.length<=0?void 0:arguments[0])?n:r.apply(void 0,arguments)}},rF=function t(r,n){return r===1?n:rC(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var l=s.filter(function(d){return d!==NE}).length;return l>=r?n.apply(void 0,s):t(r-l,rC(function(){for(var d=arguments.length,u=new Array(d),m=0;m<d;m++)u[m]=arguments[m];var f=s.map(function(p){return SE(p)?u.shift():p});return n.apply(void 0,X7(f).concat(u))}))})},ef=function(r){return rF(r.length,r)},Nv=function(r,n){for(var a=[],s=r;s<n;++s)a[s-r]=s;return a},nF=ef(function(t,r){return Array.isArray(r)?r.map(t):Object.keys(r).map(function(n){return r[n]}).map(t)}),aF=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];if(!n.length)return tF;var s=n.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce(function(d,u){return u(d)},i.apply(void 0,arguments))}},Sv=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},kE=function(r){var n=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n&&i.every(function(d,u){return d===n[u]})||(n=i,a=r.apply(void 0,i)),a}};function sF(t){var r;return t===0?r=1:r=Math.floor(new Tt(t).abs().log(10).toNumber())+1,r}function iF(t,r,n){for(var a=new Tt(t),s=0,i=[];a.lt(r)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var oF=ef(function(t,r,n){var a=+t,s=+r;return a+n*(s-a)}),lF=ef(function(t,r,n){var a=r-+t;return a=a||1/0,(n-t)/a}),cF=ef(function(t,r,n){var a=r-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const tf={rangeStep:iF,getDigitCount:sF,interpolateNumber:oF,uninterpolateNumber:lF,uninterpolateTruncation:cF};function kv(t){return mF(t)||uF(t)||CE(t)||dF()}function dF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function mF(t){if(Array.isArray(t))return Cv(t)}function yc(t,r){return hF(t)||pF(t,r)||CE(t,r)||fF()}function fF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CE(t,r){if(t){if(typeof t=="string")return Cv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cv(t,r)}}function Cv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function pF(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,s=!1,i=void 0;try{for(var l=t[Symbol.iterator](),d;!(a=(d=l.next()).done)&&(n.push(d.value),!(r&&n.length===r));a=!0);}catch(u){s=!0,i=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(s)throw i}}return n}}function hF(t){if(Array.isArray(t))return t}function AE(t){var r=yc(t,2),n=r[0],a=r[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function TE(t,r,n){if(t.lte(0))return new Tt(0);var a=tf.getDigitCount(t.toNumber()),s=new Tt(10).pow(a),i=t.div(s),l=a!==1?.05:.1,d=new Tt(Math.ceil(i.div(l).toNumber())).add(n).mul(l),u=d.mul(s);return r?u:new Tt(Math.ceil(u))}function xF(t,r,n){var a=1,s=new Tt(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(a=new Tt(10).pow(tf.getDigitCount(t)-1),s=new Tt(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Tt(Math.floor(t)))}else t===0?s=new Tt(Math.floor((r-1)/2)):n||(s=new Tt(Math.floor(t)));var l=Math.floor((r-1)/2),d=aF(nF(function(u){return s.add(new Tt(u-l).mul(a)).toNumber()}),Nv);return d(0,r)}function EE(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Tt(0),tickMin:new Tt(0),tickMax:new Tt(0)};var i=TE(new Tt(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new Tt(0):(l=new Tt(t).add(r).div(2),l=l.sub(new Tt(l).mod(i)));var d=Math.ceil(l.sub(t).div(i).toNumber()),u=Math.ceil(new Tt(r).sub(l).div(i).toNumber()),m=d+u+1;return m>n?EE(t,r,n,a,s+1):(m<n&&(u=r>0?u+(n-m):u,d=r>0?d:d+(n-m)),{step:i,tickMin:l.sub(new Tt(d).mul(i)),tickMax:l.add(new Tt(u).mul(i))})}function gF(t){var r=yc(t,2),n=r[0],a=r[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),d=AE([n,a]),u=yc(d,2),m=u[0],f=u[1];if(m===-1/0||f===1/0){var p=f===1/0?[m].concat(kv(Nv(0,s-1).map(function(){return 1/0}))):[].concat(kv(Nv(0,s-1).map(function(){return-1/0})),[f]);return n>a?Sv(p):p}if(m===f)return xF(m,s,i);var x=EE(m,f,l,i),g=x.step,v=x.tickMin,b=x.tickMax,y=tf.rangeStep(v,b.add(new Tt(.1).mul(g)),g);return n>a?Sv(y):y}function bF(t,r){var n=yc(t,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=AE([a,s]),d=yc(l,2),u=d[0],m=d[1];if(u===-1/0||m===1/0)return[a,s];if(u===m)return[u];var f=Math.max(r,2),p=TE(new Tt(m).sub(u).div(f-1),i,0),x=[].concat(kv(tf.rangeStep(new Tt(u),new Tt(m).sub(new Tt(.99).mul(p)),p)),[m]);return a>s?Sv(x):x}var vF=kE(gF),yF=kE(bF),jF="Invariant failed";function fi(t,r){throw new Error(jF)}var wF=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jo(t){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jo(t)}function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Yu.apply(this,arguments)}function NF(t,r){return AF(t)||CF(t,r)||kF(t,r)||SF()}function SF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kF(t,r){if(t){if(typeof t=="string")return nC(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nC(t,r)}}function nC(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function CF(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function AF(t){if(Array.isArray(t))return t}function TF(t,r){if(t==null)return{};var n=EF(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function EF(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function OF(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function PF(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_E(a.key),a)}}function _F(t,r,n){return r&&PF(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function IF(t,r,n){return r=Xu(r),MF(t,OE()?Reflect.construct(r,n||[],Xu(t).constructor):r.apply(t,n))}function MF(t,r){if(r&&(jo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LF(t)}function LF(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OE=function(){return!!t})()}function Xu(t){return Xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xu(t)}function DF(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Av(t,r)}function Av(t,r){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Av(t,r)}function PE(t,r,n){return r=_E(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _E(t){var r=RF(t,"string");return jo(r)=="symbol"?r:r+""}function RF(t,r){if(jo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(jo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kc=(function(t){function r(){return OF(this,r),IF(this,r,arguments)}return DF(r,t),_F(r,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,l=a.width,d=a.dataKey,u=a.data,m=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,x=TF(a,wF),g=He(x,!1);this.props.direction==="x"&&f.type!=="number"&&fi();var v=u.map(function(b){var y=m(b,d),S=y.x,C=y.y,k=y.value,T=y.errorVal;if(!T)return null;var N=[],O,E;if(Array.isArray(T)){var P=NF(T,2);O=P[0],E=P[1]}else O=E=T;if(i==="vertical"){var I=f.scale,M=C+s,D=M+l,U=M-l,F=I(k-O),W=I(k+E);N.push({x1:W,y1:D,x2:W,y2:U}),N.push({x1:F,y1:M,x2:W,y2:M}),N.push({x1:F,y1:D,x2:F,y2:U})}else if(i==="horizontal"){var $=p.scale,H=S+s,z=H-l,q=H+l,Q=$(k-O),ee=$(k+E);N.push({x1:z,y1:ee,x2:q,y2:ee}),N.push({x1:H,y1:Q,x2:H,y2:ee}),N.push({x1:z,y1:Q,x2:q,y2:Q})}return Y.createElement(ct,Yu({className:"recharts-errorBar",key:"bar-".concat(N.map(function(R){return"".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))},g),N.map(function(R){return Y.createElement("line",Yu({},R,{key:"line-".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))}))});return Y.createElement(ct,{className:"recharts-errorBars"},v)}}])})(Y.Component);PE(Kc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});PE(Kc,"displayName","ErrorBar");function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jc(t)}function aC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Ys(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?aC(Object(n),!0).forEach(function(a){$F(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $F(t,r,n){return r=FF(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function FF(t){var r=BF(t,"string");return jc(r)=="symbol"?r:r+""}function BF(t,r){if(jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(jc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var IE=function(r){var n=r.children,a=r.formattedGraphicalItems,s=r.legendWidth,i=r.legendContent,l=nn(n,Nn);if(!l)return null;var d=Nn.defaultProps,u=d!==void 0?Ys(Ys({},d),l.props):{},m;return l.props&&l.props.payload?m=l.props&&l.props.payload:i==="children"?m=(a||[]).reduce(function(f,p){var x=p.item,g=p.props,v=g.sectors||g.data||[];return f.concat(v.map(function(b){return{type:l.props.iconType||x.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):m=(a||[]).map(function(f){var p=f.item,x=p.type.defaultProps,g=x!==void 0?Ys(Ys({},x),p.props):{},v=g.dataKey,b=g.name,y=g.legendType,S=g.hide;return{inactive:S,dataKey:v,type:u.iconType||y||"square",color:Nj(p),value:b||v,payload:g}}),Ys(Ys(Ys({},u),Nn.getWithHeight(l,s)),{},{payload:m,item:l})};function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wc(t)}function sC(t){return zF(t)||qF(t)||WF(t)||UF()}function UF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WF(t,r){if(t){if(typeof t=="string")return Tv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tv(t,r)}}function qF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zF(t){if(Array.isArray(t))return Tv(t)}function Tv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function iC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Yt(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?iC(Object(n),!0).forEach(function(a){uo(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function uo(t,r,n){return r=GF(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function GF(t){var r=HF(t,"string");return wc(r)=="symbol"?r:r+""}function HF(t,r){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ft(t,r,n){return nt(t)||nt(r)?n:cr(r)?sn(t,r,n):Ze(r)?r(t):n}function ec(t,r,n,a){var s=z7(t,function(d){return Ft(d,r)});if(n==="number"){var i=s.filter(function(d){return Ce(d)||parseFloat(d)});return i.length?[Zm(i),ws(i)]:[1/0,-1/0]}var l=a?s.filter(function(d){return!nt(d)}):s;return l.map(function(d){return cr(d)||d instanceof Date?d:""})}var VF=function(r){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,d=(n=a?.length)!==null&&n!==void 0?n:0;if(d<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,m=0;m<d;m++){var f=m>0?s[m-1].coordinate:s[d-1].coordinate,p=s[m].coordinate,x=m>=d-1?s[0].coordinate:s[m+1].coordinate,g=void 0;if(Mr(p-f)!==Mr(x-p)){var v=[];if(Mr(x-p)===Mr(u[1]-u[0])){g=x;var b=p+u[1]-u[0];v[0]=Math.min(b,(b+f)/2),v[1]=Math.max(b,(b+f)/2)}else{g=f;var y=x+u[1]-u[0];v[0]=Math.min(p,(y+p)/2),v[1]=Math.max(p,(y+p)/2)}var S=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(r>S[0]&&r<=S[1]||r>=v[0]&&r<=v[1]){l=s[m].index;break}}else{var C=Math.min(f,x),k=Math.max(f,x);if(r>(C+p)/2&&r<=(k+p)/2){l=s[m].index;break}}}else for(var T=0;T<d;T++)if(T===0&&r<=(a[T].coordinate+a[T+1].coordinate)/2||T>0&&T<d-1&&r>(a[T].coordinate+a[T-1].coordinate)/2&&r<=(a[T].coordinate+a[T+1].coordinate)/2||T===d-1&&r>(a[T].coordinate+a[T-1].coordinate)/2){l=a[T].index;break}return l},Nj=function(r){var n,a=r,s=a.type.displayName,i=(n=r.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},r.type.defaultProps),r.props):r.props,l=i.stroke,d=i.fill,u;switch(s){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:d;break;default:u=d;break}return u},KF=function(r){var n=r.barSize,a=r.totalSize,s=r.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var l={},d=Object.keys(i),u=0,m=d.length;u<m;u++)for(var f=i[d[u]].stackGroups,p=Object.keys(f),x=0,g=p.length;x<g;x++){var v=f[p[x]],b=v.items,y=v.cateAxisId,S=b.filter(function(E){return Da(E.type).indexOf("Bar")>=0});if(S&&S.length){var C=S[0].type.defaultProps,k=C!==void 0?Yt(Yt({},C),S[0].props):S[0].props,T=k.barSize,N=k[y];l[N]||(l[N]=[]);var O=nt(T)?n:T;l[N].push({item:S[0],stackList:S.slice(1),barSize:nt(O)?void 0:Lr(O,a,0)})}}return l},YF=function(r){var n=r.barGap,a=r.barCategoryGap,s=r.bandSize,i=r.sizeList,l=i===void 0?[]:i,d=r.maxBarSize,u=l.length;if(u<1)return null;var m=Lr(n,s,0,!0),f,p=[];if(l[0].barSize===+l[0].barSize){var x=!1,g=s/u,v=l.reduce(function(T,N){return T+N.barSize||0},0);v+=(u-1)*m,v>=s&&(v-=(u-1)*m,m=0),v>=s&&g>0&&(x=!0,g*=.9,v=u*g);var b=(s-v)/2>>0,y={offset:b-m,size:0};f=l.reduce(function(T,N){var O={item:N.item,position:{offset:y.offset+y.size+m,size:x?g:N.barSize}},E=[].concat(sC(T),[O]);return y=E[E.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){E.push({item:P,position:y})}),E},p)}else{var S=Lr(a,s,0,!0);s-2*S-(u-1)*m<=0&&(m=0);var C=(s-2*S-(u-1)*m)/u;C>1&&(C>>=0);var k=d===+d?Math.min(C,d):C;f=l.reduce(function(T,N,O){var E=[].concat(sC(T),[{item:N.item,position:{offset:S+(C+m)*O+(C-k)/2,size:k}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){E.push({item:P,position:E[E.length-1].position})}),E},p)}return f},XF=function(r,n,a,s){var i=a.children,l=a.width,d=a.margin,u=l-(d.left||0)-(d.right||0),m=IE({children:i,legendWidth:u});if(m){var f=s||{},p=f.width,x=f.height,g=m.align,v=m.verticalAlign,b=m.layout;if((b==="vertical"||b==="horizontal"&&v==="middle")&&g!=="center"&&Ce(r[g]))return Yt(Yt({},r),{},uo({},g,r[g]+(p||0)));if((b==="horizontal"||b==="vertical"&&g==="center")&&v!=="middle"&&Ce(r[v]))return Yt(Yt({},r),{},uo({},v,r[v]+(x||0)))}return r},JF=function(r,n,a){return nt(n)?!0:r==="horizontal"?n==="yAxis":r==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},ME=function(r,n,a,s,i){var l=n.props.children,d=Yr(l,Kc).filter(function(m){return JF(s,i,m.props.direction)});if(d&&d.length){var u=d.map(function(m){return m.props.dataKey});return r.reduce(function(m,f){var p=Ft(f,a);if(nt(p))return m;var x=Array.isArray(p)?[Zm(p),ws(p)]:[p,p],g=u.reduce(function(v,b){var y=Ft(f,b,0),S=x[0]-Math.abs(Array.isArray(y)?y[0]:y),C=x[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(S,v[0]),Math.max(C,v[1])]},[1/0,-1/0]);return[Math.min(g[0],m[0]),Math.max(g[1],m[1])]},[1/0,-1/0])}return null},QF=function(r,n,a,s,i){var l=n.map(function(d){return ME(r,d,a,i,s)}).filter(function(d){return!nt(d)});return l&&l.length?l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]):null},LE=function(r,n,a,s,i){var l=n.map(function(u){var m=u.props.dataKey;return a==="number"&&m&&ME(r,u,m,s)||ec(r,m,a,i)});if(a==="number")return l.reduce(function(u,m){return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);var d={};return l.reduce(function(u,m){for(var f=0,p=m.length;f<p;f++)d[m[f]]||(d[m[f]]=!0,u.push(m[f]));return u},[])},DE=function(r,n){return r==="horizontal"&&n==="xAxis"||r==="vertical"&&n==="yAxis"||r==="centric"&&n==="angleAxis"||r==="radial"&&n==="radiusAxis"},RE=function(r,n,a,s){if(s)return r.map(function(u){return u.coordinate});var i,l,d=r.map(function(u){return u.coordinate===n&&(i=!0),u.coordinate===a&&(l=!0),u.coordinate});return i||d.push(n),l||d.push(a),d},La=function(r,n,a){if(!r)return null;var s=r.scale,i=r.duplicateDomain,l=r.type,d=r.range,u=r.realScaleType==="scaleBand"?s.bandwidth()/2:2,m=(n||a)&&l==="category"&&s.bandwidth?s.bandwidth()/u:0;if(m=r.axisType==="angleAxis"&&d?.length>=2?Mr(d[0]-d[1])*2*m:m,n&&(r.ticks||r.niceTicks)){var f=(r.ticks||r.niceTicks).map(function(p){var x=i?i.indexOf(p):p;return{coordinate:s(x)+m,value:p,offset:m}});return f.filter(function(p){return!Go(p.coordinate)})}return r.isCategorical&&r.categoricalDomain?r.categoricalDomain.map(function(p,x){return{coordinate:s(p)+m,value:p,index:x,offset:m}}):s.ticks&&!a?s.ticks(r.tickCount).map(function(p){return{coordinate:s(p)+m,value:p,offset:m}}):s.domain().map(function(p,x){return{coordinate:s(p)+m,value:i?i[p]:p,index:x,offset:m}})},Ab=new WeakMap,hu=function(r,n){if(typeof n!="function")return r;Ab.has(r)||Ab.set(r,new WeakMap);var a=Ab.get(r);if(a.has(n))return a.get(n);var s=function(){r.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,s),s},$E=function(r,n,a){var s=r.scale,i=r.type,l=r.layout,d=r.axisType;if(s==="auto")return l==="radial"&&d==="radiusAxis"?{scale:pc(),realScaleType:"band"}:l==="radial"&&d==="angleAxis"?{scale:zu(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Zl(),realScaleType:"point"}:i==="category"?{scale:pc(),realScaleType:"band"}:{scale:zu(),realScaleType:"linear"};if(Cs(s)){var u="scale".concat($m(s));return{scale:(G4[u]||Zl)(),realScaleType:G4[u]?u:"point"}}return Ze(s)?{scale:s}:{scale:Zl(),realScaleType:"point"}},oC=1e-4,FE=function(r){var n=r.domain();if(!(!n||n.length<=2)){var a=n.length,s=r.range(),i=Math.min(s[0],s[1])-oC,l=Math.max(s[0],s[1])+oC,d=r(n[0]),u=r(n[a-1]);(d<i||d>l||u<i||u>l)&&r.domain([n[0],n[a-1]])}},ZF=function(r,n){if(!r)return null;for(var a=0,s=r.length;a<s;a++)if(r[a].item===n)return r[a].position;return null},e9=function(r,n){if(!n||n.length!==2||!Ce(n[0])||!Ce(n[1]))return r;var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[r[0],r[1]];return(!Ce(r[0])||r[0]<a)&&(i[0]=a),(!Ce(r[1])||r[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},t9=function(r){var n=r.length;if(!(n<=0))for(var a=0,s=r[0].length;a<s;++a)for(var i=0,l=0,d=0;d<n;++d){var u=Go(r[d][a][1])?r[d][a][0]:r[d][a][1];u>=0?(r[d][a][0]=i,r[d][a][1]=i+u,i=r[d][a][1]):(r[d][a][0]=l,r[d][a][1]=l+u,l=r[d][a][1])}},r9=function(r){var n=r.length;if(!(n<=0))for(var a=0,s=r[0].length;a<s;++a)for(var i=0,l=0;l<n;++l){var d=Go(r[l][a][1])?r[l][a][0]:r[l][a][1];d>=0?(r[l][a][0]=i,r[l][a][1]=i+d,i=r[l][a][1]):(r[l][a][0]=0,r[l][a][1]=0)}},n9={sign:t9,expand:tL,none:fo,silhouette:rL,wiggle:nL,positive:r9},a9=function(r,n,a){var s=n.map(function(d){return d.props.dataKey}),i=n9[a],l=eL().keys(s).value(function(d,u){return+Ft(d,u,0)}).order(av).offset(i);return l(r)},s9=function(r,n,a,s,i,l){if(!r)return null;var d=l?n.reverse():n,u={},m=d.reduce(function(p,x){var g,v=(g=x.type)!==null&&g!==void 0&&g.defaultProps?Yt(Yt({},x.type.defaultProps),x.props):x.props,b=v.stackId,y=v.hide;if(y)return p;var S=v[a],C=p[S]||{hasStack:!1,stackGroups:{}};if(cr(b)){var k=C.stackGroups[b]||{numericAxisId:a,cateAxisId:s,items:[]};k.items.push(x),C.hasStack=!0,C.stackGroups[b]=k}else C.stackGroups[gi("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[x]};return Yt(Yt({},p),{},uo({},S,C))},u),f={};return Object.keys(m).reduce(function(p,x){var g=m[x];if(g.hasStack){var v={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(b,y){var S=g.stackGroups[y];return Yt(Yt({},b),{},uo({},y,{numericAxisId:a,cateAxisId:s,items:S.items,stackedData:a9(r,S.items,i)}))},v)}return Yt(Yt({},p),{},uo({},x,g))},f)},BE=function(r,n){var a=n.realScaleType,s=n.type,i=n.tickCount,l=n.originalDomain,d=n.allowDecimals,u=a||n.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var m=r.domain();if(!m.length)return null;var f=vF(m,i,d);return r.domain([Zm(f),ws(f)]),{niceTicks:f}}if(i&&s==="number"){var p=r.domain(),x=yF(p,i,d);return{niceTicks:x}}return null};function Ju(t){var r=t.axis,n=t.ticks,a=t.bandSize,s=t.entry,i=t.index,l=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!nt(s[r.dataKey])){var d=Cu(n,"value",s[r.dataKey]);if(d)return d.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var u=Ft(s,nt(l)?r.dataKey:l);return nt(u)?null:r.scale(u)}var lC=function(r){var n=r.axis,a=r.ticks,s=r.offset,i=r.bandSize,l=r.entry,d=r.index;if(n.type==="category")return a[d]?a[d].coordinate+s:null;var u=Ft(l,n.dataKey,n.domain[d]);return nt(u)?null:n.scale(u)-i/2+s},i9=function(r){var n=r.numericAxis,a=n.scale.domain();if(n.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},o9=function(r,n){var a,s=(a=r.type)!==null&&a!==void 0&&a.defaultProps?Yt(Yt({},r.type.defaultProps),r.props):r.props,i=s.stackId;if(cr(i)){var l=n[i];if(l){var d=l.items.indexOf(r);return d>=0?l.stackedData[d]:null}}return null},l9=function(r){return r.reduce(function(n,a){return[Zm(a.concat([n[0]]).filter(Ce)),ws(a.concat([n[1]]).filter(Ce))]},[1/0,-1/0])},UE=function(r,n,a){return Object.keys(r).reduce(function(s,i){var l=r[i],d=l.stackedData,u=d.reduce(function(m,f){var p=l9(f.slice(n,a+1));return[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},cC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ev=function(r,n,a){if(Ze(r))return r(n,a);if(!Array.isArray(r))return n;var s=[];if(Ce(r[0]))s[0]=a?r[0]:Math.min(r[0],n[0]);else if(cC.test(r[0])){var i=+cC.exec(r[0])[1];s[0]=n[0]-i}else Ze(r[0])?s[0]=r[0](n[0]):s[0]=n[0];if(Ce(r[1]))s[1]=a?r[1]:Math.max(r[1],n[1]);else if(dC.test(r[1])){var l=+dC.exec(r[1])[1];s[1]=n[1]+l}else Ze(r[1])?s[1]=r[1](n[1]):s[1]=n[1];return s},Qu=function(r,n,a){if(r&&r.scale&&r.scale.bandwidth){var s=r.scale.bandwidth();if(!a||s>0)return s}if(r&&n&&n.length>=2){for(var i=Jy(n,function(p){return p.coordinate}),l=1/0,d=1,u=i.length;d<u;d++){var m=i[d],f=i[d-1];l=Math.min((m.coordinate||0)-(f.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},uC=function(r,n,a){return!r||!r.length||Ts(r,sn(a,"type.defaultProps.domain"))?n:r},WE=function(r,n){var a=r.type.defaultProps?Yt(Yt({},r.type.defaultProps),r.props):r.props,s=a.dataKey,i=a.name,l=a.unit,d=a.formatter,u=a.tooltipType,m=a.chartType,f=a.hide;return Yt(Yt({},He(r,!1)),{},{dataKey:s,unit:l,formatter:d,name:i||s,color:Nj(r),value:Ft(n,s),type:u,payload:n,chartType:m,hide:f})};function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nc(t)}function mC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Pa(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?mC(Object(n),!0).forEach(function(a){qE(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qE(t,r,n){return r=c9(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function c9(t){var r=d9(t,"string");return Nc(r)=="symbol"?r:r+""}function d9(t,r){if(Nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function u9(t,r){return h9(t)||p9(t,r)||f9(t,r)||m9()}function m9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f9(t,r){if(t){if(typeof t=="string")return fC(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fC(t,r)}}function fC(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function p9(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function h9(t){if(Array.isArray(t))return t}var Zu=Math.PI/180,x9=function(r){return r*180/Math.PI},It=function(r,n,a,s){return{x:r+Math.cos(-Zu*s)*a,y:n+Math.sin(-Zu*s)*a}},zE=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},g9=function(r,n,a,s,i){var l=r.width,d=r.height,u=r.startAngle,m=r.endAngle,f=Lr(r.cx,l,l/2),p=Lr(r.cy,d,d/2),x=zE(l,d,a),g=Lr(r.innerRadius,x,0),v=Lr(r.outerRadius,x,x*.8),b=Object.keys(n);return b.reduce(function(y,S){var C=n[S],k=C.domain,T=C.reversed,N;if(nt(C.range))s==="angleAxis"?N=[u,m]:s==="radiusAxis"&&(N=[g,v]),T&&(N=[N[1],N[0]]);else{N=C.range;var O=N,E=u9(O,2);u=E[0],m=E[1]}var P=$E(C,i),I=P.realScaleType,M=P.scale;M.domain(k).range(N),FE(M);var D=BE(M,Pa(Pa({},C),{},{realScaleType:I})),U=Pa(Pa(Pa({},C),D),{},{range:N,radius:v,realScaleType:I,scale:M,cx:f,cy:p,innerRadius:g,outerRadius:v,startAngle:u,endAngle:m});return Pa(Pa({},y),{},qE({},S,U))},{})},b9=function(r,n){var a=r.x,s=r.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-l,2))},v9=function(r,n){var a=r.x,s=r.y,i=n.cx,l=n.cy,d=b9({x:a,y:s},{x:i,y:l});if(d<=0)return{radius:d};var u=(a-i)/d,m=Math.acos(u);return s>l&&(m=2*Math.PI-m),{radius:d,angle:x9(m),angleInRadian:m}},y9=function(r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),l=Math.min(s,i);return{startAngle:n-l*360,endAngle:a-l*360}},j9=function(r,n){var a=n.startAngle,s=n.endAngle,i=Math.floor(a/360),l=Math.floor(s/360),d=Math.min(i,l);return r+d*360},pC=function(r,n){var a=r.x,s=r.y,i=v9({x:a,y:s},n),l=i.radius,d=i.angle,u=n.innerRadius,m=n.outerRadius;if(l<u||l>m)return!1;if(l===0)return!0;var f=y9(n),p=f.startAngle,x=f.endAngle,g=d,v;if(p<=x){for(;g>x;)g-=360;for(;g<p;)g+=360;v=g>=p&&g<=x}else{for(;g>p;)g-=360;for(;g<x;)g+=360;v=g>=x&&g<=p}return v?Pa(Pa({},n),{},{radius:l,angle:j9(g,n)}):null},GE=function(r){return!w.isValidElement(r)&&!Ze(r)&&typeof r!="boolean"?r.className:""};function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sc(t)}var w9=["offset"];function N9(t){return A9(t)||C9(t)||k9(t)||S9()}function S9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k9(t,r){if(t){if(typeof t=="string")return Ov(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ov(t,r)}}function C9(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A9(t){if(Array.isArray(t))return Ov(t)}function Ov(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function T9(t,r){if(t==null)return{};var n=E9(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function E9(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function hC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function or(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?hC(Object(n),!0).forEach(function(a){O9(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function O9(t,r,n){return r=P9(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function P9(t){var r=_9(t,"string");return Sc(r)=="symbol"?r:r+""}function _9(t,r){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Sc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kc.apply(this,arguments)}var I9=function(r){var n=r.value,a=r.formatter,s=nt(r.children)?n:r.children;return Ze(a)?a(s):s},M9=function(r,n){var a=Mr(n-r),s=Math.min(Math.abs(n-r),360);return a*s},L9=function(r,n,a){var s=r.position,i=r.viewBox,l=r.offset,d=r.className,u=i,m=u.cx,f=u.cy,p=u.innerRadius,x=u.outerRadius,g=u.startAngle,v=u.endAngle,b=u.clockWise,y=(p+x)/2,S=M9(g,v),C=S>=0?1:-1,k,T;s==="insideStart"?(k=g+C*l,T=b):s==="insideEnd"?(k=v-C*l,T=!b):s==="end"&&(k=v+C*l,T=b),T=S<=0?T:!T;var N=It(m,f,y,k),O=It(m,f,y,k+(T?1:-1)*359),E="M".concat(N.x,",").concat(N.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(T?0:1,`,
    `).concat(O.x,",").concat(O.y),P=nt(r.id)?gi("recharts-radial-line-"):r.id;return Y.createElement("text",kc({},a,{dominantBaseline:"central",className:st("recharts-radial-bar-label",d)}),Y.createElement("defs",null,Y.createElement("path",{id:P,d:E})),Y.createElement("textPath",{xlinkHref:"#".concat(P)},n))},D9=function(r){var n=r.viewBox,a=r.offset,s=r.position,i=n,l=i.cx,d=i.cy,u=i.innerRadius,m=i.outerRadius,f=i.startAngle,p=i.endAngle,x=(f+p)/2;if(s==="outside"){var g=It(l,d,m+a,x),v=g.x,b=g.y;return{x:v,y:b,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"end"};var y=(u+m)/2,S=It(l,d,y,x),C=S.x,k=S.y;return{x:C,y:k,textAnchor:"middle",verticalAnchor:"middle"}},R9=function(r){var n=r.viewBox,a=r.parentViewBox,s=r.offset,i=r.position,l=n,d=l.x,u=l.y,m=l.width,f=l.height,p=f>=0?1:-1,x=p*s,g=p>0?"end":"start",v=p>0?"start":"end",b=m>=0?1:-1,y=b*s,S=b>0?"end":"start",C=b>0?"start":"end";if(i==="top"){var k={x:d+m/2,y:u-p*s,textAnchor:"middle",verticalAnchor:g};return or(or({},k),a?{height:Math.max(u-a.y,0),width:m}:{})}if(i==="bottom"){var T={x:d+m/2,y:u+f+x,textAnchor:"middle",verticalAnchor:v};return or(or({},T),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(i==="left"){var N={x:d-y,y:u+f/2,textAnchor:S,verticalAnchor:"middle"};return or(or({},N),a?{width:Math.max(N.x-a.x,0),height:f}:{})}if(i==="right"){var O={x:d+m+y,y:u+f/2,textAnchor:C,verticalAnchor:"middle"};return or(or({},O),a?{width:Math.max(a.x+a.width-O.x,0),height:f}:{})}var E=a?{width:m,height:f}:{};return i==="insideLeft"?or({x:d+y,y:u+f/2,textAnchor:C,verticalAnchor:"middle"},E):i==="insideRight"?or({x:d+m-y,y:u+f/2,textAnchor:S,verticalAnchor:"middle"},E):i==="insideTop"?or({x:d+m/2,y:u+x,textAnchor:"middle",verticalAnchor:v},E):i==="insideBottom"?or({x:d+m/2,y:u+f-x,textAnchor:"middle",verticalAnchor:g},E):i==="insideTopLeft"?or({x:d+y,y:u+x,textAnchor:C,verticalAnchor:v},E):i==="insideTopRight"?or({x:d+m-y,y:u+x,textAnchor:S,verticalAnchor:v},E):i==="insideBottomLeft"?or({x:d+y,y:u+f-x,textAnchor:C,verticalAnchor:g},E):i==="insideBottomRight"?or({x:d+m-y,y:u+f-x,textAnchor:S,verticalAnchor:g},E):zo(i)&&(Ce(i.x)||ri(i.x))&&(Ce(i.y)||ri(i.y))?or({x:d+Lr(i.x,m),y:u+Lr(i.y,f),textAnchor:"end",verticalAnchor:"end"},E):or({x:d+m/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},E)},$9=function(r){return"cx"in r&&Ce(r.cx)};function xr(t){var r=t.offset,n=r===void 0?5:r,a=T9(t,w9),s=or({offset:n},a),i=s.viewBox,l=s.position,d=s.value,u=s.children,m=s.content,f=s.className,p=f===void 0?"":f,x=s.textBreakAll;if(!i||nt(d)&&nt(u)&&!w.isValidElement(m)&&!Ze(m))return null;if(w.isValidElement(m))return w.cloneElement(m,s);var g;if(Ze(m)){if(g=w.createElement(m,s),w.isValidElement(g))return g}else g=I9(s);var v=$9(i),b=He(s,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return L9(s,g,b);var y=v?D9(s):R9(s);return Y.createElement(ui,kc({className:st("recharts-label",p)},b,y,{breakAll:x}),g)}xr.displayName="Label";var HE=function(r){var n=r.cx,a=r.cy,s=r.angle,i=r.startAngle,l=r.endAngle,d=r.r,u=r.radius,m=r.innerRadius,f=r.outerRadius,p=r.x,x=r.y,g=r.top,v=r.left,b=r.width,y=r.height,S=r.clockWise,C=r.labelViewBox;if(C)return C;if(Ce(b)&&Ce(y)){if(Ce(p)&&Ce(x))return{x:p,y:x,width:b,height:y};if(Ce(g)&&Ce(v))return{x:g,y:v,width:b,height:y}}return Ce(p)&&Ce(x)?{x:p,y:x,width:0,height:0}:Ce(n)&&Ce(a)?{cx:n,cy:a,startAngle:i||s||0,endAngle:l||s||0,innerRadius:m||0,outerRadius:f||u||d||0,clockWise:S}:r.viewBox?r.viewBox:{}},F9=function(r,n){return r?r===!0?Y.createElement(xr,{key:"label-implicit",viewBox:n}):cr(r)?Y.createElement(xr,{key:"label-implicit",viewBox:n,value:r}):w.isValidElement(r)?r.type===xr?w.cloneElement(r,{key:"label-implicit",viewBox:n}):Y.createElement(xr,{key:"label-implicit",content:r,viewBox:n}):Ze(r)?Y.createElement(xr,{key:"label-implicit",content:r,viewBox:n}):zo(r)?Y.createElement(xr,kc({viewBox:n},r,{key:"label-implicit"})):null:null},B9=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&a&&!r.label)return null;var s=r.children,i=HE(r),l=Yr(s,xr).map(function(u,m){return w.cloneElement(u,{viewBox:n||i,key:"label-".concat(m)})});if(!a)return l;var d=F9(r.label,n||i);return[d].concat(N9(l))};xr.parseViewBox=HE;xr.renderCallByParent=B9;var Tb,xC;function VE(){if(xC)return Tb;xC=1;function t(r){var n=r==null?0:r.length;return n?r[n-1]:void 0}return Tb=t,Tb}var U9=VE();const W9=wt(U9);function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cc(t)}var q9=["valueAccessor"],z9=["data","dataKey","clockWise","id","textBreakAll"];function G9(t){return Y9(t)||K9(t)||V9(t)||H9()}function H9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V9(t,r){if(t){if(typeof t=="string")return Pv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pv(t,r)}}function K9(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Y9(t){if(Array.isArray(t))return Pv(t)}function Pv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function em(){return em=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},em.apply(this,arguments)}function gC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function bC(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?gC(Object(n),!0).forEach(function(a){X9(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function X9(t,r,n){return r=J9(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function J9(t){var r=Q9(t,"string");return Cc(r)=="symbol"?r:r+""}function Q9(t,r){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function vC(t,r){if(t==null)return{};var n=Z9(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Z9(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}var eB=function(r){return Array.isArray(r.value)?W9(r.value):r.value};function on(t){var r=t.valueAccessor,n=r===void 0?eB:r,a=vC(t,q9),s=a.data,i=a.dataKey,l=a.clockWise,d=a.id,u=a.textBreakAll,m=vC(a,z9);return!s||!s.length?null:Y.createElement(ct,{className:"recharts-label-list"},s.map(function(f,p){var x=nt(i)?n(f,p):Ft(f&&f.payload,i),g=nt(d)?{}:{id:"".concat(d,"-").concat(p)};return Y.createElement(xr,em({},He(f,!0),m,g,{parentViewBox:f.parentViewBox,value:x,textBreakAll:u,viewBox:xr.parseViewBox(nt(l)?f:bC(bC({},f),{},{clockWise:l})),key:"label-".concat(p),index:p}))}))}on.displayName="LabelList";function tB(t,r){return t?t===!0?Y.createElement(on,{key:"labelList-implicit",data:r}):Y.isValidElement(t)||Ze(t)?Y.createElement(on,{key:"labelList-implicit",data:r,content:t}):zo(t)?Y.createElement(on,em({data:r},t,{key:"labelList-implicit"})):null:null}function rB(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,s=Yr(a,on).map(function(l,d){return w.cloneElement(l,{data:r,key:"labelList-".concat(d)})});if(!n)return s;var i=tB(t.label,r);return[i].concat(G9(s))}on.renderCallByParent=rB;function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ac(t)}function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_v.apply(this,arguments)}function yC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function jC(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?yC(Object(n),!0).forEach(function(a){nB(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nB(t,r,n){return r=aB(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function aB(t){var r=sB(t,"string");return Ac(r)=="symbol"?r:r+""}function sB(t,r){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var iB=function(r,n){var a=Mr(n-r),s=Math.min(Math.abs(n-r),359.999);return a*s},xu=function(r){var n=r.cx,a=r.cy,s=r.radius,i=r.angle,l=r.sign,d=r.isExternal,u=r.cornerRadius,m=r.cornerIsExternal,f=u*(d?1:-1)+s,p=Math.asin(u/f)/Zu,x=m?i:i+l*p,g=It(n,a,f,x),v=It(n,a,s,x),b=m?i-l*p:i,y=It(n,a,f*Math.cos(p*Zu),b);return{center:g,circleTangency:v,lineTangency:y,theta:p}},KE=function(r){var n=r.cx,a=r.cy,s=r.innerRadius,i=r.outerRadius,l=r.startAngle,d=r.endAngle,u=iB(l,d),m=l+u,f=It(n,a,i,l),p=It(n,a,i,m),x="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>m),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var g=It(n,a,s,l),v=It(n,a,s,m);x+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=m),`,
            `).concat(g.x,",").concat(g.y," Z")}else x+="L ".concat(n,",").concat(a," Z");return x},oB=function(r){var n=r.cx,a=r.cy,s=r.innerRadius,i=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,m=r.startAngle,f=r.endAngle,p=Mr(f-m),x=xu({cx:n,cy:a,radius:i,angle:m,sign:p,cornerRadius:l,cornerIsExternal:u}),g=x.circleTangency,v=x.lineTangency,b=x.theta,y=xu({cx:n,cy:a,radius:i,angle:f,sign:-p,cornerRadius:l,cornerIsExternal:u}),S=y.circleTangency,C=y.lineTangency,k=y.theta,T=u?Math.abs(m-f):Math.abs(m-f)-b-k;if(T<0)return d?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):KE({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(C.x,",").concat(C.y,`
  `);if(s>0){var O=xu({cx:n,cy:a,radius:s,angle:m,sign:p,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),E=O.circleTangency,P=O.lineTangency,I=O.theta,M=xu({cx:n,cy:a,radius:s,angle:f,sign:-p,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),D=M.circleTangency,U=M.lineTangency,F=M.theta,W=u?Math.abs(m-f):Math.abs(m-f)-I-F;if(W<0&&l===0)return"".concat(N,"L").concat(n,",").concat(a,"Z");N+="L".concat(U.x,",").concat(U.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(W>180),",").concat(+(p>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(P.x,",").concat(P.y,"Z")}else N+="L".concat(n,",").concat(a,"Z");return N},lB={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},YE=function(r){var n=jC(jC({},lB),r),a=n.cx,s=n.cy,i=n.innerRadius,l=n.outerRadius,d=n.cornerRadius,u=n.forceCornerRadius,m=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,x=n.className;if(l<i||f===p)return null;var g=st("recharts-sector",x),v=l-i,b=Lr(d,v,0,!0),y;return b>0&&Math.abs(f-p)<360?y=oB({cx:a,cy:s,innerRadius:i,outerRadius:l,cornerRadius:Math.min(b,v/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:f,endAngle:p}):y=KE({cx:a,cy:s,innerRadius:i,outerRadius:l,startAngle:f,endAngle:p}),Y.createElement("path",_v({},He(n,!0),{className:g,d:y,role:"img"}))};function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tc(t)}function Iv(){return Iv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Iv.apply(this,arguments)}function wC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function NC(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wC(Object(n),!0).forEach(function(a){cB(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function cB(t,r,n){return r=dB(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function dB(t){var r=uB(t,"string");return Tc(r)=="symbol"?r:r+""}function uB(t,r){if(Tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Tc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var SC={curveBasisClosed:qM,curveBasisOpen:zM,curveBasis:WM,curveBumpX:TM,curveBumpY:EM,curveLinearClosed:GM,curveLinear:Bm,curveMonotoneX:HM,curveMonotoneY:VM,curveNatural:KM,curveStep:YM,curveStepAfter:JM,curveStepBefore:XM},gu=function(r){return r.x===+r.x&&r.y===+r.y},Bl=function(r){return r.x},Ul=function(r){return r.y},mB=function(r,n){if(Ze(r))return r;var a="curve".concat($m(r));return(a==="curveMonotone"||a==="curveBump")&&n?SC["".concat(a).concat(n==="vertical"?"Y":"X")]:SC[a]||Bm},fB=function(r){var n=r.type,a=n===void 0?"linear":n,s=r.points,i=s===void 0?[]:s,l=r.baseLine,d=r.layout,u=r.connectNulls,m=u===void 0?!1:u,f=mB(a,d),p=m?i.filter(function(b){return gu(b)}):i,x;if(Array.isArray(l)){var g=m?l.filter(function(b){return gu(b)}):l,v=p.map(function(b,y){return NC(NC({},b),{},{base:g[y]})});return d==="vertical"?x=lu().y(Ul).x1(Bl).x0(function(b){return b.base.x}):x=lu().x(Bl).y1(Ul).y0(function(b){return b.base.y}),x.defined(gu).curve(f),x(v)}return d==="vertical"&&Ce(l)?x=lu().y(Ul).x1(Bl).x0(l):Ce(l)?x=lu().x(Bl).y1(Ul).y0(l):x=z3().x(Bl).y(Ul),x.defined(gu).curve(f),x(p)},di=function(r){var n=r.className,a=r.points,s=r.path,i=r.pathRef;if((!a||!a.length)&&!s)return null;var l=a&&a.length?fB(r):s;return w.createElement("path",Iv({},He(r,!1),Au(r),{className:st("recharts-curve",n),d:l,ref:i}))},Eb={exports:{}},Ob,kC;function pB(){if(kC)return Ob;kC=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ob=t,Ob}var Pb,CC;function hB(){if(CC)return Pb;CC=1;var t=pB();function r(){}function n(){}return n.resetWarningCache=r,Pb=function(){function a(l,d,u,m,f,p){if(p!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:r};return i.PropTypes=i,i},Pb}var AC;function xB(){return AC||(AC=1,Eb.exports=hB()()),Eb.exports}var gB=xB();const kt=wt(gB);var bB=Object.getOwnPropertyNames,vB=Object.getOwnPropertySymbols,yB=Object.prototype.hasOwnProperty;function TC(t,r){return function(a,s,i){return t(a,s,i)&&r(a,s,i)}}function bu(t){return function(n,a,s){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,s);var i=s.cache,l=i.get(n),d=i.get(a);if(l&&d)return l===a&&d===n;i.set(n,a),i.set(a,n);var u=t(n,a,s);return i.delete(n),i.delete(a),u}}function jB(t){return t?.[Symbol.toStringTag]}function EC(t){return bB(t).concat(vB(t))}var wB=Object.hasOwn||(function(t,r){return yB.call(t,r)});function yi(t,r){return t===r||!t&&!r&&t!==t&&r!==r}var NB="__v",SB="__o",kB="_owner",OC=Object.getOwnPropertyDescriptor,PC=Object.keys;function CB(t,r,n){var a=t.length;if(r.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],r[a],a,a,t,r,n))return!1;return!0}function AB(t,r){return yi(t.getTime(),r.getTime())}function TB(t,r){return t.name===r.name&&t.message===r.message&&t.cause===r.cause&&t.stack===r.stack}function EB(t,r){return t===r}function _C(t,r,n){var a=t.size;if(a!==r.size)return!1;if(!a)return!0;for(var s=new Array(a),i=t.entries(),l,d,u=0;(l=i.next())&&!l.done;){for(var m=r.entries(),f=!1,p=0;(d=m.next())&&!d.done;){if(s[p]){p++;continue}var x=l.value,g=d.value;if(n.equals(x[0],g[0],u,p,t,r,n)&&n.equals(x[1],g[1],x[0],g[0],t,r,n)){f=s[p]=!0;break}p++}if(!f)return!1;u++}return!0}var OB=yi;function PB(t,r,n){var a=PC(t),s=a.length;if(PC(r).length!==s)return!1;for(;s-- >0;)if(!XE(t,r,n,a[s]))return!1;return!0}function Wl(t,r,n){var a=EC(t),s=a.length;if(EC(r).length!==s)return!1;for(var i,l,d;s-- >0;)if(i=a[s],!XE(t,r,n,i)||(l=OC(t,i),d=OC(r,i),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function _B(t,r){return yi(t.valueOf(),r.valueOf())}function IB(t,r){return t.source===r.source&&t.flags===r.flags}function IC(t,r,n){var a=t.size;if(a!==r.size)return!1;if(!a)return!0;for(var s=new Array(a),i=t.values(),l,d;(l=i.next())&&!l.done;){for(var u=r.values(),m=!1,f=0;(d=u.next())&&!d.done;){if(!s[f]&&n.equals(l.value,d.value,l.value,d.value,t,r,n)){m=s[f]=!0;break}f++}if(!m)return!1}return!0}function MB(t,r){var n=t.length;if(r.length!==n)return!1;for(;n-- >0;)if(t[n]!==r[n])return!1;return!0}function LB(t,r){return t.hostname===r.hostname&&t.pathname===r.pathname&&t.protocol===r.protocol&&t.port===r.port&&t.hash===r.hash&&t.username===r.username&&t.password===r.password}function XE(t,r,n,a){return(a===kB||a===SB||a===NB)&&(t.$$typeof||r.$$typeof)?!0:wB(r,a)&&n.equals(t[a],r[a],a,a,t,r,n)}var DB="[object Arguments]",RB="[object Boolean]",$B="[object Date]",FB="[object Error]",BB="[object Map]",UB="[object Number]",WB="[object Object]",qB="[object RegExp]",zB="[object Set]",GB="[object String]",HB="[object URL]",VB=Array.isArray,MC=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,LC=Object.assign,KB=Object.prototype.toString.call.bind(Object.prototype.toString);function YB(t){var r=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,d=t.areObjectsEqual,u=t.arePrimitiveWrappersEqual,m=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,x=t.areUrlsEqual,g=t.unknownTagComparators;return function(b,y,S){if(b===y)return!0;if(b==null||y==null)return!1;var C=typeof b;if(C!==typeof y)return!1;if(C!=="object")return C==="number"?l(b,y,S):C==="function"?s(b,y,S):!1;var k=b.constructor;if(k!==y.constructor)return!1;if(k===Object)return d(b,y,S);if(VB(b))return r(b,y,S);if(MC!=null&&MC(b))return p(b,y,S);if(k===Date)return n(b,y,S);if(k===RegExp)return m(b,y,S);if(k===Map)return i(b,y,S);if(k===Set)return f(b,y,S);var T=KB(b);if(T===$B)return n(b,y,S);if(T===qB)return m(b,y,S);if(T===BB)return i(b,y,S);if(T===zB)return f(b,y,S);if(T===WB)return typeof b.then!="function"&&typeof y.then!="function"&&d(b,y,S);if(T===HB)return x(b,y,S);if(T===FB)return a(b,y,S);if(T===DB)return d(b,y,S);if(T===RB||T===UB||T===GB)return u(b,y,S);if(g){var N=g[T];if(!N){var O=jB(b);O&&(N=g[O])}if(N)return N(b,y,S)}return!1}}function XB(t){var r=t.circular,n=t.createCustomConfig,a=t.strict,s={areArraysEqual:a?Wl:CB,areDatesEqual:AB,areErrorsEqual:TB,areFunctionsEqual:EB,areMapsEqual:a?TC(_C,Wl):_C,areNumbersEqual:OB,areObjectsEqual:a?Wl:PB,arePrimitiveWrappersEqual:_B,areRegExpsEqual:IB,areSetsEqual:a?TC(IC,Wl):IC,areTypedArraysEqual:a?Wl:MB,areUrlsEqual:LB,unknownTagComparators:void 0};if(n&&(s=LC({},s,n(s))),r){var i=bu(s.areArraysEqual),l=bu(s.areMapsEqual),d=bu(s.areObjectsEqual),u=bu(s.areSetsEqual);s=LC({},s,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:d,areSetsEqual:u})}return s}function JB(t){return function(r,n,a,s,i,l,d){return t(r,n,d)}}function QB(t){var r=t.circular,n=t.comparator,a=t.createState,s=t.equals,i=t.strict;if(a)return function(u,m){var f=a(),p=f.cache,x=p===void 0?r?new WeakMap:void 0:p,g=f.meta;return n(u,m,{cache:x,equals:s,meta:g,strict:i})};if(r)return function(u,m){return n(u,m,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var l={cache:void 0,equals:s,meta:void 0,strict:i};return function(u,m){return n(u,m,l)}}var ZB=Ps();Ps({strict:!0});Ps({circular:!0});Ps({circular:!0,strict:!0});Ps({createInternalComparator:function(){return yi}});Ps({strict:!0,createInternalComparator:function(){return yi}});Ps({circular:!0,createInternalComparator:function(){return yi}});Ps({circular:!0,createInternalComparator:function(){return yi},strict:!0});function Ps(t){t===void 0&&(t={});var r=t.circular,n=r===void 0?!1:r,a=t.createInternalComparator,s=t.createState,i=t.strict,l=i===void 0?!1:i,d=XB(t),u=YB(d),m=a?a(u):JB(u);return QB({circular:n,comparator:u,createState:s,equals:m,strict:l})}function eU(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function DC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>r?(t(i),n=-1):eU(s)};requestAnimationFrame(a)}function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mv(t)}function tU(t){return sU(t)||aU(t)||nU(t)||rU()}function rU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nU(t,r){if(t){if(typeof t=="string")return RC(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RC(t,r)}}function RC(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function aU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sU(t){if(Array.isArray(t))return t}function iU(){var t={},r=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,d=tU(l),u=d[0],m=d.slice(1);if(typeof u=="number"){DC(s.bind(null,m),u);return}s(u),DC(s.bind(null,m));return}Mv(i)==="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,a(i)},subscribe:function(i){return r=i,function(){r=function(){return null}}}}}function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ec(t)}function $C(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function FC(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?$C(Object(n),!0).forEach(function(a){JE(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function JE(t,r,n){return r=oU(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function oU(t){var r=lU(t,"string");return Ec(r)==="symbol"?r:String(r)}function lU(t,r){if(Ec(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Ec(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var cU=function(r,n){return[Object.keys(r),Object.keys(n)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},dU=function(r){return r},uU=function(r){return r.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},tc=function(r,n){return Object.keys(n).reduce(function(a,s){return FC(FC({},a),{},JE({},s,r(s,n[s])))},{})},BC=function(r,n,a){return r.map(function(s){return"".concat(uU(s)," ").concat(n,"ms ").concat(a)}).join(",")};function mU(t,r){return hU(t)||pU(t,r)||QE(t,r)||fU()}function fU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pU(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function hU(t){if(Array.isArray(t))return t}function xU(t){return vU(t)||bU(t)||QE(t)||gU()}function gU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QE(t,r){if(t){if(typeof t=="string")return Lv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lv(t,r)}}function bU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vU(t){if(Array.isArray(t))return Lv(t)}function Lv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}var tm=1e-4,ZE=function(r,n){return[0,3*r,3*n-6*r,3*r-3*n+1]},eO=function(r,n){return r.map(function(a,s){return a*Math.pow(n,s)}).reduce(function(a,s){return a+s})},UC=function(r,n){return function(a){var s=ZE(r,n);return eO(s,a)}},yU=function(r,n){return function(a){var s=ZE(r,n),i=[].concat(xU(s.map(function(l,d){return l*d}).slice(1)),[0]);return eO(i,a)}},WC=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n[0],i=n[1],l=n[2],d=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,l=1,d=1;break;case"ease":s=.25,i=.1,l=.25,d=1;break;case"ease-in":s=.42,i=0,l=1,d=1;break;case"ease-out":s=.42,i=0,l=.58,d=1;break;case"ease-in-out":s=0,i=0,l=.58,d=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var m=u[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),f=mU(m,4);s=f[0],i=f[1],l=f[2],d=f[3]}}}var p=UC(s,l),x=UC(i,d),g=yU(s,l),v=function(S){return S>1?1:S<0?0:S},b=function(S){for(var C=S>1?1:S,k=C,T=0;T<8;++T){var N=p(k)-C,O=g(k);if(Math.abs(N-C)<tm||O<tm)return x(k);k=v(k-N/O)}return x(k)};return b.isStepper=!1,b},jU=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.stiff,a=n===void 0?100:n,s=r.damping,i=s===void 0?8:s,l=r.dt,d=l===void 0?17:l,u=function(f,p,x){var g=-(f-p)*a,v=x*i,b=x+(g-v)*d/1e3,y=x*d/1e3+f;return Math.abs(y-p)<tm&&Math.abs(b)<tm?[p,0]:[y,b]};return u.isStepper=!0,u.dt=d,u},wU=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WC(s);case"spring":return jU();default:if(s.split("(")[0]==="cubic-bezier")return WC(s)}return typeof s=="function"?s:null};function Oc(t){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oc(t)}function qC(t){return kU(t)||SU(t)||tO(t)||NU()}function NU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kU(t){if(Array.isArray(t))return Rv(t)}function zC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function wr(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?zC(Object(n),!0).forEach(function(a){Dv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Dv(t,r,n){return r=CU(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function CU(t){var r=AU(t,"string");return Oc(r)==="symbol"?r:String(r)}function AU(t,r){if(Oc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Oc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function TU(t,r){return PU(t)||OU(t,r)||tO(t,r)||EU()}function EU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tO(t,r){if(t){if(typeof t=="string")return Rv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rv(t,r)}}function Rv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function OU(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function PU(t){if(Array.isArray(t))return t}var rm=function(r,n,a){return r+(n-r)*a},$v=function(r){var n=r.from,a=r.to;return n!==a},_U=function t(r,n,a){var s=tc(function(i,l){if($v(l)){var d=r(l.from,l.to,l.velocity),u=TU(d,2),m=u[0],f=u[1];return wr(wr({},l),{},{from:m,velocity:f})}return l},n);return a<1?tc(function(i,l){return $v(l)?wr(wr({},l),{},{velocity:rm(l.velocity,s[i].velocity,a),from:rm(l.from,s[i].from,a)}):l},n):t(r,s,a-1)};const IU=(function(t,r,n,a,s){var i=cU(t,r),l=i.reduce(function(y,S){return wr(wr({},y),{},Dv({},S,[t[S],r[S]]))},{}),d=i.reduce(function(y,S){return wr(wr({},y),{},Dv({},S,{from:t[S],velocity:0,to:r[S]}))},{}),u=-1,m,f,p=function(){return null},x=function(){return tc(function(S,C){return C.from},d)},g=function(){return!Object.values(d).filter($v).length},v=function(S){m||(m=S);var C=S-m,k=C/n.dt;d=_U(n,d,k),s(wr(wr(wr({},t),r),x())),m=S,g()||(u=requestAnimationFrame(p))},b=function(S){f||(f=S);var C=(S-f)/a,k=tc(function(N,O){return rm.apply(void 0,qC(O).concat([n(C)]))},l);if(s(wr(wr(wr({},t),r),k)),C<1)u=requestAnimationFrame(p);else{var T=tc(function(N,O){return rm.apply(void 0,qC(O).concat([n(1)]))},l);s(wr(wr(wr({},t),r),T))}};return p=n.isStepper?v:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(u)}}});function wo(t){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wo(t)}var MU=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function LU(t,r){if(t==null)return{};var n=DU(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function DU(t,r){if(t==null)return{};var n={},a=Object.keys(t),s,i;for(i=0;i<a.length;i++)s=a[i],!(r.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _b(t){return BU(t)||FU(t)||$U(t)||RU()}function RU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $U(t,r){if(t){if(typeof t=="string")return Fv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(t,r)}}function FU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BU(t){if(Array.isArray(t))return Fv(t)}function Fv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function GC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Fn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?GC(Object(n),!0).forEach(function(a){Xl(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Xl(t,r,n){return r=rO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function UU(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function WU(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,rO(a.key),a)}}function qU(t,r,n){return r&&WU(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rO(t){var r=zU(t,"string");return wo(r)==="symbol"?r:String(r)}function zU(t,r){if(wo(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(wo(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function GU(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Bv(t,r)}function Bv(t,r){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Bv(t,r)}function HU(t){var r=VU();return function(){var a=nm(t),s;if(r){var i=nm(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Uv(this,s)}}function Uv(t,r){if(r&&(wo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wv(t)}function Wv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nm(t){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nm(t)}var kn=(function(t){GU(n,t);var r=HU(n);function n(a,s){var i;UU(this,n),i=r.call(this,a,s);var l=i.props,d=l.isActive,u=l.attributeName,m=l.from,f=l.to,p=l.steps,x=l.children,g=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Wv(i)),i.changeStyle=i.changeStyle.bind(Wv(i)),!d||g<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:f}),Uv(i);if(p&&p.length)i.state={style:p[0].style};else if(m){if(typeof x=="function")return i.state={style:m},Uv(i);i.state={style:u?Xl({},u,m):m}}else i.state={style:{}};return i}return qU(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,l=s.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,l=i.isActive,d=i.canBegin,u=i.attributeName,m=i.shouldReAnimate,f=i.to,p=i.from,x=this.state.style;if(d){if(!l){var g={style:u?Xl({},u,f):f};this.state&&x&&(u&&x[u]!==f||!u&&x!==f)&&this.setState(g);return}if(!(ZB(s.to,f)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=v||m?p:s.to;if(this.state&&x){var y={style:u?Xl({},u,b):b};(u&&x[u]!==b||!u&&x!==b)&&this.setState(y)}this.runAnimation(Fn(Fn({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,l=s.from,d=s.to,u=s.duration,m=s.easing,f=s.begin,p=s.onAnimationEnd,x=s.onAnimationStart,g=IU(l,d,wU(m),u,this.changeStyle),v=function(){i.stopJSAnimation=g()};this.manager.start([x,f,v,u,p])}},{key:"runStepAnimation",value:function(s){var i=this,l=s.steps,d=s.begin,u=s.onAnimationStart,m=l[0],f=m.style,p=m.duration,x=p===void 0?0:p,g=function(b,y,S){if(S===0)return b;var C=y.duration,k=y.easing,T=k===void 0?"ease":k,N=y.style,O=y.properties,E=y.onAnimationEnd,P=S>0?l[S-1]:y,I=O||Object.keys(N);if(typeof T=="function"||T==="spring")return[].concat(_b(b),[i.runJSAnimation.bind(i,{from:P.style,to:N,duration:C,easing:T}),C]);var M=BC(I,C,T),D=Fn(Fn(Fn({},P.style),N),{},{transition:M});return[].concat(_b(b),[D,C,E]).filter(dU)};return this.manager.start([u].concat(_b(l.reduce(g,[f,Math.max(x,d)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=iU());var i=s.begin,l=s.duration,d=s.attributeName,u=s.to,m=s.easing,f=s.onAnimationStart,p=s.onAnimationEnd,x=s.steps,g=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof m=="function"||typeof g=="function"||m==="spring"){this.runJSAnimation(s);return}if(x.length>1){this.runStepAnimation(s);return}var b=d?Xl({},d,u):u,y=BC(Object.keys(b),l,m);v.start([f,i,Fn(Fn({},b),{},{transition:y}),l,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var d=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=LU(s,MU),m=w.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!d||m===0||l<=0)return i;var p=function(g){var v=g.props,b=v.style,y=b===void 0?{}:b,S=v.className,C=w.cloneElement(g,Fn(Fn({},u),{},{style:Fn(Fn({},y),f),className:S}));return C};return m===1?p(w.Children.only(i)):Y.createElement("div",null,w.Children.map(i,function(x){return p(x)}))}}]),n})(w.PureComponent);kn.displayName="Animate";kn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};kn.propTypes={from:kt.oneOfType([kt.object,kt.string]),to:kt.oneOfType([kt.object,kt.string]),attributeName:kt.string,duration:kt.number,begin:kt.number,easing:kt.oneOfType([kt.string,kt.func]),steps:kt.arrayOf(kt.shape({duration:kt.number.isRequired,style:kt.object.isRequired,easing:kt.oneOfType([kt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kt.func]),properties:kt.arrayOf("string"),onAnimationEnd:kt.func})),children:kt.oneOfType([kt.node,kt.func]),isActive:kt.bool,canBegin:kt.bool,onAnimationEnd:kt.func,shouldReAnimate:kt.bool,onAnimationStart:kt.func,onAnimationReStart:kt.func};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pc(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},am.apply(this,arguments)}function KU(t,r){return QU(t)||JU(t,r)||XU(t,r)||YU()}function YU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XU(t,r){if(t){if(typeof t=="string")return HC(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HC(t,r)}}function HC(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function JU(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function QU(t){if(Array.isArray(t))return t}function VC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function KC(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?VC(Object(n),!0).forEach(function(a){ZU(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ZU(t,r,n){return r=eW(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function eW(t){var r=tW(t,"string");return Pc(r)=="symbol"?r:r+""}function tW(t,r){if(Pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Pc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var YC=function(r,n,a,s,i){var l=Math.min(Math.abs(a)/2,Math.abs(s)/2),d=s>=0?1:-1,u=a>=0?1:-1,m=s>=0&&a>=0||s<0&&a<0?1:0,f;if(l>0&&i instanceof Array){for(var p=[0,0,0,0],x=0,g=4;x<g;x++)p[x]=i[x]>l?l:i[x];f="M".concat(r,",").concat(n+d*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(m,",").concat(r+u*p[0],",").concat(n)),f+="L ".concat(r+a-u*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(m,`,
        `).concat(r+a,",").concat(n+d*p[1])),f+="L ".concat(r+a,",").concat(n+s-d*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(m,`,
        `).concat(r+a-u*p[2],",").concat(n+s)),f+="L ".concat(r+u*p[3],",").concat(n+s),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(m,`,
        `).concat(r,",").concat(n+s-d*p[3])),f+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);f="M ".concat(r,",").concat(n+d*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(m,",").concat(r+u*v,",").concat(n,`
            L `).concat(r+a-u*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(m,",").concat(r+a,",").concat(n+d*v,`
            L `).concat(r+a,",").concat(n+s-d*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(m,",").concat(r+a-u*v,",").concat(n+s,`
            L `).concat(r+u*v,",").concat(n+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(m,",").concat(r,",").concat(n+s-d*v," Z")}else f="M ".concat(r,",").concat(n," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return f},rW=function(r,n){if(!r||!n)return!1;var a=r.x,s=r.y,i=n.x,l=n.y,d=n.width,u=n.height;if(Math.abs(d)>0&&Math.abs(u)>0){var m=Math.min(i,i+d),f=Math.max(i,i+d),p=Math.min(l,l+u),x=Math.max(l,l+u);return a>=m&&a<=f&&s>=p&&s<=x}return!1},nW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sj=function(r){var n=KC(KC({},nW),r),a=w.useRef(),s=w.useState(-1),i=KU(s,2),l=i[0],d=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var T=a.current.getTotalLength();T&&d(T)}catch{}},[]);var u=n.x,m=n.y,f=n.width,p=n.height,x=n.radius,g=n.className,v=n.animationEasing,b=n.animationDuration,y=n.animationBegin,S=n.isAnimationActive,C=n.isUpdateAnimationActive;if(u!==+u||m!==+m||f!==+f||p!==+p||f===0||p===0)return null;var k=st("recharts-rectangle",g);return C?Y.createElement(kn,{canBegin:l>0,from:{width:f,height:p,x:u,y:m},to:{width:f,height:p,x:u,y:m},duration:b,animationEasing:v,isActive:C},function(T){var N=T.width,O=T.height,E=T.x,P=T.y;return Y.createElement(kn,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,isActive:S,easing:v},Y.createElement("path",am({},He(n,!0),{className:k,d:YC(E,P,N,O,x),ref:a})))}):Y.createElement("path",am({},He(n,!0),{className:k,d:YC(u,m,f,p,x)}))},aW=["points","className","baseLinePoints","connectNulls"];function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ao.apply(this,arguments)}function sW(t,r){if(t==null)return{};var n=iW(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function iW(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function XC(t){return dW(t)||cW(t)||lW(t)||oW()}function oW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lW(t,r){if(t){if(typeof t=="string")return qv(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qv(t,r)}}function cW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dW(t){if(Array.isArray(t))return qv(t)}function qv(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}var JC=function(r){return r&&r.x===+r.x&&r.y===+r.y},uW=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return r.forEach(function(a){JC(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),JC(r[0])&&n[n.length-1].push(r[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},rc=function(r,n){var a=uW(r);n&&(a=[a.reduce(function(i,l){return[].concat(XC(i),XC(l))},[])]);var s=a.map(function(i){return i.reduce(function(l,d,u){return"".concat(l).concat(u===0?"M":"L").concat(d.x,",").concat(d.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},mW=function(r,n,a){var s=rc(r,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(rc(n.reverse(),a).slice(1))},fW=function(r){var n=r.points,a=r.className,s=r.baseLinePoints,i=r.connectNulls,l=sW(r,aW);if(!n||!n.length)return null;var d=st("recharts-polygon",a);if(s&&s.length){var u=l.stroke&&l.stroke!=="none",m=mW(n,s,i);return Y.createElement("g",{className:d},Y.createElement("path",ao({},He(l,!0),{fill:m.slice(-1)==="Z"?l.fill:"none",stroke:"none",d:m})),u?Y.createElement("path",ao({},He(l,!0),{fill:"none",d:rc(n,i)})):null,u?Y.createElement("path",ao({},He(l,!0),{fill:"none",d:rc(s,i)})):null)}var f=rc(n,i);return Y.createElement("path",ao({},He(l,!0),{fill:f.slice(-1)==="Z"?l.fill:"none",className:d,d:f}))};function zv(){return zv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},zv.apply(this,arguments)}var Yc=function(r){var n=r.cx,a=r.cy,s=r.r,i=r.className,l=st("recharts-dot",i);return n===+n&&a===+a&&s===+s?w.createElement("circle",zv({},He(r,!1),Au(r),{className:l,cx:n,cy:a,r:s})):null};function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_c(t)}var pW=["x","y","top","left","width","height","className"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Gv.apply(this,arguments)}function QC(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function hW(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QC(Object(n),!0).forEach(function(a){xW(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function xW(t,r,n){return r=gW(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function gW(t){var r=bW(t,"string");return _c(r)=="symbol"?r:r+""}function bW(t,r){if(_c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(_c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function vW(t,r){if(t==null)return{};var n=yW(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function yW(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}var jW=function(r,n,a,s,i,l){return"M".concat(r,",").concat(i,"v").concat(s,"M").concat(l,",").concat(n,"h").concat(a)},wW=function(r){var n=r.x,a=n===void 0?0:n,s=r.y,i=s===void 0?0:s,l=r.top,d=l===void 0?0:l,u=r.left,m=u===void 0?0:u,f=r.width,p=f===void 0?0:f,x=r.height,g=x===void 0?0:x,v=r.className,b=vW(r,pW),y=hW({x:a,y:i,top:d,left:m,width:p,height:g},b);return!Ce(a)||!Ce(i)||!Ce(p)||!Ce(g)||!Ce(d)||!Ce(m)?null:Y.createElement("path",Gv({},He(y,!0),{className:st("recharts-cross",v),d:jW(a,i,p,g,d,m)}))},Ib,ZC;function NW(){if(ZC)return Ib;ZC=1;var t=Qm(),r=xE(),n=pa();function a(s,i){return s&&s.length?t(s,n(i,2),r):void 0}return Ib=a,Ib}var SW=NW();const kW=wt(SW);var Mb,eA;function CW(){if(eA)return Mb;eA=1;var t=Qm(),r=pa(),n=gE();function a(s,i){return s&&s.length?t(s,r(i,2),n):void 0}return Mb=a,Mb}var AW=CW();const TW=wt(AW);var EW=["cx","cy","angle","ticks","axisLine"],OW=["ticks","tick","angle","tickFormatter","stroke"];function No(t){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},No(t)}function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},nc.apply(this,arguments)}function tA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Xs(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tA(Object(n),!0).forEach(function(a){rf(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rA(t,r){if(t==null)return{};var n=PW(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function PW(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function _W(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function nA(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,aO(a.key),a)}}function IW(t,r,n){return r&&nA(t.prototype,r),n&&nA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MW(t,r,n){return r=sm(r),LW(t,nO()?Reflect.construct(r,n||[],sm(t).constructor):r.apply(t,n))}function LW(t,r){if(r&&(No(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DW(t)}function DW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nO=function(){return!!t})()}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sm(t)}function RW(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Hv(t,r)}function Hv(t,r){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Hv(t,r)}function rf(t,r,n){return r=aO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function aO(t){var r=$W(t,"string");return No(r)=="symbol"?r:r+""}function $W(t,r){if(No(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(No(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nf=(function(t){function r(){return _W(this,r),MW(this,r,arguments)}return RW(r,t),IW(r,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,l=i.angle,d=i.cx,u=i.cy;return It(d,u,s,l)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.angle,d=a.ticks,u=kW(d,function(f){return f.coordinate||0}),m=TW(d,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:l,endAngle:l,innerRadius:m.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.angle,d=a.ticks,u=a.axisLine,m=rA(a,EW),f=d.reduce(function(v,b){return[Math.min(v[0],b.coordinate),Math.max(v[1],b.coordinate)]},[1/0,-1/0]),p=It(s,i,f[0],l),x=It(s,i,f[1],l),g=Xs(Xs(Xs({},He(m,!1)),{},{fill:"none"},He(u,!1)),{},{x1:p.x,y1:p.y,x2:x.x,y2:x.y});return Y.createElement("line",nc({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,l=s.tick,d=s.angle,u=s.tickFormatter,m=s.stroke,f=rA(s,OW),p=this.getTickTextAnchor(),x=He(f,!1),g=He(l,!1),v=i.map(function(b,y){var S=a.getTickValueCoord(b),C=Xs(Xs(Xs(Xs({textAnchor:p,transform:"rotate(".concat(90-d,", ").concat(S.x,", ").concat(S.y,")")},x),{},{stroke:"none",fill:m},g),{},{index:y},S),{},{payload:b});return Y.createElement(ct,nc({className:st("recharts-polar-radius-axis-tick",GE(l)),key:"tick-".concat(b.coordinate)},As(a.props,b,y)),r.renderTickItem(l,C,u?u(b.value,y):b.value))});return Y.createElement(ct,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,l=a.tick;return!s||!s.length?null:Y.createElement(ct,{className:st("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),xr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var l;return Y.isValidElement(a)?l=Y.cloneElement(a,s):Ze(a)?l=a(s):l=Y.createElement(ui,nc({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])})(w.PureComponent);rf(nf,"displayName","PolarRadiusAxis");rf(nf,"axisType","radiusAxis");rf(nf,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function So(t){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},So(t)}function ti(){return ti=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ti.apply(this,arguments)}function aA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Js(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?aA(Object(n),!0).forEach(function(a){af(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function FW(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function sA(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,iO(a.key),a)}}function BW(t,r,n){return r&&sA(t.prototype,r),n&&sA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function UW(t,r,n){return r=im(r),WW(t,sO()?Reflect.construct(r,n||[],im(t).constructor):r.apply(t,n))}function WW(t,r){if(r&&(So(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qW(t)}function qW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sO=function(){return!!t})()}function im(t){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},im(t)}function zW(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Vv(t,r)}function Vv(t,r){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Vv(t,r)}function af(t,r,n){return r=iO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function iO(t){var r=GW(t,"string");return So(r)=="symbol"?r:r+""}function GW(t,r){if(So(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(So(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var HW=Math.PI/180,iA=1e-5,sf=(function(t){function r(){return FW(this,r),UW(this,r,arguments)}return zW(r,t),BW(r,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,l=s.cy,d=s.radius,u=s.orientation,m=s.tickSize,f=m||8,p=It(i,l,d,a.coordinate),x=It(i,l,d+(u==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*HW),l;return i>iA?l=s==="outer"?"start":"end":i<-iA?l=s==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,l=a.radius,d=a.axisLine,u=a.axisLineType,m=Js(Js({},He(this.props,!1)),{},{fill:"none"},He(d,!1));if(u==="circle")return Y.createElement(Yc,ti({className:"recharts-polar-angle-axis-line"},m,{cx:s,cy:i,r:l}));var f=this.props.ticks,p=f.map(function(x){return It(s,i,l,x.coordinate)});return Y.createElement(fW,ti({className:"recharts-polar-angle-axis-line"},m,{points:p}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,l=s.tick,d=s.tickLine,u=s.tickFormatter,m=s.stroke,f=He(this.props,!1),p=He(l,!1),x=Js(Js({},f),{},{fill:"none"},He(d,!1)),g=i.map(function(v,b){var y=a.getTickLineCoord(v),S=a.getTickTextAnchor(v),C=Js(Js(Js({textAnchor:S},f),{},{stroke:"none",fill:m},p),{},{index:b,payload:v,x:y.x2,y:y.y2});return Y.createElement(ct,ti({className:st("recharts-polar-angle-axis-tick",GE(l)),key:"tick-".concat(v.coordinate)},As(a.props,v,b)),d&&Y.createElement("line",ti({className:"recharts-polar-angle-axis-tick-line"},x,y)),l&&r.renderTickItem(l,C,u?u(v.value,b):v.value))});return Y.createElement(ct,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,l=a.axisLine;return i<=0||!s||!s.length?null:Y.createElement(ct,{className:st("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var l;return Y.isValidElement(a)?l=Y.cloneElement(a,s):Ze(a)?l=a(s):l=Y.createElement(ui,ti({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])})(w.PureComponent);af(sf,"displayName","PolarAngleAxis");af(sf,"axisType","angleAxis");af(sf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Lb,oA;function kj(){if(oA)return Lb;oA=1;var t=fT(),r=t(Object.getPrototypeOf,Object);return Lb=r,Lb}var Db,lA;function oO(){if(lA)return Db;lA=1;var t=qa(),r=kj(),n=Xn(),a="[object Object]",s=Function.prototype,i=Object.prototype,l=s.toString,d=i.hasOwnProperty,u=l.call(Object);function m(f){if(!n(f)||t(f)!=a)return!1;var p=r(f);if(p===null)return!0;var x=d.call(p,"constructor")&&p.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==u}return Db=m,Db}var VW=oO();const KW=wt(VW);var Rb,cA;function YW(){if(cA)return Rb;cA=1;var t=qa(),r=Xn(),n="[object Boolean]";function a(s){return s===!0||s===!1||r(s)&&t(s)==n}return Rb=a,Rb}var XW=YW();const JW=wt(XW);function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ic(t)}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},om.apply(this,arguments)}function QW(t,r){return rq(t)||tq(t,r)||eq(t,r)||ZW()}function ZW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eq(t,r){if(t){if(typeof t=="string")return dA(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dA(t,r)}}function dA(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function tq(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function rq(t){if(Array.isArray(t))return t}function uA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function mA(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?uA(Object(n),!0).forEach(function(a){nq(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nq(t,r,n){return r=aq(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function aq(t){var r=sq(t,"string");return Ic(r)=="symbol"?r:r+""}function sq(t,r){if(Ic(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var fA=function(r,n,a,s,i){var l=a-s,d;return d="M ".concat(r,",").concat(n),d+="L ".concat(r+a,",").concat(n),d+="L ".concat(r+a-l/2,",").concat(n+i),d+="L ".concat(r+a-l/2-s,",").concat(n+i),d+="L ".concat(r,",").concat(n," Z"),d},iq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oq=function(r){var n=mA(mA({},iq),r),a=w.useRef(),s=w.useState(-1),i=QW(s,2),l=i[0],d=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var k=a.current.getTotalLength();k&&d(k)}catch{}},[]);var u=n.x,m=n.y,f=n.upperWidth,p=n.lowerWidth,x=n.height,g=n.className,v=n.animationEasing,b=n.animationDuration,y=n.animationBegin,S=n.isUpdateAnimationActive;if(u!==+u||m!==+m||f!==+f||p!==+p||x!==+x||f===0&&p===0||x===0)return null;var C=st("recharts-trapezoid",g);return S?Y.createElement(kn,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:x,x:u,y:m},to:{upperWidth:f,lowerWidth:p,height:x,x:u,y:m},duration:b,animationEasing:v,isActive:S},function(k){var T=k.upperWidth,N=k.lowerWidth,O=k.height,E=k.x,P=k.y;return Y.createElement(kn,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,easing:v},Y.createElement("path",om({},He(n,!0),{className:C,d:fA(E,P,T,N,O),ref:a})))}):Y.createElement("g",null,Y.createElement("path",om({},He(n,!0),{className:C,d:fA(u,m,f,p,x)})))},lq=["option","shapeType","propTransformer","activeClassName","isActive"];function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mc(t)}function cq(t,r){if(t==null)return{};var n=dq(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function dq(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function pA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function lm(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?pA(Object(n),!0).forEach(function(a){uq(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function uq(t,r,n){return r=mq(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function mq(t){var r=fq(t,"string");return Mc(r)=="symbol"?r:r+""}function fq(t,r){if(Mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Mc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function pq(t,r){return lm(lm({},r),t)}function hq(t,r){return t==="symbols"}function hA(t){var r=t.shapeType,n=t.elementProps;switch(r){case"rectangle":return Y.createElement(Sj,n);case"trapezoid":return Y.createElement(oq,n);case"sector":return Y.createElement(YE,n);case"symbols":if(hq(r))return Y.createElement(Dy,n);break;default:return null}}function lO(t){return w.isValidElement(t)?t.props:t}function Cj(t){var r=t.option,n=t.shapeType,a=t.propTransformer,s=a===void 0?pq:a,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,d=t.isActive,u=cq(t,lq),m;if(w.isValidElement(r))m=w.cloneElement(r,lm(lm({},u),lO(r)));else if(Ze(r))m=r(u);else if(KW(r)&&!JW(r)){var f=s(r,u);m=Y.createElement(hA,{shapeType:n,elementProps:f})}else{var p=u;m=Y.createElement(hA,{shapeType:n,elementProps:p})}return d?Y.createElement(ct,{className:l},m):m}function of(t,r){return r!=null&&"trapezoids"in t.props}function lf(t,r){return r!=null&&"sectors"in t.props}function Lc(t,r){return r!=null&&"points"in t.props}function xq(t,r){var n,a,s=t.x===(r==null||(n=r.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===r.x,i=t.y===(r==null||(a=r.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===r.y;return s&&i}function gq(t,r){var n=t.endAngle===r.endAngle,a=t.startAngle===r.startAngle;return n&&a}function bq(t,r){var n=t.x===r.x,a=t.y===r.y,s=t.z===r.z;return n&&a&&s}function vq(t,r){var n;return of(t,r)?n=xq:lf(t,r)?n=gq:Lc(t,r)&&(n=bq),n}function yq(t,r){var n;return of(t,r)?n="trapezoids":lf(t,r)?n="sectors":Lc(t,r)&&(n="points"),n}function jq(t,r){if(of(t,r)){var n;return(n=r.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(lf(t,r)){var a;return(a=r.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Lc(t,r)?r.payload:{}}function wq(t){var r=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,s=yq(n,r),i=jq(n,r),l=a.filter(function(u,m){var f=Ts(i,u),p=n.props[s].filter(function(v){var b=vq(n,r);return b(v,r)}),x=n.props[s].indexOf(p[p.length-1]),g=m===x;return f&&g}),d=a.indexOf(l[l.length-1]);return d}var Nu;function ko(t){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ko(t)}function so(){return so=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},so.apply(this,arguments)}function xA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Pt(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?xA(Object(n),!0).forEach(function(a){jn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Nq(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function gA(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,dO(a.key),a)}}function Sq(t,r,n){return r&&gA(t.prototype,r),n&&gA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kq(t,r,n){return r=cm(r),Cq(t,cO()?Reflect.construct(r,n||[],cm(t).constructor):r.apply(t,n))}function Cq(t,r){if(r&&(ko(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aq(t)}function Aq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cO=function(){return!!t})()}function cm(t){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cm(t)}function Tq(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Kv(t,r)}function Kv(t,r){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Kv(t,r)}function jn(t,r,n){return r=dO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function dO(t){var r=Eq(t,"string");return ko(r)=="symbol"?r:r+""}function Eq(t,r){if(ko(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(ko(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var En=(function(t){function r(n){var a;return Nq(this,r),a=kq(this,r,[n]),jn(a,"pieRef",null),jn(a,"sectorRefs",[]),jn(a,"id",gi("recharts-pie-")),jn(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Ze(s)&&s()}),jn(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Ze(s)&&s()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return Tq(r,t),Sq(r,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,d=i.labelLine,u=i.dataKey,m=i.valueKey,f=He(this.props,!1),p=He(l,!1),x=He(d,!1),g=l&&l.offsetRadius||20,v=a.map(function(b,y){var S=(b.startAngle+b.endAngle)/2,C=It(b.cx,b.cy,b.outerRadius+g,S),k=Pt(Pt(Pt(Pt({},f),b),{},{stroke:"none"},p),{},{index:y,textAnchor:r.getTextAnchor(C.x,b.cx)},C),T=Pt(Pt(Pt(Pt({},f),b),{},{fill:"none",stroke:b.fill},x),{},{index:y,points:[It(b.cx,b.cy,b.outerRadius,S),C]}),N=u;return nt(u)&&nt(m)?N="value":nt(u)&&(N=m),Y.createElement(ct,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(y)},d&&r.renderLabelLineItem(d,T,"line"),r.renderLabelItem(l,k,Ft(b,N)))});return Y.createElement(ct,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,l=i.activeShape,d=i.blendStroke,u=i.inactiveShape;return a.map(function(m,f){if(m?.startAngle===0&&m?.endAngle===0&&a.length!==1)return null;var p=s.isActiveIndex(f),x=u&&s.hasActiveIndex()?u:null,g=p?l:x,v=Pt(Pt({},m),{},{stroke:d?m.fill:m.stroke,tabIndex:-1});return Y.createElement(ct,so({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},As(s.props,m,f),{key:"sector-".concat(m?.startAngle,"-").concat(m?.endAngle,"-").concat(m.midAngle,"-").concat(f)}),Y.createElement(Cj,so({option:g,isActive:p,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,m=s.animationEasing,f=s.animationId,p=this.state,x=p.prevSectors,g=p.prevIsAnimationActive;return Y.createElement(kn,{begin:d,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var b=v.t,y=[],S=i&&i[0],C=S.startAngle;return i.forEach(function(k,T){var N=x&&x[T],O=T>0?sn(k,"paddingAngle",0):0;if(N){var E=Ct(N.endAngle-N.startAngle,k.endAngle-k.startAngle),P=Pt(Pt({},k),{},{startAngle:C+O,endAngle:C+E(b)+O});y.push(P),C=P.endAngle}else{var I=k.endAngle,M=k.startAngle,D=Ct(0,I-M),U=D(b),F=Pt(Pt({},k),{},{startAngle:C+O,endAngle:C+U+O});y.push(F),C=F.endAngle}}),Y.createElement(ct,null,a.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"ArrowRight":{var d=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[d].focus(),s.setState({sectorToFocus:d});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,l=this.state.prevSectors;return i&&s&&s.length&&(!l||!Ts(l,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,l=s.sectors,d=s.className,u=s.label,m=s.cx,f=s.cy,p=s.innerRadius,x=s.outerRadius,g=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!l||!l.length||!Ce(m)||!Ce(f)||!Ce(p)||!Ce(x))return null;var b=st("recharts-pie",d);return Y.createElement(ct,{tabIndex:this.props.rootTabIndex,className:b,ref:function(S){a.pieRef=S}},this.renderSectors(),u&&this.renderLabels(l),xr.renderCallByParent(this.props,null,!1),(!g||v)&&on.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(Y.isValidElement(a))return Y.cloneElement(a,s);if(Ze(a))return a(s);var l=st("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Y.createElement(di,so({},s,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(a,s,i){if(Y.isValidElement(a))return Y.cloneElement(a,s);var l=i;if(Ze(a)&&(l=a(s),Y.isValidElement(l)))return l;var d=st("recharts-pie-label-text",typeof a!="boolean"&&!Ze(a)?a.className:"");return Y.createElement(ui,so({},s,{alignmentBaseline:"middle",className:d}),l)}}])})(w.PureComponent);Nu=En;jn(En,"displayName","Pie");jn(En,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!za.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});jn(En,"parseDeltaAngle",function(t,r){var n=Mr(r-t),a=Math.min(Math.abs(r-t),360);return n*a});jn(En,"getRealPieData",function(t){var r=t.data,n=t.children,a=He(t,!1),s=Yr(n,Hn);return r&&r.length?r.map(function(i,l){return Pt(Pt(Pt({payload:i},a),i),s&&s[l]&&s[l].props)}):s&&s.length?s.map(function(i){return Pt(Pt({},a),i.props)}):[]});jn(En,"parseCoordinateOfPie",function(t,r){var n=r.top,a=r.left,s=r.width,i=r.height,l=zE(s,i),d=a+Lr(t.cx,s,s/2),u=n+Lr(t.cy,i,i/2),m=Lr(t.innerRadius,l,0),f=Lr(t.outerRadius,l,l*.8),p=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:d,cy:u,innerRadius:m,outerRadius:f,maxRadius:p}});jn(En,"getComposedData",function(t){var r=t.item,n=t.offset,a=r.type.defaultProps!==void 0?Pt(Pt({},r.type.defaultProps),r.props):r.props,s=Nu.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,l=a.startAngle,d=a.endAngle,u=a.paddingAngle,m=a.dataKey,f=a.nameKey,p=a.valueKey,x=a.tooltipType,g=Math.abs(a.minAngle),v=Nu.parseCoordinateOfPie(a,n),b=Nu.parseDeltaAngle(l,d),y=Math.abs(b),S=m;nt(m)&&nt(p)?(Gn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S="value"):nt(m)&&(Gn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),S=p);var C=s.filter(function(P){return Ft(P,S,0)!==0}).length,k=(y>=360?C:C-1)*u,T=y-C*g-k,N=s.reduce(function(P,I){var M=Ft(I,S,0);return P+(Ce(M)?M:0)},0),O;if(N>0){var E;O=s.map(function(P,I){var M=Ft(P,S,0),D=Ft(P,f,I),U=(Ce(M)?M:0)/N,F;I?F=E.endAngle+Mr(b)*u*(M!==0?1:0):F=l;var W=F+Mr(b)*((M!==0?g:0)+U*T),$=(F+W)/2,H=(v.innerRadius+v.outerRadius)/2,z=[{name:D,value:M,payload:P,dataKey:S,type:x}],q=It(v.cx,v.cy,H,$);return E=Pt(Pt(Pt({percent:U,cornerRadius:i,name:D,tooltipPayload:z,midAngle:$,middleRadius:H,tooltipPosition:q},P),v),{},{value:Ft(P,S),startAngle:F,endAngle:W,payload:P,paddingAngle:Mr(b)*u}),E})}return Pt(Pt({},v),{},{sectors:O,data:s})});var $b,bA;function Oq(){if(bA)return $b;bA=1;var t=Math.ceil,r=Math.max;function n(a,s,i,l){for(var d=-1,u=r(t((s-a)/(i||1)),0),m=Array(u);u--;)m[l?u:++d]=a,a+=i;return m}return $b=n,$b}var Fb,vA;function uO(){if(vA)return Fb;vA=1;var t=PT(),r=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=t(s),s===r||s===-r){var i=s<0?-1:1;return i*n}return s===s?s:0}return Fb=a,Fb}var Bb,yA;function Pq(){if(yA)return Bb;yA=1;var t=Oq(),r=Gm(),n=uO();function a(s){return function(i,l,d){return d&&typeof d!="number"&&r(i,l,d)&&(l=d=void 0),i=n(i),l===void 0?(l=i,i=0):l=n(l),d=d===void 0?i<l?1:-1:n(d),t(i,l,d,s)}}return Bb=a,Bb}var Ub,jA;function _q(){if(jA)return Ub;jA=1;var t=Pq(),r=t();return Ub=r,Ub}var Iq=_q();const dm=wt(Iq);function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dc(t)}function wA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function NA(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wA(Object(n),!0).forEach(function(a){mO(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function mO(t,r,n){return r=Mq(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Mq(t){var r=Lq(t,"string");return Dc(r)=="symbol"?r:r+""}function Lq(t,r){if(Dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Dq=["Webkit","Moz","O","ms"],Rq=function(r,n){var a=r.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Dq.reduce(function(i,l){return NA(NA({},i),{},mO({},l+a,n))},{});return s[r]=n,s};function Co(t){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Co(t)}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},um.apply(this,arguments)}function SA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Wb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?SA(Object(n),!0).forEach(function(a){rn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $q(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function kA(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,pO(a.key),a)}}function Fq(t,r,n){return r&&kA(t.prototype,r),n&&kA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bq(t,r,n){return r=mm(r),Uq(t,fO()?Reflect.construct(r,n||[],mm(t).constructor):r.apply(t,n))}function Uq(t,r){if(r&&(Co(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wq(t)}function Wq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fO=function(){return!!t})()}function mm(t){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mm(t)}function qq(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Yv(t,r)}function Yv(t,r){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Yv(t,r)}function rn(t,r,n){return r=pO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function pO(t){var r=zq(t,"string");return Co(r)=="symbol"?r:r+""}function zq(t,r){if(Co(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Co(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gq=function(r){var n=r.data,a=r.startIndex,s=r.endIndex,i=r.x,l=r.width,d=r.travellerWidth;if(!n||!n.length)return{};var u=n.length,m=Zl().domain(dm(0,u)).range([i,i+l-d]),f=m.domain().map(function(p){return m(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:m(a),endX:m(s),scale:m,scaleValues:f}},CA=function(r){return r.changedTouches&&!!r.changedTouches.length},Ao=(function(t){function r(n){var a;return $q(this,r),a=Bq(this,r,[n]),rn(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),rn(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),rn(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,l=s.onDragEnd,d=s.startIndex;l?.({endIndex:i,startIndex:d})}),a.detachDragEndListener()}),rn(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),rn(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),rn(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),rn(a,"handleSlideDragStart",function(s){var i=CA(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return qq(r,t),Fq(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,l=this.state.scaleValues,d=this.props,u=d.gap,m=d.data,f=m.length-1,p=Math.min(s,i),x=Math.max(s,i),g=r.getIndexInRange(l,p),v=r.getIndexInRange(l,x);return{startIndex:g-g%u,endIndex:v===f?f:v-v%u}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,l=s.tickFormatter,d=s.dataKey,u=Ft(i[a],d,a);return Ze(l)?l(u,a):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,l=s.startX,d=s.endX,u=this.props,m=u.x,f=u.width,p=u.travellerWidth,x=u.startIndex,g=u.endIndex,v=u.onChange,b=a.pageX-i;b>0?b=Math.min(b,m+f-p-d,m+f-p-l):b<0&&(b=Math.max(b,m-l,m-d));var y=this.getIndex({startX:l+b,endX:d+b});(y.startIndex!==x||y.endIndex!==g)&&v&&v(y),this.setState({startX:l+b,endX:d+b,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=CA(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,l=s.movingTravellerId,d=s.endX,u=s.startX,m=this.state[l],f=this.props,p=f.x,x=f.width,g=f.travellerWidth,v=f.onChange,b=f.gap,y=f.data,S={startX:this.state.startX,endX:this.state.endX},C=a.pageX-i;C>0?C=Math.min(C,p+x-g-m):C<0&&(C=Math.max(C,p-m)),S[l]=m+C;var k=this.getIndex(S),T=k.startIndex,N=k.endIndex,O=function(){var P=y.length-1;return l==="startX"&&(d>u?T%b===0:N%b===0)||d<u&&N===P||l==="endX"&&(d>u?N%b===0:T%b===0)||d>u&&N===P};this.setState(rn(rn({},l,m+C),"brushMoveStartX",a.pageX),function(){v&&O()&&v(k)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,l=this.state,d=l.scaleValues,u=l.startX,m=l.endX,f=this.state[s],p=d.indexOf(f);if(p!==-1){var x=p+a;if(!(x===-1||x>=d.length)){var g=d[x];s==="startX"&&g>=m||s==="endX"&&g<=u||this.setState(rn({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.fill,m=a.stroke;return Y.createElement("rect",{stroke:m,fill:u,x:s,y:i,width:l,height:d})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.data,m=a.children,f=a.padding,p=w.Children.only(m);return p?Y.cloneElement(p,{x:s,y:i,width:l,height:d,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,l,d=this,u=this.props,m=u.y,f=u.travellerWidth,p=u.height,x=u.traveller,g=u.ariaLabel,v=u.data,b=u.startIndex,y=u.endIndex,S=Math.max(a,this.props.x),C=Wb(Wb({},He(this.props,!1)),{},{x:S,y:m,width:f,height:p}),k=g||"Min value: ".concat((i=v[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=v[y])===null||l===void 0?void 0:l.name);return Y.createElement(ct,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),d.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(x,C))}},{key:"renderSlide",value:function(a,s){var i=this.props,l=i.y,d=i.height,u=i.stroke,m=i.travellerWidth,f=Math.min(a,s)+m,p=Math.max(Math.abs(s-a)-m,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:l,width:p,height:d})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,l=a.y,d=a.height,u=a.travellerWidth,m=a.stroke,f=this.state,p=f.startX,x=f.endX,g=5,v={pointerEvents:"none",fill:m};return Y.createElement(ct,{className:"recharts-brush-texts"},Y.createElement(ui,um({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,x)-g,y:l+d/2},v),this.getTextOfTick(s)),Y.createElement(ui,um({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,x)+u+g,y:l+d/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,l=a.children,d=a.x,u=a.y,m=a.width,f=a.height,p=a.alwaysShowText,x=this.state,g=x.startX,v=x.endX,b=x.isTextActive,y=x.isSlideMoving,S=x.isTravellerMoving,C=x.isTravellerFocused;if(!s||!s.length||!Ce(d)||!Ce(u)||!Ce(m)||!Ce(f)||m<=0||f<=0)return null;var k=st("recharts-brush",i),T=Y.Children.count(l)===1,N=Rq("userSelect","none");return Y.createElement(ct,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(g,v),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(v,"endX"),(b||y||S||C||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,l=a.width,d=a.height,u=a.stroke,m=Math.floor(i+d/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:s,y:i,width:l,height:d,fill:u,stroke:"none"}),Y.createElement("line",{x1:s+1,y1:m,x2:s+l-1,y2:m,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:s+1,y1:m+2,x2:s+l-1,y2:m+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return Y.isValidElement(a)?i=Y.cloneElement(a,s):Ze(a)?i=a(s):i=r.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,l=a.width,d=a.x,u=a.travellerWidth,m=a.updateId,f=a.startIndex,p=a.endIndex;if(i!==s.prevData||m!==s.prevUpdateId)return Wb({prevData:i,prevTravellerWidth:u,prevUpdateId:m,prevX:d,prevWidth:l},i&&i.length?Gq({data:i,width:l,x:d,travellerWidth:u,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||d!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([d,d+l-u]);var x=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:m,prevX:d,prevWidth:l,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,l=0,d=i-1;d-l>1;){var u=Math.floor((l+d)/2);a[u]>s?d=u:l=u}return s>=a[d]?d:l}}])})(w.PureComponent);rn(Ao,"displayName","Brush");rn(Ao,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var qb,AA;function Hq(){if(AA)return qb;AA=1;var t=Xy();function r(n,a){var s;return t(n,function(i,l,d){return s=a(i,l,d),!s}),!!s}return qb=r,qb}var zb,TA;function Vq(){if(TA)return zb;TA=1;var t=sT(),r=pa(),n=Hq(),a=$r(),s=Gm();function i(l,d,u){var m=a(l)?t:n;return u&&s(l,d,u)&&(d=void 0),m(l,r(d,3))}return zb=i,zb}var Kq=Vq();const Yq=wt(Kq);var ca=function(r,n){var a=r.alwaysShow,s=r.ifOverflow;return a&&(s="extendDomain"),s===n},Gb,EA;function Aj(){if(EA)return Gb;EA=1;var t=kT();function r(n,a,s){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return Gb=r,Gb}var Hb,OA;function Xq(){if(OA)return Hb;OA=1;var t=Aj(),r=wT(),n=pa();function a(s,i){var l={};return i=n(i,3),r(s,function(d,u,m){t(l,u,i(d,u,m))}),l}return Hb=a,Hb}var Jq=Xq();const Qq=wt(Jq);var Vb,PA;function Zq(){if(PA)return Vb;PA=1;function t(r,n){for(var a=-1,s=r==null?0:r.length;++a<s;)if(!n(r[a],a,r))return!1;return!0}return Vb=t,Vb}var Kb,_A;function ez(){if(_A)return Kb;_A=1;var t=Xy();function r(n,a){var s=!0;return t(n,function(i,l,d){return s=!!a(i,l,d),s}),s}return Kb=r,Kb}var Yb,IA;function tz(){if(IA)return Yb;IA=1;var t=Zq(),r=ez(),n=pa(),a=$r(),s=Gm();function i(l,d,u){var m=a(l)?t:r;return u&&s(l,d,u)&&(d=void 0),m(l,n(d,3))}return Yb=i,Yb}var rz=tz();const hO=wt(rz);var nz=["x","y"];function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rc(t)}function Xv(){return Xv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Xv.apply(this,arguments)}function MA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function ql(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?MA(Object(n),!0).forEach(function(a){az(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function az(t,r,n){return r=sz(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function sz(t){var r=iz(t,"string");return Rc(r)=="symbol"?r:r+""}function iz(t,r){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Rc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function oz(t,r){if(t==null)return{};var n=lz(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function lz(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function cz(t,r){var n=t.x,a=t.y,s=oz(t,nz),i="".concat(n),l=parseInt(i,10),d="".concat(a),u=parseInt(d,10),m="".concat(r.height||s.height),f=parseInt(m,10),p="".concat(r.width||s.width),x=parseInt(p,10);return ql(ql(ql(ql(ql({},r),s),l?{x:l}:{}),u?{y:u}:{}),{},{height:f,width:x,name:r.name,radius:r.radius})}function LA(t){return Y.createElement(Cj,Xv({shapeType:"rectangle",propTransformer:cz,activeClassName:"recharts-active-bar"},t))}var dz=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof r=="number")return r;var i=Ce(a)||JI(a);return i?r(a,s):(i||fi(),n)}},uz=["value","background"],xO;function To(t){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},To(t)}function mz(t,r){if(t==null)return{};var n=fz(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function fz(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},fm.apply(this,arguments)}function DA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function er(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?DA(Object(n),!0).forEach(function(a){Ns(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pz(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function RA(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,bO(a.key),a)}}function hz(t,r,n){return r&&RA(t.prototype,r),n&&RA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xz(t,r,n){return r=pm(r),gz(t,gO()?Reflect.construct(r,n||[],pm(t).constructor):r.apply(t,n))}function gz(t,r){if(r&&(To(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bz(t)}function bz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gO=function(){return!!t})()}function pm(t){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pm(t)}function vz(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Jv(t,r)}function Jv(t,r){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Jv(t,r)}function Ns(t,r,n){return r=bO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function bO(t){var r=yz(t,"string");return To(r)=="symbol"?r:r+""}function yz(t,r){if(To(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(To(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vn=(function(t){function r(){var n;pz(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xz(this,r,[].concat(s)),Ns(n,"state",{isAnimationFinished:!1}),Ns(n,"id",gi("recharts-bar-")),Ns(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),Ns(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return vz(r,t),hz(r,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,l=i.shape,d=i.dataKey,u=i.activeIndex,m=i.activeBar,f=He(this.props,!1);return a&&a.map(function(p,x){var g=x===u,v=g?m:l,b=er(er(er({},f),p),{},{isActive:g,option:v,index:x,dataKey:d,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Y.createElement(ct,fm({className:"recharts-bar-rectangle"},As(s.props,p,x),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(x)}),Y.createElement(LA,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,l=s.layout,d=s.isAnimationActive,u=s.animationBegin,m=s.animationDuration,f=s.animationEasing,p=s.animationId,x=this.state.prevData;return Y.createElement(kn,{begin:u,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var v=g.t,b=i.map(function(y,S){var C=x&&x[S];if(C){var k=Ct(C.x,y.x),T=Ct(C.y,y.y),N=Ct(C.width,y.width),O=Ct(C.height,y.height);return er(er({},y),{},{x:k(v),y:T(v),width:N(v),height:O(v)})}if(l==="horizontal"){var E=Ct(0,y.height),P=E(v);return er(er({},y),{},{y:y.y+y.height-P,height:P})}var I=Ct(0,y.width),M=I(v);return er(er({},y),{},{width:M})});return Y.createElement(ct,null,a.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,l=this.state.prevData;return i&&s&&s.length&&(!l||!Ts(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,l=s.dataKey,d=s.activeIndex,u=He(this.props.background,!1);return i.map(function(m,f){m.value;var p=m.background,x=mz(m,uz);if(!p)return null;var g=er(er(er(er(er({},x),{},{fill:"#eee"},p),u),As(a.props,m,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:f,className:"recharts-bar-background-rectangle"});return Y.createElement(LA,fm({key:"background-bar-".concat(f),option:a.props.background,isActive:f===d},g))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,d=i.xAxis,u=i.yAxis,m=i.layout,f=i.children,p=Yr(f,Kc);if(!p)return null;var x=m==="vertical"?l[0].height/2:l[0].width/2,g=function(y,S){var C=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:C,errorVal:Ft(y,S)}},v={clipPath:a?"url(#clipPath-".concat(s,")"):null};return Y.createElement(ct,v,p.map(function(b){return Y.cloneElement(b,{key:"error-bar-".concat(s,"-").concat(b.props.dataKey),data:l,xAxis:d,yAxis:u,layout:m,offset:x,dataPointFormatter:g})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,l=a.className,d=a.xAxis,u=a.yAxis,m=a.left,f=a.top,p=a.width,x=a.height,g=a.isAnimationActive,v=a.background,b=a.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,S=st("recharts-bar",l),C=d&&d.allowDataOverflow,k=u&&u.allowDataOverflow,T=C||k,N=nt(b)?this.id:b;return Y.createElement(ct,{className:S},C||k?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(N)},Y.createElement("rect",{x:C?m:m-p/2,y:k?f:f-x/2,width:C?p:p*2,height:k?x:x*2}))):null,Y.createElement(ct,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,N),(!g||y)&&on.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(w.PureComponent);xO=Vn;Ns(Vn,"displayName","Bar");Ns(Vn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!za.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ns(Vn,"getComposedData",function(t){var r=t.props,n=t.item,a=t.barPosition,s=t.bandSize,i=t.xAxis,l=t.yAxis,d=t.xAxisTicks,u=t.yAxisTicks,m=t.stackedData,f=t.dataStartIndex,p=t.displayedData,x=t.offset,g=ZF(a,n);if(!g)return null;var v=r.layout,b=n.type.defaultProps,y=b!==void 0?er(er({},b),n.props):n.props,S=y.dataKey,C=y.children,k=y.minPointSize,T=v==="horizontal"?l:i,N=m?T.scale.domain():null,O=i9({numericAxis:T}),E=Yr(C,Hn),P=p.map(function(I,M){var D,U,F,W,$,H;m?D=e9(m[f+M],N):(D=Ft(I,S),Array.isArray(D)||(D=[O,D]));var z=dz(k,xO.defaultProps.minPointSize)(D[1],M);if(v==="horizontal"){var q,Q=[l.scale(D[0]),l.scale(D[1])],ee=Q[0],R=Q[1];U=lC({axis:i,ticks:d,bandSize:s,offset:g.offset,entry:I,index:M}),F=(q=R??ee)!==null&&q!==void 0?q:void 0,W=g.size;var L=ee-R;if($=Number.isNaN(L)?0:L,H={x:U,y:l.y,width:W,height:l.height},Math.abs(z)>0&&Math.abs($)<Math.abs(z)){var G=Mr($||z)*(Math.abs(z)-Math.abs($));F-=G,$+=G}}else{var K=[i.scale(D[0]),i.scale(D[1])],ie=K[0],xe=K[1];if(U=ie,F=lC({axis:l,ticks:u,bandSize:s,offset:g.offset,entry:I,index:M}),W=xe-ie,$=g.size,H={x:i.x,y:F,width:i.width,height:$},Math.abs(z)>0&&Math.abs(W)<Math.abs(z)){var pe=Mr(W||z)*(Math.abs(z)-Math.abs(W));W+=pe}}return er(er(er({},I),{},{x:U,y:F,width:W,height:$,value:m?D:D[1],payload:I,background:H},E&&E[M]&&E[M].props),{},{tooltipPayload:[WE(n,I)],tooltipPosition:{x:U+W/2,y:F+$/2}})});return er({data:P,layout:v},x)});function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$c(t)}function jz(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $A(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,vO(a.key),a)}}function wz(t,r,n){return r&&$A(t.prototype,r),n&&$A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Wn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?FA(Object(n),!0).forEach(function(a){cf(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function cf(t,r,n){return r=vO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function vO(t){var r=Nz(t,"string");return $c(r)=="symbol"?r:r+""}function Nz(t,r){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if($c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Tj=function(r,n,a,s,i){var l=r.width,d=r.height,u=r.layout,m=r.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:d-a.bottom,bottomMirror:d-a.bottom},x=!!nn(m,Vn);return f.reduce(function(g,v){var b=n[v],y=b.orientation,S=b.domain,C=b.padding,k=C===void 0?{}:C,T=b.mirror,N=b.reversed,O="".concat(y).concat(T?"Mirror":""),E,P,I,M,D;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var U=S[1]-S[0],F=1/0,W=b.categoricalDomain.sort(eM);if(W.forEach(function(K,ie){ie>0&&(F=Math.min((K||0)-(W[ie-1]||0),F))}),Number.isFinite(F)){var $=F/U,H=b.layout==="vertical"?a.height:a.width;if(b.padding==="gap"&&(E=$*H/2),b.padding==="no-gap"){var z=Lr(r.barCategoryGap,$*H),q=$*H/2;E=q-z-(q-z)/H*z}}}s==="xAxis"?P=[a.left+(k.left||0)+(E||0),a.left+a.width-(k.right||0)-(E||0)]:s==="yAxis"?P=u==="horizontal"?[a.top+a.height-(k.bottom||0),a.top+(k.top||0)]:[a.top+(k.top||0)+(E||0),a.top+a.height-(k.bottom||0)-(E||0)]:P=b.range,N&&(P=[P[1],P[0]]);var Q=$E(b,i,x),ee=Q.scale,R=Q.realScaleType;ee.domain(S).range(P),FE(ee);var L=BE(ee,Wn(Wn({},b),{},{realScaleType:R}));s==="xAxis"?(D=y==="top"&&!T||y==="bottom"&&T,I=a.left,M=p[O]-D*b.height):s==="yAxis"&&(D=y==="left"&&!T||y==="right"&&T,I=p[O]-D*b.width,M=a.top);var G=Wn(Wn(Wn({},b),L),{},{realScaleType:R,x:I,y:M,scale:ee,width:s==="xAxis"?a.width:b.width,height:s==="yAxis"?a.height:b.height});return G.bandSize=Qu(G,L),!b.hide&&s==="xAxis"?p[O]+=(D?-1:1)*G.height:b.hide||(p[O]+=(D?-1:1)*G.width),Wn(Wn({},g),{},cf({},v,G))},{})},yO=function(r,n){var a=r.x,s=r.y,i=n.x,l=n.y;return{x:Math.min(a,i),y:Math.min(s,l),width:Math.abs(i-a),height:Math.abs(l-s)}},Sz=function(r){var n=r.x1,a=r.y1,s=r.x2,i=r.y2;return yO({x:n,y:a},{x:s,y:i})},jO=(function(){function t(r){jz(this,t),this.scale=r}return wz(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(n)+d}default:return this.scale(n)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])})();cf(jO,"EPS",1e-4);var Ej=function(r){var n=Object.keys(r).reduce(function(a,s){return Wn(Wn({},a),{},cf({},s,jO.create(r[s])))},{});return Wn(Wn({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,d=i.position;return Qq(s,function(u,m){return n[m].apply(u,{bandAware:l,position:d})})},isInRange:function(s){return hO(s,function(i,l){return n[l].isInRange(i)})}})};function kz(t){return(t%180+180)%180}var Cz=function(r){var n=r.width,a=r.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=kz(s),l=i*Math.PI/180,d=Math.atan(a/n),u=l>d&&l<Math.PI-d?a/Math.sin(l):n/Math.cos(l);return Math.abs(u)},Xb,BA;function Az(){if(BA)return Xb;BA=1;var t=pa(),r=Ho(),n=Vo();function a(s){return function(i,l,d){var u=Object(i);if(!r(i)){var m=t(l,3);i=n(i),l=function(p){return m(u[p],p,u)}}var f=s(i,l,d);return f>-1?u[m?i[f]:f]:void 0}}return Xb=a,Xb}var Jb,UA;function Tz(){if(UA)return Jb;UA=1;var t=uO();function r(n){var a=t(n),s=a%1;return a===a?s?a-s:a:0}return Jb=r,Jb}var Qb,WA;function Ez(){if(WA)return Qb;WA=1;var t=bT(),r=pa(),n=Tz(),a=Math.max;function s(i,l,d){var u=i==null?0:i.length;if(!u)return-1;var m=d==null?0:n(d);return m<0&&(m=a(u+m,0)),t(i,r(l,3),m)}return Qb=s,Qb}var Zb,qA;function Oz(){if(qA)return Zb;qA=1;var t=Az(),r=Ez(),n=t(r);return Zb=n,Zb}var Pz=Oz();const _z=wt(Pz);var Iz=P3();const Mz=wt(Iz);var Lz=Mz(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Oj=w.createContext(void 0),Pj=w.createContext(void 0),wO=w.createContext(void 0),NO=w.createContext({}),SO=w.createContext(void 0),kO=w.createContext(0),CO=w.createContext(0),zA=function(r){var n=r.state,a=n.xAxisMap,s=n.yAxisMap,i=n.offset,l=r.clipPathId,d=r.children,u=r.width,m=r.height,f=Lz(i);return Y.createElement(Oj.Provider,{value:a},Y.createElement(Pj.Provider,{value:s},Y.createElement(NO.Provider,{value:i},Y.createElement(wO.Provider,{value:f},Y.createElement(SO.Provider,{value:l},Y.createElement(kO.Provider,{value:m},Y.createElement(CO.Provider,{value:u},d)))))))},Dz=function(){return w.useContext(SO)},AO=function(r){var n=w.useContext(Oj);n==null&&fi();var a=n[r];return a==null&&fi(),a},Rz=function(){var r=w.useContext(Oj);return ys(r)},$z=function(){var r=w.useContext(Pj),n=_z(r,function(a){return hO(a.domain,Number.isFinite)});return n||ys(r)},TO=function(r){var n=w.useContext(Pj);n==null&&fi();var a=n[r];return a==null&&fi(),a},Fz=function(){var r=w.useContext(wO);return r},Bz=function(){return w.useContext(NO)},_j=function(){return w.useContext(CO)},Ij=function(){return w.useContext(kO)};function Eo(t){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Eo(t)}function Uz(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Wz(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OO(a.key),a)}}function qz(t,r,n){return r&&Wz(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zz(t,r,n){return r=hm(r),Gz(t,EO()?Reflect.construct(r,n||[],hm(t).constructor):r.apply(t,n))}function Gz(t,r){if(r&&(Eo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hz(t)}function Hz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EO=function(){return!!t})()}function hm(t){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hm(t)}function Vz(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Qv(t,r)}function Qv(t,r){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Qv(t,r)}function GA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function HA(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?GA(Object(n),!0).forEach(function(a){Mj(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Mj(t,r,n){return r=OO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function OO(t){var r=Kz(t,"string");return Eo(r)=="symbol"?r:r+""}function Kz(t,r){if(Eo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Eo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yz(t,r){return Zz(t)||Qz(t,r)||Jz(t,r)||Xz()}function Xz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jz(t,r){if(t){if(typeof t=="string")return VA(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VA(t,r)}}function VA(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function Qz(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function Zz(t){if(Array.isArray(t))return t}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Zv.apply(this,arguments)}var eG=function(r,n){var a;return Y.isValidElement(r)?a=Y.cloneElement(r,n):Ze(r)?a=r(n):a=Y.createElement("line",Zv({},n,{className:"recharts-reference-line-line"})),a},tG=function(r,n,a,s,i,l,d,u,m){var f=i.x,p=i.y,x=i.width,g=i.height;if(a){var v=m.y,b=r.y.apply(v,{position:l});if(ca(m,"discard")&&!r.y.isInRange(b))return null;var y=[{x:f+x,y:b},{x:f,y:b}];return u==="left"?y.reverse():y}if(n){var S=m.x,C=r.x.apply(S,{position:l});if(ca(m,"discard")&&!r.x.isInRange(C))return null;var k=[{x:C,y:p+g},{x:C,y:p}];return d==="top"?k.reverse():k}if(s){var T=m.segment,N=T.map(function(O){return r.apply(O,{position:l})});return ca(m,"discard")&&Yq(N,function(O){return!r.isInRange(O)})?null:N}return null};function rG(t){var r=t.x,n=t.y,a=t.segment,s=t.xAxisId,i=t.yAxisId,l=t.shape,d=t.className,u=t.alwaysShow,m=Dz(),f=AO(s),p=TO(i),x=Fz();if(!m||!x)return null;Gn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Ej({x:f.scale,y:p.scale}),v=cr(r),b=cr(n),y=a&&a.length===2,S=tG(g,v,b,y,x,t.position,f.orientation,p.orientation,t);if(!S)return null;var C=Yz(S,2),k=C[0],T=k.x,N=k.y,O=C[1],E=O.x,P=O.y,I=ca(t,"hidden")?"url(#".concat(m,")"):void 0,M=HA(HA({clipPath:I},He(t,!0)),{},{x1:T,y1:N,x2:E,y2:P});return Y.createElement(ct,{className:st("recharts-reference-line",d)},eG(l,M),xr.renderCallByParent(t,Sz({x1:T,y1:N,x2:E,y2:P})))}var Lj=(function(t){function r(){return Uz(this,r),zz(this,r,arguments)}return Vz(r,t),qz(r,[{key:"render",value:function(){return Y.createElement(rG,this.props)}}])})(Y.Component);Mj(Lj,"displayName","ReferenceLine");Mj(Lj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ey.apply(this,arguments)}function Oo(t){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oo(t)}function KA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function YA(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?KA(Object(n),!0).forEach(function(a){df(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nG(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function aG(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_O(a.key),a)}}function sG(t,r,n){return r&&aG(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function iG(t,r,n){return r=xm(r),oG(t,PO()?Reflect.construct(r,n||[],xm(t).constructor):r.apply(t,n))}function oG(t,r){if(r&&(Oo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lG(t)}function lG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PO=function(){return!!t})()}function xm(t){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xm(t)}function cG(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ty(t,r)}function ty(t,r){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ty(t,r)}function df(t,r,n){return r=_O(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _O(t){var r=dG(t,"string");return Oo(r)=="symbol"?r:r+""}function dG(t,r){if(Oo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Oo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uG=function(r){var n=r.x,a=r.y,s=r.xAxis,i=r.yAxis,l=Ej({x:s.scale,y:i.scale}),d=l.apply({x:n,y:a},{bandAware:!0});return ca(r,"discard")&&!l.isInRange(d)?null:d},uf=(function(t){function r(){return nG(this,r),iG(this,r,arguments)}return cG(r,t),sG(r,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,l=a.r,d=a.alwaysShow,u=a.clipPathId,m=cr(s),f=cr(i);if(Gn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!m||!f)return null;var p=uG(this.props);if(!p)return null;var x=p.x,g=p.y,v=this.props,b=v.shape,y=v.className,S=ca(this.props,"hidden")?"url(#".concat(u,")"):void 0,C=YA(YA({clipPath:S},He(this.props,!0)),{},{cx:x,cy:g});return Y.createElement(ct,{className:st("recharts-reference-dot",y)},r.renderDot(b,C),xr.renderCallByParent(this.props,{x:x-l,y:g-l,width:2*l,height:2*l}))}}])})(Y.Component);df(uf,"displayName","ReferenceDot");df(uf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});df(uf,"renderDot",function(t,r){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,r):Ze(t)?n=t(r):n=Y.createElement(Yc,ey({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),n});function ry(){return ry=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ry.apply(this,arguments)}function Po(t){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Po(t)}function XA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function JA(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?XA(Object(n),!0).forEach(function(a){mf(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function mG(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fG(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,MO(a.key),a)}}function pG(t,r,n){return r&&fG(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hG(t,r,n){return r=gm(r),xG(t,IO()?Reflect.construct(r,n||[],gm(t).constructor):r.apply(t,n))}function xG(t,r){if(r&&(Po(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gG(t)}function gG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IO=function(){return!!t})()}function gm(t){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gm(t)}function bG(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ny(t,r)}function ny(t,r){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ny(t,r)}function mf(t,r,n){return r=MO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function MO(t){var r=vG(t,"string");return Po(r)=="symbol"?r:r+""}function vG(t,r){if(Po(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yG=function(r,n,a,s,i){var l=i.x1,d=i.x2,u=i.y1,m=i.y2,f=i.xAxis,p=i.yAxis;if(!f||!p)return null;var x=Ej({x:f.scale,y:p.scale}),g={x:r?x.x.apply(l,{position:"start"}):x.x.rangeMin,y:a?x.y.apply(u,{position:"start"}):x.y.rangeMin},v={x:n?x.x.apply(d,{position:"end"}):x.x.rangeMax,y:s?x.y.apply(m,{position:"end"}):x.y.rangeMax};return ca(i,"discard")&&(!x.isInRange(g)||!x.isInRange(v))?null:yO(g,v)},ff=(function(t){function r(){return mG(this,r),hG(this,r,arguments)}return bG(r,t),pG(r,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,l=a.y1,d=a.y2,u=a.className,m=a.alwaysShow,f=a.clipPathId;Gn(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=cr(s),x=cr(i),g=cr(l),v=cr(d),b=this.props.shape;if(!p&&!x&&!g&&!v&&!b)return null;var y=yG(p,x,g,v,this.props);if(!y&&!b)return null;var S=ca(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Y.createElement(ct,{className:st("recharts-reference-area",u)},r.renderRect(b,JA(JA({clipPath:S},He(this.props,!0)),y)),xr.renderCallByParent(this.props,y))}}])})(Y.Component);mf(ff,"displayName","ReferenceArea");mf(ff,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});mf(ff,"renderRect",function(t,r){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,r):Ze(t)?n=t(r):n=Y.createElement(Sj,ry({},r,{className:"recharts-reference-area-rect"})),n});function LO(t,r,n){if(r<1)return[];if(r===1&&n===void 0)return t;for(var a=[],s=0;s<t.length;s+=r)a.push(t[s]);return a}function jG(t,r,n){var a={width:t.width+r.width,height:t.height+r.height};return Cz(a,n)}function wG(t,r,n){var a=n==="width",s=t.x,i=t.y,l=t.width,d=t.height;return r===1?{start:a?s:i,end:a?s+l:i+d}:{start:a?s+l:i+d,end:a?s:i}}function bm(t,r,n,a,s){if(t*r<t*a||t*r>t*s)return!1;var i=n();return t*(r-t*i/2-a)>=0&&t*(r+t*i/2-s)<=0}function NG(t,r){return LO(t,r+1)}function SG(t,r,n,a,s){for(var i=(a||[]).slice(),l=r.start,d=r.end,u=0,m=1,f=l,p=function(){var v=a?.[u];if(v===void 0)return{v:LO(a,m)};var b=u,y,S=function(){return y===void 0&&(y=n(v,b)),y},C=v.coordinate,k=u===0||bm(t,C,S,f,d);k||(u=0,f=l,m+=1),k&&(f=C+t*(S()/2+s),u+=m)},x;m<=i.length;)if(x=p(),x)return x.v;return[]}function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fc(t)}function QA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Tr(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QA(Object(n),!0).forEach(function(a){kG(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function kG(t,r,n){return r=CG(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function CG(t){var r=AG(t,"string");return Fc(r)=="symbol"?r:r+""}function AG(t,r){if(Fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function TG(t,r,n,a,s){for(var i=(a||[]).slice(),l=i.length,d=r.start,u=r.end,m=function(x){var g=i[x],v,b=function(){return v===void 0&&(v=n(g,x)),v};if(x===l-1){var y=t*(g.coordinate+t*b()/2-u);i[x]=g=Tr(Tr({},g),{},{tickCoord:y>0?g.coordinate-y*t:g.coordinate})}else i[x]=g=Tr(Tr({},g),{},{tickCoord:g.coordinate});var S=bm(t,g.tickCoord,b,d,u);S&&(u=g.tickCoord-t*(b()/2+s),i[x]=Tr(Tr({},g),{},{isShow:!0}))},f=l-1;f>=0;f--)m(f);return i}function EG(t,r,n,a,s,i){var l=(a||[]).slice(),d=l.length,u=r.start,m=r.end;if(i){var f=a[d-1],p=n(f,d-1),x=t*(f.coordinate+t*p/2-m);l[d-1]=f=Tr(Tr({},f),{},{tickCoord:x>0?f.coordinate-x*t:f.coordinate});var g=bm(t,f.tickCoord,function(){return p},u,m);g&&(m=f.tickCoord-t*(p/2+s),l[d-1]=Tr(Tr({},f),{},{isShow:!0}))}for(var v=i?d-1:d,b=function(C){var k=l[C],T,N=function(){return T===void 0&&(T=n(k,C)),T};if(C===0){var O=t*(k.coordinate-t*N()/2-u);l[C]=k=Tr(Tr({},k),{},{tickCoord:O<0?k.coordinate-O*t:k.coordinate})}else l[C]=k=Tr(Tr({},k),{},{tickCoord:k.coordinate});var E=bm(t,k.tickCoord,N,u,m);E&&(u=k.tickCoord+t*(N()/2+s),l[C]=Tr(Tr({},k),{},{isShow:!0}))},y=0;y<v;y++)b(y);return l}function Dj(t,r,n){var a=t.tick,s=t.ticks,i=t.viewBox,l=t.minTickGap,d=t.orientation,u=t.interval,m=t.tickFormatter,f=t.unit,p=t.angle;if(!s||!s.length||!a)return[];if(Ce(u)||za.isSsr)return NG(s,typeof u=="number"&&Ce(u)?u:0);var x=[],g=d==="top"||d==="bottom"?"width":"height",v=f&&g==="width"?Ql(f,{fontSize:r,letterSpacing:n}):{width:0,height:0},b=function(k,T){var N=Ze(m)?m(k.value,T):k.value;return g==="width"?jG(Ql(N,{fontSize:r,letterSpacing:n}),v,p):Ql(N,{fontSize:r,letterSpacing:n})[g]},y=s.length>=2?Mr(s[1].coordinate-s[0].coordinate):1,S=wG(i,y,g);return u==="equidistantPreserveStart"?SG(y,S,b,s,l):(u==="preserveStart"||u==="preserveStartEnd"?x=EG(y,S,b,s,l,u==="preserveStartEnd"):x=TG(y,S,b,s,l),x.filter(function(C){return C.isShow}))}var OG=["viewBox"],PG=["viewBox"],_G=["ticks"];function _o(t){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_o(t)}function io(){return io=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},io.apply(this,arguments)}function ZA(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function ir(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ZA(Object(n),!0).forEach(function(a){Rj(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function e0(t,r){if(t==null)return{};var n=IG(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function IG(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function MG(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e5(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,RO(a.key),a)}}function LG(t,r,n){return r&&e5(t.prototype,r),n&&e5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DG(t,r,n){return r=vm(r),RG(t,DO()?Reflect.construct(r,n||[],vm(t).constructor):r.apply(t,n))}function RG(t,r){if(r&&(_o(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $G(t)}function $G(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DO=function(){return!!t})()}function vm(t){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vm(t)}function FG(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ay(t,r)}function ay(t,r){return ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ay(t,r)}function Rj(t,r,n){return r=RO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function RO(t){var r=BG(t,"string");return _o(r)=="symbol"?r:r+""}function BG(t,r){if(_o(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(_o(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qo=(function(t){function r(n){var a;return MG(this,r),a=DG(this,r,[n]),a.state={fontSize:"",letterSpacing:""},a}return FG(r,t),LG(r,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,l=e0(a,OG),d=this.props,u=d.viewBox,m=e0(d,PG);return!lo(i,u)||!lo(l,m)||!lo(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,l=s.y,d=s.width,u=s.height,m=s.orientation,f=s.tickSize,p=s.mirror,x=s.tickMargin,g,v,b,y,S,C,k=p?-1:1,T=a.tickSize||f,N=Ce(a.tickCoord)?a.tickCoord:a.coordinate;switch(m){case"top":g=v=a.coordinate,y=l+ +!p*u,b=y-k*T,C=b-k*x,S=N;break;case"left":b=y=a.coordinate,v=i+ +!p*d,g=v-k*T,S=g-k*x,C=N;break;case"right":b=y=a.coordinate,v=i+ +p*d,g=v+k*T,S=g+k*x,C=N;break;default:g=v=a.coordinate,y=l+ +p*u,b=y+k*T,C=b+k*x,S=N;break}return{line:{x1:g,y1:b,x2:v,y2:y},tick:{x:S,y:C}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l;switch(s){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.orientation,m=a.mirror,f=a.axisLine,p=ir(ir(ir({},He(this.props,!1)),He(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var x=+(u==="top"&&!m||u==="bottom"&&m);p=ir(ir({},p),{},{x1:s,y1:i+x*d,x2:s+l,y2:i+x*d})}else{var g=+(u==="left"&&!m||u==="right"&&m);p=ir(ir({},p),{},{x1:s+g*l,y1:i,x2:s+g*l,y2:i+d})}return Y.createElement("line",io({},p,{className:st("recharts-cartesian-axis-line",sn(f,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var l=this,d=this.props,u=d.tickLine,m=d.stroke,f=d.tick,p=d.tickFormatter,x=d.unit,g=Dj(ir(ir({},this.props),{},{ticks:a}),s,i),v=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),y=He(this.props,!1),S=He(f,!1),C=ir(ir({},y),{},{fill:"none"},He(u,!1)),k=g.map(function(T,N){var O=l.getTickLineCoord(T),E=O.line,P=O.tick,I=ir(ir(ir(ir({textAnchor:v,verticalAnchor:b},y),{},{stroke:"none",fill:m},S),P),{},{index:N,payload:T,visibleTicksCount:g.length,tickFormatter:p});return Y.createElement(ct,io({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},As(l.props,T,N)),u&&Y.createElement("line",io({},C,E,{className:st("recharts-cartesian-axis-tick-line",sn(u,"className"))})),f&&r.renderTickItem(f,I,"".concat(Ze(p)?p(T.value,N):T.value).concat(x||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,l=s.width,d=s.height,u=s.ticksGenerator,m=s.className,f=s.hide;if(f)return null;var p=this.props,x=p.ticks,g=e0(p,_G),v=x;return Ze(u)&&(v=x&&x.length>0?u(this.props):u(g)),l<=0||d<=0||!v||!v.length?null:Y.createElement(ct,{className:st("recharts-cartesian-axis",m),ref:function(y){a.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),xr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var l,d=st(s.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(a)?l=Y.cloneElement(a,ir(ir({},s),{},{className:d})):Ze(a)?l=a(ir(ir({},s),{},{className:d})):l=Y.createElement(ui,io({},s,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])})(w.Component);Rj(Qo,"displayName","CartesianAxis");Rj(Qo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UG=["x1","y1","x2","y2","key"],WG=["offset"];function pi(t){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pi(t)}function t5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function Er(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?t5(Object(n),!0).forEach(function(a){qG(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qG(t,r,n){return r=zG(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function zG(t){var r=GG(t,"string");return pi(r)=="symbol"?r:r+""}function GG(t,r){if(pi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(pi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function si(){return si=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},si.apply(this,arguments)}function r5(t,r){if(t==null)return{};var n=HG(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function HG(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}var VG=function(r){var n=r.fill;if(!n||n==="none")return null;var a=r.fillOpacity,s=r.x,i=r.y,l=r.width,d=r.height,u=r.ry;return Y.createElement("rect",{x:s,y:i,ry:u,width:l,height:d,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function $O(t,r){var n;if(Y.isValidElement(t))n=Y.cloneElement(t,r);else if(Ze(t))n=t(r);else{var a=r.x1,s=r.y1,i=r.x2,l=r.y2,d=r.key,u=r5(r,UG),m=He(u,!1);m.offset;var f=r5(m,WG);n=Y.createElement("line",si({},f,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:d}))}return n}function KG(t){var r=t.x,n=t.width,a=t.horizontal,s=a===void 0?!0:a,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var m=Er(Er({},t),{},{x1:r,y1:d,x2:r+n,y2:d,key:"line-".concat(u),index:u});return $O(s,m)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function YG(t){var r=t.y,n=t.height,a=t.vertical,s=a===void 0?!0:a,i=t.verticalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var m=Er(Er({},t),{},{x1:d,y1:r,x2:d,y2:r+n,key:"line-".concat(u),index:u});return $O(s,m)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function XG(t){var r=t.horizontalFill,n=t.fillOpacity,a=t.x,s=t.y,i=t.width,l=t.height,d=t.horizontalPoints,u=t.horizontal,m=u===void 0?!0:u;if(!m||!r||!r.length)return null;var f=d.map(function(x){return Math.round(x+s-s)}).sort(function(x,g){return x-g});s!==f[0]&&f.unshift(0);var p=f.map(function(x,g){var v=!f[g+1],b=v?s+l-x:f[g+1]-x;if(b<=0)return null;var y=g%r.length;return Y.createElement("rect",{key:"react-".concat(g),y:x,x:a,height:b,width:i,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function JG(t){var r=t.vertical,n=r===void 0?!0:r,a=t.verticalFill,s=t.fillOpacity,i=t.x,l=t.y,d=t.width,u=t.height,m=t.verticalPoints;if(!n||!a||!a.length)return null;var f=m.map(function(x){return Math.round(x+i-i)}).sort(function(x,g){return x-g});i!==f[0]&&f.unshift(0);var p=f.map(function(x,g){var v=!f[g+1],b=v?i+d-x:f[g+1]-x;if(b<=0)return null;var y=g%a.length;return Y.createElement("rect",{key:"react-".concat(g),x,y:l,width:b,height:u,stroke:"none",fill:a[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var QG=function(r,n){var a=r.xAxis,s=r.width,i=r.height,l=r.offset;return RE(Dj(Er(Er(Er({},Qo.defaultProps),a),{},{ticks:La(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.left,l.left+l.width,n)},ZG=function(r,n){var a=r.yAxis,s=r.width,i=r.height,l=r.offset;return RE(Dj(Er(Er(Er({},Qo.defaultProps),a),{},{ticks:La(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.top,l.top+l.height,n)},eo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hi(t){var r,n,a,s,i,l,d=_j(),u=Ij(),m=Bz(),f=Er(Er({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:eo.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:eo.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:eo.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:eo.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:eo.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:eo.verticalFill,x:Ce(t.x)?t.x:m.left,y:Ce(t.y)?t.y:m.top,width:Ce(t.width)?t.width:m.width,height:Ce(t.height)?t.height:m.height}),p=f.x,x=f.y,g=f.width,v=f.height,b=f.syncWithTicks,y=f.horizontalValues,S=f.verticalValues,C=Rz(),k=$z();if(!Ce(g)||g<=0||!Ce(v)||v<=0||!Ce(p)||p!==+p||!Ce(x)||x!==+x)return null;var T=f.verticalCoordinatesGenerator||QG,N=f.horizontalCoordinatesGenerator||ZG,O=f.horizontalPoints,E=f.verticalPoints;if((!O||!O.length)&&Ze(N)){var P=y&&y.length,I=N({yAxis:k?Er(Er({},k),{},{ticks:P?y:k.ticks}):void 0,width:d,height:u,offset:m},P?!0:b);Gn(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pi(I),"]")),Array.isArray(I)&&(O=I)}if((!E||!E.length)&&Ze(T)){var M=S&&S.length,D=T({xAxis:C?Er(Er({},C),{},{ticks:M?S:C.ticks}):void 0,width:d,height:u,offset:m},M?!0:b);Gn(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pi(D),"]")),Array.isArray(D)&&(E=D)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(VG,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Y.createElement(KG,si({},f,{offset:m,horizontalPoints:O,xAxis:C,yAxis:k})),Y.createElement(YG,si({},f,{offset:m,verticalPoints:E,xAxis:C,yAxis:k})),Y.createElement(XG,si({},f,{horizontalPoints:O})),Y.createElement(JG,si({},f,{verticalPoints:E})))}hi.displayName="CartesianGrid";var eH=["type","layout","connectNulls","ref"],tH=["key"];function Io(t){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Io(t)}function n5(t,r){if(t==null)return{};var n=rH(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function rH(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ac.apply(this,arguments)}function a5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function tn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?a5(Object(n),!0).forEach(function(a){qn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function to(t){return iH(t)||sH(t)||aH(t)||nH()}function nH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aH(t,r){if(t){if(typeof t=="string")return sy(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sy(t,r)}}function sH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iH(t){if(Array.isArray(t))return sy(t)}function sy(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function oH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function s5(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,BO(a.key),a)}}function lH(t,r,n){return r&&s5(t.prototype,r),n&&s5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cH(t,r,n){return r=ym(r),dH(t,FO()?Reflect.construct(r,n||[],ym(t).constructor):r.apply(t,n))}function dH(t,r){if(r&&(Io(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uH(t)}function uH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FO=function(){return!!t})()}function ym(t){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ym(t)}function mH(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&iy(t,r)}function iy(t,r){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},iy(t,r)}function qn(t,r,n){return r=BO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function BO(t){var r=fH(t,"string");return Io(r)=="symbol"?r:r+""}function fH(t,r){if(Io(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Io(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zo=(function(t){function r(){var n;oH(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=cH(this,r,[].concat(s)),qn(n,"state",{isAnimationFinished:!0,totalLength:0}),qn(n,"generateSimpleStrokeDasharray",function(l,d){return"".concat(d,"px ").concat(l-d,"px")}),qn(n,"getStrokeDasharray",function(l,d,u){var m=u.reduce(function(S,C){return S+C});if(!m)return n.generateSimpleStrokeDasharray(d,l);for(var f=Math.floor(l/m),p=l%m,x=d-l,g=[],v=0,b=0;v<u.length;b+=u[v],++v)if(b+u[v]>p){g=[].concat(to(u.slice(0,v)),[p-b]);break}var y=g.length%2===0?[0,x]:[x];return[].concat(to(r.repeat(u,f)),to(g),y).map(function(S){return"".concat(S,"px")}).join(", ")}),qn(n,"id",gi("recharts-line-")),qn(n,"pathRef",function(l){n.mainCurve=l}),qn(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),qn(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return mH(r,t),lH(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,d=i.xAxis,u=i.yAxis,m=i.layout,f=i.children,p=Yr(f,Kc);if(!p)return null;var x=function(b,y){return{x:b.x,y:b.y,value:b.value,errorVal:Ft(b.payload,y)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return Y.createElement(ct,g,p.map(function(v){return Y.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:l,xAxis:d,yAxis:u,layout:m,dataPointFormatter:x})}))}},{key:"renderDots",value:function(a,s,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var d=this.props,u=d.dot,m=d.points,f=d.dataKey,p=He(this.props,!1),x=He(u,!0),g=m.map(function(b,y){var S=tn(tn(tn({key:"dot-".concat(y),r:3},p),x),{},{index:y,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:m});return r.renderDotItem(u,S)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(ct,ac({className:"recharts-line-dots",key:"dots"},v),g)}},{key:"renderCurveStatically",value:function(a,s,i,l){var d=this.props,u=d.type,m=d.layout,f=d.connectNulls;d.ref;var p=n5(d,eH),x=tn(tn(tn({},He(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},l),{},{type:u,layout:m,connectNulls:f});return Y.createElement(di,ac({},x,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,l=this.props,d=l.points,u=l.strokeDasharray,m=l.isAnimationActive,f=l.animationBegin,p=l.animationDuration,x=l.animationEasing,g=l.animationId,v=l.animateNewValues,b=l.width,y=l.height,S=this.state,C=S.prevPoints,k=S.totalLength;return Y.createElement(kn,{begin:f,duration:p,isActive:m,easing:x,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var N=T.t;if(C){var O=C.length/d.length,E=d.map(function(U,F){var W=Math.floor(F*O);if(C[W]){var $=C[W],H=Ct($.x,U.x),z=Ct($.y,U.y);return tn(tn({},U),{},{x:H(N),y:z(N)})}if(v){var q=Ct(b*2,U.x),Q=Ct(y/2,U.y);return tn(tn({},U),{},{x:q(N),y:Q(N)})}return tn(tn({},U),{},{x:U.x,y:U.y})});return i.renderCurveStatically(E,a,s)}var P=Ct(0,k),I=P(N),M;if(u){var D="".concat(u).split(/[,\s]+/gim).map(function(U){return parseFloat(U)});M=i.getStrokeDasharray(I,k,D)}else M=i.generateSimpleStrokeDasharray(k,I);return i.renderCurveStatically(d,a,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,s){var i=this.props,l=i.points,d=i.isAnimationActive,u=this.state,m=u.prevPoints,f=u.totalLength;return d&&l&&l.length&&(!m&&f>0||!Ts(m,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,l=s.dot,d=s.points,u=s.className,m=s.xAxis,f=s.yAxis,p=s.top,x=s.left,g=s.width,v=s.height,b=s.isAnimationActive,y=s.id;if(i||!d||!d.length)return null;var S=this.state.isAnimationFinished,C=d.length===1,k=st("recharts-line",u),T=m&&m.allowDataOverflow,N=f&&f.allowDataOverflow,O=T||N,E=nt(y)?this.id:y,P=(a=He(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=P.r,M=I===void 0?3:I,D=P.strokeWidth,U=D===void 0?2:D,F=D3(l)?l:{},W=F.clipDot,$=W===void 0?!0:W,H=M*2+U;return Y.createElement(ct,{className:k},T||N?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(E)},Y.createElement("rect",{x:T?x:x-g/2,y:N?p:p-v/2,width:T?g:g*2,height:N?v:v*2})),!$&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(E)},Y.createElement("rect",{x:x-H/2,y:p-H/2,width:g+H,height:v+H}))):null,!C&&this.renderCurve(O,E),this.renderErrorBar(O,E),(C||l)&&this.renderDots(O,$,E),(!b||S)&&on.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(to(a),[0]):a,l=[],d=0;d<s;++d)l=[].concat(to(l),to(i));return l}},{key:"renderDotItem",value:function(a,s){var i;if(Y.isValidElement(a))i=Y.cloneElement(a,s);else if(Ze(a))i=a(s);else{var l=s.key,d=n5(s,tH),u=st("recharts-line-dot",typeof a!="boolean"?a.className:"");i=Y.createElement(Yc,ac({key:l},d,{className:u}))}return i}}])})(w.PureComponent);qn(Zo,"displayName","Line");qn(Zo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!za.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});qn(Zo,"getComposedData",function(t){var r=t.props,n=t.xAxis,a=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,d=t.bandSize,u=t.displayedData,m=t.offset,f=r.layout,p=u.map(function(x,g){var v=Ft(x,l);return f==="horizontal"?{x:Ju({axis:n,ticks:s,bandSize:d,entry:x,index:g}),y:nt(v)?null:a.scale(v),value:v,payload:x}:{x:nt(v)?null:n.scale(v),y:Ju({axis:a,ticks:i,bandSize:d,entry:x,index:g}),value:v,payload:x}});return tn({points:p,layout:f},m)});var pH=["layout","type","stroke","connectNulls","isRange","ref"],hH=["key"],UO;function Mo(t){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mo(t)}function WO(t,r){if(t==null)return{};var n=xH(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function xH(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function ii(){return ii=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ii.apply(this,arguments)}function i5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function bs(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?i5(Object(n),!0).forEach(function(a){oa(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o5(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,zO(a.key),a)}}function bH(t,r,n){return r&&o5(t.prototype,r),n&&o5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vH(t,r,n){return r=jm(r),yH(t,qO()?Reflect.construct(r,n||[],jm(t).constructor):r.apply(t,n))}function yH(t,r){if(r&&(Mo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jH(t)}function jH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qO=function(){return!!t})()}function jm(t){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jm(t)}function wH(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&oy(t,r)}function oy(t,r){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},oy(t,r)}function oa(t,r,n){return r=zO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function zO(t){var r=NH(t,"string");return Mo(r)=="symbol"?r:r+""}function NH(t,r){if(Mo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Mo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var da=(function(t){function r(){var n;gH(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=vH(this,r,[].concat(s)),oa(n,"state",{isAnimationFinished:!0}),oa(n,"id",gi("recharts-area-")),oa(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ze(l)&&l()}),oa(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ze(l)&&l()}),n}return wH(r,t),bH(r,[{key:"renderDots",value:function(a,s,i){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var u=this.props,m=u.dot,f=u.points,p=u.dataKey,x=He(this.props,!1),g=He(m,!0),v=f.map(function(y,S){var C=bs(bs(bs({key:"dot-".concat(S),r:3},x),g),{},{index:S,cx:y.x,cy:y.y,dataKey:p,value:y.value,payload:y.payload,points:f});return r.renderDotItem(m,C)}),b={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return Y.createElement(ct,ii({className:"recharts-area-dots"},b),v)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,l=s.points,d=s.strokeWidth,u=l[0].x,m=l[l.length-1].x,f=a*Math.abs(u-m),p=ws(l.map(function(x){return x.y||0}));return Ce(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(ws(i.map(function(x){return x.y||0})),p)),Ce(p)?Y.createElement("rect",{x:u<m?u:u-f,y:0,width:f,height:Math.floor(p+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,l=s.points,d=s.strokeWidth,u=l[0].y,m=l[l.length-1].y,f=a*Math.abs(u-m),p=ws(l.map(function(x){return x.x||0}));return Ce(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(ws(i.map(function(x){return x.x||0})),p)),Ce(p)?Y.createElement("rect",{x:0,y:u<m?u:u-f,width:p+(d?parseInt("".concat(d),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,l){var d=this.props,u=d.layout,m=d.type,f=d.stroke,p=d.connectNulls,x=d.isRange;d.ref;var g=WO(d,pH);return Y.createElement(ct,{clipPath:i?"url(#clipPath-".concat(l,")"):null},Y.createElement(di,ii({},He(g,!0),{points:a,connectNulls:p,type:m,baseLine:s,layout:u,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Y.createElement(di,ii({},He(this.props,!1),{className:"recharts-area-curve",layout:u,type:m,connectNulls:p,fill:"none",points:a})),f!=="none"&&x&&Y.createElement(di,ii({},He(this.props,!1),{className:"recharts-area-curve",layout:u,type:m,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,l=this.props,d=l.points,u=l.baseLine,m=l.isAnimationActive,f=l.animationBegin,p=l.animationDuration,x=l.animationEasing,g=l.animationId,v=this.state,b=v.prevPoints,y=v.prevBaseLine;return Y.createElement(kn,{begin:f,duration:p,isActive:m,easing:x,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var C=S.t;if(b){var k=b.length/d.length,T=d.map(function(P,I){var M=Math.floor(I*k);if(b[M]){var D=b[M],U=Ct(D.x,P.x),F=Ct(D.y,P.y);return bs(bs({},P),{},{x:U(C),y:F(C)})}return P}),N;if(Ce(u)&&typeof u=="number"){var O=Ct(y,u);N=O(C)}else if(nt(u)||Go(u)){var E=Ct(y,0);N=E(C)}else N=u.map(function(P,I){var M=Math.floor(I*k);if(y[M]){var D=y[M],U=Ct(D.x,P.x),F=Ct(D.y,P.y);return bs(bs({},P),{},{x:U(C),y:F(C)})}return P});return i.renderAreaStatically(T,N,a,s)}return Y.createElement(ct,null,Y.createElement("defs",null,Y.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(C))),Y.createElement(ct,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(d,u,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,l=i.points,d=i.baseLine,u=i.isAnimationActive,m=this.state,f=m.prevPoints,p=m.prevBaseLine,x=m.totalLength;return u&&l&&l.length&&(!f&&x>0||!Ts(f,l)||!Ts(p,d))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(l,d,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,l=s.dot,d=s.points,u=s.className,m=s.top,f=s.left,p=s.xAxis,x=s.yAxis,g=s.width,v=s.height,b=s.isAnimationActive,y=s.id;if(i||!d||!d.length)return null;var S=this.state.isAnimationFinished,C=d.length===1,k=st("recharts-area",u),T=p&&p.allowDataOverflow,N=x&&x.allowDataOverflow,O=T||N,E=nt(y)?this.id:y,P=(a=He(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=P.r,M=I===void 0?3:I,D=P.strokeWidth,U=D===void 0?2:D,F=D3(l)?l:{},W=F.clipDot,$=W===void 0?!0:W,H=M*2+U;return Y.createElement(ct,{className:k},T||N?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(E)},Y.createElement("rect",{x:T?f:f-g/2,y:N?m:m-v/2,width:T?g:g*2,height:N?v:v*2})),!$&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(E)},Y.createElement("rect",{x:f-H/2,y:m-H/2,width:g+H,height:v+H}))):null,C?null:this.renderArea(O,E),(l||C)&&this.renderDots(O,$,E),(!b||S)&&on.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(w.PureComponent);UO=da;oa(da,"displayName","Area");oa(da,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!za.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});oa(da,"getBaseValue",function(t,r,n,a){var s=t.layout,i=t.baseValue,l=r.props.baseValue,d=l??i;if(Ce(d)&&typeof d=="number")return d;var u=s==="horizontal"?a:n,m=u.scale.domain();if(u.type==="number"){var f=Math.max(m[0],m[1]),p=Math.min(m[0],m[1]);return d==="dataMin"?p:d==="dataMax"||f<0?f:Math.max(Math.min(m[0],m[1]),0)}return d==="dataMin"?m[0]:d==="dataMax"?m[1]:m[0]});oa(da,"getComposedData",function(t){var r=t.props,n=t.item,a=t.xAxis,s=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,d=t.bandSize,u=t.dataKey,m=t.stackedData,f=t.dataStartIndex,p=t.displayedData,x=t.offset,g=r.layout,v=m&&m.length,b=UO.getBaseValue(r,n,a,s),y=g==="horizontal",S=!1,C=p.map(function(T,N){var O;v?O=m[f+N]:(O=Ft(T,u),Array.isArray(O)?S=!0:O=[b,O]);var E=O[1]==null||v&&Ft(T,u)==null;return y?{x:Ju({axis:a,ticks:i,bandSize:d,entry:T,index:N}),y:E?null:s.scale(O[1]),value:O,payload:T}:{x:E?null:a.scale(O[1]),y:Ju({axis:s,ticks:l,bandSize:d,entry:T,index:N}),value:O,payload:T}}),k;return v||S?k=C.map(function(T){var N=Array.isArray(T.value)?T.value[0]:null;return y?{x:T.x,y:N!=null&&T.y!=null?s.scale(N):null}:{x:N!=null?a.scale(N):null,y:T.y}}):k=y?s.scale(b):a.scale(b),bs({points:C,baseLine:k,layout:g,isRange:S},x)});oa(da,"renderDotItem",function(t,r){var n;if(Y.isValidElement(t))n=Y.cloneElement(t,r);else if(Ze(t))n=t(r);else{var a=st("recharts-area-dot",typeof t!="boolean"?t.className:""),s=r.key,i=WO(r,hH);n=Y.createElement(Yc,ii({},i,{key:s,className:a}))}return n});function Lo(t){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lo(t)}function SH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function kH(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,VO(a.key),a)}}function CH(t,r,n){return r&&kH(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function AH(t,r,n){return r=wm(r),TH(t,GO()?Reflect.construct(r,n||[],wm(t).constructor):r.apply(t,n))}function TH(t,r){if(r&&(Lo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EH(t)}function EH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GO=function(){return!!t})()}function wm(t){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wm(t)}function OH(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ly(t,r)}function ly(t,r){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ly(t,r)}function HO(t,r,n){return r=VO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function VO(t){var r=PH(t,"string");return Lo(r)=="symbol"?r:r+""}function PH(t,r){if(Lo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Lo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cy.apply(this,arguments)}function _H(t){var r=t.xAxisId,n=_j(),a=Ij(),s=AO(r);return s==null?null:w.createElement(Qo,cy({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return La(l,!0)}}))}var Kn=(function(t){function r(){return SH(this,r),AH(this,r,arguments)}return OH(r,t),CH(r,[{key:"render",value:function(){return w.createElement(_H,this.props)}}])})(w.Component);HO(Kn,"displayName","XAxis");HO(Kn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Do(t){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Do(t)}function IH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function MH(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,XO(a.key),a)}}function LH(t,r,n){return r&&MH(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function DH(t,r,n){return r=Nm(r),RH(t,KO()?Reflect.construct(r,n||[],Nm(t).constructor):r.apply(t,n))}function RH(t,r){if(r&&(Do(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $H(t)}function $H(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KO=function(){return!!t})()}function Nm(t){return Nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nm(t)}function FH(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&dy(t,r)}function dy(t,r){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},dy(t,r)}function YO(t,r,n){return r=XO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function XO(t){var r=BH(t,"string");return Do(r)=="symbol"?r:r+""}function BH(t,r){if(Do(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Do(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uy.apply(this,arguments)}var UH=function(r){var n=r.yAxisId,a=_j(),s=Ij(),i=TO(n);return i==null?null:w.createElement(Qo,uy({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(d){return La(d,!0)}}))},Cn=(function(t){function r(){return IH(this,r),DH(this,r,arguments)}return FH(r,t),LH(r,[{key:"render",value:function(){return w.createElement(UH,this.props)}}])})(w.Component);YO(Cn,"displayName","YAxis");YO(Cn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function l5(t){return GH(t)||zH(t)||qH(t)||WH()}function WH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qH(t,r){if(t){if(typeof t=="string")return my(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return my(t,r)}}function zH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GH(t){if(Array.isArray(t))return my(t)}function my(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}var fy=function(r,n,a,s,i){var l=Yr(r,Lj),d=Yr(r,uf),u=[].concat(l5(l),l5(d)),m=Yr(r,ff),f="".concat(s,"Id"),p=s[0],x=n;if(u.length&&(x=u.reduce(function(b,y){if(y.props[f]===a&&ca(y.props,"extendDomain")&&Ce(y.props[p])){var S=y.props[p];return[Math.min(b[0],S),Math.max(b[1],S)]}return b},x)),m.length){var g="".concat(p,"1"),v="".concat(p,"2");x=m.reduce(function(b,y){if(y.props[f]===a&&ca(y.props,"extendDomain")&&Ce(y.props[g])&&Ce(y.props[v])){var S=y.props[g],C=y.props[v];return[Math.min(b[0],S,C),Math.max(b[1],S,C)]}return b},x)}return i&&i.length&&(x=i.reduce(function(b,y){return Ce(y)?[Math.min(b[0],y),Math.max(b[1],y)]:b},x)),x},t0={exports:{}},c5;function HH(){return c5||(c5=1,(function(t){var r=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(u,m,f){this.fn=u,this.context=m,this.once=f||!1}function i(u,m,f,p,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,p||u,x),v=n?n+m:m;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function l(u,m){--u._eventsCount===0?u._events=new a:delete u._events[m]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)r.call(f,p)&&m.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},d.prototype.listeners=function(m){var f=n?n+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,g=p.length,v=new Array(g);x<g;x++)v[x]=p[x].fn;return v},d.prototype.listenerCount=function(m){var f=n?n+m:m,p=this._events[f];return p?p.fn?1:p.length:0},d.prototype.emit=function(m,f,p,x,g,v){var b=n?n+m:m;if(!this._events[b])return!1;var y=this._events[b],S=arguments.length,C,k;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),S){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,p),!0;case 4:return y.fn.call(y.context,f,p,x),!0;case 5:return y.fn.call(y.context,f,p,x,g),!0;case 6:return y.fn.call(y.context,f,p,x,g,v),!0}for(k=1,C=new Array(S-1);k<S;k++)C[k-1]=arguments[k];y.fn.apply(y.context,C)}else{var T=y.length,N;for(k=0;k<T;k++)switch(y[k].once&&this.removeListener(m,y[k].fn,void 0,!0),S){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,f);break;case 3:y[k].fn.call(y[k].context,f,p);break;case 4:y[k].fn.call(y[k].context,f,p,x);break;default:if(!C)for(N=1,C=new Array(S-1);N<S;N++)C[N-1]=arguments[N];y[k].fn.apply(y[k].context,C)}}return!0},d.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},d.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},d.prototype.removeListener=function(m,f,p,x){var g=n?n+m:m;if(!this._events[g])return this;if(!f)return l(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!x||v.once)&&(!p||v.context===p)&&l(this,g);else{for(var b=0,y=[],S=v.length;b<S;b++)(v[b].fn!==f||x&&!v[b].once||p&&v[b].context!==p)&&y.push(v[b]);y.length?this._events[g]=y.length===1?y[0]:y:l(this,g)}return this},d.prototype.removeAllListeners=function(m){var f;return m?(f=n?n+m:m,this._events[f]&&l(this,f)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,t.exports=d})(t0)),t0.exports}var VH=HH();const KH=wt(VH);var r0=new KH,n0="recharts.syncMouseEvents";function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bc(t)}function YH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function XH(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,JO(a.key),a)}}function JH(t,r,n){return r&&XH(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a0(t,r,n){return r=JO(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function JO(t){var r=QH(t,"string");return Bc(r)=="symbol"?r:r+""}function QH(t,r){if(Bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Bc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZH=(function(){function t(){YH(this,t),a0(this,"activeIndex",0),a0(this,"coordinateList",[]),a0(this,"layout","horizontal")}return JH(t,[{key:"setDetails",value:function(n){var a,s=n.coordinateList,i=s===void 0?null:s,l=n.container,d=l===void 0?null:l,u=n.layout,m=u===void 0?null:u,f=n.offset,p=f===void 0?null:f,x=n.mouseHandlerCallback,g=x===void 0?null:x;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=d??this.container,this.layout=m??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,l=s.y,d=s.height,u=this.coordinateList[this.activeIndex].coordinate,m=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=i+u+m,x=l+this.offset.top+d/2+f;this.mouseHandlerCallback({pageX:p,pageY:x})}}}])})();function eV(t,r,n){if(n==="number"&&r===!0&&Array.isArray(t)){var a=t?.[0],s=t?.[1];if(a&&s&&Ce(a)&&Ce(s))return!0}return!1}function tV(t,r,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:r.y-s,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function QO(t){var r=t.cx,n=t.cy,a=t.radius,s=t.startAngle,i=t.endAngle,l=It(r,n,a,s),d=It(r,n,a,i);return{points:[l,d],cx:r,cy:n,radius:a,startAngle:s,endAngle:i}}function rV(t,r,n){var a,s,i,l;if(t==="horizontal")a=r.x,i=a,s=n.top,l=n.top+n.height;else if(t==="vertical")s=r.y,l=s,a=n.left,i=n.left+n.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var d=r.cx,u=r.cy,m=r.innerRadius,f=r.outerRadius,p=r.angle,x=It(d,u,m,p),g=It(d,u,f,p);a=x.x,s=x.y,i=g.x,l=g.y}else return QO(r);return[{x:a,y:s},{x:i,y:l}]}function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Uc(t)}function d5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function vu(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?d5(Object(n),!0).forEach(function(a){nV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nV(t,r,n){return r=aV(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function aV(t){var r=sV(t,"string");return Uc(r)=="symbol"?r:r+""}function sV(t,r){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Uc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function iV(t){var r,n,a=t.element,s=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,d=t.activePayload,u=t.offset,m=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,x=t.chartName,g=(r=a.props.cursor)!==null&&r!==void 0?r:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!g||!i||!l||x!=="ScatterChart"&&s!=="axis")return null;var v,b=di;if(x==="ScatterChart")v=l,b=wW;else if(x==="BarChart")v=tV(p,l,u,f),b=Sj;else if(p==="radial"){var y=QO(l),S=y.cx,C=y.cy,k=y.radius,T=y.startAngle,N=y.endAngle;v={cx:S,cy:C,startAngle:T,endAngle:N,innerRadius:k,outerRadius:k},b=YE}else v={points:rV(p,l,u)},b=di;var O=vu(vu(vu(vu({stroke:"#ccc",pointerEvents:"none"},u),v),He(g,!1)),{},{payload:d,payloadIndex:m,className:st("recharts-tooltip-cursor",g.className)});return w.isValidElement(g)?w.cloneElement(g,O):w.createElement(b,O)}var oV=["item"],lV=["children","className","width","height","style","compact","title","desc"];function Ro(t){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ro(t)}function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oo.apply(this,arguments)}function u5(t,r){return uV(t)||dV(t,r)||eP(t,r)||cV()}function cV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dV(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function uV(t){if(Array.isArray(t))return t}function m5(t,r){if(t==null)return{};var n=mV(t,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mV(t,r){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(r.indexOf(a)>=0)continue;n[a]=t[a]}return n}function fV(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function pV(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,tP(a.key),a)}}function hV(t,r,n){return r&&pV(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xV(t,r,n){return r=Sm(r),gV(t,ZO()?Reflect.construct(r,n||[],Sm(t).constructor):r.apply(t,n))}function gV(t,r){if(r&&(Ro(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bV(t)}function bV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZO=function(){return!!t})()}function Sm(t){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sm(t)}function vV(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&py(t,r)}function py(t,r){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},py(t,r)}function $o(t){return wV(t)||jV(t)||eP(t)||yV()}function yV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eP(t,r){if(t){if(typeof t=="string")return hy(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hy(t,r)}}function jV(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wV(t){if(Array.isArray(t))return hy(t)}function hy(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function f5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function ve(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?f5(Object(n),!0).forEach(function(a){tt(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tt(t,r,n){return r=tP(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function tP(t){var r=NV(t,"string");return Ro(r)=="symbol"?r:r+""}function NV(t,r){if(Ro(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Ro(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var SV={xAxis:["bottom","top"],yAxis:["left","right"]},kV={width:"100%",height:"100%"},rP={x:0,y:0};function yu(t){return t}var CV=function(r,n){return n==="horizontal"?r.x:n==="vertical"?r.y:n==="centric"?r.angle:r.radius},AV=function(r,n,a,s){var i=n.find(function(f){return f&&f.index===a});if(i){if(r==="horizontal")return{x:i.coordinate,y:s.y};if(r==="vertical")return{x:s.x,y:i.coordinate};if(r==="centric"){var l=i.coordinate,d=s.radius;return ve(ve(ve({},s),It(s.cx,s.cy,d,l)),{},{angle:l,radius:d})}var u=i.coordinate,m=s.angle;return ve(ve(ve({},s),It(s.cx,s.cy,u,m)),{},{angle:m,radius:u})}return rP},pf=function(r,n){var a=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,l=(a??[]).reduce(function(d,u){var m=u.props.data;return m&&m.length?[].concat($o(d),$o(m)):d},[]);return l.length>0?l:r&&r.length&&Ce(s)&&Ce(i)?r.slice(s,i+1):[]};function nP(t){return t==="number"?[0,"auto"]:void 0}var xy=function(r,n,a,s){var i=r.graphicalItems,l=r.tooltipAxis,d=pf(n,r);return a<0||!i||!i.length||a>=d.length?null:i.reduce(function(u,m){var f,p=(f=m.props.data)!==null&&f!==void 0?f:n;p&&r.dataStartIndex+r.dataEndIndex!==0&&r.dataEndIndex-r.dataStartIndex>=a&&(p=p.slice(r.dataStartIndex,r.dataEndIndex+1));var x;if(l.dataKey&&!l.allowDuplicatedCategory){var g=p===void 0?d:p;x=Cu(g,l.dataKey,s)}else x=p&&p[a]||d[a];return x?[].concat($o(u),[WE(m,x)]):u},[])},p5=function(r,n,a,s){var i=s||{x:r.chartX,y:r.chartY},l=CV(i,a),d=r.orderedTooltipTicks,u=r.tooltipAxis,m=r.tooltipTicks,f=VF(l,d,m,u);if(f>=0&&m){var p=m[f]&&m[f].value,x=xy(r,n,f,p),g=AV(a,d,f,i);return{activeTooltipIndex:f,activeLabel:p,activePayload:x,activeCoordinate:g}}return null},TV=function(r,n){var a=n.axes,s=n.graphicalItems,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,m=n.dataEndIndex,f=r.layout,p=r.children,x=r.stackOffset,g=DE(f,i);return a.reduce(function(v,b){var y,S=b.type.defaultProps!==void 0?ve(ve({},b.type.defaultProps),b.props):b.props,C=S.type,k=S.dataKey,T=S.allowDataOverflow,N=S.allowDuplicatedCategory,O=S.scale,E=S.ticks,P=S.includeHidden,I=S[l];if(v[I])return v;var M=pf(r.data,{graphicalItems:s.filter(function(L){var G,K=l in L.props?L.props[l]:(G=L.type.defaultProps)===null||G===void 0?void 0:G[l];return K===I}),dataStartIndex:u,dataEndIndex:m}),D=M.length,U,F,W;eV(S.domain,T,C)&&(U=Ev(S.domain,null,T),g&&(C==="number"||O!=="auto")&&(W=ec(M,k,"category")));var $=nP(C);if(!U||U.length===0){var H,z=(H=S.domain)!==null&&H!==void 0?H:$;if(k){if(U=ec(M,k,C),C==="category"&&g){var q=ZI(U);N&&q?(F=U,U=dm(0,D)):N||(U=uC(z,U,b).reduce(function(L,G){return L.indexOf(G)>=0?L:[].concat($o(L),[G])},[]))}else if(C==="category")N?U=U.filter(function(L){return L!==""&&!nt(L)}):U=uC(z,U,b).reduce(function(L,G){return L.indexOf(G)>=0||G===""||nt(G)?L:[].concat($o(L),[G])},[]);else if(C==="number"){var Q=QF(M,s.filter(function(L){var G,K,ie=l in L.props?L.props[l]:(G=L.type.defaultProps)===null||G===void 0?void 0:G[l],xe="hide"in L.props?L.props.hide:(K=L.type.defaultProps)===null||K===void 0?void 0:K.hide;return ie===I&&(P||!xe)}),k,i,f);Q&&(U=Q)}g&&(C==="number"||O!=="auto")&&(W=ec(M,k,"category"))}else g?U=dm(0,D):d&&d[I]&&d[I].hasStack&&C==="number"?U=x==="expand"?[0,1]:UE(d[I].stackGroups,u,m):U=LE(M,s.filter(function(L){var G=l in L.props?L.props[l]:L.type.defaultProps[l],K="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return G===I&&(P||!K)}),C,f,!0);if(C==="number")U=fy(p,U,I,i,E),z&&(U=Ev(z,U,T));else if(C==="category"&&z){var ee=z,R=U.every(function(L){return ee.indexOf(L)>=0});R&&(U=ee)}}return ve(ve({},v),{},tt({},I,ve(ve({},S),{},{axisType:i,domain:U,categoricalDomain:W,duplicateDomain:F,originalDomain:(y=S.domain)!==null&&y!==void 0?y:$,isCategorical:g,layout:f})))},{})},EV=function(r,n){var a=n.graphicalItems,s=n.Axis,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,m=n.dataEndIndex,f=r.layout,p=r.children,x=pf(r.data,{graphicalItems:a,dataStartIndex:u,dataEndIndex:m}),g=x.length,v=DE(f,i),b=-1;return a.reduce(function(y,S){var C=S.type.defaultProps!==void 0?ve(ve({},S.type.defaultProps),S.props):S.props,k=C[l],T=nP("number");if(!y[k]){b++;var N;return v?N=dm(0,g):d&&d[k]&&d[k].hasStack?(N=UE(d[k].stackGroups,u,m),N=fy(p,N,k,i)):(N=Ev(T,LE(x,a.filter(function(O){var E,P,I=l in O.props?O.props[l]:(E=O.type.defaultProps)===null||E===void 0?void 0:E[l],M="hide"in O.props?O.props.hide:(P=O.type.defaultProps)===null||P===void 0?void 0:P.hide;return I===k&&!M}),"number",f),s.defaultProps.allowDataOverflow),N=fy(p,N,k,i)),ve(ve({},y),{},tt({},k,ve(ve({axisType:i},s.defaultProps),{},{hide:!0,orientation:sn(SV,"".concat(i,".").concat(b%2),null),domain:N,originalDomain:T,isCategorical:v,layout:f})))}return y},{})},OV=function(r,n){var a=n.axisType,s=a===void 0?"xAxis":a,i=n.AxisComp,l=n.graphicalItems,d=n.stackGroups,u=n.dataStartIndex,m=n.dataEndIndex,f=r.children,p="".concat(s,"Id"),x=Yr(f,i),g={};return x&&x.length?g=TV(r,{axes:x,graphicalItems:l,axisType:s,axisIdKey:p,stackGroups:d,dataStartIndex:u,dataEndIndex:m}):l&&l.length&&(g=EV(r,{Axis:i,graphicalItems:l,axisType:s,axisIdKey:p,stackGroups:d,dataStartIndex:u,dataEndIndex:m})),g},PV=function(r){var n=ys(r),a=La(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:Jy(a,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Qu(n,a)}},h5=function(r){var n=r.children,a=r.defaultShowTooltip,s=nn(n,Ao),i=0,l=0;return r.data&&r.data.length!==0&&(l=r.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},_V=function(r){return!r||!r.length?!1:r.some(function(n){var a=Da(n&&n.type);return a&&a.indexOf("Bar")>=0})},x5=function(r){return r==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:r==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:r==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IV=function(r,n){var a=r.props,s=r.graphicalItems,i=r.xAxisMap,l=i===void 0?{}:i,d=r.yAxisMap,u=d===void 0?{}:d,m=a.width,f=a.height,p=a.children,x=a.margin||{},g=nn(p,Ao),v=nn(p,Nn),b=Object.keys(u).reduce(function(N,O){var E=u[O],P=E.orientation;return!E.mirror&&!E.hide?ve(ve({},N),{},tt({},P,N[P]+E.width)):N},{left:x.left||0,right:x.right||0}),y=Object.keys(l).reduce(function(N,O){var E=l[O],P=E.orientation;return!E.mirror&&!E.hide?ve(ve({},N),{},tt({},P,sn(N,"".concat(P))+E.height)):N},{top:x.top||0,bottom:x.bottom||0}),S=ve(ve({},y),b),C=S.bottom;g&&(S.bottom+=g.props.height||Ao.defaultProps.height),v&&n&&(S=XF(S,s,a,n));var k=m-S.left-S.right,T=f-S.top-S.bottom;return ve(ve({brushBottom:C},S),{},{width:Math.max(k,0),height:Math.max(T,0)})},MV=function(r,n){if(n==="xAxis")return r[n].width;if(n==="yAxis")return r[n].height},Xc=function(r){var n=r.chartName,a=r.GraphicalChild,s=r.defaultTooltipEventType,i=s===void 0?"axis":s,l=r.validateTooltipEventTypes,d=l===void 0?["axis"]:l,u=r.axisComponents,m=r.legendContent,f=r.formatAxisMap,p=r.defaultProps,x=function(S,C){var k=C.graphicalItems,T=C.stackGroups,N=C.offset,O=C.updateId,E=C.dataStartIndex,P=C.dataEndIndex,I=S.barSize,M=S.layout,D=S.barGap,U=S.barCategoryGap,F=S.maxBarSize,W=x5(M),$=W.numericAxisName,H=W.cateAxisName,z=_V(k),q=[];return k.forEach(function(Q,ee){var R=pf(S.data,{graphicalItems:[Q],dataStartIndex:E,dataEndIndex:P}),L=Q.type.defaultProps!==void 0?ve(ve({},Q.type.defaultProps),Q.props):Q.props,G=L.dataKey,K=L.maxBarSize,ie=L["".concat($,"Id")],xe=L["".concat(H,"Id")],pe={},be=u.reduce(function(Oe,Z){var Pe=C["".concat(Z.axisType,"Map")],lt=L["".concat(Z.axisType,"Id")];Pe&&Pe[lt]||Z.axisType==="zAxis"||fi();var At=Pe[lt];return ve(ve({},Oe),{},tt(tt({},Z.axisType,At),"".concat(Z.axisType,"Ticks"),La(At)))},pe),me=be[H],X=be["".concat(H,"Ticks")],re=T&&T[ie]&&T[ie].hasStack&&o9(Q,T[ie].stackGroups),de=Da(Q.type).indexOf("Bar")>=0,Be=Qu(me,X),Me=[],Ee=z&&KF({barSize:I,stackGroups:T,totalSize:MV(be,H)});if(de){var Xe,ge,De=nt(K)?F:K,ae=(Xe=(ge=Qu(me,X,!0))!==null&&ge!==void 0?ge:De)!==null&&Xe!==void 0?Xe:0;Me=YF({barGap:D,barCategoryGap:U,bandSize:ae!==Be?ae:Be,sizeList:Ee[xe],maxBarSize:De}),ae!==Be&&(Me=Me.map(function(Oe){return ve(ve({},Oe),{},{position:ve(ve({},Oe.position),{},{offset:Oe.position.offset-ae/2})})}))}var ye=Q&&Q.type&&Q.type.getComposedData;ye&&q.push({props:ve(ve({},ye(ve(ve({},be),{},{displayedData:R,props:S,dataKey:G,item:Q,bandSize:Be,barPosition:Me,offset:N,stackedData:re,layout:M,dataStartIndex:E,dataEndIndex:P}))),{},tt(tt(tt({key:Q.key||"item-".concat(ee)},$,be[$]),H,be[H]),"animationId",O)),childIndex:uM(Q,S.children),item:Q})}),q},g=function(S,C){var k=S.props,T=S.dataStartIndex,N=S.dataEndIndex,O=S.updateId;if(!CN({props:k}))return null;var E=k.children,P=k.layout,I=k.stackOffset,M=k.data,D=k.reverseStackOrder,U=x5(P),F=U.numericAxisName,W=U.cateAxisName,$=Yr(E,a),H=s9(M,$,"".concat(F,"Id"),"".concat(W,"Id"),I,D),z=u.reduce(function(L,G){var K="".concat(G.axisType,"Map");return ve(ve({},L),{},tt({},K,OV(k,ve(ve({},G),{},{graphicalItems:$,stackGroups:G.axisType===F&&H,dataStartIndex:T,dataEndIndex:N}))))},{}),q=IV(ve(ve({},z),{},{props:k,graphicalItems:$}),C?.legendBBox);Object.keys(z).forEach(function(L){z[L]=f(k,z[L],q,L.replace("Map",""),n)});var Q=z["".concat(W,"Map")],ee=PV(Q),R=x(k,ve(ve({},z),{},{dataStartIndex:T,dataEndIndex:N,updateId:O,graphicalItems:$,stackGroups:H,offset:q}));return ve(ve({formattedGraphicalItems:R,graphicalItems:$,offset:q,stackGroups:H},ee),z)},v=(function(y){function S(C){var k,T,N;return fV(this,S),N=xV(this,S,[C]),tt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),tt(N,"accessibilityManager",new ZH),tt(N,"handleLegendBBoxUpdate",function(O){if(O){var E=N.state,P=E.dataStartIndex,I=E.dataEndIndex,M=E.updateId;N.setState(ve({legendBBox:O},g({props:N.props,dataStartIndex:P,dataEndIndex:I,updateId:M},ve(ve({},N.state),{},{legendBBox:O}))))}}),tt(N,"handleReceiveSyncEvent",function(O,E,P){if(N.props.syncId===O){if(P===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(E)}}),tt(N,"handleBrushChange",function(O){var E=O.startIndex,P=O.endIndex;if(E!==N.state.dataStartIndex||P!==N.state.dataEndIndex){var I=N.state.updateId;N.setState(function(){return ve({dataStartIndex:E,dataEndIndex:P},g({props:N.props,dataStartIndex:E,dataEndIndex:P,updateId:I},N.state))}),N.triggerSyncEvent({dataStartIndex:E,dataEndIndex:P})}}),tt(N,"handleMouseEnter",function(O){var E=N.getMouseInfo(O);if(E){var P=ve(ve({},E),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var I=N.props.onMouseEnter;Ze(I)&&I(P,O)}}),tt(N,"triggeredAfterMouseMove",function(O){var E=N.getMouseInfo(O),P=E?ve(ve({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(P),N.triggerSyncEvent(P);var I=N.props.onMouseMove;Ze(I)&&I(P,O)}),tt(N,"handleItemMouseEnter",function(O){N.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),tt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),tt(N,"handleMouseMove",function(O){O.persist(),N.throttleTriggeredAfterMouseMove(O)}),tt(N,"handleMouseLeave",function(O){N.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};N.setState(E),N.triggerSyncEvent(E);var P=N.props.onMouseLeave;Ze(P)&&P(E,O)}),tt(N,"handleOuterEvent",function(O){var E=dM(O),P=sn(N.props,"".concat(E));if(E&&Ze(P)){var I,M;/.*touch.*/i.test(E)?M=N.getMouseInfo(O.changedTouches[0]):M=N.getMouseInfo(O),P((I=M)!==null&&I!==void 0?I:{},O)}}),tt(N,"handleClick",function(O){var E=N.getMouseInfo(O);if(E){var P=ve(ve({},E),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var I=N.props.onClick;Ze(I)&&I(P,O)}}),tt(N,"handleMouseDown",function(O){var E=N.props.onMouseDown;if(Ze(E)){var P=N.getMouseInfo(O);E(P,O)}}),tt(N,"handleMouseUp",function(O){var E=N.props.onMouseUp;if(Ze(E)){var P=N.getMouseInfo(O);E(P,O)}}),tt(N,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),tt(N,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&N.handleMouseDown(O.changedTouches[0])}),tt(N,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&N.handleMouseUp(O.changedTouches[0])}),tt(N,"handleDoubleClick",function(O){var E=N.props.onDoubleClick;if(Ze(E)){var P=N.getMouseInfo(O);E(P,O)}}),tt(N,"handleContextMenu",function(O){var E=N.props.onContextMenu;if(Ze(E)){var P=N.getMouseInfo(O);E(P,O)}}),tt(N,"triggerSyncEvent",function(O){N.props.syncId!==void 0&&r0.emit(n0,N.props.syncId,O,N.eventEmitterSymbol)}),tt(N,"applySyncEvent",function(O){var E=N.props,P=E.layout,I=E.syncMethod,M=N.state.updateId,D=O.dataStartIndex,U=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)N.setState(ve({dataStartIndex:D,dataEndIndex:U},g({props:N.props,dataStartIndex:D,dataEndIndex:U,updateId:M},N.state)));else if(O.activeTooltipIndex!==void 0){var F=O.chartX,W=O.chartY,$=O.activeTooltipIndex,H=N.state,z=H.offset,q=H.tooltipTicks;if(!z)return;if(typeof I=="function")$=I(q,O);else if(I==="value"){$=-1;for(var Q=0;Q<q.length;Q++)if(q[Q].value===O.activeLabel){$=Q;break}}var ee=ve(ve({},z),{},{x:z.left,y:z.top}),R=Math.min(F,ee.x+ee.width),L=Math.min(W,ee.y+ee.height),G=q[$]&&q[$].value,K=xy(N.state,N.props.data,$),ie=q[$]?{x:P==="horizontal"?q[$].coordinate:R,y:P==="horizontal"?L:q[$].coordinate}:rP;N.setState(ve(ve({},O),{},{activeLabel:G,activeCoordinate:ie,activePayload:K,activeTooltipIndex:$}))}else N.setState(O)}),tt(N,"renderCursor",function(O){var E,P=N.state,I=P.isTooltipActive,M=P.activeCoordinate,D=P.activePayload,U=P.offset,F=P.activeTooltipIndex,W=P.tooltipAxisBandSize,$=N.getTooltipEventType(),H=(E=O.props.active)!==null&&E!==void 0?E:I,z=N.props.layout,q=O.key||"_recharts-cursor";return Y.createElement(iV,{key:q,activeCoordinate:M,activePayload:D,activeTooltipIndex:F,chartName:n,element:O,isActive:H,layout:z,offset:U,tooltipAxisBandSize:W,tooltipEventType:$})}),tt(N,"renderPolarAxis",function(O,E,P){var I=sn(O,"type.axisType"),M=sn(N.state,"".concat(I,"Map")),D=O.type.defaultProps,U=D!==void 0?ve(ve({},D),O.props):O.props,F=M&&M[U["".concat(I,"Id")]];return w.cloneElement(O,ve(ve({},F),{},{className:st(I,F.className),key:O.key||"".concat(E,"-").concat(P),ticks:La(F,!0)}))}),tt(N,"renderPolarGrid",function(O){var E=O.props,P=E.radialLines,I=E.polarAngles,M=E.polarRadius,D=N.state,U=D.radiusAxisMap,F=D.angleAxisMap,W=ys(U),$=ys(F),H=$.cx,z=$.cy,q=$.innerRadius,Q=$.outerRadius;return w.cloneElement(O,{polarAngles:Array.isArray(I)?I:La($,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(M)?M:La(W,!0).map(function(ee){return ee.coordinate}),cx:H,cy:z,innerRadius:q,outerRadius:Q,key:O.key||"polar-grid",radialLines:P})}),tt(N,"renderLegend",function(){var O=N.state.formattedGraphicalItems,E=N.props,P=E.children,I=E.width,M=E.height,D=N.props.margin||{},U=I-(D.left||0)-(D.right||0),F=IE({children:P,formattedGraphicalItems:O,legendWidth:U,legendContent:m});if(!F)return null;var W=F.item,$=m5(F,oV);return w.cloneElement(W,ve(ve({},$),{},{chartWidth:I,chartHeight:M,margin:D,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),tt(N,"renderTooltip",function(){var O,E=N.props,P=E.children,I=E.accessibilityLayer,M=nn(P,Ut);if(!M)return null;var D=N.state,U=D.isTooltipActive,F=D.activeCoordinate,W=D.activePayload,$=D.activeLabel,H=D.offset,z=(O=M.props.active)!==null&&O!==void 0?O:U;return w.cloneElement(M,{viewBox:ve(ve({},H),{},{x:H.left,y:H.top}),active:z,label:$,payload:z?W:[],coordinate:F,accessibilityLayer:I})}),tt(N,"renderBrush",function(O){var E=N.props,P=E.margin,I=E.data,M=N.state,D=M.offset,U=M.dataStartIndex,F=M.dataEndIndex,W=M.updateId;return w.cloneElement(O,{key:O.key||"_recharts-brush",onChange:hu(N.handleBrushChange,O.props.onChange),data:I,x:Ce(O.props.x)?O.props.x:D.left,y:Ce(O.props.y)?O.props.y:D.top+D.height+D.brushBottom-(P.bottom||0),width:Ce(O.props.width)?O.props.width:D.width,startIndex:U,endIndex:F,updateId:"brush-".concat(W)})}),tt(N,"renderReferenceElement",function(O,E,P){if(!O)return null;var I=N,M=I.clipPathId,D=N.state,U=D.xAxisMap,F=D.yAxisMap,W=D.offset,$=O.type.defaultProps||{},H=O.props,z=H.xAxisId,q=z===void 0?$.xAxisId:z,Q=H.yAxisId,ee=Q===void 0?$.yAxisId:Q;return w.cloneElement(O,{key:O.key||"".concat(E,"-").concat(P),xAxis:U[q],yAxis:F[ee],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:M})}),tt(N,"renderActivePoints",function(O){var E=O.item,P=O.activePoint,I=O.basePoint,M=O.childIndex,D=O.isRange,U=[],F=E.props.key,W=E.item.type.defaultProps!==void 0?ve(ve({},E.item.type.defaultProps),E.item.props):E.item.props,$=W.activeDot,H=W.dataKey,z=ve(ve({index:M,dataKey:H,cx:P.x,cy:P.y,r:4,fill:Nj(E.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},He($,!1)),Au($));return U.push(S.renderActiveDot($,z,"".concat(F,"-activePoint-").concat(M))),I?U.push(S.renderActiveDot($,ve(ve({},z),{},{cx:I.x,cy:I.y}),"".concat(F,"-basePoint-").concat(M))):D&&U.push(null),U}),tt(N,"renderGraphicChild",function(O,E,P){var I=N.filterFormatItem(O,E,P);if(!I)return null;var M=N.getTooltipEventType(),D=N.state,U=D.isTooltipActive,F=D.tooltipAxis,W=D.activeTooltipIndex,$=D.activeLabel,H=N.props.children,z=nn(H,Ut),q=I.props,Q=q.points,ee=q.isRange,R=q.baseLine,L=I.item.type.defaultProps!==void 0?ve(ve({},I.item.type.defaultProps),I.item.props):I.item.props,G=L.activeDot,K=L.hide,ie=L.activeBar,xe=L.activeShape,pe=!!(!K&&U&&z&&(G||ie||xe)),be={};M!=="axis"&&z&&z.props.trigger==="click"?be={onClick:hu(N.handleItemMouseEnter,O.props.onClick)}:M!=="axis"&&(be={onMouseLeave:hu(N.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:hu(N.handleItemMouseEnter,O.props.onMouseEnter)});var me=w.cloneElement(O,ve(ve({},I.props),be));function X(Z){return typeof F.dataKey=="function"?F.dataKey(Z.payload):null}if(pe)if(W>=0){var re,de;if(F.dataKey&&!F.allowDuplicatedCategory){var Be=typeof F.dataKey=="function"?X:"payload.".concat(F.dataKey.toString());re=Cu(Q,Be,$),de=ee&&R&&Cu(R,Be,$)}else re=Q?.[W],de=ee&&R&&R[W];if(xe||ie){var Me=O.props.activeIndex!==void 0?O.props.activeIndex:W;return[w.cloneElement(O,ve(ve(ve({},I.props),be),{},{activeIndex:Me})),null,null]}if(!nt(re))return[me].concat($o(N.renderActivePoints({item:I,activePoint:re,basePoint:de,childIndex:W,isRange:ee})))}else{var Ee,Xe=(Ee=N.getItemByXY(N.state.activeCoordinate))!==null&&Ee!==void 0?Ee:{graphicalItem:me},ge=Xe.graphicalItem,De=ge.item,ae=De===void 0?O:De,ye=ge.childIndex,Oe=ve(ve(ve({},I.props),be),{},{activeIndex:ye});return[w.cloneElement(ae,Oe),null,null]}return ee?[me,null,null]:[me,null]}),tt(N,"renderCustomized",function(O,E,P){return w.cloneElement(O,ve(ve({key:"recharts-customized-".concat(P)},N.props),N.state))}),tt(N,"renderMap",{CartesianGrid:{handler:yu,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:yu},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:yu},YAxis:{handler:yu},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((k=C.id)!==null&&k!==void 0?k:gi("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=_T(N.triggeredAfterMouseMove,(T=C.throttleDelay)!==null&&T!==void 0?T:1e3/60),N.state={},N}return vV(S,y),hV(S,[{key:"componentDidMount",value:function(){var k,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,T=k.children,N=k.data,O=k.height,E=k.layout,P=nn(T,Ut);if(P){var I=P.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,D=xy(this.state,N,I,M),U=this.state.tooltipTicks[I].coordinate,F=(this.state.offset.top+O)/2,W=E==="horizontal",$=W?{x:U,y:F}:{y:U,x:F},H=this.state.formattedGraphicalItems.find(function(q){var Q=q.item;return Q.type.name==="Scatter"});H&&($=ve(ve({},$),H.props.points[I].tooltipPosition),D=H.props.points[I].tooltipPayload);var z={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:M,activePayload:D,activeCoordinate:$};this.setState(z),this.renderCursor(P),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var N,O;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(k){J0([nn(k.children,Ut)],[nn(this.props.children,Ut)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=nn(this.props.children,Ut);if(k&&typeof k.props.shared=="boolean"){var T=k.props.shared?"axis":"item";return d.indexOf(T)>=0?T:i}return i}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var T=this.container,N=T.getBoundingClientRect(),O=F8(N),E={chartX:Math.round(k.pageX-O.left),chartY:Math.round(k.pageY-O.top)},P=N.width/T.offsetWidth||1,I=this.inRange(E.chartX,E.chartY,P);if(!I)return null;var M=this.state,D=M.xAxisMap,U=M.yAxisMap,F=this.getTooltipEventType(),W=p5(this.state,this.props.data,this.props.layout,I);if(F!=="axis"&&D&&U){var $=ys(D).scale,H=ys(U).scale,z=$&&$.invert?$.invert(E.chartX):null,q=H&&H.invert?H.invert(E.chartY):null;return ve(ve({},E),{},{xValue:z,yValue:q},W)}return W?ve(ve({},E),W):null}},{key:"inRange",value:function(k,T){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,E=k/N,P=T/N;if(O==="horizontal"||O==="vertical"){var I=this.state.offset,M=E>=I.left&&E<=I.left+I.width&&P>=I.top&&P<=I.top+I.height;return M?{x:E,y:P}:null}var D=this.state,U=D.angleAxisMap,F=D.radiusAxisMap;if(U&&F){var W=ys(U);return pC({x:E,y:P},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,T=this.getTooltipEventType(),N=nn(k,Ut),O={};N&&T==="axis"&&(N.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Au(this.props,this.handleOuterEvent);return ve(ve({},E),O)}},{key:"addListener",value:function(){r0.on(n0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){r0.removeListener(n0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,T,N){for(var O=this.state.formattedGraphicalItems,E=0,P=O.length;E<P;E++){var I=O[E];if(I.item===k||I.props.key===k.key||T===Da(I.item.type)&&N===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,T=this.state.offset,N=T.left,O=T.top,E=T.height,P=T.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:k},Y.createElement("rect",{x:N,y:O,height:E,width:P})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(T,N){var O=u5(N,2),E=O[0],P=O[1];return ve(ve({},T),{},tt({},E,P.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(T,N){var O=u5(N,2),E=O[0],P=O[1];return ve(ve({},T),{},tt({},E,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(k){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(k){var T=this.state,N=T.formattedGraphicalItems,O=T.activeItem;if(N&&N.length)for(var E=0,P=N.length;E<P;E++){var I=N[E],M=I.props,D=I.item,U=D.type.defaultProps!==void 0?ve(ve({},D.type.defaultProps),D.props):D.props,F=Da(D.type);if(F==="Bar"){var W=(M.data||[]).find(function(q){return rW(k,q)});if(W)return{graphicalItem:I,payload:W}}else if(F==="RadialBar"){var $=(M.data||[]).find(function(q){return pC(k,q)});if($)return{graphicalItem:I,payload:$}}else if(of(I,O)||lf(I,O)||Lc(I,O)){var H=wq({graphicalItem:I,activeTooltipItem:O,itemData:U.data}),z=U.activeIndex===void 0?H:U.activeIndex;return{graphicalItem:ve(ve({},I),{},{childIndex:z}),payload:Lc(I,O)?U.data[H]:I.props.data[H]}}}return null}},{key:"render",value:function(){var k=this;if(!CN(this))return null;var T=this.props,N=T.children,O=T.className,E=T.width,P=T.height,I=T.style,M=T.compact,D=T.title,U=T.desc,F=m5(T,lV),W=He(F,!1);if(M)return Y.createElement(zA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(Z0,oo({},W,{width:E,height:P,title:D,desc:U}),this.renderClipPath(),TN(N,this.renderMap)));if(this.props.accessibilityLayer){var $,H;W.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,W.role=(H=this.props.role)!==null&&H!==void 0?H:"application",W.onKeyDown=function(q){k.accessibilityManager.keyboardEvent(q)},W.onFocus=function(){k.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return Y.createElement(zA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",oo({className:st("recharts-wrapper",O),style:ve({position:"relative",cursor:"default",width:E,height:P},I)},z,{ref:function(Q){k.container=Q}}),Y.createElement(Z0,oo({},W,{width:E,height:P,title:D,desc:U,style:kV}),this.renderClipPath(),TN(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(w.Component);tt(v,"displayName",n),tt(v,"defaultProps",ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),tt(v,"getDerivedStateFromProps",function(y,S){var C=y.dataKey,k=y.data,T=y.children,N=y.width,O=y.height,E=y.layout,P=y.stackOffset,I=y.margin,M=S.dataStartIndex,D=S.dataEndIndex;if(S.updateId===void 0){var U=h5(y);return ve(ve(ve({},U),{},{updateId:0},g(ve(ve({props:y},U),{},{updateId:0}),S)),{},{prevDataKey:C,prevData:k,prevWidth:N,prevHeight:O,prevLayout:E,prevStackOffset:P,prevMargin:I,prevChildren:T})}if(C!==S.prevDataKey||k!==S.prevData||N!==S.prevWidth||O!==S.prevHeight||E!==S.prevLayout||P!==S.prevStackOffset||!lo(I,S.prevMargin)){var F=h5(y),W={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},$=ve(ve({},p5(S,k,E)),{},{updateId:S.updateId+1}),H=ve(ve(ve({},F),W),$);return ve(ve(ve({},H),g(ve({props:y},H),S)),{},{prevDataKey:C,prevData:k,prevWidth:N,prevHeight:O,prevLayout:E,prevStackOffset:P,prevMargin:I,prevChildren:T})}if(!J0(T,S.prevChildren)){var z,q,Q,ee,R=nn(T,Ao),L=R&&(z=(q=R.props)===null||q===void 0?void 0:q.startIndex)!==null&&z!==void 0?z:M,G=R&&(Q=(ee=R.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&Q!==void 0?Q:D,K=L!==M||G!==D,ie=!nt(k),xe=ie&&!K?S.updateId:S.updateId+1;return ve(ve({updateId:xe},g(ve(ve({props:y},S),{},{updateId:xe,dataStartIndex:L,dataEndIndex:G}),S)),{},{prevChildren:T,dataStartIndex:L,dataEndIndex:G})}return null}),tt(v,"renderActiveDot",function(y,S,C){var k;return w.isValidElement(y)?k=w.cloneElement(y,S):Ze(y)?k=y(S):k=Y.createElement(Yc,S),Y.createElement(ct,{className:"recharts-active-dot",key:C},k)});var b=w.forwardRef(function(S,C){return Y.createElement(v,oo({},S,{ref:C}))});return b.displayName=v.displayName,b},aP=Xc({chartName:"LineChart",GraphicalChild:Zo,axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:Tj}),hf=Xc({chartName:"BarChart",GraphicalChild:Vn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:Tj}),xf=Xc({chartName:"PieChart",GraphicalChild:En,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:sf},{axisType:"radiusAxis",AxisComp:nf}],formatAxisMap:g9,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),s0,g5;function LV(){if(g5)return s0;g5=1;function t(r,n){for(var a=-1,s=r==null?0:r.length;++a<s&&n(r[a],a,r)!==!1;);return r}return s0=t,s0}var i0,b5;function sP(){if(b5)return i0;b5=1;var t=Aj(),r=Pm(),n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d){var u=i[l];(!(a.call(i,l)&&r(u,d))||d===void 0&&!(l in i))&&t(i,l,d)}return i0=s,i0}var o0,v5;function Jc(){if(v5)return o0;v5=1;var t=sP(),r=Aj();function n(a,s,i,l){var d=!i;i||(i={});for(var u=-1,m=s.length;++u<m;){var f=s[u],p=l?l(i[f],a[f],f,i,a):void 0;p===void 0&&(p=a[f]),d?r(i,f,p):t(i,f,p)}return i}return o0=n,o0}var l0,y5;function DV(){if(y5)return l0;y5=1;var t=Jc(),r=Vo();function n(a,s){return a&&t(s,r(s),a)}return l0=n,l0}var c0,j5;function RV(){if(j5)return c0;j5=1;function t(r){var n=[];if(r!=null)for(var a in Object(r))n.push(a);return n}return c0=t,c0}var d0,w5;function $V(){if(w5)return d0;w5=1;var t=Jn(),r=Vy(),n=RV(),a=Object.prototype,s=a.hasOwnProperty;function i(l){if(!t(l))return n(l);var d=r(l),u=[];for(var m in l)m=="constructor"&&(d||!s.call(l,m))||u.push(m);return u}return d0=i,d0}var u0,N5;function $j(){if(N5)return u0;N5=1;var t=mT(),r=$V(),n=Ho();function a(s){return n(s)?t(s,!0):r(s)}return u0=a,u0}var m0,S5;function FV(){if(S5)return m0;S5=1;var t=Jc(),r=$j();function n(a,s){return a&&t(s,r(s),a)}return m0=n,m0}var Jl={exports:{}};Jl.exports;var k5;function BV(){return k5||(k5=1,(function(t,r){var n=Yn(),a=r&&!r.nodeType&&r,s=a&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===a,l=i?n.Buffer:void 0,d=l?l.allocUnsafe:void 0;function u(m,f){if(f)return m.slice();var p=m.length,x=d?d(p):new m.constructor(p);return m.copy(x),x}t.exports=u})(Jl,Jl.exports)),Jl.exports}var f0,C5;function UV(){if(C5)return f0;C5=1;function t(r,n){var a=-1,s=r.length;for(n||(n=Array(s));++a<s;)n[a]=r[a];return n}return f0=t,f0}var p0,A5;function WV(){if(A5)return p0;A5=1;var t=Jc(),r=Uy();function n(a,s){return t(a,r(a),s)}return p0=n,p0}var h0,T5;function iP(){if(T5)return h0;T5=1;var t=By(),r=kj(),n=Uy(),a=dT(),s=Object.getOwnPropertySymbols,i=s?function(l){for(var d=[];l;)t(d,n(l)),l=r(l);return d}:a;return h0=i,h0}var x0,E5;function qV(){if(E5)return x0;E5=1;var t=Jc(),r=iP();function n(a,s){return t(a,r(a),s)}return x0=n,x0}var g0,O5;function oP(){if(O5)return g0;O5=1;var t=cT(),r=iP(),n=$j();function a(s){return t(s,n,r)}return g0=a,g0}var b0,P5;function zV(){if(P5)return b0;P5=1;var t=Object.prototype,r=t.hasOwnProperty;function n(a){var s=a.length,i=new a.constructor(s);return s&&typeof a[0]=="string"&&r.call(a,"index")&&(i.index=a.index,i.input=a.input),i}return b0=n,b0}var v0,_5;function Fj(){if(_5)return v0;_5=1;var t=lT();function r(n){var a=new n.constructor(n.byteLength);return new t(a).set(new t(n)),a}return v0=r,v0}var y0,I5;function GV(){if(I5)return y0;I5=1;var t=Fj();function r(n,a){var s=a?t(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return y0=r,y0}var j0,M5;function HV(){if(M5)return j0;M5=1;var t=/\w*$/;function r(n){var a=new n.constructor(n.source,t.exec(n));return a.lastIndex=n.lastIndex,a}return j0=r,j0}var w0,L5;function VV(){if(L5)return w0;L5=1;var t=Wo(),r=t?t.prototype:void 0,n=r?r.valueOf:void 0;function a(s){return n?Object(n.call(s)):{}}return w0=a,w0}var N0,D5;function KV(){if(D5)return N0;D5=1;var t=Fj();function r(n,a){var s=a?t(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return N0=r,N0}var S0,R5;function YV(){if(R5)return S0;R5=1;var t=Fj(),r=GV(),n=HV(),a=VV(),s=KV(),i="[object Boolean]",l="[object Date]",d="[object Map]",u="[object Number]",m="[object RegExp]",f="[object Set]",p="[object String]",x="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",y="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]";function P(I,M,D){var U=I.constructor;switch(M){case g:return t(I);case i:case l:return new U(+I);case v:return r(I,D);case b:case y:case S:case C:case k:case T:case N:case O:case E:return s(I,D);case d:return new U;case u:case p:return new U(I);case m:return n(I);case f:return new U;case x:return a(I)}}return S0=P,S0}var k0,$5;function XV(){if($5)return k0;$5=1;var t=Jn(),r=Object.create,n=(function(){function a(){}return function(s){if(!t(s))return{};if(r)return r(s);a.prototype=s;var i=new a;return a.prototype=void 0,i}})();return k0=n,k0}var C0,F5;function JV(){if(F5)return C0;F5=1;var t=XV(),r=kj(),n=Vy();function a(s){return typeof s.constructor=="function"&&!n(s)?t(r(s)):{}}return C0=a,C0}var A0,B5;function QV(){if(B5)return A0;B5=1;var t=qm(),r=Xn(),n="[object Map]";function a(s){return r(s)&&t(s)==n}return A0=a,A0}var T0,U5;function ZV(){if(U5)return T0;U5=1;var t=QV(),r=Wm(),n=Hy(),a=n&&n.isMap,s=a?r(a):t;return T0=s,T0}var E0,W5;function eK(){if(W5)return E0;W5=1;var t=qm(),r=Xn(),n="[object Set]";function a(s){return r(s)&&t(s)==n}return E0=a,E0}var O0,q5;function tK(){if(q5)return O0;q5=1;var t=eK(),r=Wm(),n=Hy(),a=n&&n.isSet,s=a?r(a):t;return O0=s,O0}var P0,z5;function rK(){if(z5)return P0;z5=1;var t=$y(),r=LV(),n=sP(),a=DV(),s=FV(),i=BV(),l=UV(),d=WV(),u=qV(),m=pT(),f=oP(),p=qm(),x=zV(),g=YV(),v=JV(),b=$r(),y=qy(),S=ZV(),C=Jn(),k=tK(),T=Vo(),N=$j(),O=1,E=2,P=4,I="[object Arguments]",M="[object Array]",D="[object Boolean]",U="[object Date]",F="[object Error]",W="[object Function]",$="[object GeneratorFunction]",H="[object Map]",z="[object Number]",q="[object Object]",Q="[object RegExp]",ee="[object Set]",R="[object String]",L="[object Symbol]",G="[object WeakMap]",K="[object ArrayBuffer]",ie="[object DataView]",xe="[object Float32Array]",pe="[object Float64Array]",be="[object Int8Array]",me="[object Int16Array]",X="[object Int32Array]",re="[object Uint8Array]",de="[object Uint8ClampedArray]",Be="[object Uint16Array]",Me="[object Uint32Array]",Ee={};Ee[I]=Ee[M]=Ee[K]=Ee[ie]=Ee[D]=Ee[U]=Ee[xe]=Ee[pe]=Ee[be]=Ee[me]=Ee[X]=Ee[H]=Ee[z]=Ee[q]=Ee[Q]=Ee[ee]=Ee[R]=Ee[L]=Ee[re]=Ee[de]=Ee[Be]=Ee[Me]=!0,Ee[F]=Ee[W]=Ee[G]=!1;function Xe(ge,De,ae,ye,Oe,Z){var Pe,lt=De&O,At=De&E,ft=De&P;if(ae&&(Pe=Oe?ae(ge,ye,Oe,Z):ae(ge)),Pe!==void 0)return Pe;if(!C(ge))return ge;var Fr=b(ge);if(Fr){if(Pe=x(ge),!lt)return l(ge,Pe)}else{var ur=p(ge),Br=ur==W||ur==$;if(y(ge))return i(ge,lt);if(ur==q||ur==I||Br&&!Oe){if(Pe=At||Br?{}:v(ge),!lt)return At?u(ge,s(Pe,ge)):d(ge,a(Pe,ge))}else{if(!Ee[ur])return Oe?ge:{};Pe=g(ge,ur,lt)}}Z||(Z=new t);var br=Z.get(ge);if(br)return br;Z.set(ge,Pe),k(ge)?ge.forEach(function(vr){Pe.add(Xe(vr,De,ae,vr,ge,Z))}):S(ge)&&ge.forEach(function(vr,oe){Pe.set(oe,Xe(vr,De,ae,oe,ge,Z))});var Ye=ft?At?f:m:At?N:T,Or=Fr?void 0:Ye(ge);return r(Or||ge,function(vr,oe){Or&&(oe=vr,vr=ge[oe]),n(Pe,oe,Xe(vr,De,ae,oe,ge,Z))}),Pe}return P0=Xe,P0}var _0,G5;function nK(){if(G5)return _0;G5=1;var t=Rm(),r=R3();function n(a,s){return s.length<2?a:t(a,r(s,0,-1))}return _0=n,_0}var I0,H5;function aK(){if(H5)return I0;H5=1;var t=Dm(),r=VE(),n=nK(),a=qc();function s(i,l){return l=t(l,i),i=n(i,l),i==null||delete i[a(r(l))]}return I0=s,I0}var M0,V5;function sK(){if(V5)return M0;V5=1;var t=oO();function r(n){return t(n)?void 0:n}return M0=r,M0}var L0,K5;function iK(){if(K5)return L0;K5=1;var t=Yy();function r(n){var a=n==null?0:n.length;return a?t(n,1):[]}return L0=r,L0}var D0,Y5;function oK(){if(Y5)return D0;Y5=1;var t=iK(),r=ST(),n=CT();function a(s){return n(r(s,void 0,t),s+"")}return D0=a,D0}var R0,X5;function lK(){if(X5)return R0;X5=1;var t=Lm(),r=rK(),n=aK(),a=Dm(),s=Jc(),i=sK(),l=oK(),d=oP(),u=1,m=2,f=4,p=l(function(x,g){var v={};if(x==null)return v;var b=!1;g=t(g,function(S){return S=a(S,x),b||(b=S.length>1),S}),s(x,d(x),v),b&&(v=r(v,u|m|f,i));for(var y=g.length;y--;)n(v,g[y]);return v});return R0=p,R0}var cK=lK();const dK=wt(cK);var $0=Xc({chartName:"AreaChart",GraphicalChild:da,axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:Tj});function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wc(t)}function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gy.apply(this,arguments)}function J5(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function F0(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J5(Object(n),!0).forEach(function(a){uK(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function uK(t,r,n){return r=mK(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function mK(t){var r=fK(t,"string");return Wc(r)=="symbol"?r:r+""}function fK(t,r){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function pK(t,r){var n="".concat(r.x||t.x),a=parseInt(n,10),s="".concat(r.y||t.y),i=parseInt(s,10),l="".concat(r?.height||t?.height),d=parseInt(l,10);return F0(F0(F0({},r),lO(t)),{},{height:d,x:a,y:i})}function hK(t){return Y.createElement(Cj,gy({shapeType:"trapezoid",propTransformer:pK},t))}var by;function Q5(t,r){return vK(t)||bK(t,r)||gK(t,r)||xK()}function xK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gK(t,r){if(t){if(typeof t=="string")return Z5(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z5(t,r)}}function Z5(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a}function bK(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(f){m=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function vK(t){if(Array.isArray(t))return t}function Fo(t){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fo(t)}function km(){return km=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},km.apply(this,arguments)}function e3(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,a)}return n}function lr(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?e3(Object(n),!0).forEach(function(a){$a(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function yK(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function t3(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,cP(a.key),a)}}function jK(t,r,n){return r&&t3(t.prototype,r),n&&t3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wK(t,r,n){return r=Cm(r),NK(t,lP()?Reflect.construct(r,n||[],Cm(t).constructor):r.apply(t,n))}function NK(t,r){if(r&&(Fo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SK(t)}function SK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lP=function(){return!!t})()}function Cm(t){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cm(t)}function kK(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&vy(t,r)}function vy(t,r){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},vy(t,r)}function $a(t,r,n){return r=cP(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function cP(t){var r=CK(t,"string");return Fo(r)=="symbol"?r:r+""}function CK(t,r){if(Fo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,r);if(Fo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ha=(function(t){function r(){var n;yK(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=wK(this,r,[].concat(s)),$a(n,"state",{isAnimationFinished:!1}),$a(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ze(l)&&l()}),$a(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ze(l)&&l()}),n}return kK(r,t),jK(r,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"renderTrapezoidsStatically",value:function(a){var s=this,i=this.props,l=i.shape,d=i.activeShape;return a.map(function(u,m){var f=s.isActiveIndex(m)?d:l,p=lr(lr({},u),{},{isActive:s.isActiveIndex(m),stroke:u.stroke});return Y.createElement(ct,km({className:"recharts-funnel-trapezoid"},As(s.props,u,m),{key:"trapezoid-".concat(u?.x,"-").concat(u?.y,"-").concat(u?.name,"-").concat(u?.value),role:"img"}),Y.createElement(hK,km({option:f},p)))})}},{key:"renderTrapezoidsWithAnimation",value:function(){var a=this,s=this.props,i=s.trapezoids,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,m=s.animationEasing,f=s.animationId,p=this.state.prevTrapezoids;return Y.createElement(kn,{begin:d,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"funnel-".concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var g=x.t,v=i.map(function(b,y){var S=p&&p[y];if(S){var C=Ct(S.x,b.x),k=Ct(S.y,b.y),T=Ct(S.upperWidth,b.upperWidth),N=Ct(S.lowerWidth,b.lowerWidth),O=Ct(S.height,b.height);return lr(lr({},b),{},{x:C(g),y:k(g),upperWidth:T(g),lowerWidth:N(g),height:O(g)})}var E=Ct(b.x+b.upperWidth/2,b.x),P=Ct(b.y+b.height/2,b.y),I=Ct(0,b.upperWidth),M=Ct(0,b.lowerWidth),D=Ct(0,b.height);return lr(lr({},b),{},{x:E(g),y:P(g),upperWidth:I(g),lowerWidth:M(g),height:D(g)})});return Y.createElement(ct,null,a.renderTrapezoidsStatically(v))})}},{key:"renderTrapezoids",value:function(){var a=this.props,s=a.trapezoids,i=a.isAnimationActive,l=this.state.prevTrapezoids;return i&&s&&s.length&&(!l||!Ts(l,s))?this.renderTrapezoidsWithAnimation():this.renderTrapezoidsStatically(s)}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.trapezoids,l=a.className,d=a.isAnimationActive,u=this.state.isAnimationFinished;if(s||!i||!i.length)return null;var m=st("recharts-trapezoids",l);return Y.createElement(ct,{className:m},this.renderTrapezoids(),(!d||u)&&on.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curTrapezoids:a.trapezoids,prevTrapezoids:s.curTrapezoids}:a.trapezoids!==s.curTrapezoids?{curTrapezoids:a.trapezoids}:null}}])})(w.PureComponent);by=Ha;$a(Ha,"displayName","Funnel");$a(Ha,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",labelLine:!0,hide:!1,isAnimationActive:!za.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",lastShapeType:"triangle"});$a(Ha,"getRealFunnelData",function(t){var r=t.props,n=r.data,a=r.children,s=He(t.props,!1),i=Yr(a,Hn);return n&&n.length?n.map(function(l,d){return lr(lr(lr({payload:l},s),l),i&&i[d]&&i[d].props)}):i&&i.length?i.map(function(l){return lr(lr({},s),l.props)}):[]});$a(Ha,"getRealWidthHeight",function(t,r){var n=t.props.width,a=r.width,s=r.height,i=r.left,l=r.right,d=r.top,u=r.bottom,m=s,f=a;return L3(n)?f=n:Cs(n)&&(f=f*parseFloat(n)/100),{realWidth:f-i-l-50,realHeight:m-u-d,offsetX:(a-f)/2,offsetY:(s-m)/2}});$a(Ha,"getComposedData",function(t){var r=t.item,n=t.offset,a=by.getRealFunnelData(r),s=r.props,i=s.dataKey,l=s.nameKey,d=s.tooltipType,u=s.lastShapeType,m=s.reversed,f=n.left,p=n.top,x=by.getRealWidthHeight(r,n),g=x.realHeight,v=x.realWidth,b=x.offsetX,y=x.offsetY,S=Math.max.apply(null,a.map(function(O){return Ft(O,i,0)})),C=a.length,k=g/C,T={x:n.left,y:n.top,width:n.width,height:n.height},N=a.map(function(O,E){var P=Ft(O,i,0),I=Ft(O,l,E),M=P,D;if(E!==C-1){if(D=Ft(a[E+1],i,0),D instanceof Array){var U=D,F=Q5(U,1);D=F[0]}}else if(P instanceof Array&&P.length===2){var W=Q5(P,2);M=W[0],D=W[1]}else u==="rectangle"?D=M:D=0;var $=(S-M)*v/(2*S)+p+25+b,H=k*E+f+y,z=M/S*v,q=D/S*v,Q=[{name:I,value:M,payload:O,dataKey:i,type:d}],ee={x:$+z/2,y:H+k/2};return lr(lr({x:$,y:H,width:Math.max(z,q),upperWidth:z,lowerWidth:q,height:k,name:I,val:M,tooltipPayload:Q,tooltipPosition:ee},dK(O,"width")),{},{payload:O,parentViewBox:T,labelViewBox:{x:$+(z-q)/4,y:H,width:Math.abs(z-q)/2+Math.min(z,q),height:k}})});return m&&(N=N.map(function(O,E){var P=O.y-E*k+(C-1-E)*k;return lr(lr({},O),{},{upperWidth:O.lowerWidth,lowerWidth:O.upperWidth,x:O.x-(O.lowerWidth-O.upperWidth)/2,y:O.y-E*k+(C-1-E)*k,tooltipPosition:lr(lr({},O.tooltipPosition),{},{y:P+k/2}),labelViewBox:lr(lr({},O.labelViewBox),{},{y:P})})})),{trapezoids:N,data:a}});var dP=Xc({chartName:"FunnelChart",GraphicalChild:Ha,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",axisComponents:[],defaultProps:{layout:"centric"}});const V={Logo:t=>e.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5z",opacity:"0.6"}),e.jsx("path",{d:"M2 12l10 5 10-5-10-5-10 5z"})]}),Dashboard:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 16v-4a2 2 0 114 0v4"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 16v-2a2 2 0 00-4 0v2"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16v-6a2 2 0 014 0v6"})]}),Reports:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-6l-2 2m2-2l2 2m-2-2v6m4-13L9 3l-3 4m12 0L9 3l-3 4m12 0h-3.375M5.625 7H3m18 0h-3.375m0 0l-3 4m3-4l3 4M3 7l3 4m0 0l-3 4m3-4h3.375"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 21H6a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2h-3"})]}),Leads:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Integrations:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Settings:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Automation:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",opacity:.4})]}),Team:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),Tasks:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Add:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Close:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Sparkles:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M19 3v4M17 5h4M14 11l-1.5 1.5-1.5-1.5-1.5 1.5L8 11l1.5-1.5L8 8l1.5 1.5L11 8l1.5 1.5L14 11zm5 4l-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5L12 15l1.5-1.5L12 12l1.5 1.5L15 12l1.5 1.5L19 15z"})}),Email:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),SMS:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Whatsapp:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.919 6.066l-1.21 4.383 4.536-1.187z"})}),Marketing:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.164.398-.142.854.108 1.204l.527.738c.32.447.27.96-.12 1.45l-.773.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.93l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527a1.125 1.125 0 0 1-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0 .55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.142-.854-.108-1.204l-.527-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.93l.15-.893Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Note:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Call:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Delete:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Filter:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L12 14.414V19a1 1 0 01-1.447.894l-4-2A1 1 0 016 17v-2.586L3.293 6.707A1 1 0 013 6V4z"})}),Success:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Key:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),Export:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Import:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Logout:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Menu:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Activity:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Billing:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 18.75 4.5h-15A2.25 2.25 0 0 0 1.5 6.75v10.5A2.25 2.25 0 0 0 3.75 19.5Z"})}),Support:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),Analytics:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75c0 .621-.504 1.125-1.125 1.125h-2.25A1.125 1.125 0 0 1 3 21v-7.875M3 13.125c0-6.075 4.925-11 11-11h.375c.621 0 1.125.504 1.125 1.125V21h-4.875c-.621 0-1.125-.504-1.125-1.125V13.125c0-1.56-1.24-2.813-2.781-2.813H9.375c-1.54 0-2.781 1.253-2.781 2.813v5.25c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V13.125"})}),Security:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm-1.5 6.445 3 3 1.5-1.5"})}),Rocket:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Bolt:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),ChartBar:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75c0 .621-.504 1.125-1.125 1.125h-2.25A1.125 1.125 0 0 1 3 21v-7.875M3 13.125c0-6.075 4.925-11 11-11h.375c.621 0 1.125.504 1.125 1.125V21h-4.875c-.621 0-1.125-.504-1.125-1.125V13.125c0-1.56-1.24-2.813-2.781-2.813H9.375c-1.54 0-2.781 1.253-2.781 2.813v5.25c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V13.125"})}),Globe:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 13.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),CheckCircle:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),XCircle:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Sun:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),Moon:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),ChatBubble:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Eye:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),EyeOff:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"})}),Google:t=>e.jsxs("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),LinkedIn:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),Twitter:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.298 1.634 4.212 3.793 4.649-.65.177-1.354.238-2.08.083.616 1.948 2.396 3.328 4.491 3.366-1.855 1.449-4.174 2.308-6.711 2.308-.436 0-.867-.025-1.295-.075 2.18 1.391 4.793 2.208 7.622 2.208 8.855 0 13.712-7.34 13.712-13.712 0-.208-.005-.416-.014-.623.938-.678 1.75-1.522 2.404-2.493z"})}),Facebook:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})}),Youtube:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})}),Instagram:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.07-1.645-.07-4.85s.012-3.584.07-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"})}),ListUl:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75V6.75z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75v-.008z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 17.25a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75v-.008z"})]}),ListOl:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Quote:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),Link:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),Blog:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})}),Connect:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),AutomateSteps:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-4.991-2.691v4.992m0 0h-4.992m4.992 0-3.181-3.183a8.25 8.25 0 0 0-11.667 0l-3.181 3.183"})}),Grow:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),MapPin:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),Envelope:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),Phone:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})}),ChevronRight:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),GripVertical:t=>e.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("circle",{cx:"9",cy:"5",r:"1"}),e.jsx("circle",{cx:"15",cy:"5",r:"1"}),e.jsx("circle",{cx:"9",cy:"12",r:"1"}),e.jsx("circle",{cx:"15",cy:"12",r:"1"}),e.jsx("circle",{cx:"9",cy:"19",r:"1"}),e.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),Code:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})}),Calendar:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},tr=({title:t,value:r,subtext:n,icon:a})=>e.jsxs("div",{className:"bg-surface p-5 rounded-xl shadow-sm border border-muted",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-lg bg-muted",children:a}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-subtle",children:t}),e.jsx("p",{className:"text-2xl font-bold text-on-surface",children:r})]})]}),n&&e.jsx("p",{className:"text-xs text-subtle mt-2",children:n})]}),uP=[_a.WEBSITE,_a.FACEBOOK,_a.GOOGLE_ADS,_a.REFERRAL,_a.COLD_CALL];ei.PENDING,ei.INTERESTED,ei.CALL_LATER,ei.NOT_INTERESTED,ei.CONVERTED;const AK=[Wt.SUPER_ADMIN,Wt.ADMIN,Wt.MANAGER,Wt.SALES_REP],TK=[{id:Qt.VIEW_ALL_LEADS,name:"View All Leads",description:"Can see all leads, not just their own or their team's."},{id:Qt.DELETE_LEADS,name:"Delete Leads",description:"Can delete leads from the system."},{id:Qt.ASSIGN_LEADS,name:"Assign & Re-assign Leads",description:"Can change the owner of any lead."},{id:Qt.MANAGE_USERS,name:"Manage Users & Permissions",description:"Can add, edit, and delete users and their permissions."},{id:Qt.MANAGE_TEAMS,name:"Manage Teams",description:"Can create and manage sales teams."},{id:Qt.MANAGE_SETTINGS,name:"Manage Workspace Settings",description:"Can edit pipeline stages and custom fields."},{id:Qt.MANAGE_AUTOMATION,name:"Manage Automation Rules",description:"Can create, edit, and delete automation rules."},{id:Qt.MANAGE_INTEGRATIONS,name:"Manage Integrations",description:"Can connect/disconnect sources and map fields."},{id:Qt.VIEW_TRACKING_DASHBOARD,name:"View Tracking Dashboard",description:"Can view employee productivity and session reports."}],it=({isOpen:t,onClose:r,title:n,children:a})=>(w.useEffect(()=>{const s=i=>{i.key==="Escape"&&r()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4",onClick:r,children:e.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-6xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",onClick:s=>s.stopPropagation(),children:[n&&e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-muted flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-on-surface",children:n}),e.jsx("button",{onClick:r,className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted",children:e.jsx(V.Close,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:a})]})}):null),B0=({label:t,options:r,value:n,onChange:a})=>e.jsxs("div",{className:"flex-1 min-w-[150px]",children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:t}),e.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[{value:"all",label:"All"},...r].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),EK=({widgets:t,setWidgets:r,onClose:n})=>{const a=s=>{r({...t,[s]:!t[s]})};return e.jsxs(it,{isOpen:!0,onClose:n,title:"Customize Dashboard",children:[e.jsx("p",{className:"text-subtle mb-4",children:"Select the built-in widgets you want to see on your dashboard."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-3 bg-background rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.leadsBySource,onChange:()=>a("leadsBySource"),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 font-medium text-on-surface",children:"Leads by Source Chart"})]}),e.jsxs("label",{className:"flex items-center p-3 bg-background rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.leadsByStage,onChange:()=>a("leadsByStage"),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 font-medium text-on-surface",children:"Leads by Stage Chart"})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:e.jsx("button",{type:"button",onClick:n,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Done"})})]})},OK=[{value:"source",label:"Lead Source"},{value:"stage",label:"Pipeline Stage"},{value:"assignedToId",label:"Owner (User)"},{value:"campaign",label:"Campaign"},{value:"createdAt_month",label:"Date (by Month)"}],PK=[{value:"lead_count",label:"Number of Leads"},{value:"deal_value_sum",label:"Total Deal Value"},{value:"deal_value_avg",label:"Average Deal Value"}],_K=[{value:"bar",label:"Bar Chart",icon:e.jsx(V.ChartBar,{className:"h-8 w-8"})},{value:"pie",label:"Pie Chart",icon:e.jsx(V.Reports,{className:"h-8 w-8"})},{value:"line",label:"Line Chart",icon:e.jsx(V.Grow,{className:"h-8 w-8"})},{value:"stat",label:"Stat Card",icon:e.jsx(V.Leads,{className:"h-8 w-8"})}],IK=({onClose:t,onSave:r,existingWidget:n})=>{const[a,s]=w.useState(n||{title:"",chartType:"bar",metric:"lead_count",dimension:"source"}),i=()=>{if(!a.title){alert("Please enter a title for the widget.");return}r({id:n?.id||crypto.randomUUID(),...a}),t()};return e.jsxs(it,{isOpen:!0,onClose:t,title:n?"Edit Widget":"Add New Dashboard Widget",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Title"}),e.jsx("input",{type:"text",value:a.title,onChange:l=>s(d=>({...d,title:l.target.value})),placeholder:"e.g., Leads per Source",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Chart Style"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:_K.map(l=>e.jsxs("button",{onClick:()=>s(d=>({...d,chartType:l.value})),className:`p-4 rounded-lg border-2 flex flex-col items-center justify-center gap-2 ${a.chartType===l.value?"border-primary-500 bg-primary-500/10":"border-muted bg-surface hover:border-primary-400"}`,children:[l.icon,e.jsx("span",{className:"text-sm font-semibold",children:l.label})]},l.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Metric to Display"}),e.jsx("select",{value:a.metric,onChange:l=>s(d=>({...d,metric:l.target.value})),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500",children:PK.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Group By (Dimension)"}),e.jsx("select",{value:a.dimension,onChange:l=>s(d=>({...d,dimension:l.target.value})),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500",children:OK.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:t,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:n?"Save Changes":"Add Widget"})]})]})},MK=({widget:t,leads:r,users:n,pipelineStages:a,onEdit:s,onDelete:i})=>{const[l,d]=w.useState(!1),[u,m]=w.useState(!0),f=w.useMemo(()=>{const x=b=>{switch(t.dimension){case"assignedToId":return n.find(y=>y.id===b.assignedToId)?.name||"Unassigned";case"stage":return a.find(y=>y.id===b.stage)?.name||"Unknown Stage";case"createdAt_month":return new Date(b.createdAt).toISOString().slice(0,7);default:return b[t.dimension]||"N/A"}},g=r.reduce((b,y)=>{const S=x(y);return b[S]||(b[S]=[]),b[S].push(y),b},{});let v=Object.entries(g).map(([b,y])=>{let S=0;switch(t.metric){case"lead_count":S=y.length;break;case"deal_value_sum":S=y.reduce((C,k)=>C+k.dealValue,0);break;case"deal_value_avg":S=y.length>0?y.reduce((C,k)=>C+k.dealValue,0)/y.length:0;break}return{name:b,value:S}});return t.dimension==="createdAt_month"&&(v=v.sort((b,y)=>b.name.localeCompare(y.name))),v},[t,r,n,a]),p=()=>{const x=["#3b82f6","#10b981","#f97316","#8b5cf6","#ec4899"];if(f.length===0)return e.jsx("div",{className:"flex-grow flex items-center justify-center text-subtle",children:"No data for this configuration."});switch(t.chartType){case"stat":const g=f.reduce((y,S)=>y+S.value,0),v=t.metric==="deal_value_avg"?g/f.length:g,b=t.metric.includes("deal_value")?`$${Math.round(v).toLocaleString()}`:v.toLocaleString();return e.jsx("div",{className:"flex-grow flex items-center justify-center text-5xl font-bold",children:b});case"pie":return e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(xf,{children:[e.jsx(En,{data:f,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:f.map((y,S)=>e.jsx(Hn,{fill:x[S%x.length]},`cell-${S}`))}),e.jsx(Ut,{}),e.jsx(Nn,{})]})});case"line":return e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(aP,{data:f,margin:{top:5,right:20,left:-10,bottom:5},children:[e.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),e.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12}}),e.jsx(Cn,{stroke:"var(--subtle)"}),e.jsx(Ut,{}),e.jsx(Zo,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2})]})});case"bar":default:return e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(hf,{data:f,margin:{top:5,right:20,left:-10,bottom:5},children:[e.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),e.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:10},interval:0,angle:-35,textAnchor:"end",height:50}),e.jsx(Cn,{stroke:"var(--subtle)"}),e.jsx(Ut,{}),e.jsx(Vn,{dataKey:"value",radius:[4,4,0,0],children:f.map((y,S)=>e.jsx(Hn,{fill:x[S%x.length]},`cell-${S}`))})]})})}};return e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start p-6 pb-2",children:[e.jsx("button",{onClick:()=>m(!u),className:"flex-grow text-left",children:e.jsx("h3",{className:"font-semibold text-on-surface",children:t.title})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(!u),className:"p-1 text-subtle hover:text-on-surface",children:e.jsx(V.ChevronRight,{className:`w-5 h-5 transition-transform ${u?"rotate-90":""}`})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>d(!l),onBlur:()=>setTimeout(()=>d(!1),200),className:"p-1 text-subtle hover:text-on-surface",children:e.jsx(V.Settings,{className:"w-5 h-5"})}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-surface rounded-md shadow-lg border border-muted z-10",children:[e.jsx("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-on-surface hover:bg-muted",children:"Edit"}),e.jsx("button",{onClick:i,className:"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-muted",children:"Delete"})]})]})]})]}),e.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${u?"max-h-[400px]":"max-h-0"}`,children:e.jsx("div",{className:"p-6 pt-0 h-[340px] flex flex-col",children:p()})})]})},LK=({leads:t,users:r,pipelineStages:n,customWidgets:a,onSaveWidget:s,onDeleteWidget:i})=>{const[l,d]=w.useState("all"),[u,m]=w.useState("all"),[f,p]=w.useState("all"),[x,g]=w.useState(!1),[v,b]=w.useState(!1),[y,S]=w.useState(null),[C,k]=w.useState(!1),[T,N]=w.useState({source:!0,stage:!0}),[O,E]=w.useState(()=>{try{const z=localStorage.getItem("dashboard-widgets");return z?JSON.parse(z):{leadsBySource:!0,leadsByStage:!0}}catch{return{leadsBySource:!0,leadsByStage:!0}}});w.useEffect(()=>{localStorage.setItem("dashboard-widgets",JSON.stringify(O))},[O]);const P=w.useMemo(()=>[...new Set(t.map(z=>z.campaign))],[t]),I=w.useMemo(()=>t.filter(z=>{const q=l==="all"||z.source===l,Q=u==="all"||z.assignedToId===parseInt(u,10),ee=f==="all"||z.campaign===f;return q&&Q&&ee}),[t,l,u,f]),M=I.length,D=I.reduce((z,q)=>z+q.dealValue,0),U=I.filter(z=>z.stage==="closed-won").length,F=M>0?(U/M*100).toFixed(1):"0",W=w.useMemo(()=>{const z=I.reduce((q,Q)=>(q[Q.source]=(q[Q.source]||0)+1,q),{});return Object.entries(z).map(([q,Q])=>({name:q,value:Q}))},[I]),$=w.useMemo(()=>{const z=new Map(n.map(q=>[q.id,{name:q.name,count:0,color:q.color}]));return I.forEach(q=>{const Q=z.get(q.stage);Q&&Q.count++}),Array.from(z.values())},[I,n]),H=(z=null)=>{S(z),b(!0)};return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx(EK,{widgets:O,setWidgets:E,onClose:()=>g(!1)}),v&&e.jsx(IK,{existingWidget:y,onClose:()=>{b(!1),S(null)},onSave:s}),e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Leads Dashboard"}),e.jsx("p",{className:"text-subtle mt-1",children:"An overview of your sales pipeline and performance."})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>g(!0),className:"flex-1 sm:flex-none bg-surface hover:bg-muted text-on-surface font-semibold py-2 px-4 rounded-lg flex items-center justify-center border border-muted",children:"Customize"}),e.jsxs("button",{onClick:()=>H(),className:"flex-1 sm:flex-none bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Add Widget"]})]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-sm border border-muted",children:[e.jsxs("button",{onClick:()=>k(!C),className:"md:hidden w-full flex justify-between items-center font-semibold mb-2",children:[e.jsx("span",{children:"Filters"}),e.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${C?"rotate-90":""}`})]}),e.jsxs("div",{className:`flex-col md:flex-row flex-wrap items-center gap-4 ${C?"flex":"hidden"} md:flex`,children:[e.jsx(B0,{label:"Source",value:l,onChange:d,options:uP.map(z=>({value:z,label:z}))}),e.jsx(B0,{label:"Campaign",value:f,onChange:p,options:P.map(z=>({value:z,label:z}))}),e.jsx(B0,{label:"Owner",value:u,onChange:m,options:r.filter(z=>z.role==="Sales Rep").map(z=>({value:z.id.toString(),label:z.name}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(tr,{title:"Total Leads",value:M.toString(),icon:e.jsx(V.Leads,{className:"h-6 w-6 text-blue-500"})}),e.jsx(tr,{title:"Pipeline Value",value:`$${(D/1e3).toFixed(1)}k`,icon:e.jsx(V.Reports,{className:"h-6 w-6 text-purple-500"})}),e.jsx(tr,{title:"Closed-Won Deals",value:U.toString(),icon:e.jsx(V.Rocket,{className:"h-6 w-6 text-green-500"})}),e.jsx(tr,{title:"Conversion Rate",value:`${F}%`,icon:e.jsx(V.Bolt,{className:"h-6 w-6 text-orange-500"})})]}),I.length===0?e.jsx("div",{className:"text-center py-16 bg-surface rounded-xl shadow-sm border border-muted",children:e.jsx("p",{className:"text-lg font-medium text-subtle",children:"No leads match the current filters."})}):e.jsxs("div",{className:`grid grid-cols-1 ${O.leadsBySource&&O.leadsByStage?"lg:grid-cols-5":""} gap-6`,children:[O.leadsBySource&&e.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-xl shadow-sm border border-muted",children:[e.jsxs("button",{onClick:()=>N(z=>({...z,source:!z.source})),className:"w-full flex justify-between items-center p-6 pb-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Leads by Source"}),e.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${T.source?"rotate-90":""}`})]}),e.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${T.source?"max-h-[350px]":"max-h-0"}`,children:e.jsx("div",{className:"p-6 pt-4 h-[300px]",children:e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(xf,{children:[e.jsx(En,{data:W,dataKey:"value",nameKey:"name",cx:"50%",cy:"45%",outerRadius:80,innerRadius:0,fill:"#8884d8",labelLine:!1,label:({cx:z,cy:q,midAngle:Q,innerRadius:ee,outerRadius:R,percent:L,name:G})=>{if(L<.05)return null;const K=ee+(R-ee)*.5,ie=z+K*Math.cos(-Q*Math.PI/180),xe=q+K*Math.sin(-Q*Math.PI/180);return e.jsx("text",{x:ie,y:xe,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:`${(L*100).toFixed(0)}%`})},children:W.map((z,q)=>e.jsx(Hn,{fill:n[q%n.length]?.color||"#8884d8"},`cell-${q}`))}),e.jsx(Ut,{formatter:z=>`${z} leads`,contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)",borderRadius:"0.75rem",fontSize:"14px"}}),e.jsx(Nn,{wrapperStyle:{color:"var(--on-surface)",fontSize:"12px",paddingTop:"10px"},iconType:"circle"})]})})})})]}),O.leadsByStage&&e.jsxs("div",{className:`${O.leadsBySource?"lg:col-span-3":"col-span-1"} bg-surface rounded-xl shadow-sm border border-muted`,children:[e.jsxs("button",{onClick:()=>N(z=>({...z,stage:!z.stage})),className:"w-full flex justify-between items-center p-6 pb-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Leads by Stage"}),e.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${T.stage?"rotate-90":""}`})]}),e.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${T.stage?"max-h-[350px]":"max-h-0"}`,children:e.jsx("div",{className:"p-6 pt-4 h-[300px]",children:e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(hf,{data:$,margin:{top:5,right:20,left:-10,bottom:5},children:[e.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),e.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12,fill:"var(--subtle)"},angle:-25,textAnchor:"end",height:60}),e.jsx(Cn,{stroke:"var(--subtle)",tick:{fill:"var(--subtle)"}}),e.jsx(Ut,{cursor:{fill:"var(--muted)"},contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)",borderRadius:"0.75rem"}}),e.jsx(Vn,{dataKey:"count",name:"Lead Count",radius:[4,4,0,0],children:$.map((z,q)=>e.jsx(Hn,{fill:z.color},`cell-${q}`))})]})})})})]})]}),e.jsxs("div",{className:"pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-on-surface",children:"My Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-4",children:[a.map(z=>e.jsx(MK,{widget:z,leads:I,users:r,pipelineStages:n,onEdit:()=>H(z),onDelete:()=>i(z.id)},z.id)),e.jsxs("div",{onClick:()=>H(null),className:"bg-surface p-5 rounded-xl border-2 border-dashed border-muted hover:border-primary-500 hover:bg-primary-500/5 transition-colors cursor-pointer flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx(V.Add,{className:"h-12 w-12 text-subtle"}),e.jsx("p",{className:"mt-2 font-semibold text-subtle",children:"Add New Widget"})]})]})]})]})},DK=({users:t,onClose:r,onAssign:n})=>{const[a,s]=w.useState(t[0]?.id),i=()=>{a?n(a):alert("Please select a user to assign the leads to.")};return e.jsxs(it,{isOpen:!0,onClose:r,title:"Assign Leads to a User",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-subtle text-sm",children:"Select a user from the dropdown below. All selected leads will be reassigned to this user, and this action will be recorded in each lead's timeline."}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user-select",className:"block text-sm font-medium text-subtle mb-1",children:"Assign to"}),e.jsxs("select",{id:"user-select",value:a,onChange:l=>s(Number(l.target.value)),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a user"}),t.map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.role,")"]},l.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Assign Leads"})]})]})},Rt={Tasks:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Add:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Close:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Email:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),SMS:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Whatsapp:t=>e.jsx("svg",{...t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.919 6.066l-1.21 4.383 4.536-1.187z"})}),Note:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Call:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),StatusChange:t=>e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 9l4-4L14 9"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 15l-4 4-6-4"})]}),Delete:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Success:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Upload:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Activity:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),XCircle:t=>e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})},RK=({onFileSelect:t,acceptedTypes:r=".csv,.xlsx,.xls",maxSize:n=10,loading:a=!1,error:s})=>{const[i,l]=w.useState(!1),[d,u]=w.useState(null),m=w.useCallback(v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?l(!0):v.type==="dragleave"&&l(!1)},[]),f=w.useCallback(v=>{if(v.preventDefault(),v.stopPropagation(),l(!1),v.dataTransfer.files&&v.dataTransfer.files[0]){const b=v.dataTransfer.files[0];p(b)}},[]),p=v=>{const b=r.split(",").map(S=>S.trim()),y="."+v.name.split(".").pop()?.toLowerCase();if(!b.includes(y)){alert(`Invalid file type. Please upload: ${r}`);return}if(v.size>n*1024*1024){alert(`File size too large. Maximum size: ${n}MB`);return}u(v),t(v)},x=v=>{v.target.files&&v.target.files[0]&&p(v.target.files[0])},g=v=>{if(v===0)return"0 Bytes";const b=1024,y=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(v)/Math.log(b));return parseFloat((v/Math.pow(b,S)).toFixed(2))+" "+y[S]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-muted hover:border-primary-400"} ${a?"opacity-50 pointer-events-none":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:f,children:[e.jsx("input",{type:"file",accept:r,onChange:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:a}),e.jsx("div",{className:"space-y-4",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-subtle",children:"Processing file..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Rt.Upload,{className:"h-12 w-12 mx-auto text-subtle"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-on-surface",children:d?"File Selected":"Upload your file"}),e.jsx("p",{className:"text-sm text-subtle mt-1",children:d?`${d.name} (${g(d.size)})`:`Supported formats: CSV, XLS, XLSX. Maximum size: ${n}MB`}),!d&&e.jsx("p",{className:"text-sm text-subtle mt-2",children:"Drag and drop your file here, or click to browse"})]})]})})]}),s&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})}),d&&!a&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:()=>{u(null),t(null)},className:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Remove file"})})]})},r3=({isImporting:t,progress:r,currentStep:n,result:a,onClose:s,onRetry:i})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-surface rounded-lg p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Importing Leads"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:n}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),e.jsxs("p",{className:"text-xs text-subtle mt-2",children:[Math.round(r),"% complete"]})]})})}):a?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-surface rounded-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`h-12 w-12 mx-auto mb-4 rounded-full flex items-center justify-center ${a.success?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:a.success?"":""}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:a.success?"Import Completed":"Import Failed"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.newLeads}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"New Leads"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.updatedLeads}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Updated"})]}),a.failedLeads>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.failedLeads}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Failed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:a.newLeads+a.updatedLeads}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Total Success"})]})]}),a.errors.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-on-surface mb-2",children:"Errors:"}),e.jsxs("div",{className:"max-h-32 overflow-y-auto bg-red-50 dark:bg-red-900/20 rounded-lg p-3 text-left",children:[a.errors.slice(0,10).map((l,d)=>e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mb-1",children:["Row ",l.row,": ",l.message,l.field&&` (${l.field})`]},d)),a.errors.length>10&&e.jsxs("p",{className:"text-sm text-red-500 mt-2",children:["... and ",a.errors.length-10," more errors"]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[i&&e.jsx("button",{onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Import Again"}),e.jsx("button",{onClick:s,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Close"})]})]})})}):null,$K=t=>{const r=t.split(`
`).filter(s=>s.trim());if(r.length===0)throw new Error("CSV file is empty");const n=r[0].split(",").map(s=>s.trim()),a=[];for(let s=1;s<r.length;s++){const i=r[s].split(",").map(l=>l.trim());if(i.length===n.length){const l={};n.forEach((d,u)=>{l[d]=i[u]||""}),a.push(l)}}return{headers:n,rows:a,totalRows:a.length}},FK=async t=>new Promise((r,n)=>{n(new Error("Excel file parsing is not yet implemented. Please convert your Excel file to CSV format and try again."))}),BK=async t=>{const r=t.name.split(".").pop()?.toLowerCase();switch(r){case"csv":return new Promise((n,a)=>{const s=new FileReader;s.onload=i=>{const l=i.target?.result;try{const d=$K(l);n(d)}catch(d){a(d)}},s.onerror=()=>a(new Error("Failed to read file")),s.readAsText(t)});case"xlsx":case"xls":return FK();default:throw new Error(`Unsupported file format: ${r}. Supported formats: CSV, XLS, XLSX`)}},UK=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),WK=t=>t.replace(/[\s\-\(\)\.]/g,"").length>=10&&/^\+?[\d\s\-\(\)\.]+$/.test(t),qK=(t,r)=>{const n=[];return r.forEach((s,i)=>{if(s.crmField==="---")return;const l=t[s.sourceField];switch(s.crmField){case"email":l?UK(l)||n.push({row:1,field:s.sourceField,message:"Invalid email format"}):n.push({row:1,field:s.sourceField,message:"Email is required"});break;case"phone":l&&!WK(l)&&n.push({row:1,field:s.sourceField,message:"Invalid phone format"});break;case"name":(!l||l.trim().length===0)&&n.push({row:1,field:s.sourceField,message:"Name is required"});break}}),n},gs="/api";class zK{constructor(){this.refreshPromise=null,this.isRefreshing=!1}clearAuthData(){localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),localStorage.removeItem("sessionId"),localStorage.removeItem("activeSessions"),localStorage.removeItem("refreshToken")}async request(r,n){let a=localStorage.getItem("token")||localStorage.getItem("authToken");if(console.log("API Request Debug:",{endpoint:r,hasToken:!!a,tokenLength:a?.length,tokenPreview:a?`${a.substring(0,20)}...`:"none"}),!a){const d=localStorage.getItem("currentUser");if(d)try{const u=JSON.parse(d);a=u.token||u.authToken,console.log("Retrieved token from currentUser data")}catch{console.warn("Failed to parse current user data")}}const s={"Content-Type":"application/json",...n?.headers};if(a&&a.length>10){const d=a.split(".");if(d.length===3)try{const u=JSON.parse(atob(d[1]));s.Authorization=`Bearer ${a}`,console.log("Added authorization header with valid token")}catch{console.warn("Token payload invalid, clearing corrupted token"),this.clearAuthData()}else console.warn("Token format invalid, clearing corrupted token"),this.clearAuthData()}else console.warn("No valid token found for API request");console.log("Making request to:",`${gs}${r}`);const i=await fetch(`${gs}${r}`,{headers:s,credentials:"include",...n});if(console.log("Response status:",i.status,i.statusText),!i.ok){let d="Unknown error";try{d=await i.text()}catch{d="Failed to read error response"}const u=`API request failed: ${i.statusText} (${i.status}) - ${d}`;throw console.error("API Error Response:",{status:i.status,statusText:i.statusText,errorText:d,endpoint:r}),i.status===401&&!r.includes("/super-admin/")&&(console.log("Clearing invalid tokens due to 401 error"),this.clearAuthData()),new Error(u)}let l;try{const d=await i.text();if(!d.trim())throw new Error("Empty response from server");l=JSON.parse(d)}catch(d){throw console.error("JSON Parse Error:",{error:d,responseText:await i.text(),endpoint:r}),new Error(`Invalid JSON response from server: ${d.message}`)}if(console.log("API Response success:",l.success),!l.success){const d=l.message||"API request failed";throw i.status===401&&!r.includes("/super-admin/")&&this.clearAuthData(),new Error(d)}return l.data}async requestWithRetry(r,n,a=3){for(let s=1;s<=a;s++)try{return await this.request(r,n)}catch(i){const l=s===a;if((i.message.includes("401")||i.message.includes("Unauthorized"))&&!l&&!r.includes("/super-admin/"))try{await this.refreshToken();continue}catch{if(l)throw new Error("Authentication failed. Please log in again.");continue}if(l)throw i;await new Promise(u=>setTimeout(u,Math.pow(2,s)*1e3))}throw new Error("Max retries exceeded")}async refreshToken(){if(this.isRefreshing)return this.refreshPromise;this.isRefreshing=!0,this.refreshPromise=this.performTokenRefresh();try{return await this.refreshPromise}finally{this.isRefreshing=!1,this.refreshPromise=null}}async performTokenRefresh(){const r=localStorage.getItem("refreshToken");if(!r)throw new Error("No refresh token available");const n=await fetch(`${gs}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refreshToken:r})});if(!n.ok)throw new Error("Token refresh failed");const a=await n.json();if(a.success&&a.token)return localStorage.setItem("token",a.token),a.refreshToken&&localStorage.setItem("refreshToken",a.refreshToken),a;throw new Error("Invalid refresh response")}async getTenantContext(){return this.requestWithRetry("/tenant/context")}async getReportsData(){return this.requestWithRetry("/data/reports")}async login(r,n){try{const a=await fetch(`${gs}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:r,password:n})});if(!a.ok){let l="Unknown error";try{l=await a.text()}catch{l="Failed to read error response"}let d="Login failed";try{d=JSON.parse(l).message||d}catch{l&&l.length>0&&l!=="Failed to read error response"&&(d=l)}throw console.error("Login API Error:",{status:a.status,statusText:a.statusText,errorText:l,errorMessage:d}),a.status===401?new Error("Invalid email or password"):a.status>=500?new Error("Server error. Please check if the backend server is running."):new Error(d)}let s;try{const l=await a.text();if(!l.trim())throw new Error("Empty response from server");s=JSON.parse(l)}catch(l){throw console.error("Login JSON Parse Error:",l),new Error(`Invalid response from server: ${l.message}`)}if(!s.success)throw new Error(s.message||"Login failed");const i=s.data||s;return i.token&&localStorage.setItem("token",i.token),i.refreshToken&&localStorage.setItem("refreshToken",i.refreshToken),i}catch(a){throw a.message.includes("ECONNREFUSED")||a.message.includes("Network Error")?new Error("Cannot connect to server. Please ensure the backend server is running on port 3000."):a}}async getLeads(r){const n=r?`/leads?organizationId=${r}`:"/leads";return this.requestWithRetry(n)}async getUsers(r){const n=r?`/users?organizationId=${r}`:"/users";return this.requestWithRetry(n)}async getStages(r){const n="/settings/stages";console.log("DEBUG: API getStages called with endpoint:",n,"for org:",r);const a=await this.requestWithRetry(n);return console.log("DEBUG: API getStages result:",a?.length||0,a?.map(s=>({id:s.id,name:s.name}))),a||[]}async getTeams(r){const n="/settings/teams";console.log("DEBUG: API getTeams called with endpoint:",n,"for org:",r);const a=await this.requestWithRetry(n);return console.log("DEBUG: API getTeams result:",a?.length||0,a?.map(s=>({id:s.id,name:s.name}))),a||[]}async getTasks(r){const n=r?`/tasks?organizationId=${r}`:"/tasks";return this.requestWithRetry(n)}async getOrganizations(){return this.requestWithRetry("/organizations")}async getCustomFields(r,n){const a=new URLSearchParams;r&&a.append("organizationId",r),n?.mappableOnly&&a.append("mappableOnly","true"),n?.category&&a.append("category",n.category),n?.integrationType&&a.append("integrationType",n.integrationType);const s=`/custom-fields${a.toString()?`?${a.toString()}`:""}`;return this.requestWithRetry(s)}async getMappableCustomFields(r,n){const a=n?`/custom-fields/mappable/${n}?organizationId=${r}`:`/custom-fields/mappable?organizationId=${r}`;return this.requestWithRetry(a)}async getLeadDisplayFields(r){const n=`/custom-fields/lead-display?organizationId=${r}`;return this.requestWithRetry(n)}async createLead(r){return this.requestWithRetry("/leads",{method:"POST",body:JSON.stringify(r)})}async updateLead(r,n){console.log("API Service - Updating lead:",r,n);try{const a=await this.requestWithRetry(`/leads/${r}`,{method:"PUT",body:JSON.stringify(n)});return console.log("API Service - Update successful:",a),a}catch(a){throw console.error("API Service - Update failed:",a),a}}async getLeadById(r){console.log("API Service - Getting lead by ID:",r);try{const n=await this.requestWithRetry(`/leads/${r}`);return console.log("API Service - Get lead successful:",n),n}catch(n){throw console.error("API Service - Get lead failed:",n),n}}async deleteLead(r){return this.requestWithRetry(`/leads/${r}`,{method:"DELETE"})}async createTask(r){return this.requestWithRetry("/tasks",{method:"POST",body:JSON.stringify(r)})}async updateTask(r,n){return this.requestWithRetry(`/tasks/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteTask(r){return this.requestWithRetry(`/tasks/${r}`,{method:"DELETE"})}async createNote(r){return this.requestWithRetry("/notes",{method:"POST",body:JSON.stringify(r)})}async getNotes(r){return this.requestWithRetry(`/notes/${r}`)}async createLeadNote(r,n){return this.requestWithRetry("/notes",{method:"POST",body:JSON.stringify(n)})}async createLeadTask(r,n){return this.requestWithRetry(`/leads/${r}/tasks`,{method:"POST",body:JSON.stringify(n)})}async getLeadActivities(r,n=50){return this.requestWithRetry(`/leads/${r}/activities?limit=${n}`)}async getCalls(r){return this.requestWithRetry(`/calls/${r}`)}async createCall(r){return this.requestWithRetry("/calls",{method:"POST",body:JSON.stringify(r)})}async updateUser(r,n){return this.requestWithRetry(`/users/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createStage(r){return this.requestWithRetry("/settings/stages",{method:"POST",body:JSON.stringify(r)})}async updateStage(r,n){return this.requestWithRetry(`/settings/stages/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteStage(r){return this.requestWithRetry(`/settings/stages/${r}`,{method:"DELETE"})}async createCustomField(r){return this.requestWithRetry("/custom-fields",{method:"POST",body:JSON.stringify(r)})}async updateCustomField(r,n){return this.requestWithRetry(`/custom-fields/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCustomField(r){return this.requestWithRetry(`/custom-fields/${r}`,{method:"DELETE"})}async createLeadScoreRule(r){return this.requestWithRetry("/lead-score-rules",{method:"POST",body:JSON.stringify(r)})}async updateOrganization(r,n){return this.requestWithRetry(`/organizations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createCustomDomain(r){return this.requestWithRetry("/custom-domains",{method:"POST",body:JSON.stringify(r)})}async updateBlogPost(r,n){return this.requestWithRetry(`/blog-posts/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createBlogPost(r){return this.requestWithRetry("/blog-posts",{method:"POST",body:JSON.stringify(r)})}async deleteBlogPost(r){return this.requestWithRetry(`/blog-posts/${r}`,{method:"DELETE"})}async bulkUpdateLeads(r,n){return this.requestWithRetry("/leads/bulk",{method:"PUT",body:JSON.stringify({leadIds:r,updates:n})})}async sendSMS(r){return this.requestWithRetry("/sms/send",{method:"POST",body:JSON.stringify(r)})}async getSMSIntegrations(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/integrations${n}`)}async createSMSIntegration(r){return this.requestWithRetry("/sms/integrations",{method:"POST",body:JSON.stringify(r)})}async updateSMSIntegration(r,n){return this.requestWithRetry(`/sms/integrations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSMSIntegration(r){return this.requestWithRetry(`/sms/integrations/${r}`,{method:"DELETE"})}async testSMSIntegration(r){return this.requestWithRetry(`/sms/integrations/${r}/test`,{method:"POST"})}async getSMSPhoneLists(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/phone-lists${n}`)}async createSMSPhoneList(r){return this.requestWithRetry("/sms/phone-lists",{method:"POST",body:JSON.stringify(r)})}async getSMSBalance(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/balance${n}`)}async getSMSAnalytics(r,n,a){const s=new URLSearchParams;return r&&s.append("organizationId",r),n&&s.append("startDate",n),a&&s.append("endDate",a),this.requestWithRetry(`/sms/analytics?${s.toString()}`)}async sendBulkSMS(r){return this.requestWithRetry("/sms/send-bulk",{method:"POST",body:JSON.stringify(r)})}async getSMSDeliveryStatus(r){return this.requestWithRetry(`/sms/status/${r}`)}async sendEmail(r){return this.requestWithRetry("/email/send",{method:"POST",body:JSON.stringify(r)})}async getBillingHistory(){return this.requestWithRetry("/billing/history")}async getCurrentSubscription(){return this.requestWithRetry("/billing/subscription/current")}async changeSubscription(r,n="monthly"){return this.requestWithRetry("/billing/subscription/change",{method:"POST",body:JSON.stringify({newPlanId:r,billingCycle:n})})}async getLeadScoreRules(r){return this.requestWithRetry("/settings/score-rules")}async getCustomDashboardWidgets(r,n){const a=new URLSearchParams;r&&a.append("organizationId",r),n&&a.append("userId",n.toString());const s=`/custom-dashboard-widgets${a.toString()?`?${a.toString()}`:""}`;return this.requestWithRetry(s)}async createCustomDashboardWidget(r){return this.requestWithRetry("/custom-dashboard-widgets",{method:"POST",body:JSON.stringify(r)})}async updateCustomDashboardWidget(r,n){return this.requestWithRetry(`/custom-dashboard-widgets/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCustomDashboardWidget(r){return this.requestWithRetry(`/custom-dashboard-widgets/${r}`,{method:"DELETE"})}async deleteLeadScoreRule(r){return this.requestWithRetry(`/settings/score-rules/${r}`,{method:"DELETE"})}async getGoogleAdsIntegrations(){return this.requestWithRetry("/integrations/google-ads")}async createGoogleAdsIntegration(r){return this.requestWithRetry("/integrations/google-ads",{method:"POST",body:JSON.stringify(r)})}async connectGoogleAdsAccount(r,n){return this.requestWithRetry(`/integrations/google-ads/${r}/connect`,{method:"POST",body:JSON.stringify({code:n})})}async getGoogleAdsCampaigns(r,n){const a=n?`?accountId=${n}`:"";return this.requestWithRetry(`/integrations/google-ads/${r}/campaigns${a}`)}async getGoogleAdsConversionData(r,n,a){const s=new URLSearchParams;return n&&s.append("accountId",n),a&&s.append("campaignIds",a),this.requestWithRetry(`/integrations/google-ads/${r}/conversions?${s.toString()}`)}async testGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/test`,{method:"POST"})}async activateGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/activate`,{method:"POST"})}async deactivateGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/deactivate`,{method:"POST"})}async updateGoogleAdsIntegration(r,n){return this.requestWithRetry(`/integrations/google-ads/${r}`,{method:"PUT",body:JSON.stringify(n)})}async getWebsiteIntegrations(){return this.requestWithRetry("/integrations/website")}async createWebsiteIntegration(r){return this.requestWithRetry("/integrations/website",{method:"POST",body:JSON.stringify(r)})}async generateWebsiteTrackingCode(r,n){console.log("API Service - generateWebsiteTrackingCode called with:",{integrationId:r,options:n});const a=localStorage.getItem("token")||localStorage.getItem("authToken"),s={"Content-Type":"application/json"};if(a&&a.length>10){const d=a.split(".");if(d.length===3)try{JSON.parse(atob(d[1])),s.Authorization=`Bearer ${a}`}catch{console.warn("Token payload invalid")}}const i=await fetch(`${gs}/integrations/website/${r}/tracking-code`,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(n||{})});if(!i.ok){let d="Unknown error";try{d=await i.text()}catch{d="Failed to read error response"}throw new Error(`API request failed: ${i.statusText} (${i.status}) - ${d}`)}const l=await i.json();if(console.log("API Service - generateWebsiteTrackingCode raw response:",l),!l.success)throw new Error(l.message||"API request failed");return l}async getWebsiteAnalytics(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/website/${r}/analytics?${a.toString()}`)}async getWebsiteFormPerformance(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),n?.formId&&a.append("formId",n.formId),this.requestWithRetry(`/integrations/website/${r}/forms?${a.toString()}`)}async testWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/test`,{method:"POST"})}async activateWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/activate`,{method:"POST"})}async deactivateWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/deactivate`,{method:"POST"})}async addWebsiteForm(r,n){return this.requestWithRetry(`/integrations/website/${r}/forms`,{method:"POST",body:JSON.stringify(n)})}async updateWebsiteForm(r,n,a){return this.requestWithRetry(`/integrations/website/${r}/forms/${n}`,{method:"PUT",body:JSON.stringify(a)})}async trackWebsiteFormSubmission(r,n,a){return fetch(`${gs}/integrations/track/${r}/form`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:n,metadata:a})}).then(s=>s.json())}async trackWebsitePageView(r,n,a){return fetch(`${gs}/integrations/track/${r}/pageview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageData:n,metadata:a})}).then(s=>s.json())}async trackWebsiteCustomEvent(r,n,a,s){return fetch(`${gs}/integrations/track/${r}/event`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:n,eventData:a,metadata:s})}).then(i=>i.json())}async getCloudTelephonyIntegrations(){return this.requestWithRetry("/integrations/cloud-telephony")}async createCloudTelephonyIntegration(r){return this.requestWithRetry("/integrations/cloud-telephony",{method:"POST",body:JSON.stringify(r)})}async updateCloudTelephonyIntegration(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}`,{method:"DELETE"})}async testCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/test`,{method:"POST"})}async activateCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/activate`,{method:"POST"})}async deactivateCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/deactivate`,{method:"POST"})}async getCloudTelephonyPhoneNumbers(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers`)}async addCloudTelephonyPhoneNumber(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers`,{method:"POST",body:JSON.stringify(n)})}async updateCloudTelephonyPhoneNumber(r,n,a){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers/${n}`,{method:"PUT",body:JSON.stringify(a)})}async removeCloudTelephonyPhoneNumber(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers/${n}`,{method:"DELETE"})}async getCloudTelephonyCallLogs(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),n?.limit&&a.append("limit",n.limit.toString()),this.requestWithRetry(`/integrations/cloud-telephony/${r}/calls?${a.toString()}`)}async getCloudTelephonyAnalytics(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/cloud-telephony/${r}/analytics?${a.toString()}`)}async makeTestCall(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/test-call`,{method:"POST",body:JSON.stringify(n)})}async updateCloudTelephonyIVR(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/ivr`,{method:"PUT",body:JSON.stringify(n)})}async getCloudTelephonyIVR(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/ivr`)}async getCloudTelephonyRecordings(r,n){const a=n?`?callSid=${n}`:"";return this.requestWithRetry(`/integrations/cloud-telephony/${r}/recordings${a}`)}async getCloudTelephonyUsage(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/cloud-telephony/${r}/usage?${a.toString()}`)}async getSuperAdminDashboardData(){return this.requestWithRetry("/super-admin/dashboard")}async getSuperAdminOrganizations(){return this.requestWithRetry("/super-admin/organizations")}async getSuperAdminUsers(){return this.requestWithRetry("/super-admin/users")}async getSuperAdminLeads(){return this.requestWithRetry("/super-admin/leads")}async getSuperAdminTasks(){return this.requestWithRetry("/super-admin/tasks")}async getSuperAdminSupportTickets(){return this.requestWithRetry("/super-admin/support-tickets")}async getSuperAdminInquiries(){return this.requestWithRetry("/super-admin/inquiries")}async getSuperAdminBlogPosts(){return this.requestWithRetry("/super-admin/blog")}async createSuperAdminOrganization(r){return this.requestWithRetry("/super-admin/organizations",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminOrganization(r,n){return this.requestWithRetry(`/super-admin/organizations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminOrganization(r){return this.requestWithRetry(`/super-admin/organizations/${r}`,{method:"DELETE"})}async createSuperAdminPlan(r){return this.requestWithRetry("/super-admin/plans",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminPlan(r,n){return this.requestWithRetry(`/super-admin/plans/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminPlan(r){return this.requestWithRetry(`/super-admin/plans/${r}`,{method:"DELETE"})}async updateSuperAdminSupportTicketStatus(r,n){return this.requestWithRetry(`/super-admin/support-tickets/${r}/status`,{method:"PUT",body:JSON.stringify({status:n})})}async updateSuperAdminInquiryStatus(r,n){return this.requestWithRetry(`/super-admin/inquiries/${r}/status`,{method:"PUT",body:JSON.stringify({status:n})})}async getSuperAdminAnalytics(){return this.requestWithRetry("/super-admin/analytics")}async getSuperAdminMonitoring(){return this.requestWithRetry("/super-admin/monitoring")}async getSystemInfo(){return this.requestWithRetry("/super-admin/monitoring")}async getSuperAdminAuditLogs(){return this.requestWithRetry("/super-admin/audit-logs")}async getSuperAdminGlobalSettings(){return this.requestWithRetry("/super-admin/settings")}async getSuperAdminPaymentGatewaySettings(){return this.requestWithRetry("/super-admin/payment-gateways")}async testSuperAdminPaymentGateway(r,n,a,s){return this.requestWithRetry("/super-admin/test-payment",{method:"POST",body:JSON.stringify({provider:r,amount:n||1,currency:a||"USD",description:s||"Payment Gateway Test"})})}async createSuperAdminPaymentGatewaySetting(r){return this.requestWithRetry("/super-admin/payment-gateways",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminPaymentGatewaySetting(r,n){return this.requestWithRetry(`/super-admin/payment-gateways/${r}`,{method:"PUT",body:JSON.stringify(n)})}async updateSuperAdminPaymentGatewaySettingByProvider(r,n){return console.log("API Service - Updating payment gateway by provider:",r,n),this.requestWithRetry(`/super-admin/payment-gateways/provider?provider=${encodeURIComponent(r)}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminPaymentGatewaySetting(r){return this.requestWithRetry(`/super-admin/payment-gateways/${r}`,{method:"DELETE"})}}const Le=new zK,GK=({onNext:t,onFileSelect:r,loading:n,error:a})=>e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Upload your file"}),e.jsx("p",{className:"text-sm text-subtle mb-6",children:"Supported formats: CSV, XLS, XLSX. Maximum size: 10MB"}),e.jsx(RK,{onFileSelect:r,loading:n,error:a}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>{const s=["full_name","email","phone_number","alternate_phone","city","company","lead_source","pipeline_stage","assigned_user_email","deal_value","expected_close_date","campaign_name","facebook_campaign","facebook_adset","facebook_ad","course_program","lead_status","job_title","work_experience_years","preferred_callback_time","dba_interest_reason"],i=["John Doe","john.doe@example.com","+1-555-0123","+1-555-0124","New York","Acme Corp","Facebook","Qualified","sales@company.com","50000","2024-12-31","Q4 Campaign","FB_Q4_2024","AdSet_001","Ad_001","MBA Program","Interested","Marketing Manager","5","Evening","Career advancement and leadership skills"],l=[s.join(","),i.join(",")].join(`
`),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),m=URL.createObjectURL(d);u.setAttribute("href",m),u.setAttribute("download","crm_import_sample.csv"),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m8 2h3m-3 0h-3m0 0v3m0-3v-3"})}),"Download Sample CSV Format"]})}),e.jsxs("div",{className:"mt-6 text-xs text-subtle",children:[e.jsx("p",{children:"Your file data will be processed securely and not stored permanently."}),e.jsx("p",{className:"mt-2",children:" Download the sample format above to see how to structure your data."})]})]}),HK=({customFieldDefs:t,users:r,fileData:n,onMappingsChange:a,onValidationChange:s})=>{const[i,l]=w.useState({}),d=[{id:"name",label:"Full Name",required:!0,category:"Basic"},{id:"email",label:"Email Address",required:!0,category:"Contact"},{id:"phone",label:"Phone Number",required:!1,category:"Contact"},{id:"alternatePhone",label:"Alternate Phone",required:!1,category:"Contact"},{id:"city",label:"City",required:!1,category:"Location"},{id:"company",label:"Company",required:!1,category:"Basic"},{id:"source",label:"Lead Source",required:!1,category:"Marketing"},{id:"stage",label:"Pipeline Stage",required:!1,category:"Sales"},{id:"assignedToId",label:"Assigned User (Owner)",required:!1,category:"Assignment"},{id:"dealValue",label:"Deal Value",required:!1,category:"Sales"},{id:"closeDate",label:"Expected Close Date",required:!1,category:"Sales"},{id:"campaign",label:"Campaign Name",required:!1,category:"Marketing"},{id:"facebookCampaign",label:"Facebook Campaign",required:!1,category:"Marketing"},{id:"facebookAdset",label:"Facebook Ad Set",required:!1,category:"Marketing"},{id:"facebookAd",label:"Facebook Ad",required:!1,category:"Marketing"},{id:"course",label:"Course/Program",required:!1,category:"Education"},...t.filter(f=>f.isMappable).map(f=>({id:`customFields.${f.id}`,label:f.name,required:f.isRequired,category:"Custom Fields"}))];w.useEffect(()=>{const f={};n.headers.forEach(b=>{const y=b.toLowerCase(),S=n.rows[0]?.[b]||"";y.includes("email")||S.includes("@")?f[b]="email":y.includes("full_name")||y.includes("name")||y.includes("first_name")||y.includes("last_name")?f[b]="name":y.includes("phone")||y.includes("mobile")||y.includes("contact")?f[b]="phone":y.includes("alternate_phone")||y.includes("secondary_phone")?f[b]="alternatePhone":y.includes("city")||y.includes("location")?f[b]="city":y.includes("company")||y.includes("organization")?f[b]="company":y.includes("lead_source")||y.includes("source")?f[b]="source":y.includes("pipeline_stage")||y.includes("stage")?f[b]="stage":y.includes("assigned_user")||y.includes("owner")||y.includes("assignee")?f[b]="assignedToId":y.includes("deal_value")||y.includes("value")||y.includes("amount")?f[b]="dealValue":y.includes("close_date")||y.includes("expected_close")?f[b]="closeDate":y.includes("campaign")||y.includes("campaign_name")?f[b]="campaign":y.includes("facebook_campaign")?f[b]="facebookCampaign":y.includes("facebook_adset")||y.includes("ad_set")?f[b]="facebookAdset":y.includes("facebook_ad")?f[b]="facebookAd":(y.includes("course")||y.includes("program"))&&(f[b]="course")});const p={...f,...i};l(p),a(p);const x=["name","email"],v=Object.values(p).filter(b=>x.includes(b)).length===x.length;s({isValid:v,errors:v?[]:[`Missing required field mappings: ${x.filter(b=>!Object.values(p).includes(b)).join(", ")}`],warnings:[]})},[n.headers,n.rows]);const u=f=>{const p=n.rows.slice(0,3).map(x=>x[f]).filter(x=>x!=null&&x!=="");return p.length>0?p.slice(0,2).join(", ")+(p.length>2?"...":""):"No data"},m=Object.values(i).filter(Boolean).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-on-surface mb-2",children:"Map Fields"}),e.jsxs("p",{className:"text-sm text-subtle mb-4",children:[m," of ",n.headers.length," columns mapped"]}),e.jsxs("button",{onClick:()=>{const f=["full_name","email","phone_number","alternate_phone","city","company","lead_source","pipeline_stage","assigned_user_email","deal_value","expected_close_date","campaign_name","facebook_campaign","facebook_adset","facebook_ad","course_program","lead_status","job_title","work_experience_years","preferred_callback_time","dba_interest_reason"],p=["John Doe","john.doe@example.com","+1-555-0123","+1-555-0124","New York","Acme Corp","Facebook","Qualified","sales@company.com","50000","2024-12-31","Q4 Campaign","FB_Q4_2024","AdSet_001","Ad_001","MBA Program","Interested","Marketing Manager","5","Evening","Career advancement and leadership skills"],x=[f.join(","),p.join(",")].join(`
`),g=new Blob([x],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),b=URL.createObjectURL(g);v.setAttribute("href",b),v.setAttribute("download","crm_import_sample.csv"),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium mb-4",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m8 2h3m-3 0h-3m0 0v3m0-3v-3"})}),"Download Sample CSV"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b border-muted text-sm font-semibold text-on-surface",children:[e.jsx("div",{children:"CRM Field"}),e.jsx("div",{children:"CSV Header (select to map)"}),e.jsx("div",{children:"Custom Field Options"})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.map(f=>{const p=Object.keys(i).find(x=>i[x]===f.id)||"";return p&&u(p),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"font-semibold text-sm text-on-surface bg-primary-50 dark:bg-primary-900/20 px-3 py-2 rounded",children:[f.label," ",f.required?"*":""]}),e.jsx("div",{className:"text-xs text-subtle px-3",children:f.category})]}),e.jsxs("select",{value:p,onChange:x=>{const g={...i};Object.keys(g).forEach(v=>{g[v]===f.id&&delete g[v]}),x.target.value&&(g[x.target.value]=f.id),l(g),a(g)},className:"bg-background border border-muted px-3 py-2 rounded text-sm focus:border-primary-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"-- Select CSV Header --"}),n.headers.map(x=>e.jsx("option",{value:x,children:x},x))]}),e.jsxs("div",{className:"space-y-2",children:[f.id==="course"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:"Course Selection:"}),e.jsx("input",{type:"text",placeholder:"Type course name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),e.jsx("div",{className:"text-xs text-muted",children:"CSV values will be validated against these options"})]}),f.id==="stage"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:"Pipeline Stage Selection:"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Type stage name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"})}),e.jsx("div",{className:"text-xs text-muted",children:"CSV values will be matched to pipeline stages"})]}),f.id==="source"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:"Lead Source Selection:"}),e.jsx("input",{type:"text",placeholder:"Type source name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),e.jsx("div",{className:"text-xs text-muted",children:"CSV values will be categorized by source"})]}),f.id.startsWith("customFields.")&&(()=>{const x=t.find(g=>`customFields.${g.id}`===f.id);if(x&&x.type==="dropdown"&&x.options){const[g,v]=w.useState(""),[b,y]=w.useState(!1),S=g?x.options.filter(C=>C.toLowerCase().includes(g.toLowerCase())):x.options;return e.jsxs("div",{className:"space-y-1 relative",children:[e.jsx("div",{className:"font-medium text-xs",children:"Custom Field Options:"}),e.jsx("input",{type:"text",placeholder:"Type option value...",value:g,onChange:C=>{v(C.target.value),y(!0)},onFocus:()=>y(!0),onBlur:()=>setTimeout(()=>y(!1),200),className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),b&&g&&S.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-background border border-muted rounded-b shadow-lg max-h-32 overflow-y-auto z-10",children:S.map(C=>e.jsx("div",{className:"px-2 py-1 text-xs hover:bg-muted cursor-pointer",onClick:()=>{v(C),y(!1)},children:C},C))}),e.jsx("div",{className:"text-xs text-muted",children:"CSV values must match these predefined options"})]})}else if(x)return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:"Field Type:"}),e.jsxs("div",{className:"text-xs text-muted",children:[x.type==="text"&&"Text input field - any text value accepted",x.type==="number"&&"Number field - CSV values must be numeric",x.type==="date"&&"Date field - CSV values should be in date format",!["text","number","date","dropdown"].includes(x.type)&&"Custom field - validation depends on field type"]})]});return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:"Custom Field:"}),e.jsx("div",{className:"text-xs text-muted",children:"User-defined field values"})]})})(),!["course","stage","source"].includes(f.id)&&!f.id.startsWith("customFields.")&&e.jsxs("div",{className:"text-xs text-muted",children:[e.jsx("div",{className:"font-medium",children:"Field Type:"}),e.jsx("div",{children:"Free text input - any value accepted"})]})]})]},f.id)})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>{const f={};n.headers.forEach(p=>{f[p]=""}),l(f),a(f)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:()=>{const f={};n.headers.forEach(x=>{const g=x.toLowerCase(),v=n.rows[0]?.[x]||"";g.includes("email")||v.includes("@")?f[x]="email":g.includes("full_name")||g.includes("name")||g.includes("first_name")||g.includes("last_name")?f[x]="name":g.includes("phone")||g.includes("mobile")||g.includes("contact")?f[x]="phone":g.includes("alternate_phone")||g.includes("secondary_phone")?f[x]="alternatePhone":g.includes("city")||g.includes("location")?f[x]="city":g.includes("company")||g.includes("organization")?f[x]="company":g.includes("lead_source")||g.includes("source")?f[x]="source":g.includes("pipeline_stage")||g.includes("stage")?f[x]="stage":g.includes("assigned_user")||g.includes("owner")||g.includes("assignee")?f[x]="assignedToId":g.includes("deal_value")||g.includes("value")||g.includes("amount")?f[x]="dealValue":g.includes("close_date")||g.includes("expected_close")?f[x]="closeDate":g.includes("campaign")||g.includes("campaign_name")?f[x]="campaign":g.includes("facebook_campaign")?f[x]="facebookCampaign":g.includes("facebook_adset")||g.includes("ad_set")?f[x]="facebookAdset":g.includes("facebook_ad")?f[x]="facebookAd":(g.includes("course")||g.includes("program"))&&(f[x]="course")});const p={...f};l(p),a(p)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:"Apply Auto-Mapping"})]})]})},VK=({mappings:t,fileHeaders:r,sampleData:n,onImport:a})=>{const s=t.filter(d=>d.crmField!=="---"),l=["name","email"].filter(d=>!s.some(u=>u.crmField===d));return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Review a sample of your data before importing. Only mapped fields will be imported."}),l.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-semibold",children:["Missing required fields: ",l.join(", ")]}),e.jsx("p",{className:"text-xs text-red-500 dark:text-red-300 mt-1",children:"Please map these fields to continue with the import."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-on-surface mb-2",children:"Field Mappings:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:s.map(d=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono bg-muted px-2 py-1 rounded text-xs",children:d.sourceField}),e.jsx("span",{className:"text-subtle",children:""}),e.jsx("span",{className:"font-semibold",children:d.crmField})]},d.sourceField))})]}),e.jsxs("div",{className:"overflow-x-auto bg-background rounded-lg p-2",children:[e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-left border-b border-muted",children:s.map(d=>e.jsx("th",{className:"p-2 font-semibold",children:d.crmField},d.sourceField))})}),e.jsx("tbody",{children:n.slice(0,5).map((d,u)=>e.jsx("tr",{className:"border-t border-muted",children:s.map(m=>e.jsx("td",{className:"p-2 truncate max-w-32",title:d[m.sourceField],children:d[m.sourceField]||"-"},m.sourceField))},u))})]}),n.length>5&&e.jsxs("p",{className:"text-xs text-subtle mt-2 text-center",children:["Showing 5 of ",n.length," rows"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsxs("strong",{children:["Ready to import ",n.length," leads."]}),l.length===0?e.jsx(e.Fragment,{children:' Click "Confirm & Import" to start the import process.'}):e.jsx(e.Fragment,{children:" Please go back and map the required fields first."})]})})]})},KK=({customFieldDefs:t,users:r,onClose:n,onImport:a,currentOrganization:s,existingLeads:i})=>{const[l,d]=w.useState(1),[u,m]=w.useState(null),[f,p]=w.useState({}),[x,g]=w.useState({isValid:!1,errors:[],warnings:[]}),[v,b]=w.useState(null),[y,S]=w.useState(!1),[C,k]=w.useState(""),[T,N]=w.useState(!1),[O,E]=w.useState(0),[P,I]=w.useState(null),[M,D]=w.useState(""),U=async z=>{b(z),S(!0),k("");try{const q=await BK(z);m(q);const Q={};q.headers.forEach(ee=>{Q[ee]=""}),p(Q),d(2)}catch(q){k(q instanceof Error?q.message:"Failed to parse file")}finally{S(!1)}},F=async()=>{if(!(!u||!f)){N(!0),E(0),D("Preparing import...");try{const z=Object.entries(f).filter(([pe,be])=>be).map(([pe,be])=>({sourceField:pe,crmField:be})),Q=["name","email"].filter(pe=>!z.some(be=>be.crmField===pe));if(Q.length>0)throw new Error(`Missing required field mappings: ${Q.join(", ")}`);D("Validating data..."),E(10);const ee=[];if(u.rows.forEach((pe,be)=>{const me=Object.entries(f).filter(([re,de])=>de).map(([re,de])=>({sourceField:re,crmField:de}));qK(pe,me).forEach(re=>{ee.push({...re,row:be+2})})}),ee.length>0&&ee.length>u.rows.length*.5)throw new Error(`Too many validation errors (${ee.length}). Please check your data and mappings.`);D("Detecting duplicates..."),E(30);const R=[],L=[],G=[],K=[];u.rows.forEach((pe,be)=>{try{const me={organizationId:s.id,activities:[],score:0,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};z.forEach(re=>{const de=pe[re.sourceField];if(de&&re.crmField)if(re.crmField.startsWith("customFields.")){const Be=re.crmField.replace("customFields.","");me.customFields=me.customFields||{},me.customFields[Be]=de}else if(re.crmField==="assignedToId"){const Be=r.find(Me=>Me.email.toLowerCase()===de.toLowerCase());Be&&(me.assignedToId=Be.id)}else me[re.crmField]=de}),me.source||(me.source=_a.WEBSITE),me.stage||(me.stage="new"),me.followUpStatus||(me.followUpStatus=ei.PENDING),i.find(re=>re.email.toLowerCase()===me.email?.toLowerCase())?G.push(be+2):R.push(me)}catch(me){K.push({row:be+2,message:me instanceof Error?me.message:"Unknown error"})}}),D("Creating leads..."),E(60);const ie=[];for(let pe=0;pe<R.length;pe++){try{const be=await Le.createLead(R[pe]);ie.push(be)}catch(be){console.error(`Failed to create lead ${pe+1}:`,be),K.push({row:u.rows.indexOf(u.rows[pe])+2,message:`Failed to create lead: ${be instanceof Error?be.message:"Unknown error"}`})}E(60+pe/R.length*30)}D("Finalizing..."),E(95);const xe={success:!0,newLeads:ie.length,updatedLeads:L.length,failedLeads:K.length+G.length,errors:[...K,...G.map(pe=>({row:pe,message:"Duplicate lead (skipped)"}))]};I(xe),E(100),ie.length>0&&a(ie)}catch(z){I({success:!1,newLeads:0,updatedLeads:0,failedLeads:u.rows.length,errors:[{row:0,message:z instanceof Error?z.message:"Import failed"}]})}finally{N(!1)}}},W=()=>{I(null),E(0),N(!1),D("")},$=["Upload File","Map Fields","Review & Import"];if(P)return e.jsx(it,{isOpen:!0,onClose:n,title:"Import Results",children:e.jsx("div",{className:"p-4",children:e.jsx(r3,{isImporting:!1,progress:100,currentStep:"",result:P,onClose:n,onRetry:W})})});return e.jsxs(it,{isOpen:!0,onClose:n,title:`Import Leads (${l}/${$.length}) - ${$[l-1]}`,children:[e.jsxs("div",{className:"p-4",children:[l===1&&e.jsx(GK,{onNext:z=>{m(z),d(2)},onFileSelect:U,loading:y,error:C}),l===2&&u&&e.jsx(HK,{customFieldDefs:t,users:r,fileData:u,onMappingsChange:p,onValidationChange:g}),l===3&&u&&e.jsx(VK,{mappings:Object.entries(f).filter(([z,q])=>q).map(([z,q])=>({sourceField:z,crmField:q})),fileHeaders:u.headers,sampleData:u.rows,onImport:F})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:()=>l>1?d(l-1):n(),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",disabled:T,children:l===1?"Cancel":"Back"}),e.jsx("button",{type:"button",onClick:()=>{l<3?d(l+1):F()},disabled:T||l===3&&!H(),className:"bg-primary-600 hover:bg-primary-700 disabled:bg-muted disabled:text-subtle text-white font-bold py-2 px-4 rounded-lg",children:T?"Importing...":l<3?"Next":"Confirm & Import"})]}),T&&e.jsx("div",{className:"mt-4",children:e.jsx(r3,{isImporting:!0,progress:O,currentStep:M,result:null,onClose:()=>{}})})]});function H(){if(!u||!f)return!1;const z=Object.values(f).filter(Boolean),q=["name","email"],Q=q.every(ee=>z.includes(ee));return console.log("canProceedWithImport check:",{hasRequiredFields:Q,validationIsValid:x.isValid,mappedFields:z,requiredFields:q,mappings:f}),Q&&x.isValid}},Qc=({conditions:t,onConditionsChange:r,users:n,pipelineStages:a,customFieldDefs:s,headerContent:i})=>{const l=w.useMemo(()=>[{id:"name",name:"Name",type:"text"},{id:"email",name:"Email",type:"text"},{id:"phone",name:"Phone",type:"text"},{id:"city",name:"City",type:"text"},{id:"course",name:"Course",type:"text"},{id:"company",name:"Company",type:"text"},{id:"campaign",name:"Campaign",type:"text"},{id:"tags",name:"Tags",type:"text"},{id:"source",name:"Source",type:"select",options:uP},{id:"stage",name:"Stage",type:"select",options:a.map(p=>p.id),displayOptions:a.map(p=>p.name)},{id:"assignedToId",name:"Owner",type:"select",options:[0,...n.map(p=>p.id)],displayOptions:["System",...n.map(p=>p.name)]},{id:"score",name:"Score",type:"number"},{id:"dealValue",name:"Deal Value",type:"number"},...s.map(p=>({...p,name:`(Custom) ${p.name}`}))],[n,a,s]),d=()=>r([...t,{field:"name",operator:"contains",value:"",logic:"AND"}]),u=p=>r(t.filter((x,g)=>g!==p)),m=(p,x)=>r(t.map((g,v)=>v===p?x:g)),f=(p,x)=>{const g=l.find(v=>v.id===p.field);return g?.type==="select"?e.jsx("select",{value:p.value,onChange:v=>m(x,{...p,value:v.target.value}),className:"bg-surface border border-muted rounded-md p-2 w-full text-sm",children:(g.options||[]).map((v,b)=>e.jsx("option",{value:v.toString(),children:(g.displayOptions||g.options||[])[b]},v.toString()))}):e.jsx("input",{type:g?.type||"text",value:p.value,onChange:v=>m(x,{...p,value:v.target.value}),placeholder:"Value",className:"bg-surface border border-muted rounded-md p-2 w-full text-sm"})};return e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-sm border border-muted space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Filters"}),i]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:t.map((p,x)=>e.jsxs("div",{className:"space-y-2",children:[x>0&&e.jsx("div",{className:"pl-2",children:e.jsxs("select",{value:p.logic,onChange:g=>m(x,{...p,logic:g.target.value}),className:"bg-muted text-on-surface text-xs font-bold p-1 rounded-md",children:[e.jsx("option",{value:"AND",children:"AND"}),e.jsx("option",{value:"OR",children:"OR"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-2 items-center",children:[e.jsx("select",{value:p.field,onChange:g=>m(x,{...p,field:g.target.value}),className:"md:col-span-3 bg-background border border-muted rounded-md p-2 text-sm",children:l.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))}),e.jsxs("select",{value:p.operator,onChange:g=>m(x,{...p,operator:g.target.value}),className:"md:col-span-3 bg-background border border-muted rounded-md p-2 text-sm",children:[e.jsx("option",{value:"contains",children:"Contains"}),e.jsx("option",{value:"equals",children:"Equals"}),e.jsx("option",{value:"not_equals",children:"Does not equal"}),e.jsx("option",{value:"gt",children:"Greater than"}),e.jsx("option",{value:"lt",children:"Less than"})]}),e.jsx("div",{className:"md:col-span-3",children:f(p,x)}),e.jsx("button",{onClick:()=>u(x),className:"text-red-400 hover:text-red-500",children:e.jsx(V.Delete,{className:"w-5 h-5"})})]})]},x))}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-muted mt-3",children:[e.jsx("button",{type:"button",onClick:d,className:"text-sm text-primary-500 font-semibold hover:text-primary-600",children:"+ Add condition"}),t.length>0&&e.jsx("button",{type:"button",onClick:()=>r([]),className:"text-sm text-subtle font-semibold hover:text-on-surface",children:"Clear all"})]})]})},yy=({lead:t,currentUser:r,type:n,onClose:a,onSchedule:s})=>{const[i,l]=w.useState(""),[d,u]=w.useState(()=>{const f=new Date;return f.setDate(f.getDate()+1),f.setHours(10,0,0,0),f.toISOString().slice(0,16)}),m=()=>{if(!i.trim()||!d){alert("Message and schedule time are required.");return}s({leadId:t.id,type:n,content:i,scheduledAt:new Date(d).toISOString(),status:"PENDING"}),a()};return e.jsxs(it,{isOpen:!0,onClose:a,title:`Schedule ${n} for ${t.name}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Schedule for"}),e.jsx("input",{type:"datetime-local",value:d,onChange:f=>u(f.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message"}),e.jsx("textarea",{value:i,onChange:f=>l(f.target.value),rows:8,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",placeholder:`Write your ${n.toLowerCase()} message here...`})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:"Schedule Message"})]})]})},n3=["Connected","No Answer","Left Voicemail","Wrong Number","Call Back Later"],jy=({onClose:t,onLog:r})=>{const[n,a]=w.useState(n3[0]),[s,i]=w.useState(""),l=()=>{if(!s.trim()){alert("Please enter some notes for the call.");return}r(n,s)};return e.jsxs(it,{isOpen:!0,onClose:t,title:"Log a Call",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Call Outcome"}),e.jsx("select",{value:n,onChange:d=>a(d.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",children:n3.map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Notes"}),e.jsx("textarea",{value:s,onChange:d=>i(d.target.value),rows:5,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",placeholder:"e.g., Discussed pricing, customer is interested in the pro plan..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:t,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:l,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Log Call"})]})]})},wy=({lead:t,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=w.useState("template"),[d,u]=w.useState(r[0]?.id||""),[m,f]=w.useState(""),p=()=>{if(i==="custom")return m;const g=r.find(v=>v.id===d);return g?g.body.replace(/{{name}}/g,t.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,t.course||"the course"):""},x=()=>{const g=p();if(!g.trim()){alert("Message cannot be empty.");return}console.log(`Sending SMS to ${t.phone}: "${g}"`),alert(`SMS message sent to ${t.name} at ${t.phone}`),s(g)};return e.jsxs(it,{isOpen:!0,onClose:a,title:`Send SMS to ${t.name}`,children:[e.jsxs("div",{className:"flex border-b border-muted mb-4",children:[e.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),e.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),e.jsx("select",{value:d,onChange:g=>u(g.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),e.jsx("textarea",{value:m,onChange:g=>f(g.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[e.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),e.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:p()})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:x,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.SMS,{className:"h-5 w-5 mr-2"})," Send SMS"]})]})]})},Zc=({isOpen:t,onClose:r,title:n,children:a})=>(w.useEffect(()=>{const s=i=>{i.key==="Escape"&&r()};return t&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[t,r]),t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:e.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[n&&e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:n}),e.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"max-h-[80vh] sm:max-h-[70vh] overflow-y-auto",children:a})]})})]})}):null),YK=({isOpen:t,onClose:r,onSave:n,leadId:a,currentUser:s,isLoading:i=!1})=>{const[l,d]=w.useState(""),[u,m]=w.useState(!1),f=()=>{!l.trim()||i||(n({content:l.trim(),leadId:a}),d(""),m(!1),r())},p=g=>{g.preventDefault()},x=()=>{i||(d(""),m(!1),r())};return e.jsx(Zc,{isOpen:t,onClose:x,title:"Add Note",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Note Content"}),e.jsx("textarea",{value:l,onChange:g=>{d(g.target.value),m(g.target.value.trim().length>0)},placeholder:"Add a note about this lead...",rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none",disabled:i,autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:x,className:"bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-4 rounded-lg disabled:opacity-50",disabled:i,children:"Cancel"}),e.jsx("button",{type:"button",onClick:f,className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center gap-2 disabled:opacity-50",disabled:!l.trim()||i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rt.Note,{className:"h-4 w-4"}),u?"Save Note":"Add Note"]})})]})]})})},XK=t=>{const r=w.useRef(null),n=w.useRef(null);w.useCallback(()=>{if(r.current?.readyState!==WebSocket.OPEN)try{console.log("WebSocket disabled - no backend endpoint available");return}catch(i){console.error("Failed to create WebSocket connection:",i)}},[t]);const a=w.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),r.current&&(r.current.close(1e3,"Component unmounting"),r.current=null)},[]),s=w.useCallback(i=>{console.warn("WebSocket is disabled - message not sent:",i)},[]);return w.useEffect(()=>()=>{a()},[a]),{isConnected:!1,sendMessage:s}},JK=({activities:t,users:r,currentUser:n,leadId:a,onRefresh:s,onManualRefresh:i,realTime:l=!0,disableAutoRefresh:d=!1})=>{const[u,m]=w.useState([]),[f,p]=w.useState(!1),[x,g]=w.useState(new Set),[v,b]=w.useState(l),[y,S]=w.useState(!1),C=w.useRef(null),{isConnected:k}=XK(a),T=w.useCallback(async()=>{if(a){p(!0);try{console.log("ActivityTimeline: Loading all activities for lead:",a);const[W,$,H]=await Promise.all([Le.getNotes(a),Le.getCalls(a),Le.getTasks(n.organizationId)]),z=[];(W||[]).forEach(R=>{z.push({id:R.id||`note-${R.createdAt}`,type:"NOTE",content:`Note added: <i class="whitespace-pre-wrap">"${R.content}"</i>`,timestamp:R.createdAt,authorId:R.authorId})}),($||[]).forEach(R=>{z.push({id:R.id||`call-${R.createdAt}`,type:"CALL",content:`Call logged. Outcome: <strong>${R.outcome}</strong>. Notes: <i class="whitespace-pre-wrap">"${R.notes||""}"</i>`,timestamp:R.createdAt,authorId:R.authorId})}),(H||[]).filter(R=>R.leadId===a).forEach(R=>{z.push({id:R.id||`task-${R.createdAt}`,type:R.isCompleted?"TASK_COMPLETED":"TASK_CREATED",content:R.isCompleted?`Task completed: "${R.title}"`:`Task created: "${R.title}"`,timestamp:R.updatedAt||R.createdAt,authorId:R.createdById})});const Q=new Map;z.forEach(R=>{const L=`${R.type}-${R.timestamp}-${R.content}`;Q.set(L,R)}),(t||[]).forEach(R=>{const L=R,G=`${L.type}-${L.timestamp}-${L.content}`;Q.has(G)||Q.set(G,L)});const ee=Array.from(Q.values()).sort((R,L)=>new Date(L.timestamp).getTime()-new Date(R.timestamp).getTime());m(ee),console.log("ActivityTimeline: Loaded activities:",ee.length)}catch(W){console.error("ActivityTimeline: Error loading activities:",W)}finally{p(!1)}}},[a,n.organizationId,t]);w.useEffect(()=>{T()},[T]);const N=Y.useMemo(()=>{const W={};return u.forEach($=>{const H=new Date($.timestamp).toDateString();W[H]||(W[H]=[]),W[H].push($)}),Object.keys(W).forEach($=>{W[$].sort((H,z)=>new Date(z.timestamp).getTime()-new Date(H.timestamp).getTime())}),W},[u]);w.useEffect(()=>{if(!l||!v||k||d){C.current&&(console.log("ActivityTimeline: Stopping polling due to condition change"),clearInterval(C.current),C.current=null);return}return console.log("ActivityTimeline: Starting polling every 5 seconds for instant updates"),C.current=setInterval(()=>{console.log("ActivityTimeline: Polling triggered - fetching latest activities"),T()},5e3),()=>{console.log("ActivityTimeline: Stopping polling"),C.current&&(clearInterval(C.current),C.current=null)}},[l,v,k,d,T]),w.useEffect(()=>{const W=H=>{H.detail?.leadId===a&&(console.log("ActivityTimeline: Timeline refresh event received, fetching activities immediately"),T())},$=H=>{H.detail?.leadId===a&&(console.log("ActivityTimeline: Instant activity update received, refreshing immediately"),T())};return window.addEventListener("timelineRefresh",W),window.addEventListener("activityUpdate",$),()=>{window.removeEventListener("timelineRefresh",W),window.removeEventListener("activityUpdate",$)}},[a,T]),w.useEffect(()=>{},[k,l]),w.useEffect(()=>()=>{console.log("ActivityTimeline: Component cleanup, ensuring no polling remains active"),C.current&&(clearInterval(C.current),C.current=null),b(!1)},[]),w.useEffect(()=>{l||(console.log("ActivityTimeline: realTime disabled, stopping all polling"),C.current&&(clearInterval(C.current),C.current=null),b(!1))},[l]),w.useEffect(()=>{console.log("ActivityTimeline Debug:",{isRealTimeEnabled:v,hasOnRefresh:!!s,isConnected:k,shouldPoll:v&&!!s&&!k})},[v,s,k]),w.useEffect(()=>{l||console.log("ActivityTimeline: realTime prop is false, ensuring no polling")},[l]),w.useEffect(()=>{!l&&v&&(console.log("ActivityTimeline: Forcing isRealTimeEnabled to false due to realTime prop"),b(!1))},[l,v]),w.useEffect(()=>{l||(console.log("ActivityTimeline: realTime is false, completely disabling polling"),b(!1))},[l]);const O=W=>{const $=new Set(x);$.has(W)?$.delete(W):$.add(W),g($)},E=(W,$,H)=>{const z={className:"h-5 w-5"};let q="";switch(W){case"EMAIL":q="text-blue-500";break;case"WHATSAPP":q="text-green-500";break;case"SMS":q="text-purple-500";break;case"CALL":q="text-indigo-500";break;case"NOTE":q="text-yellow-500";break;case"TASK_CREATED":q="text-cyan-500";break;case"TASK_COMPLETED":q="text-emerald-500";break;case"LEAD_CREATED":q="text-blue-600";break;case"MESSAGE_SCHEDULED":q="text-orange-500";break;case"FIELD_UPDATE":case"STATUS_CHANGE":q=P(H||"");break;default:q="text-gray-500"}switch($==="failed"?z.className+=" text-red-500":$==="sent"||$==="delivered"?z.className+=" text-green-600":$==="pending"?z.className+=" text-yellow-500":$==="initiated"?z.className+=" text-blue-500":z.className+=` ${q}`,W){case"EMAIL":return e.jsx(Rt.Email,{...z});case"WHATSAPP":return e.jsx(Rt.Whatsapp,{...z});case"SMS":return e.jsx(Rt.SMS,{...z});case"CALL":return e.jsx(Rt.Call,{...z});case"NOTE":return e.jsx(Rt.Note,{...z});case"TASK_CREATED":return e.jsx(Rt.Tasks,{...z});case"TASK_COMPLETED":return e.jsx(Rt.Tasks,{...z});case"LEAD_CREATED":return e.jsx(Rt.Add,{...z});case"MESSAGE_SCHEDULED":return e.jsx(Rt.Activity,{...z});case"FIELD_UPDATE":case"STATUS_CHANGE":return e.jsx(Rt.StatusChange,{...z});default:return e.jsx("div",{className:"text-gray-400",children:""})}},P=W=>{const $=W.toLowerCase();return $.includes("stage")||$.includes("pipeline")||$.includes("status")?"text-orange-500":$.includes("assigned to")||$.includes("owner")||$.includes("assigned")?"text-purple-500":$.includes("deal value")||$.includes("price")||$.includes("cost")?"text-green-500":$.includes("email")||$.includes("phone")||$.includes("contact")?"text-blue-500":$.includes("name")||$.includes("company")||$.includes("city")||$.includes("course")?"text-teal-500":$.includes("campaign")||$.includes("facebook")||$.includes("source")?"text-pink-500":"text-gray-500"},I=W=>{if(!W)return null;const H={sent:{label:"Saved",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},delivered:{label:"Delivered",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},failed:{label:"Failed",className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"},pending:{label:"Saving...",className:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},initiated:{label:"Initiated",className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}}[W];return H?e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${H.className}`,children:H.label}):null},M=W=>{const $=r.find(z=>z.id===W.authorId),H=new Date(W.timestamp).toLocaleString();return e.jsxs("div",{className:"flex items-start space-x-3 p-4 hover:bg-muted/30 rounded-lg transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:E(W.type,W.status,W.content)}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-on-surface text-sm",children:D(W)}),I(W.status)]}),e.jsxs("span",{className:"text-xs text-subtle",children:[$?.name?.split(" (")[0]||"System","  ",H]})]}),e.jsx("p",{className:"text-sm text-subtle mb-2 line-clamp-2",children:U(W)}),F(W)&&e.jsxs("div",{className:"mt-2",children:[e.jsx("button",{onClick:()=>O(W.id),className:"text-xs text-primary-600 hover:text-primary-700 dark:text-primary-400",children:x.has(W.id)?"Show less":"Show more"}),x.has(W.id)&&e.jsx("div",{className:"mt-2 p-3 bg-muted/30 rounded border",children:F(W)})]})]})]})},D=W=>{switch(W.type){case"EMAIL":return"Email Sent";case"WHATSAPP":return"WhatsApp Message";case"SMS":return"SMS Sent";case"CALL":return"Call Logged";case"NOTE":return"Note Added";case"TASK_CREATED":return"Task Created";case"TASK_COMPLETED":return"Task Completed";case"LEAD_CREATED":return"Lead Created";case"MESSAGE_SCHEDULED":return"Message Scheduled";case"FIELD_UPDATE":return"Field Updated";case"STATUS_CHANGE":return"Status Changed";default:return"Activity"}},U=W=>{const $=W.content.replace(/<[^>]*>/g,"");return $.length>100?`${$.substring(0,100)}...`:$},F=W=>{const $=[];W.metadata?.duration&&$.push(`Duration: ${W.metadata.duration} seconds`),W.metadata?.templateId&&$.push("Template used"),W.metadata?.recipientCount&&$.push(`Recipients: ${W.metadata.recipientCount}`),W.metadata?.errorMessage&&$.push(`Error: ${W.metadata.errorMessage}`);const H=W.content.replace(/<[^>]*>/g,"");return H.length>100&&$.push(`Full content: ${H}`),$.length>0?e.jsx("div",{className:"space-y-1 text-xs text-subtle",children:$.map((z,q)=>e.jsxs("div",{children:[" ",z]},q))}):null};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-on-surface",children:"Activity Timeline"}),d&&e.jsxs("div",{className:"flex items-center gap-1 text-xs bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300 px-2 py-1 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Manual Refresh"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-600 dark:text-orange-400",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Live (Polling)"})]})}),e.jsx("button",{onClick:()=>{console.log(`ActivityTimeline: ${v?"Pausing":"Resuming"} real-time updates`),b(!v)},className:`text-xs px-2 py-1 rounded transition-colors ${v?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200":"bg-muted text-subtle hover:bg-muted/80"}`,children:v?"Pause":"Resume"}),s&&e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered by user"),S(!0),T(),setTimeout(()=>S(!1),2e3)},disabled:y,className:`text-xs px-3 py-1.5 rounded-lg flex items-center gap-1.5 transition-all duration-200 ${y?"bg-gray-400 text-white cursor-not-allowed scale-95":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white shadow-sm hover:shadow-md active:scale-95"}`,title:"Refresh timeline manually",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})})]})]}),e.jsx("div",{className:"space-y-4",children:Object.keys(N).length===0?e.jsxs("div",{className:"text-center py-8 text-subtle",children:[e.jsx(Rt.Activity,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No activities yet"}),e.jsx("p",{className:"text-sm",children:"Activities will appear here when you interact with this lead"})]}):Object.entries(N).map(([W,$])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-primary-700 dark:text-primary-300",children:new Date(W).getDate()})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-medium text-on-surface",children:new Date(W).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-xs text-subtle",children:[$.length," activit",$.length===1?"y":"ies"]})]})]}),e.jsx("div",{className:"ml-5 space-y-1 border-l border-muted pl-4",children:$.map((H,z)=>e.jsx("div",{children:M(H)},H.id))})]},W))})]})},QK=({lead:t,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=w.useState("template"),[d,u]=w.useState(r[0]?.id||""),[m,f]=w.useState(""),p=()=>{if(i==="custom")return m;const g=r.find(v=>v.id===d);return g?g.body.replace(/{{name}}/g,t.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,t.course||"the course").replace(/{{dealValue}}/g,t.dealValue.toLocaleString()):""},x=()=>{const g=p();if(!g.trim()){console.error("Message Required: Please enter a message before sending.");return}console.log(`Sending WhatsApp to ${t.phone}: "${g}"`),console.log(`WhatsApp Sent: Message sent to ${t.name} at ${t.phone}`),s(g)};return e.jsxs(it,{isOpen:!0,onClose:a,title:`Send WhatsApp to ${t.name}`,children:[e.jsxs("div",{className:"flex border-b border-muted mb-4",children:[e.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),e.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),e.jsxs("select",{value:d,onChange:g=>u(g.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",className:"bg-background text-on-surface",children:"Select a template"}),r.map(g=>e.jsx("option",{value:g.id,className:"bg-background text-on-surface",children:g.name},g.id))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),e.jsx("textarea",{value:m,onChange:g=>f(g.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[e.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),e.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:p()})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Whatsapp,{className:"h-5 w-5 mr-2"})," Send Message"]})]})]})},ZK=({lead:t,onAddTask:r,onCancel:n,currentUser:a,onTaskCreated:s})=>{const[i,l]=w.useState(""),[d,u]=w.useState(""),[m,f]=w.useState(""),[p,x]=w.useState(!0),g=w.useRef(null),v=w.useRef(null);w.useEffect(()=>{const k=new Date;k.setDate(k.getDate()+1),k.setHours(9,0,0,0);const T=k.toISOString().split("T")[0],N=k.toTimeString().slice(0,5);u(T),f(N)},[]);const b=async k=>{if(k.preventDefault(),console.log("AddTaskForm: handleSubmit called with title:",i),!i.trim()){console.error("Task Title Required: Please enter a title for the task.");return}if(!d||!m){console.error("Date and Time Required: Please select a due date and time.");return}try{const T=new Date(`${d}T${m}`);if(T<=new Date){console.error("Invalid Date/Time: Please select a future date and time.");return}const N={title:i.trim(),leadId:t.id,assignedToId:t.assignedToId,isCompleted:!1,dueDate:T.toISOString(),createdById:a.id,organizationId:t.organizationId,reminderEnabled:p};console.log("AddTaskForm: Creating task:",N);const O=await Le.createTask(N);console.log("AddTaskForm: Task created successfully:",O),p&&y(O,T),r(O),s&&(console.log("AddTaskForm: Calling onTaskCreated callback"),s()),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:t.id}})),l(""),n(),console.log("Task Created: Task has been created successfully!")}catch(T){console.error("AddTaskForm: Error creating task:",T),console.error("Task Creation Failed:",T.message||"Please try again.")}},y=(k,T)=>{const N=new Date,O=T.getTime()-N.getTime();O>0&&setTimeout(()=>{S(k)},O)},S=k=>{"Notification"in window&&Notification.permission==="granted"?new Notification(`Task Reminder: ${k.title}`,{body:`Task for lead "${t.name}" is due now`,icon:"/favicon.ico",tag:`task-${k.id}`}):C(k)},C=k=>{const T=document.createElement("div");T.id="task-reminder-popup",T.innerHTML=`
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-surface rounded-xl p-6 max-w-lg mx-4 shadow-2xl border border-muted">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-500 text-white rounded-full p-3 mr-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-on-surface"> Task Reminder</h3>
                            <p class="text-sm text-subtle">Don't miss your important task!</p>
                        </div>
                    </div>

                    <div class="bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 mb-6 border-l-4 border-primary-500">
                        <h4 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-2">
                            "${k.title}"
                        </h4>
                        <p class="text-primary-700 dark:text-primary-300 mb-3">
                            Hey there! You have an important task to complete for your lead <strong>"${t.name}"</strong>.
                        </p>
                        <p class="text-primary-600 dark:text-primary-400 text-sm">
                            Completing this task will boost your performance and help convert more leads. Stay on top of your game! 
                        </p>
                    </div>

                    <div class="flex gap-3 justify-end">
                        <button onclick="document.getElementById('task-reminder-popup').remove()"
                                class="bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-6 rounded-lg transition-colors">
                            Remind me later
                        </button>
                        <button onclick="window.location.href='/leads/${t.id}'"
                                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-lg flex items-center gap-2 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                            Go to Task
                        </button>
                    </div>

                    <div class="mt-4 text-center">
                        <p class="text-xs text-subtle">
                            This reminder will auto-close in <span id="countdown">10</span> seconds
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(T);let N=10;const O=T.querySelector("#countdown");setInterval(()=>{N--,O&&(O.textContent=N.toString())},1e3)};return e.jsxs("form",{onSubmit:k=>{console.log("AddTaskForm: Form submitted"),b(k)},className:"p-4 space-y-4 bg-surface border border-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Task Title"}),e.jsx("input",{type:"text",value:i,onChange:k=>{l(k.target.value)},placeholder:"What needs to be done?",autoFocus:!0,className:"w-full bg-background border border-muted p-3 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:g,type:"date",value:d,onChange:k=>u(k.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-month-field]:text-on-surface [&::-webkit-datetime-edit-day-field]:text-on-surface [&::-webkit-datetime-edit-year-field]:text-on-surface",min:new Date().toISOString().split("T")[0],required:!0}),e.jsx("button",{type:"button",onClick:()=>{g.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:e.jsx(V.Calendar,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:v,type:"time",value:m,onChange:k=>f(k.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-hour-field]:text-on-surface [&::-webkit-datetime-edit-minute-field]:text-on-surface [&::-webkit-datetime-edit-ampm-field]:text-on-surface",required:!0}),e.jsx("button",{type:"button",onClick:()=>{v.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:e.jsx(V.Activity,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"reminder-enabled",checked:p,onChange:k=>x(k.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),e.jsx("label",{htmlFor:"reminder-enabled",className:"text-sm text-subtle",children:"Enable reminder notification"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:()=>{console.log("AddTaskForm: Cancel button clicked"),n()},className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Add Task"})]})]})},zl=({title:t,children:r,initiallyOpen:n=!1})=>{const[a,s]=w.useState(n);return e.jsxs("div",{className:"border-t border-muted first-of-type:border-t-0",children:[e.jsxs("button",{onClick:()=>s(!a),className:"md:cursor-default md:pointer-events-none w-full flex justify-between items-center py-3 text-left",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:t}),e.jsx(V.ChevronRight,{className:`md:hidden h-5 w-5 text-subtle transition-transform ${a?"rotate-90":""}`})]}),e.jsx("div",{className:`pl-2 pb-4 space-y-4 md:block ${a?"block":"hidden"}`,children:r})]})},mP=({lead:t,users:r,tasks:n,pipelineStages:a,customFieldDefs:s,whatsAppTemplates:i,smsTemplates:l,onUpdateLead:d,onUpdateTask:u,onAddTask:m,onScheduleMessage:f,currentUser:p,onClose:x})=>{const[g,v]=w.useState("timeline"),[b,y]=w.useState(t),[S,C]=w.useState(!1),[k,T]=w.useState(!1),[N,O]=w.useState(!1),[E,P]=w.useState(!1);w.useEffect(()=>{console.log("LeadDetailModal: isAddingTask changed to:",E)},[E]);const[I,M]=w.useState(!1),[D,U]=w.useState({open:!1,type:null}),[F,W]=w.useState(!1),[$,H]=w.useState(!1),[z,q]=w.useState(!1),[Q,ee]=w.useState([]),[R,L]=w.useState([]),[G,K]=w.useState([]),ie=w.useMemo(()=>t,[t]),[xe,pe]=w.useState([]),be=w.useCallback(async()=>{try{const[ae,ye,Oe]=await Promise.all([Le.getNotes(t.id),Le.getCalls(t.id),Le.getTasks(t.organizationId)]);ee(ae||[]),L(ye||[]),K(Oe.filter(Z=>Z.leadId===t.id)||[]),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:t.id}}))}catch(ae){console.error("Error loading notes, calls, and tasks:",ae)}},[t.id,t.organizationId]);w.useEffect(()=>{be()},[be]);const me=()=>{localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),localStorage.removeItem("sessionId"),localStorage.removeItem("activeSessions")},X=()=>{const ae=localStorage.getItem("token")||localStorage.getItem("authToken");if(ae&&ae.split(".").length===3)try{const ye=JSON.parse(atob(ae.split(".")[1]));return!0}catch{return console.warn("Token validation failed, clearing corrupted token"),me(),!1}return!1};w.useEffect(()=>{y(t),H(!1),pe([])},[t]);const re=(ae,ye)=>{const Oe=ie[ae],Z=ye;if(y(Pe=>({...Pe,[ae]:ye})),Oe!==Z){H(!0);let Pe="";switch(ae){case"assignedToId":r.find(ft=>ft.id===Oe),Pe=`Assigned to ${r.find(ft=>ft.id===Z)?.name||"Unassigned"}`;break;case"stage":a.find(ft=>ft.id===Oe),Pe=`Stage changed to ${a.find(ft=>ft.id===Z)?.name||"Unknown"}`;break;case"name":Pe="Name updated";break;case"email":Pe="Email updated";break;case"phone":Pe="Phone updated";break;case"dealValue":Pe="Deal value updated";break;case"course":Pe="Course interest updated";break;case"company":Pe="Company updated";break;case"city":Pe="City updated";break;case"alternatePhone":Pe="Alternate phone updated";break;case"campaign":Pe="Campaign updated";break;case"tags":Pe="Tags updated";break;case"facebookCampaign":Pe="Facebook campaign updated";break;case"facebookAdset":Pe="Facebook adset updated";break;case"facebookAd":Pe="Facebook ad updated";break;default:Pe=`${ae} updated`}pe(lt=>[...lt,Pe])}},de=(ae,ye)=>{const Oe=s.find(Pe=>Pe.id===ae),Z=ie.customFields?.[ae]||"";if(Z!==ye){y(lt=>({...lt,customFields:{...lt.customFields||{},[ae]:ye}})),H(!0);const Pe=`Custom field "${Oe?.name||ae}" changed from "${Z}" to "${ye}"`;pe(lt=>[...lt,Pe])}},Be=async ae=>{try{console.log("Creating WhatsApp note:",{content:`Sent WhatsApp: "${ae}"`,leadId:t.id});const ye=await Le.createNote({content:`Sent WhatsApp: "${ae}"`,leadId:t.id});console.log("WhatsApp note created successfully:",ye),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:t.id}})),C(!1)}catch(ye){console.error("Error sending WhatsApp:",ye),console.error("WhatsApp Error:",ye.message||"Please try again.")}},Me=async ae=>{try{console.log("Creating SMS note:",{content:`Sent SMS: "${ae}"`,leadId:t.id});const ye=await Le.createNote({content:`Sent SMS: "${ae}"`,leadId:t.id});console.log("SMS note created successfully:",ye),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:t.id}})),T(!1)}catch(ye){console.error("Error sending SMS:",ye),console.error("SMS Error:",ye.message||"Please try again.")}},Ee=async(ae,ye)=>{try{console.log("Creating call log:",{leadId:t.id,outcome:ae,notes:ye,callType:"outbound"});const Oe=await Le.createCall({leadId:t.id,outcome:ae,notes:ye,callType:"outbound"});console.log("Call logged successfully:",Oe),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:t.id}})),O(!1)}catch(Oe){console.error("Error logging call:",Oe),console.error("Call Logging Failed:",Oe.message||"Please try again.")}},Xe=async ae=>{try{console.log("Creating note:",{content:`Note: "${ae}"`,leadId:t.id});const ye=await Le.createNote({content:`Note: "${ae}"`,leadId:t.id});console.log("Note created successfully:",ye),await be(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:t.id}})),M(!1)}catch(ye){console.error("Error adding note:",ye),console.error("Note Creation Failed:",ye.message||"Please try again.")}},ge=async()=>{if(!$){x();return}if(!X()){alert("Your session has expired. Please refresh the page and log in again."),me(),setTimeout(()=>window.location.reload(),1e3);return}W(!0),console.log("Starting save process for lead:",b.id);try{const ae={name:b.name,email:b.email,phone:b.phone,alternatePhone:b.alternatePhone,city:b.city,course:b.course,company:b.company,source:b.source,stage:b.stage,followUpStatus:b.followUpStatus,score:b.score,tags:b.tags,assignedToId:b.assignedToId,dealValue:b.dealValue,closeDate:b.closeDate,activities:b.activities||[],scheduledMessages:b.scheduledMessages||[],campaign:b.campaign,facebookCampaign:b.facebookCampaign,facebookAdset:b.facebookAdset,facebookAd:b.facebookAd,customFields:b.customFields,organizationId:b.organizationId};console.log("Sending data to backend:",ae);const ye=await Le.updateLead(b.id,ae);console.log("Backend response received successfully:",ye._id);let Oe=ye;if(xe.length>0){const Z=`Lead updated: ${xe.join(", ")}`,Pe={id:crypto.randomUUID(),type:"FIELD_UPDATE",content:Z,timestamp:new Date().toISOString(),authorId:p.id};Oe={...ye,activities:[Pe,...ye.activities||[]]}}d(Oe,ie),H(!1),pe([]),q(!0),console.log("Save process completed successfully"),console.log("LeadDetailModal: Backend save successful, dispatching timeline refresh event"),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:b.id}})),setTimeout(()=>{q(!1),x()},2e3)}catch(ae){console.error("Error saving lead:",ae),console.error("Error details:",{message:ae.message,stack:ae.stack,status:ae.status,response:ae.response}),ae.message&&(ae.message.includes("401")||ae.message.includes("invalid")||ae.message.includes("unauthorized"))?(alert("Your session has expired or is invalid. Please refresh the page and log in again."),me(),setTimeout(()=>{window.location.href="/"},2e3)):ae.message&&ae.message.includes("Cannot connect to server")?alert("Cannot connect to server. Please ensure the backend server is running and try again."):alert(`Failed to save changes: ${ae.message||"Unknown error"}. Check console for details.`)}finally{W(!1)}},De=()=>{$?window.confirm("You have unsaved changes. Are you sure you want to close without saving?")&&x():x()};return e.jsxs(it,{isOpen:!0,onClose:()=>{},title:"",children:[S&&e.jsx(QK,{lead:b,templates:i,currentUser:p,onClose:()=>C(!1),onSend:Be}),k&&e.jsx(wy,{lead:b,templates:l,currentUser:p,onClose:()=>T(!1),onSend:Me}),N&&e.jsx(jy,{onClose:()=>O(!1),onLog:Ee}),I&&e.jsx(YK,{isOpen:I,onClose:()=>M(!1),onSave:ae=>Xe(ae.content),leadId:b.id,currentUser:p}),D.open&&D.type&&e.jsx(yy,{lead:b,currentUser:p,type:D.type,onClose:()=>U({open:!1,type:null}),onSchedule:f}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-muted bg-surface",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold text-on-surface",children:"Lead Details"}),$&&e.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full",children:"Unsaved Changes"}),z&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:" Saved Successfully"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{window.confirm("This will clear all authentication data and require you to log in again. Continue?")&&(me(),alert("Authentication data cleared. Please refresh the page to log in again."),setTimeout(()=>window.location.reload(),1e3))},className:"px-3 py-2 rounded-lg font-semibold text-sm bg-red-600 hover:bg-red-700 text-white",title:"Clear authentication data if you're having login issues",children:" Clear Auth"}),e.jsx("button",{onClick:ge,disabled:!$||F,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${$&&!F?"bg-primary-600 hover:bg-primary-700 text-white":"bg-muted text-subtle cursor-not-allowed"}`,children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V.Success,{className:"w-4 h-4"}),"Save Changes"]})}),e.jsx("button",{onClick:De,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-gray-600 hover:bg-gray-700 text-white",title:"Close modal",children:" Close"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"lg:col-span-1 overflow-y-auto pr-4",onWheel:ae=>{ae.stopPropagation(),ae.preventDefault()},children:[e.jsxs(zl,{title:"Contact",initiallyOpen:!0,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),e.jsx("input",{type:"text",value:b.name,onChange:ae=>re("name",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),e.jsx("input",{type:"email",value:b.email,onChange:ae=>re("email",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),e.jsx("input",{type:"tel",value:b.phone,onChange:ae=>re("phone",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),e.jsxs("select",{value:b.assignedToId,onChange:ae=>re("assignedToId",parseInt(ae.target.value)),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",children:[e.jsx("option",{value:0,className:"bg-background text-on-surface",children:"System"}),r.map(ae=>e.jsx("option",{value:ae.id,className:"bg-background text-on-surface",children:ae.name},ae.id))]})]})]}),e.jsxs(zl,{title:"Deal Info",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),e.jsx("select",{value:b.stage,onChange:ae=>re("stage",ae.target.value),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",children:a.map(ae=>e.jsx("option",{value:ae.id,className:"bg-background text-on-surface",children:ae.name},ae.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),e.jsx("input",{type:"number",value:b.dealValue,onChange:ae=>re("dealValue",Number(ae.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),e.jsx("input",{type:"text",value:b.course,onChange:ae=>re("course",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),e.jsx("div",{className:"py-1 text-on-surface",children:b.source})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Created"}),e.jsx("div",{className:"py-1 text-on-surface",children:new Date(b.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Last Updated"}),e.jsx("div",{className:"py-1 text-on-surface",children:new Date(b.updatedAt).toLocaleDateString()})]})]}),e.jsxs(zl,{title:"Additional Details",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),e.jsx("input",{type:"text",value:b.company||"",onChange:ae=>re("company",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),e.jsx("input",{type:"text",value:b.city||"",onChange:ae=>re("city",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:b.alternatePhone||"",onChange:ae=>re("alternatePhone",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),e.jsx("input",{type:"text",value:b.campaign||"",onChange:ae=>re("campaign",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),e.jsx("input",{type:"text",value:Array.isArray(b.tags)?b.tags.join(", "):"",onChange:ae=>re("tags",ae.target.value.split(",").map(ye=>ye.trim()).filter(Boolean)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:"Enter tags separated by commas"})]})]}),e.jsxs(zl,{title:"Facebook Details",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),e.jsx("input",{type:"text",value:b.facebookCampaign||"",onChange:ae=>re("facebookCampaign",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),e.jsx("input",{type:"text",value:b.facebookAdset||"",onChange:ae=>re("facebookAdset",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),e.jsx("input",{type:"text",value:b.facebookAd||"",onChange:ae=>re("facebookAd",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]}),s.length>0&&e.jsx(zl,{title:"Custom Fields",children:s.map(ae=>{const ye=b.customFields?.[ae.id];return e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-xs font-medium text-subtle",children:[ae.name,ae.isRequired&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ae.type==="date"?e.jsx("input",{type:"date",value:ye||"",onChange:Oe=>de(ae.id,Oe.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",required:ae.isRequired}):ae.type==="number"?e.jsx("input",{type:"number",value:ye||"",onChange:Oe=>de(ae.id,Number(Oe.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",required:ae.isRequired}):ae.type==="dropdown"?e.jsxs("select",{value:ye||"",onChange:Oe=>de(ae.id,Oe.target.value),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",required:ae.isRequired,children:[e.jsxs("option",{value:"",className:"bg-background text-on-surface",children:["Select ",ae.name]}),ae.options?.map(Oe=>e.jsx("option",{value:Oe,className:"bg-background text-on-surface",children:Oe},Oe))]}):e.jsx("input",{type:"text",value:ye||"",onChange:Oe=>de(ae.id,Oe.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:`Enter ${ae.name}`,required:ae.isRequired})]},ae.id)})})]}),e.jsxs("div",{className:"lg:col-span-2 flex flex-col overflow-hidden bg-background rounded-lg border border-muted",onWheel:ae=>{ae.stopPropagation(),ae.preventDefault()},children:[e.jsx("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center justify-between gap-2 border-b border-muted",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>v("timeline"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${g==="timeline"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Timeline"}),e.jsxs("button",{onClick:()=>v("tasks"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${g==="tasks"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Tasks",G.filter(ae=>!ae.isCompleted).length>0&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:G.filter(ae=>!ae.isCompleted).length})]})]}),e.jsxs("button",{onClick:()=>v("scheduled"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${g==="scheduled"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Scheduled",(b.scheduledMessages||[]).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(b.scheduledMessages||[]).length})})]})]})}),e.jsxs("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center gap-2 border-b border-muted",children:[e.jsxs("button",{onClick:()=>O(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Call,{className:"h-4 w-4"}),"Log Call"]}),e.jsxs("button",{onClick:()=>C(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Whatsapp,{className:"h-4 w-4"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>T(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.SMS,{className:"h-4 w-4"}),"SMS"]}),e.jsxs("button",{onClick:()=>{console.log("Add Task button clicked, setting isAddingTask to true and switching to tasks tab"),P(!0),v("tasks")},className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Tasks,{className:"h-4 w-4"}),"Add Task"]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Note,{className:"h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-6",children:[g==="timeline"&&e.jsx(JK,{activities:b.activities||[],users:r,currentUser:p,leadId:b.id,realTime:!0,onRefresh:be}),g==="tasks"&&e.jsxs("div",{className:"space-y-2",children:[E&&e.jsxs(e.Fragment,{children:[console.log("AddTaskForm: Rendering form, isAddingTask is true"),e.jsx(ZK,{lead:b,onAddTask:m,onCancel:()=>{console.log("AddTaskForm: Cancel button clicked"),P(!1)},currentUser:p,onTaskCreated:be})]}),G.map(ae=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[e.jsx("input",{type:"checkbox",checked:ae.isCompleted,onChange:()=>u({...ae,isCompleted:!ae.isCompleted}),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),e.jsx("p",{className:`flex-grow text-sm ${ae.isCompleted?"line-through text-subtle":""}`,children:ae.title}),e.jsx("p",{className:"text-xs text-subtle",children:new Date(ae.dueDate).toLocaleDateString()})]},ae.id||ae._id)),G.length===0&&!E&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),g==="scheduled"&&e.jsxs("div",{className:"divide-y divide-muted",children:[(b.scheduledMessages||[]).map(ae=>e.jsxs("div",{className:"py-3",children:[e.jsxs("p",{className:"text-sm font-semibold",children:[ae.type," scheduled for ",new Date(ae.scheduledAt).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-subtle bg-muted p-2 rounded-md mt-1",children:['"',ae.content,'"']})]},ae.id)),(b.scheduledMessages||[]).length===0&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})]})]})},eY=({children:t,columnWidths:r,onColumnResize:n,columnOrder:a,onColumnReorder:s})=>{const[i,l]=w.useState(!1),[d,u]=w.useState(0),[m,f]=w.useState(null),[p,x]=w.useState(null),[g,v]=w.useState(null),b=S=>{if(!i||!m)return;const C=S.clientX-d,k=Math.max(80,(r[m]||150)+C);n(m,k),u(S.clientX)},y=()=>{l(!1),f(null)};return w.useEffect(()=>{if(i)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y)}},[i,m,d]),e.jsx("div",{className:"relative",children:t})},tY=({isOpen:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(""),i=d=>{d.preventDefault(),a.trim()&&(n(a.trim()),s(""),r())},l=()=>{s(""),r()};return t?e.jsx(it,{isOpen:t,onClose:l,title:"Save Filter View",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Filter View Name"}),e.jsx("input",{type:"text",value:a,onChange:d=>s(d.target.value),placeholder:"Enter a name for this filter view",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",autoFocus:!0,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:l,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Filter View"})]})]})}):null},rY=({leads:t,users:r,pipelineStages:n,customFieldDefs:a,tasks:s,whatsAppTemplates:i,smsTemplates:l,addLead:d,deleteLead:u,currentUser:m,hasPermission:f,savedFilters:p,onSaveFilter:x,onDeleteFilter:g,onBulkAssign:v,onBulkDelete:b,onUpdateLead:y,onUpdateTask:S,onAddTask:C,onScheduleMessage:k,onImportLeads:T})=>{const[N,O]=w.useState(""),[E,P]=w.useState(new Set),[I,M]=w.useState("updatedAt"),[D,U]=w.useState("desc"),[F,W]=w.useState(1),[$,H]=w.useState(25),[z,q]=w.useState(!1),[Q,ee]=w.useState(!1),[R,L]=w.useState(!1),[G,K]=w.useState(!1),[ie,xe]=w.useState(null),[pe,be]=w.useState([]),[me,X]=w.useState(null),[re,de]=w.useState(!1),[Be,Me]=w.useState(!1),[Ee,Xe]=w.useState(!1),[ge,De]=w.useState(!1),[ae,ye]=w.useState(null),[Oe,Z]=w.useState(null),[Pe,lt]=w.useState(!1),[At,ft]=w.useState(!1),[Fr,ur]=w.useState(!1),[Br,br]=w.useState(!1),[Ye,Or]=w.useState({campaign:"",stage:"",assignedToId:0,course:""}),[vr,oe]=w.useState({checkbox:50,name:200,source:120,email:180,phone:140,alternatePhone:140,city:120,course:150,company:150,stage:120,followUpStatus:140,score:80,tags:120,assignedToId:140,dealValue:120,closeDate:120,campaign:150,facebookCampaign:150,facebookAdset:150,facebookAd:150,createdAt:120,updatedAt:120,actions:100}),[fe,Re]=w.useState(["checkbox","name","source","email","phone","alternatePhone","city","course","company","stage","followUpStatus","score","tags","assignedToId","dealValue","closeDate","campaign","facebookCampaign","facebookAdset","facebookAd","createdAt","updatedAt","actions"]),[Ke,Mt]=w.useState({name:!0,email:!0,phone:!0,alternatePhone:!1,city:!1,course:!1,company:!1,source:!1,stage:!0,followUpStatus:!1,score:!1,tags:!1,assignedToId:!0,dealValue:!1,closeDate:!1,campaign:!1,facebookCampaign:!1,facebookAdset:!1,facebookAd:!1,createdAt:!1,updatedAt:!0});w.useEffect(()=>{(async()=>{de(!0),de(!1)})()},[]),w.useEffect(()=>{(async()=>{try{const ke=await Le.getLeadColumnPreferences();ke.columnOrder&&Re(ke.columnOrder),ke.visibleColumns&&Mt(Ie=>({...Ie,...ke.visibleColumns}))}catch(ke){console.error("Failed to load column preferences:",ke);const Ie=localStorage.getItem("leadColumnPreferences");if(Ie)try{const Ae=JSON.parse(Ie);Ae.columnOrder&&Re(Ae.columnOrder),Ae.visibleColumns&&Mt($e=>({...$e,...Ae.visibleColumns}))}catch(Ae){console.error("Failed to parse saved column preferences:",Ae)}}})()},[]),w.useEffect(()=>{const ke=setTimeout(async()=>{try{await Le.updateLeadColumnPreferences({columnOrder:fe,visibleColumns:Ke})}catch(Ie){console.error("Failed to save column preferences:",Ie);const Ae={columnOrder:fe,visibleColumns:Ke};localStorage.setItem("leadColumnPreferences",JSON.stringify(Ae))}},500);return()=>clearTimeout(ke)},[fe,Ke]);const Xt=(te,ke)=>{Mt(Ie=>{const Ae={...Ie,[te]:ke},$e={columnOrder:fe,visibleColumns:Ae};return localStorage.setItem("leadColumnPreferences",JSON.stringify($e)),Ae})},dt=w.useMemo(()=>{let te=t;if(N){const ke=N.toLowerCase();te=te.filter(Ie=>Ie.name?.toLowerCase().includes(ke)||Ie.email?.toLowerCase().includes(ke)||Ie.phone?.toLowerCase().includes(ke)||Ie.company?.toLowerCase().includes(ke))}return Ye.campaign&&(te=te.filter(ke=>ke.campaign?.toLowerCase().includes(Ye.campaign.toLowerCase()))),Ye.stage&&(te=te.filter(ke=>ke.stage===Ye.stage)),Ye.assignedToId>0&&(te=te.filter(ke=>ke.assignedToId===Ye.assignedToId)),Ye.course&&(te=te.filter(ke=>ke.course?.toLowerCase().includes(Ye.course.toLowerCase()))),te},[t,N,Ye.campaign,Ye.stage,Ye.assignedToId,Ye.course]),pt=w.useMemo(()=>{let te=dt;return pe.length>0&&(te=te.filter(ke=>pe.every(Ie=>{const Ae=ke[Ie.field],$e=Ie.value;switch(Ie.operator){case"contains":return String(Ae||"").toLowerCase().includes(String($e||"").toLowerCase());case"equals":return Ae===$e;case"not_equals":return Ae!==$e;case"gt":return Number(Ae)>Number($e);case"lt":return Number(Ae)<Number($e);case"gte":return Number(Ae)>=Number($e);case"lte":return Number(Ae)<=Number($e);case"is_between":const[nr,Nt]=Array.isArray($e)?$e:[$e,$e];return Number(Ae)>=Number(nr)&&Number(Ae)<=Number(Nt);default:return!0}}))),te.sort((ke,Ie)=>{let Ae=ke[I],$e=Ie[I];if(I==="stage"){const nr=n.find(gt=>gt.id===Ae),Nt=n.find(gt=>gt.id===$e);Ae=nr?.name||"",$e=Nt?.name||""}return Ae==null&&$e==null?0:Ae==null?D==="asc"?-1:1:$e==null?D==="asc"?1:-1:(typeof Ae=="string"&&typeof $e=="string"&&(Ae=Ae.toLowerCase(),$e=$e.toLowerCase()),Ae<$e?D==="asc"?-1:1:Ae>$e?D==="asc"?1:-1:0)}),te},[dt,pe,I,D,n]),Nr=w.useMemo(()=>{const te=(F-1)*$;return pt.slice(te,te+$)},[pt,F,$]),ha=Math.ceil(pt.length/$),ji=(te,ke)=>{const Ie=new Set(E);ke?Ie.add(te):Ie.delete(te),P(Ie)},_s=te=>{P(te?new Set(Nr.map(ke=>ke.id)):new Set)},On=async te=>{try{await v(Array.from(E),te),P(new Set),q(!1)}catch(ke){console.error("Failed to bulk assign leads:",ke)}},wi=async()=>{if(window.confirm(`Are you sure you want to delete ${E.size} leads?`))try{await b(Array.from(E)),P(new Set)}catch(te){console.error("Failed to bulk delete leads:",te)}},ln=async te=>{try{for(const ke of Array.from(E)){const Ie=t.find(Ae=>Ae.id===ke);Ie&&await y({...Ie,...te})}alert(`Successfully updated ${E.size} leads!`)}catch(ke){console.error("Failed to bulk update leads:",ke),alert("Failed to update leads. Please try again.")}},Ni=te=>{I===te?U(D==="asc"?"desc":"asc"):(M(te),U("asc"))},xa=te=>{be(te),W(1)},ga=async te=>{try{await x({name:te,conditions:pe})}catch(ke){console.error("Failed to save filter:",ke)}},Ur=te=>{be(te.conditions),X(te),W(1)},Va=()=>{be([]),X(null),Or({campaign:"",stage:"",assignedToId:0,course:""}),W(1)},ba=()=>{Or({campaign:"",stage:"",assignedToId:0,course:""}),W(1)},va=(te,ke)=>{oe(Ie=>({...Ie,[te]:ke}))},Ka=te=>{Re(te)},Pn=(te,ke)=>{ye(ke),te.dataTransfer.effectAllowed="move"},Ya=(te,ke)=>{te.preventDefault(),Z(ke)},Xa=()=>{ye(null),Z(null)},Ja=(te,ke)=>{if(te.preventDefault(),!ae||ae===ke)return;const Ie=fe.indexOf(ae),Ae=fe.indexOf(ke);if(Ie===-1||Ae===-1)return;const $e=[...fe];$e.splice(Ie,1),$e.splice(Ae,0,ae),Re($e),ye(null),Z(null);const nr={columnOrder:$e,visibleColumns:Ke};localStorage.setItem("leadColumnPreferences",JSON.stringify(nr))},Pr=async te=>{try{Xe(!0);let ke=[];switch(te){case"filtered":ke=pt;break;case"all":ke=t;break;case"selected":ke=Array.from(E).map(et=>t.find(_n=>_n.id===et)).filter(Boolean);break;case"currentPage":ke=Nr;break}if(ke.length===0){alert("No leads to export.");return}const Ie=ke.map(et=>({Name:et.name||"",Email:et.email||"",Phone:et.phone||"","Alternate Phone":et.alternatePhone||"",City:et.city||"",Course:et.course||"",Company:et.company||"",Source:typeof et.source=="string"?et.source:"",Stage:Si(et.stage),"Follow Up Status":et.followUpStatus||"",Score:et.score||0,Tags:et.tags?.join(", ")||"","Assigned To":Is(et.assignedToId),"Deal Value":et.dealValue||0,"Close Date":et.closeDate?new Date(et.closeDate).toLocaleDateString():"",Campaign:et.campaign||"","Facebook Campaign":et.facebookCampaign||"","Facebook Adset":et.facebookAdset||"","Facebook Ad":et.facebookAd||"","Created At":et.createdAt?new Date(et.createdAt).toLocaleDateString():"","Updated At":et.updatedAt?new Date(et.updatedAt).toLocaleDateString():"",...Object.fromEntries(a.map(_n=>[_n.name,et.customFields?.[_n.id]||""]))})),Ae=[Object.keys(Ie[0]).join(","),...Ie.map(et=>Object.values(et).map(_n=>`"${_n}"`).join(","))].join(`
`),$e=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),nr=document.createElement("a"),Nt=URL.createObjectURL($e);nr.setAttribute("href",Nt);const gt={filtered:"filtered",all:"all",selected:"selected",currentPage:"current_page"}[te];nr.setAttribute("download",`leads_export_${gt}_${new Date().toISOString().split("T")[0]}.csv`),nr.style.visibility="hidden",document.body.appendChild(nr),nr.click(),document.body.removeChild(nr),lt(!1)}catch(ke){console.error("Failed to export leads:",ke),alert("Failed to export leads. Please try again.")}finally{Xe(!1)}},Is=te=>r.find(Ie=>Ie.id===te)?.name||"Unassigned",Si=te=>n.find(Ie=>Ie.id===te)?.name||"Unknown Stage",Zn=te=>n.find(Ie=>Ie.id===te)?.color||"#6b7280";return re?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),e.jsx("span",{className:"ml-2 text-subtle",children:"Loading leads..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-on-surface",children:"Leads"}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("p",{className:"text-subtle",children:[pt.length," lead",pt.length!==1?"s":"",N&&` matching "${N}"`]}),(Ye.campaign||Ye.stage||Ye.assignedToId>0)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-primary-600 font-medium",children:"Basic filters active:"}),e.jsxs("span",{className:"bg-primary-100 text-primary-800 px-2 py-1 rounded-full text-xs",children:[dt.length," results"]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:f(Qt.MANAGE_USERS)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-w-xs mr-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(V.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-subtle"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, phone, company...",value:N,onChange:te=>O(te.target.value),className:"w-full pl-10 pr-12 py-3 bg-background border border-muted rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"}),e.jsx("button",{onClick:()=>ft(!0),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 text-subtle hover:text-primary-500",title:"Advanced Search Options",children:e.jsx(V.Filter,{className:"h-4 w-4"})})]})}),e.jsxs("button",{onClick:()=>ee(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(V.Import,{className:"h-4 w-4"}),"Import"]}),e.jsxs("button",{onClick:()=>lt(!0),disabled:pt.length===0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(V.Export,{className:"h-4 w-4"}),"Export"]}),e.jsxs("button",{onClick:()=>{const te={name:"",email:"",phone:"",alternatePhone:"",city:"",course:"",company:"",stage:n[0]?.id||"",source:_a.WEBSITE,assignedToId:m.id,followUpStatus:"Pending",dealValue:0,closeDate:"",tags:[],campaign:"",facebookCampaign:"",facebookAdset:"",facebookAd:""};d(te)},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(V.Add,{className:"h-4 w-4"}),"Add Lead"]}),e.jsxs("button",{onClick:()=>De(!0),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(V.Settings,{className:"h-4 w-4"}),"Columns"]})]})})]}),e.jsxs("div",{className:"bg-surface rounded-lg p-4 space-y-4",children:[e.jsx("div",{className:"flex flex-col lg:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>ur(!Fr),className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors ${Fr||Ye.campaign||Ye.stage||Ye.assignedToId>0?"bg-primary-600 text-white":"bg-muted hover:bg-muted/80 text-on-surface"}`,children:[e.jsx(V.Filter,{className:"h-4 w-4"}),"Basic Filters",(Ye.campaign||Ye.stage||Ye.assignedToId>0||Ye.course)&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:(Ye.campaign?1:0)+(Ye.stage?1:0)+(Ye.assignedToId>0?1:0)+(Ye.course?1:0)})]}),e.jsxs("button",{onClick:()=>Me(!Be),className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors ${Be?"bg-primary-600 text-white":"bg-muted hover:bg-muted/80 text-on-surface"}`,children:[e.jsx(V.Filter,{className:"h-4 w-4"}),"Advanced Filters",pe.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:pe.length})]}),p.length>0&&e.jsx("div",{className:"relative",children:e.jsxs("select",{value:me?.id||"",onChange:te=>{const ke=p.find(Ie=>Ie.id===te.target.value);ke?Ur(ke):Va()},className:"px-3 py-2 bg-background border border-muted rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Saved Filters"}),p.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})}),(pe.length>0||Ye.campaign||Ye.stage||Ye.assignedToId>0||Ye.course)&&e.jsx("button",{onClick:Va,className:"px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-medium",children:"Clear All"})]})}),Fr&&e.jsxs("div",{className:"border-t border-muted pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Campaign"}),e.jsx("input",{type:"text",value:Ye.campaign,onChange:te=>Or(ke=>({...ke,campaign:te.target.value})),placeholder:"Filter by campaign name",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),Ye.campaign&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",dt.length,' leads with campaign containing "',Ye.campaign,'"']})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Lead Stage"}),e.jsxs("select",{value:Ye.stage,onChange:te=>Or(ke=>({...ke,stage:te.target.value})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Stages"}),n.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]}),Ye.stage&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",dt.length," leads in ",n.find(te=>te.id===Ye.stage)?.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Assigned To"}),e.jsxs("select",{value:Ye.assignedToId,onChange:te=>Or(ke=>({...ke,assignedToId:Number(te.target.value)})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:0,children:"All Users"}),r.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]}),Ye.assignedToId>0&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",dt.length," leads assigned to ",r.find(te=>te.id===Ye.assignedToId)?.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Course"}),e.jsxs("select",{value:Ye.course,onChange:te=>Or(ke=>({...ke,course:te.target.value})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Courses"}),Array.from(new Set(t.map(te=>te.course).filter(Boolean))).sort().map(te=>e.jsx("option",{value:te,children:te},te))]}),Ye.course&&e.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",dt.length,' leads with course "',Ye.course,'"']})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-subtle",children:["Total results: ",e.jsx("span",{className:"font-medium text-primary-600",children:dt.length})," leads"]}),e.jsx("button",{onClick:ba,className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded",children:"Clear Basic Filters"})]})]}),Be&&e.jsx("div",{className:"border-t border-muted pt-4",children:e.jsx(Qc,{conditions:pe,onConditionsChange:xa,users:r,pipelineStages:n,customFieldDefs:a,headerContent:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded",children:"Save Filter"})})})})]}),E.size>0&&e.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-primary-700 font-medium",children:[E.size," lead",E.size!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>br(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Bulk Edit"}),e.jsx("button",{onClick:()=>q(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded text-sm",children:"Assign"}),e.jsx("button",{onClick:wi,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Delete"})]})]})}),e.jsx("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(eY,{columnWidths:vr,onColumnResize:va,columnOrder:fe,onColumnReorder:Ka,children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsx("tr",{children:fe.filter(te=>Ke[te]!==!1).map(te=>{if(te==="checkbox")return e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:Nr.length>0&&Nr.every(Ae=>E.has(Ae.id)),onChange:Ae=>_s(Ae.target.checked),className:"rounded border-muted"})},te);if(te==="actions")return e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-subtle uppercase tracking-wider",children:"Actions"},te);const Ie={name:{label:"Name",sortable:!0,sortKey:"name"},source:{label:"Source",sortable:!0,sortKey:"source"},email:{label:"Email",sortable:!0,sortKey:"email"},phone:{label:"Phone",sortable:!0,sortKey:"phone"},alternatePhone:{label:"Alternate Phone",sortable:!1},city:{label:"City",sortable:!1},course:{label:"Course",sortable:!1},company:{label:"Company",sortable:!1},stage:{label:"Stage",sortable:!0,sortKey:"stage"},followUpStatus:{label:"Follow Up Status",sortable:!1},score:{label:"Score",sortable:!1},tags:{label:"Tags",sortable:!1},assignedToId:{label:"Assigned To",sortable:!1},dealValue:{label:"Deal Value",sortable:!1},closeDate:{label:"Close Date",sortable:!1},campaign:{label:"Campaign",sortable:!1},facebookCampaign:{label:"Facebook Campaign",sortable:!1},facebookAdset:{label:"Facebook Adset",sortable:!1},facebookAd:{label:"Facebook Ad",sortable:!1},createdAt:{label:"Created At",sortable:!1},updatedAt:{label:"Last Updated",sortable:!0,sortKey:"updatedAt"}}[te];return Ie?e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider ${Ie.sortable?"cursor-pointer hover:bg-muted/70":""}`,onClick:Ie.sortable&&Ie.sortKey?()=>Ni(Ie.sortKey):void 0,children:e.jsxs("div",{className:"flex items-center gap-1",children:[Ie.label,Ie.sortable&&Ie.sortKey&&I===Ie.sortKey&&e.jsx(V.ChevronRight,{className:`h-3 w-3 ${D==="desc"?"rotate-180":""}`})]})},te):null})})}),e.jsx("tbody",{className:"bg-surface divide-y divide-muted",children:Nr.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:fe.filter(te=>Ke[te]!==!1).length,className:"px-6 py-12 text-center text-subtle",children:t.length===0?e.jsxs("div",{children:[e.jsx(V.Leads,{className:"mx-auto h-12 w-12 text-muted mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No leads yet"}),e.jsx("p",{className:"text-subtle mb-4",children:"Get started by adding your first lead or importing from a CSV file."}),e.jsxs("button",{onClick:()=>{const te={name:"",email:"",phone:"",alternatePhone:"",city:"",course:"",company:"",stage:n[0]?.id||"",source:_a.WEBSITE,assignedToId:m.id,followUpStatus:"Pending",dealValue:0,closeDate:"",tags:[],campaign:"",facebookCampaign:"",facebookAdset:"",facebookAd:""};d(te)},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2",children:[e.jsx(V.Add,{className:"h-4 w-4"}),"Add Your First Lead"]})]}):e.jsxs("div",{children:[e.jsx(V.Filter,{className:"mx-auto h-12 w-12 text-muted mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No leads found"}),e.jsx("p",{className:"text-subtle",children:"Try adjusting your search or filters."})]})})}):Nr.map(te=>e.jsx("tr",{className:"hover:bg-muted/30 cursor-pointer",onClick:()=>{xe(te),K(!0)},children:fe.filter(ke=>Ke[ke]!==!1).map(ke=>{if(ke==="checkbox")return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:Ae=>Ae.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:E.has(te.id),onChange:Ae=>ji(te.id,Ae.target.checked),className:"rounded border-muted"})},ke);if(ke==="actions")return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:Ae=>Ae.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(jt,{to:`/leads/${te.id}`,className:"text-primary-600 hover:text-primary-900 p-1",onClick:Ae=>Ae.stopPropagation(),children:e.jsx(V.Edit,{className:"h-4 w-4"})}),f(Qt.DELETE_LEADS)&&e.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),window.confirm("Are you sure you want to delete this lead?")&&u(te.id)},className:"text-red-600 hover:text-red-900 p-1",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})},ke);const Ie=(Ae,$e)=>{switch(Ae){case"name":return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:$e.name?.charAt(0)?.toUpperCase()||"?"})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-on-surface",children:$e.name||"Unnamed Lead"})})]});case"source":return e.jsx("span",{children:typeof $e.source=="string"?$e.source:"Unknown"});case"email":return e.jsx("span",{children:$e.email||"-"});case"phone":return e.jsx("span",{children:$e.phone||"-"});case"alternatePhone":return e.jsx("span",{children:$e.alternatePhone||"-"});case"city":return e.jsx("span",{children:$e.city||"-"});case"course":return e.jsx("span",{children:$e.course||"-"});case"company":return e.jsx("span",{children:$e.company||"-"});case"stage":return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${Zn($e.stage)}20`,color:Zn($e.stage)},children:Si($e.stage)});case"followUpStatus":return e.jsx("span",{children:$e.followUpStatus||"-"});case"score":return e.jsx("span",{children:$e.score||0});case"tags":return e.jsx("span",{children:$e.tags?.join(", ")||"-"});case"assignedToId":return e.jsx("span",{children:Is($e.assignedToId)});case"dealValue":return e.jsx("span",{children:$e.dealValue?`$${$e.dealValue}`:"-"});case"closeDate":return e.jsx("span",{children:$e.closeDate?new Date($e.closeDate).toLocaleDateString():"-"});case"campaign":return e.jsx("span",{children:$e.campaign||"-"});case"facebookCampaign":return e.jsx("span",{children:$e.facebookCampaign||"-"});case"facebookAdset":return e.jsx("span",{children:$e.facebookAdset||"-"});case"facebookAd":return e.jsx("span",{children:$e.facebookAd||"-"});case"createdAt":return e.jsx("span",{children:$e.createdAt?new Date($e.createdAt).toLocaleDateString():"-"});case"updatedAt":return e.jsx("span",{children:$e.updatedAt?new Date($e.updatedAt).toLocaleDateString():"-"});default:if(Ae.startsWith("custom_")){const nr=Ae.replace("custom_","");return e.jsx("span",{children:$e.customFields?.[nr]||"-"})}return e.jsx("span",{children:"-"})}};return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-on-surface",children:Ie(ke,te)},ke)})},te.id))})]})})})}),ha>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-subtle",children:"Rows per page:"}),e.jsxs("select",{value:$,onChange:te=>{H(Number(te.target.value)),W(1)},className:"bg-background border border-muted rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-subtle",children:[Math.min((F-1)*$+1,pt.length),"-",Math.min(F*$,pt.length)," of ",pt.length]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>W(Math.max(1,F-1)),disabled:F===1,className:"px-3 py-1 border border-muted rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted",children:"Previous"}),e.jsx("button",{onClick:()=>W(Math.min(ha,F+1)),disabled:F===ha,className:"px-3 py-1 border border-muted rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted",children:"Next"})]})]})]}),z&&e.jsx(DK,{onClose:()=>q(!1),users:r,onAssign:On}),Q&&T&&e.jsx(KK,{onClose:()=>ee(!1),onImport:T,customFieldDefs:a,pipelineStages:n,users:r}),R&&e.jsx(tY,{isOpen:R,onClose:()=>L(!1),onSave:ga}),At&&e.jsx(it,{isOpen:At,onClose:()=>ft(!1),title:"Search Leads",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Name",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}}),e.jsx("input",{type:"email",placeholder:"Email",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}}),e.jsx("input",{type:"tel",placeholder:"Phone",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}}),e.jsx("input",{type:"text",placeholder:"Company",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}}),e.jsx("input",{type:"text",placeholder:"City",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}}),e.jsx("input",{type:"text",placeholder:"Course",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(O(te.target.value),ft(!1))}})]}),e.jsx("div",{className:"flex justify-end pt-3 border-t border-muted",children:e.jsx("button",{onClick:()=>ft(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface py-1 px-3 rounded text-sm",children:"Cancel"})})]})}),Pe&&e.jsx(it,{isOpen:Pe,onClose:()=>lt(!1),title:"Export Leads",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-subtle",children:"Choose what leads you want to export:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>Pr("filtered"),disabled:Ee,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface",children:"Filtered Leads"}),e.jsxs("p",{className:"text-sm text-subtle",children:["Export leads matching current search and filters (",pt.length," leads)"]})]}),e.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),e.jsx("button",{onClick:()=>Pr("all"),disabled:Ee,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface",children:"All Leads"}),e.jsxs("p",{className:"text-sm text-subtle",children:["Export all leads in your organization (",t.length," leads)"]})]}),e.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),e.jsx("button",{onClick:()=>Pr("selected"),disabled:Ee||E.size===0,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface",children:"Selected Leads"}),e.jsxs("p",{className:"text-sm text-subtle",children:["Export only the leads you have selected (",E.size," leads)"]})]}),e.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),e.jsx("button",{onClick:()=>Pr("currentPage"),disabled:Ee,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface",children:"Current Page"}),e.jsxs("p",{className:"text-sm text-subtle",children:["Export leads shown on current page (",Nr.length," leads)"]})]}),e.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})})]}),Ee&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500 mr-2"}),e.jsx("span",{className:"text-sm text-subtle",children:"Exporting leads..."})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:e.jsx("button",{onClick:()=>lt(!1),disabled:Ee,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg disabled:opacity-50",children:"Cancel"})})]})}),Br&&e.jsx(it,{isOpen:Br,onClose:()=>br(!1),title:`Bulk Edit ${E.size} Leads`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-sm text-subtle",children:"Update multiple leads at once. Only fill in the fields you want to change."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Lead Stage"}),e.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({stage:te.target.value})},children:[e.jsx("option",{value:"",children:"Select Stage"}),n.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Assigned To"}),e.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({assignedToId:Number(te.target.value)})},children:[e.jsx("option",{value:"",children:"Select User"}),r.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Follow Up Status"}),e.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({followUpStatus:te.target.value})},children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Deal Value"}),e.jsx("input",{type:"number",placeholder:"Enter deal value",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({dealValue:Number(te.target.value)})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Campaign"}),e.jsx("input",{type:"text",placeholder:"Enter campaign name",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value.trim()&&ln({campaign:te.target.value.trim()})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",placeholder:"tag1, tag2, tag3",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value.trim()&&ln({tags:te.target.value.split(",").map(ke=>ke.trim())})}})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>br(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:()=>{br(!1),P(new Set)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Done"})]})]})}),ge&&e.jsx(it,{isOpen:ge,onClose:()=>De(!1),title:"Customize Columns",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-subtle",children:"Select which columns to display and drag to reorder them:"}),e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Basic Lead Fields"}),e.jsx("div",{className:"space-y-2 pl-2",children:fe.filter(te=>!te.startsWith("custom_")&&!["checkbox","actions","campaign","facebookCampaign","facebookAdset","facebookAd"].includes(te)).map(te=>{const Ie={name:"Name",source:"Source",email:"Email",phone:"Phone",alternatePhone:"Alternate Phone",city:"City",course:"Course",company:"Company",stage:"Stage",followUpStatus:"Follow Up Status",score:"Score",tags:"Tags",assignedToId:"Assigned To",dealValue:"Deal Value",closeDate:"Close Date",createdAt:"Created At",updatedAt:"Last Updated"}[te];return Ie?e.jsxs("div",{draggable:!0,onDragStart:Ae=>Pn(Ae,te),onDragOver:Ae=>Ya(Ae,te),onDragEnd:Xa,onDrop:Ae=>Ja(Ae,te),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===te?"opacity-50":""} ${Oe===te?"bg-primary-100":"hover:bg-muted/50"}`,children:[e.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),e.jsx("input",{type:"checkbox",checked:Ke[te]||!1,onChange:Ae=>Xt(te,Ae.target.checked),className:"rounded border-muted"}),e.jsx("span",{className:"text-sm text-on-surface",children:Ie})]},te):null})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Facebook Form Fields"}),e.jsx("div",{className:"space-y-2 pl-2",children:fe.filter(te=>["campaign","facebookCampaign","facebookAdset","facebookAd"].includes(te)).map(te=>{const Ie={campaign:"Campaign",facebookCampaign:"Facebook Campaign",facebookAdset:"Facebook Adset",facebookAd:"Facebook Ad"}[te];return Ie?e.jsxs("div",{draggable:!0,onDragStart:Ae=>Pn(Ae,te),onDragOver:Ae=>Ya(Ae,te),onDragEnd:Xa,onDrop:Ae=>Ja(Ae,te),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===te?"opacity-50":""} ${Oe===te?"bg-primary-100":"hover:bg-muted/50"}`,children:[e.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),e.jsx("input",{type:"checkbox",checked:Ke[te]||!1,onChange:Ae=>Xt(te,Ae.target.checked),className:"rounded border-muted"}),e.jsx("span",{className:"text-sm text-on-surface",children:Ie})]},te):null})})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Custom Fields"}),e.jsx("div",{className:"space-y-2 pl-2",children:fe.filter(te=>te.startsWith("custom_")).map(te=>{const ke=te.replace("custom_",""),Ie=a.find(Ae=>Ae.id===ke);return Ie?e.jsxs("div",{draggable:!0,onDragStart:Ae=>Pn(Ae,`custom_${Ie.id}`),onDragOver:Ae=>Ya(Ae,`custom_${Ie.id}`),onDragEnd:Xa,onDrop:Ae=>Ja(Ae,`custom_${Ie.id}`),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===`custom_${Ie.id}`?"opacity-50":""} ${Oe===`custom_${Ie.id}`?"bg-primary-100":"hover:bg-muted/50"}`,children:[e.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),e.jsx("input",{type:"checkbox",checked:Ke[`custom_${Ie.id}`]||!1,onChange:Ae=>Xt(`custom_${Ie.id}`,Ae.target.checked),className:"rounded border-muted"}),e.jsx("span",{className:"text-sm text-on-surface",children:Ie.name})]},Ie.id):null})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>De(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:()=>De(!1),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Apply Changes"})]})]})}),G&&ie&&e.jsx(mP,{onClose:()=>{K(!1),xe(null)},lead:ie,users:r,pipelineStages:n,customFieldDefs:a,tasks:s,whatsAppTemplates:i,smsTemplates:l,currentUser:m,onUpdateLead:y,onUpdateTask:S,onAddTask:C,onScheduleMessage:k})]})},fP=w.createContext(void 0),ed=()=>{const t=w.useContext(fP);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},pP=({children:t})=>{const[r,n]=w.useState([]),a=i=>{const l=crypto.randomUUID(),d={id:l,duration:5e3,...i};n(u=>[...u,d]),d.duration&&d.duration>0&&setTimeout(()=>{s(l)},d.duration)},s=i=>{n(l=>l.filter(d=>d.id!==i))};return e.jsxs(fP.Provider,{value:{toasts:r,addToast:a,removeToast:s},children:[t,e.jsx(nY,{})]})},nY=()=>{const{toasts:t,removeToast:r}=ed();return t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:t.map(n=>e.jsx(aY,{toast:n,onClose:()=>r(n.id)},n.id))})},aY=({toast:t,onClose:r})=>{const[n,a]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>a(!0),10)},[]);const s=()=>{a(!1),setTimeout(r,300)},i=()=>{const d={className:"h-5 w-5"};switch(t.type){case"success":return e.jsx(Rt.Success,{...d});case"error":return e.jsx(Rt.Close,{...d});case"warning":return e.jsx(Rt.Note,{...d});case"info":return e.jsx(Rt.Activity,{...d});default:return e.jsx(Rt.Activity,{...d})}},l=()=>{const d="flex items-start gap-3 p-4 rounded-lg shadow-lg border transition-all duration-300";if(n)switch(t.type){case"success":return`${d} bg-green-50 border-green-200 text-green-800 dark:bg-green-900/30 dark:border-green-800 dark:text-green-300`;case"error":return`${d} bg-red-50 border-red-200 text-red-800 dark:bg-red-900/30 dark:border-red-800 dark:text-red-300`;case"warning":return`${d} bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:border-yellow-800 dark:text-yellow-300`;case"info":return`${d} bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300`;default:return`${d} bg-surface border-muted text-on-surface`}else return`${d} opacity-0 transform translate-x-full`};return e.jsxs("div",{className:l(),children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i()}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("div",{className:"font-semibold text-sm",children:t.title}),t.message&&e.jsx("div",{className:"text-sm mt-1 opacity-90",children:t.message})]}),e.jsx("button",{onClick:s,className:"flex-shrink-0 ml-2 p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Close notification",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},sY=t=>{const{organizationId:r,onCustomFieldsUpdate:n,onLeadsUpdate:a,onIntegrationUpdate:s,onUsersUpdate:i,enabled:l=!0}=t,[d,u]=w.useState(!1),[m,f]=w.useState(null),p=w.useRef(null),x=w.useRef(),g=w.useRef(0),v=5,b=w.useCallback(()=>{if(!(p.current?.readyState===WebSocket.OPEN||!l))try{const O=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/sync`;console.log("Connecting to RealTime sync WebSocket:",O),p.current=new WebSocket(O),p.current.onopen=()=>{console.log("RealTime sync WebSocket connected"),u(!0),f(null),g.current=0,x.current&&(clearTimeout(x.current),x.current=void 0)},p.current.onmessage=E=>{try{const P=JSON.parse(E.data);switch(console.log("RealTime sync message:",P),P.type){case"custom_fields_updated":P.organizationId===r&&n&&n(P.fields);break;case"leads_updated":P.organizationId===r&&a&&a(P.leads);break;case"integration_updated":P.organizationId===r&&s&&s(P.integration);break;case"users_updated":P.organizationId===r&&i&&i(P.users);break;case"field_mapping_updated":P.organizationId===r&&console.log("Field mapping updated:",P.mapping);break;default:console.log("Unknown message type:",P.type)}}catch(P){console.error("Error parsing WebSocket message:",P)}},p.current.onclose=E=>{if(console.log("RealTime sync WebSocket closed:",E.code,E.reason),u(!1),E.code!==1e3&&g.current<v){const P=Math.pow(2,g.current)*1e3;x.current=setTimeout(()=>{g.current++,console.log(`RealTime sync reconnect attempt (${g.current}/${v})`),b()},P)}},p.current.onerror=E=>{console.error("RealTime sync WebSocket error:",E),f("WebSocket connection error")}}catch(N){console.error("Failed to create RealTime sync WebSocket:",N),f("Failed to connect to sync server")}},[r,n,a,s,l]);w.useCallback(()=>{x.current&&(clearTimeout(x.current),x.current=void 0),p.current&&(p.current.close(1e3,"Component unmounting"),p.current=null),u(!1)},[]);const y=w.useCallback(N=>{p.current?.readyState===WebSocket.OPEN?p.current.send(JSON.stringify(N)):console.warn("RealTime sync WebSocket is not connected")},[]);w.useEffect(()=>{d&&r&&y({type:"subscribe",organizationId:r,events:["custom_fields","leads","integrations","field_mappings","users"]})},[d,r,y]),w.useEffect(()=>{d&&(g.current=0,x.current&&clearTimeout(x.current))},[d]),w.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const S=w.useCallback(async()=>{d&&y({type:"sync_custom_fields",organizationId:r})},[d,r,y]),C=w.useCallback(async()=>{d&&y({type:"sync_leads",organizationId:r})},[d,r,y]),k=w.useCallback(async()=>{d&&y({type:"sync_integrations",organizationId:r})},[d,r,y]),T=w.useCallback(async()=>{d&&y({type:"sync_users",organizationId:r})},[d,r,y]);return{isConnected:d,error:m,syncCustomFields:S,syncLeads:C,syncIntegrations:k,syncUsers:T,reconnectAttempts:g.current}},iY=({user:t,onClose:r,onConfirm:n,isLoading:a=!1})=>t?e.jsx(it,{isOpen:!0,onClose:r,title:"Delete User",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(V.Delete,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-on-surface",children:"Delete User"}),e.jsx("p",{className:"text-sm text-subtle",children:"This action cannot be undone."})]})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-red-800",children:["Are you sure you want to delete ",e.jsx("strong",{children:t.name})," (",t.email,")? This will permanently remove the user and all associated data."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-4 py-2 text-sm font-medium text-subtle bg-muted hover:bg-subtle/80 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>n(t.id),disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V.Delete,{className:"w-4 h-4 mr-2"}),"Delete User"]})})]})]})}):null,oY=({user:t,teams:r,onClose:n,onSave:a,isLoading:s=!1})=>{const[i,l]=w.useState(t||{id:0,name:"",email:"",password:"",role:Wt.SALES_REP,permissions:[],avatar:"",phone:"",teamId:void 0,isTrackingEnabled:!1,organizationId:""}),[d,u]=w.useState({}),m=t&&t.id&&t.id>0,f=()=>{const b={};return i.name.trim()||(b.name="Full name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(b.email="Please enter a valid email address"):b.email="Email address is required",!m&&!i.password?b.password="Password is required for new users":i.password&&i.password.length<6&&(b.password="Password must be at least 6 characters"),u(b),Object.keys(b).length===0},p=b=>{const{name:y,value:S}=b.target;l({...i,[y]:S}),d[y]&&u({...d,[y]:""})},x=(b,y)=>{const S=i.permissions||[],C=y?[...S,b]:S.filter(k=>k!==b);l({...i,permissions:C})},g=b=>{if(b.preventDefault(),!f())return;const y={...i};m&&!y.password&&delete y.password,a(y)},v=i.role===Wt.ADMIN;return e.jsx(it,{isOpen:!0,onClose:n,title:m?"Edit User & Permissions":"Add New User",children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.name?"border-red-500":"border-muted"}`,placeholder:"Enter full name"}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:i.email,onChange:p,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.email?"border-red-500":"border-muted"}`,placeholder:"Enter email address"}),d.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:i.phone||"",onChange:p,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Avatar URL"}),e.jsx("input",{type:"url",name:"avatar",value:i.avatar||"",onChange:p,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://example.com/avatar.jpg"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Role & Team Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Role *"}),e.jsx("select",{name:"role",value:i.role,onChange:p,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:AK.filter(b=>b!==Wt.SUPER_ADMIN).map(b=>e.jsx("option",{value:b,children:b},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Team"}),e.jsxs("select",{name:"teamId",value:i.teamId||"",onChange:p,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"No Team"}),r.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isTrackingEnabled",name:"isTrackingEnabled",checked:i.isTrackingEnabled||!1,onChange:b=>l({...i,isTrackingEnabled:b.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),e.jsx("label",{htmlFor:"isTrackingEnabled",className:"ml-2 block text-sm text-subtle",children:"Enable activity tracking for this user"})]})]}),!m&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Account Setup"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Temporary Password *"}),e.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:p,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.password?"border-red-500":"border-muted"}`,placeholder:"Enter temporary password"}),d.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password}),e.jsx("p",{className:"mt-1 text-xs text-subtle",children:"User will be required to change this password on first login"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Permissions"}),e.jsx("p",{className:"text-sm text-subtle",children:"Assign granular permissions. Admins have all permissions by default."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:TK.map(b=>e.jsxs("label",{className:`flex items-start p-3 bg-background border rounded-lg transition-all ${v?"cursor-not-allowed opacity-60 border-muted":"hover:bg-muted/50 cursor-pointer border-muted hover:border-primary-300"}`,children:[e.jsx("input",{type:"checkbox",checked:v||i.permissions.includes(b.id),onChange:y=>x(b.id,y.target.checked),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 border-muted bg-surface mt-0.5",disabled:v}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"font-medium text-on-surface text-sm",children:b.name}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:b.description})]})]},b.id))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:n,disabled:s,className:"px-4 py-2 text-sm font-medium text-subtle bg-muted hover:bg-subtle/80 rounded-lg transition-colors disabled:opacity-50 order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center order-1 sm:order-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),m?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V.Add,{className:"w-4 h-4 mr-2"}),m?"Update User":"Create User"]})})]})]})})},lY=({users:t,teams:r,onSaveUser:n,onDeleteUser:a})=>{const[s,i]=w.useState(!1),[l,d]=w.useState(!1),[u,m]=w.useState(null),[f,p]=w.useState(null),[x,g]=w.useState(!1),[v,b]=w.useState(!1),{addToast:y}=ed(),S=localStorage.getItem("currentOrganizationId")||"org-1";sY({organizationId:S,onUsersUpdate:I=>{console.log("Real-time user update received:",I)},enabled:!0}),w.useEffect(()=>{console.log(" UserManagementPage: Component rendered"),console.log(" Props users count:",t.length),console.log(" Props users:",t.map(I=>({id:I.id,name:I.name})))});const C=(I=null)=>{m(I),i(!0)},k=()=>{m(null),i(!1)},T=I=>{p(I),d(!0)},N=()=>{p(null),d(!1)},O=async I=>{g(!0);try{await n(I),y({type:"success",title:"Success",message:`User ${u?"updated":"created"} successfully`}),k()}catch{y({type:"error",title:"Error",message:`Failed to ${u?"update":"create"} user`})}finally{g(!1)}},E=async I=>{console.log(" UserManagementPage: Starting deletion for user:",I),console.log(" Current users before deletion:",t.map(M=>({id:M.id,name:M.name}))),b(!0);try{await a(I),y({type:"success",title:"Success",message:"User deleted successfully"}),N(),console.log(" Forcing component re-render after deletion")}catch{y({type:"error",title:"Error",message:"Failed to delete user"})}finally{b(!1)}},P=I=>{switch(I){case Wt.ADMIN:return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300";case Wt.MANAGER:return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case Wt.SALES_REP:return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-300"}};return e.jsxs("div",{className:"flex flex-col h-full space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-on-surface",children:"Users & Permissions"}),e.jsx("p",{className:"text-subtle mt-1 text-sm sm:text-base",children:"Manage your team members and their access levels"})]}),e.jsxs("button",{onClick:()=>C(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center shadow-sm hover:shadow-md",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"}),"Add User"]})]}),e.jsx("div",{className:"flex-grow bg-surface rounded-xl shadow-sm border border-muted overflow-hidden",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(V.Team,{className:"w-12 h-12 text-subtle mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No users found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Get started by adding your first team member"}),e.jsxs("button",{onClick:()=>C(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center",children:[e.jsx(V.Add,{className:"w-4 h-4 mr-2"}),"Add Your First User"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider",children:"User"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden sm:table-cell",children:"Role"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden md:table-cell",children:"Team"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden lg:table-cell",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-right text-xs font-semibold text-subtle uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:t.map(I=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:I.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(I.name)}&background=4F46E5&color=fff&size=40`,alt:I.name,onError:M=>{const D=M.target;D.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(I.name)}&background=4F46E5&color=fff&size=40`}})}),e.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-on-surface truncate",children:I.name}),e.jsx("div",{className:"text-sm text-subtle truncate",children:I.email}),I.phone&&e.jsx("div",{className:"text-xs text-subtle truncate sm:hidden",children:I.phone})]})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(I.role)}`,children:I.role})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-subtle hidden md:table-cell",children:r.find(M=>M.id===I.teamId)?.name||"No Team"}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${I.isTrackingEnabled?"bg-green-400":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-subtle",children:I.isTrackingEnabled?"Active":"Inactive"})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>C(I),className:"text-primary-600 hover:text-primary-900 p-1 rounded transition-colors duration-150 hover:bg-primary-50",title:"Edit user",children:e.jsx(V.Edit,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(I),className:"text-red-600 hover:text-red-900 p-1 rounded transition-colors duration-150 hover:bg-red-50",title:"Delete user",children:e.jsx(V.Delete,{className:"w-4 h-4"})})]})})]},I.id))})]})})}),s&&e.jsx(oY,{user:u,teams:r,onClose:k,onSave:O,isLoading:x}),l&&e.jsx(iY,{user:f,onClose:N,onConfirm:E,isLoading:v})]})},cY=({isOpen:t,onClose:r,webhookId:n,webhookName:a})=>{const[s,i]=w.useState([]),[l,d]=w.useState(!1),[u,m]=w.useState(null),[f,p]=w.useState(null),[x,g]=w.useState(null),[v,b]=w.useState({event:"all",status:"all",search:""}),y=async()=>{try{if(d(!0),m(null),console.log("Fetching logs for webhookId:",n),!n)throw new Error("Webhook ID is required");const P=localStorage.getItem("token")||localStorage.getItem("authToken");if(!P)throw new Error("No authentication token found");const I=new URLSearchParams;I.append("limit","50"),v.event&&v.event!=="all"&&I.append("event",v.event),v.status&&v.status!=="all"&&I.append("status",v.status),v.search&&I.append("search",v.search);const M=`https://crm.clienn.com/api/webhooks/${n}/logs?${I}`;console.log("Fetching logs from URL:",M),console.log("WebhookId type:",typeof n,"Value:",n);const D=await fetch(M,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error(`Failed to fetch logs: ${D.statusText}`);const U=await D.json();if(U.success)i(U.data||[]);else throw new Error(U.message||"Failed to fetch logs")}catch(P){console.error("Error fetching webhook logs:",P),m(P instanceof Error?P.message:"Couldn't load logs. Try again.")}finally{d(!1)}},S=async P=>{try{g(P);const I=localStorage.getItem("token")||localStorage.getItem("authToken");if(!I)throw new Error("No authentication token found");const M=await fetch(`https://crm.clienn.com/api/webhooks/deliveries/${P}/retry`,{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});if(!M.ok)throw new Error(`Retry failed: ${M.statusText}`);const D=await M.json();if(D.success)await y(),console.log("Retry successful");else throw new Error(D.message||"Retry failed")}catch(I){throw console.error("Error retrying delivery:",I),I}finally{g(null)}},C=w.useMemo(()=>s.filter(P=>{if(v.event&&v.event!=="all"&&P.event!==v.event||v.status&&v.status!=="all"&&(v.status==="success"&&!P.success||v.status==="failed"&&P.success))return!1;if(v.search){const I=v.search.toLowerCase();return P.event.toLowerCase().includes(I)||P.statusCode.toString().includes(I)||P.deliveryId&&P.deliveryId.toLowerCase().includes(I)}return!0}),[s,v]),k=P=>new Date(P).toLocaleString(),T=P=>P<1e3?`${P}ms`:`${(P/1e3).toFixed(1)}s`,N=P=>e.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${P.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[P.statusCode," ",P.success?"OK":"Failed"]}),O=[{value:"all",label:"All Events"},{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"},{value:"lead.received",label:"Lead Received"}],E=[{value:"all",label:"All Results"},{value:"success",label:"Success"},{value:"failed",label:"Failed"}];return w.useEffect(()=>{t&&n&&(console.log("Modal opened with webhookId:",n),y())},[t,n]),w.useEffect(()=>{t||p(null)},[t]),e.jsxs(it,{isOpen:t,onClose:r,title:`Delivery Logs - ${a}`,children:[e.jsxs("div",{className:"flex h-96",children:[e.jsxs("div",{className:`${f?"w-2/3":"w-full"} flex flex-col`,children:[e.jsxs("div",{className:"flex gap-4 mb-4 p-4 border-b border-muted",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Event"}),e.jsx("select",{value:v.event||"all",onChange:P=>b(I=>({...I,event:P.target.value})),className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm",children:O.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Result"}),e.jsx("select",{value:v.status||"all",onChange:P=>b(I=>({...I,status:P.target.value})),className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm",children:E.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Search"}),e.jsx("input",{type:"text",value:v.search||"",onChange:P=>b(I=>({...I,search:P.target.value})),placeholder:"Search events, status codes...",className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:y,disabled:l,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-300 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[l&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Refresh"]})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:l?e.jsx("div",{className:"p-4",children:[...Array(5)].map((P,I)=>e.jsx("div",{className:"animate-pulse p-4 border-b border-muted",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),e.jsx("div",{className:"h-6 bg-muted rounded w-16"})]})},I))}):u?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(V.XCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 font-medium",children:u}),e.jsx("button",{onClick:y,className:"mt-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Try Again"})]}):C.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(V.Activity,{className:"h-12 w-12 text-muted mx-auto mb-4"}),e.jsx("p",{className:"text-subtle",children:"No deliveries yet"}),e.jsx("p",{className:"text-sm text-subtle mt-1",children:"Webhook deliveries will appear here once events are triggered."})]}):e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-muted sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Result"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-subtle uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-background divide-y divide-muted",children:C.map(P=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:k(P.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-on-surface",children:O.find(I=>I.value===P.event)?.label||P.event}),e.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:P.statusCode}),e.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:T(P.responseTimeMs)}),e.jsx("td",{className:"px-4 py-3",children:N(P)}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("button",{onClick:()=>p(P),className:"text-primary-600 hover:text-primary-800 font-medium text-sm",children:"View details"}),!P.success&&e.jsx("button",{onClick:()=>S(P.deliveryId||P.id),disabled:x===(P.deliveryId||P.id),className:"ml-3 text-blue-600 hover:text-blue-800 font-medium text-sm disabled:opacity-50",children:x===(P.deliveryId||P.id)?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}):"Retry"})]})]},P.id))})]})})})]}),f&&e.jsxs("div",{className:"w-1/3 border-l border-muted bg-surface p-4 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Delivery Details"}),e.jsx("button",{onClick:()=>p(null),className:"text-subtle hover:text-on-surface",children:e.jsx(V.Close,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Delivery ID"}),e.jsx("p",{className:"text-sm font-mono bg-muted p-2 rounded",children:f.deliveryId||f.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Event"}),e.jsx("p",{className:"text-sm",children:O.find(P=>P.value===f.event)?.label||f.event})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[N(f),e.jsx("span",{className:"text-sm text-subtle",children:T(f.responseTimeMs)})]})]}),f.requestHeaders&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Request Headers"}),e.jsx("div",{className:"bg-muted p-3 rounded-md",children:Object.entries(f.requestHeaders).map(([P,I])=>e.jsxs("div",{className:"text-xs font-mono mb-1",children:[e.jsxs("span",{className:"text-subtle",children:[P,":"]})," ",I]},P))})]}),f.requestBody&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Request Body"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(f.requestBody),className:"text-xs bg-muted hover:bg-subtle/80 text-on-surface font-bold py-1 px-2 rounded",children:"Copy"})]}),e.jsx("textarea",{readOnly:!0,value:f.requestBody.length>2e3?f.requestBody.substring(0,2e3)+"...":f.requestBody,className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm font-mono h-32"})]}),f.responseBody&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Response Body"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(f.responseBody),className:"text-xs bg-muted hover:bg-subtle/80 text-on-surface font-bold py-1 px-2 rounded",children:"Copy"})]}),e.jsx("textarea",{readOnly:!0,value:f.responseBody.length>2e3?f.responseBody.substring(0,2e3)+"...":f.responseBody,className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm font-mono h-32"})]}),f.errorMessage&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md border border-red-200",children:f.errorMessage})]}),!f.success&&e.jsx("div",{className:"pt-4 border-t border-muted",children:e.jsxs("button",{onClick:()=>{S(f.deliveryId||f.id),p(null)},disabled:x===(f.deliveryId||f.id),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center justify-center gap-2",children:[x===(f.deliveryId||f.id)&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Retry now"]})})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Close"})})]})},dY=({isOpen:t,onClose:r,onSave:n,editingMapping:a,availableAccounts:s=[]})=>{const[i,l]=w.useState({name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"}),[d,u]=w.useState({}),[m,f]=w.useState([{id:"1",crmField:"",value:""}]),[p,x]=w.useState([]),[g,v]=w.useState(!1),[b,y]=w.useState(!1),S=s.find(F=>F.name===i.facebookAccount)?.pages||[],C=S.find(F=>F.name===i.facebookPage)?.forms||[];console.log(" Debug Info:"),console.log("Selected Account:",i.facebookAccount),console.log("Selected Page:",i.facebookPage),console.log("Available Pages:",S.map(F=>F.name)),console.log("Available Forms:",C.map(F=>F.name)),console.log("Form Data:",i);const k=s.length>0?s.map(F=>F.name):["John Doe Marketing","Tech Solutions Inc","Digital Agency Pro"],T=["None","Email","Phone","Email + Phone"],N=F=>{l({...i,facebookAccount:F,facebookPage:"",facebookForm:""}),v(!1),x([])},O=F=>{l({...i,facebookPage:F,facebookForm:""}),v(!1),x([])};w.useEffect(()=>{l(a?{name:a.name,facebookAccount:a.sourceForm,facebookPage:"My Awesome Product",facebookForm:a.sourceForm,deduplicationStrategy:"None"}:{name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"})},[a,t]),w.useEffect(()=>{console.log("showFieldMapping state changed:",g),console.log("facebookForm value:",i.facebookForm),console.log("facebookFormFields:",p)},[g,i.facebookForm,p]);const E=F=>{F.preventDefault(),n(i),P()},P=()=>{l({name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"}),u({}),x([]),v(!1),y(!1),f([{id:"1",crmField:"",value:""}]),r()},I=()=>{f([...m,{id:Date.now().toString(),crmField:"",value:""}])},M=F=>{m.length>1&&f(m.filter(W=>W.id!==F))},D=(F,W,$)=>{f(m.map(H=>H.id===F?{...H,[W]:$}:H))},U=F=>{if(console.log("Form selection changed to:",F),console.log("Available forms:",C),l({...i,facebookForm:F}),F&&F!==""&&F!=="Select Form"){console.log(" Form selected, showing field mapping section");const W=C.find($=>$.name===F);if(W&&W.fields.length>0){console.log(" Found form with fields:",W.fields),x(W.fields),v(!0),y(!1);const $={};W.fields.forEach(H=>{$[H]="Dont Sync"}),u($),console.log(" Field mapping initialized with",W.fields.length,"fields")}else{console.log(" Form not found or has no fields, using fallback method");const $=["first_name","last_name","email","phone_number","company"];x($),v(!0),y(!1);const H={};$.forEach(z=>{H[z]="Dont Sync"}),u(H),console.log(" Field mapping initialized with fallback fields:",$.length,"fields")}}else console.log(' No form selected or "Select Form" chosen, hiding mapping'),x([]),v(!1),y(!1)};return e.jsx(Zc,{isOpen:t,onClose:P,title:"",children:e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md md:max-w-3xl lg:max-w-5xl xl:max-w-6xl bg-surface rounded-xl shadow-2xl mx-4 border border-muted",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"bg-white/20 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h2",{className:"text-base sm:text-xl font-bold text-white truncate",children:a?"Edit Mapping":"Create New Mapping"})]}),e.jsx("button",{onClick:P,className:"text-white/80 hover:text-white hover:bg-white/20 p-1.5 sm:p-2 rounded-lg transition-all duration-200 flex-shrink-0 ml-2",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8 max-h-[70vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:E,className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface mb-2 sm:mb-3",children:" Mapping Name"}),e.jsx("input",{type:"text",value:i.name,onChange:F=>l({...i,name:F.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface placeholder-subtle text-sm sm:text-base",placeholder:"e.g., Winter Sale Leads, Newsletter Signup...",required:!0})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Facebook Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Account"}),e.jsxs("select",{value:i.facebookAccount,onChange:F=>N(F.target.value),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),e.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose an account first"}),k.map(F=>e.jsx("option",{value:F,className:"bg-surface text-on-surface",children:F},F))]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Page"}),e.jsxs("select",{value:i.facebookPage,onChange:F=>O(F.target.value),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,disabled:!i.facebookAccount,children:[e.jsx("option",{value:"",children:"Select Page"}),e.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose a page after selecting account"}),S.map(F=>e.jsx("option",{value:F.name,className:"bg-surface text-on-surface",children:F.name},F.fbPageId))]})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2 sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Form"}),e.jsxs("select",{value:i.facebookForm,onChange:F=>{console.log(" Form dropdown changed to:",F.target.value),U(F.target.value)},className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,disabled:!i.facebookPage,children:[e.jsx("option",{value:"",children:"Select Form"}),e.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose a form after selecting page"}),C.map(F=>e.jsx("option",{value:F.name,className:"bg-surface text-on-surface",children:F.name},F.id))]})]})]})]}),(i.facebookForm&&i.facebookForm!==""&&i.facebookForm!=="Select Form"||g)&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Field Mapping"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle bg-background p-2 sm:p-3 rounded-lg border border-muted",children:"Map fields from your Facebook form to your CRM fields. Select Account  Page  Form above to load the field mapping options."}),e.jsx("div",{className:"bg-background p-3 sm:p-4 rounded-xl border border-muted",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-semibold text-on-surface",children:"Field Mapping"}),e.jsx("span",{className:"text-xs text-subtle",children:"Map your Facebook form fields to CRM fields"})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-sm text-subtle",children:"Loading form fields..."})]}):p.length>0?p.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface rounded-lg border border-muted",children:[e.jsx("div",{className:"flex-1 mr-4",children:e.jsx("span",{className:"text-sm font-medium text-on-surface",children:F==="full_name"||F==="first_name"?"First Name":F==="last_name"?"Last Name":F==="email"?"Email Address":F==="phone_number"?"Phone Number":F==="company"?"Company":F==="job_title"?"Job Title":F.replace(/_/g," ").replace(/\b\w/g,W=>W.toUpperCase())})}),e.jsx("div",{className:"w-48",children:e.jsxs("select",{value:d[F]||"Dont Sync",onChange:W=>u({...d,[F]:W.target.value}),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface text-sm",children:[e.jsx("option",{value:"Dont Sync",children:"Don't Sync"}),e.jsx("option",{value:"First Name",children:"First Name"}),e.jsx("option",{value:"Last Name",children:"Last Name"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Company",children:"Company"}),e.jsx("option",{value:"Lead Source",children:"Lead Source"}),e.jsx("option",{value:"Custom Field 1",children:"Custom Field 1"}),e.jsx("option",{value:"Custom Field 2",children:"Custom Field 2"})]})})]},F)):e.jsx("div",{className:"flex items-center justify-center p-8 text-sm text-subtle",children:"No form fields available. Please select a Facebook form first."})})]})})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-blue-800 font-semibold",children:" Debug Info:"}),e.jsxs("p",{className:"text-xs text-blue-700",children:['Selected Form: "',i.facebookForm,'"']}),e.jsxs("p",{className:"text-xs text-blue-700",children:["showFieldMapping: ",g?" true":" false"]}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Facebook Fields Count: ",p.length]}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Field Mappings Count: ",Object.keys(d).length]}),e.jsx("p",{className:"text-xs text-blue-700 font-bold",children:i.facebookForm&&i.facebookForm!==""&&i.facebookForm!=="Select Form"?" MAPPING SECTION SHOULD BE VISIBLE ABOVE":" Select a form to show mapping section"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Custom Value Mapping"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle bg-background p-2 sm:p-3 rounded-lg border border-muted",children:"Set static values for specific CRM fields for every new lead."}),e.jsx("div",{className:"space-y-2 sm:space-y-3 bg-background p-3 sm:p-4 rounded-xl border border-muted",children:m.map((F,W)=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 p-3 bg-surface rounded-lg border border-muted",children:[e.jsxs("select",{value:F.crmField,onChange:$=>D(F.id,"crmField",$.target.value),className:"flex-1 px-3 py-2 border-2 border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-surface text-on-surface text-sm sm:text-base order-1 sm:order-1",children:[e.jsx("option",{value:"",children:"Select CRM Field"}),e.jsx("option",{value:"Lead Source",className:"bg-surface text-on-surface",children:"Lead Source"}),e.jsx("option",{value:"Campaign",className:"bg-surface text-on-surface",children:"Campaign"}),e.jsx("option",{value:"Lead Status",className:"bg-surface text-on-surface",children:"Lead Status"}),e.jsx("option",{value:"Assignee",className:"bg-surface text-on-surface",children:"Assignee"})]}),e.jsx("input",{type:"text",value:F.value,onChange:$=>D(F.id,"value",$.target.value),className:"flex-1 px-3 py-2 border-2 border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-surface text-on-surface text-sm sm:text-base order-2 sm:order-2",placeholder:"Enter value..."}),e.jsx("button",{type:"button",onClick:()=>M(F.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200 order-3 self-center sm:self-auto",disabled:m.length===1,children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},F.id))}),e.jsxs("button",{type:"button",onClick:I,className:"flex items-center justify-center space-x-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300 text-xs sm:text-sm font-semibold bg-primary-50 dark:bg-primary-900/20 hover:bg-primary-100 dark:hover:bg-primary-900/30 px-3 sm:px-4 py-2 rounded-lg transition-all duration-200 w-full sm:w-auto",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Add Custom Field"})]})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Deduplication Strategy"}),e.jsx("select",{value:i.deduplicationStrategy,onChange:F=>l({...i,deduplicationStrategy:F.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",children:T.map(F=>e.jsx("option",{value:F,className:"bg-surface text-on-surface",children:F},F))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-8 border-t-2 border-muted bg-background p-3 sm:p-4 rounded-b-xl",children:[e.jsx("button",{type:"button",onClick:P,className:"px-4 sm:px-6 py-2 sm:py-3 border-2 border-muted text-on-surface rounded-lg sm:rounded-xl hover:bg-background hover:border-primary-500 font-semibold transition-all duration-200 text-sm sm:text-base order-2 sm:order-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white rounded-lg sm:rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 text-sm sm:text-base order-1 sm:order-2",children:a?"Update Mapping":"Save Mapping"})]})]})})]})})},uY=({logs:t,settings:r,setSettings:n,customFieldDefs:a,onSendTestLead:s,syncFacebookLeads:i,currentOrganization:l,webhooks:d,onAddWebhook:u,onDeleteWebhook:m,onUpdateWebhook:f,onRefreshApiKey:p})=>{const[x,g]=w.useState({source:null,type:"connect"}),[v,b]=w.useState(!1),[y,S]=w.useState(null),[C,k]=w.useState(!1),[T,N]=w.useState(!1),[O,E]=w.useState({isOpen:!1,webhook:null}),[P,I]=w.useState(!1),[M,D]=w.useState(!1),[U,F]=w.useState({type:null,message:""}),[W,$]=w.useState({isOpen:!1,webhookId:"",webhookName:""}),[H,z]=w.useState(!1),[q,Q]=w.useState(null),[ee,R]=w.useState(!1),[L,G]=w.useState(null),K=fa(),ie=An();w.useEffect(()=>{const re=new URLSearchParams(K.search),de=re.get("status"),Be=re.get("token"),Me=re.get("message");de==="fb_success"&&Be?(n(Ee=>Ee.map(Xe=>Xe.source==="Facebook"?{...Xe,isConnected:!0}:Xe)),g({source:"Facebook",type:"connect"}),ie(K.pathname,{replace:!0})):de==="fb_error"&&(alert(`Facebook connection failed: ${Me||"Unknown error"}`),ie(K.pathname,{replace:!0}))},[K,ie,n]);const xe=re=>{console.log("Creating new mapping:",re),z(!1),Q(null)},pe=re=>{console.log("Updating mapping:",re),z(!1),Q(null)},be=["Facebook","Google Ads","Website","Cloud Telephony","Email Marketing","SMS Marketing"],me=w.useMemo(()=>{const re=r.map(Ee=>Ee.source),Be=be.filter(Ee=>!re.includes(Ee)).map(Ee=>({source:Ee,isConnected:!1,fieldMappings:[],organizationId:l?.id||"",connectedAccounts:[],connectedWebsites:[]})),Me=[...r,...Be];return{"Lead Capture":Me.filter(Ee=>["Facebook","Google Ads","Website"].includes(Ee.source)),Communication:Me.filter(Ee=>["Cloud Telephony","Email Marketing","SMS Marketing"].includes(Ee.source))}},[r,l?.id]),X={Facebook:e.jsx("div",{className:"text-blue-500 bg-blue-500/10 p-2 rounded-lg",children:e.jsx(V.Facebook,{className:"h-6 w-6"})}),"Google Ads":e.jsx("div",{className:"text-orange-500 bg-orange-500/10 p-2 rounded-lg",children:e.jsx(V.Google,{className:"h-6 w-6"})}),Website:e.jsx("div",{className:"text-purple-500 bg-purple-500/10 p-2 rounded-lg",children:e.jsx(V.Globe,{className:"h-6 w-6"})}),"Cloud Telephony":e.jsx("div",{className:"text-cyan-500 bg-cyan-500/10 p-2 rounded-lg",children:e.jsx(V.Call,{className:"h-6 w-6"})}),"Email Marketing":e.jsx("div",{className:"text-red-500 bg-red-500/10 p-2 rounded-lg",children:e.jsx(V.Email,{className:"h-6 w-6"})}),"SMS Marketing":e.jsx("div",{className:"text-indigo-500 bg-indigo-500/10 p-2 rounded-lg",children:e.jsx(V.SMS,{className:"h-6 w-6"})})};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[U.type&&e.jsx("div",{className:`p-4 rounded-lg border ${U.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[U.type==="success"?e.jsx(V.CheckCircle,{className:"h-5 w-5 mr-2"}):e.jsx(V.XCircle,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:U.message})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-on-surface",children:"Integration Hub"}),e.jsx("p",{className:"text-subtle mt-1",children:"Connect your marketing channels and other tools to supercharge your CRM."})]}),e.jsx("div",{className:"flex-grow overflow-y-auto",children:e.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-muted p-4 flex flex-col min-h-full",children:e.jsxs("div",{className:"space-y-6 pb-6",children:[Object.entries(me).map(([re,de])=>e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-semibold text-subtle uppercase tracking-wider mb-2",children:re}),e.jsx("div",{className:"space-y-1",children:Array.isArray(de)&&de.map(Be=>e.jsxs("button",{onClick:()=>{ie({Facebook:"/settings/integrations/facebook","Google Ads":"/settings/integrations/google-ads",Website:"/settings/integrations/website","Cloud Telephony":"/settings/integrations/cloud-telephony","Email Marketing":"/settings/integrations/email-marketing","SMS Marketing":"/settings/integrations/sms-marketing"}[Be.source])},className:"w-full flex items-center gap-3 p-3 text-left rounded-lg transition-colors text-subtle hover:bg-muted hover:text-on-surface",children:[X[Be.source],e.jsx("span",{className:"font-semibold text-on-surface flex-grow",children:Be.source}),e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium ${Be.isConnected?"text-green-500":"text-amber-500"}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${Be.isConnected?"bg-green-500":"bg-amber-500"}`}),Be.isConnected?"Connected":"Action Needed"]}),e.jsx(V.ChevronRight,{className:"h-4 w-4"})]},Be.source))})]},re)),e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-semibold text-subtle uppercase tracking-wider mb-2",children:"Developer"}),e.jsx("div",{className:"space-y-1",children:e.jsxs("button",{onClick:()=>ie("/settings/integrations/api-webhooks"),className:"w-full flex items-center gap-3 p-3 text-left rounded-lg transition-colors text-subtle hover:bg-muted hover:text-on-surface",children:[e.jsx("div",{className:"text-gray-500 bg-gray-500/10 p-2 rounded-lg",children:e.jsx(V.Code,{className:"h-6 w-6"})}),e.jsx("span",{className:"font-semibold text-on-surface flex-grow",children:"API & Webhooks"}),e.jsx(V.ChevronRight,{className:"h-4 w-4"})]})})]})]})})}),e.jsx(cY,{isOpen:W.isOpen,onClose:()=>$({isOpen:!1,webhookId:"",webhookName:""}),webhookId:W.webhookId,webhookName:W.webhookName}),e.jsx(dY,{isOpen:H,onClose:()=>{z(!1),Q(null)},onSave:q?pe:xe,editingMapping:q})]})},mY=({onConnect:t,onSave:r})=>{const n=async()=>{try{const s=await(await fetch(`${window.location.origin}/api/fb/auth/start?tenantId=org-1`)).json();if(s.success){const i=window.open(s.authUrl,"facebook-oauth","width=600,height=700,scrollbars=yes,resizable=yes");if(!i){alert("Please allow popups for this website to connect with Facebook.");return}const l=u=>{if(console.log("Received postMessage:",u.data,"from source:",u.source===i?"popup":"other"),u.source===i&&(u.data.type==="FACEBOOK_AUTH_SUCCESS"||u.data.type==="FACEBOOK_AUTH_ERROR")){if(console.log("Processing Facebook auth message:",u.data.type),window.removeEventListener("message",l),u.data.type==="FACEBOOK_AUTH_SUCCESS"){console.log("Facebook auth successful, updating state with pages:",u.data.data.pages);const m={id:u.data.data.pages[0]?.pageId||"fb-main",name:u.data.data.accountName||"Facebook Account",accessToken:"connected",pages:u.data.data.pages.map(f=>({id:f.pageId,name:f.pageName,forms:[]}))};r({isConnected:!0,connectedAccounts:[m]})}else console.error("Facebook auth failed:",u.data.data.message),alert(`Facebook connection failed: ${u.data.data.message}`);i.closed||(i.close(),console.log("Popup closed after postMessage processing"))}};window.addEventListener("message",l);const d=window.setInterval(()=>{if(i.closed){window.clearInterval(d),window.removeEventListener("message",l);const u=new URLSearchParams(window.location.search),m=u.get("code"),f=u.get("state");m&&f?console.log("OAuth callback detected, not reloading page"):window.location.reload()}},1e3)}else console.error("Failed to start Facebook auth:",s.message),alert("Failed to connect to Facebook. Please try again.")}catch(a){console.error("Error starting Facebook auth:",a),alert("Error connecting to Facebook. Please try again.")}};return e.jsxs("div",{className:"text-center p-8 bg-background rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-on-surface",children:"Connect a Facebook Account"}),e.jsx("p",{className:"text-subtle mt-2 mb-6",children:"Facebook login will open in a popup window for better experience."}),e.jsx("button",{onClick:n,className:"w-full max-w-sm mx-auto bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Connect with Facebook"})]})},fY=({setting:t,onSave:r,onDisconnect:n,onSendTestLead:a})=>{const[s,i]=w.useState(t.connectedAccounts||[]),[l,d]=w.useState([]),[u,m]=w.useState(!1);w.useEffect(()=>{f()},[]);const f=async()=>{try{m(!0);const g=await(await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`)).json();g.success?d(g.pages||[]):console.error("Failed to fetch Facebook pages:",g.message)}catch(x){console.error("Error fetching Facebook pages:",x)}finally{m(!1)}},p=async()=>{try{const g=await(await fetch(`${window.location.origin}/api/fb/auth/start?tenantId=org-1`)).json();if(g.success){const v=window.open(g.authUrl,"facebook-oauth-add-account","width=600,height=700,scrollbars=yes,resizable=yes");if(!v){alert("Please allow popups for this website to connect with Facebook.");return}const b=S=>{console.log("Received postMessage for additional account:",S.data,"from source:",S.source===v?"popup":"other"),S.source===v&&(S.data.type==="FACEBOOK_AUTH_SUCCESS"||S.data.type==="FACEBOOK_AUTH_ERROR")&&(console.log("Processing additional Facebook account auth message:",S.data.type),window.removeEventListener("message",b),S.data.type==="FACEBOOK_AUTH_SUCCESS"?(console.log("Additional Facebook account auth successful, refreshing data..."),window.location.reload()):(console.error("Additional Facebook account auth failed:",S.data.data.message),alert(`Facebook connection failed: ${S.data.data.message}`)),v.closed||(v.close(),console.log("Additional account popup closed after postMessage processing")))};window.addEventListener("message",b);const y=window.setInterval(()=>{if(v.closed){window.clearInterval(y),window.removeEventListener("message",b);const S=new URLSearchParams(window.location.search),C=S.get("code"),k=S.get("state");C&&k?console.log("OAuth callback detected for additional account, not reloading page"):window.location.reload()}},1e3)}else alert("Failed to connect additional Facebook account. Please try again.")}catch(x){console.error("Error adding account:",x),alert("Error connecting additional Facebook account.")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Manage Facebook Connections"}),e.jsx("p",{className:"text-subtle text-sm",children:"Select the forms you want to sync. Leads from selected forms will be automatically added to your CRM."}),e.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto p-1",children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-subtle",children:"Loading Facebook pages..."})]}):l.length>0?s.map(x=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:x.name}),e.jsx("div",{className:"pl-4 mt-2 space-y-3",children:l.map(g=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-subtle",children:g.pageName}),e.jsx("div",{className:"pl-4 mt-1 space-y-2",children:e.jsx("p",{className:"text-xs text-subtle",children:"Forms will be loaded from Facebook API"})})]},g.pageId))})]},x.id)):e.jsx("div",{className:"text-center py-8 text-subtle",children:e.jsx("p",{children:"No Facebook pages found. Please connect your Facebook account first."})})}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:n,className:"bg-red-600/10 hover:bg-red-600/20 text-red-400 font-bold py-2 px-4 rounded-lg text-sm",children:"Disconnect All"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:p,className:"bg-blue-600/10 hover:bg-blue-600/20 text-blue-400 font-bold py-2 px-4 rounded-lg text-sm",children:"Add Account"}),e.jsx("button",{type:"button",onClick:()=>r(s),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Connections"})]})]})]})},pY=({setting:t,onClose:r,onSave:n,onDisconnect:a,onSendTestLead:s})=>{w.useEffect(()=>{const m=new URLSearchParams(window.location.search),f=m.get("code"),p=m.get("state"),x=m.get("error");if(x){console.error("Facebook OAuth error:",x),alert("Facebook authentication failed. Please try again."),i();return}f&&p&&l()},[]);const i=()=>{const m=new URL(window.location.href);m.searchParams.delete("code"),m.searchParams.delete("state"),m.searchParams.delete("error"),window.history.replaceState({},document.title,m.pathname+m.hash)},l=async(m,f)=>{try{console.log("OAuth callback detected, waiting for popup postMessage..."),i()}catch(p){console.error("Error in OAuth callback:",p),alert("Error completing Facebook connection."),i()}},d=m=>{n({connectedAccounts:m}),r()},u=()=>{a(),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:"Connect to Facebook Lead Ads",children:t.isConnected?e.jsx(fY,{setting:t,onSave:d,onDisconnect:u,onSendTestLead:s}):e.jsx(mY,{onConnect:()=>{},onSave:n})})},hY=({facebookFields:t,crmFields:r,initialMappings:n=[],onMappingsChange:a,onValidationChange:s,salesPipelineStages:i=["New Lead","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],users:l=[]})=>{const[d,u]=w.useState(n),[m,f]=w.useState(""),[p,x]=w.useState({});w.useEffect(()=>{if(a(d),s){const k=C();s(k.isValid,k.unmappedFields)}},[d,a,s]),w.useEffect(()=>{const k=T=>{T.target.closest(".searchable-dropdown")||x({})};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const g=k=>d.find(T=>T.crmField===k),v=k=>{const T=d.filter(N=>N.crmField!==k&&N.facebookField).map(N=>N.facebookField);return t.filter(N=>!T.includes(N.name))},b=(k,T,N)=>{u(O=>{const E=O.findIndex(I=>I.crmField===k);if(T===""&&!N)return O.filter(I=>I.crmField!==k);const P={facebookField:T,crmField:k,customValue:N};if(E>=0){const I=[...O];return I[E]=P,I}else return[...O,P]})},y=(k,T)=>{T==="Use Custom Value"?b(k,"",void 0):b(k,T,void 0)},S=k=>{const T=k.toLowerCase();return T==="name"||T==="email"||T.includes("phone")},C=()=>{const T=r.filter(N=>S(N.key)).filter(N=>{const O=g(N.key);return!O?.facebookField&&!O?.customValue});return{isValid:T.length===0,unmappedFields:T.map(N=>N.label)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-on-surface",children:["Available fields: ",e.jsx("span",{className:"font-medium",children:t.length}),e.jsx("span",{className:"text-red-600 ml-2",children:"*"})," are required for mapping."]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Field Name",e.jsxs("span",{className:"text-sm font-normal text-subtle",children:["(",r.length," fields)"]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Form Field"]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Custom Value"]})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"space-y-3",children:r.map(k=>{const T=g(k.key),N=!!(T?.facebookField||T?.customValue);return e.jsx("div",{className:"rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start bg-background",children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${N?"bg-green-500":"bg-gray-400"}`}),e.jsxs("span",{className:"font-medium text-on-surface flex-shrink-0",children:[k.label,k.required&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),T?.facebookField&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:["Facebook: ",T.facebookField]}),T?.customValue&&!T?.facebookField&&e.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:["Custom: ",T.customValue]})]})},k.key)})}),e.jsx("div",{className:"space-y-3",children:r.map(k=>{const T=g(k.key),N=v(k.key);return e.jsx("div",{className:"bg-background rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start",children:e.jsxs("select",{value:T?.facebookField||"",onChange:O=>y(k.key,O.target.value),className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Map ${k.label} to Facebook field or use custom value`,disabled:!!T?.customValue,children:[e.jsx("option",{value:"",children:"Select Facebook field..."}),e.jsx("option",{value:"Use Custom Value",children:"Use Custom Value"}),N.map(O=>e.jsx("option",{value:O.name,children:O.name},O.name))]})},k.key)})}),e.jsx("div",{className:"space-y-3",children:r.map(k=>{const T=g(k.key),N=!!T?.facebookField,O=k.options&&k.options.length>0;return e.jsx("div",{className:"bg-background rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start",children:N&&T?.facebookField!=="Use Custom Value"?e.jsx("div",{className:"w-full h-8 px-3 rounded-lg bg-muted text-muted-foreground flex items-center text-sm",children:"Using Facebook field value"}):k.type==="variable"?e.jsxs("div",{className:"relative w-full searchable-dropdown",children:[e.jsx("input",{type:"text",value:p[k.key]||T?.customValue||"",onChange:E=>{const P=E.target.value;x(M=>({...M,[k.key]:P})),(k.variableType==="pipeline_status"?i:k.variableType==="users"?l.map(M=>M.name):[]).includes(P)&&b(k.key,"",P)},onFocus:()=>{x(E=>({...E,[k.key]:E[k.key]||T?.customValue||""}))},placeholder:`Search ${k.label}...`,className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Search and select ${k.label} value`,disabled:N}),p[k.key]&&!N&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-background border border-muted rounded-lg shadow-xl max-h-48 overflow-y-auto",children:[(()=>{const E=k.variableType==="pipeline_status"?i:k.variableType==="users"?l.map(I=>I.name||I.email||I.id||I._id).filter(Boolean):[],P=E.filter(I=>I.toLowerCase().includes((p[k.key]||"").toLowerCase()));return console.log("Variable field options for",k.label,":",E),P.map(I=>e.jsx("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer text-on-surface",onClick:()=>{b(k.key,"",I),x(M=>({...M,[k.key]:""}))},children:I},I))})(),(k.variableType==="pipeline_status"?i:k.variableType==="users"?l.map(I=>I.name||I.email||I.id||I._id).filter(Boolean):[]).filter(I=>I.toLowerCase().includes((p[k.key]||"").toLowerCase())).length===0&&e.jsx("div",{className:"px-3 py-2 text-subtle",children:"No options found"})]})]}):O?e.jsxs("div",{className:"relative w-full searchable-dropdown",children:[e.jsx("input",{type:"text",value:p[k.key]||T?.customValue||"",onChange:E=>{const P=E.target.value;x(I=>({...I,[k.key]:P})),k.options?.includes(P)&&b(k.key,"",P)},onFocus:()=>{x(E=>({...E,[k.key]:E[k.key]||T?.customValue||""}))},placeholder:`Search ${k.label}...`,className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Search and select ${k.label} value`}),p[k.key]&&!N&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-background border border-muted rounded-lg shadow-lg max-h-32 overflow-y-auto",children:[k.options?.filter(E=>E.toLowerCase().includes((p[k.key]||"").toLowerCase())).map(E=>e.jsx("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer text-on-surface",onClick:()=>{b(k.key,"",E),x(P=>({...P,[k.key]:""}))},children:E},E)),k.options?.filter(E=>E.toLowerCase().includes((p[k.key]||"").toLowerCase())).length===0&&e.jsx("div",{className:"px-3 py-2 text-subtle",children:"No options found"})]})]}):e.jsx("input",{type:"text",value:T?.customValue||"",onChange:E=>b(k.key,"",E.target.value),placeholder:"Enter custom value...",className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Custom value for ${k.label}`,disabled:N})},k.key)})})]})}),(()=>{const k=C();return e.jsx("div",{className:"bg-muted/30 rounded-lg p-4 mt-4",children:k.isValid?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-green-800",children:"All mandatory fields are properly mapped! "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-subtle",children:"Total CRM fields:"}),e.jsx("span",{className:"font-medium text-on-surface ml-2",children:r.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-subtle",children:"Mapped fields:"}),e.jsx("span",{className:"font-medium text-green-600 ml-2",children:d.filter(T=>T.facebookField||T.customValue).length})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Required fields:"})," ",k.unmappedFields.join(", ")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-subtle",children:"Total CRM fields:"}),e.jsx("span",{className:"font-medium text-on-surface ml-2",children:r.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-subtle",children:"Mapped fields:"}),e.jsx("span",{className:"font-medium text-green-600 ml-2",children:d.filter(T=>T.facebookField||T.customValue).length})]})]})]})})})()]})},xY=()=>{const[t,r]=w.useState([]),[n,a]=w.useState({activityTypes:[],statuses:[],formIds:[],formNames:[],campaignIds:[],campaignNames:[],leadIds:[]}),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,m]=w.useState({activityType:"",status:"",conditions:[],startDate:"",endDate:""}),[f,p]=w.useState(1),[x,g]=w.useState(1),[v,b]=w.useState(0),[y]=w.useState(20),[S,C]=w.useState("createdAt"),[k,T]=w.useState("desc"),N=async($=1)=>{i(!0),d(null);try{const H=new URLSearchParams({organizationId:"org-1",page:$.toString(),limit:y.toString(),sortBy:S,sortOrder:k});u.activityType&&H.append("activityType",u.activityType),u.status&&H.append("status",u.status),u.startDate&&H.append("startDate",u.startDate),u.endDate&&H.append("endDate",u.endDate),u.conditions.forEach((Q,ee)=>{if(Q.field&&Q.value)if(Q.field==="createdAt"){if(Q.value!=="custom"){const{startDate:R,endDate:L}=W(Q.value);R&&H.append("startDate",R),L&&H.append("endDate",L)}}else H.append(`conditions[${ee}][field]`,Q.field),H.append(`conditions[${ee}][condition]`,Q.condition),H.append(`conditions[${ee}][value]`,Q.value)});const z=await fetch(`${window.location.origin}/api/fb/activity-logs?${H}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!z.ok)throw new Error("Failed to fetch activity logs");const q=await z.json();if(q.success)r(q.logs),g(q.pagination.totalPages),b(q.pagination.totalCount),p(q.pagination.currentPage);else throw new Error(q.message||"Failed to fetch activity logs")}catch(H){d(H instanceof Error?H.message:"Failed to fetch activity logs")}finally{i(!1)}},O=async()=>{try{const $=await fetch(`${window.location.origin}/api/fb/activity-logs/filters?organizationId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if($.ok){const H=await $.json();H.success&&a(H.filterOptions)}}catch($){console.error("Error fetching filter options:",$)}};w.useEffect(()=>{O(),N()},[]);const E=($,H)=>{m(z=>({...z,[$]:H})),p(1)},P=()=>{N(1)},I=()=>{m({activityType:"",status:"",conditions:[],startDate:"",endDate:""}),p(1),N(1)},M=$=>{S===$?T(k==="asc"?"desc":"asc"):(C($),T("desc")),N(1)},D=$=>$.split("_").map(H=>H.charAt(0).toUpperCase()+H.slice(1)).join(" "),U=$=>{const H={success:{color:"bg-green-100 text-green-700",icon:""},failed:{color:"bg-red-100 text-red-700",icon:""},pending:{color:"bg-amber-100 text-amber-700",icon:""},skipped:{color:"bg-gray-100 text-gray-700",icon:""}},z=H[$]||H.pending;return e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${z.color}`,children:[z.icon," ",$.charAt(0).toUpperCase()+$.slice(1)]})},F=[{value:"last_7_days",label:"Last 7 days"},{value:"last_15_days",label:"Last 15 days"},{value:"last_30_days",label:"Last 30 days"},{value:"last_1_month",label:"Last 1 month"},{value:"last_3_months",label:"Last 3 months"},{value:"last_6_months",label:"Last 6 months"},{value:"last_1_year",label:"Last 1 year"},{value:"maximum",label:"Maximum"},{value:"custom",label:"Custom"}],W=$=>{const H=new Date;let z="",q="";switch($){case"last_7_days":z=new Date(H.getTime()-10080*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_15_days":z=new Date(H.getTime()-360*60*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_30_days":z=new Date(H.getTime()-720*60*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_1_month":z=new Date(H.getFullYear(),H.getMonth()-1,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_3_months":z=new Date(H.getFullYear(),H.getMonth()-3,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_6_months":z=new Date(H.getFullYear(),H.getMonth()-6,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_1_year":z=new Date(H.getFullYear()-1,H.getMonth(),H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"maximum":z="",q="";break}return{startDate:z,endDate:q}};return e.jsxs("div",{className:"space-y-6 mx-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Activity Log"}),e.jsx("p",{className:"text-subtle mt-1",children:"Monitor lead sync activities and webhook deliveries."})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6 shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-on-surface mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Advanced Filters"]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Activity Type"}),e.jsxs("select",{value:u.activityType,onChange:$=>E("activityType",$.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Types"}),n.activityTypes.map($=>e.jsx("option",{value:$,children:D($)},$))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Status"}),e.jsxs("select",{value:u.status,onChange:$=>E("status",$.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),n.statuses.map($=>e.jsx("option",{value:$,children:$.charAt(0).toUpperCase()+$.slice(1)},$))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface",children:"Advanced Filters"}),e.jsxs("button",{onClick:()=>{m($=>({...$,conditions:[...$.conditions,{field:"",condition:"contains",value:""}]}))},className:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-1 px-3 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Filter"]})]}),e.jsxs("div",{className:"space-y-3",children:[u.conditions.map(($,H)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/20 rounded-lg",children:[e.jsxs("select",{value:$.field,onChange:z=>{const q=[...u.conditions];q[H]={...q[H],field:z.target.value,condition:z.target.value==="createdAt"?"equals":"contains",value:z.target.value==="createdAt"?"last_7_days":""},m(Q=>({...Q,conditions:q}))},className:"px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-w-[140px]",children:[e.jsx("option",{value:"",children:"Select Field"}),e.jsx("option",{value:"createdAt",children:"Date"}),e.jsx("option",{value:"formId",children:"Form ID"}),e.jsx("option",{value:"formName",children:"Form Name"}),e.jsx("option",{value:"campaignId",children:"Campaign ID"}),e.jsx("option",{value:"campaignName",children:"Campaign Name"}),e.jsx("option",{value:"leadId",children:"Lead ID"})]}),e.jsx("select",{value:$.condition,onChange:z=>{const q=[...u.conditions];q[H]={...q[H],condition:z.target.value,value:""},m(Q=>({...Q,conditions:q}))},className:"px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-w-[100px]",children:$.field==="createdAt"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"equals",children:"Equals"}),e.jsx("option",{value:"is",children:"Is"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"contains",children:"Contains"}),e.jsx("option",{value:"equals",children:"Equals"}),e.jsx("option",{value:"starts_with",children:"Starts with"}),e.jsx("option",{value:"ends_with",children:"Ends with"})]})}),$.field==="createdAt"?e.jsxs("div",{className:"flex-1",children:[e.jsxs("select",{value:$.value,onChange:z=>{const q=[...u.conditions];q[H]={...q[H],value:z.target.value},m(Q=>({...Q,conditions:q}))},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select date range"}),F.map(z=>e.jsx("option",{value:z.value,children:z.label},z.value))]}),$.value==="custom"&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:`startDate-${H}`,className:"block text-xs font-medium text-on-surface mb-1",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:`startDate-${H}`,type:"date",value:u.startDate,onChange:z=>E("startDate",z.target.value),className:"w-full px-3 py-2 pr-10 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("button",{type:"button",onClick:()=>{const z=document.getElementById(`startDate-${H}`);z&&(z.showPicker?z.showPicker():z.focus())},className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer hover:text-primary-600 transition-colors",title:"Open calendar",children:e.jsx("svg",{className:"h-4 w-4 text-subtle hover:text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:`endDate-${H}`,className:"block text-xs font-medium text-on-surface mb-1",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:`endDate-${H}`,type:"date",value:u.endDate,onChange:z=>E("endDate",z.target.value),className:"w-full px-3 py-2 pr-10 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("button",{type:"button",onClick:()=>{const z=document.getElementById(`endDate-${H}`);z&&(z.showPicker?z.showPicker():z.focus())},className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer hover:text-primary-600 transition-colors",title:"Open calendar",children:e.jsx("svg",{className:"h-4 w-4 text-subtle hover:text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]})]}):e.jsx("input",{type:"text",value:$.value,onChange:z=>{const q=[...u.conditions];q[H]={...q[H],value:z.target.value},m(Q=>({...Q,conditions:q}))},placeholder:"Enter value...",className:"flex-1 px-3 py-2 border border-muted rounded-lg bg-background text-on-surface placeholder-subtle text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("button",{onClick:()=>{m(z=>({...z,conditions:z.conditions.filter((q,Q)=>Q!==H)}))},className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove Filter",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},H)),u.conditions.length===0&&e.jsx("div",{className:"text-center py-4 text-subtle bg-muted/10 rounded-lg",children:e.jsx("p",{children:'No filters added. Click "Add Filter" to create filter conditions.'})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:P,disabled:s,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-300 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Apply Filters"]}),e.jsxs("button",{onClick:I,className:"bg-muted hover:bg-muted/80 text-on-surface font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})]})]}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"text-subtle",children:["Showing ",e.jsx("span",{className:"font-medium text-on-surface",children:t.length})," of"," ",e.jsx("span",{className:"font-medium text-on-surface",children:v})," activities"]}),e.jsxs("span",{className:"text-subtle",children:["Page ",e.jsx("span",{className:"font-medium text-on-surface",children:f})," of"," ",e.jsx("span",{className:"font-medium text-on-surface",children:x})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:y,onChange:$=>{parseInt($.target.value)},className:"px-2 py-1 border border-muted rounded bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})})]})}),e.jsxs("div",{className:"bg-background rounded-lg border border-muted shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-muted/30 px-6 py-4 border-b border-muted",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-on-surface",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs("button",{onClick:()=>M("status"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Status",S==="status"&&e.jsx("svg",{className:`h-4 w-4 ${k==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("button",{onClick:()=>M("createdAt"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Timestamp",S==="createdAt"&&e.jsx("svg",{className:`h-4 w-4 ${k==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("button",{onClick:()=>M("activityType"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Activity Type",S==="activityType"&&e.jsx("svg",{className:`h-4 w-4 ${k==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),e.jsx("div",{className:"col-span-3",children:"Details"}),e.jsx("div",{className:"col-span-2",children:"Form/Campaign"}),e.jsx("div",{className:"col-span-1",children:"Actions"})]})}),s&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-on-surface",children:"Loading activities..."})]}),l&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 m-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-red-800 text-sm",children:l})]})}),e.jsx("div",{className:"divide-y divide-muted",children:t.length>0?t.map($=>e.jsx("div",{className:"px-6 py-4 hover:bg-muted/20 transition-colors",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center text-sm",children:[e.jsx("div",{className:"col-span-2",children:U($.status)}),e.jsx("div",{className:"col-span-2 text-on-surface",children:new Date($.createdAt).toLocaleString()}),e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"font-medium text-on-surface",children:D($.activityType)})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"text-on-surface",children:$.description}),$.leadData&&e.jsxs("div",{className:"text-xs text-subtle mt-1",children:[$.leadData.name&&`Name: ${$.leadData.name}`,$.leadData.email&&`  Email: ${$.leadData.email}`]}),$.errorMessage&&e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",$.errorMessage]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"text-on-surface",children:[$.formName&&`Form: ${$.formName}`,$.campaignName&&`Campaign: ${$.campaignName}`]}),e.jsxs("div",{className:"text-xs text-subtle",children:[$.formId&&`Form ID: ${$.formId}`,$.campaignId&&`  Campaign ID: ${$.campaignId}`]})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{console.log("View details for log:",$._id)},className:"p-1 text-subtle hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"View Details",children:e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),$.status==="failed"&&e.jsx("button",{onClick:()=>{console.log("Retry log:",$._id)},className:"p-1 text-subtle hover:text-green-500 hover:bg-green-50 rounded transition-colors",title:"Retry",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})},$._id)):!s&&e.jsxs("div",{className:"px-6 py-8 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-muted/50 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("h4",{className:"text-lg font-semibold text-on-surface mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-subtle mb-6",children:Object.values(u).some($=>$!=="")?"Try adjusting your filters to see more results.":"Activity logs will appear here once you start syncing leads or performing other Facebook integration activities."}),Object.values(u).some($=>$!=="")&&e.jsx("button",{onClick:I,className:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md",children:"Clear Filters"})]})}),x>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-muted bg-muted/30",children:[e.jsxs("div",{className:"text-sm text-subtle",children:["Showing page ",f," of ",x]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N(f-1),disabled:f<=1||s,className:"px-3 py-2 text-sm font-medium text-on-surface bg-background border border-muted rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x)},($,H)=>{const z=Math.max(1,Math.min(x-4,f-2))+H;return e.jsx("button",{onClick:()=>N(z),disabled:s,className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${z===f?"bg-primary-600 text-white":"text-on-surface bg-background border border-muted hover:bg-muted"}`,children:z},z)})}),e.jsx("button",{onClick:()=>N(f+1),disabled:f>=x||s,className:"px-3 py-2 text-sm font-medium text-on-surface bg-background border border-muted rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})},hP=t=>{const[r,n]=w.useState([]),[a,s]=w.useState(!0),[i,l]=w.useState(null),d=w.useCallback(async()=>{if(!t){n([]),s(!1);return}try{s(!0),l(null);const S=await Le.getCustomFields(t);n(S||[])}catch(S){console.error("Error fetching custom fields:",S),l(S instanceof Error?S.message:"Failed to fetch custom fields"),n([])}finally{s(!1)}},[t]);w.useEffect(()=>{d()},[d]);const u=async S=>{try{l(null);const C={...S,id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},k=await Le.createCustomField(C);n(T=>[...T,k])}catch(C){throw console.error("Error creating custom field:",C),l(C instanceof Error?C.message:"Failed to create custom field"),C}},m=async(S,C)=>{try{l(null);const k=await Le.updateCustomField(S,C);n(T=>T.map(N=>N._id===S?{...N,...k}:N))}catch(k){throw console.error("Error updating custom field:",k),l(k instanceof Error?k.message:"Failed to update custom field"),k}},f=async S=>{try{l(null),await Le.deleteCustomField(S),n(C=>C.filter(k=>k._id!==S))}catch(C){throw console.error("Error deleting custom field:",C),l(C instanceof Error?C.message:"Failed to delete custom field"),C}},p=async S=>{try{const C=r.find(k=>k._id===S);if(!C)return;await m(S,{isMappable:!C.isMappable})}catch(C){throw console.error("Error toggling mappable status:",C),C}},x=async()=>{await d()},g=async S=>{try{return l(null),await Le.getMappableCustomFields(t,S)||[]}catch(C){return console.error("Error fetching mappable fields:",C),l(C instanceof Error?C.message:"Failed to fetch mappable fields"),[]}},v=async()=>{try{return l(null),await Le.getLeadDisplayFields(t)||[]}catch(S){return console.error("Error fetching lead display fields:",S),l(S instanceof Error?S.message:"Failed to fetch lead display fields"),[]}},b=async(S,C,k)=>{try{l(null);const T=r.find(O=>O._id===S);if(!T)return;const N={...T.usage,[`in${C}`]:k};await m(S,{usage:N})}catch(T){throw console.error("Error updating field usage:",T),l(T instanceof Error?T.message:"Failed to update field usage"),T}},y=r.filter(S=>S.isMappable);return{fields:r,loading:a,error:i,createField:u,updateField:m,deleteField:f,toggleMappable:p,refreshFields:x,mappableFields:y,getMappableFields:g,getLeadDisplayFields:v,updateFieldUsage:b}},gY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const[i,l]=w.useState([]),d=An(),{mappableFields:u}=hP(a?.id||"org-1"),[m,f]=w.useState("account"),[p,x]=w.useState({isOpen:!1,type:"connect"}),[g,v]=w.useState(!1),[b,y]=w.useState(!1),[S,C]=w.useState(null),[k,T]=w.useState(!0),[N,O]=w.useState({name:"",accountId:"",pageId:"",formId:""}),[E,P]=w.useState([]),[I,M]=w.useState([]),[D,U]=w.useState([]),[F,W]=w.useState([]),[$,H]=w.useState([]),[z,q]=w.useState(!1),[Q,ee]=w.useState([]),[R,L]=w.useState(!1),[G,K]=w.useState(null),ie=(oe,fe)=>{q(oe),ee(fe)},[xe,pe]=w.useState({accountId:"",formId:"",pageId:"",since:"",until:""}),[be,me]=w.useState(null),[X,re]=w.useState(!1),[de,Be]=w.useState([]),Me=async()=>{console.log("Fetching Facebook accounts and pages..."),L(!0),K(null);try{const oe=await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!oe.ok)throw new Error("Failed to fetch accounts");const fe=await oe.json();if(console.log("Raw response from /api/fb/pages:",fe),fe.success){console.log("Successfully fetched Facebook pages:",fe.pages);const Re=[{id:"fb-main",name:fe.accountName||"Facebook Account",accessToken:"connected",pages:fe.pages.map(Ke=>({id:Ke.pageId,name:Ke.pageName,subscribed:Ke.subscribed||!1,forms:[]}))}];console.log("Formatted accounts for frontend:",Re),P(Re),console.log("Accounts state set successfully")}else throw console.error("Failed to fetch Facebook pages:",fe.message),new Error(fe.message||"Failed to fetch accounts")}catch(oe){console.error("Error fetching accounts:",oe),K(oe instanceof Error?oe.message:"Failed to fetch accounts")}finally{L(!1)}},Ee=async()=>{L(!0),K(null);try{const oe=await fetch(`${window.location.origin}/api/fb/mappings?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!oe.ok)throw new Error("Failed to fetch mappings");const fe=await oe.json();if(fe.success)M(fe.mappings);else throw new Error(fe.message||"Failed to fetch mappings")}catch(oe){K(oe instanceof Error?oe.message:"Failed to fetch mappings")}finally{L(!1)}},Xe=async oe=>{if(!oe){U([]);return}L(!0),K(null);try{console.log("Fetching forms for pageId:",oe);const fe=await fetch(`${window.location.origin}/api/fb/forms?pageId=${oe}&tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!fe.ok)throw new Error("Failed to fetch forms");const Re=await fe.json();if(console.log("Forms response:",Re),Re.success)U(Re.forms);else throw new Error(Re.message||"Failed to fetch forms")}catch(fe){console.error("Error fetching forms:",fe),K(fe instanceof Error?fe.message:"Failed to fetch forms")}finally{L(!1)}};w.useEffect(()=>{const oe=[{key:"name",label:"Full Name",type:"text",required:!0},{key:"email",label:"Email Address",type:"email",required:!0},{key:"phone",label:"Phone Number",type:"phone"},{key:"city",label:"City",type:"text"},{key:"source",label:"Lead Source",type:"text"},{key:"notes",label:"Notes",type:"textarea"},{key:"campaignName",label:"Campaign Name",type:"text"},{key:"adSetName",label:"Ad Set Name",type:"text"},{key:"adName",label:"Ad Name",type:"text"},{key:"formName",label:"Form Name",type:"text"},{key:"pageName",label:"Page Name",type:"text"},{key:"platform",label:"Platform",type:"text"},{key:"leadCreatedTime",label:"Lead Created Time",type:"datetime"}],fe=u.map(Re=>({key:Re._id||Re.id,label:Re.name,type:Re.type,required:Re.isRequired||!1,options:Re.options||[],isCustom:!0,variableType:Re.variableType}));Be([...oe,...fe]),console.log("Updated CRM fields with custom fields:",[...oe,...fe])},[u]);const ge=async()=>{try{const oe=await fetch(`${window.location.origin}/api/fb/custom-fields?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(oe.ok){const fe=await oe.json();fe.success&&console.log("Fetched additional CRM fields from API:",fe.fields)}}catch(oe){console.error("Error fetching CRM fields:",oe)}},De=async oe=>{if(!oe){W([]);return}L(!0),K(null);try{const fe=D.find(Re=>Re.formId===oe);if(fe&&fe.fields&&fe.fields.length>0){const Re=fe.fields.map(Ke=>({name:Ke.name,values:[`Sample ${Ke.label||Ke.name} value`]}));W(Re),console.log("Using real Facebook form fields:",Re)}else W([]),console.log("No form fields available for formId:",oe)}catch(fe){console.error("Error fetching form fields:",fe),K(fe instanceof Error?fe.message:"Failed to fetch form fields"),W([])}finally{L(!1)}},ae=t.find(oe=>oe.source==="Facebook"),ye=async()=>{try{const oe=await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(oe.ok){const fe=await oe.json();fe.success&&fe.pages&&fe.pages.length>0&&(console.log("Facebook integration found in backend, loading data..."),r(Re=>Re.map(Ke=>Ke.source==="Facebook"?{...Ke,isConnected:!0,connectedAccounts:[{id:"fb-main",name:fe.accountName||"Facebook Account",accessToken:"connected",pages:fe.pages.map(Mt=>({id:Mt.pageId,name:Mt.pageName,forms:[]}))}]}:Ke)),Me(),Ee())}}catch(oe){console.error("Error checking Facebook integration:",oe)}};w.useEffect(()=>{console.log("Facebook Integration Page mounted, current setting:",ae),ae?.isConnected?(console.log("Frontend setting shows connected, fetching data..."),Me(),Ee(),ge()):(console.log("Checking backend for existing integration..."),ye()),(async()=>{try{const fe=await fetch(`${window.location.origin}/api/users?organizationId=${a?.id||"org-1"}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(fe.ok){const Re=await fe.json();Re.success&&(console.log("Fetched users for variable fields:",Re.data),l(Re.data))}}catch(fe){console.error("Error fetching users:",fe)}})()},[]);const Oe=()=>x({isOpen:!1,type:"connect"}),Z=async(oe,fe)=>{Array.isArray(fe)?r(Re=>Re.map(Ke=>Ke.source===oe?{...Ke,isConnected:!0,connectedAccounts:fe}:Ke)):r(Re=>Re.map(Ke=>Ke.source===oe?{...Ke,...fe}:Ke)),fe&&typeof fe=="object"&&"isConnected"in fe&&fe.isConnected&&(console.log("Facebook OAuth completed successfully, refreshing data..."),await Me())},Pe=oe=>{window.confirm(`Are you sure you want to disconnect ${oe}? This will stop new leads from coming in.`)&&(r(fe=>fe.map(Re=>Re.source===oe?{...Re,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:Re)),P([]))},lt=oe=>{window.confirm("Are you sure you want to disconnect this account? This will stop new leads from coming in.")&&(P(fe=>fe.filter(Re=>Re.id!==oe)),r(fe=>fe.map(Re=>Re.source==="Facebook"?{...Re,connectedAccounts:Re.connectedAccounts?.filter(Ke=>Ke.id!==oe)}:Re)))},At=async(oe,fe,Re)=>{L(!0),K(null);try{const Ke=await fetch(`${window.location.origin}/api/fb/pages/${fe}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tenantId:"org-1"})});if(!Ke.ok)throw new Error("Failed to update subscription");const Mt=await Ke.json();if(Mt.success)P(Xt=>Xt.map(dt=>dt.id===oe?{...dt,pages:dt.pages.map(pt=>pt.id===fe?{...pt,subscribed:Re}:pt)}:dt));else throw new Error(Mt.message||"Failed to update subscription")}catch(Ke){K(Ke instanceof Error?Ke.message:"Subscription update failed")}finally{L(!1)}},ft=()=>{x({isOpen:!0,type:"connect"})},Fr=async oe=>{L(!0),K(null);try{const fe=`form_${Date.now()}`,Re=oe.pageId,Ke=await fetch(`${window.location.origin}/api/fb/forms/${fe}/map`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pageId:Re,tenantId:"org-1",fieldMapping:$})});if(!Ke.ok)throw new Error("Failed to save mapping");const Mt=await Ke.json();if(Mt.success){if(S)M(Xt=>Xt.map(dt=>dt.id===S.id?{...dt,name:oe.name,accountId:oe.accountId,pageId:oe.pageId,formId:oe.formId,accountName:E.find(pt=>pt.id===oe.accountId)?.name||"",pageName:E.find(pt=>pt.id===oe.accountId)?.pages.find(pt=>pt.id===oe.pageId)?.name||"",formName:D.find(pt=>pt.formId===oe.formId)?.formName||"",destination:oe.destination}:dt)),alert("Mapping updated successfully!");else{const Xt={id:`mapping-${Date.now()}`,name:oe.name,accountId:oe.accountId,pageId:oe.pageId,formId:oe.formId,accountName:E.find(dt=>dt.id===oe.accountId)?.name||"",pageName:E.find(dt=>dt.id===oe.accountId)?.pages.find(dt=>dt.id===oe.pageId)?.name||"",formName:D.find(dt=>dt.formId===oe.formId)?.formName||"",fieldMappings:$,lastLead:"Never",status:"active"};M(dt=>[...dt,Xt]),alert("Mapping created successfully!")}await Ee()}else throw new Error(Mt.message||"Failed to save mapping")}catch(fe){K(fe instanceof Error?fe.message:"Failed to save mapping")}finally{L(!1)}v(!1),C(null),O({name:"",accountId:"",pageId:"",formId:""})},ur=()=>{if(!N.name||!N.accountId||!N.pageId||!N.formId){alert("Please fill in all required fields");return}if(!z){alert(`Please map all mandatory fields first:
${Q.join(", ")}`);return}Fr(N)},Br=()=>{C(null),O({name:"",accountId:"",pageId:"",formId:""}),v(!0)},br=oe=>{const fe=I.find(Re=>Re.id===oe);fe&&(C(fe),O({name:fe.name,accountId:fe.accountId,pageId:fe.pageId,formId:fe.formId||""}),fe.pageId&&Xe(fe.pageId),v(!0))},Ye=async oe=>{if(window.confirm("Are you sure you want to delete this mapping?")){L(!0),K(null);try{const fe=I.find(Mt=>Mt.id===oe);if(!fe)return;const Re=await fetch(`${window.location.origin}/api/fb/forms/${fe.formId}/map`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tenantId:"org-1"})});if(!Re.ok)throw new Error("Failed to delete mapping");const Ke=await Re.json();if(Ke.success)M(Mt=>Mt.filter(Xt=>Xt.id!==oe)),alert("Mapping deleted successfully!"),await Ee();else throw new Error(Ke.message||"Failed to delete mapping")}catch(fe){K(fe instanceof Error?fe.message:"Failed to delete mapping")}finally{L(!1)}}},Or=()=>{pe({accountId:"",formId:"",pageId:"",since:"",until:""}),me(null),y(!0)},vr=async()=>{if(!xe.formId||!xe.pageId){alert("Please select a form and page");return}re(!0),me(null);try{const oe=await fetch(`${window.location.origin}/api/fb/sync/backfill`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({formId:xe.formId,pageId:xe.pageId,tenantId:"org-1",since:xe.since||void 0,until:xe.until||void 0})});if(!oe.ok)throw new Error("Failed to sync leads");const fe=await oe.json();if(fe.success){me(fe.results);const Re=fe.results.filter(dt=>dt.status==="saved").length,Ke=fe.results.filter(dt=>dt.status==="skipped").length,Mt=fe.results.filter(dt=>dt.status==="error").length;let Xt=` Sync completed! ${Re} leads imported successfully.`;Ke>0&&(Xt+=` ${Ke} duplicates skipped.`),Mt>0&&(Xt+=` ${Mt} errors occurred.`),alert(Xt)}else throw new Error(fe.message||"Failed to sync leads")}catch(oe){const fe=oe instanceof Error?oe.message:"Sync failed";K(fe),fe.includes("No leads found")?console.log("No leads found - error will be displayed in UI"):fe.includes("access token")||fe.includes("token")?alert("Facebook access token expired or invalid. Please reconnect your Facebook account."):fe.includes("network")||fe.includes("timeout")?alert("Network error. Please check your internet connection and try again."):fe.includes("facebookService.fetchLeadsFromFacebook is not a function")?alert("System error: Facebook service method not found. Please contact support."):alert(`Sync failed: ${fe}`)}finally{re(!1)}};return e.jsxs("div",{className:"space-y-8 h-full flex flex-col min-h-0 bg-surface px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-surface border-b border-muted",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>d("/settings/integrations"),className:"p-2 hover:bg-muted text-subtle hover:text-on-surface rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Facebook Integration"}),e.jsx("p",{className:"text-subtle mt-1",children:"Connect your Facebook Lead Forms to automatically capture leads"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${ae?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:ae?.isConnected?"Connected":"Not Connected"})})]}),e.jsx("div",{className:"border-b border-muted bg-surface",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>f("account"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="account"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Account Management"}),e.jsx("button",{onClick:()=>f("mapping"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="mapping"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Field Mapping"}),e.jsx("button",{onClick:()=>f("activity-log"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="activity-log"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Activity Log"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-2",children:[m==="account"&&e.jsxs("div",{className:"space-y-6 mx-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Connected Accounts"}),e.jsx("p",{className:"text-subtle mt-1",children:"Manage your connected Facebook accounts and pages."})]}),e.jsxs("button",{onClick:ft,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Add Account"]})]}),R&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-on-surface",children:"Loading..."})]}),G&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-red-800 text-sm",children:G})]})}),e.jsx("div",{className:"space-y-6",children:E.length>0?E.map(oe=>e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-background rounded-full"})]}),e.jsx("h4",{className:"font-semibold text-on-surface",children:oe.name})]}),e.jsx("button",{onClick:()=>lt(oe.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded-lg text-sm transition-colors",children:"Disconnect"})]}),e.jsxs("div",{className:"space-y-4 ml-11",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h5",{className:"font-medium text-on-surface",children:["Connected Pages (",oe.pages?.length||0,")"]}),e.jsxs("button",{onClick:()=>T(!k),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1 transition-colors",children:[k?"Collapse":"Expand",e.jsx("svg",{className:`h-4 w-4 transition-transform ${k?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),k&&e.jsx(e.Fragment,{children:oe.pages&&oe.pages.length>0?oe.pages.map(fe=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-muted/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-on-surface",children:fe.name}),e.jsxs("div",{className:"text-sm text-subtle",children:["Page ID: ",fe.id]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${fe.subscribed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:fe.subscribed?"Subscribed":"Not Subscribed"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe.subscribed||!1,onChange:Re=>At(oe.id,fe.id,Re.target.checked),disabled:R,className:"sr-only peer"}),e.jsx("div",{className:`w-10 h-5 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-4 after:w-4 ${fe.subscribed?"bg-primary-600":"bg-muted"}`})]})]})]},fe.id)):e.jsx("div",{className:"text-center py-4 text-subtle",children:e.jsx("p",{children:"No Facebook pages found for this account."})})})]})]},oe.id)):e.jsxs("div",{className:"text-center py-8 text-subtle bg-muted/20 rounded-lg",children:[e.jsx("svg",{className:"h-12 w-12 mx-auto mb-4 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("p",{children:"No Facebook accounts connected."}),e.jsx("p",{className:"text-sm mt-1",children:'Use the "Add Account" button above to connect an account.'})]})})]}),m==="mapping"&&e.jsxs("div",{className:"space-y-6 mx-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Field Mappings"}),e.jsx("p",{className:"text-subtle mt-1",children:"Map your Facebook Lead Form fields to your CRM."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:Or,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Leads"]}),e.jsxs("button",{className:"bg-teal-500 hover:bg-teal-600 disabled:bg-teal-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Test Lead"]}),e.jsxs("button",{onClick:Br,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Mapping"]})]})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-muted shadow-sm overflow-hidden mx-4",children:[e.jsx("div",{className:"bg-muted/30 px-6 py-4 border-b border-muted",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-on-surface",children:[e.jsx("div",{className:"col-span-1"}),e.jsx("div",{className:"col-span-3",children:"MAPPING NAME"}),e.jsx("div",{className:"col-span-4",children:"SOURCE FORM"}),e.jsx("div",{className:"col-span-2",children:"STATUS"}),e.jsx("div",{className:"col-span-2",children:"LAST LEAD"})]})}),e.jsx("div",{className:"divide-y divide-muted",children:I.length>0?I.map(oe=>e.jsx("div",{className:"px-6 py-4 hover:bg-muted/20 transition-colors",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center text-sm",children:[e.jsx("div",{className:"col-span-1 flex justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${oe.status==="active"?"bg-green-500":"bg-red-500"}`})}),e.jsx("div",{className:"col-span-3",children:e.jsx("div",{className:"font-medium text-on-surface",children:oe.name})}),e.jsxs("div",{className:"col-span-4",children:[e.jsxs("div",{className:"text-on-surface",children:[oe.pageName," Form"]}),e.jsxs("div",{className:"text-xs text-subtle mt-1",children:[oe.accountName,", ",oe.pageName]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${oe.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:oe.status==="active"?"Active":"Inactive"})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-on-surface",children:oe.lastLead==="Never"?"Never":oe.lastLead.split(",")[0]}),e.jsx("div",{className:"text-xs text-subtle",children:oe.lastLead==="Never"?"":oe.lastLead.split(",")[1]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("button",{onClick:()=>br(oe.id),className:"p-1 text-subtle hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Edit Mapping",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>Ye(oe.id),className:"p-1 text-subtle hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Delete Mapping",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})]})},oe.id)):e.jsxs("div",{className:"px-6 py-8 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-muted/50 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("h4",{className:"text-lg font-semibold text-on-surface mb-2",children:"No mappings yet"}),e.jsx("p",{className:"text-subtle mb-6",children:"Create your first field mapping to start syncing Facebook leads to your CRM."}),e.jsx("button",{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md",children:"Create Your First Mapping"})]})})]})]}),m==="activity-log"&&e.jsx(xY,{})]}),p.isOpen&&p.type==="connect"&&ae&&e.jsx(pY,{setting:ae,onClose:Oe,onSave:oe=>Z("Facebook",oe),onDisconnect:()=>Pe("Facebook"),onSendTestLead:oe=>s("Facebook",oe)}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-background rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center p-8 border-b border-muted flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-on-surface",children:S?"Edit Mapping":"Create New Mapping"}),e.jsx("button",{onClick:()=>{v(!1),C(null),O({name:"",accountId:"",pageId:"",formId:""})},className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-8 overflow-y-auto flex-grow",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Mapping Name"}),e.jsx("input",{type:"text",placeholder:"Enter mapping name",value:N.name,onChange:oe=>O(fe=>({...fe,name:oe.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Account"}),e.jsxs("select",{value:N.accountId,onChange:oe=>O(fe=>({...fe,accountId:oe.target.value,pageId:""})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Account"}),E.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Page"}),e.jsxs("select",{value:N.pageId,onChange:oe=>{const fe=oe.target.value;O(Re=>({...Re,pageId:fe,formId:""})),fe?Xe(fe):U([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Page"}),E.find(oe=>oe.id===N.accountId)?.pages.filter(oe=>oe.subscribed).map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))||[]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Form"}),e.jsxs("select",{value:N.formId||"",onChange:oe=>{const fe=oe.target.value;O(Re=>({...Re,formId:fe})),fe?De(fe):W([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Form"}),D.map(oe=>e.jsx("option",{value:oe.formId,children:oe.formName},oe.formId))]})]})]}),N.formId&&F.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface mb-4",children:"Field Mapping"}),e.jsx(hY,{facebookFields:F,crmFields:de,initialMappings:$,onMappingsChange:H,onValidationChange:ie,salesPipelineStages:["New Lead","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],users:i})]}),N.formId&&F.length===0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-amber-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-amber-800 text-sm",children:"No form fields found for the selected form. The form might not have any questions configured."})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Deduplication Strategy"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{children:"None"}),e.jsx("option",{children:"Email Match"}),e.jsx("option",{children:"Phone Match"}),e.jsx("option",{children:"Email + Phone Match"}),e.jsx("option",{children:"Skip Duplicate"})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-8 border-t border-muted bg-muted/30",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-subtle hover:text-on-surface font-medium rounded-lg hover:bg-muted transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ur,disabled:!z,className:`font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md ${z?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:S?"Update Mapping":"Save Mapping"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-background rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-muted flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-on-surface",children:"Sync Facebook Leads"}),e.jsx("button",{onClick:()=>y(!1),className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Historical Leads"]}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Import leads from your Facebook Lead Forms that were created before setting up the webhook integration."}),e.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"How it works:"}),e.jsx("br",{}),"1. Select a Facebook form with existing leads",e.jsx("br",{}),"2. Choose date range (optional)",e.jsx("br",{}),'3. Click "Start Sync" to import leads',e.jsx("br",{}),"4. View detailed results below"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Account"}),e.jsxs("select",{value:xe.accountId||"",onChange:oe=>pe(fe=>({...fe,accountId:oe.target.value,pageId:"",formId:""})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Account"}),E.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Page"}),e.jsxs("select",{value:xe.pageId,onChange:oe=>{const fe=oe.target.value;pe(Re=>({...Re,pageId:fe,formId:""})),fe?Xe(fe):U([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Page"}),E.find(oe=>oe.id===xe.accountId)?.pages.filter(oe=>oe.subscribed).map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))||[]]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Form"}),e.jsxs("select",{value:xe.formId,onChange:oe=>pe(fe=>({...fe,formId:oe.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select Form"}),D.map(oe=>e.jsx("option",{value:oe.formId,children:oe.formName},oe.formId))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"From Date (optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:xe.since,onChange:oe=>pe(fe=>({...fe,since:oe.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"To Date (optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:xe.until,onChange:oe=>pe(fe=>({...fe,until:oe.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]}),be&&e.jsxs("div",{className:`border rounded-lg p-4 ${be.length===0?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"}`,children:[e.jsxs("h4",{className:`font-semibold mb-3 flex items-center gap-2 ${be.length===0?"text-blue-900":"text-green-900"}`,children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:be.length===0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),be.length===0?"No Leads Found":"Sync Results"]}),be.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("div",{className:"text-blue-700 mb-2",children:[e.jsx("strong",{children:"0 leads found"})," for the selected form and date range."]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Try adjusting your date range or check if the form has received any leads."})]}):e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:be.length}),e.jsx("div",{className:"text-green-800",children:"Total Processed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:be.filter(oe=>oe.status==="saved").length}),e.jsx("div",{className:"text-green-800",children:"Successfully Synced"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:be.filter(oe=>oe.status==="skipped").length}),e.jsx("div",{className:"text-amber-800",children:"Skipped (Duplicates)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:be.filter(oe=>oe.status==="error").length}),e.jsx("div",{className:"text-red-800",children:"Errors"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-green-900 mb-2",children:"Detailed Results:"}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:be.map((oe,fe)=>e.jsxs("div",{className:`text-xs p-2 rounded flex items-center justify-between ${oe.status==="saved"?"bg-green-100 text-green-800":oe.status==="skipped"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:[e.jsxs("span",{children:["Lead ID: ",oe.leadId]}),e.jsx("span",{className:"font-medium",children:oe.status==="saved"?" Saved":oe.status==="skipped"?" Skipped":` ${oe.error||"Error"}`})]},fe))})]})]})]}),G&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?"System Configuration Error":G.includes("No leads found")?"No Leads Found":"Sync Failed"}),e.jsx("p",{className:"text-sm text-red-700 mb-4 leading-relaxed",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?"There is a system configuration issue preventing the sync. Please contact support or try again later.":G}),e.jsxs("div",{className:"bg-red-100 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Troubleshooting Steps:"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-2",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"This is a system error. Please contact support for assistance."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Try refreshing the page and attempting the sync again."})]})]}):G.includes("No leads found")?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Check if the selected form has received any leads in the specified date range"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Try expanding the date range or removing date filters"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Verify the form is active and still collecting leads"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Check if your Facebook access token is still valid and hasn't expired"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Ensure the selected form has leads in the specified date range"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Verify your Facebook page has the necessary permissions (leads_retrieval)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Try reconnecting your Facebook account in the integration settings"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),e.jsx("span",{children:"Check your internet connection and Facebook API status"})]})]})})]}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),e.jsx("button",{onClick:()=>K(null),className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors duration-200",children:"Dismiss"})]})]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-muted bg-muted/30",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-subtle hover:text-on-surface font-medium rounded-lg hover:bg-muted transition-colors",children:"Close"}),e.jsx("button",{onClick:vr,disabled:X||!xe.formId||!xe.pageId,className:`font-bold py-2 px-6 rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-2 ${X||!xe.formId||!xe.pageId?"bg-purple-300 text-purple-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white hover:scale-105"}`,children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Syncing Leads..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Start Sync"})]})})]})]})})]})},bY=({isOpen:t,onClose:r,accounts:n,onConnectAccount:a,onDisconnectAccount:s,onToggleAccount:i})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Google Ads Accounts"}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Connect New Account"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Add another Google Ads account to your integration"})]}),e.jsxs("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Connect Account"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-slate-800",children:["Connected Accounts (",n.length,")"]}),n.length>0?n.map(l=>e.jsx("div",{className:"border border-slate-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:l.isActive!==!1,onChange:()=>i(l.id),className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-slate-800",children:l.name||`Account ${l.id}`}),e.jsxs("p",{className:"text-sm text-slate-600",children:["ID: ",l.id]}),l.managerName&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Manager: ",l.managerName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l.isActive!==!1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:l.isActive!==!1?"Active":"Inactive"}),e.jsx("button",{onClick:()=>s(l.id),className:"text-red-600 hover:text-red-800 p-1",title:"Disconnect Account",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},l.id)):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx("svg",{className:"h-12 w-12 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("p",{children:"No Google Ads accounts connected yet"}),e.jsx("p",{className:"text-sm",children:'Click "Connect Account" to get started'})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:r,className:"bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Close"})})]})}):null,vY=({isOpen:t,onClose:r,onSave:n,onConnectAccount:a,initialConfig:s})=>{const[i,l]=w.useState({clientId:"",clientSecret:"",redirectUri:`${window.location.origin}/api/oauth/google-ads/callback`,...s}),[d,u]=w.useState(!1),[m,f]=w.useState(null),[p,x]=w.useState("setup"),g=()=>{n(i),x("connect")},v=()=>{a(i)},b=async()=>{u(!0),f(null);try{const y={name:"Google Ads Integration",clientId:i.clientId,clientSecret:i.clientSecret,redirectUri:i.redirectUri},S=await Le.createGoogleAdsIntegration(y);S&&S._id?f({success:!0,message:"Configuration is valid! Integration created successfully."}):f({success:!1,message:"Configuration test failed - invalid response from server"})}catch(y){console.error("Configuration test error:",y),f({success:!1,message:y.message||"Failed to test configuration. Please check your credentials."})}finally{u(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Google Ads Integration Setup"}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex mb-6 border-b border-slate-200",children:[e.jsx("button",{onClick:()=>x("setup"),className:`pb-2 px-4 font-medium text-sm border-b-2 ${p==="setup"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"1. API Setup"}),e.jsx("button",{onClick:()=>x("connect"),disabled:!i.clientId||!i.clientSecret,className:`pb-2 px-4 font-medium text-sm border-b-2 ${p==="connect"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"} ${!i.clientId||!i.clientSecret?"opacity-50 cursor-not-allowed":""}`,children:"2. Connect Account"})]}),p==="setup"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Setup Instructions"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["1. Go to ",e.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google Cloud Console"})]}),e.jsx("p",{children:"2. Create a new project or select existing one"}),e.jsx("p",{children:"3. Enable Google Ads API"}),e.jsx("p",{children:"4. Create OAuth 2.0 credentials"}),e.jsx("p",{children:"5. Add your domain to authorized origins"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Client ID *"}),e.jsx("input",{type:"text",value:i.clientId,onChange:y=>l({...i,clientId:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Google Ads Client ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Client Secret *"}),e.jsx("input",{type:"password",value:i.clientSecret,onChange:y=>l({...i,clientSecret:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Google Ads Client Secret"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Redirect URI"}),e.jsx("input",{type:"text",value:i.redirectUri,onChange:y=>l({...i,redirectUri:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50",readOnly:!0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This is automatically set to your current domain + /auth/google/callback"})]}),m&&e.jsx("div",{className:`p-3 rounded-lg ${m.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`text-sm ${m.success?"text-green-700":"text-red-700"}`,children:m.message})})]}),p==="connect"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Ready to Connect!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your API configuration is saved. Now you can connect your Google Ads accounts."})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:[e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Connect Google Ads Account"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This will redirect you to Google OAuth to authorize access"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[p==="setup"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,disabled:d||!i.clientId||!i.clientSecret,className:"flex-1 bg-slate-600 hover:bg-slate-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg text-sm",children:d?"Testing...":"Test Configuration"}),e.jsx("button",{onClick:g,disabled:!i.clientId||!i.clientSecret,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Save & Continue"})]}),p==="connect"&&e.jsx("button",{onClick:()=>x("setup"),className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Back to Setup"})]})]})}):null},yY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=w.useState(!1),[u,m]=w.useState(!1),[f,p]=w.useState([]),[x,g]=w.useState([]),[v,b]=w.useState(null),[y,S]=w.useState([]),[C,k]=w.useState(null),[T,N]=w.useState(null),[O,E]=w.useState(null),[P,I]=w.useState(!1),[M,D]=w.useState(!1),[U,F]=w.useState(()=>{const ge=localStorage.getItem("googleAdsConfig");if(ge)try{return JSON.parse(ge)}catch(De){console.error("Failed to parse saved Google Ads config:",De)}return{clientId:"your-google-ads-client-id.googleusercontent.com",clientSecret:"your-google-ads-client-secret",redirectUri:"https://crm.clienn.com/api/oauth/google-ads/callback"}}),[W,$]=w.useState({}),[H,z]=w.useState({}),q=t.find(ge=>ge.source==="Google Ads");w.useEffect(()=>{q?.isConnected&&Q()},[q]);const Q=async()=>{if(q){m(!0),N(null);try{const De=(await Le.getGoogleAdsIntegrations()).find(ae=>ae.source==="Google Ads");if(De&&(b(De),De.isConnected&&De.connectedAccounts.length>0)){const ae=De.connectedAccounts;S(ae);const ye=[],Oe={totalConversions:0,conversionRate:0,costPerConversion:0,totalCost:0};for(const Z of ae)if(Z.isActive!==!1)try{const Pe=await Le.getGoogleAdsCampaigns(De._id,Z.id);if(Pe){const At=Pe.map(ft=>({...ft,accountId:Z.id,accountName:Z.name||`Account ${Z.id}`}));ye.push(...At)}const lt=await Le.getGoogleAdsConversionData(De._id,Z.id);lt&&(Oe.totalConversions+=lt.totalConversions||0,Oe.totalCost+=lt.totalCost||0)}catch(Pe){console.warn(`Failed to load data for account ${Z.id}:`,Pe)}p(ye),Oe.totalConversions>0&&Oe.totalCost>0&&(Oe.conversionRate=Oe.totalConversions/ye.length*100,Oe.costPerConversion=Oe.totalCost/Oe.totalConversions),k(Oe)}}catch(ge){console.error("Failed to load Google Ads data:",ge),N(ge.message||"Failed to load Google Ads data. Please try again.")}finally{m(!1)}}},ee=ge=>{E(ge),setTimeout(()=>E(null),5e3)},R=ge=>{N(ge),setTimeout(()=>N(null),5e3)},L=()=>{I(!0)},G=()=>{I(!1)},K=()=>{D(!0)},ie=()=>{D(!1)},xe=async()=>{D(!1),I(!0)},pe=async ge=>{if(window.confirm("Are you sure you want to disconnect this Google Ads account?"))try{await Le.updateGoogleAdsIntegration(v._id,{disconnectAccountId:ge}),S(De=>De.filter(ae=>ae.id!==ge)),await Q(),ee("Account disconnected successfully!")}catch(De){console.error("Failed to disconnect account:",De),R(De.message||"Failed to disconnect account. Please try again.")}},be=async ge=>{try{const ae=!y.find(ye=>ye.id===ge).isActive;await Le.updateGoogleAdsIntegration(v._id,{toggleAccountId:ge,isActive:ae}),S(ye=>ye.map(Oe=>Oe.id===ge?{...Oe,isActive:ae}:Oe)),ee(`Account ${ae?"activated":"deactivated"} successfully!`)}catch(De){console.error("Failed to toggle account:",De),R(De.message||"Failed to update account status. Please try again.")}},me=async ge=>{F(ge),localStorage.setItem("googleAdsConfig",JSON.stringify(ge)),ee("Google Ads configuration saved successfully!")},X=async ge=>{if(!ge.clientId||!ge.clientSecret){R("Please configure your Google Ads API credentials first");return}d(!0);try{let ae=(await Le.getGoogleAdsIntegrations()).find(ye=>ye.source==="Google Ads");if(ae)ee("Google Ads integration already exists. Redirecting to OAuth...");else{const ye={name:"Google Ads Integration",clientId:ge.clientId,clientSecret:ge.clientSecret,redirectUri:ge.redirectUri};ae=await Le.createGoogleAdsIntegration(ye)}try{const ye=await Le.requestWithRetry(`/oauth/google-ads/${ae._id}/initiate`);if(ye.success&&ye.authUrl)window.location.href=ye.authUrl;else throw new Error("Failed to generate OAuth URL")}catch(ye){console.error("OAuth initiation failed:",ye);const Oe=`https://accounts.google.com/oauth/authorize?client_id=${ge.clientId}&redirect_uri=${encodeURIComponent(`${window.location.origin}/api/oauth/google-ads/callback`)}&scope=https://www.googleapis.com/auth/adwords&response_type=code&access_type=offline&prompt=consent&state=${ae._id}`;window.location.href=Oe}}catch(De){console.error("Failed to connect Google Ads:",De),De.message?.includes("already exists")?R("Google Ads integration already exists for this organization. Please disconnect first if you want to reconnect."):R(De.message||"Failed to connect Google Ads. Please try again.")}finally{d(!1)}},re=async()=>{if(!U.clientId||!U.clientSecret){R("Please configure your Google Ads API credentials first");return}d(!0);try{let De=(await Le.getGoogleAdsIntegrations()).find(ae=>ae.source==="Google Ads");if(De)ee("Google Ads integration already exists. Redirecting to OAuth...");else{const ae={name:"Google Ads Integration",clientId:U.clientId,clientSecret:U.clientSecret,redirectUri:U.redirectUri};De=await Le.createGoogleAdsIntegration(ae)}try{const ae=await Le.requestWithRetry(`/oauth/google-ads/${De._id}/initiate`);if(ae.success&&ae.authUrl)window.location.href=ae.authUrl;else throw new Error("Failed to generate OAuth URL")}catch(ae){console.error("OAuth initiation failed:",ae);const ye=`https://accounts.google.com/oauth/authorize?client_id=${U.clientId}&redirect_uri=${encodeURIComponent(`${window.location.origin}/api/oauth/google-ads/callback`)}&scope=https://www.googleapis.com/auth/adwords&response_type=code&access_type=offline&prompt=consent&state=${De._id}`;window.location.href=ye}}catch(ge){console.error("Failed to connect Google Ads:",ge),ge.message?.includes("already exists")?R("Google Ads integration already exists for this organization. Please disconnect first if you want to reconnect."):R(ge.message||"Failed to connect Google Ads. Please try again.")}finally{d(!1)}},de=ge=>{window.confirm(`Are you sure you want to disconnect ${ge}? This will stop new leads from coming in.`)&&r(De=>De.map(ae=>ae.source===ge?{...ae,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:ae))},Be=ge=>{g(De=>De.includes(ge)?De.filter(ae=>ae!==ge):[...De,ge])},Me=async()=>{if(v)try{await Le.updateGoogleAdsIntegration(v._id,{selectedCampaigns:x,updatedAt:new Date}),await Q(),ee(`Campaigns saved successfully! ${x.length} campaigns selected.`)}catch(ge){console.error("Failed to save campaigns:",ge),R(ge.message||"Failed to save campaigns. Please try again.")}},Ee=async()=>{await Q()},Xe=async()=>{if(v)try{m(!0);const ge=await Le.testGoogleAdsIntegration(v._id);ge&&ge.connected?(ee("Google Ads connection test successful! All accounts are working properly."),await Q()):R("Google Ads connection test failed. Please check your credentials and account permissions.")}catch(ge){console.error("Failed to test connection:",ge),R(ge.message||"Failed to test connection. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Google Ads Integration"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Connect your Google Ads campaigns to capture leads and track conversions"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${q?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:q?.isConnected?"Connected":"Not Connected"})})]}),O&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"text-green-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success"}),e.jsx("p",{className:"text-sm text-green-700",children:O})]}),e.jsx("button",{onClick:()=>E(null),className:"text-green-600 hover:text-green-800",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),T&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"text-red-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700",children:T})]}),e.jsx("button",{onClick:()=>N(null),className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),q?.isConnected?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Campaign Selection"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Select which campaigns you want to track for lead generation"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Me,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Save Selection"}),e.jsx("button",{onClick:Ee,disabled:u,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Refreshing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]})]}),e.jsx("div",{className:"space-y-3",children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading campaigns..."})]}):f.length>0?f.map(ge=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:x.includes(ge.id),onChange:()=>Be(ge.id),className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-slate-800",children:ge.name}),ge.accountName&&e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:ge.accountName})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Status: ",ge.status,"  Impressions: ",ge.impressions?.toLocaleString()||0,"  Clicks: ",ge.clicks?.toLocaleString()||0,"  Conversions: ",ge.conversions||0]}),ge.budget&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Budget: ",ge.budget.toFixed(2),ge.cost&&`  Cost: ${ge.cost.toFixed(2)}`]})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ge.status==="ENABLED"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:ge.status})]},`${ge.accountId}-${ge.id}`)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-600",children:"No campaigns found. Connect your Google Ads account to load campaigns."})})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Conversion Tracking"}),u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading conversion data..."})]}):C?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:Math.round(C.totalConversions||0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Conversions"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[C.conversionRate?C.conversionRate.toFixed(1):"0.0","%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Conversion Rate"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:["",C.costPerConversion?C.costPerConversion.toFixed(2):"0.00"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Cost per Conversion"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:["",C.totalCost?C.totalCost.toFixed(2):"0.00"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Cost"})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-600",children:"No conversion data available. Connect your Google Ads account and select campaigns to track conversions."})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Account Management"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your connected Google Ads accounts"})]}),e.jsxs("button",{onClick:K,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Manage Accounts (",y.length,")"]})]}),y.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[y.slice(0,3).map(ge=>e.jsx("div",{className:"p-3 border border-slate-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-slate-800 text-sm",children:ge.name||`Account ${ge.id}`}),e.jsxs("p",{className:"text-xs text-slate-600",children:["ID: ",ge.id]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ge.isActive!==!1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:ge.isActive!==!1?"Active":"Inactive"})]})},ge.id)),y.length>3&&e.jsx("div",{className:"p-3 border border-slate-200 rounded-lg flex items-center justify-center",children:e.jsxs("p",{className:"text-sm text-slate-600",children:["+",y.length-3," more accounts"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:Ee,disabled:u,className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:bg-slate-50 disabled:cursor-not-allowed transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Campaigns"]}),e.jsx("div",{className:"text-xs text-slate-600",children:"Refresh campaign data"})]}),e.jsxs("button",{onClick:Xe,disabled:u||!q?.isConnected,className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:bg-slate-50 disabled:cursor-not-allowed transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Connection"]}),e.jsx("div",{className:"text-xs text-slate-600",children:"Verify API connection"})]}),e.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Reports"]}),e.jsx("div",{className:"text-xs text-slate-600",children:"Analytics dashboard"})]}),e.jsxs("button",{onClick:()=>de("Google Ads"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-red-800 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Disconnect"]}),e.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]})]}):e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-orange-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect Google Ads"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your Google Ads account to automatically capture leads from your campaigns and track conversion data."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs("button",{onClick:L,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2",children:[e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Setup API"]}),e.jsx("button",{onClick:re,disabled:l||!U.clientId||!U.clientSecret,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Connect Google Ads Account"]})})]})]})}),e.jsx(vY,{isOpen:P,onClose:G,onSave:me,onConnectAccount:X,initialConfig:U}),e.jsx(bY,{isOpen:M,onClose:ie,accounts:y,onConnectAccount:xe,onDisconnectAccount:pe,onToggleAccount:be})]})},jY=({isOpen:t,onClose:r,onSubmit:n,isLoading:a=!1})=>{const[s,i]=w.useState(""),[l,d]=w.useState(""),u=f=>{f.preventDefault(),s.trim()&&l.trim()&&n(s.trim(),l.trim())},m=()=>{i(""),d(""),r()};return t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:m})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:"Add New Form"}),e.jsx("button",{type:"button",onClick:m,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"formName",className:"block text-sm font-medium text-on-surface mb-2",children:"Form Name"}),e.jsx("input",{type:"text",id:"formName",value:s,onChange:f=>i(f.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"e.g., Contact Form, Newsletter Signup",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"formUrl",className:"block text-sm font-medium text-on-surface mb-2",children:"Form URL"}),e.jsx("input",{type:"url",id:"formUrl",value:l,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com/contact-form",required:!0})]})]})]}),e.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[e.jsx("button",{type:"button",onClick:m,disabled:a,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||!s.trim()||!l.trim(),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:a?"Adding...":"Add Form"})]})]})})]})}):null},wY=({isOpen:t,onClose:r,onConfirm:n,title:a,message:s,confirmText:i="Confirm",cancelText:l="Cancel",isLoading:d=!1,type:u="danger"})=>{if(!t)return null;const m={danger:{button:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white",icon:"text-red-600 dark:text-red-400"},warning:{button:"bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white",icon:"text-amber-600 dark:text-amber-400"},info:{button:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white",icon:"text-primary-600 dark:text-primary-400"}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:[e.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:a}),e.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`flex-shrink-0 ${m[u].icon}`,children:e.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u==="danger"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}),u==="warning"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}),u==="info"&&e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-on-surface",children:s})})]})]}),e.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[e.jsx("button",{type:"button",onClick:r,disabled:d,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors disabled:opacity-50",children:l}),e.jsx("button",{type:"button",onClick:n,disabled:d,className:`w-full sm:w-auto px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:cursor-not-allowed ${m[u].button}`,children:d?"Processing...":i})]})]})]})})},NY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),{addToast:l}=ed(),[d,u]=w.useState(!1),[m,f]=w.useState(!1),[p,x]=w.useState(""),[g,v]=w.useState([]),[b,y]=w.useState(null),[S,C]=w.useState(null),[k,T]=w.useState([]),[N,O]=w.useState(null),[E,P]=w.useState(null),[I,M]=w.useState(!1),[D,U]=w.useState(!1),[F,W]=w.useState(!1),[$,H]=w.useState(""),z=t.find(X=>X.source==="Website");w.useEffect(()=>{z?.isConnected&&q()},[z]);const q=async()=>{if(z){f(!0),O(null);try{console.log("Loading website data for organization:",a?.id);const X=await Le.getWebsiteIntegrations();console.log("Found integrations:",X.length,X.map(de=>({id:de._id,source:de.source})));const re=X.find(de=>de.source==="Website");if(re){console.log("Found website integration:",re._id),y(re),re.additionalSettings?.trackingScript&&x(re.additionalSettings.trackingScript),re.connectedWebsites&&T(re.connectedWebsites);try{const de=await Le.getWebsiteAnalytics(re._id);C(de)}catch(de){console.warn("Failed to load analytics:",de)}try{const de=await Le.getWebsiteFormPerformance(re._id);de&&de.length>0?v(de):re.additionalSettings?.trackedForms?v(re.additionalSettings.trackedForms):v([])}catch(de){console.warn("Failed to load forms:",de),re.additionalSettings?.trackedForms&&v(re.additionalSettings.trackedForms)}}else console.log("No website integration found")}catch(X){console.error("Failed to load website data:",X),O(X.message||"Failed to load website data. Please try again.")}finally{f(!1)}}},Q=X=>{P(X),setTimeout(()=>P(null),5e3)},ee=X=>{O(X),setTimeout(()=>O(null),5e3)},R=async()=>{u(!0);try{if(console.log("Starting tracking code generation..."),console.log("Current organization:",a?.id),console.log("Current integration:",b?._id),!a?.id)throw new Error("Organization ID is required");let X;b?(X=b,console.log("Using existing integration:",X._id)):(console.log("Creating new website integration..."),X=await Le.createWebsiteIntegration({name:"Website Integration",domains:k,apiEndpoint:`${window.location.origin}/api`}),console.log("Created integration:",X?._id),y(X)),console.log("Generating tracking code for integration:",X._id);const re=await Le.generateWebsiteTrackingCode(X._id,{domains:k,apiEndpoint:`${window.location.origin}/api`});if(console.log("Tracking code generation result:",re),console.log("Result keys:",Object.keys(re||{})),console.log("Has trackingScript:",!!(re&&re.trackingScript)),console.log("Tracking script length:",re?.trackingScript?.length||0),re&&re.trackingScript&&re.trackingScript.trim().length>0)x(re.trackingScript),Q("Tracking code generated successfully!");else throw console.error("No tracking script in result:",re),console.error("Result details:",{hasResult:!!re,hasTrackingScript:!!(re&&re.trackingScript),trackingScriptLength:re?.trackingScript?.length||0,trackingScriptContent:re?.trackingScript?.substring(0,200)||"empty"}),new Error("No tracking script returned from server")}catch(X){console.error("Failed to generate tracking code:",X),ee(X.message||"Failed to generate tracking code. Please try again.")}finally{u(!1)}},L=()=>{navigator.clipboard.writeText(p)},G=async()=>{if(b)try{f(!0),await Le.deactivateWebsiteIntegration(b._id),r(X=>X.map(re=>re.source==="Website"?{...re,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:re)),y(null),x(""),v([]),C(null),T([]),U(!1),Q("Website integration disconnected successfully!")}catch(X){console.error("Failed to disconnect integration:",X),ee(X.message||"Failed to disconnect integration. Please try again.")}finally{f(!1)}},K=async X=>{if(b)try{const re=g.find(Me=>Me.id===X);if(!re)return;const de=re.status==="Active"?"Inactive":"Active";f(!0);const Be=await Le.updateWebsiteForm(b._id,X,{status:de});Be.success?(await q(),Q(`Form status updated to ${de}`)):ee(Be.message||"Failed to update form status")}catch(re){console.error("Failed to toggle form status:",re),ee(re.message||"Failed to update form status. Please try again.")}finally{f(!1)}},ie=async()=>{await q()},xe=async()=>{if(b)try{f(!0),(await Le.testWebsiteIntegration(b._id)).accessible?(Q("Website integration test successful!"),await q()):ee("Website integration test failed. Please check your tracking code installation.")}catch(X){console.error("Failed to test connection:",X),ee(X.message||"Failed to test connection. Please try again.")}finally{f(!1)}},pe=X=>{X.preventDefault(),$.trim()&&!k.includes($.trim())&&(T(re=>[...re,$.trim()]),H(""),W(!1),l({type:"success",title:"Domain Added",message:`Domain "${$.trim()}" has been added successfully.`}))},be=()=>{M(!0)},me=async(X,re)=>{if(b)try{f(!0);const de=await Le.addWebsiteForm(b._id,{name:X,url:re});de.success?(await q(),Q(`Form "${X}" added successfully!`),M(!1)):ee(de.message||"Failed to add form")}catch(de){console.error("Failed to add form:",de),ee(de.message||"Failed to add form. Please try again.")}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Website Integration"}),e.jsx("p",{className:"text-subtle mt-1",children:"Track website forms and capture leads automatically"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${z?.isConnected?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:z?.isConnected?"Connected":"Not Connected"})})]}),E&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"text-green-600 dark:text-green-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Success"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:E})]}),e.jsx("button",{onClick:()=>P(null),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),N&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:N})]}),e.jsx("button",{onClick:()=>O(null),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Tracking Code"}),e.jsx("p",{className:"text-subtle text-sm",children:"Install this code on your website to track forms"})]}),e.jsx("button",{onClick:R,disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Code"]})})]}),p&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-background border border-muted rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-on-surface",children:"Tracking Script"}),e.jsx("button",{onClick:L,className:"text-xs bg-primary-600 hover:bg-primary-700 text-white font-bold py-1 px-2 rounded transition-colors",children:"Copy Code"})]}),e.jsx("pre",{className:"text-xs text-on-surface overflow-x-auto whitespace-pre-wrap",children:p})]}),e.jsxs("div",{className:"text-xs text-subtle",children:[e.jsx("p",{children:" Add this code before the closing head tag"}),e.jsx("p",{children:" Works with all major form builders (Contact Form 7, Gravity Forms, etc.)"})]})]})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Connected Forms"}),e.jsx("p",{className:"text-subtle text-sm",children:"Manage your website forms and monitor submissions"})]}),e.jsx("button",{onClick:be,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Add Form"})]}),e.jsx("div",{className:"space-y-3",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-subtle",children:"Loading forms..."})]}):g.length>0?g.map(X=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-muted rounded-lg bg-background",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-on-surface text-sm",children:X.name}),e.jsx("p",{className:"text-xs text-subtle truncate",children:X.url}),e.jsxs("p",{className:"text-xs text-subtle",children:["Submissions: ",X.totalSubmissions||0,"  Last Submission: ",X.lastSubmission?new Date(X.lastSubmission).toLocaleDateString():"Never"]}),X.conversionRate&&e.jsxs("p",{className:"text-xs text-subtle",children:["Conversion Rate: ",X.conversionRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${X.status==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-muted text-subtle"}`,children:X.status}),e.jsx("button",{onClick:()=>K(X.id),className:`text-xs font-bold py-1 px-2 rounded transition-colors ${X.status==="Active"?"bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 hover:bg-green-200 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:X.status==="Active"?"Disable":"Enable"})]})]},X.id)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-subtle",children:"No forms detected yet. Install the tracking code on your website to start capturing forms."})})})]})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Website Performance"}),m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-subtle",children:"Loading analytics..."})]}):S?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:S.totalForms||g.length}),e.jsx("div",{className:"text-sm text-subtle",children:"Total Forms"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:g.filter(X=>X.status==="Active").length}),e.jsx("div",{className:"text-sm text-subtle",children:"Active Forms"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:g.reduce((X,re)=>X+(re.totalSubmissions||0),0)}),e.jsx("div",{className:"text-sm text-subtle",children:"Total Submissions"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-1",children:[g.length>0?(g.reduce((X,re)=>X+(re.totalSubmissions||0),0)/g.length*100).toFixed(1):"0.0","%"]}),e.jsx("div",{className:"text-sm text-subtle",children:"Avg Conversion Rate"})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-subtle",children:"No analytics data available yet. Install the tracking code to start collecting data."})})]}),!z?.isConnected&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-amber-600 dark:text-amber-400",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Website Not Connected"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Install the tracking code above to start capturing leads from your website forms."})]})]})}),e.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:ie,disabled:m,className:"p-3 border border-muted rounded-lg hover:bg-background disabled:bg-background disabled:cursor-not-allowed transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-on-surface text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]}),e.jsx("div",{className:"text-xs text-subtle",children:"Reload analytics & forms"})]}),e.jsxs("button",{onClick:xe,disabled:m||!z?.isConnected,className:"p-3 border border-muted rounded-lg hover:bg-background disabled:bg-background disabled:cursor-not-allowed transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-on-surface text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Integration"]}),e.jsx("div",{className:"text-xs text-subtle",children:"Verify tracking code"})]}),e.jsxs("button",{onClick:()=>U(!0),className:"p-3 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left",children:[e.jsxs("div",{className:"font-medium text-red-800 dark:text-red-400 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Disconnect"]}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Remove integration"})]})]})]}),e.jsx(jY,{isOpen:I,onClose:()=>M(!1),onSubmit:me,isLoading:m}),e.jsx(wY,{isOpen:D,onClose:()=>U(!1),onConfirm:G,title:"Disconnect Website Integration",message:"Are you sure you want to disconnect the website integration? This will stop new leads from coming in and remove all associated data.",confirmText:"Disconnect",cancelText:"Cancel",type:"danger",isLoading:m}),F&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:()=>W(!1)})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:e.jsxs("form",{onSubmit:pe,children:[e.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:"Add Domain"}),e.jsx("button",{type:"button",onClick:()=>{W(!1),H("")},className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"domain",className:"block text-sm font-medium text-on-surface mb-2",children:"Domain Name"}),e.jsx("input",{type:"url",id:"domain",value:$,onChange:X=>H(X.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com",required:!0}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"Enter the full URL including https://"})]})})]}),e.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{W(!1),H("")},className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!$.trim()||k.includes($.trim()),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Add Domain"})]})]})})]})})]})},SY=({setting:t,onClose:r,onSave:n,onDisconnect:a,currentOrganization:s})=>{const[i,l]=w.useState({apiKey:t.apiKey||"",apiSecret:t.apiSecret||"",accountSid:t.accountSid||"",authToken:t.authToken||"",baseUrl:t.baseUrl||"",applicationId:t.applicationId||"",senderId:t.senderId||"",region:t.region||"us-east-1",connectionType:t.connectionType||"api_key",webhookUrl:t.webhookUrl||"",callbackUrl:t.callbackUrl||""}),[d,u]=w.useState(!1),[m,f]=w.useState(!1),[p,x]=w.useState(""),g=(C,k)=>{l(T=>({...T,[C]:k})),x("")},v=()=>{const C=i.apiKey.trim()||i.apiSecret.trim(),k=i.accountSid.trim()||i.authToken.trim(),T=i.applicationId.trim();return!C&&!k&&!T?(x("Please provide at least one form of authentication (API Key/Secret, Account SID/Token, or Application ID)"),!1):i.baseUrl&&!i.baseUrl.startsWith("http")?(x("Base URL must start with http:// or https://"),!1):!0},b=async()=>{if(v()){f(!0),x("");try{const C={organizationId:s?.id,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl};let k;t.id?k=await Le.updateCloudTelephonyIntegration(t.id,C):k=await Le.createCloudTelephonyIntegration(C);const T=await Le.testCloudTelephonyIntegration(k.id);T.success?alert("Connection test successful! Your telephony integration is working properly."):x(T.message||"Connection test failed")}catch(C){x(C.message||"Failed to test connection")}finally{f(!1)}}},y=async()=>{if(v()){u(!0),x("");try{const C={organizationId:s?.id,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl,status:"active"};let k;t.id?k=await Le.updateCloudTelephonyIntegration(t.id,C):k=await Le.createCloudTelephonyIntegration(C),await Le.activateCloudTelephonyIntegration(k.id),n({id:k.id,isConnected:!0,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl}),r()}catch(C){x(C.message||"Failed to connect telephony service")}finally{u(!1)}}},S=async()=>{if(!t.id){a(),r();return}try{await Le.deactivateCloudTelephonyIntegration(t.id),a(),r()}catch(C){x(C.message||"Failed to disconnect telephony service")}};return e.jsxs(it,{isOpen:!0,onClose:r,title:"Connect to Cloud Telephony",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-subtle text-sm",children:"Integrate with your cloud telephony provider to enable click-to-call, call logging, and more."}),p&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm",children:p})}),e.jsxs("div",{className:"p-4 bg-surface rounded-lg border border-muted space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Connection Type"}),e.jsxs("select",{value:i.connectionType,onChange:C=>g("connectionType",C.target.value),className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"api_key",children:"API Key & Secret"}),e.jsx("option",{value:"account_auth",children:"Account SID & Auth Token"}),e.jsx("option",{value:"application",children:"Application ID"}),e.jsx("option",{value:"oauth",children:"OAuth 2.0"})]})]}),i.connectionType==="api_key"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"API Key"}),e.jsx("input",{type:"text",value:i.apiKey,onChange:C=>g("apiKey",C.target.value),placeholder:"Enter your API Key",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"API Secret"}),e.jsx("input",{type:"password",value:i.apiSecret,onChange:C=>g("apiSecret",C.target.value),placeholder:"Enter your API Secret",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),i.connectionType==="account_auth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Account SID"}),e.jsx("input",{type:"text",value:i.accountSid,onChange:C=>g("accountSid",C.target.value),placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Auth Token"}),e.jsx("input",{type:"password",value:i.authToken,onChange:C=>g("authToken",C.target.value),placeholder:"Enter your Auth Token",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),i.connectionType==="application"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Application ID"}),e.jsx("input",{type:"text",value:i.applicationId,onChange:C=>g("applicationId",C.target.value),placeholder:"Enter your Application ID",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Sender ID (Optional)"}),e.jsx("input",{type:"text",value:i.senderId,onChange:C=>g("senderId",C.target.value),placeholder:"YOUR_SENDER_ID",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Base URL"}),e.jsx("input",{type:"url",value:i.baseUrl,onChange:C=>g("baseUrl",C.target.value),placeholder:"https://api.your-provider.com",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"Leave empty for default provider URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Region"}),e.jsxs("select",{value:i.region,onChange:C=>g("region",C.target.value),className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),e.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),e.jsx("option",{value:"eu-west-1",children:"EU West (Ireland)"}),e.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),e.jsx("option",{value:"ap-south-1",children:"Asia Pacific (Mumbai)"})]})]}),e.jsxs("div",{className:"border-t border-muted pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-subtle mb-3",children:"Webhook Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Webhook URL"}),e.jsx("input",{type:"url",value:i.webhookUrl,onChange:C=>g("webhookUrl",C.target.value),placeholder:"https://your-crm.com/webhooks/telephony",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"URL to receive call and SMS events"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Callback URL (Optional)"}),e.jsx("input",{type:"url",value:i.callbackUrl,onChange:C=>g("callbackUrl",C.target.value),placeholder:"https://your-crm.com/callback",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"For delivery confirmations and status updates"})]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",onClick:b,disabled:m||d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Connection"]})})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[t.isConnected?e.jsx("button",{type:"button",onClick:S,disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Disconnect"}):e.jsx("div",{}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:y,disabled:d||m,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.isConnected?"Save Changes":"Connect"]})})]})]})]})},kY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=w.useState(!1),[u,m]=w.useState([]),[f,p]=w.useState({totalCalls:0,answered:0,avgDuration:"0m",conversionRate:0}),[x,g]=w.useState(!1),[v,b]=w.useState(!1),[y,S]=w.useState(!1),[C,k]=w.useState(!1),[T,N]=w.useState(null),[O,E]=w.useState(""),[P,I]=w.useState(!1),M=t.find(K=>K.source==="Cloud Telephony"),D=async()=>{if(M?.id){b(!0),E("");try{const K=await Le.getCloudTelephonyPhoneNumbers(M.id);m(K.map(ie=>({id:ie.id,number:ie.phoneNumber||ie.number,friendlyName:ie.friendlyName,capabilities:ie.capabilities,isActive:ie.isActive,status:ie.isActive?"Active":"Inactive",calls:0,type:ie.friendlyName||"Business"})))}catch(K){E(K.message||"Failed to fetch phone numbers")}finally{b(!1)}}},U=async()=>{if(M?.id){S(!0),E("");try{const K=await Le.getCloudTelephonyAnalytics(M.id);p({totalCalls:K.totalCalls||0,answered:K.answered||0,avgDuration:K.avgDuration||"0m",conversionRate:K.conversionRate||0})}catch(K){E(K.message||"Failed to fetch analytics")}finally{S(!1)}}},F=async()=>{if(M?.id){k(!0),E("");try{const K=await Le.getCloudTelephonyIVR(M.id);N(K)}catch{console.log("IVR not configured yet")}finally{k(!1)}}};w.useEffect(()=>{M?.isConnected&&M?.id&&(D(),U(),F())},[M?.isConnected,M?.id]);const W=()=>{I(!0)},$=()=>{I(!1)},H=K=>{q("Cloud Telephony",K),I(!1)},z=()=>{Q("Cloud Telephony"),I(!1)},q=(K,ie)=>r(xe=>xe.map(pe=>pe.source===K?{...pe,...ie}:pe)),Q=async K=>{if(!M?.id){r(ie=>ie.map(xe=>xe.source===K?{...xe,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:xe));return}if(window.confirm(`Are you sure you want to disconnect ${K}? This will stop call logging.`))try{await Le.deactivateCloudTelephonyIntegration(M.id),r(ie=>ie.map(xe=>xe.source===K?{...xe,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:xe)),m([]),p({totalCalls:0,answered:0,avgDuration:"0m",conversionRate:0})}catch(ie){E(ie.message||"Failed to disconnect telephony")}},ee=async K=>{if(!M?.id)return;const ie=u.find(xe=>xe.id===K);if(ie)try{await Le.updateCloudTelephonyPhoneNumber(M.id,K,{isActive:!ie.isActive}),m(xe=>xe.map(pe=>pe.id===K?{...pe,isActive:!pe.isActive,status:pe.isActive?"Inactive":"Active"}:pe))}catch(xe){E(xe.message||"Failed to update phone number")}},R=async()=>{if(!M?.id){E("Please connect your telephony service first");return}g(!0),E("");try{const K=await Le.getCloudTelephonyPhoneNumbers(M.id);if(K.length===0){const ie=prompt("Enter phone number (e.g., +1234567890):");if(!ie)return;const xe=prompt("Enter friendly name (optional):"),pe=await Le.addCloudTelephonyPhoneNumber(M.id,{number:ie,friendlyName:xe||void 0});m(be=>[...be,{id:pe.id,number:pe.phoneNumber||pe.number,friendlyName:pe.friendlyName,isActive:!0,status:"Active",calls:0,type:xe||"Business"}])}else{const ie=K.map((be,me)=>`${me+1}. ${be.phoneNumber||be.number} ${be.friendlyName?`(${be.friendlyName})`:""}`).join(`
`),xe=prompt(`Available numbers:
${ie}

Enter number to add (1-${K.length}):`);if(!xe)return;const pe=parseInt(xe)-1;if(pe>=0&&pe<K.length){const be=K[pe],me=prompt("Enter friendly name (optional):",be.friendlyName||""),X=await Le.addCloudTelephonyPhoneNumber(M.id,{number:be.phoneNumber||be.number,friendlyName:me||void 0});m(re=>[...re,{id:X.id,number:X.phoneNumber||X.number,friendlyName:X.friendlyName,isActive:!0,status:"Active",calls:0,type:me||"Business"}])}}}catch(K){E(K.message||"Failed to add phone number")}finally{g(!1)}},L=async()=>{if(!M?.id){E("Please connect your telephony service first");return}const K=prompt("Enter the number to call (e.g., +1234567890):");if(K)try{await Le.makeTestCall(M.id,{to:K,from:u.find(ie=>ie.isActive)?.number||"",message:"This is a test call from your CRM system."}),alert("Test call initiated successfully!")}catch(ie){E(ie.message||"Failed to make test call")}},G=async()=>{if(!M?.id){E("Please connect your telephony service first");return}const K=prompt("Enter main menu prompt:","Press 1 for Sales, 2 for Support, 3 for Billing"),ie=prompt("Enter business hours:","Mon-Fri: 9AM-6PM, Sat: 10AM-4PM"),xe=prompt("Enter after hours message:","Voicemail with callback option");if(!(!K||!ie||!xe))try{const pe={mainMenuPrompt:K,businessHours:ie,afterHoursMessage:xe,isEnabled:!0};await Le.updateCloudTelephonyIVR(M.id,pe),N(pe),alert("IVR configuration updated successfully!")}catch(pe){E(pe.message||"Failed to update IVR configuration")}};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-muted/50 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5 text-on-surface",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Cloud Telephony Integration"}),e.jsx("p",{className:"text-subtle mt-1",children:"Track calls, manage IVR, and automate call routing"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${M?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:M?.isConnected?"Connected":"Not Connected"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Phone Numbers"}),e.jsx("p",{className:"text-subtle text-sm",children:"Manage your tracked phone numbers"})]}),e.jsx("button",{onClick:R,disabled:!M?.isConnected,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Add Number"})]}),O&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm",children:O})}),v?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-2 text-subtle",children:"Loading phone numbers..."})]}):e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("div",{className:"text-center py-8 text-subtle",children:M?.isConnected?"No phone numbers found. Add your first number to get started.":"Connect your telephony service to manage phone numbers."}):u.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-muted rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-on-surface text-sm",children:K.number}),e.jsxs("p",{className:"text-xs text-subtle",children:["Type: ",K.type,"  Calls: ",K.calls||0,K.capabilities&&e.jsxs("span",{className:"ml-2",children:[K.capabilities.sms&&" SMS",K.capabilities.voice&&" Voice",K.capabilities.mms&&" MMS"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${K.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:K.status}),e.jsx("button",{onClick:()=>ee(K.id||""),disabled:!M?.isConnected,className:`text-xs font-bold py-1 px-2 rounded disabled:opacity-50 disabled:cursor-not-allowed ${K.status==="Active"?"bg-red-100 hover:bg-red-200 text-red-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,children:K.status==="Active"?"Disable":"Enable"})]})]},K.id))})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"IVR Configuration"}),e.jsx("p",{className:"text-subtle text-sm",children:"Configure your interactive voice response system"})]}),e.jsx("button",{onClick:G,disabled:!M?.isConnected,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Configure IVR"})]}),C?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-subtle",children:"Loading IVR configuration..."})]}):T?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"Main Menu"}),e.jsx("p",{className:"text-xs text-subtle",children:T.mainMenuPrompt})]}),e.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"Business Hours"}),e.jsx("p",{className:"text-xs text-subtle",children:T.businessHours})]}),e.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"After Hours"}),e.jsx("p",{className:"text-xs text-subtle",children:T.afterHoursMessage})]})]}):e.jsx("div",{className:"text-center py-8 text-subtle",children:M?.isConnected?'No IVR configuration found. Click "Configure IVR" to set up your interactive voice response system.':"Connect your telephony service to configure IVR."})]})]}),e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Call Analytics"}),y?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-subtle",children:"Loading analytics..."})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600 mb-1",children:f.totalCalls}),e.jsx("div",{className:"text-sm text-subtle",children:"Total Calls"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:f.answered}),e.jsx("div",{className:"text-sm text-subtle",children:"Answered"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:f.avgDuration}),e.jsx("div",{className:"text-sm text-subtle",children:"Avg. Duration"})]}),e.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[f.conversionRate,"%"]}),e.jsx("div",{className:"text-sm text-subtle",children:"Conversion Rate"})]})]})]}),M?.isConnected?e.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:L,disabled:!M?.isConnected,className:"p-3 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-on-surface text-sm",children:"Test Call"}),e.jsx("div",{className:"text-xs text-subtle",children:"Make test call"})]}),e.jsxs("button",{onClick:()=>i("/reports"),className:"p-3 border border-muted rounded-lg hover:bg-muted/50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-on-surface text-sm",children:"Call Reports"}),e.jsx("div",{className:"text-xs text-subtle",children:"View analytics"})]}),e.jsxs("button",{onClick:()=>Q("Cloud Telephony"),disabled:l,className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),e.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):e.jsx("div",{className:"bg-background rounded-lg border border-muted p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-on-surface mb-2",children:"Connect Cloud Telephony"}),e.jsx("p",{className:"text-subtle mb-6 max-w-md mx-auto",children:"Connect your cloud telephony system to automatically log calls, track call metrics, and manage IVR routing."}),e.jsx("button",{onClick:W,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Connect Telephony System"]})})]})}),P&&e.jsx(SY,{setting:M||{source:"Cloud Telephony",isConnected:!1,fieldMappings:[],organizationId:a?.id||""},onClose:$,onSave:H,onDisconnect:z,currentOrganization:a})]})},CY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=w.useState(!1),[u,m]=w.useState([{id:"1",name:"Welcome Series",status:"Active",subscribers:1245,sent:1245,opened:456,clicked:89},{id:"2",name:"Product Updates",status:"Active",subscribers:890,sent:890,opened:312,clicked:67},{id:"3",name:"Holiday Special",status:"Draft",subscribers:0,sent:0,opened:0,clicked:0}]),f=t.find(b=>b.source==="Email Marketing"),p=async()=>{d(!0);try{await new Promise(b=>setTimeout(b,2e3)),x("Email Marketing",{isConnected:!0})}catch(b){console.error("Failed to connect email marketing:",b)}finally{d(!1)}},x=(b,y)=>r(S=>S.map(C=>C.source===b?{...C,...y}:C)),g=b=>{window.confirm(`Are you sure you want to disconnect ${b}? This will stop email sync.`)&&r(y=>y.map(S=>S.source===b?{...S,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:S))},v=b=>{m(y=>y.map(S=>S.id===b?{...S,status:S.status==="Active"?"Paused":"Active"}:S))};return e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Email Marketing Integration"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Sync email campaigns and manage subscriber lists"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${f?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:f?.isConnected?"Connected":"Not Connected"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Email Lists"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your subscriber lists and segments"})]}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create List"})]}),e.jsx("div",{className:"space-y-3",children:[{id:"1",name:"Newsletter Subscribers",count:1245,growth:"+12%"},{id:"2",name:"Product Updates",count:890,growth:"+8%"},{id:"3",name:"VIP Customers",count:234,growth:"+23%"},{id:"4",name:"Trial Users",count:567,growth:"+5%"}].map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:b.name}),e.jsxs("p",{className:"text-xs text-slate-600",children:[b.count.toLocaleString()," subscribers"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:b.growth}),e.jsx("button",{className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-1 px-2 rounded",children:"Edit"})]})]},b.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Active Campaigns"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor your email campaign performance"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"New Campaign"})]}),e.jsx("div",{className:"space-y-3",children:u.map(b=>e.jsxs("div",{className:"p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:b.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:b.status}),e.jsx("button",{onClick:()=>v(b.id),className:`text-xs font-bold py-1 px-2 rounded ${b.status==="Active"?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,children:b.status==="Active"?"Pause":"Activate"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-slate-800",children:b.sent.toLocaleString()}),e.jsx("div",{className:"text-slate-600",children:"Sent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-slate-800",children:b.opened.toLocaleString()}),e.jsx("div",{className:"text-slate-600",children:"Opened"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-slate-800",children:b.clicked}),e.jsx("div",{className:"text-slate-600",children:"Clicked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium text-green-600",children:[b.sent>0?Math.round(b.opened/b.sent*100):0,"%"]}),e.jsx("div",{className:"text-slate-600",children:"Open Rate"})]})]})]},b.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Email Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"12,450"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Emails Sent"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"24.8%"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Average Open Rate"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"4.2%"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Click Rate"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"2.1%"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Unsubscribe Rate"})]})]})]}),f?.isConnected?e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Send Test Email"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Test email delivery"})]}),e.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"View Reports"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Email analytics"})]}),e.jsxs("button",{onClick:()=>g("Email Marketing"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),e.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect Email Platform"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your email marketing platform to sync subscriber lists, campaigns, and track email performance."}),e.jsx("button",{onClick:p,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Connect Email Platform"]})})]})})]})},ju=[{id:"twilio",name:"Twilio",logo:"",description:"Connect your Twilio account for SMS marketing",fields:[{name:"accountSid",label:"Account SID",type:"text",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",required:!0},{name:"authToken",label:"Auth Token",type:"password",placeholder:"Enter your auth token",required:!0},{name:"fromNumber",label:"From Number",type:"text",placeholder:"+1234567890",required:!0}]},{id:"msg91",name:"MSG91",logo:"",description:"Connect your MSG91 account for SMS marketing",fields:[{name:"apiKey",label:"API Key",type:"password",placeholder:"Enter your MSG91 API key",required:!0},{name:"senderId",label:"Sender ID",type:"text",placeholder:"YOURBRAND",required:!0}]},{id:"textlocal",name:"TextLocal",logo:"",description:"Connect your TextLocal account for SMS marketing",fields:[{name:"apiKey",label:"API Key",type:"password",placeholder:"Enter your TextLocal API key",required:!0},{name:"senderId",label:"Sender ID",type:"text",placeholder:"YOURBRAND",required:!0}]}],AY=({isOpen:t,onClose:r,onConnect:n,organizationId:a})=>{const[s,i]=w.useState(ju[0]),[l,d]=w.useState({}),[u,m]=w.useState(!1),[f,p]=w.useState(null),x=(b,y)=>{d(S=>({...S,[b]:y}))},g=async()=>{m(!0),p(null);try{const b=s.fields.filter(C=>C.required&&!l[C.name]).map(C=>C.label);if(b.length>0)throw new Error(`Please fill in: ${b.join(", ")}`);const y={organizationId:a,provider:s.id,name:`${s.name} SMS`,credentials:l,settings:{dailyLimit:1e3,rateLimit:10}},S=await Le.createSMSIntegration(y);if(S.success)n(S.data),r(),d({}),i(ju[0]);else throw new Error(S.message||"Failed to create SMS integration")}catch(b){console.error("SMS connection error:",b),p(b.message||"Failed to connect SMS provider")}finally{m(!1)}},v=()=>{u||(d({}),i(ju[0]),p(null),r())};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Connect SMS Provider"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Choose your SMS provider and enter your credentials"})]}),e.jsx("button",{onClick:v,disabled:u,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Choose SMS Provider"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:ju.map(b=>e.jsxs("button",{onClick:()=>i(b),className:`p-4 border-2 rounded-lg text-left transition-all ${s.id===b.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:b.logo}),e.jsx("span",{className:"font-semibold text-slate-800",children:b.name})]}),e.jsx("p",{className:"text-sm text-slate-600",children:b.description})]},b.id))})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["Configure ",s.name]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800 font-medium",children:f})]})}),e.jsx("div",{className:"space-y-4",children:s.fields.map(b=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[b.label,b.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:b.type,value:l[b.name]||"",onChange:y=>x(b.name,y.target.value),placeholder:b.placeholder,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:u})]},b.name))}),e.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Where to find your credentials:"}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[s.id==="twilio"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:" Account SID and Auth Token are in your Twilio Console  Account Info"}),e.jsx("p",{children:" From Number should be a Twilio phone number you own"})]}),s.id==="msg91"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:" API Key is available in your MSG91 Dashboard  API Keys"}),e.jsx("p",{children:" Sender ID is your registered sender ID with MSG91"})]}),s.id==="textlocal"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:" API Key is available in your TextLocal Dashboard  Settings  API Keys"}),e.jsx("p",{children:" Sender ID is your registered sender name with TextLocal"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[e.jsx("button",{onClick:v,disabled:u,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Connect Provider"]})})]})]})}):null},TY=({isOpen:t,onClose:r,organizationId:n,phoneLists:a})=>{const[s,i]=w.useState({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),[l,d]=w.useState(!1),[u,m]=w.useState(!1),[f,p]=w.useState(null),[x,g]=w.useState(null),v=(C,k)=>{i(T=>({...T,[C]:k}))},b=async()=>{if(!s.name||!s.message||!s.phoneListId){p("Please fill in all required fields");return}d(!0),p(null),g(null);try{const C={organizationId:n,name:s.name,message:s.message,listId:s.phoneListId,senderId:s.senderId||void 0,scheduledDate:u&&s.scheduledDate?s.scheduledDate:void 0},k=await Le.sendBulkSMS(C);if(k.success)g(`SMS campaign "${s.name}" ${u?"scheduled":"sent"} successfully!`),setTimeout(()=>{i({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),m(!1),r()},2e3);else throw new Error(k.message||"Failed to send SMS campaign")}catch(C){console.error("SMS campaign error:",C),p(C.message||"Failed to send SMS campaign")}finally{d(!1)}},y=()=>{l||(i({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),m(!1),p(null),g(null),r())},S=a.find(C=>C.id===s.phoneListId);return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Create SMS Campaign"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Send SMS messages to your subscribers"})]}),e.jsx("button",{onClick:y,disabled:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Campaign Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.name,onChange:C=>v("name",C.target.value),placeholder:"e.g., Welcome Message Campaign",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Phone List ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.phoneListId,onChange:C=>v("phoneListId",C.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l,children:[e.jsx("option",{value:"",children:"Select a phone list"}),a.map(C=>e.jsxs("option",{value:C.id,children:[C.name," (",C.totalContacts||0," contacts)"]},C.id))]}),S&&e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[S.totalContacts||0," subscribers will receive this message"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:s.message,onChange:C=>v("message",C.target.value),placeholder:"Enter your SMS message (160 characters max for single SMS)",rows:4,maxLength:160,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Use ","{{name}}"," for personalization"]}),e.jsxs("p",{className:`text-sm ${s.message.length>160?"text-red-600":"text-slate-600"}`,children:[s.message.length,"/160"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sender ID (Optional)"}),e.jsx("input",{type:"text",value:s.senderId,onChange:C=>v("senderId",C.target.value),placeholder:"e.g., YOURBRAND",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Leave empty to use default sender ID"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"scheduleCampaign",checked:u,onChange:C=>m(C.target.checked),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",disabled:l}),e.jsx("label",{htmlFor:"scheduleCampaign",className:"text-sm font-medium text-slate-700",children:"Schedule for later"})]}),u&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Schedule Date & Time"}),e.jsx("input",{type:"datetime-local",value:s.scheduledDate,onChange:C=>v("scheduledDate",C.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l})]})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800 font-medium",children:f})]})}),x&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{className:"text-green-800 font-medium",children:x})]})}),s.name&&s.message&&s.phoneListId&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Campaign Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recipients:"})," ",S?.name," (",S?.totalContacts||0," contacts)"]}),e.jsx("p",{children:e.jsx("strong",{children:"Message:"})}),e.jsx("div",{className:"bg-white p-3 rounded border text-slate-700 font-mono",children:s.message}),u&&s.scheduledDate&&e.jsxs("p",{children:[e.jsx("strong",{children:"Scheduled:"})," ",new Date(s.scheduledDate).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[e.jsx("button",{onClick:y,disabled:l,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:b,disabled:l||!s.name||!s.message||!s.phoneListId,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u?"Scheduling...":"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),u?"Schedule Campaign":"Send Campaign"]})})]})]})}):null},EY=({isOpen:t,onClose:r,onListCreated:n,organizationId:a})=>{const[s,i]=w.useState(""),[l,d]=w.useState(""),[u,m]=w.useState("US"),[f,p]=w.useState(!1),[x,g]=w.useState(null),v=async()=>{if(!s.trim()){g("Please enter a list name");return}p(!0),g(null);try{const y={organizationId:a,name:s.trim(),description:l.trim(),country:u},S=await Le.createSMSPhoneList(y);if(S.success)i(""),d(""),m("US"),n(),r();else throw new Error(S.message||"Failed to create phone list")}catch(y){console.error("Phone list creation error:",y),g(y.message||"Failed to create phone list")}finally{p(!1)}},b=()=>{f||(i(""),d(""),m("US"),g(null),r())};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Create Phone List"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Create a new SMS subscriber list"})]}),e.jsx("button",{onClick:b,disabled:f,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["List Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"e.g., VIP Customers",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:l,onChange:y=>d(y.target.value),placeholder:"Brief description of this list",rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),e.jsxs("select",{value:u,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:f,children:[e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"IN",children:"India"}),e.jsx("option",{value:"UK",children:"United Kingdom"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"AU",children:"Australia"}),e.jsx("option",{value:"DE",children:"Germany"}),e.jsx("option",{value:"FR",children:"France"}),e.jsx("option",{value:"JP",children:"Japan"}),e.jsx("option",{value:"BR",children:"Brazil"}),e.jsx("option",{value:"MX",children:"Mexico"})]})]}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800 font-medium",children:x})]})}),s&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"List Preview"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s]}),l&&e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",l]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",u]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Initial Contacts:"})," 0"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[e.jsx("button",{onClick:b,disabled:f,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:f||!s.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create List"]})})]})]})}):null},OY=({settings:t,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=w.useState(!1),[u,m]=w.useState(!0),[f,p]=w.useState(null),[x,g]=w.useState([]),[v,b]=w.useState(null),[y,S]=w.useState(null),[C,k]=w.useState(!1),[T,N]=w.useState(!1),[O,E]=w.useState(!1),P=t.find(W=>W.source==="SMS Marketing");w.useEffect(()=>{I()},[a]);const I=async()=>{if(a?.id){m(!0),p(null);try{const[W,$,H]=await Promise.all([Le.getSMSPhoneLists(a.id),Le.getSMSBalance(a.id),Le.getSMSAnalytics(a.id)]);g(W||[]),b($||null),S(H||null)}catch(W){console.error("Error loading SMS data:",W),p("Failed to load SMS data. Please try again.")}finally{m(!1)}}},M=()=>{k(!0)},D=async W=>{U("SMS Marketing",{isConnected:!0,connectedAccounts:[W]}),await I()},U=(W,$)=>r(H=>H.map(z=>z.source===W?{...z,...$}:z)),F=W=>{window.confirm(`Are you sure you want to disconnect ${W}? This will stop SMS campaigns.`)&&r($=>$.map(H=>H.source===W?{...H,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:H))};return u&&!P?.isConnected?e.jsx("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading SMS integration..."})]})})}):e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"SMS Marketing Integration"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Send SMS campaigns and manage subscriber lists"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${P?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:l?"Connecting...":P?.isConnected?"Connected":"Not Connected"})})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-800 font-medium",children:f})]}),e.jsx("button",{onClick:()=>p(null),className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Phone Lists"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your SMS subscriber lists"})]}),e.jsx("button",{onClick:()=>E(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create List"})]}),e.jsx("div",{className:"space-y-3",children:u?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Loading phone lists..."})]}):f?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-red-600 text-sm mb-2",children:f}),e.jsx("button",{onClick:I,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Try Again"})]}):x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"No phone lists found"}),e.jsx("button",{onClick:()=>E(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create Your First List"})]}):x.map(W=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:W.name}),e.jsxs("p",{className:"text-xs text-slate-600",children:[W.totalContacts?.toLocaleString()||0," subscribers  ",W.country]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>alert(`Edit functionality for ${W.name} - Coming soon!`),className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-1 px-2 rounded",children:"Edit"})})]},W.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"SMS Balance"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor your SMS credits and usage"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Buy Credits"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-800",children:"Available Credits"}),e.jsx("p",{className:"text-sm text-slate-600",children:"SMS messages remaining"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u?"...":v?.credits||0}),e.jsx("div",{className:"text-xs text-slate-600",children:"credits"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:u?"...":v?.usedThisMonth||0}),e.jsx("div",{className:"text-xs text-slate-600",children:"Sent (30 days)"})]}),e.jsxs("div",{className:"text-center p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600 mb-1",children:[u?"...":(y?.deliveryRate||0).toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-slate-600",children:"Delivery Rate"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"SMS Performance"}),u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600",children:"Loading SMS performance data..."})]}):f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-2",children:f}),e.jsx("button",{onClick:I,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Try Again"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600 mb-1",children:y?.totalSent||0}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total SMS Sent"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[y?.deliveryRate?.toFixed(1)||"0.0","%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Delivery Rate"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[y?.clickRate?.toFixed(1)||"0.0","%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Click Rate"})]}),e.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[y?.optOutRate?.toFixed(1)||"0.0","%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Opt-out Rate"})]})]})]}),P?.isConnected?e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>N(!0),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Create Campaign"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Send SMS campaign"})]}),e.jsxs("button",{onClick:()=>alert("Test SMS functionality - Coming soon!"),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Send Test SMS"}),e.jsx("div",{className:"text-xs text-slate-600",children:"Test message delivery"})]}),e.jsxs("button",{onClick:()=>i("/reports"),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"View Reports"}),e.jsx("div",{className:"text-xs text-slate-600",children:"SMS analytics"})]}),e.jsxs("button",{onClick:()=>F("SMS Marketing"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[e.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),e.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect SMS Platform"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your SMS marketing platform to send campaigns, manage subscriber lists, and track delivery."}),e.jsx("button",{onClick:M,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Connect SMS Platform"]})})]})}),e.jsx(AY,{isOpen:C,onClose:()=>k(!1),onConnect:D,organizationId:a?.id||""}),e.jsx(TY,{isOpen:T,onClose:()=>N(!1),organizationId:a?.id||"",phoneLists:x}),e.jsx(EY,{isOpen:O,onClose:()=>E(!1),onListCreated:I,organizationId:a?.id||""})]})},PY=({settings:t,setSettings:r,webhooks:n,onAddWebhook:a,onDeleteWebhook:s,onUpdateWebhook:i,onTestWebhook:l,currentOrganization:d})=>{const u=An(),[m,f]=w.useState(!1),[p,x]=w.useState(!1),[g,v]=w.useState(!1),[b,y]=w.useState(null),[S,C]=w.useState(!1),[k,T]=w.useState(!1),[N,O]=w.useState(!1),[E,P]=w.useState({name:"",url:"",events:["lead.created","lead.updated"],isEnabled:!0});w.useEffect(()=>{I()},[]);const I=async(q=!1)=>{try{T(!0);const Q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!Q){console.error("No token found in localStorage");return}const ee=Q.split(".");if(ee.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",ee.length);return}const L=await fetch(q?"https://crm.clienn.com/api/settings/api-key?unmasked=true":"https://crm.clienn.com/api/settings/api-key",{headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}});if(!L.ok){const K=await L.text();console.error("API Key fetch failed:",{status:L.status,statusText:L.statusText,error:K});return}const G=await L.json();console.log("API Key fetch response:",G),G.success?(y(G.data),q&&G.data.fullApiKey&&(C(!0),setTimeout(()=>C(!1),5e3))):console.error("API Key fetch returned error:",G.message)}catch(Q){console.error("Error fetching API key:",Q)}finally{T(!1)}},M=async()=>{try{f(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Generating API key with valid JWT token");const ee=await fetch("https://crm.clienn.com/api/settings/api-key/generate",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!ee.ok){const L=await ee.text();console.error("Generate API key failed:",{status:ee.status,statusText:ee.statusText,error:L}),alert(`Failed to generate API key: ${ee.statusText}`);return}const R=await ee.json();console.log("Generate API key response:",R),R.success?(y(R.data),alert("API key generated successfully!")):alert(`Failed to generate API key: ${R.message}`)}catch(q){console.error("Error generating API key:",q),alert("Error generating API key. Please try again.")}finally{f(!1)}},D=async()=>{if(window.confirm("Are you sure you want to regenerate the API key? The old key will be invalidated immediately."))try{x(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Regenerating API key with valid JWT token");const ee=await fetch("https://crm.clienn.com/api/settings/api-key/regenerate",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!ee.ok){const L=await ee.text();console.error("Regenerate API key failed:",{status:ee.status,statusText:ee.statusText,error:L}),alert(`Failed to regenerate API key: ${ee.statusText}`);return}const R=await ee.json();console.log("Regenerate API key response:",R),R.success?(y(R.data),alert("API key regenerated successfully!")):alert(`Failed to regenerate API key: ${R.message}`)}catch(q){console.error("Error regenerating API key:",q),alert("Error regenerating API key. Please try again.")}finally{x(!1)}},U=async()=>{if(window.confirm("Are you sure you want to revoke the API key? This will disable API access immediately."))try{v(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Revoking API key with valid JWT token");const ee=await fetch("https://crm.clienn.com/api/settings/api-key/revoke",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!ee.ok){const L=await ee.text();console.error("Revoke API key failed:",{status:ee.status,statusText:ee.statusText,error:L}),alert(`Failed to revoke API key: ${ee.statusText}`);return}const R=await ee.json();console.log("Revoke API key response:",R),R.success?(y(R.data),alert("API key revoked successfully!")):alert(`Failed to revoke API key: ${R.message}`)}catch(q){console.error("Error revoking API key:",q),alert("Error revoking API key. Please try again.")}finally{v(!1)}},F=()=>{b?.apiKey&&(navigator.clipboard.writeText(S?b.apiKey:b.apiKey.substring(0,8)+"..."+b.apiKey.substring(b.apiKey.length-4)),alert("API key copied to clipboard!"))},W=()=>{I(!0)},$=()=>{E.name.trim()&&E.url.trim()&&(a(E),P({name:"",url:"",events:["lead.created","lead.updated"],isEnabled:!0}),O(!1))},H=async q=>{try{const Q=await l(q);console.log("Webhook test result:",Q)}catch(Q){console.error("Webhook test failed:",Q)}},z=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"}];return e.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>u("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"API & Webhooks"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Manage your API keys and webhook configurations"})]})]}),e.jsxs("button",{onClick:()=>window.open("/api-docs","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"View API Documentation"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"API Key Management"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Generate and manage your organization API keys"})]}),e.jsx("button",{onClick:M,disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Generate Key"]})})]}),b&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Your API Key"}),e.jsxs("div",{className:"flex gap-2",children:[!S&&e.jsx("button",{onClick:W,className:"text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",children:"Show Full Key"}),e.jsx("button",{onClick:F,className:"text-xs bg-slate-600 hover:bg-slate-700 text-white font-bold py-1 px-2 rounded",children:"Copy Key"})]})]}),e.jsx("code",{className:"text-xs text-slate-600 break-all",children:S?b.apiKey:b.apiKey.substring(0,8)+"..."+b.apiKey.substring(b.apiKey.length-4)}),S&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Full key visible for 5 seconds"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:D,disabled:p,className:"text-xs bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 disabled:cursor-not-allowed text-white font-bold py-1 px-3 rounded flex items-center gap-1",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Regenerating..."]}):"Regenerate Key"}),e.jsx("button",{onClick:U,disabled:g,className:"text-xs bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white font-bold py-1 px-3 rounded flex items-center gap-1",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Revoking..."]}):"Revoke Key"})]}),e.jsxs("div",{className:"text-xs text-slate-600",children:[e.jsx("p",{children:" Keep this key secure and don't share it publicly"}),e.jsx("p",{children:" Use this key to authenticate API requests"}),e.jsx("p",{children:" Regenerate to invalidate the old key"}),e.jsx("p",{children:" Revoke to disable API access completely"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Webhook Management"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Create and manage webhooks for real-time notifications"})]}),e.jsx("button",{onClick:()=>O(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create Webhook"})]}),N&&e.jsxs("div",{className:"space-y-4 p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook Name"}),e.jsx("input",{type:"text",value:E.name,onChange:q=>P(Q=>({...Q,name:q.target.value})),placeholder:"e.g., Zapier Integration",className:"w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook URL"}),e.jsx("input",{type:"url",value:E.url,onChange:q=>P(Q=>({...Q,url:q.target.value})),placeholder:"https://your-app.com/webhook",className:"w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Events"}),e.jsx("div",{className:"space-y-2",children:z.map(q=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.events.includes(q.value),onChange:Q=>{Q.target.checked?P(ee=>({...ee,events:[...ee.events,q.value]})):P(ee=>({...ee,events:ee.events.filter(R=>R!==q.value)}))},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:q.label})]},q.value))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Create"}),e.jsx("button",{onClick:()=>O(!1),className:"bg-slate-300 hover:bg-slate-400 text-slate-700 font-bold py-2 px-3 rounded text-sm",children:"Cancel"})]})]}),e.jsx("div",{className:"space-y-3 mt-4",children:n.slice(0,2).map(q=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:q.name}),e.jsx("p",{className:"text-xs text-slate-600 truncate",children:q.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(q.id),className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 font-bold py-1 px-2 rounded",children:"Test"}),e.jsx("button",{onClick:()=>s(q.id),className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 font-bold py-1 px-2 rounded",children:"Delete"})]})]},q.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>window.open("/api-docs","_blank"),className:"p-4 bg-gradient-to-br from-primary-50 to-primary-100 border border-primary-200 rounded-lg hover:from-primary-100 hover:to-primary-200 hover:border-primary-300 transition-all duration-200 text-left group shadow-sm hover:shadow-md",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-200 rounded-lg group-hover:bg-primary-300 transition-colors",children:e.jsx("svg",{className:"h-6 w-6 text-primary-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-800 group-hover:text-primary-800 transition-colors",children:"API Documentation"}),e.jsx("p",{className:"text-sm text-slate-600 group-hover:text-primary-700 transition-colors",children:"Complete API reference and guides"})]})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-100 border border-green-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:e.jsx("svg",{className:"h-6 w-6 text-green-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-800",children:"Webhook Testing"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Test your webhook endpoints"})]})]})})]})]})]})},a3=()=>{const t=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"},{value:"lead.received",label:"Lead Received"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-blue-600 bg-blue-50 p-3 rounded-xl",children:e.jsx(V.Code,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"API Documentation"}),e.jsx("p",{className:"text-xl text-gray-600 mt-2",children:"Integrate with Clienn CRM using our REST API and webhooks"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Quick Start"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Authentication"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Use your API key in the Authorization header"}),e.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"Authorization: Bearer YOUR_API_KEY"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("Authorization: Bearer YOUR_API_KEY"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Header"})]}),e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Base URL"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"All API requests should use this base URL"}),e.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"https://crm.clienn.com/api"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("https://crm.clienn.com/api"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Base URL"})]}),e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Rate Limits"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"API rate limiting information"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("p",{children:" 1000 requests per hour"}),e.jsx("p",{children:" 100 requests per minute"})]})]}),e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Content Type"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Use JSON for request bodies"}),e.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"Content-Type: application/json"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("Content-Type: application/json"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Header"})]})]})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"API Endpoints"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Leads"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"GET /api/leads"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium",children:"GET"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Retrieve all leads with optional filtering"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("code",{className:"text-sm text-gray-800",children:"GET https://crm.clienn.com/api/leads"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Query Parameters:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:[e.jsx("code",{children:"limit"})," - Number of leads to return (default: 50)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"offset"})," - Number of leads to skip (default: 0)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"stage"})," - Filter by lead stage"]}),e.jsxs("li",{children:[e.jsx("code",{children:"assignedTo"})," - Filter by assigned user ID"]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"POST /api/leads"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:"POST"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new lead"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsx("code",{className:"text-sm text-gray-800",children:"POST https://crm.clienn.com/api/leads"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "name": "John Doe",
  "email": "john@example.com",
  "phone": "+1234567890",
  "source": "website",
  "notes": "Interested in our services"
}`})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["PUT /api/leads/","{id}"]}),e.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-3 py-1 rounded-full font-medium",children:"PUT"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Update an existing lead"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsx("code",{className:"text-sm text-gray-800",children:"PUT https://crm.clienn.com/api/leads/123"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "stage": "Contacted",
  "notes": "Updated contact information"
}`})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["DELETE /api/leads/","{id}"]}),e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-3 py-1 rounded-full font-medium",children:"DELETE"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Delete a lead"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("code",{className:"text-sm text-gray-800",children:"DELETE https://crm.clienn.com/api/leads/123"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Webhooks"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"GET /api/webhooks"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium",children:"GET"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"List all webhooks"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("code",{className:"text-sm text-gray-800",children:"GET https://crm.clienn.com/api/webhooks"})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"POST /api/webhooks"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:"POST"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new webhook"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsx("code",{className:"text-sm text-gray-800",children:"POST https://crm.clienn.com/api/webhooks"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "name": "My Webhook",
  "url": "https://myapp.com/webhook",
  "events": ["lead.created", "lead.updated"],
  "isEnabled": true
}`})]})]})]})]})]})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Webhook Events"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Webhooks are sent as POST requests to your configured URLs with JSON payloads. Each webhook includes an HMAC signature for verification."}),e.jsx("div",{className:"space-y-6",children:t.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.label}),e.jsxs("p",{className:"text-gray-600 mb-4",children:[r.value==="lead.created"&&"Triggered when a new lead is created in the CRM",r.value==="lead.updated"&&"Triggered when a lead's information is updated",r.value==="lead.deleted"&&"Triggered when a lead is deleted from the CRM",r.value==="lead.stage_changed"&&"Triggered when a lead moves to a different stage",r.value==="lead.assigned"&&"Triggered when a lead is assigned to a user",r.value==="lead.received"&&"Triggered when a lead is received from an external source"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Sample Payload:"}),e.jsx("pre",{className:"text-xs text-gray-800 overflow-x-auto",children:`{
  "event": "${r.value}",
  "data": {
    "id": "lead_123",
    "name": "John Doe",
    "email": "john@example.com",
    "phone": "+1234567890",
    "source": "website",
    "createdAt": "2025-01-23T10:30:00Z",
    "organizationId": "org_456"
  },
  "timestamp": "2025-01-23T10:30:00Z",
  "webhookId": "webhook_789"
}`})]})]},r.value))})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Authentication & Security"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"API Key Security"}),e.jsxs("ul",{className:"text-gray-600 space-y-2",children:[e.jsx("li",{children:" Keep your API keys secure and never share them publicly"}),e.jsx("li",{children:" Use HTTPS for all API requests"}),e.jsx("li",{children:" Rotate your keys regularly for security"}),e.jsx("li",{children:" Monitor your API usage for unusual activity"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Webhook Verification"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Each webhook request includes an X-Webhook-Signature header containing an HMAC-SHA256 signature of the payload."}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Verification Example:"}),e.jsx("pre",{className:"text-xs text-gray-800 overflow-x-auto",children:`const crypto = require('crypto');

const signature = req.headers['x-webhook-signature'];
const payload = JSON.stringify(req.body);
const expectedSignature = crypto
  .createHmac('sha256', 'your_webhook_secret')
  .update(payload)
  .digest('hex');

if (signature === expectedSignature) {
  // Webhook is authentic
}`})]})]})]})]}),e.jsx("section",{className:"bg-blue-50 border border-blue-200 rounded-xl p-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-blue-600 bg-blue-100 p-3 rounded-xl",children:e.jsx(V.Support,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-blue-800 mb-4",children:"Our developer community and support team are here to help you integrate with Clienn CRM."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("a",{href:"mailto:support@clienn.com",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact Support "}),e.jsx("a",{href:"https://docs.clienn.com",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Full Documentation "})]})]})]})})]})})]})},_Y=({onClose:t,onAddTask:r,leads:n,users:a,teams:s,isSubmitting:i=!1})=>{const[l,d]=w.useState(""),[u,m]=w.useState("none"),[f,p]=w.useState({type:"user",id:a[0]?.id}),[x,g]=w.useState(()=>{const k=new Date;return k.setDate(k.getDate()+1),k.toISOString().split("T")[0]}),[v,b]=w.useState(null),y=w.useMemo(()=>{const k=a.map(N=>({value:`user-${N.id}`,label:N.name})),T=s.map(N=>({value:`team-${N.id}`,label:`Team: ${N.name}`}));return[{value:"all-all",label:"All Users"},...T,...k]},[a,s]),S=k=>{const[T,N]=k.split("-");p(T==="all"?{type:"all"}:T==="team"?{type:"team",id:N}:{type:"user",id:Number(N)})},C=async k=>{if(k.preventDefault(),b(null),!l||!f||!x){b("Please fill all required fields.");return}const T={title:l,dueDate:new Date(x).toISOString(),leadId:u==="none"?void 0:u};try{await r(T,f),t()}catch(N){b(N instanceof Error?N.message:"Failed to create task")}};return e.jsx(it,{isOpen:!0,onClose:t,title:"Add New Task",children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:v})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Task Title"}),e.jsx("input",{type:"text",value:l,onChange:k=>d(k.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",placeholder:"Enter task title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Assign To"}),e.jsxs("select",{value:`${f.type}-${f.id||"all"}`,onChange:k=>S(k.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Select an option"}),y.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Related Lead (Optional)"}),e.jsxs("select",{value:u,onChange:k=>m(k.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",children:[e.jsx("option",{value:"none",children:"None (General Task)"}),n.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Due Date"}),e.jsx("input",{type:"date",value:x,onChange:k=>g(k.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:t,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):"Add Task"})]})]})})},IY=(t,r)=>{if(r)return{text:new Date(t).toLocaleDateString(),className:"text-green-500"};const n=new Date;n.setHours(0,0,0,0);const a=new Date(t);if(a.setHours(0,0,0,0),isNaN(a.getTime()))return{text:"Invalid Date",className:"text-subtle"};const s=a.getTime()-n.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i<0?{text:"Overdue",className:"text-red-500 font-semibold"}:i===0?{text:"Due Today",className:"text-orange-500 font-semibold"}:i===1?{text:"Due Tomorrow",className:"text-yellow-600"}:{text:new Date(t).toLocaleDateString(),className:"text-subtle"}},MY=({tasks:t,users:r,leads:n,teams:a,currentUser:s,updateTask:i,onAddTask:l,onDeleteTask:d,isLoading:u=!1,pipelineStages:m,customFieldDefs:f,whatsAppTemplates:p,smsTemplates:x,onUpdateLead:g,onScheduleMessage:v})=>{const[b,y]=w.useState("pending"),[S,C]=w.useState(!1),[k,T]=w.useState("my_tasks"),[N,O]=w.useState(!1),[E,P]=w.useState(null),[I,M]=w.useState(!1),[D,U]=w.useState(null),F=s.role===Wt.ADMIN||s.role===Wt.MANAGER,W=w.useMemo(()=>{console.log("Filtering tasks for user:",s.id,"Total tasks:",t.length);const G=t.filter(ie=>{const xe=ie.assignedToId===s.id;return console.log("Task:",ie.id,"assignedToId:",ie.assignedToId,"currentUser.id:",s.id,"matches:",xe),xe});console.log("User tasks after filtering:",G.length);const K=G.filter(ie=>b==="all"||b==="pending"&&!ie.isCompleted||b==="completed"&&ie.isCompleted).sort((ie,xe)=>new Date(ie.dueDate).getTime()-new Date(xe.dueDate).getTime());return console.log("Final filtered tasks:",K.length,"for status:",b),K},[t,b,s.id]),$=w.useMemo(()=>{if(!F)return{single:[],batches:[]};const G=t.filter(pe=>pe.createdById===s.id),K=G.filter(pe=>!pe.batchId),xe=G.filter(pe=>pe.batchId).reduce((pe,be)=>(be.batchId&&(pe[be.batchId]||(pe[be.batchId]=[]),pe[be.batchId].push(be)),pe),{});return{single:K,batches:Object.values(xe).sort((pe,be)=>new Date(pe[0].createdAt)>new Date(be[0].createdAt)?-1:1)}},[t,s.id,F]),H=G=>r.find(K=>K.id===G),z=G=>G?n.find(K=>K.id===G):void 0,q=async G=>{try{P(null),await i(G)}catch(K){P(K instanceof Error?K.message:"Failed to update task")}},Q=async G=>{if(window.confirm("Are you sure you want to delete this task?"))try{P(null),await d(G)}catch(K){P(K instanceof Error?K.message:"Failed to delete task")}},ee=G=>{U(G),M(!0)},R=()=>{M(!1),U(null)},L=G=>{l(G,{type:"user",id:s.id})};return e.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[S&&e.jsx(_Y,{onClose:()=>C(!1),onAddTask:L,leads:n,users:r,teams:a,isSubmitting:N}),I&&D&&e.jsx(mP,{lead:D,users:r,tasks:t,pipelineStages:m,customFieldDefs:f,whatsAppTemplates:p,smsTemplates:x,onUpdateLead:g,onUpdateTask:i,onAddTask:L,onScheduleMessage:v,currentUser:s,onClose:R}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:E})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:()=>P(null),className:"inline-flex bg-red-50 rounded-md p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Tasks"}),e.jsx("p",{className:"text-subtle mt-1",children:"Manage your daily workload and assigned tasks."})]}),F&&e.jsxs("button",{onClick:()=>C(!0),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Add Task"]})]}),e.jsxs("div",{className:"flex border-b border-muted",children:[e.jsx("button",{onClick:()=>T("my_tasks"),className:`flex items-center gap-2 px-4 py-3 text-sm font-semibold -mb-px ${k==="my_tasks"?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:"My Tasks"}),F&&e.jsx("button",{onClick:()=>T("assigned_by_me"),className:`flex items-center gap-2 px-4 py-3 text-sm font-semibold -mb-px ${k==="assigned_by_me"?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:"Tasks I've Assigned"})]}),k==="my_tasks"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex p-1 bg-muted rounded-lg w-min",children:["pending","completed","all"].map(G=>e.jsx("button",{onClick:()=>y(G),className:`capitalize px-4 py-1.5 text-sm font-semibold rounded-md transition-colors ${b===G?"bg-surface shadow text-on-surface":"text-subtle hover:bg-surface/50"}`,children:G},G))}),e.jsx("div",{className:"flex-grow overflow-auto bg-surface rounded-xl shadow-sm border border-muted",children:u?e.jsxs("div",{className:"flex items-center justify-center p-16",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-subtle",children:"Loading tasks..."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 w-10"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Related To"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3 w-16",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsxs("tbody",{className:"divide-y divide-muted",children:[W.map(G=>{const K=z(G.leadId),ie=IY(G.dueDate,G.isCompleted);return e.jsxs("tr",{className:`group ${G.isCompleted?"bg-surface/50 opacity-70":"bg-surface"} hover:bg-muted/30 transition-colors duration-150`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:G.isCompleted,onChange:()=>q({...G,isCompleted:!G.isCompleted}),className:"h-5 w-5 rounded-md text-primary-600 focus:ring-primary-500 border-muted bg-background"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("span",{className:G.isCompleted?"line-through text-subtle":"text-on-surface",children:G.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:K?e.jsxs("button",{onClick:()=>ee(K),className:"flex items-center gap-2 text-subtle hover:text-primary-500 hover:underline transition-colors",children:[e.jsx(V.Link,{className:"h-4 w-4"}),K.name]}):e.jsx("span",{className:"text-subtle",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:`flex items-center gap-2 ${ie.className}`,children:[e.jsx(V.Calendar,{className:"h-4 w-4"}),e.jsx("span",{children:ie.text})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>Q(G.id),className:"text-subtle opacity-0 group-hover:opacity-100 hover:text-red-500 p-1 rounded-full hover:bg-muted transition-opacity",title:"Delete task",children:e.jsx(V.Delete,{className:"h-5 w-5"})})})]},G.id)}),W.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"text-center p-16 text-subtle",children:[e.jsx(V.Tasks,{className:"h-12 w-12 mx-auto text-muted"}),e.jsxs("p",{className:"mt-2 font-semibold",children:["No ",b," tasks"]})]})})]})]})})]}),k==="assigned_by_me"&&F&&e.jsxs("div",{className:"space-y-4",children:[$.batches.map(G=>{const K=G.filter(pe=>pe.isCompleted).length,ie=G.length,xe=G[0];return e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-md border border-muted/50 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-on-surface",children:xe.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-subtle mt-1",children:[e.jsx(V.Calendar,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",new Date(xe.dueDate).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:()=>window.confirm("Delete this entire batch of tasks?")&&G.forEach(pe=>d(pe.id)),className:"text-subtle hover:text-red-500 p-1 rounded-full hover:bg-muted",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-subtle mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[K," / ",ie," Completed"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${K/ie*100}%`}})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-subtle mb-2",children:"Assignees"}),e.jsxs("div",{className:"flex -space-x-2",children:[G.slice(0,7).map(pe=>{const be=H(pe.assignedToId);return be?e.jsx("img",{src:be.avatar,title:be.name,className:"h-8 w-8 rounded-full ring-2 ring-surface"},pe.id):null}),G.length>7&&e.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-surface bg-muted flex items-center justify-center text-xs font-semibold",children:["+",G.length-7]})]})]})]},xe.batchId)}),$.single.map(G=>{const K=H(G.assignedToId);return e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-md border border-muted/50 flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-on-surface ${G.isCompleted?"line-through text-subtle":""}`,children:G.title}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm text-subtle mt-1",children:[K&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:K.avatar,className:"h-5 w-5 rounded-full",alt:K.name}),e.jsx("span",{children:K.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V.Calendar,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",new Date(G.dueDate).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full ${G.isCompleted?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:G.isCompleted?"Completed":"Pending"}),e.jsx("button",{onClick:()=>d(G.id),className:"text-subtle hover:text-red-500 p-1 rounded-full hover:bg-muted",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]},G.id)}),$.batches.length===0&&$.single.length===0&&e.jsxs("div",{className:"text-center p-16 text-subtle bg-surface rounded-xl border border-muted",children:[e.jsx(V.Tasks,{className:"h-12 w-12 mx-auto text-muted"}),e.jsx("p",{className:"mt-2 font-semibold",children:"You haven't assigned any tasks yet"})]})]})]})},LY=({isOpen:t,onClose:r,onSave:n,isLoading:a=!1})=>{const[s,i]=w.useState(""),[l,d]=w.useState("#3b82f6"),[u,m]=w.useState({}),f=x=>{x.preventDefault();const g={};s.trim()||(g.name="Stage name is required"),l||(g.color="Stage color is required"),m(g),Object.keys(g).length===0&&n(s.trim(),l)},p=()=>{i(""),d("#3b82f6"),m({}),r()};return e.jsx(Zc,{isOpen:t,onClose:p,title:"Add New Stage",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stageName",className:"block text-sm font-medium text-on-surface mb-2",children:"Stage Name *"}),e.jsx("input",{id:"stageName",type:"text",value:s,onChange:x=>i(x.target.value),placeholder:"Enter stage name (e.g., New Lead, Qualified, Proposal Sent)",className:`w-full px-3 py-2 bg-background border rounded-lg text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${u.name?"border-red-500":"border-muted"}`,disabled:a}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stageColor",className:"block text-sm font-medium text-on-surface mb-2",children:"Stage Color *"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{id:"stageColor",type:"color",value:l,onChange:x=>d(x.target.value),className:"w-12 h-10 p-1 border border-muted rounded-lg bg-transparent cursor-pointer disabled:opacity-50",disabled:a}),e.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),placeholder:"#3b82f6",className:`flex-1 px-3 py-2 bg-background border rounded-lg text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${u.color?"border-red-500":"border-muted"}`,disabled:a})]}),u.color&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.color}),e.jsx("p",{className:"mt-1 text-xs text-subtle",children:"Choose a color that represents this stage in your pipeline"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors",disabled:a,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:a,children:[a&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a?"Adding Stage...":"Add Stage"]})]})]})})},DY=({isOpen:t,onClose:r,onConfirm:n,stageName:a,stageColor:s,isLoading:i=!1,leadCount:l=0})=>{const d=()=>{n()},u=()=>{i||r()};return e.jsx(Zc,{isOpen:t,onClose:u,title:"Delete Stage",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(Rt.XCircle,{className:"w-5 h-5 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"Are you sure you want to delete this stage?"}),e.jsx("p",{className:"text-subtle",children:"This action cannot be undone. All leads currently in this stage will need to be reassigned."})]})]}),e.jsx("div",{className:"bg-background rounded-lg p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:s}}),e.jsx("span",{className:"font-medium text-on-surface",children:a}),l>0&&e.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[l," lead",l!==1?"s":""]})]})}),l>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Rt.XCircle,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Impact Warning"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["This stage contains ",l," lead",l!==1?"s":"",". Deleting it will require you to move these leads to another stage."]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50",disabled:i,children:"Cancel"}),e.jsxs("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:i,children:[i&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i?"Deleting...":"Delete Stage"]})]})]})})},RY=({isOpen:t,onClose:r,onSave:n,rule:a,customFieldDefs:s,isLoading:i=!1})=>{const[l,d]=w.useState({field:"source",operator:"equals",value:"",points:10}),[u,m]=w.useState({});w.useEffect(()=>{d(a?{field:a.field||"source",operator:a.operator||"equals",value:a.value||"",points:a.points||10}:{field:"source",operator:"equals",value:"",points:10}),m({})},[a,t]);const f=[{id:"source",name:"Source"},{id:"course",name:"Course"},{id:"city",name:"City"},{id:"company",name:"Company"},{id:"email",name:"Email"},{id:"phone",name:"Phone"},...s.map(v=>({id:`customFields.${v.id}`,name:`(Custom) ${v.name}`}))],p=[{value:"equals",label:"equals"},{value:"contains",label:"contains"},{value:"not_equals",label:"not equals"},{value:"is_set",label:"is set"},{value:"is_not_set",label:"is not set"},{value:"greater_than",label:"greater than"},{value:"less_than",label:"less than"},{value:"between",label:"between"}],x=v=>{v.preventDefault();const b={};if(l.field||(b.field="Field is required"),l.operator||(b.operator="Operator is required"),!["is_set","is_not_set"].includes(l.operator)&&!l.value.trim()&&(b.value="Value is required for this operator"),(l.points===void 0||l.points===null)&&(b.points="Points are required"),m(b),Object.keys(b).length===0){const y={...l,...a?.id&&!a.id.startsWith("new_")&&!a.id.startsWith("rule_")&&{id:a.id},organizationId:a?.organizationId||""};console.log("Submitting rule data:",y),n(y)}},g=()=>{i||r()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-muted",children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:a?"Edit Scoring Rule":"Add Scoring Rule"}),e.jsx("button",{onClick:g,disabled:i,className:"text-subtle hover:text-on-surface disabled:opacity-50",children:e.jsx(Rt.Close,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Field"}),e.jsx("select",{value:l.field,onChange:v=>d(b=>({...b,field:v.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:i,children:f.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))}),u.field&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.field})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Condition"}),e.jsx("select",{value:l.operator,onChange:v=>d(b=>({...b,operator:v.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:i,children:p.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))}),u.operator&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.operator})]}),!["is_set","is_not_set"].includes(l.operator)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Value"}),e.jsx("input",{type:"text",value:l.value,onChange:v=>d(b=>({...b,value:v.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter value to match",disabled:i}),u.value&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.value})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Points"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>d(v=>({...v,points:v.points-1})),className:"w-10 h-10 bg-muted hover:bg-subtle/20 rounded-lg flex items-center justify-center text-xl font-bold text-on-surface disabled:opacity-50",disabled:i,children:""}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("span",{className:`text-lg font-bold ${l.points>=0?"text-green-500":"text-red-500"}`,children:l.points>=0?`+${l.points}`:l.points}),e.jsx("span",{className:"text-sm text-subtle ml-1",children:"points"})]}),e.jsx("button",{type:"button",onClick:()=>d(v=>({...v,points:v.points+1})),className:"w-10 h-10 bg-muted hover:bg-subtle/20 rounded-lg flex items-center justify-center text-xl font-bold text-on-surface disabled:opacity-50",disabled:i,children:"+"})]}),u.points&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.points})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:g,disabled:i,className:"flex-1 px-4 py-2 bg-muted hover:bg-subtle/20 text-on-surface rounded-lg font-medium disabled:opacity-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium disabled:opacity-50 transition-colors flex items-center justify-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):a?"Update Rule":"Add Rule"})]})]})]})}):null},$Y=({isOpen:t,onClose:r,onConfirm:n,ruleDescription:a,isLoading:s=!1})=>{if(!t)return null;const i=()=>{s||r()},l=()=>{s||n()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full max-w-md",children:[e.jsx("div",{className:"p-6 border-b border-muted",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Rt.Delete,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-on-surface",children:"Delete Scoring Rule"}),e.jsx("p",{className:"text-sm text-subtle",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-on-surface mb-6",children:"Are you sure you want to delete this scoring rule?"}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-on-surface font-medium",children:"Rule:"}),e.jsx("p",{className:"text-sm text-subtle mt-1",children:a})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:i,disabled:s,className:"flex-1 px-4 py-2 bg-muted hover:bg-subtle/20 text-on-surface rounded-lg font-medium disabled:opacity-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:s,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 transition-colors flex items-center justify-center",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rt.Delete,{className:"w-4 h-4 mr-2"}),"Delete Rule"]})})]})]})]})})},FY=({organizationId:t,onFieldsChange:r})=>{const{fields:n,loading:a,createField:s,updateField:i,deleteField:l,updateFieldUsage:d,refreshFields:u}=hP(t),[m,f]=w.useState(!1),[p,x]=w.useState(null),[g,v]=w.useState({name:"",type:"text",variableType:"",options:"",isMappable:!0,isRequired:!1,category:"general",description:""}),[b,y]=w.useState(null),[S,C]=w.useState("all"),[k,T]=w.useState("all"),[N,O]=w.useState(""),[E,P]=w.useState(new Set),{addToast:I}=ed();w.useEffect(()=>{r(n)},[n,r]);const M=(L,G)=>{I({type:G,title:L,duration:3e3})},D=()=>{v({name:"",type:"text",variableType:"",options:"",isMappable:!0,isRequired:!1,category:"general",description:""}),x(null),f(!1)},U=()=>{D(),f(!0)},F=L=>{x(L),v({name:L.name,type:L.type,variableType:L.variableType||"",options:L.options?.join(", ")||"",isMappable:L.isMappable,isRequired:L.isRequired,category:L.category||"general",description:L.description||""}),f(!0)},W=async L=>{L.preventDefault();try{const G={id:p?p.id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...g,organizationId:t,options:g.type==="dropdown"&&g.options?g.options.split(",").map(K=>K.trim()).filter(K=>K):void 0,variableType:g.type==="variable"?g.variableType:void 0};p?(await i(p._id,G),M("Custom field updated successfully","success")):(await s(G),M("Custom field created successfully","success")),D()}catch(G){console.error("Error saving custom field:",G),M("Failed to save custom field","error")}},$=async L=>{try{P(G=>new Set(G).add(L)),await l(L),M("Custom field deleted successfully","success"),y(null)}catch(G){console.error("Error deleting custom field:",G),M("Failed to delete custom field","error")}finally{P(G=>{const K=new Set(G);return K.delete(L),K})}},H=async(L,G)=>{try{P(K=>new Set(K).add(L)),await i(L,{isMappable:G}),M(`Field ${G?"enabled":"disabled"} for mapping`,"success")}catch(K){console.error("Error updating field mappable status:",K),M("Failed to update field","error")}finally{P(K=>{const ie=new Set(K);return ie.delete(L),ie})}},z=async(L,G,K)=>{try{P(ie=>new Set(ie).add(L)),await d(L,G,K),M(`Field ${K?"enabled":"disabled"} for ${G}`,"success")}catch(ie){console.error("Error updating field integration:",ie),M("Failed to update field integration","error")}finally{P(ie=>{const xe=new Set(ie);return xe.delete(L),xe})}},q=async(L,G)=>{try{P(K=>new Set(K).add(L)),await i(L,{isRequired:G}),M(`Field ${G?"marked as required":"marked as optional"}`,"success")}catch(K){console.error("Error updating field required status:",K),M("Failed to update field","error")}finally{P(K=>{const ie=new Set(K);return ie.delete(L),ie})}},Q=n.filter(L=>{const G=N===""||L.name.toLowerCase().includes(N.toLowerCase())||L.description&&L.description.toLowerCase().includes(N.toLowerCase()),K=k==="all"||L.category===k,ie=S==="all"||S==="mappable"&&L.isMappable||S==="categories"&&L.category!=="general";return G&&K&&ie}),ee=n.filter(L=>L.isMappable),R=Array.from(new Set(n.map(L=>L.category||"general")));return a?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2 text-on-surface",children:"Loading custom fields..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-4 sm:p-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-1 sm:mb-2",children:"Custom Fields Manager"}),e.jsx("p",{className:"text-primary-100 text-xs sm:text-sm",children:"Create and manage custom fields that will be available across all integrations and imports"})]}),e.jsxs("button",{onClick:U,className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-white text-primary-600 rounded-lg hover:bg-primary-50 font-semibold shadow-lg transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{className:"text-sm sm:text-base",children:"Add New Field"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:n.length}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Total Fields"})]})]})}),e.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:ee.length}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Mappable Fields"})]})]})}),e.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:R.length}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Categories"})]})]})}),e.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:n.filter(L=>L.usage&&Object.values(L.usage).some(Boolean)).length}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Active Integrations"})]})]})})]}),e.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search fields...",value:N,onChange:L=>O(L.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-3 bg-background border border-muted rounded-lg focus:border-primary-500 focus:outline-none text-sm"})]}),e.jsxs("select",{value:k,onChange:L=>T(L.target.value),className:"px-3 py-2 sm:py-3 bg-background border border-muted rounded-lg focus:border-primary-500 focus:outline-none text-sm min-w-0",children:[e.jsx("option",{value:"all",children:"All Categories"}),R.map(L=>e.jsx("option",{value:L,children:L.charAt(0).toUpperCase()+L.slice(1)},L))]})]}),e.jsx("div",{className:"flex bg-muted rounded-lg p-1 overflow-x-auto",children:[{key:"all",label:"All Fields",count:n.length},{key:"mappable",label:"Mappable",count:ee.length},{key:"categories",label:"By Category",count:R.length}].map(L=>e.jsxs("button",{onClick:()=>C(L.key),className:`px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 ${S===L.key?"bg-white text-primary-600 shadow-sm":"text-subtle hover:text-on-surface"}`,children:[e.jsx("span",{className:"hidden xs:inline",children:L.label}),e.jsx("span",{className:"xs:hidden",children:L.label.split(" ")[0]})," (",L.count,")"]},L.key))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-surface rounded-xl shadow-2xl max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${p?"bg-blue-100":"bg-green-100"}`,children:p?e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-on-surface truncate",children:[p?"Edit":"Create New"," Custom Field"]}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle",children:p?"Update field properties and settings":"Add a new custom field to your organization"})]})]}),e.jsxs("form",{onSubmit:W,className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[e.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm sm:text-base",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Field Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:L=>v({...g,name:L.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",placeholder:"e.g., Lead Score, Company Size",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Category"}),e.jsxs("select",{value:g.category,onChange:L=>v({...g,category:L.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"personal",children:"Personal Info"}),e.jsx("option",{value:"business",children:"Business Info"}),e.jsx("option",{value:"integration",children:"Integration"}),e.jsx("option",{value:"system",children:"System"})]})]})]}),e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:L=>v({...g,description:L.target.value}),rows:2,className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none resize-none",placeholder:"Describe what this field is used for..."})]})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[e.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-sm sm:text-base",children:"Field Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Field Type *"}),e.jsxs("select",{value:g.type,onChange:L=>v({...g,type:L.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"Dropdown"}),e.jsx("option",{value:"variable",children:"Variable"})]})]}),e.jsx("div",{className:"flex items-center gap-3 sm:pt-6",children:e.jsxs("label",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("input",{type:"checkbox",checked:g.isRequired,onChange:L=>v({...g,isRequired:L.target.checked}),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-xs sm:text-sm text-on-surface",children:"Required field"})]})})]}),g.type==="dropdown"&&e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Dropdown Options (comma-separated)"}),e.jsx("input",{type:"text",value:g.options,onChange:L=>v({...g,options:L.target.value}),placeholder:"Option 1, Option 2, Option 3",className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none"})]}),g.type==="variable"&&e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Variable Type *"}),e.jsxs("select",{value:g.variableType,onChange:L=>v({...g,variableType:L.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select variable type"}),e.jsx("option",{value:"pipeline_status",children:"Sales Pipeline Status"})]})]})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[e.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),e.jsx("span",{className:"text-sm sm:text-base",children:"Integration Settings"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("label",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:g.isMappable,onChange:L=>v({...g,isMappable:L.target.checked}),className:"rounded border-muted text-primary-600 focus:ring-primary-500 mt-0.5"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-sm font-medium text-on-surface",children:"Available for mapping"}),e.jsx("p",{className:"text-xs text-subtle",children:"Allow this field to be mapped in CSV imports and integrations"})]})]})})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 pt-4 sm:pt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 sm:px-6 py-2 sm:py-2 bg-muted text-on-surface rounded-lg hover:bg-muted/80 font-medium transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 sm:px-6 py-2 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium transition-colors text-sm sm:text-base",children:p?"Update Field":"Create Field"})]})]})]})})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:["Fields (",Q.length,")"]}),Q.length>0&&e.jsxs("button",{onClick:u,className:"px-3 py-1.5 text-xs sm:text-sm text-primary-600 hover:text-primary-700 flex items-center gap-2 self-end sm:self-auto",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]}),Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h4",{className:"text-lg font-medium text-on-surface mb-2",children:n.length===0?"No custom fields yet":"No fields match your filters"}),e.jsx("p",{className:"text-subtle mb-4",children:n.length===0?"Create your first custom field to get started with advanced lead management.":"Try adjusting your search terms or filters to see more results."}),n.length===0&&e.jsx("button",{onClick:U,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Create Your First Field"})]}):e.jsx("div",{className:"grid gap-3 sm:gap-4",children:Q.map(L=>e.jsxs("div",{className:`bg-surface rounded-xl p-4 sm:p-6 border transition-all duration-200 ${E.has(L._id)?"border-primary-300 shadow-lg":"border-muted hover:border-primary-200 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("h4",{className:"text-base sm:text-lg font-semibold text-on-surface truncate",children:L.name}),e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 ${L.type==="dropdown"?"bg-purple-100 text-purple-800":L.type==="number"?"bg-blue-100 text-blue-800":L.type==="date"?"bg-green-100 text-green-800":L.type==="variable"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:L.type}),L.category&&L.category!=="general"&&e.jsx("span",{className:"px-2 sm:px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium flex-shrink-0",children:L.category}),L.isRequired&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium flex-shrink-0",children:"Required"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 ${L.isMappable?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.isMappable?"Mappable":"Not Mappable"})]}),L.description&&e.jsx("p",{className:"text-xs sm:text-sm text-subtle mb-2 sm:mb-3 line-clamp-2",children:L.description}),L.options&&L.options.length>0&&e.jsxs("div",{className:"mb-2 sm:mb-3",children:[e.jsx("p",{className:"text-xs text-subtle mb-1",children:"Options:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[L.options.slice(0,3).map((G,K)=>e.jsx("span",{className:"px-2 py-1 bg-muted text-on-surface rounded-md text-xs truncate max-w-20",title:G,children:G},K)),L.options.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-muted text-subtle rounded-md text-xs",children:["+",L.options.length-3," more"]})]})]}),L.type==="variable"&&L.variableType&&e.jsxs("div",{className:"mb-2 sm:mb-3",children:[e.jsx("p",{className:"text-xs text-subtle mb-1",children:"Variable Type:"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-md text-xs font-medium",children:L.variableType==="pipeline_status"?"Sales Pipeline Status":"Users"})]}),L.usage&&Object.values(L.usage).some(Boolean)&&e.jsxs("div",{className:"mb-2 sm:mb-3",children:[e.jsx("p",{className:"text-xs text-subtle mb-1 sm:mb-2",children:"Active Integrations:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(L.usage).filter(([G,K])=>K).slice(0,4).map(([G,K])=>e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium truncate max-w-16",title:G.replace("in","").toUpperCase(),children:G.replace("in","").toUpperCase()},G)),Object.values(L.usage).filter(Boolean).length>4&&e.jsxs("span",{className:"px-2 py-1 bg-muted text-subtle rounded-full text-xs",children:["+",Object.values(L.usage).filter(Boolean).length-4]})]})]}),L.usage&&Object.values(L.usage).some(Boolean)&&e.jsxs("div",{className:"text-xs text-subtle",children:["Used in ",Object.values(L.usage).filter(Boolean).length," integration",Object.values(L.usage).filter(Boolean).length!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-2 ml-2 sm:ml-4",children:[e.jsxs("div",{className:"hidden lg:flex flex-col gap-2 mr-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"checkbox",checked:L.isMappable,onChange:G=>H(L._id,G.target.checked),disabled:E.has(L._id),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-subtle",children:"Mappable"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"checkbox",checked:L.isRequired,onChange:G=>q(L._id,G.target.checked),disabled:E.has(L._id),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-subtle",children:"Required"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mr-0 sm:mr-3",children:[["Imports","Facebook","Google","Website","API"].slice(0,3).map(G=>{const K=`in${G.toLowerCase()}`,ie=L.usage?.[K]||!1;return e.jsx("button",{onClick:()=>z(L._id,G.toLowerCase(),!ie),disabled:E.has(L._id),className:`px-1.5 sm:px-2 py-1 rounded text-xs font-medium transition-colors ${ie?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,title:`${ie?"Disable":"Enable"} ${G}`,children:G},G)}),Object.values(L.usage||{}).filter(Boolean).length>3&&e.jsxs("span",{className:"px-1.5 py-1 text-xs text-subtle",children:["+",Object.values(L.usage||{}).filter(Boolean).length-3]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>F(L),disabled:E.has(L._id),className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-primary-100 text-primary-800 rounded-lg hover:bg-primary-200 text-xs sm:text-sm font-medium transition-colors disabled:opacity-50",children:"Edit"}),e.jsx("button",{onClick:()=>y(L._id),disabled:E.has(L._id),className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-xs sm:text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]})]}),E.has(L._id)&&e.jsx("div",{className:"absolute inset-0 bg-surface/80 rounded-xl flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),e.jsx("span",{className:"text-sm",children:"Updating..."})]})})]},L.id))})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-surface rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-on-surface",children:"Delete Custom Field"}),e.jsx("p",{className:"text-xs sm:text-sm text-subtle",children:"This action cannot be undone"})]})]}),(()=>{const L=n.find(G=>G._id===b);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-red-800 font-medium",children:L?.name}),e.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Type: ",L?.type,"  Category: ",L?.category||"general"]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-on-surface",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{children:"This field will be removed from all existing leads"})]}),L?.usage&&Object.values(L.usage).some(Boolean)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),e.jsxs("span",{children:["This field is used in ",Object.values(L.usage).filter(Boolean).length," integrations"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"This action cannot be undone"})]})]})]})})(),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>y(null),className:"px-4 sm:px-6 py-2 bg-muted text-on-surface rounded-lg hover:bg-muted/80 font-medium transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{onClick:()=>$(b),className:"px-4 sm:px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors text-sm sm:text-base",children:"Delete Field"})]})]})})})]})},oi=({title:t,description:r,children:n,permission:a,hasPermission:s,initiallyOpen:i=!1})=>{const[l,d]=w.useState(i);return a&&s&&!s(a)?null:e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("button",{onClick:()=>d(!l),className:"md:pointer-events-none w-full flex justify-between items-start text-left p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:t}),r&&e.jsx("p",{className:"text-subtle mt-1 max-w-2xl",children:r})]}),e.jsx(V.ChevronRight,{className:`md:hidden h-6 w-6 text-subtle transition-transform flex-shrink-0 mt-1 ${l?"rotate-90":""}`})]}),e.jsx("div",{className:`md:block ${l?"block":"hidden"}`,children:e.jsx("div",{className:"px-6 pb-6 pt-0 space-y-4",children:n})})]})},BY=t=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),UY=({currentUser:t,onUpdateProfile:r})=>{const[n,a]=w.useState(t.name),[s,i]=w.useState(t.phone||""),[l,d]=w.useState(t.avatar),[u,m]=w.useState(!1),[f,p]=w.useState(null),x=w.useRef(null),g=async b=>{b.preventDefault(),m(!0),p(null);try{await new Promise(y=>setTimeout(y,1e3)),r({name:n,avatar:l,phone:s}),p({type:"success",text:"Profile updated successfully!"})}catch{p({type:"error",text:"Failed to update profile. Please try again."})}finally{m(!1)}},v=async b=>{if(b.target.files&&b.target.files[0]){const y=b.target.files[0],S=await BY(y);d(S)}};return e.jsx(oi,{title:"My Profile",description:"Manage your personal information and preferences.",initiallyOpen:!0,children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("img",{src:l,alt:"Avatar",className:"h-24 w-24 rounded-full object-cover ring-4 ring-muted"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("input",{type:"file",ref:x,onChange:v,accept:"image/*",className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>x.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg",children:"Upload New Picture"}),e.jsx("p",{className:"text-xs text-subtle mt-2",children:"Recommended: 200x200px"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-muted",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-subtle",children:"Full Name"}),e.jsx("input",{id:"name",type:"text",value:n,onChange:b=>a(b.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-subtle",children:"Phone Number"}),e.jsx("input",{id:"phone",type:"tel",value:s,onChange:b=>i(b.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-subtle",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:t.email,readOnly:!0,disabled:!0,className:"mt-1 block w-full bg-muted/50 border border-muted rounded-md text-subtle cursor-not-allowed py-2 px-3"})]})]}),e.jsx("div",{className:"flex justify-end pt-5",children:e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})})]})})},WY=({organization:t,plans:r,history:n,onUpgrade:a,onRefreshData:s})=>{const i=r.find(v=>v.id===t.subscriptionPlanId),[l,d]=w.useState(null),[u,m]=w.useState(null),[f,p]=w.useState(!1),x=async(v,b="monthly")=>{d(v),m(null);try{await a(v,b),m({type:"success",text:"Subscription updated successfully!"}),s()}catch{m({type:"error",text:"Failed to update subscription. Please try again."})}finally{d(null)}},g=async()=>{p(!0);try{const v=await fetch("/api/billing/download-monthly-invoices",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!v.ok)throw new Error("Failed to download invoices");const b=await v.blob(),y=window.URL.createObjectURL(b),S=document.createElement("a");S.href=y,S.download=`invoices-${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}.zip`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(y),document.body.removeChild(S)}catch(v){console.error("Error downloading invoices:",v),m({type:"error",text:"Failed to download invoices. Please try again."})}finally{p(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(oi,{title:"My Subscription",description:"Manage your current plan and features.",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.filter(v=>v.price>0).map(v=>e.jsxs("div",{className:`p-6 rounded-lg border-2 ${i?.id===v.id?"border-primary-500 bg-primary-500/5":"border-muted"}`,children:[e.jsx("h4",{className:"font-bold text-lg text-on-surface",children:v.name}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",v.price,e.jsx("span",{className:"text-sm font-normal text-subtle",children:"/mo"})]}),e.jsxs("p",{className:"text-xs text-subtle",children:[v.userLimit," Users"]}),e.jsx("ul",{className:"text-xs space-y-1 mt-4",children:v.features.slice(0,4).map(b=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(V.CheckCircle,{className:"h-4 w-4 text-green-500"})," ",b.replace(/_/g," ")]},b))}),e.jsx("button",{onClick:()=>x(v.id,"monthly"),disabled:i?.id===v.id||l===v.id,className:"w-full mt-6 py-2 rounded-lg font-semibold text-sm disabled:bg-primary-600 disabled:text-white disabled:cursor-not-allowed bg-muted hover:bg-primary-500/20 text-on-surface hover:text-primary-500 transition-colors",children:l===v.id?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):i?.id===v.id?"Current Plan":i&&v.price>i.price?"Upgrade":"Downgrade"})]},v.id))}),u&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]}),e.jsxs(oi,{title:"Billing History",description:"Review your past payments and download invoices.",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-subtle",children:"Showing last 50 transactions"}),e.jsx("button",{onClick:()=>g(),disabled:f,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-600/50 text-white font-semibold py-2 px-4 rounded-lg text-sm disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Downloading..."]}):"Download Monthly Invoices"})]}),e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Plan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Invoice"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:n.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(v.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-xs",children:v.transactionId||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:v.planName}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",v.amount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-800 text-green-200",children:v.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("a",{href:v.invoiceUrl,className:"text-primary-500 hover:underline text-sm font-semibold",children:"Download"})})]},v.id))})]})]})]})},qY=({stages:t,onAdd:r,onUpdate:n,onDelete:a})=>{const[s,i]=w.useState(t),[l,d]=w.useState(null),[u,m]=w.useState(0),[f,p]=w.useState(!1),[x,g]=w.useState(!1),[v,b]=w.useState(null);w.useEffect(()=>{console.log("DEBUG: PipelineSettings: Stages updated, re-syncing local state:",{stagesCount:t.length,localStagesCount:s.length,stages:t.map(E=>({id:E.id,name:E.name})),localStages:s.map(E=>({id:E.id,name:E.name}))}),i(t),m(E=>E+1)},[t]);const y=async(E,P)=>{console.log("DEBUG: handleAddStage called with:",{name:E,color:P}),d("add");try{await r(E,P),console.log("DEBUG: Stage creation successful, closing modal"),p(!1)}catch(I){console.error("Failed to add stage:",I)}finally{d(null)}},S=()=>{console.log("DEBUG: Opening add stage modal"),p(!0)},C=()=>{console.log("DEBUG: Closing add stage modal"),p(!1)},k=async(E,P,I)=>{console.log("DEBUG: handleUpdate called:",{id:E,field:P,value:I}),d(`update-${E}`);try{await n(E,P,I),console.log("DEBUG: Stage update successful")}catch(M){console.error("Failed to update stage:",M)}finally{d(null)}},T=async()=>{if(v){console.log("DEBUG: handleDeleteStage called for stage:",v.id,v.name),d(`delete-${v.id}`);try{await a(v.id),console.log("DEBUG: Stage deletion successful, updating local state"),i(E=>E.filter(P=>P.id!==v.id)),g(!1),b(null)}catch(E){console.error("Failed to delete stage:",E)}finally{d(null)}}},N=E=>{console.log("DEBUG: Opening delete modal for stage:",E.id,E.name),b(E),g(!0)},O=()=>{console.log("DEBUG: Closing delete stage modal"),g(!1),b(null)};return e.jsxs("div",{className:"space-y-3",children:[s.map(E=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded-lg",children:[e.jsx("input",{type:"color",value:E.color,onChange:P=>k(E.id,"color",P.target.value),disabled:l===`update-${E.id}`,className:"w-8 h-8 p-0 border-none rounded cursor-pointer bg-transparent disabled:opacity-50",style:{backgroundColor:E.color}}),e.jsx("input",{type:"text",value:E.name,onChange:P=>k(E.id,"name",P.target.value),onBlur:P=>k(E.id,"name",P.target.value),disabled:l===`update-${E.id}`,className:"flex-grow bg-transparent focus:bg-muted p-1 rounded-md disabled:opacity-50",placeholder:"Enter stage name..."}),e.jsx("button",{onClick:()=>N(E),disabled:l===`delete-${E.id}`,className:"text-red-400 hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed",children:l===`delete-${E.id}`?e.jsx("div",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):e.jsx(V.Delete,{className:"w-4 h-4"})})]},`${E.id}-${u}`)),e.jsx("button",{onClick:S,disabled:l==="add",className:"text-sm text-primary-500 font-semibold hover:text-primary-600 mt-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l==="add"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),"Adding..."]}):e.jsx(e.Fragment,{children:"+ Add Stage"})}),e.jsx(LY,{isOpen:f,onClose:C,onSave:y,isLoading:l==="add"}),v&&e.jsx(DY,{isOpen:x,onClose:O,onConfirm:T,stageName:v.name,stageColor:v.color,isLoading:l===`delete-${v.id}`,leadCount:0})]})},zY=({organizationId:t,onFieldsChange:r})=>e.jsx(FY,{organizationId:t,onFieldsChange:r}),GY=({rules:t,customFieldDefs:r,onSave:n,onDelete:a,onRefreshRules:s})=>{const[i,l]=w.useState(!1),[d,u]=w.useState(!1),[m,f]=w.useState(null),[p,x]=w.useState(null),[g,v]=w.useState(null),b=w.useMemo(()=>[{id:"source",name:"Source"},{id:"course",name:"Course"},{id:"city",name:"City"},{id:"company",name:"Company"},{id:"email",name:"Email"},{id:"phone",name:"Phone"},...r.map(I=>({id:`customFields.${I.id}`,name:`(Custom) ${I.name}`}))],[r]),y=I=>{const M=b.find(D=>D.id===I);return M?M.name:I},S=I=>{const M=y(I.field),D=I.operator.replace("_"," "),U=["is_set","is_not_set"].includes(I.operator)?"":` "${I.value}"`,F=I.points>=0?`+${I.points}`:I.points;return`IF ${M} ${D}${U} THEN ${F} points`},C=()=>{f(null),l(!0)},k=I=>{f(I),l(!0)},T=async I=>{v("save");try{console.log("Saving rule data:",I);const M={...I};(!I.id||I.id.startsWith("new_")||I.id.startsWith("rule_"))&&(delete M.id,console.log("Removed temporary ID for new rule, letting backend generate it")),console.log("Final rule to save:",M),await n(M),l(!1),f(null),console.log("Rule saved successfully, UI updated immediately")}catch(M){console.error("Failed to save rule:",M)}finally{v(null)}},N=I=>{const M=I.id||I._id;if(!M){console.error("Rule missing ID:",I);return}console.log("Delete button clicked for rule:",M,"Has id field:",!!I.id,"MongoDB _id:",I._id),x(I),u(!0)},O=async()=>{if(!p){console.error("No rule selected for deletion");return}const I=p.id||p._id;if(!I){console.error("Rule ID is missing:",p);return}console.log("Confirming delete for rule:",I,"MongoDB _id:",p._id),v("delete");try{await a(I),u(!1),x(null),console.log("Rule deleted successfully, UI updated immediately")}catch(M){console.error("Failed to delete rule:",M)}finally{v(null)}},E=()=>{l(!1),f(null)},P=()=>{u(!1),x(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-on-surface",children:"Lead Scoring Rules"}),e.jsx("p",{className:"text-sm text-subtle",children:"Configure rules to automatically score your leads based on their properties"})]}),e.jsxs("button",{onClick:C,disabled:g!==null,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-600/50 text-white rounded-lg font-medium transition-colors",children:[e.jsx(V.Add,{className:"w-4 h-4"}),"Add Rule"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg border-2 border-dashed border-muted",children:[e.jsx(V.Sparkles,{className:"w-12 h-12 text-muted mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-on-surface mb-2",children:"No scoring rules yet"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first rule to start automatically scoring leads based on their properties."}),e.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(V.Add,{className:"w-4 h-4"}),"Create First Rule"]})]}):e.jsx("div",{className:"grid gap-3",children:t.map((I,M)=>e.jsx("div",{className:"group bg-background border border-muted rounded-lg p-4 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-subtle mb-1",children:e.jsxs("span",{className:"bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium",children:["Rule #",M+1]})}),e.jsx("p",{className:"text-on-surface font-medium leading-relaxed",children:S(I)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${I.points>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[I.points>=0?`+${I.points}`:I.points," pts"]}),e.jsx("button",{onClick:D=>{D.stopPropagation(),console.log("Delete button clicked for rule:",I.id),N(I)},disabled:g!==null,className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Delete rule",children:e.jsx(V.Delete,{className:"w-4 h-4"})}),e.jsx("button",{onClick:D=>{D.stopPropagation(),k(I)},disabled:g!==null,className:"p-1.5 text-subtle hover:text-on-surface hover:bg-muted rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Edit rule",children:e.jsx(V.Edit,{className:"w-4 h-4"})})]})]})},I.id))}),t.length>0&&e.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-on-surface mb-1",children:"Scoring Summary"}),e.jsxs("p",{className:"text-sm text-subtle",children:[t.length," rule",t.length!==1?"s":""," configured"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+",t.filter(I=>I.points>0).reduce((I,M)=>I+M.points,0)]}),e.jsx("div",{className:"text-subtle",children:"Max Positive"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-red-600",children:t.filter(I=>I.points<0).reduce((I,M)=>I+M.points,0)}),e.jsx("div",{className:"text-subtle",children:"Max Negative"})]})]})]})}),e.jsx(RY,{isOpen:i,onClose:E,onSave:T,rule:m,customFieldDefs:r,isLoading:g==="save"}),p&&e.jsx($Y,{isOpen:d,onClose:P,onConfirm:O,ruleDescription:S(p),isLoading:g==="delete"})]})},HY=t=>{const{currentUser:r,hasPermission:n,currentOrganization:a,subscriptionPlans:s,billingHistory:i,onUpdateProfile:l,onUpgradeSubscription:d,onRefreshData:u,onRefreshLeadScoreRules:m}=t,[f,p]=w.useState("profile"),x=[{id:"profile",name:"My Profile",permission:!0},{id:"account",name:"Account & Billing",permission:n(Qt.MANAGE_SETTINGS)},{id:"pipeline",name:"Pipeline",permission:n(Qt.MANAGE_SETTINGS)},{id:"fields",name:"Custom Fields",permission:n(Qt.MANAGE_SETTINGS)},{id:"scoring",name:"Lead Scoring",permission:n(Qt.MANAGE_SETTINGS)},{id:"appearance",name:"Appearance",permission:!0}].filter(g=>g.permission);return a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-on-surface mb-2",children:"General Settings"}),e.jsx("div",{className:"border-b border-muted",children:e.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:x.map(g=>e.jsx("button",{onClick:()=>p(g.id),className:`${f===g.id?"border-primary-500 text-primary-500":"border-transparent text-subtle hover:text-on-surface hover:border-muted"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:g.name},g.id))})}),e.jsxs("div",{className:"pt-6",children:[f==="profile"&&e.jsx(UY,{currentUser:r,onUpdateProfile:l}),f==="account"&&e.jsx(WY,{organization:a,plans:s,history:i,onUpgrade:d,onRefreshData:u}),f==="appearance"&&e.jsx(oi,{title:"Appearance",description:"Customize the look and feel of your CRM.",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-background rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:"Interface Theme"}),e.jsxs("button",{onClick:t.toggleTheme,className:"relative inline-flex items-center h-8 rounded-full p-1 bg-muted",children:[e.jsx("span",{className:`${t.theme==="light"?"bg-primary-500 text-white":"text-subtle"} px-3 py-1 text-sm rounded-full transition-colors`,children:"Light"}),e.jsx("span",{className:`${t.theme==="dark"?"bg-primary-600 text-white":"text-subtle"} px-3 py-1 text-sm rounded-full transition-colors`,children:"Dark"})]})]})}),f==="pipeline"&&e.jsx(oi,{title:"Pipeline Stages",description:"Customize the stages in your sales pipeline.",permission:Qt.MANAGE_SETTINGS,hasPermission:n,children:e.jsx(qY,{stages:t.pipelineStages,onAdd:t.onAddStage,onUpdate:t.onUpdateStage,onDelete:t.onDeleteStage})}),f==="fields"&&e.jsx(oi,{title:"Custom Fields",description:"Create and manage custom fields for your leads.",permission:Qt.MANAGE_SETTINGS,hasPermission:n,children:e.jsx(zY,{organizationId:a.id,onFieldsChange:g=>console.log("Fields updated:",g)})}),f==="scoring"&&e.jsx(oi,{title:"Lead Scoring",description:"Automate lead prioritization by setting up scoring rules.",permission:Qt.MANAGE_SETTINGS,hasPermission:n,children:e.jsx(GY,{rules:t.leadScoreRules,onSave:t.onSaveLeadScoreRule,onDelete:t.onDeleteLeadScoreRule,customFieldDefs:t.customFieldDefs,onRefreshRules:t.onRefreshLeadScoreRules})})]})]}):null},VY=({rule:t,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i=[],onClose:l,onSave:d})=>{const[u,m]=w.useState(t||{name:"",description:"",isEnabled:!0,trigger:{type:"NEW_LEAD"},conditions:[],action:{type:"ADD_TAG",tag:""}}),f=!!u.id,x=[...[{id:"source",name:"Source",type:"text"},{id:"dealValue",name:"Deal Value",type:"number"},{id:"score",name:"Score",type:"number"},{id:"campaign",name:"Campaign",type:"text"},{id:"tags",name:"Tags",type:"text"},{id:"stage",name:"Stage",type:"text"}],...a],g=N=>{const O=N.target.value;O==="NEW_LEAD"&&m(E=>({...E,trigger:{type:"NEW_LEAD"}})),O==="LEAD_UNTOUCHED"&&m(E=>({...E,trigger:{type:"LEAD_UNTOUCHED",hours:24}})),O==="STAGE_CHANGED"&&m(E=>({...E,trigger:{type:"STAGE_CHANGED",toStage:s[0].id}})),O==="TASK_COMPLETED"&&m(E=>({...E,trigger:{type:"TASK_COMPLETED"}})),O==="LEAD_SCORE_REACHES"&&m(E=>({...E,trigger:{type:"LEAD_SCORE_REACHES",score:80}}))},v=N=>{u.trigger?.type==="LEAD_UNTOUCHED"&&m(O=>({...O,trigger:{type:"LEAD_UNTOUCHED",hours:Number(N)}})),u.trigger?.type==="STAGE_CHANGED"&&m(O=>({...O,trigger:{type:"STAGE_CHANGED",toStage:String(N)}})),u.trigger?.type==="LEAD_SCORE_REACHES"&&m(O=>({...O,trigger:{type:"LEAD_SCORE_REACHES",score:Number(N)}}))},b=()=>{m(N=>({...N,conditions:[...N.conditions||[],{id:Date.now().toString(),field:"source",operator:"equals",value:"",logic:"AND"}]}))},y=(N,O)=>{const E=[...u.conditions||[]];E[N]=O,m(P=>({...P,conditions:E}))},S=N=>{m(O=>({...O,conditions:(O.conditions||[]).filter((E,P)=>P!==N)}))},C=N=>{const O=N.target.value;O==="ADD_TAG"&&m(E=>({...E,action:{type:"ADD_TAG",tag:""}})),O==="ASSIGN_TO_USER"&&m(E=>({...E,action:{type:"ASSIGN_TO_USER",userId:r[0].id}})),O==="ASSIGN_TO_TEAM"&&m(E=>({...E,action:{type:"ASSIGN_TO_TEAM",teamId:n[0].id}})),O==="ASSIGN_ROUND_ROBIN"&&m(E=>({...E,action:{type:"ASSIGN_ROUND_ROBIN",teamId:n[0].id}})),O==="SEND_WEBHOOK"&&m(E=>({...E,action:{type:"SEND_WEBHOOK",url:""}})),O==="CREATE_TASK"&&m(E=>({...E,action:{type:"CREATE_TASK",title:"",dueDays:3}})),O==="ADD_TO_PHONE_LIST"&&m(E=>({...E,action:{type:"ADD_TO_PHONE_LIST",phoneListId:""}}))},k=(N,O)=>{m(E=>{if(!E.action)return E;const P={...E.action,[N]:O};return{...E,action:P}})},T=N=>{N.preventDefault(),d(u),l()};return e.jsx(it,{isOpen:!0,onClose:l,title:f?"Edit Automation Rule":"Add New Rule",children:e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Rule Name"}),e.jsx("input",{type:"text",value:u.name,onChange:N=>m({...u,name:N.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Description"}),e.jsx("input",{type:"text",value:u.description,onChange:N=>m({...u,description:N.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{className:"p-4 border border-blue-500/30 bg-blue-500/5 rounded-lg space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-on-surface flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-900/50 text-blue-300 font-semibold px-2 py-1 rounded-md text-xs",children:"WHEN"})," This happens... (Trigger)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:u.trigger?.type,onChange:g,className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[e.jsx("option",{value:"NEW_LEAD",children:"A New Lead is Created"}),e.jsx("option",{value:"LEAD_UNTOUCHED",children:"Lead is Untouched For..."}),e.jsx("option",{value:"STAGE_CHANGED",children:"Lead Stage Changes to..."}),e.jsx("option",{value:"TASK_COMPLETED",children:"A Task is Completed"}),e.jsx("option",{value:"LEAD_SCORE_REACHES",children:"Lead Score Reaches..."})]}),u.trigger?.type==="LEAD_UNTOUCHED"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:u.trigger.hours,onChange:N=>v(N.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),e.jsx("span",{children:"hours"})]}),u.trigger?.type==="LEAD_SCORE_REACHES"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:u.trigger.score,onChange:N=>v(N.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),e.jsx("span",{children:"points"})]}),u.trigger?.type==="STAGE_CHANGED"&&e.jsx("select",{value:u.trigger.toStage,onChange:N=>v(N.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:s.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))})]}),e.jsxs("h4",{className:"font-semibold text-on-surface text-sm pt-2 flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-500/50 text-gray-300 font-semibold px-2 py-1 rounded-md text-xs",children:"AND"})," If these conditions match... (Optional)"]}),u.conditions?.map((N,O)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:N.field,onChange:E=>y(O,{...N,field:E.target.value}),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:x.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))}),e.jsxs("select",{value:N.operator,onChange:E=>y(O,{...N,operator:E.target.value}),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[e.jsx("option",{value:"contains",children:"Contains"}),e.jsx("option",{value:"equals",children:"Is"}),e.jsx("option",{value:"not_equals",children:"Is Not"}),e.jsx("option",{value:"gt",children:">"}),e.jsx("option",{value:"lt",children:"<"})]}),e.jsx("input",{type:"text",value:N.value,onChange:E=>y(O,{...N,value:E.target.value}),placeholder:"Value",className:"bg-background border border-muted p-2 rounded-lg text-sm"}),e.jsx("button",{type:"button",onClick:()=>S(O),children:e.jsx(V.Delete,{className:"h-4 w-4 text-red-400"})})]},N.id)),e.jsx("button",{type:"button",onClick:b,className:"text-sm text-primary-500 font-semibold hover:text-primary-600",children:"+ Add Condition"})]}),e.jsxs("div",{className:"p-4 border border-purple-500/30 bg-purple-500/5 rounded-lg space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-on-surface flex items-center gap-2",children:[e.jsx("span",{className:"bg-purple-900/50 text-purple-300 font-semibold px-2 py-1 rounded-md text-xs",children:"THEN"})," Do this... (Action)"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{value:u.action?.type,onChange:C,className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[e.jsx("option",{value:"ASSIGN_TO_USER",children:"Assign to User"}),e.jsx("option",{value:"ASSIGN_TO_TEAM",children:"Assign to Team"}),e.jsx("option",{value:"ASSIGN_ROUND_ROBIN",children:"Assign via Round Robin (in Team)"}),e.jsx("option",{value:"ADD_TAG",children:"Add Tag"}),e.jsx("option",{value:"SEND_WEBHOOK",children:"Send Webhook"}),e.jsx("option",{value:"CREATE_TASK",children:"Create a Task"}),e.jsx("option",{value:"ADD_TO_PHONE_LIST",children:"Add to Phone List"})]}),u.action?.type==="ASSIGN_TO_USER"&&e.jsx("select",{value:u.action.userId,onChange:N=>k("userId",Number(N.target.value)),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:r.filter(N=>N.role!=="Admin").map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))}),(u.action?.type==="ASSIGN_TO_TEAM"||u.action?.type==="ASSIGN_ROUND_ROBIN")&&e.jsx("select",{value:u.action.teamId,onChange:N=>k("teamId",N.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:n.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))}),u.action?.type==="ADD_TAG"&&e.jsx("input",{type:"text",value:u.action.tag,onChange:N=>k("tag",N.target.value),placeholder:"tag name",className:"bg-background border border-muted p-2 rounded-lg text-sm"}),u.action?.type==="SEND_WEBHOOK"&&e.jsx("input",{type:"url",value:u.action.url,onChange:N=>k("url",N.target.value),placeholder:"https://example.com/webhook",className:"w-full bg-background border border-muted p-2 rounded-lg text-sm"}),u.action?.type==="CREATE_TASK"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:u.action.title,onChange:N=>k("title",N.target.value),placeholder:"Task Title",className:"bg-background border border-muted p-2 rounded-lg text-sm flex-grow"}),e.jsx("span",{className:"text-sm text-subtle",children:"due in"}),e.jsx("input",{type:"number",value:u.action.dueDays,onChange:N=>k("dueDays",Number(N.target.value)),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),e.jsx("span",{className:"text-sm text-subtle",children:"days"})]}),u.action?.type==="ADD_TO_PHONE_LIST"&&e.jsxs("select",{value:u.action.phoneListId,onChange:N=>k("phoneListId",N.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select a phone list"}),i.map(N=>e.jsxs("option",{value:N.id,children:[N.name," (",N.totalContacts||0," contacts)"]},N.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Rule"})]})]})})},KY=({rule:t,users:r,teams:n,phoneLists:a,onToggle:s,onEdit:i,onDelete:l})=>{const d=m=>{const{action:f}=m;switch(f.type){case"ASSIGN_TO_USER":const p=r.find(b=>b.id===f.userId);return`Assign to ${p?p.name:"Unknown User"}`;case"ASSIGN_TO_TEAM":const x=n.find(b=>b.id===f.teamId);return`Assign to Team: ${x?x.name:"Unknown"}`;case"ASSIGN_ROUND_ROBIN":const g=n.find(b=>b.id===f.teamId);return`Round-Robin in Team: ${g?g.name:"Unknown"}`;case"ADD_TAG":return`Add tag: "${f.tag}"`;case"SEND_WEBHOOK":return"Send webhook to URL";case"CREATE_TASK":return`Create task: "${f.title}"`;case"ADD_TO_PHONE_LIST":const v=a.find(b=>b.id===f.phoneListId);return`Add to Phone List: ${v?v.name:"Unknown List"}`;default:return"Perform an action"}},u=m=>{const{trigger:f}=m;let p="";switch(f.type){case"NEW_LEAD":p="A new lead is created";break;case"LEAD_UNTOUCHED":p=`A lead is untouched for ${f.hours} hours`;break;case"STAGE_CHANGED":p="A lead's stage is changed";break;case"TASK_COMPLETED":p="A task is completed";break;case"LEAD_SCORE_REACHES":p=`Lead score reaches ${f.score}`;break}return m.conditions.length>0?`${p} that matches conditions...`:p};return e.jsxs("div",{className:"bg-surface rounded-lg shadow-lg p-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-muted p-3 rounded-lg mr-4",children:e.jsx(V.Automation,{className:"h-6 w-6 text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-on-surface",children:t.name}),e.jsx("p",{className:"text-sm text-subtle mt-1",children:t.description})]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"bg-blue-900/50 text-blue-300 font-semibold px-2 py-1 rounded-md",children:"WHEN"}),e.jsx("span",{className:"text-subtle pt-1",children:u(t)})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"bg-purple-900/50 text-purple-300 font-semibold px-2 py-1 rounded-md",children:"THEN"}),e.jsx("span",{className:"text-subtle pt-1",children:d(t)})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-muted",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isEnabled,onChange:()=>s({...t,isEnabled:!t.isEnabled}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]}),e.jsx("div",{className:"flex-grow"}),e.jsx("button",{onClick:()=>i(t),className:"p-1 text-subtle hover:text-on-surface",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>window.confirm(`Are you sure you want to delete the rule "${t.name}"?`)&&l(t.id),className:"p-1 text-subtle hover:text-red-400",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]})},YY=({rules:t,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i=[],onSaveRule:l,onDeleteRule:d})=>{const[u,m]=w.useState(!1),[f,p]=w.useState(null),x=(v=null)=>{p(v),m(!0)},g=()=>{p(null),m(!1)};return e.jsxs("div",{className:"space-y-8",children:[u&&e.jsx(VY,{rule:f,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i,onClose:g,onSave:l}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-on-surface",children:"Automation"}),e.jsx("p",{className:"text-subtle mt-1",children:"Automate your sales and marketing workflows to save time."})]}),e.jsxs("button",{onClick:()=>x(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," New Rule"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(v=>e.jsx(KY,{rule:v,users:r,teams:n,phoneLists:i,onToggle:l,onEdit:x,onDelete:d},v.id))})]})},XY=({isOpen:t,onClose:r,onConfirm:n,teamName:a,isLoading:s=!1,memberCount:i=0,leadCount:l=0})=>{const d=()=>{n()},u=()=>{s||r()};return e.jsx(Zc,{isOpen:t,onClose:u,title:"Delete Team",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(Rt.XCircle,{className:"w-5 h-5 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"Are you sure you want to delete this team?"}),e.jsx("p",{className:"text-subtle",children:"This action cannot be undone. All team members will need to be reassigned to other teams."})]})]}),e.jsx("div",{className:"bg-background rounded-lg p-4 border border-muted",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-primary-500 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-on-surface",children:a}),e.jsxs("div",{className:"flex gap-2",children:[i>0&&e.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[i," member",i!==1?"s":""]}),l>0&&e.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[l," lead",l!==1?"s":""]})]})]})}),(i>0||l>0)&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Rt.XCircle,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Impact Warning"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["This team has ",i>0&&`${i} member${i!==1?"s":""}`,i>0&&l>0&&" and ",l>0&&`${l} lead${l!==1?"s":""}`,i>0||l>0?". ":"","Deleting it will require you to reassign these members and leads to other teams."]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50",disabled:s,children:"Cancel"}),e.jsxs("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:s,children:[s&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Deleting...":"Delete Team"]})]})]})})},JY=({team:t,users:r,onClose:n,onSave:a,isSubmitting:s=!1})=>{const[i,l]=w.useState(()=>t?{...t}:{name:"",leadId:0,memberIds:[]}),d=!!t?.id;w.useEffect(()=>{t?l({...t}):(l({name:"",leadId:0,memberIds:[]}),console.log("Reset form data for new team:",{name:"",leadId:0,memberIds:[]}))},[t]);const u=r.filter(x=>x.role===Wt.MANAGER||x.role===Wt.ADMIN),m=r.filter(x=>x.role===Wt.SALES_REP&&(!x.teamId||x.teamId===i.id)),f=x=>{l(g=>{const v=g.memberIds.includes(x)?g.memberIds.filter(b=>b!==x):[...g.memberIds,x];return{...g,memberIds:v}})},p=x=>{if(x.preventDefault(),!i.name||!i.leadId){alert("Team Name and Team Lead are required.");return}const g={...i};d?console.log("Updating existing team:",g):(delete g.id,console.log("Creating new team, cleaned data:",g)),a(g),n()};return e.jsx(it,{isOpen:!0,onClose:n,title:d?"Edit Team":"Create New Team",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-on-surface",children:["Team Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.name,onChange:x=>l({...i,name:x.target.value}),required:!0,placeholder:"Enter team name",className:"w-full bg-background border border-muted rounded-lg shadow-sm py-3 px-4 text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200",disabled:s})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-on-surface",children:["Team Lead (Manager) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:i.leadId,onChange:x=>l({...i,leadId:Number(x.target.value)}),required:!0,className:"w-full bg-background border border-muted rounded-lg shadow-sm py-3 px-4 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 disabled:opacity-50",disabled:s,children:[e.jsx("option",{value:0,disabled:!0,children:"Select a manager"}),u.map(x=>e.jsxs("option",{value:x.id,children:[x.name," ",x.role===Wt.ADMIN&&"(Admin)"]},x.id))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-on-surface",children:"Team Members (Sales Reps)"}),e.jsxs("span",{className:"text-xs text-subtle",children:[i.memberIds.length," selected"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto p-3 bg-background rounded-lg border border-muted",children:m.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-subtle",children:"No sales representatives available"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"Add sales reps in the Users section first"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map(x=>e.jsxs("label",{className:"flex items-center p-3 hover:bg-muted/50 rounded-lg cursor-pointer transition-colors duration-200",children:[e.jsx("input",{type:"checkbox",checked:i.memberIds.includes(x.id),onChange:()=>f(x.id),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 border-muted",disabled:s}),e.jsxs("div",{className:"ml-3 flex items-center gap-2 min-w-0",children:[e.jsx("img",{src:x.avatar,alt:x.name,className:"h-6 w-6 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-sm text-on-surface truncate",children:x.name})]})]},x.id))})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2.5 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 order-2 sm:order-1",disabled:s,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2.5 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 order-1 sm:order-2",disabled:s,children:[s&&e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Saving...":d?"Update Team":"Create Team"]})]})]})})},QY=({teams:t,users:r,onSaveTeam:n,onDeleteTeam:a})=>{const[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,m]=w.useState(!1),[f,p]=w.useState(null),[x,g]=w.useState(!1),[v,b]=w.useState(!1),y=(O=null)=>{d(O),i(!0)},S=O=>{p(O),m(!0)},C=()=>{m(!1),p(null)},k=async O=>{g(!0);try{await n(O),i(!1),d(null)}catch(E){console.error("Failed to save team:",E)}finally{g(!1)}},T=async()=>{if(f){b(!0);try{await a(f.id),C()}catch(O){console.error("Failed to delete team:",O)}finally{b(!1)}}},N=O=>({memberCount:r.filter(P=>O.memberIds.includes(P.id)).length,leadCount:0});return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-on-surface",children:"Teams"}),e.jsx("p",{className:"text-sm sm:text-base text-subtle",children:"Organize your sales reps and managers into teams for better collaboration."})]}),e.jsxs("button",{onClick:()=>y(),className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-semibold py-2.5 px-4 rounded-lg flex items-center gap-2 transition-colors duration-200 shadow-sm hover:shadow-md w-full sm:w-auto justify-center",disabled:x,children:[x?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(V.Add,{className:"w-4 h-4"}),"New Team"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V.Team,{className:"w-8 h-8 text-subtle"})}),e.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No teams yet"}),e.jsx("p",{className:"text-subtle mb-6 max-w-sm mx-auto",children:"Get started by creating your first team to organize your sales team members."}),e.jsxs("button",{onClick:()=>y(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2.5 px-4 rounded-lg inline-flex items-center gap-2 transition-colors duration-200",disabled:x,children:[e.jsx(V.Add,{className:"w-4 h-4"}),"Create Your First Team"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:t.map(O=>{const E=r.find(M=>M.id===O.leadId),P=r.filter(M=>O.memberIds.includes(M.id)),{memberCount:I}=N(O);return e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm hover:shadow-md border border-muted/50 p-6 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary-500 flex-shrink-0"}),e.jsx("h3",{className:"font-bold text-lg text-on-surface truncate",children:O.name})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>y(O),className:"p-2 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors duration-200",title:"Edit team",disabled:x,children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(O),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete team",disabled:x,children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-subtle uppercase tracking-wide mb-2",children:"Team Lead"}),E?e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-background rounded-lg",children:[e.jsx("img",{src:E.avatar,alt:E.name,className:"h-8 w-8 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-on-surface",children:E.name})]}):e.jsx("div",{className:"p-2 bg-muted/50 rounded-lg",children:e.jsx("span",{className:"text-sm text-subtle",children:"No team lead assigned"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("p",{className:"text-xs font-semibold text-subtle uppercase tracking-wide",children:["Members (",I,")"]})}),P.length>0?e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.slice(0,3).map(M=>e.jsxs("div",{className:"flex items-center gap-2 bg-background px-2 py-1 rounded-full",children:[e.jsx("img",{src:M.avatar,alt:M.name,className:"h-5 w-5 rounded-full"}),e.jsx("span",{className:"text-xs text-on-surface font-medium",children:M.name})]},M.id)),P.length>3&&e.jsx("div",{className:"flex items-center gap-2 bg-muted px-2 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs text-subtle font-medium",children:["+",P.length-3," more"]})})]})}):e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:e.jsx("span",{className:"text-sm text-subtle",children:"No members in this team"})})]})]},O.id)})}),s&&e.jsx(JY,{team:l,users:r,onClose:()=>{i(!1),d(null)},onSave:k,isSubmitting:x}),u&&f&&e.jsx(XY,{isOpen:u,onClose:C,onConfirm:T,teamName:f.name,isLoading:v,memberCount:N(f).memberCount,leadCount:N(f).leadCount})]})},ZY=({template:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{id:"",name:"",body:"",organizationId:""}),i=!!a.id,l=d=>{d.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:i?"Edit Template":"Create New Template",children:e.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),e.jsx("input",{type:"text",value:a.name,onChange:d=>s({...a,name:d.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message Body"}),e.jsx("textarea",{rows:6,value:a.body,onChange:d=>s({...a,body:d.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"}),e.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{dealValue}}"}),", and ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center bg-background p-4 rounded-lg border border-muted h-full",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-4",children:"Live Preview"}),e.jsx("div",{className:"w-72 h-96 bg-slate-800 rounded-3xl p-4 flex flex-col shadow-2xl",style:{backgroundImage:"url(https://i.pinimg.com/736x/8c/98/99/8c98994518b575bfd8c949e91d20548b.jpg)",backgroundSize:"cover"},children:e.jsx("div",{className:"flex-grow rounded-lg mt-4 p-2 overflow-y-auto flex flex-col justify-end",children:e.jsx("div",{className:"bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm p-2 rounded-lg max-w-xs self-start whitespace-pre-wrap shadow-md",children:a.body||"Your WhatsApp message will appear here..."})})})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 pt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},eX=({campaign:t,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=w.useState(t||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,f]=w.useState(t?.status==="SCHEDULED"?"later":t?.status==="SENT"?"now":"draft"),[p,x]=w.useState((t?.scheduledAt?new Date(t.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),g=v=>{v.preventDefault();const b={...d};m==="now"?(b.status="SENT",b.sentAt=new Date().toISOString(),b.scheduledAt=null):m==="later"?(b.status="SCHEDULED",b.scheduledAt=new Date(p).toISOString(),b.sentAt=null):(b.status="DRAFT",b.sentAt=null,b.scheduledAt=null),l(b),i()};return e.jsx(it,{isOpen:!0,onClose:i,title:t?.id?"Edit Campaign":"Create New Campaign",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),e.jsx("input",{value:d.name,onChange:v=>u({...d,name:v.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"WhatsApp Template"}),e.jsxs("select",{value:d.templateId,onChange:v=>u({...d,templateId:v.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a template"}),r.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),e.jsx(Qc,{conditions:d.conditions||[],onConditionsChange:v=>u({...d,conditions:v}),users:n,pipelineStages:a,customFieldDefs:s})]}),e.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&e.jsx("div",{className:"pl-9",children:e.jsx("input",{type:"datetime-local",value:p,onChange:v=>x(v.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},Gl=({title:t,description:r,children:n})=>e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:t}),r&&e.jsx("p",{className:"text-subtle mt-1 mb-6",children:r}),e.jsx("div",{className:"space-y-4",children:n})]}),tX=t=>`<script src="https://cdn.Clienn CRM.io/chatbot.js" data-org-id="${t.organizationId}" async defer><\/script>`,rX=({customFieldDefs:t,users:r,pipelineStages:n})=>{const[a,s]=w.useState("campaigns"),[i,l]=w.useState({type:null,data:null}),[d,u]=w.useState([]),[m,f]=w.useState([]),[p,x]=w.useState(null),[g,v]=w.useState(!0),[b,y]=w.useState(null),S=w.useRef(null),C=w.useRef(null),k={isEnabled:!1,welcomeMessage:"Hi there! Welcome to our website. I'm here to help you get started. What is your name?",thankYouMessage:"Thanks for the information! Someone from our team will get in touch with you shortly.",questions:[{id:crypto.randomUUID(),question:"Great, {{name}}! What's your email?",crmField:"email",type:"email"},{id:crypto.randomUUID(),question:"Thanks! And your phone number?",crmField:"phone",type:"phone"}],keywordRules:[],aiSystemPrompt:"You are a friendly and efficient assistant. Your goal is to collect visitor information to create a lead. Be concise and friendly.",widgetColor:"#25D366",widgetPosition:"bottom-right",widgetStyle:"icon",organizationId:""},T=p||k,N=w.useCallback(async(R,L)=>{if(!T)return;const G={...T,[R]:L};x(G),S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{await M(G)},1e3)},[T]);w.useEffect(()=>{(async()=>{try{v(!0),y(null);const L=localStorage.getItem("token")||localStorage.getItem("authToken"),G=L?{Authorization:`Bearer ${L}`}:{},[K,ie,xe]=await Promise.all([fetch("/api/marketing/templates/whatsapp",{headers:G}).then(pe=>pe.json()).then(pe=>pe.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/whatsapp",{headers:G}).then(pe=>pe.json()).then(pe=>pe.data||[]).catch(()=>[]),fetch("/api/settings/chatbot",{headers:G}).then(pe=>pe.json()).then(pe=>pe.data||null).catch(()=>null)]);u(K||[]),f(ie||[]),x(xe)}catch(L){console.error("Failed to fetch WhatsApp data:",L),y(`Failed to load data: ${L.message}`)}finally{v(!1)}})()},[]);const O=async R=>{try{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");let G;if(R.id?G=await fetch(`/api/marketing/templates/whatsapp/${R.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(R)}):G=await fetch("/api/marketing/templates/whatsapp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(R)}),!G.ok){const ie=await G.text();throw new Error(`Failed to save template: ${G.statusText} - ${ie}`)}const K=await G.json();R.id?u(ie=>ie.map(xe=>xe.id===R.id?K:xe)):u(ie=>[...ie,K])}catch(L){console.error("Failed to save template:",L),y(`Failed to save template: ${L.message}`)}},E=async R=>{if(confirm("Are you sure you want to delete this template?"))try{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");const G=await fetch(`/api/marketing/templates/whatsapp/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${L}`}});if(!G.ok){const K=await G.text();throw new Error(`Failed to delete template: ${G.statusText} - ${K}`)}u(K=>K.filter(ie=>ie.id!==R))}catch(L){console.error("Failed to delete template:",L),y(`Failed to delete template: ${L.message}`)}},P=async R=>{try{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");let G;if(R.id?G=await fetch(`/api/marketing/campaigns/whatsapp/${R.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(R)}):G=await fetch("/api/marketing/campaigns/whatsapp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(R)}),!G.ok){const ie=await G.text();throw new Error(`Failed to save campaign: ${G.statusText} - ${ie}`)}const K=await G.json();R.id?f(ie=>ie.map(xe=>xe.id===R.id?K:xe)):f(ie=>[...ie,K])}catch(L){console.error("Failed to save campaign:",L),y(`Failed to save campaign: ${L.message}`)}},I=async R=>{if(confirm("Are you sure you want to delete this campaign?"))try{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");const G=await fetch(`/api/marketing/campaigns/whatsapp/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${L}`}});if(!G.ok){const K=await G.text();throw new Error(`Failed to delete campaign: ${G.statusText} - ${K}`)}f(K=>K.filter(ie=>ie.id!==R))}catch(L){console.error("Failed to delete campaign:",L),y(`Failed to delete campaign: ${L.message}`)}},M=async R=>{try{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");const G=await fetch("/api/settings/chatbot",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(R)});if(!G.ok){const ie=await G.text();throw new Error(`Failed to save chatbot config: ${G.statusText} - ${ie}`)}const K=await G.json();x(K)}catch(L){console.error("Failed to save chatbot config:",L),y(`Failed to save chatbot config: ${L.message}`)}},D=async R=>{try{const L={...R,status:"SENT",sentAt:new Date().toISOString()};await P(L),alert("Campaign sent successfully!")}catch(L){console.error("Failed to send campaign:",L),y(`Failed to send campaign: ${L.message}`)}},U=async R=>{try{const L={...R,status:"DRAFT",scheduledAt:null};await P(L),alert("Campaign unscheduled successfully!")}catch(L){console.error("Failed to unschedule campaign:",L),y(`Failed to unschedule campaign: ${L.message}`)}};if(g)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading WhatsApp data..."})]})});if(b)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const F=(R,L=null)=>{l({type:R,data:L})},W=()=>{l({type:null,data:null})},$=async(R,L,G)=>{if(!T)return;const K=(T.questions||[]).map(xe=>xe.id===R?{...xe,[L]:G}:xe),ie={...T,questions:K};x(ie),C.current&&clearTimeout(C.current),C.current=setTimeout(async()=>{await M(ie)},1e3)},H=async()=>{if(!T)return;const R={id:crypto.randomUUID(),question:"",crmField:"name",type:"text"},L={...T,questions:[...T.questions||[],R]};x(L),await M(L)},z=async R=>{if(!T)return;const L={...T,questions:(T.questions||[]).filter(G=>G.id!==R)};x(L),await M(L)},q=[{value:"name",label:"Name"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"company",label:"Company"},{value:"city",label:"City"},{value:"course",label:"Course"},...(t||[]).map(R=>({value:`customFields.${R.id}`,label:`(Custom) ${R.name}`}))],Q=R=>{switch(R.status){case"SENT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}},ee=()=>{switch(a){case"campaigns":return"New Campaign";case"templates":return"New Template";default:return null}};return e.jsxs("div",{className:"space-y-6",children:[i.type==="template"&&e.jsx(ZY,{template:i.data,onClose:W,onSave:O}),i.type==="campaign"&&e.jsx(eX,{campaign:i.data,templates:d,users:r,pipelineStages:n,customFieldDefs:t,onClose:W,onSave:P}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[e.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),e.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),e.jsx("button",{onClick:()=>s("chatbot"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="chatbot"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Website Chatbot"}),e.jsx("button",{onClick:()=>s("integration"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="integration"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Settings"})]}),ee()&&e.jsxs("button",{onClick:()=>F(a),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",ee()]})]}),a==="campaigns"&&(m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(R=>e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:R.name}),Q(R)]}),R.status==="SCHEDULED"&&R.scheduledAt&&e.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(R.scheduledAt).toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:R.recipientCount.toLocaleString()}),e.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[R.deliveryRate,"%"]}),e.jsx("p",{className:"text-xs text-subtle",children:"Delivery Rate"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>F("campaign",R),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),R.status==="DRAFT"&&e.jsx("button",{onClick:()=>D(R),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),R.status==="SCHEDULED"&&e.jsx("button",{onClick:()=>U(R),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),e.jsx("button",{onClick:()=>I(R.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]},R.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Whatsapp,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No WhatsApp Campaigns Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first WhatsApp campaign to get started with WhatsApp marketing."}),e.jsxs("button",{onClick:()=>F("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="integration"&&e.jsxs(Gl,{title:"API Configuration",description:"Enter your credentials from your WhatsApp Business API provider (e.g., Meta, Twilio).",children:[e.jsx("input",{type:"password",placeholder:"API Key / Access Token",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3"}),e.jsx("input",{type:"password",placeholder:"API Secret / Account SID",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3"}),e.jsx("input",{type:"text",readOnly:!0,value:"https://api.Clienn CRM.io/webhooks/whatsapp",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 text-subtle cursor-not-allowed"})]}),a==="templates"&&(d.length>0?e.jsx(Gl,{title:"Message Templates",description:"Create reusable templates for quick and consistent communication.",children:e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(R=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:R.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F("template",R),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(R.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap bg-muted/50 p-2 rounded",children:R.body})]},R.id))})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Whatsapp,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No WhatsApp Templates Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first WhatsApp template to start building campaigns."}),e.jsxs("button",{onClick:()=>F("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="chatbot"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs(Gl,{title:"Chatbot Status & Installation",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-background rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:"Enable Website Chatbot"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T.isEnabled,onChange:R=>N("isEnabled",R.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-subtle",children:"Copy this code into your website's HTML before the closing `</body>` tag."}),e.jsx("pre",{className:"bg-background p-4 rounded-lg text-xs text-on-surface overflow-auto mt-2 font-mono",children:tX(T)})]})]}),e.jsx(Gl,{title:"Widget Customization",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Color"}),e.jsx("input",{type:"color",value:T.widgetColor,onChange:R=>N("widgetColor",R.target.value),className:"mt-1 w-full h-10 p-1 bg-background border border-muted rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Style"}),e.jsxs("select",{value:T.widgetStyle,onChange:R=>N("widgetStyle",R.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 h-10",children:[e.jsx("option",{value:"icon",children:"Icon only"}),e.jsx("option",{value:"button",children:"Button with text"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Position"}),e.jsxs("select",{value:T.widgetPosition,onChange:R=>N("widgetPosition",R.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",children:[e.jsx("option",{value:"bottom-right",children:"Bottom Right"}),e.jsx("option",{value:"bottom-left",children:"Bottom Left"})]})]})]}),e.jsxs("div",{className:"relative h-80 bg-slate-200 dark:bg-slate-800 rounded-lg overflow-hidden flex items-center justify-center p-4",children:[e.jsx("p",{className:"text-sm text-subtle font-semibold",children:"Live Preview"}),e.jsx("div",{className:`absolute bottom-5 ${T.widgetPosition==="bottom-left"?"left-5":"right-5"}`,children:e.jsxs("button",{className:"transition-all duration-300 ease-in-out text-white shadow-lg flex items-center gap-2",style:{backgroundColor:T.widgetColor,borderRadius:T.widgetStyle==="icon"?"50%":"30px",padding:T.widgetStyle==="icon"?"1rem":"1rem 1.5rem"},children:[e.jsx(V.ChatBubble,{className:"w-6 h-6"}),T.widgetStyle==="button"&&e.jsx("span",{className:"font-semibold",children:"Chat with us"})]})})]})]})}),e.jsxs(Gl,{title:"Conversation Flow",description:"Define how the chatbot interacts with visitors.",children:[e.jsx("textarea",{value:T.welcomeMessage,onChange:R=>N("welcomeMessage",R.target.value),rows:3,className:"w-full bg-background border border-muted rounded-md py-2 px-3",placeholder:"Welcome message..."}),e.jsxs("div",{className:"space-y-2",children:[(T.questions||[]).map((R,L)=>e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr_auto] items-center gap-2 p-2 bg-background rounded-md",children:[e.jsxs("span",{className:"text-subtle font-bold",children:[L+1,"."]}),e.jsx("input",{type:"text",value:R.question,onChange:G=>$(R.id,"question",G.target.value),placeholder:"Question...",className:"bg-surface border border-muted p-1 rounded-md"}),e.jsx("span",{className:"text-subtle text-sm",children:"maps to:"}),e.jsx("select",{value:R.crmField,onChange:G=>$(R.id,"crmField",G.target.value),className:"bg-surface border border-muted p-1 rounded-md text-sm",children:q.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))}),e.jsx("button",{onClick:()=>z(R.id),className:"text-red-400 hover:text-red-300",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]},R.id)),e.jsx("button",{onClick:H,className:"text-sm text-primary-500 font-semibold",children:"+ Add Question"})]}),e.jsx("textarea",{value:T.thankYouMessage,onChange:R=>N("thankYouMessage",R.target.value),rows:3,className:"w-full bg-background border border-muted rounded-md py-2 px-3",placeholder:"Thank you message..."})]})]})]})},nX=({onLogin:t,content:r,features:n})=>{const[a,s]=w.useState(""),[i,l]=w.useState(""),[d,u]=w.useState(!1),[m,f]=w.useState(null),[p,x]=w.useState(!1),[g,v]=w.useState(0);w.useEffect(()=>{const y=setInterval(()=>{v(S=>(S+1)%n.length)},5e3);return()=>clearInterval(y)},[n.length]);const b=async y=>{y.preventDefault(),f(null),x(!0);const S=await t(a,i);S&&f(S),x(!1)};return e.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-2 bg-background",children:[e.jsxs("div",{className:"hidden lg:flex flex-col justify-between p-12 bg-slate-100 dark:bg-slate-900/50 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"animate-float absolute -top-20 -left-20 w-96 h-96 bg-gradient-to-r from-blue-200 to-purple-200 dark:from-blue-900/50 dark:to-purple-900/50 rounded-full blur-3xl opacity-50",style:{animationDelay:"0s"}}),e.jsx("div",{className:"animate-float absolute -bottom-20 -right-10 w-96 h-96 bg-gradient-to-r from-yellow-200 to-pink-200 dark:from-yellow-900/50 dark:to-pink-900/50 rounded-full blur-3xl opacity-50",style:{animationDelay:"3s"}})]}),e.jsx("div",{className:"relative z-10",children:e.jsxs(jt,{to:"/",className:"flex items-center gap-3",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center my-auto",children:[e.jsx("div",{className:"relative w-full max-w-lg h-72 mb-8 rounded-2xl shadow-2xl overflow-hidden bg-muted",children:n.map((y,S)=>e.jsx("img",{src:y.image.src,alt:y.image.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${g===S?"opacity-100":"opacity-0"}`},y.id))}),e.jsx("div",{className:"relative h-32 w-full max-w-lg",children:n.map((y,S)=>e.jsxs("div",{className:`absolute inset-0 transition-all duration-700 ease-in-out ${g===S?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:y.title}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400 max-w-md mx-auto line-clamp-3",children:y.description})]},y.id))})]}),e.jsx("div",{className:"relative z-10 flex justify-center space-x-3",children:n.map((y,S)=>e.jsx("button",{onClick:()=>v(S),"aria-label":`Go to slide ${S+1}`,className:`w-2.5 h-2.5 rounded-full transition-all duration-300 ${g===S?"bg-primary-500 scale-125":"bg-slate-400 dark:bg-slate-600 hover:bg-primary-300"}`},S))})]}),e.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs(jt,{to:"/",className:"block text-center mb-8 group",children:[e.jsx(V.Logo,{className:"h-10 w-auto text-primary-500 mx-auto transition-transform group-hover:scale-110"}),e.jsx("h2",{className:"mt-6 text-2xl font-bold text-on-surface",children:"Welcome Back"}),e.jsx("p",{className:"text-subtle text-sm",children:"Sign in to continue to Clienn CRM"})]}),e.jsx("div",{className:"bg-surface p-8 rounded-xl shadow-2xl border border-muted/50",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[m&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm",role:"alert",children:m}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-subtle",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:y=>s(y.target.value),className:`mt-1 block w-full px-3 py-2 bg-background border border-muted rounded-md text-sm shadow-sm placeholder-subtle 
                                    focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/50 transition duration-150`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-subtle",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,value:i,onChange:y=>l(y.target.value),className:`block w-full px-3 py-2 bg-background border border-muted rounded-md text-sm shadow-sm placeholder-subtle 
                                        focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/50 transition duration-150`}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute inset-y-0 right-0 flex items-center px-3 text-subtle",children:d?e.jsx(V.EyeOff,{className:"h-5 w-5"}):e.jsx(V.Eye,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign In with OTP"}),e.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot Password?"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-surface focus:ring-primary-500 disabled:bg-primary-400 disabled:cursor-not-allowed",children:p?"Signing In...":"Sign In"})})]})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-subtle space-y-2",children:[e.jsxs("p",{children:["Don't have an account? ",e.jsx(jt,{to:"/",className:"font-medium text-primary-400 hover:text-primary-300",children:"Start your free trial"})]}),e.jsx("p",{children:e.jsx(jt,{to:"/",className:"font-medium text-subtle hover:text-on-surface",children:" Back to Home"})})]})]})})]})},s3=t=>{if(t===null||t<0)return"N/A";const r=Math.floor(t/1e3),n=Math.floor(r/3600),a=Math.floor(r%3600/60),s=Math.floor(r%60);return[n>0?`${n}h`:"",a>0?`${a}m`:"",s>0?`${s}s`:""].filter(Boolean).join(" ")||"0s"},aX=({users:t,onToggleTracking:r})=>e.jsxs("div",{className:"bg-surface rounded-lg shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b border-muted",children:[e.jsx("h3",{className:"font-semibold text-on-surface",children:"Manage User Tracking"}),e.jsx("p",{className:"text-sm text-subtle",children:"Enable or disable activity tracking for individual users."})]}),e.jsx("div",{className:"max-h-72 overflow-y-auto",children:t.filter(n=>n.role!==Wt.ADMIN&&n.role!==Wt.SUPER_ADMIN).map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-muted last:border-b-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:n.avatar,alt:n.name,className:"h-10 w-10 rounded-full object-cover"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium text-on-surface",children:n.name}),e.jsx("p",{className:"text-sm text-subtle",children:n.role})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.isTrackingEnabled,onChange:()=>r(n.id),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},n.id))})]}),sX=({users:t,sessionLogs:r,teams:n,onToggleTracking:a,currentUser:s})=>{const[i,l]=w.useState("all"),[d,u]=w.useState("all"),[m,f]=w.useState("all"),p=w.useMemo(()=>{let v=r;const b=new Date;if(i!=="all"){let C=new Date;i==="today"?C.setHours(0,0,0,0):i==="7d"?C.setDate(b.getDate()-7):i==="this_month"?C=new Date(b.getFullYear(),b.getMonth(),1):i==="last_month"&&(C=new Date(b.getFullYear(),b.getMonth()-1,1),b.setDate(0)),v=v.filter(k=>{const T=new Date(k.loginTime);return T>=C&&T<=b})}const y=new Set(t.filter(C=>C.isTrackingEnabled).map(C=>C.id));let S=new Set(y);if(d!=="all"){const C=n.find(k=>k.id===d);if(C){const k=new Set([...C.memberIds,C.leadId]);S=new Set([...S].filter(T=>k.has(T)))}else S=new Set}if(m!=="all"){const C=parseInt(m,10);S.has(C)?S=new Set([C]):S=new Set}return v.filter(C=>S.has(C.userId)).sort((C,k)=>new Date(k.loginTime).getTime()-new Date(C.loginTime).getTime())},[r,t,n,i,d,m]),x=w.useMemo(()=>{const v=p.reduce((C,k)=>C+(k.durationMs||0),0)/36e5,b=p.filter(C=>C.durationMs),y=b.length>0?b.reduce((C,k)=>C+(k.durationMs||0),0)/b.length:0,S=new Set(p.map(C=>C.userId));return{totalHours:v,avgSessionDuration:y,trackedUsersCount:S.size}},[p]),g=w.useMemo(()=>{if(d==="all")return t.filter(y=>y.isTrackingEnabled);const v=n.find(y=>y.id===d);if(!v)return[];const b=new Set([...v.memberIds,v.leadId]);return t.filter(y=>b.has(y.id)&&y.isTrackingEnabled)},[t,n,d]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Tracking Dashboard"}),e.jsx("p",{className:"text-subtle mt-1",children:"Monitor employee activity and productivity."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-surface rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Date Range"}),e.jsxs("select",{value:i,onChange:v=>l(v.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Team"}),e.jsxs("select",{value:d,onChange:v=>{u(v.target.value),f("all")},className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Teams"}),n.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Employee"}),e.jsxs("select",{value:m,onChange:v=>f(v.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Employees"}),g.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(tr,{title:"Active Employees",value:x.trackedUsersCount.toString(),subtext:"Based on filters",icon:e.jsx(V.Team,{className:"h-6 w-6 text-blue-400"})}),e.jsx(tr,{title:"Total Hours Logged",value:`${x.totalHours.toFixed(2)}h`,subtext:"Based on filters",icon:e.jsx(V.Activity,{className:"h-6 w-6 text-purple-400"})}),e.jsx(tr,{title:"Avg. Session Duration",value:s3(x.avgSessionDuration),subtext:"Based on filters",icon:e.jsx(V.Tasks,{className:"h-6 w-6 text-green-400"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(aX,{users:t,onToggleTracking:a})}),e.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-lg shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-muted",children:e.jsx("h3",{className:"font-semibold text-on-surface",children:"Recent Sessions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Login Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Logout Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Duration"})]})}),e.jsxs("tbody",{className:"divide-y divide-muted",children:[p.map(v=>{const b=t.find(y=>y.id===v.userId);return b?e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:b.avatar,alt:b.name,className:"h-8 w-8 rounded-full"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-on-surface",children:b.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-subtle",children:new Date(v.loginTime).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-subtle",children:v.logoutTime?new Date(v.logoutTime).toLocaleString():e.jsx("span",{className:"text-green-400 font-semibold",children:"Online"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-on-surface",children:s3(v.durationMs)})]},v.id):null}),p.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-8 text-subtle",children:"No session data matches the current filters."})})]})]})})]})]})]})},Bn=({title:t,children:r})=>{const[n,a]=w.useState(!1);return e.jsxs("div",{className:"bg-surface rounded-lg shadow-lg border border-muted",children:[e.jsxs("button",{onClick:()=>a(!n),className:"w-full flex justify-between items-center p-4 text-left font-bold text-lg",children:[t,e.jsx("span",{className:`transform transition-transform ${n?"rotate-180":""}`,children:""})]}),n&&e.jsx("div",{className:"p-4 border-t border-muted",children:r})]})},at=({label:t,children:r,description:n})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:t}),r,n&&e.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),iX=t=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),Hl=({label:t,src:r,alt:n,onSrcChange:a,onAltChange:s,recommendedSize:i})=>{const l=w.useRef(null),d=async u=>{if(u.target.files&&u.target.files[0]){const m=await iX(u.target.files[0]);a(m)}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:t}),e.jsxs("div",{className:"flex items-center gap-4",children:[r&&e.jsx("img",{src:r,alt:"Preview",className:"w-24 h-24 object-cover rounded-md bg-muted"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("input",{type:"file",ref:l,onChange:d,accept:"image/*",className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>l.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Upload Image"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:i})]})]}),e.jsx(at,{label:"Image Alt Text",children:e.jsx("input",{type:"text",value:n,onChange:u=>s(u.target.value),className:"w-full bg-background border border-muted p-1 rounded"})})]})},oX=({content:t,onSave:r})=>{const[n,a]=w.useState(t),s=(u,m,f)=>{a(p=>({...p,[u]:{...p[u],[m]:f}}))},i=(u,m,f,p,x)=>{const g=x||"items";a(v=>{const b=[...v[u][g]];return b[m]={...b[m],[f]:p},{...v,[u]:{...v[u],[g]:b}}})},l=u=>{a(m=>{const f=crypto.randomUUID();let p,x="items";u==="features"&&(p={id:f,title:"New Feature",description:"",image:{src:"",alt:""}}),u==="testimonials"&&(p={id:f,quote:"",author:"",company:"",avatar:{src:"",alt:""}}),u==="faq"&&(p={id:f,q:"New Question?",a:""}),u==="contactForm"&&(x="fields",p={id:f,label:"New Field",type:"text",required:!1}),u==="chatbot"&&(x="questions",p={id:f,question:"New Question?",crmField:"name"}),u==="howItWorks"&&(x="steps",p={id:f,icon:"Connect",title:"New Step",description:""}),(u==="integrations"||u==="trustedBy")&&(x="logos",p={src:"",alt:"",name:"New Logo"}),u==="footer"&&(x="columns",p={title:"New Column",links:[]}),u==="funnel"&&(x="stages",p={name:"New Stage",value:0});const g=[...m[u][x],p];return{...m,[u]:{...m[u],[x]:g}}})},d=(u,m,f)=>{const p=f||"items";a(x=>{const g=x[u][p].filter((v,b)=>b!==m);return{...x,[u]:{...x[u],[p]:g}}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Homepage Content Management"}),e.jsx("button",{onClick:()=>r(n),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Changes"})]}),e.jsx(Bn,{title:"Login Page",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Title",children:e.jsx("input",{type:"text",value:n.loginPage.title,onChange:u=>s("loginPage","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Subtitle",children:e.jsx("textarea",{value:n.loginPage.subtitle,onChange:u=>s("loginPage","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"CTA Text",children:e.jsx("input",{type:"text",value:n.loginPage.cta,onChange:u=>s("loginPage","cta",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),e.jsx(Hl,{label:"Login Image",src:n.loginPage.image.src,alt:n.loginPage.image.alt,onSrcChange:u=>a(m=>({...m,loginPage:{...m.loginPage,image:{...m.loginPage.image,src:u}}})),onAltChange:u=>a(m=>({...m,loginPage:{...m.loginPage,image:{...m.loginPage.image,alt:u}}})),recommendedSize:"Recommended: 1024x768px"})]})}),e.jsx(Bn,{title:"Hero Section",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(at,{label:"Main Title",children:e.jsx("input",{type:"text",value:n.hero.title,onChange:u=>s("hero","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Gradient Title",children:e.jsx("input",{type:"text",value:n.hero.gradientTitle,onChange:u=>s("hero","gradientTitle",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"CTA Button 1 Text",children:e.jsx("input",{type:"text",value:n.hero.cta1,onChange:u=>s("hero","cta1",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"CTA Button 2 Text",children:e.jsx("input",{type:"text",value:n.hero.cta2,onChange:u=>s("hero","cta2",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(at,{label:"Subtitle",children:e.jsx("textarea",{value:n.hero.subtitle,onChange:u=>s("hero","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})})})]})}),e.jsx(Bn,{title:"Trusted By Logos",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.trustedBy.title,onChange:u=>s("trustedBy","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),n.trustedBy.logos.map((u,m)=>e.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Logo ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("trustedBy",m,"logos"),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsx(at,{label:"Logo Name",children:e.jsx("input",{type:"text",value:u.name,onChange:f=>i("trustedBy",m,"name",f.target.value,"logos"),className:"w-full bg-background border border-muted p-1 rounded"})}),e.jsx(Hl,{label:"Logo Image",src:u.src,alt:u.alt,onSrcChange:f=>i("trustedBy",m,"src",f,"logos"),onAltChange:f=>i("trustedBy",m,"alt",f,"logos"),recommendedSize:"Recommended: 200x48px"})]},m)),e.jsx("button",{type:"button",onClick:()=>l("trustedBy"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Logo"})]})}),e.jsx(Bn,{title:"How It Works Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.howItWorks.title,onChange:u=>s("howItWorks","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Section Subtitle",children:e.jsx("textarea",{value:n.howItWorks.subtitle,onChange:u=>s("howItWorks","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),n.howItWorks.steps.map((u,m)=>e.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Step ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("howItWorks",m,"steps"),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsx(at,{label:"Title",children:e.jsx("input",{type:"text",value:u.title,onChange:f=>i("howItWorks",m,"title",f.target.value,"steps"),className:"w-full bg-background border border-muted p-1 rounded"})}),e.jsx(at,{label:"Description",children:e.jsx("textarea",{value:u.description,onChange:f=>i("howItWorks",m,"description",f.target.value,"steps"),rows:2,className:"w-full bg-background border border-muted p-1 rounded"})}),e.jsx(at,{label:"Icon",children:e.jsxs("select",{value:u.icon,onChange:f=>i("howItWorks",m,"icon",f.target.value,"steps"),className:"w-full bg-background border border-muted p-1 rounded",children:[e.jsx("option",{value:"Connect",children:"Connect"}),e.jsx("option",{value:"AutomateSteps",children:"Automate"}),e.jsx("option",{value:"Grow",children:"Grow"})]})})]},u.id)),e.jsx("button",{type:"button",onClick:()=>l("howItWorks"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Step"})]})}),e.jsx(Bn,{title:"Features Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.features.title,onChange:u=>s("features","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Section Subtitle",children:e.jsx("textarea",{value:n.features.subtitle,onChange:u=>s("features","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx("h4",{className:"font-semibold pt-2",children:"Feature Items"}),n.features.items.map((u,m)=>e.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Feature ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("features",m),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsx(at,{label:"Title",children:e.jsx("input",{type:"text",value:u.title,onChange:f=>i("features",m,"title",f.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Description",children:e.jsx("textarea",{value:u.description,onChange:f=>i("features",m,"description",f.target.value,"items"),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Hl,{label:"Feature Image",src:u.image.src,alt:u.image.alt,onSrcChange:f=>i("features",m,"image",{...u.image,src:f},"items"),onAltChange:f=>i("features",m,"image",{...u.image,alt:f},"items"),recommendedSize:"Recommended: 800x600px"})]},u.id)),e.jsx("button",{type:"button",onClick:()=>l("features"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Feature"})]})}),e.jsx(Bn,{title:"Integrations Showcase",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.integrations.title,onChange:u=>s("integrations","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Section Subtitle",children:e.jsx("textarea",{value:n.integrations.subtitle,onChange:u=>s("integrations","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),n.integrations.logos.map((u,m)=>e.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Logo ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("integrations",m,"logos"),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsx(at,{label:"Logo Name",children:e.jsx("input",{type:"text",value:u.name,onChange:f=>i("integrations",m,"name",f.target.value,"logos"),className:"w-full bg-background border border-muted p-1 rounded"})}),e.jsx(Hl,{label:"Logo Image",src:u.src,alt:u.alt,onSrcChange:f=>i("integrations",m,"src",f,"logos"),onAltChange:f=>i("integrations",m,"alt",f,"logos"),recommendedSize:"Recommended: 200x48px"})]},m)),e.jsx("button",{type:"button",onClick:()=>l("integrations"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Logo"})]})}),e.jsx(Bn,{title:"Sales Funnel Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.funnel.title,onChange:u=>s("funnel","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Section Subtitle",children:e.jsx("textarea",{value:n.funnel.subtitle,onChange:u=>s("funnel","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx("h4",{className:"font-semibold pt-2",children:"Funnel Stages"}),n.funnel.stages.map((u,m)=>e.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Stage ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("funnel",m,"stages"),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(at,{label:"Stage Name",children:e.jsx("input",{type:"text",value:u.name,onChange:f=>i("funnel",m,"name",f.target.value,"stages"),className:"w-full bg-background border border-muted p-1 rounded"})}),e.jsx(at,{label:"Value (Number of Leads)",children:e.jsx("input",{type:"number",value:u.value,onChange:f=>i("funnel",m,"value",Number(f.target.value),"stages"),className:"w-full bg-background border border-muted p-1 rounded"})})]})]},m)),e.jsx("button",{type:"button",onClick:()=>l("funnel"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Stage"})]})}),e.jsx(Bn,{title:"Testimonials Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Section Title",children:e.jsx("input",{type:"text",value:n.testimonials.title,onChange:u=>s("testimonials","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),n.testimonials.items.map((u,m)=>e.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold",children:["Testimonial ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("testimonials",m),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsx(at,{label:"Quote",children:e.jsx("textarea",{value:u.quote,onChange:f=>i("testimonials",m,"quote",f.target.value,"items"),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Author",children:e.jsx("input",{type:"text",value:u.author,onChange:f=>i("testimonials",m,"author",f.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Company",children:e.jsx("input",{type:"text",value:u.company,onChange:f=>i("testimonials",m,"company",f.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Hl,{label:"Avatar",src:u.avatar.src,alt:u.avatar.alt,onSrcChange:f=>i("testimonials",m,"avatar",{...u.avatar,src:f},"items"),onAltChange:f=>i("testimonials",m,"avatar",{...u.avatar,alt:f},"items"),recommendedSize:"Recommended: 128x128px"})]},u.id)),e.jsx("button",{type:"button",onClick:()=>l("testimonials"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Testimonial"})]})}),e.jsx(Bn,{title:"Contact Form Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Title",children:e.jsx("input",{type:"text",value:n.contactForm.title,onChange:u=>s("contactForm","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Subtitle",children:e.jsx("textarea",{value:n.contactForm.subtitle,onChange:u=>s("contactForm","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Webhook URL",children:e.jsx("input",{type:"url",value:n.contactForm.webhookUrl,onChange:u=>s("contactForm","webhookUrl",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Address",children:e.jsx("input",{type:"text",value:n.contactForm.address,onChange:u=>s("contactForm","address",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Email",children:e.jsx("input",{type:"email",value:n.contactForm.email,onChange:u=>s("contactForm","email",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Phone",children:e.jsx("input",{type:"tel",value:n.contactForm.phone,onChange:u=>s("contactForm","phone",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Map Embed URL",children:e.jsx("textarea",{value:n.contactForm.mapSrc,onChange:u=>s("contactForm","mapSrc",u.target.value),rows:4,className:"w-full bg-background border border-muted p-2 rounded font-mono text-xs"})}),e.jsx("h4",{className:"font-semibold pt-2",children:"Form Fields"}),n.contactForm.fields.map((u,m)=>e.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2 bg-background",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h5",{className:"font-semibold text-sm",children:["Field ",m+1]}),e.jsx("button",{type:"button",onClick:()=>d("contactForm",m,"fields"),className:"text-red-500",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(at,{label:"Label",children:e.jsx("input",{type:"text",value:u.label,onChange:f=>i("contactForm",m,"label",f.target.value,"fields"),className:"w-full bg-surface border-muted p-1 rounded"})}),e.jsx(at,{label:"Type",children:e.jsxs("select",{value:u.type,onChange:f=>i("contactForm",m,"type",f.target.value,"fields"),className:"w-full bg-surface border-muted p-1 rounded",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"textarea",children:"Textarea"})]})})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:u.required,onChange:f=>i("contactForm",m,"required",f.target.checked,"fields")})," Required"]})]},u.id)),e.jsx("button",{type:"button",onClick:()=>l("contactForm"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Field"})]})}),e.jsx(Bn,{title:"Final CTA Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Title",children:e.jsx("input",{type:"text",value:n.finalCta.title,onChange:u=>s("finalCta","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Subtitle",children:e.jsx("input",{type:"text",value:n.finalCta.subtitle,onChange:u=>s("finalCta","subtitle",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"CTA Button Text",children:e.jsx("input",{type:"text",value:n.finalCta.cta,onChange:u=>s("finalCta","cta",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]})}),e.jsx(Bn,{title:"Footer",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(at,{label:"Company Description",children:e.jsx("textarea",{value:n.footer.description,onChange:u=>s("footer","description",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(at,{label:"Company Address",children:e.jsx("textarea",{value:n.footer.address,onChange:u=>s("footer","address",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})})]})})]})},ro=({label:t,children:r,description:n})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:t}),r,n&&e.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),lX=t=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),cX=({label:t,src:r,alt:n,onSrcChange:a,onAltChange:s,recommendedSize:i})=>{const l=w.useRef(null),d=async u=>{if(u.target.files&&u.target.files[0]){const m=await lX(u.target.files[0]);a(m)}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:t}),e.jsxs("div",{className:"flex items-center gap-4",children:[r?e.jsx("img",{src:r,alt:"Preview",className:"w-24 h-16 object-cover rounded-md bg-muted"}):e.jsx("div",{className:"w-24 h-16 bg-muted rounded-md"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("input",{type:"file",ref:l,onChange:d,accept:"image/*",className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>l.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Upload Image"}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:i})]})]}),e.jsx(ro,{label:"Image Alt Text",children:e.jsx("input",{type:"text",value:n,onChange:u=>s(u.target.value),className:"w-full bg-background border border-muted p-1 rounded"})})]})},U0=({title:t,children:r,initiallyOpen:n=!1})=>e.jsxs("details",{className:"bg-surface rounded-lg border border-muted",open:n,children:[e.jsxs("summary",{className:"font-semibold text-on-surface p-4 cursor-pointer flex justify-between items-center list-none",children:[t,e.jsx(V.ChevronRight,{className:"h-5 w-5 transform transition-transform details-open:rotate-90"})]}),e.jsx("div",{className:"p-4 border-t border-muted space-y-4",children:r})]}),dX=({value:t,onChange:r})=>{const n=w.useRef(null),[a,s]=w.useState(!1),[i,l]=w.useState(""),{addToast:d}=ed(),u=(p,x=null)=>{document.execCommand(p,!1,x),n.current?.focus()},m=()=>{s(!0)},f=p=>{p.preventDefault(),i.trim()&&(u("createLink",i.trim()),l(""),s(!1),d({type:"success",title:"Link Added",message:"Link has been successfully added to the selected text."}))};return e.jsxs("div",{className:"bg-surface rounded-lg border border-muted flex flex-col flex-grow min-h-[600px]",children:[e.jsxs("div",{className:"p-2 border-b border-muted flex gap-1 flex-wrap flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>u("bold"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"B"}),e.jsx("button",{type:"button",onClick:()=>u("italic"),className:"p-1 rounded hover:bg-muted text-sm italic w-8 h-8",children:"I"}),e.jsx("button",{type:"button",onClick:()=>u("underline"),className:"p-1 rounded hover:bg-muted text-sm underline w-8 h-8",children:"U"}),e.jsx("button",{type:"button",onClick:()=>u("strikeThrough"),className:"p-1 rounded hover:bg-muted text-sm line-through w-8 h-8",children:"S"}),e.jsx("div",{className:"w-px bg-muted mx-1"}),e.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h1>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H1"}),e.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h2>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h3>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h4>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H4"}),e.jsx("div",{className:"w-px bg-muted mx-1"}),e.jsx("button",{type:"button",onClick:()=>u("insertUnorderedList"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:e.jsx(V.ListUl,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>u("insertOrderedList"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:e.jsx(V.ListOl,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>u("formatBlock","<blockquote>"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:e.jsx(V.Quote,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px bg-muted mx-1"}),e.jsx("button",{type:"button",onClick:m,className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:e.jsx(V.Link,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:n,contentEditable:!0,suppressContentEditableWarning:!0,onInput:p=>r(p.currentTarget.innerHTML),className:"w-full h-full p-4 bg-transparent focus:outline-none resize-none prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t}}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface rounded-lg p-6 w-96 max-w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Add Link"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"linkUrl",className:"block text-sm font-medium text-subtle mb-2",children:"URL"}),e.jsx("input",{type:"url",id:"linkUrl",value:i,onChange:p=>l(p.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{s(!1),l("")},className:"px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors",children:"Add Link"})]})]})]})})]})},uX=({post:t,users:r,onSave:n,onClose:a})=>{const[s,i]=w.useState(t||{title:"",slug:"",excerpt:"",content:"",tags:[],authorId:r.find(p=>p.role!=="Super Admin")?.id,featuredImage:{src:"",alt:""},seo:{title:"",description:""},focusKeyword:""}),[l,d]=w.useState("Saved"),u=(p,x)=>{let g=s.slug;p==="title"&&!t&&!s.slug&&(g=x.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),i(v=>({...v,[p]:x,slug:g,seo:{...v.seo,title:p==="title"?x:v.seo?.title}}))},m=p=>{i(x=>({...x,content:p}))},f=()=>{d("Saving...");const p={...s,id:s.id||crypto.randomUUID(),publishedAt:s.publishedAt||new Date().toISOString()};n(p),setTimeout(()=>d("Saved"),500)};return w.useEffect(()=>{d("Unsaved changes");const p=setTimeout(()=>{},2e3);return()=>clearTimeout(p)},[s]),e.jsxs("div",{className:"bg-background text-on-surface h-full flex flex-col",children:[e.jsxs("header",{className:"flex-shrink-0 bg-surface border-b border-muted p-4 flex justify-between items-center",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-sm font-semibold text-subtle hover:text-on-surface",children:[e.jsx(V.ChevronRight,{className:"h-5 w-5 rotate-180"})," Back to Blog List"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm text-subtle italic",children:l}),e.jsx("button",{onClick:f,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Publish"})]})]}),e.jsxs("main",{className:"flex-1 grid grid-cols-1 lg:grid-cols-[1fr_400px] gap-6 p-6 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto pr-2",children:[e.jsx(ro,{label:"Post Title",children:e.jsx("input",{type:"text",value:s.title,onChange:p=>u("title",p.target.value),required:!0,className:"w-full bg-surface border border-muted p-3 rounded-lg text-lg font-semibold"})}),e.jsx(dX,{value:s.content||"",onChange:m})]}),e.jsxs("aside",{className:"space-y-4 overflow-y-auto pr-2",children:[e.jsxs(U0,{title:"Publish",initiallyOpen:!0,children:[e.jsx(ro,{label:"Status",children:e.jsxs("select",{className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Published"})]})}),e.jsx(ro,{label:"Publish Date",children:e.jsx("input",{type:"datetime-local",className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx("p",{className:"text-xs text-subtle hover:underline cursor-pointer",children:"Revisions (3)"})]}),e.jsx(U0,{title:"Featured Image",children:e.jsx(cX,{label:"",src:s.featuredImage?.src||"",alt:s.featuredImage?.alt||"",onSrcChange:p=>i(x=>({...x,featuredImage:{...x.featuredImage,src:p}})),onAltChange:p=>i(x=>({...x,featuredImage:{...x.featuredImage,alt:p}})),recommendedSize:"1200x630px for social"})}),e.jsxs(U0,{title:"Tags & Excerpt",children:[e.jsx(ro,{label:"Tags",children:e.jsx("input",{type:"text",value:Array.isArray(s.tags)?s.tags.join(", "):"",onChange:p=>i({...s,tags:p.target.value.split(",").map(x=>x.trim())}),className:"w-full bg-background border border-muted p-2 rounded",placeholder:"sales, crm, growth"})}),e.jsx(ro,{label:"Excerpt",children:e.jsx("textarea",{value:s.excerpt,onChange:p=>u("excerpt",p.target.value),rows:4,className:"w-full bg-background border border-muted p-2 rounded"})})]})]})]})]})},mX=({data:t,onSave:r})=>{const[n,a]=w.useState(t),s=()=>{r(n),alert("Pricing page data saved!")},i=(x,g)=>{a(v=>v.map(b=>b.id===x?{...b,category:g}:b))},l=()=>{const x={id:crypto.randomUUID(),category:"New Category",features:[]};a(g=>[...g,x])},d=x=>{window.confirm("Are you sure you want to delete this entire category and all its features?")&&a(g=>g.filter(v=>v.id!==x))},u=(x,g,v,b)=>{a(y=>y.map(S=>S.id===x?{...S,features:S.features.map(C=>C.id===g?{...C,[v]:b}:C)}:S))},m=(x,g,v,b)=>{a(y=>y.map(S=>S.id===x?{...S,features:S.features.map(C=>C.id===g?{...C,values:{...C.values,[v]:b}}:C)}:S))},f=x=>{const g={id:crypto.randomUUID(),name:"New Feature",description:"",values:{free:"false",basic:"false",pro:"false",enterprise:"false"}};a(v=>v.map(b=>b.id===x?{...b,features:[...b.features,g]}:b))},p=(x,g)=>{a(v=>v.map(b=>b.id===x?{...b,features:b.features.filter(y=>y.id!==g)}:b))};return e.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Pricing Page Feature Comparison"}),e.jsx("button",{onClick:s,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]}),e.jsx("p",{className:"text-sm text-subtle",children:'Manage the detailed feature comparison table shown on the public pricing page. For values, you can enter a string like "5 Users" or "Unlimited", or you can type "true" or "false" to show a checkmark or a cross.'}),e.jsx("div",{className:"space-y-8",children:n.map(x=>e.jsxs("div",{className:"p-4 border border-muted rounded-lg bg-background",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("input",{type:"text",value:x.category,onChange:g=>i(x.id,g.target.value),className:"font-bold text-xl bg-transparent border-b-2 border-muted focus:border-primary-500 focus:outline-none w-full"}),e.jsx("button",{onClick:()=>d(x.id),className:"text-red-500 hover:text-red-400 ml-4",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted text-sm",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/4",children:"Feature"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/4",children:"Description (Tooltip)"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Free"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Basic"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Pro"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Enterprise"}),e.jsx("th",{className:"px-3 py-2 text-right font-semibold text-subtle"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:x.features.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:g.name,onChange:v=>u(x.id,g.id,"name",v.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:g.description,onChange:v=>u(x.id,g.id,"description",v.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})}),["free","basic","pro","enterprise"].map(v=>e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:String(g.values[v]),onChange:b=>m(x.id,g.id,v,b.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})},v)),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>p(x.id,g.id),className:"text-red-500 hover:text-red-400 p-1",children:e.jsx(V.Delete,{className:"h-4 w-4"})})})]},g.id))})]})}),e.jsx("button",{onClick:()=>f(x.id),className:"text-sm font-semibold text-primary-500 mt-3",children:"+ Add Feature"})]},x.id))}),e.jsxs("button",{onClick:l,className:"font-semibold text-primary-500 flex items-center gap-2 mt-4",children:[e.jsx(V.Add,{className:"w-5 h-5"})," Add Category"]})]})},fX=({coupon:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{code:"",type:"percentage",value:10,isActive:!0}),i=l=>{l.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:t?.id?"Edit Coupon":"Create Coupon",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Coupon Code"}),e.jsx("input",{type:"text",value:a.code,onChange:l=>s(d=>({...d,code:l.target.value.toUpperCase()})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Type"}),e.jsxs("select",{value:a.type,onChange:l=>s(d=>({...d,type:l.target.value})),className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"percentage",children:"Percentage (%)"}),e.jsx("option",{value:"fixed",children:"Fixed Amount ($)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Value"}),e.jsx("input",{type:"number",value:a.value,onChange:l=>s(d=>({...d,value:Number(l.target.value)})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Expires At (Optional)"}),e.jsx("input",{type:"date",value:a.expiresAt?new Date(a.expiresAt).toISOString().split("T")[0]:"",onChange:l=>s(d=>({...d,expiresAt:l.target.value?new Date(l.target.value).toISOString():void 0})),className:"w-full bg-background border border-muted p-2 rounded"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Coupon"})]})]})})},pX=({coupons:t,onSaveCoupon:r,onDeleteCoupon:n,offerStrip:a,onUpdateOfferStrip:s})=>{const[i,l]=w.useState(!1),[d,u]=w.useState(null),[m,f]=w.useState(a||A3),p=(g=null)=>{u(g),l(!0)},x=()=>{s(m),alert("Offer strip updated!")};return e.jsxs("div",{className:"space-y-8",children:[i&&e.jsx(fX,{coupon:d,onClose:()=>l(!1),onSave:r}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Discount Coupons"}),e.jsxs("button",{onClick:()=>p(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(V.Add,{className:"w-4 h-4"})," New Coupon"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted text-sm",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Value"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Expires"}),e.jsx("th",{className:"px-4 py-2 text-right font-semibold text-subtle"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:t.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-mono font-bold",children:g.code}),e.jsx("td",{className:"px-4 py-2 capitalize",children:g.type}),e.jsx("td",{className:"px-4 py-2",children:g.type==="percentage"?`${g.value}%`:`$${g.value}`}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${g.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-2 text-subtle",children:g.expiresAt?new Date(g.expiresAt).toLocaleDateString():"Never"}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[e.jsx("button",{onClick:()=>p(g),className:"p-1",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n(g.id),className:"p-1",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]},g.id))})]})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Promotional Offer Strip"}),e.jsx("button",{onClick:x,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-3 rounded-lg text-sm",children:"Save"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:m.isEnabled,onChange:g=>f(v=>({...v,isEnabled:g.target.checked}))})," Enable offer strip"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Display Text"}),e.jsx("input",{type:"text",value:m.text,onChange:g=>f(v=>({...v,text:g.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"CTA Text (Optional)"}),e.jsx("input",{type:"text",value:m.ctaText,onChange:g=>f(v=>({...v,ctaText:g.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"CTA Link (Optional)"}),e.jsx("input",{type:"text",value:m.ctaLink,onChange:g=>f(v=>({...v,ctaLink:g.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Auto-disable At (Optional)"}),e.jsx("input",{type:"date",value:m.autoDisableAt?new Date(m.autoDisableAt).toISOString().split("T")[0]:"",onChange:g=>f(v=>({...v,autoDisableAt:g.target.value?new Date(g.target.value).toISOString():void 0})),className:"w-full bg-background border border-muted p-2 rounded"})]})]})]})]})},Ht=({label:t,children:r,description:n})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:t}),r,n&&e.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),W0=({title:t,description:r,children:n,actions:a})=>e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-on-surface",children:t}),r&&e.jsx("p",{className:"text-subtle mt-1 text-sm",children:r})]}),a]}),e.jsx("div",{className:"space-y-4",children:n})]}),gf=({checked:t,onChange:r})=>e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",onClick:n=>{n.preventDefault(),n.stopPropagation(),r(!t)},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:n=>r(n.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]}),hX=({organizations:t,users:r,leads:n,plans:a,tasks:s})=>{const i=t.length,l=r.length,d=n.length,u=w.useMemo(()=>t.reduce((p,x)=>{const g=a.find(v=>v.id===x.subscriptionPlanId);return p+(g?g.price:0)},0),[t,a]),m=w.useMemo(()=>{const p=t.reduce((x,g)=>{const v=a.find(y=>y.id===g.subscriptionPlanId),b=v?v.name:"Unknown";return x[b]=(x[b]||0)+1,x},{});return Object.entries(p).map(([x,g])=>({name:x,value:g}))},[t,a]),f=["#0088FE","#00C49F","#FFBB28","#FF8042"];return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Platform Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(tr,{title:"Total Organizations",value:i.toString(),icon:e.jsx(V.Team,{className:"h-6 w-6 text-blue-400"})}),e.jsx(tr,{title:"Total Users",value:l.toString(),icon:e.jsx(V.Leads,{className:"h-6 w-6 text-purple-400"})}),e.jsx(tr,{title:"Total Leads",value:d.toString(),icon:e.jsx(V.Reports,{className:"h-6 w-6 text-green-400"})}),e.jsx(tr,{title:"Estimated MRR",value:`$${u.toLocaleString()}`,icon:e.jsx(V.Billing,{className:"h-6 w-6 text-orange-400"})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Organizations by Plan"}),e.jsx(Rr,{width:"100%",height:300,children:e.jsxs(xf,{children:[e.jsx(En,{data:m,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:m.map((p,x)=>e.jsx(Hn,{fill:f[x%f.length]},`cell-${x}`))}),e.jsx(Ut,{}),e.jsx(Nn,{})]})})]})})]})},xX=({org:t,plans:r,onClose:n,onSave:a})=>{const[s,i]=w.useState(t||{name:"",code:"",subscriptionPlanId:r[0].id,manuallyAssignedFeatures:[]}),l=["DASHBOARD","REPORTS","TRACKING","LEADS","TASKS","EMAIL","WHATSAPP","SMS","CALLS","AUTOMATION","INTEGRATIONS","USERS","TEAMS","SETTINGS","API_ACCESS"],d=w.useMemo(()=>{const f=r.find(p=>p.id===s.subscriptionPlanId);return f?new Set(f.features):new Set},[s.subscriptionPlanId,r]),u=f=>{i(p=>{if(!p)return p;const x=p.manuallyAssignedFeatures||[],g=x.includes(f)?x.filter(v=>v!==f):[...x,f];return{...p,manuallyAssignedFeatures:g}})},m=f=>{f.preventDefault(),a(s),n()};return e.jsx(it,{isOpen:!0,onClose:n,title:t?.id?"Edit Organization":"Add Organization",children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx(Ht,{label:"Organization Name",children:e.jsx("input",{type:"text",value:s.name,onChange:f=>i(p=>({...p,name:f.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsx(Ht,{label:"Login Code",children:e.jsx("input",{type:"text",value:s.code,onChange:f=>i(p=>({...p,code:f.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsx(Ht,{label:"Subscription Plan",children:e.jsx("select",{value:s.subscriptionPlanId,onChange:f=>i(p=>({...p,subscriptionPlanId:f.target.value})),className:"w-full bg-background border border-muted p-2 rounded",children:r.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))})}),e.jsxs("div",{className:"pt-4 mt-4 border-t border-muted",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Manual Feature Assignment"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Override plan settings by manually enabling or disabling specific features for this organization."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto p-2 bg-background rounded-md",children:l.map(f=>{const p=d.has(f),x=s.manuallyAssignedFeatures?.includes(f);return e.jsxs("label",{className:"flex items-start p-3 bg-surface rounded-lg border border-muted hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>u(f),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 mt-1"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-sm text-on-surface",children:f}),e.jsx("p",{className:`text-xs ${p?"text-green-500":"text-subtle"}`,children:p?"Included in plan":"Not in plan"})]})]},f)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:n,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},gX=({organizations:t,users:r,leads:n,plans:a,onUpdate:s,onDelete:i,onAdd:l})=>{const[d,u]=w.useState(!1),[m,f]=w.useState(null),p=(g=null)=>{f(g),u(!0)},x=g=>{const v=t.find(b=>b.id===g);if(v){const b=new Date;b.setFullYear(b.getFullYear()+1),s({...v,subscriptionExpiresAt:b.toISOString()})}};return e.jsxs("div",{className:"space-y-6",children:[d&&e.jsx(xX,{org:m,plans:a,onClose:()=>u(!1),onSave:m?.id?s:l}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Organizations"}),e.jsxs("button",{onClick:()=>p(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[e.jsx(V.Add,{className:"w-5 h-5"})," Add Organization"]})]}),e.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Plan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Users"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Subscription"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:t.map(g=>{const v=a.find(S=>S.id===g.subscriptionPlanId),b=r.filter(S=>S.organizationId===g.id).length,y=new Date(g.subscriptionExpiresAt)<new Date;return e.jsxs("tr",{className:y?"bg-red-500/5":"",children:[e.jsx("td",{className:"px-6 py-4 font-semibold",children:g.name}),e.jsx("td",{className:"px-6 py-4",children:v?.name}),e.jsx("td",{className:"px-6 py-4",children:b}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:y?"Expired":"Active"}),e.jsxs("p",{className:"text-xs text-subtle mt-1",children:[y?"Ended on":"Ends on"," ",new Date(g.subscriptionExpiresAt).toLocaleDateString()]})]}),e.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(g),className:"p-1 text-subtle hover:text-on-surface",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>i(g.id),className:"p-1 text-subtle hover:text-red-400",children:e.jsx(V.Delete,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(g.id),disabled:!y,className:"text-sm bg-blue-500/20 text-blue-400 font-semibold py-1 px-2 rounded-md hover:bg-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Renew"})]})]},g.id)})})]})})]})},bX=({inquiries:t,setInquiries:r})=>{const[n,a]=w.useState("ALL"),[s,i]=w.useState("ALL"),[l,d]=w.useState(""),[u,m]=w.useState(""),[f,p]=w.useState(""),[x,g]=w.useState(new Set),v=(T,N)=>{r(O=>O.map(E=>E.id===T?{...E,status:N}:E))},b=w.useMemo(()=>t.filter(T=>n==="ALL"||T.status===n).filter(T=>s==="ALL"||T.type===s).filter(T=>{if(!l&&!u)return!0;const N=new Date(T.createdAt);return!(l&&N<new Date(l)||u&&N>new Date(new Date(u).setHours(23,59,59,999)))}).filter(T=>{if(!f.trim())return!0;const N=f.toLowerCase();return T.name.toLowerCase().includes(N)||T.email.toLowerCase().includes(N)||T.phone&&T.phone.includes(N)||T.company&&T.company.toLowerCase().includes(N)||T.message.toLowerCase().includes(N)}).sort((T,N)=>new Date(N.createdAt).getTime()-new Date(T.createdAt).getTime()),[t,n,s,l,u,f]),y=T=>{T.target.checked?g(new Set(b.map(N=>N.id))):g(new Set)},S=T=>{g(N=>{const O=new Set(N);return O.has(T)?O.delete(T):O.add(T),O})},C=()=>{const T=b.filter(P=>x.has(P.id));if(T.length===0){alert("Please select inquiries to export.");return}let N="data:text/csv;charset=utf-8,";N+=`ID,Type,Name,Email,Phone,Company,Message,CreatedAt,Status
`,T.forEach(P=>{const I=[P.id,P.type,P.name,P.email,P.phone||"",P.company||"",`"${P.message.replace(/"/g,'""')}"`,P.createdAt,P.status].join(",");N+=I+`\r
`});const O=encodeURI(N),E=document.createElement("a");E.setAttribute("href",O),E.setAttribute("download","inquiries.csv"),document.body.appendChild(E),E.click(),document.body.removeChild(E)},k=Object.values(C3);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Lead Inquiries"}),e.jsxs("button",{onClick:C,disabled:x.size===0,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 disabled:opacity-50",children:[e.jsx(V.Export,{className:"w-5 h-5"})," Export Selected (",x.size,")"]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ht,{label:"Status",children:e.jsxs("select",{value:n,onChange:T=>a(T.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"ALL",children:"All Statuses"}),k.map(T=>e.jsx("option",{value:T,children:T},T))]})}),e.jsx(Ht,{label:"Type",children:e.jsxs("select",{value:s,onChange:T=>i(T.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"ALL",children:"All Types"}),e.jsx("option",{value:"Contact Form",children:"Contact Form"}),e.jsx("option",{value:"Chatbot",children:"Chatbot"})]})}),e.jsx(Ht,{label:"Start Date",children:e.jsx("input",{type:"date",value:l,onChange:T=>d(T.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Ht,{label:"End Date",children:e.jsx("input",{type:"date",value:u,onChange:T=>m(T.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),e.jsx("div",{children:e.jsx(Ht,{label:"Search",children:e.jsx("input",{type:"text",value:f,onChange:T=>p(T.target.value),placeholder:"Search by name, email, phone, message...",className:"w-full bg-background border border-muted p-2 rounded"})})})]}),e.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:e.jsx("input",{type:"checkbox",onChange:y,checked:x.size>0&&x.size===b.length})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:b.map(T=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:x.has(T.id),onChange:()=>S(T.id)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle whitespace-nowrap",children:new Date(T.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:T.type}),e.jsx("td",{className:"px-6 py-4 font-semibold",children:T.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:T.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:T.phone||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle max-w-xs truncate",title:T.message,children:T.message}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:T.status,onChange:N=>v(T.id,N.target.value),className:"bg-background border border-muted p-1 rounded-md text-sm",children:k.map(N=>e.jsx("option",{value:N,children:N},N))})})]},T.id))})]})})]})},vX=({plans:t,onSave:r,onDelete:n})=>{const[a,s]=w.useState(t),i=(m,f,p)=>{s(x=>x.map(g=>g.id===m?{...g,[f]:p}:g))},l=(m,f)=>{s(p=>p.map(x=>{if(x.id===m){const g=x.features.includes(f)?x.features.filter(v=>v!==f):[...x.features,f];return{...x,features:g}}return x}))},d=()=>{a.forEach(m=>r(m)),alert("Plans saved!")},u=["DASHBOARD","REPORTS","TRACKING","LEADS","TASKS","EMAIL","WHATSAPP","SMS","CALLS","AUTOMATION","INTEGRATIONS","USERS","TEAMS","SETTINGS","API_ACCESS"];return e.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Subscription Plans"}),e.jsx("button",{onClick:d,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Changes"})]}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 items-start",children:a.map(m=>e.jsxs("div",{className:"bg-background p-6 rounded-xl border border-muted/50 space-y-4",children:[e.jsx("input",{type:"text",value:m.name,onChange:f=>i(m.id,"name",f.target.value),className:"w-full bg-surface border border-muted p-2 rounded-lg text-lg font-bold"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ht,{label:"Monthly Price ($)",children:e.jsx("input",{type:"number",value:m.price,onChange:f=>i(m.id,"price",Number(f.target.value)),className:"w-full bg-surface border border-muted p-2 rounded"})}),e.jsx(Ht,{label:"User Limit",children:e.jsx("input",{type:"number",value:m.userLimit,onChange:f=>i(m.id,"userLimit",Number(f.target.value)),className:"w-full bg-surface border border-muted p-2 rounded"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Features"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto pr-2",children:u.map(f=>e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.features.includes(f),onChange:()=>l(m.id,f),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),f]},f))})]})]},m.id))})]})},yX=({addon:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{name:"",description:"",monthlyPrice:0,featureTag:""}),i=l=>{l.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:t?.id?"Edit Addon":"New Addon",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx(Ht,{label:"Name",children:e.jsx("input",{type:"text",value:a.name,onChange:l=>s(d=>({...d,name:l.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsx(Ht,{label:"Description",children:e.jsx("textarea",{value:a.description,onChange:l=>s(d=>({...d,description:l.target.value})),rows:3,className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsx(Ht,{label:"Monthly Price ($)",children:e.jsx("input",{type:"number",value:a.monthlyPrice,onChange:l=>s(d=>({...d,monthlyPrice:Number(l.target.value)})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsx(Ht,{label:"Feature Tag",children:e.jsx("input",{type:"text",value:a.featureTag,onChange:l=>s(d=>({...d,featureTag:l.target.value.toUpperCase()})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},jX=({addons:t,onSave:r,onDelete:n})=>{const[a,s]=w.useState(!1),[i,l]=w.useState(null),d={AI_FEATURES:e.jsx(V.Sparkles,{className:"h-8 w-8 text-purple-400"}),WHATSAPP:e.jsx(V.Whatsapp,{className:"h-8 w-8 text-green-400"}),ADVANCED_ANALYTICS:e.jsx(V.Analytics,{className:"h-8 w-8 text-blue-400"}),WHITE_LABEL:e.jsx(V.Globe,{className:"h-8 w-8 text-orange-400"})};return e.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[a&&e.jsx(yX,{addon:i,onClose:()=>s(!1),onSave:r}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Add-ons"}),e.jsx("button",{onClick:()=>{l(null),s(!0)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"New Addon"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:t.map(u=>e.jsxs("div",{className:"bg-background p-6 rounded-xl border border-muted/50 text-center flex flex-col items-center",children:[e.jsx("div",{className:"p-4 bg-muted rounded-full",children:d[u.featureTag]||e.jsx(V.Bolt,{className:"h-8 w-8"})}),e.jsx("h3",{className:"font-bold text-lg mt-4",children:u.name}),e.jsx("p",{className:"text-subtle text-sm mt-1 flex-grow",children:u.description}),e.jsxs("p",{className:"text-3xl font-bold mt-4",children:["$",u.monthlyPrice,e.jsx("span",{className:"text-base font-normal text-subtle",children:"/mo"})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{l(u),s(!0)},className:"text-sm font-semibold text-primary-500",children:"Edit"}),e.jsx("button",{onClick:()=>n(u.id),className:"text-sm font-semibold text-red-500",children:"Delete"})]})]},u.id))})]})},wX=({settings:t,onSave:r,onUpdatePaymentGatewaySettings:n})=>{const a=[{provider:"stripe",name:"Stripe",config:{apiKey:"",apiSecret:""},isEnabled:!1},{provider:"razorpay",name:"Razorpay",config:{apiKey:"",apiSecret:""},isEnabled:!1},{provider:"paypal",name:"PayPal",config:{clientId:"",clientSecret:""},isEnabled:!1},{provider:"payu",name:"PayU",config:{merchantKey:"",merchantSalt:""},isEnabled:!1},{provider:"paytm",name:"Paytm",config:{merchantId:"",merchantKey:""},isEnabled:!1},{provider:"square",name:"Square",config:{applicationId:"",accessToken:""},isEnabled:!1},{provider:"braintree",name:"Braintree",config:{merchantId:"",publicKey:"",privateKey:""},isEnabled:!1},{provider:"adyen",name:"Adyen",config:{apiKey:"",merchantAccount:""},isEnabled:!1},{provider:"authorize.net",name:"Authorize.net",config:{apiLoginId:"",transactionKey:""},isEnabled:!1}],[s,i]=w.useState(t.length>0?t:a),[l,d]=w.useState(null),u=s.find(k=>k.provider===l);w.useEffect(()=>{t.length>0&&i(t)},[t]);const[m,f]=w.useState(null),p=async()=>{try{f(null),await r(s),f({show:!0,success:!0,message:"Payment gateway settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch{f({show:!0,success:!1,message:"Failed to save payment gateway settings. Please try again."})}},x=async(k,T)=>{i(N=>N.map(O=>O.provider===k?{...O,isEnabled:T}:O));try{const N=s.find(O=>O.provider===k);if(N){const O={...N,isEnabled:T};await Le.updateSuperAdminPaymentGatewaySettingByProvider(k,O),i(E=>E.map(P=>P.provider===k?O:P)),n(s.map(E=>E.provider===k?O:E))}}catch(N){console.error("Failed to update payment gateway status:",N),i(O=>O.map(E=>E.provider===k?{...E,isEnabled:!T}:E)),alert("Failed to update payment gateway status. Please try again.")}},g=k=>{i(T=>T.map(N=>N.provider===k.provider?k:N)),d(null)},[v,b]=w.useState(null),y=async k=>{try{const T=await Le.testSuperAdminPaymentGateway(k);if(T.success)b({show:!0,success:!0,message:"Test payment completed successfully!",transactionId:T.transactionId,provider:k});else{const N=T.error&&(T.error.includes("not configured")||T.error.includes("not set")||T.error.includes("missing"));b({show:!0,success:!1,message:N?`Configuration Required: ${T.error}. Please configure the ${k} payment gateway credentials first.`:T.error||"Test payment failed. Please check your configuration.",provider:k})}}catch(T){console.error("Test payment error:",T),b({show:!0,success:!1,message:"Test payment failed. Please check your configuration.",provider:k})}},S=k=>({stripe:{apiKey:"Publishable Key",apiSecret:"Secret Key"},razorpay:{apiKey:"Key ID",apiSecret:"Key Secret"},paypal:{clientId:"Client ID",clientSecret:"Client Secret"},payu:{merchantKey:"Merchant Key",merchantSalt:"Merchant Salt"},paytm:{merchantId:"Merchant ID",merchantKey:"Merchant Key"},square:{applicationId:"Application ID",accessToken:"Access Token"},braintree:{merchantId:"Merchant ID",publicKey:"Public Key",privateKey:"Private Key"},adyen:{apiKey:"API Key",merchantAccount:"Merchant Account"},"authorize.net":{apiLoginId:"API Login ID",transactionKey:"Transaction Key"}})[k]||{},C={stripe:"https://cdn.worldvectorlogo.com/logos/stripe-4.svg",razorpay:"https://cdn.worldvectorlogo.com/logos/razorpay.svg",paypal:"https://cdn.worldvectorlogo.com/logos/paypal-3.svg",payu:"https://cdn.worldvectorlogo.com/logos/payu.svg",paytm:"https://cdn.worldvectorlogo.com/logos/paytm.svg",square:"https://cdn.worldvectorlogo.com/logos/square-3.svg",braintree:"https://cdn.worldvectorlogo.com/logos/braintree.svg",adyen:"https://cdn.worldvectorlogo.com/logos/adyen.svg","authorize.net":"https://cdn.worldvectorlogo.com/logos/authorize-net.svg"};return e.jsxs("div",{className:"space-y-8",children:[l&&u&&e.jsxs(it,{isOpen:!0,onClose:()=>d(null),title:`Configure ${u.name}`,children:[e.jsx("div",{className:"space-y-4",children:Object.entries(S(l)).map(([k,T])=>e.jsx(Ht,{label:T,children:e.jsx("input",{type:"password",value:u.config[k]||"",onChange:N=>i(O=>O.map(E=>E.provider===l?{...E,config:{...E.config,[k]:N.target.value}}:E)),className:"w-full bg-background border border-muted p-2 rounded font-mono",placeholder:`Enter ${T}`})},k))}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:()=>d(null),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>g(u),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]}),m&&m.show&&e.jsx("div",{className:`p-4 rounded-lg border ${m.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[m.success?e.jsx(V.CheckCircle,{className:"h-5 w-5 text-green-600"}):e.jsx(V.XCircle,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:m.message})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Payment Gateways"}),e.jsx("button",{onClick:p,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(k=>e.jsxs("div",{className:`bg-surface p-6 rounded-xl shadow-lg border ${k.isEnabled?"border-primary-500/50":"border-muted/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("img",{src:C[k.provider],alt:k.name,className:"h-8"}),e.jsx(gf,{checked:k.isEnabled,onChange:T=>x(k.provider,T)})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:k.name}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Secure payment processing with advanced fraud protection and PCI compliance."}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-subtle",children:"Status:"}),e.jsx("span",{className:`font-medium ${k.isEnabled?"text-green-500":"text-red-500"}`,children:k.isEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-subtle",children:"Provider:"}),e.jsx("span",{className:"font-medium capitalize",children:k.provider})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(k.provider),className:"flex-1 bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Configure"}),e.jsx("button",{onClick:()=>y(k.provider),disabled:!k.isEnabled,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg text-sm disabled:cursor-not-allowed",children:"Test Payment"})]})]},k.provider))})]})},NX=({tickets:t,organizations:r,users:n,onUpdateStatus:a})=>{const[s,i]=w.useState("OPEN"),[l,d]=w.useState(null),u=w.useMemo(()=>s==="ALL"?t:t.filter(f=>f.status===s),[t,s]),m={OPEN:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",IN_PROGRESS:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",RESOLVED:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"};return e.jsxs("div",{className:"space-y-6",children:[l&&e.jsxs(it,{isOpen:!0,onClose:()=>d(null),title:`Ticket #${l.id.slice(0,8)}`,children:[e.jsx("h3",{className:"text-lg font-bold",children:l.subject}),e.jsx("div",{className:"mt-4 space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:(l.replies||[]).map((f,p)=>{const x=n.find(v=>v.id===f.authorId),g=x?.role==="Super Admin";return e.jsxs("div",{className:`flex items-start gap-3 ${g?"flex-row-reverse":""}`,children:[e.jsx("img",{src:x?.avatar,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:`p-3 rounded-lg max-w-lg ${g?"bg-primary-500 text-white":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:f.message}),e.jsx("p",{className:`text-xs mt-1 ${g?"text-primary-200":"text-subtle"}`,children:new Date(f.timestamp).toLocaleString()})]})]},p)})})]}),e.jsx("h2",{className:"text-2xl font-bold",children:"Support Tickets"}),e.jsx("div",{className:"flex gap-2 p-1 bg-surface rounded-lg border border-muted w-min",children:["OPEN","IN_PROGRESS","RESOLVED","ALL"].map(f=>e.jsx("button",{onClick:()=>i(f),className:`px-3 py-1 text-sm font-semibold rounded-md ${s===f?"bg-primary-600 text-white":"text-subtle"}`,children:f},f))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(f=>{const p=r.find(g=>g.id===f.organizationId),x=n.find(g=>g.id===f.userId);return e.jsxs("div",{onClick:()=>d(f),className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 space-y-3 cursor-pointer hover:border-primary-500/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:f.subject}),e.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full ${m[f.status]}`,children:f.status})]}),e.jsxs("p",{className:"text-sm text-subtle",children:["From: ",x?.name||"N/A"," at ",p?.name||"N/A"]}),e.jsxs("p",{className:"text-xs text-subtle pt-2 border-t border-muted",children:["Last update: ",new Date(f.lastReplyAt).toLocaleString()]})]},f.id)})})]})},SX=({logs:t,users:r})=>{const[n,a]=w.useState("all"),[s,i]=w.useState("all"),[l,d]=w.useState(t),[u,m]=w.useState(!1),[f,p]=w.useState(1),[x,g]=w.useState(1),[v,b]=w.useState(""),[y,S]=w.useState(""),C=async(E=1)=>{m(!0);try{const P=new URLSearchParams({page:E.toString(),limit:"50",...n!=="all"&&{action:n},...s!=="all"&&{actorId:s},...v&&{startDate:v},...y&&{endDate:y}}),I=await fetch(`${window.location.origin}/api/super-admin/audit-logs?${P}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(I.ok){const M=await I.json();d(M.logs),g(M.pagination.pages),p(M.pagination.page)}else console.error("Failed to fetch audit logs:",I.status,I.statusText)}catch(P){console.error("Failed to fetch audit logs:",P)}finally{m(!1)}};w.useEffect(()=>{C(1)},[n,s,v,y]);const k=w.useMemo(()=>Array.from(new Set(t.map(E=>E.action))),[t]),T=w.useMemo(()=>r,[r]),N=[{value:"all",label:"All Actions"},{value:"ORGANIZATION_CREATED",label:"Organization Created"},{value:"ORGANIZATION_UPDATED",label:"Organization Updated"},{value:"ORGANIZATION_DELETED",label:"Organization Deleted"},{value:"PLAN_CREATED",label:"Plan Created"},{value:"PLAN_UPDATED",label:"Plan Updated"},{value:"PLAN_DELETED",label:"Plan Deleted"},{value:"ADDON_CREATED",label:"Addon Created"},{value:"ADDON_UPDATED",label:"Addon Updated"},{value:"ADDON_DELETED",label:"Addon Deleted"},{value:"PAYMENT_GATEWAY_CREATED",label:"Payment Gateway Created"},{value:"PAYMENT_GATEWAY_UPDATED",label:"Payment Gateway Updated"},{value:"PAYMENT_GATEWAY_DELETED",label:"Payment Gateway Deleted"},{value:"BLOG_POST_CREATED",label:"Blog Post Created"},{value:"BLOG_POST_UPDATED",label:"Blog Post Updated"},{value:"BLOG_POST_DELETED",label:"Blog Post Deleted"},{value:"COUPON_CREATED",label:"Coupon Created"},{value:"COUPON_UPDATED",label:"Coupon Updated"},{value:"COUPON_DELETED",label:"Coupon Deleted"},{value:"TICKET_STATUS_UPDATED",label:"Ticket Status Updated"},{value:"INQUIRY_STATUS_UPDATED",label:"Inquiry Status Updated"},{value:"USER_LOGIN",label:"User Login"}],O={ORGANIZATION_CREATED:e.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),ORGANIZATION_UPDATED:e.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),ORGANIZATION_DELETED:e.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),PLAN_CREATED:e.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),PLAN_UPDATED:e.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),PLAN_DELETED:e.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),USER_LOGIN:e.jsx(V.Key,{className:"h-4 w-4 text-yellow-500"}),PAYMENT_GATEWAY_UPDATED:e.jsx(V.Key,{className:"h-4 w-4 text-purple-500"}),TICKET_STATUS_UPDATED:e.jsx(V.Support,{className:"h-4 w-4 text-orange-500"}),BLOG_POST_CREATED:e.jsx(V.Blog,{className:"h-4 w-4 text-green-500"}),BLOG_POST_UPDATED:e.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),BLOG_POST_DELETED:e.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),ADDON_CREATED:e.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),ADDON_UPDATED:e.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),ADDON_DELETED:e.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),COUPON_CREATED:e.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),COUPON_UPDATED:e.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),COUPON_DELETED:e.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),INQUIRY_STATUS_UPDATED:e.jsx(V.Leads,{className:"h-4 w-4 text-orange-500"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Security & Audit Logs"}),e.jsxs("button",{onClick:()=>C(1),disabled:u,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[e.jsx(V.Activity,{className:`h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-surface rounded-lg border border-muted",children:[e.jsx(Ht,{label:"Filter by Action Type",children:e.jsxs("select",{value:n,onChange:E=>a(E.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[N.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value)),k.filter(E=>!N.some(P=>P.value===E)).map(E=>e.jsx("option",{value:E,children:E.replace(/_/g," ")},E))]})}),e.jsx(Ht,{label:"Filter by User",children:e.jsxs("select",{value:s,onChange:E=>i(E.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"all",children:"All Users"}),T.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})}),e.jsx(Ht,{label:"Start Date",children:e.jsx("input",{type:"date",value:v,onChange:E=>b(E.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Ht,{label:"End Date",children:e.jsx("input",{type:"date",value:y,onChange:E=>S(E.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),e.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Administrator"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Timestamp"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2",children:"Loading audit logs..."})]})})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-subtle",children:"No audit logs found matching the current filters."})}):l.map(E=>{const P=typeof E.actorId=="object"?E.actorId:r.find(I=>I.id===E.actorId);return e.jsxs("tr",{className:"hover:bg-muted/20",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[O[E.action]||e.jsx("div",{className:"w-4 h-4"}),e.jsx("p",{className:"font-mono text-xs font-semibold bg-muted/50 w-fit px-2 py-1 rounded-md",children:E.action.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-6 py-4 text-sm max-w-xs truncate",title:E.details,children:E.details}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:typeof P=="object"?P.name:"Unknown"}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle font-mono",children:E.ipAddress||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-subtle whitespace-nowrap",children:new Date(E.timestamp).toLocaleString()})]},E.id)})})]})}),x>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>C(f-1),disabled:f===1||u,className:"px-3 py-1 bg-muted hover:bg-subtle/20 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Previous"}),e.jsxs("span",{className:"text-sm text-subtle",children:["Page ",f," of ",x]}),e.jsx("button",{onClick:()=>C(f+1),disabled:f===x||u,className:"px-3 py-1 bg-muted hover:bg-subtle/20 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Next"})]})]})},kX=({healthData:t,apiLogs:r,errorLogs:n})=>{const[a,s]=w.useState("api"),[i,l]=w.useState(null),[d,u]=w.useState(!0),[m,f]=w.useState(10),[p,x]=w.useState(!0),[g,v]=w.useState(null),b=async(T=!1)=>{T&&(u(!0),v(null));try{const N=await Le.getSuperAdminMonitoring();l(N),v(null),x(!0)}catch{v("Failed to fetch monitoring data. Using sample data."),x(!1)}finally{T&&u(!1)}};if(w.useEffect(()=>{b(!0);let T=null;return p&&(T=setInterval(()=>b(!1),m*1e3)),()=>{T&&clearInterval(T)}},[m,p]),d)return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"System Monitoring"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})]});const y=i?.serviceStatus||{API:"Unknown",Database:"Unknown","Facebook Sync":"Unknown"},S=i?.healthData||[],C=i?.apiLogs||r,k=i?.errorLogs||n;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"System Monitoring"}),e.jsxs("div",{className:"flex items-center gap-4",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gf,{checked:p,onChange:T=>x(T)}),e.jsx("span",{className:"text-sm font-medium",children:"Auto Refresh"})]}),e.jsx("label",{className:"text-sm font-medium",children:"Refresh every:"}),e.jsxs("select",{value:m,onChange:T=>f(Number(T.target.value)),className:"bg-background border border-muted p-2 rounded text-sm",disabled:!p,children:[e.jsx("option",{value:10,children:"10 seconds"}),e.jsx("option",{value:15,children:"15 seconds"}),e.jsx("option",{value:30,children:"30 seconds"}),e.jsx("option",{value:60,children:"1 minute"})]}),e.jsx("button",{onClick:()=>b(!0),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Refresh Now"})]})]}),g&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),i&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Successfully loaded real system monitoring data from database!"}),!i&&!g&&e.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",children:"Loading real system monitoring data..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"CPU Load"}),e.jsx(Rr,{width:"100%",height:100,children:e.jsxs($0,{data:S,margin:{top:10,right:0,left:0,bottom:0},children:[e.jsx(Ut,{formatter:T=>[`${T}%`,"CPU Load"]}),e.jsx(da,{type:"monotone",dataKey:"cpuLoad",stroke:"#8884d8",fill:"#8884d8"})]})}),e.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["CPU Load (",S[S.length-1]?.cpuLoad||0,"%)"]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"Memory Usage"}),e.jsx(Rr,{width:"100%",height:100,children:e.jsxs($0,{data:S,margin:{top:10,right:0,left:0,bottom:0},children:[e.jsx(Ut,{formatter:T=>[`${T}%`,"Memory Usage"]}),e.jsx(da,{type:"monotone",dataKey:"memoryUsage",stroke:"#82ca9d",fill:"#82ca9d"})]})}),e.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["Memory (",S[S.length-1]?.memoryUsage||0,"%)"]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"Response Time"}),e.jsx(Rr,{width:"100%",height:100,children:e.jsxs($0,{data:S,margin:{top:10,right:0,left:0,bottom:0},children:[e.jsx(Ut,{formatter:T=>[`${T}ms`,"Response Time"]}),e.jsx(da,{type:"monotone",dataKey:"responseTime",stroke:"#ffc658",fill:"#ffc658"})]})}),e.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["Response (",S[S.length-1]?.responseTime||0,"ms)"]})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Service Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(y).map(([T,N])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:T}),e.jsx("span",{className:`font-semibold ${N==="Operational"?"text-green-500":"text-orange-500"}`,children:N})]},T))})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"border-b border-muted flex",children:[e.jsx("button",{onClick:()=>s("api"),className:`px-4 py-2 text-sm font-semibold ${a==="api"?"border-b-2 border-primary-500":"text-subtle"}`,children:"API Logs"}),e.jsx("button",{onClick:()=>s("error"),className:`px-4 py-2 text-sm font-semibold ${a==="error"?"border-b-2 border-primary-500":"text-subtle"}`,children:"Error Logs"})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto mt-4 font-mono text-xs",children:(a==="api"?C:k).slice(0,50).map(T=>e.jsxs("p",{className:"border-b border-muted/50 py-1",children:[`[${new Date(T.timestamp).toLocaleTimeString()}] `," ","statusCode"in T?`(${T.statusCode}) ${T.endpoint}`:`[${T.severity.toUpperCase()}] ${T.message}`]},T.id))})]})]})},CX=({rule:t,emailTemplates:r,superAdmins:n,onClose:a,onSave:s})=>{const[i,l]=w.useState(t||{name:"",description:"",isEnabled:!0,trigger:{type:"TRIAL_STARTED"},action:{type:"SEND_EMAIL_TO_ADMIN",templateId:r[0]?.id}}),d=f=>{const p=f.target.value;l(p==="TRIAL_EXPIRING"?x=>({...x,trigger:{type:p,daysBefore:3}}):x=>({...x,trigger:{type:p}}))},u=f=>{const p=f.target.value;p==="SEND_EMAIL_TO_ADMIN"&&l(x=>({...x,action:{type:p,templateId:r[0]?.id}})),p==="SEND_EMAIL_TO_SUPER_ADMIN"&&l(x=>({...x,action:{type:p,recipientId:n[0]?.id}}))},m=f=>{f.preventDefault(),s(i),a()};return e.jsx(it,{isOpen:!0,onClose:a,title:t?.id?"Edit Global Rule":"New Global Rule",children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx(Ht,{label:"Rule Name",children:e.jsx("input",{type:"text",value:i.name,onChange:f=>l({...i,name:f.target.value}),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Ht,{label:"Description",children:e.jsx("input",{type:"text",value:i.description,onChange:f=>l({...i,description:f.target.value}),className:"w-full bg-background border border-muted p-2 rounded"})}),e.jsx(Ht,{label:"Trigger",children:e.jsxs("select",{value:i.trigger?.type,onChange:d,className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"ORGANIZATION_CREATED",children:"Organization is Created"}),e.jsx("option",{value:"TRIAL_STARTED",children:"Trial is Started"}),e.jsx("option",{value:"TRIAL_EXPIRING",children:"Trial is Expiring"}),e.jsx("option",{value:"SUBSCRIPTION_PAYMENT_FAILED",children:"Subscription Payment Fails"}),e.jsx("option",{value:"SUBSCRIPTION_CANCELED",children:"Subscription is Canceled"})]})}),e.jsx(Ht,{label:"Action",children:e.jsxs("select",{value:i.action?.type,onChange:u,className:"w-full bg-background border border-muted p-2 rounded",children:[e.jsx("option",{value:"SEND_EMAIL_TO_ADMIN",children:"Send Email to Org Admin"}),e.jsx("option",{value:"SEND_EMAIL_TO_SUPER_ADMIN",children:"Send Email to Super Admin"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},AX=({rules:t,emailTemplates:r,superAdmins:n,onSave:a,onDelete:s})=>{const[i,l]=w.useState(!1),[d,u]=w.useState(null);return e.jsxs("div",{className:"space-y-6",children:[i&&e.jsx(CX,{rule:d,emailTemplates:r,superAdmins:n,onClose:()=>l(!1),onSave:a}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Global Automation"}),e.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[e.jsx(V.Add,{className:"w-5 h-5"})," New Rule"]})]}),e.jsx("div",{className:"space-y-4",children:t.map(m=>e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:m.name}),e.jsx("p",{className:"text-sm text-subtle",children:m.description})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(gf,{checked:m.isEnabled,onChange:f=>a({...m,isEnabled:f})}),e.jsx("button",{onClick:()=>{u(m),l(!0)},children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(m.id),children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]},m.id))})]})},TX=({organizations:t,plans:r,fetchAnalyticsData:n})=>{const[a,s]=w.useState(null),[i,l]=w.useState(!0);if(w.useEffect(()=>{(async()=>{try{l(!0);const m=await n();s(m)}catch(m){console.error("Failed to load analytics data:",m)}finally{l(!1)}})()},[n]),i)return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Platform Analytics"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})]});const d=a?.mrrData||[{name:"Jan",mrr:0},{name:"Feb",mrr:0},{name:"Mar",mrr:0},{name:"Apr",mrr:0},{name:"May",mrr:0},{name:"Jun",mrr:0}];return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Platform Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"MRR Growth"}),e.jsx(Rr,{width:"100%",height:300,children:e.jsxs(aP,{data:d,children:[e.jsx(hi,{strokeDasharray:"3 3"}),e.jsx(Kn,{dataKey:"name"}),e.jsx(Cn,{tickFormatter:u=>`${u/1e3}k`}),e.jsx(Ut,{formatter:u=>`${u.toLocaleString()}`}),e.jsx(Nn,{}),e.jsx(Zo,{type:"monotone",dataKey:"mrr",stroke:"#8884d8",strokeWidth:2})]})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Platform Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-subtle",children:"Total Organizations"}),e.jsx("span",{className:"font-semibold",children:a?.totalOrganizations||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-subtle",children:"Active Organizations"}),e.jsx("span",{className:"font-semibold text-green-500",children:a?.activeOrganizations||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-subtle",children:"Current MRR"}),e.jsxs("span",{className:"font-semibold",children:["$",d[d.length-1]?.mrr?.toLocaleString()||0]})]})]})]})]})]})},EX=t=>{const{organizations:r,users:n,leads:a,tasks:s,subscriptionPlans:i,supportTickets:l,auditLogs:d,globalAnnouncement:u,addons:m,systemHealthData:f,apiUsageLogs:p,errorLogs:x,globalAutomationRules:g,globalEmailTemplates:v,onSaveGlobalRule:b,onDeleteGlobalRule:y,homepageContent:S,blogPosts:C,onSaveBlogPost:k,onDeleteBlogPost:T,inquiries:N,setInquiries:O,setLeads:E,onLogout:P,onAddOrganization:I,onUpdateOrganization:M,onDeleteOrganization:D,onSaveSubscriptionPlan:U,onDeleteSubscriptionPlan:F,onUpdateTicketStatus:W,onSaveAnnouncement:$,onSaveUser:H,globalIntegrationStatus:z,onUpdateGlobalIntegrationStatus:q,localizationSettings:Q,onUpdateLocalizationSettings:ee,onUpdateHomepageContent:R,paymentGatewaySettings:L,onUpdatePaymentGatewaySettings:G,pricingComparisonData:K,onUpdatePricingComparisonData:ie}=t,[xe,pe]=w.useState("overview"),[be,me]=w.useState("subscriptions"),[X,re]=w.useState(null),[de,Be]=w.useState(!1),[Me,Ee]=w.useState(null),Xe=ye=>{t.onSaveBlogPost(ye),re(null)};if(X){const ye=X==="new"?null:X;return e.jsx(uX,{post:ye,users:n,onSave:Xe,onClose:()=>re(null)})}const ge=()=>{switch(xe){case"overview":return e.jsx(hX,{organizations:r,users:n,leads:a,plans:i,tasks:s});case"organizations":return e.jsx(gX,{organizations:r,users:n,leads:a,plans:i,onUpdate:M,onDelete:D,onAdd:I});case"lead_inquiries":return e.jsx(bX,{inquiries:N,setInquiries:O});case"plans":return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex border-b border-muted",children:[e.jsx("button",{onClick:()=>me("subscriptions"),className:`px-4 py-2 text-sm font-semibold ${be==="subscriptions"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Subscription Plans"}),e.jsx("button",{onClick:()=>me("features"),className:`px-4 py-2 text-sm font-semibold ${be==="features"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Feature Comparison"}),e.jsx("button",{onClick:()=>me("coupons"),className:`px-4 py-2 text-sm font-semibold ${be==="coupons"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Coupons & Offers"})]}),be==="subscriptions"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(vX,{plans:i,onSave:U,onDelete:F}),e.jsx(jX,{addons:m,onSave:t.onSaveAddon,onDelete:t.onDeleteAddon})]}),be==="features"&&e.jsx(mX,{data:K,onSave:ie}),be==="coupons"&&e.jsx(pX,{coupons:t.coupons,onSaveCoupon:t.onSaveCoupon,onDeleteCoupon:t.onDeleteCoupon,offerStrip:t.offerStrip,onUpdateOfferStrip:t.onUpdateOfferStrip})]});case"payment_gateway":return e.jsx(wX,{settings:L,onSave:G,onUpdatePaymentGatewaySettings:G});case"blog":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Blog Management"}),e.jsxs("button",{onClick:()=>re("new"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[e.jsx(V.Add,{className:"w-5 h-5"})," New Post"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:C.map(ye=>{const Oe=n.find(Z=>Z.id===ye.authorId);return e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 overflow-hidden flex flex-col",children:[e.jsx("img",{src:ye.featuredImage.src,alt:ye.featuredImage.alt,className:"h-48 w-full object-cover"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-bold text-lg",children:ye.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-subtle mt-2",children:[e.jsx("img",{src:Oe?.avatar,className:"h-6 w-6 rounded-full"}),e.jsx("span",{children:Oe?.name}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(ye.publishedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-subtle mt-4 pt-2 border-t border-muted flex-grow items-end",children:[e.jsxs("span",{children:[e.jsx(V.Eye,{className:"h-4 w-4 inline mr-1"})," ",ye.views]}),e.jsxs("span",{children:[e.jsx(V.ChatBubble,{className:"h-4 w-4 inline mr-1"})," ",ye.comments]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 mt-auto",children:[e.jsx("button",{onClick:()=>re(ye),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),e.jsx("button",{onClick:()=>T(ye.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]})]},ye.id)})})]});case"cms":return e.jsx(oX,{content:S,onSave:R});case"monitoring":return e.jsx(kX,{healthData:[],apiLogs:[],errorLogs:[]});case"automation":return e.jsx(AX,{rules:g,emailTemplates:v,superAdmins:n.filter(ye=>ye.role==="Super Admin"),onSave:b,onDelete:y});case"analytics":return e.jsx(TX,{organizations:r,plans:i,fetchAnalyticsData:t.fetchAnalyticsData});case"support":return e.jsx(NX,{tickets:l,organizations:r,users:n,onUpdateStatus:W});case"security":return e.jsx(SX,{logs:d,users:n});case"settings":return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Global Settings"}),e.jsx("button",{className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Settings"})]}),e.jsxs(W0,{title:"Platform Announcement",description:"Display a banner to all users.",children:[e.jsx("textarea",{defaultValue:u.message,rows:2,className:"w-full bg-background border border-muted p-2 rounded"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("select",{defaultValue:u.type,className:"bg-background border border-muted p-2 rounded text-sm",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"critical",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gf,{checked:u.isActive,onChange:()=>{}}),e.jsx("span",{children:"Active"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(W0,{title:"Localization",children:e.jsx("p",{children:"Localization settings here..."})}),e.jsx(W0,{title:"Global Integrations",children:e.jsx("p",{children:"Integration settings here..."})})]})]});default:return null}},De=[{id:"overview",name:"Overview",icon:e.jsx(V.Dashboard,{})},{id:"organizations",name:"Organizations",icon:e.jsx(V.Team,{})},{id:"lead_inquiries",name:"Lead Inquiries",icon:e.jsx(V.Leads,{})},{id:"plans",name:"Pricing & Plans",icon:e.jsx(V.Billing,{})},{id:"payment_gateway",name:"Payment Gateway",icon:e.jsx(V.Key,{})},{id:"blog",name:"Blog Management",icon:e.jsx(V.Blog,{})},{id:"cms",name:"Homepage CMS",icon:e.jsx(V.Globe,{})},{id:"monitoring",name:"System Monitoring",icon:e.jsx(V.Activity,{})},{id:"automation",name:"Global Automation",icon:e.jsx(V.Automation,{})},{id:"analytics",name:"Analytics",icon:e.jsx(V.Analytics,{})},{id:"support",name:"Support",icon:e.jsx(V.Support,{})},{id:"security",name:"Security & Audits",icon:e.jsx(V.Security,{})},{id:"settings",name:"Global Settings",icon:e.jsx(V.Settings,{})}],ae=({onLinkClick:ye})=>e.jsxs("nav",{className:"w-64 bg-surface flex flex-col h-screen border-r border-muted flex-shrink-0",children:[e.jsxs(jt,{to:"/super-admin",className:"h-16 flex items-center px-4 border-b border-muted group",children:[e.jsx(V.Logo,{className:"h-8 w-auto text-primary-500 transition-transform group-hover:scale-110"}),e.jsx("h1",{className:"ml-3 text-lg font-bold group-hover:text-primary-500 transition-colors",children:"Super Admin"})]}),e.jsx("div",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:De.map(Oe=>e.jsxs("button",{onClick:()=>{pe(Oe.id),ye?.()},className:`w-full flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200 ${xe===Oe.id?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[Y.cloneElement(Oe.icon,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:Oe.name})]},Oe.id))}),e.jsx("div",{className:"p-4 border-t border-muted",children:e.jsxs("button",{onClick:P,className:"w-full flex items-center text-sm font-semibold text-subtle hover:text-red-500 transition-colors p-2 rounded-lg",children:[e.jsx(V.Logout,{className:"h-5 w-5 mr-2"}),"Logout"]})})]});return e.jsxs("div",{className:"min-h-screen bg-background text-on-surface flex flex-col md:flex-row",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ae,{})}),de&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>Be(!1),children:e.jsx("div",{className:"absolute top-0 left-0 h-full",onClick:ye=>ye.stopPropagation(),children:e.jsx(ae,{onLinkClick:()=>Be(!1)})})}),Me&&e.jsx(it,{isOpen:!0,onClose:()=>Ee(null),title:"Test Payment Result",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Me.success?e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(V.CheckCircle,{className:"h-6 w-6 text-green-600"})}):e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(V.XCircle,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${Me.success?"text-green-800":"text-red-800"}`,children:Me.success?"Test Successful":"Test Failed"}),e.jsxs("p",{className:"text-sm text-subtle capitalize",children:[Me.provider," Payment Gateway"]})]})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted mb-6",children:[e.jsx("p",{className:"text-sm text-on-surface",children:Me.message}),Me.success&&Me.transactionId&&e.jsxs("div",{className:"mt-3 p-2 bg-muted rounded text-xs font-mono",children:["Transaction ID: ",Me.transactionId]})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("button",{onClick:()=>Ee(null),className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-colors",children:"Close"})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"md:hidden h-16 bg-surface border-b border-muted flex items-center justify-between px-4",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("button",{onClick:()=>Be(!0),children:e.jsx(V.Menu,{className:"h-6 w-6"})})]}),e.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:ge()})]})]})},OX=({value:t,onChange:r})=>e.jsxs("div",{className:"bg-background border border-muted rounded-md h-full flex flex-col",children:[e.jsxs("div",{className:"p-2 border-b border-muted flex gap-2 flex-shrink-0",children:[e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm font-bold w-7 h-7",children:"B"}),e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm italic w-7 h-7",children:"I"}),e.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm underline w-7 h-7",children:"U"})]}),e.jsx("textarea",{value:t,onChange:n=>r(n.target.value),className:"w-full p-2 bg-transparent focus:outline-none flex-grow resize-none",placeholder:"<html>...</html>"})]}),PX=({template:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{name:"",subject:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:t?.id?"Edit Email Template":"Create New Template",children:e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4 flex flex-col",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),e.jsx("input",{value:a.name,onChange:l=>s({...a,name:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Email Subject"}),e.jsx("input",{value:a.subject,onChange:l=>s({...a,subject:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{className:"flex-grow flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Body (HTML)"}),e.jsx(OX,{value:a.body||"",onChange:l=>s({...a,body:l})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Live Preview"}),e.jsxs("div",{className:"w-full h-full bg-background p-4 rounded-lg border border-muted overflow-y-auto",children:[e.jsx("div",{className:"font-semibold text-on-surface p-2 bg-muted rounded-t-md",children:a.subject||"Your Subject Here"}),e.jsx("div",{className:"p-2 prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:a.body||"<p>Your email content will appear here...</p>"}})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},_X=({campaign:t,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l,onSend:d,onSchedule:u})=>{const[m,f]=w.useState(t||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[p,x]=w.useState(t?.status==="SCHEDULED"?"later":t?.status==="SENT"?"now":"draft"),[g,v]=w.useState((t?.scheduledAt?new Date(t.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),b=y=>{y.preventDefault();const S={...m};p==="now"&&d?d(S):p==="later"&&u?u(S,g):(p==="now"?(S.status="SENT",S.sentAt=new Date().toISOString(),S.scheduledAt=null):p==="later"?(S.status="SCHEDULED",S.scheduledAt=new Date(g).toISOString(),S.sentAt=null):(S.status="DRAFT",S.sentAt=null,S.scheduledAt=null),l(S)),i()};return e.jsx(it,{isOpen:!0,onClose:i,title:t?.id?"Edit Campaign":"Create New Campaign",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),e.jsx("input",{value:m.name,onChange:y=>f({...m,name:y.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Email Template"}),e.jsx("select",{value:m.templateId,onChange:y=>f({...m,templateId:y.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:r.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),e.jsx(Qc,{conditions:m.conditions||[],onConditionsChange:y=>f({...m,conditions:y}),users:n,pipelineStages:a,customFieldDefs:s})]}),e.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"draft",checked:p==="draft",onChange:y=>x(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"now",checked:p==="now",onChange:y=>x(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"later",checked:p==="later",onChange:y=>x(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),p==="later"&&e.jsx("div",{className:"pl-9",children:e.jsx("input",{type:"datetime-local",value:g,onChange:y=>v(y.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},IX=({users:t,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=w.useState("campaigns"),[i,l]=w.useState(null),[d,u]=w.useState(null),[m,f]=w.useState([]),[p,x]=w.useState([]),[g,v]=w.useState(!0),[b,y]=w.useState(null);w.useEffect(()=>{(async()=>{try{v(!0),y(null);const U=localStorage.getItem("token")||localStorage.getItem("authToken"),F=U?{Authorization:`Bearer ${U}`}:{},[W,$]=await Promise.all([fetch("/api/marketing/templates/email",{headers:F}).then(H=>H.json()).then(H=>H.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/email",{headers:F}).then(H=>H.json()).then(H=>H.data||[]).catch(()=>[])]);f(W||[]),x($||[])}catch(U){console.error("Failed to fetch email marketing data:",U),y(`Failed to load data: ${U.message}`)}finally{v(!1)}})()},[]);const S=async D=>{try{let U;if(D.id)U=await fetch(`/api/marketing/templates/email/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const W=localStorage.getItem("token")||localStorage.getItem("authToken");if(!W)throw new Error("No authentication token found. Please log in again.");U=await fetch("/api/marketing/templates/email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify(D)})}if(!U.ok)throw new Error("Failed to save template");const F=await U.json();D.id?f(W=>W.map($=>$.id===D.id?F:$)):f(W=>[...W,F])}catch(U){console.error("Failed to save template:",U),y(`Failed to save template: ${U.message}`)}},C=async D=>{if(confirm("Are you sure you want to delete this template?"))try{if(!(await fetch(`/api/marketing/templates/email/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");f(F=>F.filter(W=>W.id!==D))}catch(U){console.error("Failed to delete template:",U),y(`Failed to delete template: ${U.message}`)}},k=async D=>{try{let U;if(D.id)U=await fetch(`/api/marketing/campaigns/email/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const W=localStorage.getItem("token")||localStorage.getItem("authToken");if(!W)throw new Error("No authentication token found. Please log in again.");U=await fetch("/api/marketing/campaigns/email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify(D)})}if(!U.ok)throw new Error("Failed to save campaign");const F=await U.json();D.id?x(W=>W.map($=>$.id===D.id?F:$)):x(W=>[...W,F])}catch(U){console.error("Failed to save campaign:",U),y(`Failed to save campaign: ${U.message}`)}},T=async D=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/email/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");x(F=>F.filter(W=>W.id!==D))}catch(U){console.error("Failed to delete campaign:",U),y(`Failed to delete campaign: ${U.message}`)}},N=async D=>{try{const U={...D,status:"SENT",sentAt:new Date().toISOString()};await k(U),alert("Campaign sent successfully!")}catch(U){console.error("Failed to send campaign:",U),y(`Failed to send campaign: ${U.message}`)}},O=async(D,U)=>{try{const F={...D,status:"SCHEDULED",scheduledAt:new Date(U).toISOString()};await k(F),alert("Campaign scheduled successfully!")}catch(F){console.error("Failed to schedule campaign:",F),y(`Failed to schedule campaign: ${F.message}`)}},E=async D=>{try{const U={...D,status:"DRAFT",scheduledAt:null};await k(U),alert("Campaign unscheduled successfully!")}catch(U){console.error("Failed to unschedule campaign:",U),y(`Failed to unschedule campaign: ${U.message}`)}};if(g)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading email marketing data..."})]})});if(b)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const P=(D,U=null)=>{u(U),l(D)},I=()=>{u(null),l(null)},M=D=>{switch(D.status){case"SENT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return e.jsxs("div",{className:"space-y-6",children:[i==="template"&&e.jsx(PX,{template:d,onClose:I,onSave:S}),i==="campaign"&&e.jsx(_X,{campaign:d,templates:m,onClose:I,onSave:k,onSend:N,onSchedule:O,users:t,pipelineStages:r,customFieldDefs:n}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[e.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),e.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),e.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),e.jsxs("button",{onClick:()=>P(a==="templates"?"template":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="templates"?"New Template":"New Campaign"]})]}),a==="campaigns"&&(p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(D=>e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:D.name}),M(D)]}),D.status==="SCHEDULED"&&D.scheduledAt&&e.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(D.scheduledAt).toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:D.recipientCount.toLocaleString()}),e.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[D.openRate,"%"]}),e.jsx("p",{className:"text-xs text-subtle",children:"Open Rate"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>P("campaign",D),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),D.status==="DRAFT"&&e.jsx("button",{onClick:()=>N(D),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),D.status==="SCHEDULED"&&e.jsx("button",{onClick:()=>E(D),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),e.jsx("button",{onClick:()=>T(D.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]},D.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Email,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Email Campaigns Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first email campaign to get started with email marketing."}),e.jsxs("button",{onClick:()=>P("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="templates"&&(m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(D=>e.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"font-semibold text-on-surface",children:D.name}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>P("template",D),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(D.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-2 bg-background p-3 border border-muted rounded-md h-32 overflow-hidden relative group",children:[e.jsx("div",{className:"font-semibold text-sm",children:D.subject}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none opacity-60",dangerouslySetInnerHTML:{__html:D.body}}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-background to-transparent"})]})]},D.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Email,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Email Templates Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first email template to start building campaigns."}),e.jsxs("button",{onClick:()=>P("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="analytics"&&(p.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(tr,{title:"Total Campaigns",value:p.length.toString(),icon:e.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),e.jsx(tr,{title:"Total Emails Sent",value:p.filter(D=>D.status==="SENT").reduce((D,U)=>D+U.recipientCount,0).toLocaleString(),icon:e.jsx(V.Email,{className:"h-6 w-6 text-blue-400"})}),e.jsx(tr,{title:"Avg. Open Rate",value:`${(p.reduce((D,U)=>D+U.openRate,0)/(p.length||1)).toFixed(1)}%`,icon:e.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-on-surface",children:"Campaign Performance"}),e.jsx(Rr,{width:"100%",height:300,children:e.jsxs(hf,{data:p.filter(D=>D.status==="SENT"),children:[e.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),e.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12}}),e.jsx(Cn,{yAxisId:"left",orientation:"left",stroke:"#8884d8",label:{value:"Recipients",angle:-90,position:"insideLeft"}}),e.jsx(Cn,{yAxisId:"right",orientation:"right",stroke:"#82ca9d",label:{value:"Open Rate (%)",angle:-90,position:"insideRight"}}),e.jsx(Ut,{contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"}}),e.jsx(Nn,{}),e.jsx(Vn,{yAxisId:"left",dataKey:"recipientCount",fill:"#8884d8",name:"Recipients",radius:[4,4,0,0]}),e.jsx(Vn,{yAxisId:"right",dataKey:"openRate",fill:"#82ca9d",name:"Open Rate (%)",radius:[4,4,0,0]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),e.jsx("p",{className:"text-subtle mb-4",children:"Send some email campaigns to see analytics and performance data here."}),e.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},MX=({template:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{name:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:t?.id?"Edit SMS Template":"Create New Template",children:e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),e.jsx("input",{type:"text",value:a.name,onChange:l=>s({...a,name:l.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message Body"}),e.jsx("textarea",{rows:6,value:a.body,onChange:l=>s({...a,body:l.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"}),e.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", and ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center bg-background p-4 rounded-lg border border-muted h-full",children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-4",children:"Live Preview"}),e.jsxs("div",{className:"w-72 h-96 bg-slate-800 rounded-3xl p-4 flex flex-col shadow-2xl",children:[e.jsx("div",{className:"bg-white/10 h-6 w-32 rounded-full mx-auto"}),e.jsx("div",{className:"flex-grow bg-slate-900 rounded-lg mt-4 p-2 overflow-y-auto",children:e.jsx("div",{className:"bg-blue-500 text-white text-sm p-2 rounded-lg max-w-xs self-start whitespace-pre-wrap",children:a.body||"Your SMS message will appear here..."})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},LX=({campaign:t,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=w.useState(t||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,f]=w.useState(t?.status==="SCHEDULED"?"later":t?.status==="SENT"?"now":"draft"),[p,x]=w.useState((t?.scheduledAt?new Date(t.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),g=v=>{v.preventDefault();const b={...d};m==="now"?(b.status="SENT",b.sentAt=new Date().toISOString(),b.scheduledAt=null):m==="later"?(b.status="SCHEDULED",b.scheduledAt=new Date(p).toISOString(),b.sentAt=null):(b.status="DRAFT",b.sentAt=null,b.scheduledAt=null),l(b),i()};return e.jsx(it,{isOpen:!0,onClose:i,title:t?.id?"Edit Campaign":"Create New Campaign",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),e.jsx("input",{value:d.name,onChange:v=>u({...d,name:v.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"SMS Template"}),e.jsxs("select",{value:d.templateId,onChange:v=>u({...d,templateId:v.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a template"}),r.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),e.jsx(Qc,{conditions:d.conditions||[],onConditionsChange:v=>u({...d,conditions:v}),users:n,pipelineStages:a,customFieldDefs:s})]}),e.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&e.jsx("div",{className:"pl-9",children:e.jsx("input",{type:"datetime-local",value:p,onChange:v=>x(v.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},DX=({users:t,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=w.useState("campaigns"),[i,l]=w.useState({type:null,data:null}),[d,u]=w.useState([]),[m,f]=w.useState([]),[p,x]=w.useState(!0),[g,v]=w.useState(null);w.useEffect(()=>{(async()=>{try{x(!0),v(null);const I=localStorage.getItem("token")||localStorage.getItem("authToken"),M=I?{Authorization:`Bearer ${I}`}:{},[D,U]=await Promise.all([fetch("/api/marketing/templates/sms",{headers:M}).then(F=>F.json()).then(F=>F.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/sms",{headers:M}).then(F=>F.json()).then(F=>F.data||[]).catch(()=>[])]);u(D||[]),f(U||[])}catch(I){console.error("Failed to fetch SMS marketing data:",I),v(`Failed to load data: ${I.message}`)}finally{x(!1)}})()},[]);const b=async P=>{try{let I;if(P.id)I=await fetch(`/api/marketing/templates/sms/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});else{const D=localStorage.getItem("token")||localStorage.getItem("authToken");if(!D)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/templates/sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(P)})}if(!I.ok)throw new Error("Failed to save template");const M=await I.json();P.id?u(D=>D.map(U=>U.id===P.id?M:U)):u(D=>[...D,M])}catch(I){console.error("Failed to save template:",I),v(`Failed to save template: ${I.message}`)}},y=async P=>{if(confirm("Are you sure you want to delete this template?"))try{if(!(await fetch(`/api/marketing/templates/sms/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");u(M=>M.filter(D=>D.id!==P))}catch(I){console.error("Failed to delete template:",I),v(`Failed to delete template: ${I.message}`)}},S=async P=>{try{let I;if(P.id)I=await fetch(`/api/marketing/campaigns/sms/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});else{const D=localStorage.getItem("token")||localStorage.getItem("authToken");if(!D)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/campaigns/sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(P)})}if(!I.ok)throw new Error("Failed to save campaign");const M=await I.json();P.id?f(D=>D.map(U=>U.id===P.id?M:U)):f(D=>[...D,M])}catch(I){console.error("Failed to save campaign:",I),v(`Failed to save campaign: ${I.message}`)}},C=async P=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/sms/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");f(M=>M.filter(D=>D.id!==P))}catch(I){console.error("Failed to delete campaign:",I),v(`Failed to delete campaign: ${I.message}`)}},k=async P=>{try{const I={...P,status:"SENT",sentAt:new Date().toISOString()};await S(I),alert("Campaign sent successfully!")}catch(I){console.error("Failed to send campaign:",I),v(`Failed to send campaign: ${I.message}`)}},T=async P=>{try{const I={...P,status:"DRAFT",scheduledAt:null};await S(I),alert("Campaign unscheduled successfully!")}catch(I){console.error("Failed to unschedule campaign:",I),v(`Failed to unschedule campaign: ${I.message}`)}};if(p)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading SMS marketing data..."})]})});if(g)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:g}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const N=(P,I=null)=>l({type:P,data:I}),O=()=>l({type:null,data:null}),E=P=>{switch(P.status){case"SENT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return e.jsxs("div",{className:"space-y-6",children:[i.type==="template"&&e.jsx(MX,{template:i.data,onClose:O,onSave:b}),i.type==="campaign"&&e.jsx(LX,{campaign:i.data,templates:d,onClose:O,onSave:S,users:t,pipelineStages:r,customFieldDefs:n}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[e.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),e.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),e.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),e.jsxs("button",{onClick:()=>N(a==="templates"?"template":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="templates"?"New Template":"New Campaign"]})]}),a==="campaigns"&&(m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(P=>e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:P.name}),E(P)]}),P.status==="SCHEDULED"&&P.scheduledAt&&e.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(P.scheduledAt).toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.recipientCount.toLocaleString()}),e.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[P.deliveryRate,"%"]}),e.jsx("p",{className:"text-xs text-subtle",children:"Delivery Rate"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>N("campaign",P),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),P.status==="DRAFT"&&e.jsx("button",{onClick:()=>k(P),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),P.status==="SCHEDULED"&&e.jsx("button",{onClick:()=>T(P),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),e.jsx("button",{onClick:()=>C(P.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]},P.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.SMS,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No SMS Campaigns Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first SMS campaign to get started with SMS marketing."}),e.jsxs("button",{onClick:()=>N("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="templates"&&(d.length>0?e.jsx("div",{className:"bg-surface rounded-xl shadow-lg p-6",children:e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(P=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:P.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N("template",P),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(P.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap p-2 bg-muted/50 rounded",children:P.body})]},P.id))})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.SMS,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No SMS Templates Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first SMS template to start building campaigns."}),e.jsxs("button",{onClick:()=>N("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="analytics"&&(m.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(tr,{title:"Total Campaigns",value:m.length.toString(),icon:e.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),e.jsx(tr,{title:"Total SMS Sent",value:m.filter(P=>P.status==="SENT").reduce((P,I)=>P+I.recipientCount,0).toLocaleString(),icon:e.jsx(V.SMS,{className:"h-6 w-6 text-blue-400"})}),e.jsx(tr,{title:"Avg. Delivery Rate",value:`${(m.reduce((P,I)=>P+I.deliveryRate,0)/(m.length||1)).toFixed(1)}%`,icon:e.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),e.jsx("p",{className:"text-subtle mb-4",children:"Send some SMS campaigns to see analytics and performance data here."}),e.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},q0=({label:t,value:r,onChange:n,options:a})=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:t}),e.jsx("select",{value:r,onChange:s=>n(s.target.value),className:"w-full mt-1 bg-surface border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:a.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]});class RX extends w.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){return this.state.hasError?this.props.fallback||e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:"Something went wrong"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Try Again"})]})}):this.props.children}}const $X=t=>{const{x:r,y:n,width:a,height:s,value:i,name:l}=t,d=r+a/2,u=n+s/2,m=Math.min(16,Math.max(10,a*.12,s*.35)),f=Math.min(14,Math.max(8,a*.1,s*.25));if(s<30||a<50)return e.jsx("text",{x:d,y:u,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:f,fontWeight:"bold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:i});const x=m+3+f+2,g=u-x/2;return e.jsxs("g",{children:[e.jsx("text",{x:d,y:g+m/2,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:m,fontWeight:"bold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:l}),e.jsxs("text",{x:d,y:g+m+2+f/2,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:f,fontWeight:"600",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:["(",i,")"]})]})},FX=()=>{const[t,r]=w.useState(null),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState("all"),[u,m]=w.useState("all"),[f,p]=w.useState("all"),[x,g]=w.useState([]),[v,b]=w.useState([]),[y,S]=w.useState(!1),[C,k]=w.useState(!1);w.useEffect(()=>{(async()=>{try{a(!0),console.log("Fetching reports data...");const W=await Le.getReportsData();console.log("Reports data received:",W),r(W),i(null)}catch(W){console.error("Failed to fetch reports data:",W),i(`Failed to load reports data: ${W.message}`)}finally{a(!1)}})()},[]);const T=w.useMemo(()=>{if(!t)return console.log("No reports data available"),{salesFunnelData:[],leadSourceData:[],salesRepData:[],teamPerformanceData:[],conversionData:[],leadTrendData:[],summary:{totalLeads:0,totalUsers:0,totalStages:0,totalTeams:0,avgLeadsPerRep:0}};console.log("Processing reports data:",t);const F=x.length>0?t.salesFunnelData.filter($=>x.includes($.stageId)):t.salesFunnelData,W=v.length>0?t.leadSourceData.filter($=>v.includes($.name)):t.leadSourceData;return{...t,salesFunnelData:F,leadSourceData:W}},[t,x,v]),{salesFunnelData:N=[],leadSourceData:O=[],salesRepData:E=[],teamPerformanceData:P=[]}=T||{},I=w.useMemo(()=>!N||!Array.isArray(N)?(console.log("No salesFunnelData available:",N),[]):(console.log("Funnel data (already sorted by backend):",N),N),[N]),M=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1"],D=Math.PI/180,U=({cx:F,cy:W,midAngle:$,innerRadius:H,outerRadius:z,percent:q,index:Q})=>{const ee=H+(z-H)*.5,R=F+ee*Math.cos(-$*D),L=W+ee*Math.sin(-$*D);return e.jsx("text",{x:R,y:L,fill:"white",textAnchor:"middle",dominantBaseline:"central",children:`${(q*100).toFixed(0)}%`})};return n?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading reports data..."})]})}):s||!T?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Reports & Analytics"}),e.jsx("p",{className:"text-subtle mt-1",children:"Analyze performance and gain insights into your sales pipeline."})]}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:s||"No data available"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})]}):e.jsx(RX,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Reports & Analytics"}),e.jsx("p",{className:"text-subtle mt-1",children:"Analyze performance and gain insights into your sales pipeline."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-surface rounded-lg",children:[e.jsx(q0,{label:"Date Range",value:l,onChange:d,options:[{value:"all",label:"All Time"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"}]}),e.jsx(q0,{label:"Team",value:u,onChange:m,options:[{value:"all",label:"All Teams"},...P?.map(F=>({value:F.name,label:F.name}))||[]]}),e.jsx(q0,{label:"Sales Rep",value:f,onChange:p,options:[{value:"all",label:"All Reps"},...E?.map(F=>({value:F.name,label:F.name}))||[]]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg h-96 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Sales Funnel"}),e.jsx("button",{onClick:()=>S(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-lg text-sm",children:"Edit"})]}),e.jsx("div",{className:"flex-1 w-full",children:I.length>0?e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(dP,{children:[e.jsx(Ut,{formatter:(F,W)=>[F,W],labelFormatter:F=>`Stage: ${F}`,contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),e.jsx(Ha,{dataKey:"value",data:I,isAnimationActive:!0,animationBegin:200,animationDuration:1200,cx:"50%",cy:"50%",children:e.jsx(on,{position:"center",fill:"#fff",stroke:"none",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},content:e.jsx($X,{})})})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-subtle",children:"No funnel data available"})})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Lead Source Performance"}),e.jsx("button",{onClick:()=>k(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-lg text-sm",children:"Edit"})]}),O&&O.length>0?e.jsx(Rr,{width:"100%",height:300,children:e.jsxs(xf,{children:[e.jsx(En,{data:O,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,labelLine:!1,label:U,children:O.map((F,W)=>e.jsx(Hn,{fill:M[W%M.length]},`cell-${W}`))}),e.jsx(Ut,{}),e.jsx(Nn,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-48 text-subtle",children:"No lead source data available"})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-on-surface",children:"Sales Rep Leaderboard"}),e.jsx("div",{className:"overflow-x-auto",children:E&&E.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Rep"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Leads Assigned"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Deals Won"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Total Value"})]})}),e.jsx("tbody",{className:"divide-y divide-muted",children:E.map(F=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 font-medium text-on-surface",children:F.name}),e.jsx("td",{className:"px-6 py-4 text-subtle",children:F.leads}),e.jsx("td",{className:"px-6 py-4 text-subtle",children:F.won}),e.jsxs("td",{className:"px-6 py-4 text-subtle",children:["$",F.value.toLocaleString()]})]},F.name))})]}):e.jsx("div",{className:"flex items-center justify-center h-32 text-subtle",children:"No sales rep data available"})})]}),e.jsx(it,{isOpen:y,onClose:()=>S(!1),title:"Select Sales Stages for Funnel",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-subtle",children:"Choose which sales stages to include in the funnel chart:"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(t?.stages||[]).map(F=>{const W=t?.salesFunnelData?.find(H=>H.stageId===F.id),$=W?W.value:0;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.length===0||x.includes(F.id),onChange:H=>{H.target.checked?g(z=>[...z,F.id]):g(z=>z.filter(q=>q!==F.id))},className:"rounded border-muted"}),e.jsxs("span",{className:"text-sm",children:[F.name," (",$,")"]})]},F.id)})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:()=>{g([]),S(!1)},className:"px-4 py-2 text-sm text-subtle hover:text-on-surface",children:"Reset to All"}),e.jsx("button",{onClick:()=>S(!1),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm",children:"Apply"})]})]})}),e.jsx(it,{isOpen:C,onClose:()=>k(!1),title:"Select Lead Sources for Pie Chart",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-subtle",children:"Choose which lead sources to include in the pie chart:"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t?.leadSourceData.map(F=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.length===0||v.includes(F.name),onChange:W=>{W.target.checked?b($=>[...$,F.name]):b($=>$.filter(H=>H!==F.name))},className:"rounded border-muted"}),e.jsxs("span",{className:"text-sm",children:[F.name," (",F.value,")"]})]},F.name))}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:()=>{b([]),k(!1)},className:"px-4 py-2 text-sm text-subtle hover:text-on-surface",children:"Reset to All"}),e.jsx("button",{onClick:()=>k(!1),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm",children:"Apply"})]})]})})]})})},BX=({script:t,onClose:r,onSave:n})=>{const[a,s]=w.useState(t||{name:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return e.jsx(it,{isOpen:!0,onClose:r,title:t?.id?"Edit Call Script":"Create New Script",children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Script Name"}),e.jsx("input",{value:a.name,onChange:l=>s({...a,name:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Script Body"}),e.jsx("textarea",{value:a.body,onChange:l=>s({...a,body:l.target.value}),rows:8,className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0}),e.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", and ",e.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Script"})]})]})})},UX=({campaign:t,scripts:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=w.useState(t||{name:"",scriptId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,f]=w.useState(t?.status==="SCHEDULED"?"later":t?.status==="SENT"?"now":"draft"),[p,x]=w.useState((t?.scheduledAt?new Date(t.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),g=v=>{v.preventDefault();const b={...d};m==="now"?(b.status="SENT",b.sentAt=new Date().toISOString(),b.scheduledAt=null):m==="later"?(b.status="SCHEDULED",b.scheduledAt=new Date(p).toISOString(),b.sentAt=null):(b.status="DRAFT",b.sentAt=null,b.scheduledAt=null),l(b),i()};return e.jsx(it,{isOpen:!0,onClose:i,title:t?.id?"Edit Call Campaign":"Create New Call Campaign",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),e.jsx("input",{value:d.name,onChange:v=>u({...d,name:v.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Call Script"}),e.jsxs("select",{value:d.scriptId,onChange:v=>u({...d,scriptId:v.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a script"}),r.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),e.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive a call in this campaign."}),e.jsx(Qc,{conditions:d.conditions||[],onConditionsChange:v=>u({...d,conditions:v}),users:n,pipelineStages:a,customFieldDefs:s})]}),e.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Start Immediately"})]}),e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:v=>f(v.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&e.jsx("div",{className:"pl-9",children:e.jsx("input",{type:"datetime-local",value:p,onChange:v=>x(v.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},WX=({users:t,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=w.useState("campaigns"),[i,l]=w.useState({type:null,data:null}),[d,u]=w.useState([]),[m,f]=w.useState([]),[p,x]=w.useState(!0),[g,v]=w.useState(null);w.useEffect(()=>{(async()=>{try{x(!0),v(null);const I=localStorage.getItem("token")||localStorage.getItem("authToken"),M=I?{Authorization:`Bearer ${I}`}:{},[D,U]=await Promise.all([fetch("/api/marketing/scripts/call",{headers:M}).then(F=>F.json()).then(F=>F.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/call",{headers:M}).then(F=>F.json()).then(F=>F.data||[]).catch(()=>[])]);u(D||[]),f(U||[])}catch(I){console.error("Failed to fetch call data:",I),v(`Failed to load data: ${I.message}`)}finally{x(!1)}})()},[]);const b=async P=>{try{let I;if(P.id)I=await fetch(`/api/marketing/scripts/call/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});else{const D=localStorage.getItem("token")||localStorage.getItem("authToken");if(!D)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/scripts/call",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(P)})}if(!I.ok)throw new Error("Failed to save script");const M=await I.json();P.id?u(D=>D.map(U=>U.id===P.id?M:U)):u(D=>[...D,M])}catch(I){console.error("Failed to save script:",I),v(`Failed to save script: ${I.message}`)}},y=async P=>{if(confirm("Are you sure you want to delete this script?"))try{if(!(await fetch(`/api/marketing/scripts/call/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete script");u(M=>M.filter(D=>D.id!==P))}catch(I){console.error("Failed to delete script:",I),v(`Failed to delete script: ${I.message}`)}},S=async P=>{try{let I;if(P.id)I=await fetch(`/api/marketing/campaigns/call/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});else{const D=localStorage.getItem("token")||localStorage.getItem("authToken");if(!D)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/campaigns/call",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(P)})}if(!I.ok)throw new Error("Failed to save campaign");const M=await I.json();P.id?f(D=>D.map(U=>U.id===P.id?M:U)):f(D=>[...D,M])}catch(I){console.error("Failed to save campaign:",I),v(`Failed to save campaign: ${I.message}`)}},C=async P=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/call/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");f(M=>M.filter(D=>D.id!==P))}catch(I){console.error("Failed to delete campaign:",I),v(`Failed to delete campaign: ${I.message}`)}},k=async P=>{try{const I={...P,status:"SENT",sentAt:new Date().toISOString()};await S(I),alert("Campaign started successfully!")}catch(I){console.error("Failed to start campaign:",I),v(`Failed to start campaign: ${I.message}`)}},T=async P=>{try{const I={...P,status:"DRAFT",scheduledAt:null};await S(I),alert("Campaign unscheduled successfully!")}catch(I){console.error("Failed to unschedule campaign:",I),v(`Failed to unschedule campaign: ${I.message}`)}};if(p)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading call data..."})]})});if(g)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:g}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const N=(P,I=null)=>l({type:P,data:I}),O=()=>l({type:null,data:null}),E=P=>{switch(P.status){case"SENT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"COMPLETED"});case"DRAFT":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return e.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return e.jsxs("div",{className:"space-y-6",children:[i.type==="script"&&e.jsx(BX,{script:i.data,onClose:O,onSave:b}),i.type==="campaign"&&e.jsx(UX,{campaign:i.data,scripts:d,onClose:O,onSave:S,users:t,pipelineStages:r,customFieldDefs:n}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[e.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),e.jsx("button",{onClick:()=>s("scripts"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="scripts"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Scripts"}),e.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),e.jsxs("button",{onClick:()=>N(a==="scripts"?"script":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="scripts"?"New Script":"New Campaign"]})]}),a==="campaigns"&&(m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(P=>e.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:P.name}),E(P)]}),P.status==="SCHEDULED"&&P.scheduledAt&&e.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(P.scheduledAt).toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.recipientCount.toLocaleString()}),e.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[P.connectionRate,"%"]}),e.jsx("p",{className:"text-xs text-subtle",children:"Connection Rate"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[e.jsx("button",{onClick:()=>N("campaign",P),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),P.status==="DRAFT"&&e.jsx("button",{onClick:()=>k(P),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Start"}),P.status==="SCHEDULED"&&e.jsx("button",{onClick:()=>T(P),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),e.jsx("button",{onClick:()=>C(P.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:e.jsx(V.Delete,{className:"h-5 w-5"})})]})]},P.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Call,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Call Campaigns Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first call campaign to get started with call marketing."}),e.jsxs("button",{onClick:()=>N("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="scripts"&&(d.length>0?e.jsx("div",{className:"bg-surface rounded-xl shadow-lg p-6",children:e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(P=>e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:P.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N("script",P),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:e.jsx(V.Edit,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(P.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:e.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap p-2 bg-muted/50 rounded",children:P.body})]},P.id))})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Call,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Call Scripts Found"}),e.jsx("p",{className:"text-subtle mb-4",children:"Create your first call script to start building campaigns."}),e.jsxs("button",{onClick:()=>N("script"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Script"]})]})})),a==="analytics"&&(m.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(tr,{title:"Total Campaigns",value:m.length.toString(),icon:e.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),e.jsx(tr,{title:"Total Calls Placed",value:m.filter(P=>P.status==="SENT").reduce((P,I)=>P+I.recipientCount,0).toLocaleString(),icon:e.jsx(V.Call,{className:"h-6 w-6 text-purple-400"})}),e.jsx(tr,{title:"Avg. Connection Rate",value:`${(m.reduce((P,I)=>P+I.connectionRate,0)/(m.length||1)).toFixed(1)}%`,icon:e.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}):e.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:e.jsxs("div",{children:[e.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),e.jsx("p",{className:"text-subtle mb-4",children:"Start some call campaigns to see analytics and performance data here."}),e.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[e.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},qX=t=>new Promise(r=>setTimeout(r,t)),zX=({config:t})=>{const[r,n]=w.useState(!1),[a,s]=w.useState([]),[i,l]=w.useState(0),[d,u]=w.useState(""),[m,f]=w.useState({}),[p,x]=w.useState(!1),[g,v]=w.useState(!1),b=w.useRef(null),y=()=>{b.current?.scrollIntoView({behavior:"smooth"})};w.useEffect(y,[a]),w.useEffect(()=>{r&&(s([{sender:"bot",text:t.welcomeMessage}]),l(0),f({}),v(!1),x(!0),setTimeout(()=>{t.questions.length>0&&s(C=>[...C,{sender:"bot",text:t.questions[0].question}]),x(!1)},500))},[r,t.welcomeMessage,t.questions]);const S=C=>{if(C.preventDefault(),!d.trim()||p||g)return;const k={sender:"user",text:d};s(T=>[...T,k]),u("")};return w.useEffect(()=>{(async()=>{if(a.length>0&&a[a.length-1].sender==="user"&&!g&&!p){if(x(!0),i<t.questions.length){const k=t.questions[i],T=a[a.length-1].text,N={...m,[k.crmField]:T};f(N);const O=i+1;if(await qX(1e3),O<t.questions.length){const P=t.questions[O].question.replace(/{{(.*?)}}/g,(I,M)=>N[M.trim()]||"");s(I=>[...I,{sender:"bot",text:P}]),l(O)}else console.log("Chat completed. Captured lead data:",N),s(E=>[...E,{sender:"bot",text:t.thankYouMessage}]),v(!0)}x(!1)}})()},[a,t.questions,t.thankYouMessage,i,g,m,p]),e.jsxs("div",{className:"fixed bottom-5 right-5 z-50",children:[e.jsx("div",{className:`transition-all duration-300 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:e.jsxs("div",{className:"w-80 h-[450px] bg-surface rounded-xl shadow-2xl flex flex-col border border-muted overflow-hidden",children:[e.jsxs("header",{className:"p-4 text-white flex items-center justify-between flex-shrink-0",style:{backgroundColor:t.color},children:[e.jsx("h3",{className:"font-bold",children:"Clienn CRM Assistant"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(V.Close,{className:"w-5 h-5"})})]}),e.jsxs("main",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[a.map((C,k)=>e.jsx("div",{className:`flex ${C.sender==="bot"?"justify-start":"justify-end"}`,children:e.jsx("p",{className:`max-w-[80%] p-2 rounded-lg text-sm ${C.sender==="bot"?"bg-muted text-on-surface":"text-white"}`,style:{backgroundColor:C.sender==="user"?t.color:void 0},children:C.text})},k)),p&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"p-2 rounded-lg bg-muted flex items-center gap-1",children:[e.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce"})]})}),e.jsx("div",{ref:b})]}),e.jsx("footer",{className:"p-2 border-t border-muted flex-shrink-0",children:e.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:C=>u(C.target.value),placeholder:"Type your message...",disabled:g||p,className:"flex-1 bg-background border border-muted rounded-full py-2 px-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500"}),e.jsx("button",{type:"submit",className:"p-2 rounded-full text-white",style:{backgroundColor:t.color},disabled:g||p,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})})]})}),e.jsxs("button",{onClick:()=>n(!r),className:`transition-all duration-300 ease-in-out text-white shadow-lg flex items-center gap-2 ${r?"opacity-0 scale-90 pointer-events-none":"opacity-100 scale-100"}`,style:{backgroundColor:t.color,borderRadius:t.style==="icon"?"50%":"30px",padding:t.style==="icon"?"1rem":"1rem 1.5rem"},children:[e.jsx(V.ChatBubble,{className:"w-6 h-6"}),t.style==="button"&&e.jsx("span",{className:"font-semibold",children:"Chat with us"})]})]})},xP=({isOpen:t,onClose:r,plan:n})=>{const[a,s]=w.useState("form"),[i,l]=w.useState(null),[d,u]=w.useState([]),[m,f]=w.useState({name:"",number:"",expiry:"",cvc:""});w.useEffect(()=>{t&&(s("form"),p())},[t]);const p=async()=>{try{const b=await Le.requestWithRetry("/api/public/enabled-payment-gateways",{method:"GET"});u(b.gateways||[]),b.gateways&&b.gateways.length>0&&l(b.gateways[0])}catch(b){console.error("Failed to fetch enabled gateways:",b),u(["stripe","paypal"]),l("stripe")}};if(!t||!n)return null;const x=b=>{const{name:y,value:S}=b.target;if(y==="number"){const C=S.replace(/\D/g,"").replace(/(\d{4})/g,"$1 ").trim();f(k=>({...k,[y]:C.slice(0,19)}))}else if(y==="expiry"){const C=S.replace(/\D/g,"").replace(/(\d{2})/,"$1/").trim();f(k=>({...k,[y]:C.slice(0,5)}))}else f(y==="cvc"?C=>({...C,[y]:S.replace(/\D/g,"").slice(0,4)}):C=>({...C,[y]:S}))},g=b=>{b.preventDefault(),s("processing"),setTimeout(()=>{s("success")},2e3)},v=()=>{switch(a){case"processing":return e.jsxs("div",{className:"text-center p-8 h-80 flex flex-col justify-center",children:[e.jsxs("svg",{className:"animate-spin h-12 w-12 text-primary-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Processing your request..."}),e.jsx("p",{className:"text-sm text-subtle",children:"This will only take a moment."})]});case"success":return e.jsxs("div",{className:"text-center p-8 h-80 flex flex-col justify-center",children:[e.jsx(V.CheckCircle,{className:"h-16 w-16 text-green-500 mx-auto"}),e.jsx("h3",{className:"mt-4 text-2xl font-bold",children:"Success! Your Trial has Started"}),e.jsx("p",{className:"text-subtle mt-2 max-w-sm mx-auto",children:"Your card will not be charged until your 14-day free trial ends. You can cancel anytime. You can now log in to get started with Clienn CRM."}),e.jsx(jt,{to:"/login",onClick:r,className:"mt-6 inline-block bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-lg",children:"Go to Login"})]});case"form":default:const b={stripe:"https://cdn.worldvectorlogo.com/logos/stripe-4.svg",razorpay:"https://cdn.worldvectorlogo.com/logos/razorpay.svg",paypal:"https://cdn.worldvectorlogo.com/logos/paypal-3.svg",payu:"https://cdn.worldvectorlogo.com/logos/payu.svg",paytm:"https://cdn.worldvectorlogo.com/logos/paytm.svg",square:"https://cdn.worldvectorlogo.com/logos/square-3.svg",braintree:"https://cdn.worldvectorlogo.com/logos/braintree.svg",adyen:"https://cdn.worldvectorlogo.com/logos/adyen.svg","authorize.net":"https://cdn.worldvectorlogo.com/logos/authorize-net.svg"},y={stripe:"Stripe",razorpay:"Razorpay",paypal:"PayPal",payu:"PayU",paytm:"Paytm",square:"Square",braintree:"Braintree",adyen:"Adyen","authorize.net":"Authorize.net"};return e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Start your 14-day free trial"}),e.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-semibold",children:[n.name," Plan"]}),e.jsxs("span",{className:"font-bold text-lg",children:[n.price,e.jsx("span",{className:"text-sm font-normal text-subtle",children:"/mo"})]})]}),e.jsx("ul",{className:"text-xs text-subtle mt-2 space-y-1",children:n.features.map(S=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(V.CheckCircle,{className:"h-3 w-3 text-green-500"})," ",S]},S))})]}),d.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Choose Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(S=>e.jsxs("button",{type:"button",onClick:()=>l(S),className:`p-3 border rounded-lg flex items-center gap-3 hover:bg-muted/50 transition-colors ${i===S?"border-primary-500 bg-primary-50":"border-muted"}`,children:[e.jsx("img",{src:b[S],alt:y[S],className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:y[S]})]},S))})]}),e.jsxs("p",{className:"text-xs text-subtle",children:["After your 14-day trial, your plan will automatically renew at ",n.price,"/month. You can cancel at any time before the trial ends and you won't be charged."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",value:m.name,onChange:x,placeholder:"Name on Card",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),e.jsx("input",{type:"text",name:"number",value:m.number,onChange:x,placeholder:"Card Number",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"expiry",value:m.expiry,onChange:x,placeholder:"MM / YY",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),e.jsx("input",{type:"text",name:"cvc",value:m.cvc,onChange:x,placeholder:"CVC",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"})]}),e.jsx("button",{type:"submit",className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg",children:"Start Free Trial"})]})]})}};return e.jsx(it,{isOpen:t,onClose:a==="processing"?()=>{}:r,title:a==="form"?"Checkout":"",children:v()})},Bj=t=>{const[r,n]=w.useState(null),a=w.useRef(null),s=w.useRef(null);return w.useEffect(()=>{a.current&&a.current.disconnect();const{triggerOnce:i,...l}=t;return a.current=new IntersectionObserver(([d])=>{d.isIntersecting&&(n(d),i&&s.current&&a.current?.unobserve(s.current))},l),s.current&&a.current.observe(s.current),()=>a.current?.disconnect()},[t]),[s,r]},Un=({children:t,className:r,id:n,as:a="section"})=>{const[s,i]=Bj({threshold:.1,triggerOnce:!0}),l=!!i;return e.jsx(a,{id:n,ref:s,className:`fade-in-section ${l?"is-visible":""} ${r}`,children:t})},GX=({value:t})=>{const[r,n]=w.useState(0),[a,s]=Bj({threshold:.5,triggerOnce:!0}),i=!!s;return w.useEffect(()=>{if(i){let l=0;const d=t;if(l===d)return;const m=1500/d,f=setInterval(()=>{l+=1,n(l),l===d&&clearInterval(f)},m);return()=>clearInterval(f)}},[i,t]),e.jsx("span",{ref:a,children:r})},HX=({plan:t,onStartTrial:r})=>{const n=t.price==="$0"?"Get Started":t.name==="Enterprise"?"Contact Us":"Start Free Trial";return e.jsxs("div",{className:`group relative p-8 rounded-2xl border ${t.isPopular?"border-primary-500":"border-muted"} bg-surface flex flex-col transition-all duration-300 hover:scale-[1.03] hover:shadow-2xl hover:shadow-primary-500/10`,children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://tailwindcss.com/_next/static/media/grid.25c96030.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))] dark:invert opacity-5"}),e.jsx("div",{className:"absolute -inset-px rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:`radial-gradient(400px at ${Math.random()*100}% ${Math.random()*100}%, rgba(59, 130, 246, 0.2), transparent 80%)`}}),e.jsxs("div",{className:"relative",children:[t.isPopular&&e.jsx("div",{className:"absolute top-0 -translate-y-[150%] left-1/2 -translate-x-1/2 px-3 py-1 text-sm font-semibold text-white bg-primary-500 rounded-full whitespace-nowrap",children:"Most Popular"}),e.jsx("h3",{className:"text-xl font-bold",children:t.name}),e.jsx("p",{className:"mt-2 text-subtle",children:t.description}),e.jsxs("p",{className:"mt-6 text-4xl font-bold",children:[t.price,e.jsx("span",{className:"text-base font-normal text-subtle",children:"/month"})]}),e.jsx("ul",{className:"mt-6 space-y-3 flex-grow",children:t.features.map(a=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(V.CheckCircle,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:a})]},a))}),e.jsx("button",{onClick:r,className:`mt-8 block w-full text-center px-6 py-3 text-sm font-semibold rounded-lg transition-colors ${t.isPopular?"bg-primary-600 text-white hover:bg-primary-700":"bg-muted text-on-surface hover:bg-primary-500/10"}`,children:n})]})]})},i3=({testimonial:t})=>e.jsxs("div",{className:"w-80 md:w-96 flex-shrink-0 bg-surface p-8 rounded-2xl shadow-lg border border-muted h-full flex flex-col items-center mx-4 transition-transform duration-300 hover:-translate-y-2",children:[e.jsx("img",{src:t.avatar.src,alt:t.avatar.alt,loading:"lazy",className:"w-16 h-16 rounded-full mb-4 object-cover ring-2 ring-muted"}),e.jsxs("p",{className:"text-lg text-on-surface flex-grow text-center",children:['"',t.quote,'"']}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"font-semibold",children:t.author}),e.jsx("p",{className:"text-sm text-subtle",children:t.company})]})]}),VX=({content:t,blogPosts:r})=>{const{hero:n,trustedBy:a,features:s,pricing:i,testimonials:l,faq:d,finalCta:u,growthChart:m,funnel:f,contactForm:p,chatbot:x,blog:g,howItWorks:v,integrations:b}=t,y=fa(),[S,C]=w.useState(s.items[0]),[k,T]=w.useState("monthly"),[N,O]=w.useState(null),[E,P]=w.useState({}),[I,M]=w.useState(!1),[D,U]=w.useState(!1),[F,W]=Bj({threshold:.2,triggerOnce:!0}),$=!!W,[H,z]=w.useState(!1),[q,Q]=w.useState(null),[ee,R]=w.useState(!1),L=w.useRef(null);w.useEffect(()=>{y.hash==="#privacy"&&(R(!0),setTimeout(()=>{L.current?.scrollIntoView({behavior:"smooth",block:"start"})},100))},[y.hash]);const G=X=>{Q(X),z(!0)},K=l.items.slice(0,Math.ceil(l.items.length/2)),ie=l.items.slice(Math.ceil(l.items.length/2)),xe=(X,re)=>{P(de=>({...de,[X]:re}))},pe=async X=>{X.preventDefault(),M(!0),console.log("Submitting to webhook:",p.webhookUrl),console.log("Form data:",E),await new Promise(re=>setTimeout(re,1500)),M(!1),U(!0),P({})},be={Connect:e.jsx(V.Connect,{className:"h-8 w-8"}),AutomateSteps:e.jsx(V.AutomateSteps,{className:"h-8 w-8"}),Grow:e.jsx(V.Grow,{className:"h-8 w-8"})},me={dashboard:e.jsx(V.Dashboard,{className:"h-6 w-6"}),summary:e.jsx(V.Sparkles,{className:"h-6 w-6"}),automation:e.jsx(V.Automation,{className:"h-6 w-6"}),reporting:e.jsx(V.Reports,{className:"h-6 w-6"})};return e.jsxs(e.Fragment,{children:[e.jsx(xP,{isOpen:H,onClose:()=>z(!1),plan:q}),x.enabled&&e.jsx(zX,{config:x}),e.jsx("section",{className:"py-20 sm:py-24 lg:py-32 overflow-hidden",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-on-surface",children:[n.title," ",e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-primary-500 to-purple-500 bg-clip-text text-transparent bg-[length:200%_auto] animate-gradient",children:n.gradientTitle})]}),e.jsx("p",{className:"mt-6 max-w-2xl mx-auto text-lg text-subtle",children:n.subtitle}),e.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row justify-center items-center gap-4",children:[e.jsx("button",{onClick:()=>G(i.monthlyPlans.find(X=>X.isPopular)||i.monthlyPlans[2]),className:"px-8 py-3 text-base font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-transform hover:scale-105 w-full sm:w-auto",children:n.cta1}),e.jsx("a",{href:"#contact",onClick:X=>{X.preventDefault(),document.getElementById("contact")?.scrollIntoView({behavior:"smooth"})},className:"px-8 py-3 text-base font-semibold text-on-surface bg-muted rounded-lg hover:bg-primary-500/10 transition-transform hover:scale-105 w-full sm:w-auto",children:n.cta2})]})]})}),e.jsx("div",{className:"py-12 bg-surface",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-center text-sm font-semibold text-subtle uppercase tracking-wider",children:a.title}),e.jsx("div",{className:"group mt-8 w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:e.jsx("div",{className:"flex w-max animate-infinite-scroll group-hover:[animation-play-state:paused]",children:[...a.logos,...a.logos].map((X,re)=>e.jsx("div",{className:"px-8 flex-shrink-0",children:e.jsx("img",{src:X.src,alt:X.alt,className:"h-12 w-auto transition-transform duration-300 hover:scale-110"})},`${X.name}-${re}`))})})]})}),e.jsx(Un,{id:"how-it-works",className:"py-20 sm:py-24",as:"div",children:e.jsxs("div",{ref:F,className:`container mx-auto px-4 sm:px-6 lg:px-8 fade-in-child ${$?"is-visible":""}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:v.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle max-w-2xl mx-auto",children:v.subtitle})]}),e.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 text-center relative",children:[e.jsx("div",{className:`hidden md:block absolute top-8 left-0 w-full h-px draw-line ${$?"is-visible":""}`,children:e.jsx("svg",{width:"100%",height:"2",className:"overflow-visible",children:e.jsx("path",{className:"line-path",d:"M 16.66% 0 L 83.33% 0",strokeWidth:"2",stroke:"var(--muted)",strokeDasharray:"8 8",fill:"none"})})}),v.steps.map((X,re)=>e.jsxs("div",{className:`p-6 transition-transform duration-300 hover:-translate-y-2 anim-child anim-child-${re+1} relative`,children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"flex items-center justify-center h-16 w-16 mx-auto rounded-full bg-primary-500/10 text-primary-500 ring-8 ring-background",children:be[X.icon]}),e.jsx("div",{className:"absolute -top-2 -right-2 flex items-center justify-center h-8 w-8 rounded-full bg-primary-500 text-white font-bold text-sm",children:re+1})]}),e.jsx("h3",{className:"mt-6 text-xl font-semibold",children:X.title}),e.jsx("p",{className:"mt-2 text-subtle",children:X.description})]},X.id))]})]})}),e.jsx(Un,{id:"features",className:"py-20 sm:py-24 bg-surface",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:s.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:s.subtitle})]}),e.jsxs("div",{className:"mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[e.jsx("div",{role:"tablist","aria-label":"Product features",className:"flex flex-col gap-4",children:s.items.map(X=>e.jsxs("button",{id:`feature-tab-${X.id}`,role:"tab","aria-selected":S.id===X.id,"aria-controls":`feature-panel-${X.id}`,onClick:()=>C(X),className:`p-4 rounded-lg text-left transition-all duration-300 ${S.id===X.id?"bg-primary-500/10 ring-2 ring-primary-500":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${S.id===X.id?"bg-primary-500 text-white":"bg-muted text-primary-500"}`,children:me[X.id]}),e.jsx("h3",{className:"font-semibold text-on-surface",children:X.title})]}),S.id===X.id&&e.jsx("p",{className:"mt-2 text-sm text-subtle pl-12",children:X.description})]},X.id))}),e.jsx("div",{className:"lg:col-span-2 relative h-96",children:s.items.map(X=>e.jsx("div",{id:`feature-panel-${X.id}`,role:"tabpanel","aria-labelledby":`feature-tab-${X.id}`,className:`absolute inset-0 transition-opacity duration-500 ${S.id===X.id?"opacity-100 visible":"opacity-0 invisible"}`,children:e.jsx("img",{src:X.image.src,alt:X.image.alt,loading:"lazy",className:"w-full h-full object-cover rounded-xl shadow-2xl ring-1 ring-muted/50"})},X.id))})]})]})}),e.jsx(Un,{id:"growth",className:"py-20 sm:py-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:m.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:m.subtitle}),e.jsxs("div",{className:"mt-8 bg-primary-500/10 p-6 rounded-lg text-center",children:[e.jsxs("p",{className:"text-5xl font-bold text-primary-500",children:[e.jsx(GX,{value:m.stat.value}),"%"]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-primary-600",children:m.stat.label})]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted",children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:"Typical Growth Trajectory"}),e.jsx(Rr,{width:"100%",height:250,children:e.jsxs(hf,{data:m.chartData,children:[e.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),e.jsx(Kn,{dataKey:"month",stroke:"var(--subtle)"}),e.jsx(Cn,{stroke:"var(--subtle)",tickFormatter:X=>`${X}%`}),e.jsx(Ut,{cursor:{fill:"var(--muted)"},contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"},formatter:X=>[`${X}%`,"Conversion Rate"]}),e.jsx(Vn,{dataKey:"value",name:"Conversion Rate",fill:"#3b82f6",radius:[4,4,0,0]})]})})]})]})})}),e.jsx(Un,{id:"funnel",className:"py-20 sm:py-24 bg-surface",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:f.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:f.subtitle}),f.stages.length>1&&e.jsxs("div",{className:"mt-8 bg-purple-500/10 p-6 rounded-lg text-center",children:[e.jsxs("p",{className:"text-5xl font-bold text-purple-500",children:[(f.stages[f.stages.length-1].value/f.stages[0].value*100).toFixed(1),"%"]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-purple-600",children:"Overall Conversion Rate"})]})]}),e.jsx("div",{className:"bg-background p-6 rounded-xl shadow-lg border border-muted h-[400px]",children:e.jsx(Rr,{width:"100%",height:"100%",children:e.jsxs(dP,{children:[e.jsx(Ut,{contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"}}),e.jsxs(Ha,{dataKey:"value",data:f.stages,isAnimationActive:!0,children:[f.stages.map((X,re)=>e.jsx(Hn,{fill:["#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef"][re%5]},`cell-${re}`)),e.jsx(on,{position:"center",fill:"#fff",stroke:"none",dataKey:"name",className:"font-semibold"})]})]})})})]})})}),e.jsx(Un,{id:"integrations",className:"py-20 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:b.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle max-w-2xl mx-auto",children:b.subtitle})]}),e.jsx("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center",children:b.logos.map(X=>e.jsx("div",{className:"flex justify-center transition duration-300 transform hover:scale-110 hover:shadow-2xl rounded-full p-2",children:e.jsx("img",{src:X.src,alt:X.alt,className:"h-12 w-auto"})},X.name))})]})}),e.jsx(Un,{id:"pricing",className:"py-20 sm:py-24 bg-surface",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:i.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:i.subtitle})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[e.jsx("span",{className:`font-medium ${k==="monthly"?"text-primary-500":"text-subtle"}`,children:"Monthly"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k==="yearly",onChange:()=>T(k==="monthly"?"yearly":"monthly"),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-muted rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]}),e.jsx("span",{className:`font-medium ${k==="yearly"?"text-primary-500":"text-subtle"}`,children:"Yearly"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2.5 py-1 rounded-full dark:bg-green-900 dark:text-green-300",children:"Save 20%"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:(k==="monthly"?i.monthlyPlans:i.yearlyPlans).map(X=>{const re=()=>{X.name==="Free"?window.location.hash="/login":X.name==="Enterprise"?document.getElementById("contact")?.scrollIntoView({behavior:"smooth"}):G(X)};return e.jsx(HX,{plan:X,onStartTrial:re},X.name)})})]})}),e.jsx(Un,{id:"testimonials",className:"py-20 sm:py-24",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center relative",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:l.title}),e.jsxs("div",{className:"mt-16 space-y-8",children:[e.jsx("div",{className:"group w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:e.jsx("div",{className:"flex w-max animate-infinite-scroll group-hover:[animation-play-state:paused]",children:[...K,...K].map((X,re)=>e.jsx(i3,{testimonial:X},`${X.id}-1-${re}`))})}),e.jsx("div",{className:"group w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:e.jsx("div",{className:"flex w-max animate-infinite-scroll-reverse group-hover:[animation-play-state:paused]",children:[...ie,...ie].map((X,re)=>e.jsx(i3,{testimonial:X},`${X.id}-2-${re}`))})})]})]})}),e.jsx(Un,{id:"blog",className:"py-20 sm:py-24 bg-surface",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:g.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:g.subtitle})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.slice(0,3).map(X=>e.jsxs(jt,{to:`/blog/${X.slug}`,className:"group block bg-background rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[e.jsx("div",{className:"overflow-hidden",children:e.jsx("img",{src:X.featuredImage.src,alt:X.featuredImage.alt,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:X.tags.join(", ")}),e.jsx("h3",{className:"mt-2 text-lg font-bold group-hover:text-primary-500 transition-colors",children:X.title}),e.jsx("p",{className:"mt-2 text-sm text-subtle line-clamp-3",children:X.excerpt})]})]},X.id))}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(jt,{to:"/blog",className:"font-semibold text-primary-500 hover:text-primary-600",children:"View All Posts "})})]})}),e.jsx(Un,{id:"faq",className:"py-20 sm:py-24 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:d.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:d.subtitle})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 max-w-4xl mx-auto",children:d.items.map(X=>e.jsxs("div",{className:"border-b border-muted",children:[e.jsxs("button",{id:`faq-button-${X.id}`,onClick:()=>O(N===X.id?null:X.id),"aria-expanded":N===X.id,"aria-controls":`faq-panel-${X.id}`,className:"w-full flex justify-between items-center text-left font-semibold py-4 hover:bg-muted/50 rounded-t-lg px-2 text-on-surface",children:[e.jsx("span",{children:X.q}),e.jsx("span",{className:`transform transition-transform duration-300 ${N===X.id?"rotate-180":""}`,children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("div",{id:`faq-panel-${X.id}`,role:"region","aria-labelledby":`faq-button-${X.id}`,className:`overflow-hidden transition-all duration-300 ease-in-out ${N===X.id?"max-h-60":"max-h-0"}`,children:e.jsx("p",{className:"pt-2 pb-4 px-2 text-subtle",children:X.a})})]},X.id))})]})}),e.jsxs(Un,{id:"contact",className:"py-20 sm:py-24 relative overflow-hidden bg-surface",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary-500/10 to-purple-500/10 blur-3xl opacity-50 dark:opacity-20"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:p.title}),e.jsx("p",{className:"mt-4 text-lg text-subtle",children:p.subtitle})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-start",children:[e.jsxs("div",{className:"space-y-8 order-2 lg:order-1",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:e.jsx(V.MapPin,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Our Office"}),e.jsx("p",{className:"text-subtle",children:p.address})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:e.jsx(V.Envelope,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Email Us"}),e.jsx("a",{href:`mailto:${p.email}`,className:"text-subtle hover:text-primary-500 transition-colors",children:p.email})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:e.jsx(V.Phone,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Call Us"}),e.jsx("a",{href:`tel:${p.phone.replace(/\s/g,"")}`,className:"text-subtle hover:text-primary-500 transition-colors",children:p.phone})]})]})]}),e.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-2xl overflow-hidden shadow-lg border border-muted/50",children:e.jsx("iframe",{src:p.mapSrc,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Location of Our Office on Google Maps"})})]}),e.jsx("div",{className:"bg-surface/50 dark:bg-surface/20 backdrop-blur-lg p-8 rounded-2xl shadow-2xl border border-muted/50 order-1 lg:order-2",children:D?e.jsxs("div",{className:"text-center p-8 transition-all duration-500",children:[e.jsx(V.CheckCircle,{className:"h-16 w-16 mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Thank You!"}),e.jsx("p",{className:"text-subtle mt-2",children:"Your message has been sent. Our team will get back to you shortly."})]}):e.jsxs("form",{onSubmit:pe,className:"space-y-8",children:[p.fields.map(X=>e.jsxs("div",{className:"relative z-0",children:[X.type==="textarea"?e.jsx("textarea",{id:X.id,name:X.id,rows:4,required:X.required,value:E[X.id]||"",onChange:re=>xe(X.id,re.target.value),className:"block py-2.5 px-0 w-full text-sm text-on-surface bg-transparent border-0 border-b-2 border-muted appearance-none focus:outline-none focus:ring-0 focus:border-primary-500 peer",placeholder:" "}):e.jsx("input",{id:X.id,name:X.id,type:X.type,required:X.required,value:E[X.id]||"",onChange:re=>xe(X.id,re.target.value),className:"block py-2.5 px-0 w-full text-sm text-on-surface bg-transparent border-0 border-b-2 border-muted appearance-none focus:outline-none focus:ring-0 focus:border-primary-500 peer",placeholder:" "}),e.jsx("label",{htmlFor:X.id,className:"absolute text-sm text-subtle duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-primary-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:X.label})]},X.id)),e.jsx("button",{type:"submit",disabled:I,className:"w-full flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg disabled:bg-primary-400 transition-all duration-300 transform hover:scale-105",children:I?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):e.jsxs(e.Fragment,{children:["Send Message ",e.jsx(V.ChevronRight,{className:"h-5 w-5"})]})})]})})]})]})]}),e.jsxs(Un,{id:"privacy",className:"relative py-20 sm:py-24 bg-surface overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-purple-500/5"}),e.jsx("div",{className:"absolute top-1/4 left-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl opacity-30"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl opacity-30"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full shadow-lg",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Privacy Policy"})]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Last updated: 13 October 2025"})]}),e.jsxs("div",{className:"relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl shadow-2xl border border-slate-700/50 overflow-hidden backdrop-blur-sm hover:shadow-blue-500/10 transition-shadow duration-500",children:[e.jsx("div",{className:"absolute -inset-px rounded-2xl opacity-0 hover:opacity-100 transition-opacity duration-500 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-blue-500/20 blur-sm"}),e.jsxs("div",{className:"absolute inset-0 opacity-40",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-500/10 to-transparent rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-purple-500/10 to-transparent rounded-full blur-2xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-full blur-3xl"})]}),e.jsxs("button",{onClick:()=>R(!ee),className:"relative w-full p-6 text-left flex items-center justify-between hover:bg-slate-800/50 transition-all duration-300 group","aria-expanded":ee,"aria-controls":"privacy-content",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors",children:e.jsx("svg",{className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("span",{className:"text-lg font-semibold text-white group-hover:text-blue-300 transition-colors",children:"Privacy Policy"})]}),e.jsx("svg",{className:`h-5 w-5 text-gray-400 transform transition-transform duration-300 ${ee?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{id:"privacy-content",className:`relative overflow-hidden transition-all duration-300 ease-in-out ${ee?"max-h-[40vh] opacity-100":"max-h-0 opacity-0"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-slate-800/50 to-transparent pointer-events-none z-10"}),e.jsx("div",{className:`p-6 ${ee?"overflow-y-auto":""}`,style:{maxHeight:ee?"40vh":"0px"},children:e.jsxs("div",{className:"prose prose-sm max-w-none text-white",children:[e.jsxs("p",{className:"mb-4 text-white",children:["At ",e.jsx("strong",{className:"text-blue-400",children:"Clienn CRM"}),", your privacy and data protection are our highest priorities. This Privacy Policy explains how we collect, use, store, and protect your personal and organizational data when you use our CRM, LMS, and integrated marketing services."]}),e.jsx("p",{className:"mb-6 text-white",children:"By using Clienn CRM, you agree to this Privacy Policy. If you do not agree, please stop using the platform immediately."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"1. Overview"}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"2. What Information We Collect"}),e.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.1 Account Information"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"Name, email address, phone number"}),e.jsx("li",{children:"Organization details, designation, and team role"}),e.jsx("li",{children:"Billing and subscription information"})]}),e.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.2 Usage Data"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"Actions you take within the CRM (lead creation, task updates, note additions)"}),e.jsx("li",{children:"Feature usage metrics (e.g., campaigns, imports, communication logs)"}),e.jsx("li",{children:"Device details (browser type, OS, IP address, time zone)"})]}),e.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.3 Leads and Contacts"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"Lead name, email, phone number, and any notes or interactions logged by your team"}),e.jsx("li",{children:"Source information (e.g., Facebook Lead Ads, Google Forms, or manual entries)"})]}),e.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.4 Integrations"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"API keys and tokens from third-party services (e.g., Meta, Google, WhatsApp, Zoom)"}),e.jsx("li",{children:"Consent-based data sharing for leads and campaigns"})]}),e.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.5 Cookies and Tracking"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We use cookies for session management, analytics, and feature optimization."}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can control cookie preferences in your browser."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"3. How We Use the Data"}),e.jsx("p",{className:"mb-4 text-sm text-white",children:"We process your data for the following purposes:"}),e.jsx("div",{className:"overflow-x-auto mb-6",children:e.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Purpose"}),e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Description"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Account Management"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To create, manage, and authenticate user accounts"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Service Delivery"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To provide CRM/LMS features, integrations, and dashboards"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Communication"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To send updates, notifications, and support messages"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"AI Recommendations"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To improve lead scoring, engagement prediction, and campaign optimization"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Compliance & Security"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To prevent fraud, unauthorized access, and misuse of the system"})]})]})]})}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"4. AI-Driven Processing"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"Our platform uses AI models to recommend actions (e.g., lead priority, follow-up timing, and communication templates)."}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"These recommendations are based on anonymized and aggregated data."}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"We do not use your private lead data for any external AI model training."}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can request opt-out of AI-based insights anytime."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"5. Data Sharing & Third-Party Services"}),e.jsx("p",{className:"mb-4 text-sm font-semibold text-white",children:"We never sell your data."}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We may share limited information only under these conditions:"}),e.jsx("div",{className:"overflow-x-auto mb-6",children:e.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Type"}),e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Shared With"}),e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Purpose"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Analytics"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Google Analytics, Mixpanel"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To understand feature usage"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Integrations"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Meta, Google, WhatsApp API"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To sync leads and send communications"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Payment Gateways"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Razorpay, Stripe"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"For subscription and plan renewals"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Cloud Services"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"AWS, MongoDB Atlas, Neon PostgreSQL"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"For secure hosting and data storage"})]})]})]})}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"All third parties comply with strict contractual obligations and data protection standards."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"6. Organization-Level Privacy"}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"Clienn CRM operates in a multi-tenant architecture:"}),e.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"Each organization's data is logically and physically isolated."}),e.jsx("li",{children:"Super Admins can view only their organization's users and leads."}),e.jsx("li",{children:"No cross-organization data access is permitted."})]}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"7. Data Retention Policy"}),e.jsx("div",{className:"overflow-x-auto mb-6",children:e.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Data Type"}),e.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Retention Period"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Account and organization data"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Until account deletion"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Leads and communications"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"As long as your subscription is active"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Billing records"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"7 years (as required by law)"})]}),e.jsxs("tr",{className:"bg-slate-800",children:[e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Logs and backups"}),e.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Up to 90 days"})]})]})]})}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can request data deletion via email or the in-app Support section."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"8. Data Security"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We implement multiple layers of protection:"}),e.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:"SSL/TLS encryption for all data in transit"}),e.jsx("li",{children:"Role-based access control (RBAC)"}),e.jsx("li",{children:"Encrypted passwords and tokens (bcrypt + JWT)"}),e.jsx("li",{children:"Regular security audits and vulnerability scans"}),e.jsx("li",{children:"Geo-redundant backups and uptime monitoring"})]}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"9. Your Rights"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"You have full control over your data:"}),e.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Access"}),"  Request a copy of your data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Correction"}),"  Update inaccurate information"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Deletion"}),"  Request permanent deletion"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Portability"}),"  Export your CRM data in structured format"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Consent Withdrawal"}),"  Opt-out of marketing or data sharing"]})]}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"To exercise any of these rights, contact us via the in-app support form or email below."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"10. International Data Transfer"}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"If you are located outside India, your data may be processed in India or other countries where our servers and partners are located. We ensure equivalent data protection measures in compliance with GDPR and DPDP (India)."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"11. Children's Privacy"}),e.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"Our services are not directed to individuals under the age of 18. We do not knowingly collect personal data from minors."}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"12. Policy Updates"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We may update this Privacy Policy periodically."}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"When changes are made, we will:"}),e.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[e.jsx("li",{children:'Update the "Last Updated" date, and'}),e.jsx("li",{children:"Notify all users via dashboard or email."})]}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"13. Contact Us"}),e.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"If you have any questions, concerns, or complaints about privacy or data usage:"}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg mb-6",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Data Protection Officer (DPO)"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"Clienn CRM | Zetta Edutech Private Limited"}),e.jsx("a",{href:"mailto:support@Clienn CRM.io",className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:" Email: support@Clienn CRM.io"}),e.jsx("p",{className:"text-sm text-gray-200",children:" Address: New Delhi, India"})]})]})})]})]})]})})]}),e.jsxs("section",{className:"relative bg-slate-900 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-purple-600 opacity-80"}),e.jsx("div",{className:"absolute -bottom-1/2 -left-1/4 w-full h-full bg-gradient-to-r from-primary-500/30 to-transparent rounded-full blur-3xl transform rotate-45"}),e.jsxs("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[e.jsx("h2",{className:"text-4xl font-bold",children:u.title}),e.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-slate-200",children:u.subtitle}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>G(i.monthlyPlans.find(X=>X.isPopular)||i.monthlyPlans[2]),className:"inline-flex items-center gap-2 px-8 py-3 text-base font-semibold text-primary-600 bg-white rounded-lg hover:bg-gray-200 transition-transform hover:scale-105 shadow-lg",children:[u.cta," ",e.jsx(V.Rocket,{className:"h-5 w-5"})]})})]})]})]})},o3=({lead:t,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=w.useState("template"),[d,u]=w.useState(r[0]?.id||""),[m,f]=w.useState(""),p=()=>{if(i==="custom")return m;const g=r.find(v=>v.id===d);return g?g.body.replace(/{{name}}/g,t.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,t.course||"the course").replace(/{{dealValue}}/g,t.dealValue.toLocaleString()):""},x=()=>{const g=p();if(!g.trim()){alert("Message cannot be empty.");return}s(g)};return e.jsxs(it,{isOpen:!0,onClose:a,title:`Send WhatsApp to ${t.name}`,children:[e.jsxs("div",{className:"flex border-b border-muted mb-4",children:[e.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),e.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),e.jsx("select",{value:d,onChange:g=>u(g.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),e.jsx("textarea",{value:m,onChange:g=>f(g.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[e.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),e.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:p()})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[e.jsx(V.Whatsapp,{className:"h-5 w-5 mr-2"})," Send Message"]})]})]})},l3=({lead:t,onAddTask:r,onCancel:n,currentUser:a})=>{const[s,i]=w.useState(""),[l,d]=w.useState(""),[u,m]=w.useState(""),[f,p]=w.useState(!0),x=w.useRef(null),g=w.useRef(null);w.useEffect(()=>{const C=new Date;C.setDate(C.getDate()+1),C.setHours(9,0,0,0);const k=C.toISOString().split("T")[0],T=C.toTimeString().slice(0,5);d(k),m(T)},[]);const v=C=>{if(C.preventDefault(),!s.trim())return;if(!l||!u){alert("Please select a due date and time.");return}const k=new Date(`${l}T${u}`);if(k<=new Date){alert("Please select a future date and time.");return}const T={title:s,leadId:t.id,assignedToId:t.assignedToId,isCompleted:!1,dueDate:k.toISOString(),createdById:a.id,organizationId:a.organizationId,reminderEnabled:f};f&&b(T,k),r(T),i(""),n()},b=(C,k)=>{const T=new Date,N=k.getTime()-T.getTime();N>0&&setTimeout(()=>{y(C)},N)},y=C=>{"Notification"in window&&Notification.permission==="granted"?new Notification(`Task Reminder: ${C.title}`,{body:`Task for lead "${t.name}" is due now`,icon:"/favicon.ico",tag:`task-${C.id}`}):S(C)},S=C=>{const k=document.createElement("div");k.id="task-reminder-popup",k.innerHTML=`
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-surface rounded-xl p-6 max-w-lg mx-4 shadow-2xl border border-muted">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-500 text-white rounded-full p-3 mr-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-on-surface"> Task Reminder</h3>
                            <p class="text-sm text-subtle">Don't miss your important task!</p>
                        </div>
                    </div>

                    <div class="bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 mb-6 border-l-4 border-primary-500">
                        <h4 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-2">
                            "${C.title}"
                        </h4>
                        <p class="text-primary-700 dark:text-primary-300 mb-3">
                            Hey there! You have an important task to complete for your lead <strong>"${t.name}"</strong>.
                        </p>
                        <p class="text-primary-600 dark:text-primary-400 text-sm">
                            Completing this task will boost your performance and help convert more leads. Stay on top of your game! 
                        </p>
                    </div>

                    <div class="flex gap-3 justify-end">
                        <button onclick="document.getElementById('task-reminder-popup').remove()"
                                class="bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-6 rounded-lg transition-colors">
                            Remind me later
                        </button>
                        <button onclick="window.location.href='/leads/${t.id}'"
                                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-lg flex items-center gap-2 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                            Go to Task
                        </button>
                    </div>

                    <div class="mt-4 text-center">
                        <p class="text-xs text-subtle">
                            This reminder will auto-close in <span id="countdown">10</span> seconds
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(k);let T=10;const N=k.querySelector("#countdown"),O=setInterval(()=>{if(T--,N&&(N.textContent=T.toString()),T<=0){clearInterval(O);const E=document.getElementById("task-reminder-popup");E&&E.remove()}},1e3);setTimeout(()=>{clearInterval(O);const E=document.getElementById("task-reminder-popup");E&&E.remove()},1e4)};return e.jsxs("form",{onSubmit:v,className:"p-4 space-y-4 bg-surface border border-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Task Title"}),e.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),placeholder:"What needs to be done?",autoFocus:!0,className:"w-full bg-background border border-muted p-3 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:x,type:"date",value:l,onChange:C=>d(C.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-month-field]:text-on-surface [&::-webkit-datetime-edit-day-field]:text-on-surface [&::-webkit-datetime-edit-year-field]:text-on-surface",min:new Date().toISOString().split("T")[0],required:!0}),e.jsx("button",{type:"button",onClick:()=>{x.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:e.jsx(V.Calendar,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:g,type:"time",value:u,onChange:C=>m(C.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-hour-field]:text-on-surface [&::-webkit-datetime-edit-minute-field]:text-on-surface [&::-webkit-datetime-edit-ampm-field]:text-on-surface",required:!0}),e.jsx("button",{type:"button",onClick:()=>{g.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:e.jsx(V.Activity,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"reminder-enabled",checked:f,onChange:C=>p(C.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),e.jsx("label",{htmlFor:"reminder-enabled",className:"text-sm text-subtle",children:"Enable reminder notification"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:n,className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Add Task"})]})]})},Vl=({title:t,children:r,initiallyOpen:n=!1})=>{const[a,s]=w.useState(n);return e.jsxs("div",{className:"border-t border-muted first-of-type:border-t-0",children:[e.jsxs("button",{onClick:()=>s(!a),className:"md:cursor-default md:pointer-events-none w-full flex justify-between items-center py-3 text-left",children:[e.jsx("h4",{className:"font-semibold text-on-surface",children:t}),e.jsx(V.ChevronRight,{className:`md:hidden h-5 w-5 text-subtle transition-transform ${a?"rotate-90":""}`})]}),e.jsx("div",{className:`pl-2 pb-4 space-y-4 md:block ${a?"block":"hidden"}`,children:r})]})},KX=({leads:t,users:r,tasks:n,pipelineStages:a,customFieldDefs:s,whatsAppTemplates:i,smsTemplates:l,onUpdateLead:d,onUpdateTask:u,onAddTask:m,onAddNote:f,onScheduleMessage:p,onRefreshLeadById:x,currentUser:g,isStandalone:v=!1,isDedicatedPage:b=!1})=>{const{leadId:y}=y3(),S=t.find(Z=>Z.id===y||Z._id===y),[C,k]=w.useState(!1),[T,N]=w.useState(!1),[O,E]=w.useState(0);console.log("LeadDetailPage Debug:",{leadId:y,leadFound:!!S,leadsCount:t.length,availableLeadIds:t.map(Z=>({id:Z.id,_id:Z._id})),firstFewLeads:t.slice(0,3).map(Z=>({id:Z.id,_id:Z._id,name:Z.name}))}),w.useEffect(()=>{!S&&y&&x&&!C&&(console.log("Lead not found in array, attempting silent refresh from backend:",y),k(!0),x(y).then(Z=>{Z?console.log("Successfully refreshed lead from backend:",Z):console.log("Lead not found in backend either"),k(!1)}).catch(Z=>{console.error("Failed to refresh lead:",Z),k(!1)}))},[S,y,x]);const[P,I]=w.useState("tasks"),[M,D]=w.useState(S||null),[U,F]=w.useState(!1),[W,$]=w.useState(!1),[H,z]=w.useState(!1),[q,Q]=w.useState(!1),[ee,R]=w.useState({open:!1,type:null}),[L,G]=w.useState("idle"),[K,ie]=w.useState(!1),[xe,pe]=w.useState(new Set),be=w.useMemo(()=>S,[S]),me=w.useMemo(()=>n.filter(Z=>Z.leadId===S?.id),[n,S?.id]);w.useEffect(()=>{S&&D(S)},[S]),w.useEffect(()=>{S&&(ie(!1),pe(new Set))},[S]);const X=w.useCallback(async()=>{if(x&&M?.id&&!T){const Z=Date.now();if(Z-O<5e3){console.log("Refresh throttled, too soon since last refresh");return}try{console.log("Refreshing lead data for:",M.id),E(Z),N(!0);const Pe=await x(M.id);Pe?(console.log("Lead data refreshed successfully"),D(Pe),ie(!1),pe(new Set)):console.warn("No refreshed lead data received")}catch(Pe){console.error("Failed to refresh lead data:",Pe)}finally{setTimeout(()=>{N(!1)},1e3)}}},[x,M?.id,T,O]),re=w.useCallback((Z,Pe)=>{if(!M)return;const lt={...M,[Z]:Pe};D(lt),ie(!0),pe(At=>new Set(At).add(Z))},[M]),de=async Z=>{if(!(!M||!be)&&(F(!1),M.id)){G("saving");try{await f({content:`Sent WhatsApp: "${Z}"`,leadId:M.id}),G("saved"),await X(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Pe){console.error("Failed to save WhatsApp activity:",Pe),G("error"),setTimeout(()=>G("idle"),3e3)}}},Be=async Z=>{if(!(!M||!be)&&($(!1),M.id)){G("saving");try{await f({content:`Sent SMS: "${Z}"`,leadId:M.id}),G("saved"),await X(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Pe){console.error("Failed to save SMS activity:",Pe),G("error"),setTimeout(()=>G("idle"),3e3)}}},Me=async(Z,Pe)=>{if(!(!M||!be)&&(z(!1),M.id)){G("saving");try{await f({content:`Logged call. Outcome: ${Z}. Notes: "${Pe}"`,leadId:M.id}),G("saved"),await X(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(lt){console.error("Failed to save call log:",lt),G("error"),setTimeout(()=>G("idle"),3e3)}}},[Ee,Xe]=w.useState(!1),[ge,De]=w.useState(""),ae=()=>{Xe(!0),De("")},ye=async()=>{if(!M||!ge.trim())return;const Z=ge.trim();if(Xe(!1),De(""),M.id){G("saving");try{await f({content:Z,leadId:M.id}),G("saved"),await X(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Pe){console.error("Failed to save note:",Pe),G("error"),setTimeout(()=>G("idle"),3e3)}}},Oe=async()=>{if(!(!M||!be)){G("saving");try{const{_id:Z,createdAt:Pe,updatedAt:lt,...At}=M,ft={...At,id:M.id};await d(ft,be),G("saved"),ie(!1),pe(new Set),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Z){console.error("Failed to save lead:",Z),G("error"),setTimeout(()=>G("idle"),3e3)}}};return w.useEffect(()=>()=>{},[]),!M||!be?C||T?e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold",children:T?"Refreshing lead...":"Loading lead..."}),e.jsxs("p",{className:"text-subtle mt-2",children:["Lead ID: ",y]})]}):(console.error("Lead not found:",{leadId:y,availableLeads:t.map(Z=>({id:Z.id,_id:Z._id})),leadExists:t.some(Z=>Z.id===y||Z._id===y),isLoadingLead:C}),e.jsxs("div",{className:"text-center p-8",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Lead not found"}),e.jsxs("p",{className:"text-subtle mt-2",children:["Lead ID: ",y]}),e.jsxs("p",{className:"text-subtle",children:["Available leads: ",t.length]}),e.jsx(jt,{to:"/leads",className:"text-primary-500 mt-4 inline-block",children:"Go back to leads list"})]})):b?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-surface border-b border-muted shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(jt,{to:"/leads",className:"flex items-center gap-2 text-subtle hover:text-on-surface",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Leads"]}),e.jsx("div",{className:"h-6 w-px bg-muted"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-on-surface",children:M.name}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-primary-100 text-primary-800 rounded-full",children:a.find(Z=>Z.id===M.stage)?.name||"Unknown Stage"}),e.jsx("span",{className:"text-sm text-subtle",children:r.find(Z=>Z.id===M.assignedToId)?.name||"Unassigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[K&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mr-4",children:[e.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Unsaved changes"})]}),e.jsx("button",{onClick:Oe,disabled:L==="saving",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium py-2 px-4 rounded-lg flex items-center gap-2",children:L==="saving"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes ",xe.size>0&&`(${xe.size})`]})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-on-surface mb-4",children:"Contact & Deal Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Contact Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),e.jsx("input",{type:"text",value:M.name,onChange:Z=>re("name",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),e.jsx("input",{type:"email",value:M.email,onChange:Z=>re("email",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),e.jsx("input",{type:"tel",value:M.phone,onChange:Z=>re("phone",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:M.alternatePhone,onChange:Z=>re("alternatePhone",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),e.jsx("input",{type:"text",value:M.company,onChange:Z=>re("company",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),e.jsx("input",{type:"text",value:M.city,onChange:Z=>re("city",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),e.jsxs("select",{value:M.source,onChange:Z=>re("source",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Facebook",children:"Facebook"}),e.jsx("option",{value:"Google Ads",children:"Google Ads"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Cold Call",children:"Cold Call"}),e.jsx("option",{value:"Chatbot",children:"Chatbot"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),e.jsx("select",{value:M.assignedToId,onChange:Z=>re("assignedToId",parseInt(Z.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Deal Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),e.jsx("select",{value:M.stage,onChange:Z=>re("stage",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:a.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),e.jsx("input",{type:"number",value:M.dealValue,onChange:Z=>re("dealValue",Number(Z.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),e.jsx("input",{type:"text",value:M.course,onChange:Z=>re("course",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Lead Score"}),e.jsx("input",{type:"number",value:M.score,onChange:Z=>re("score",Number(Z.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Marketing Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),e.jsx("input",{type:"text",value:M.campaign,onChange:Z=>re("campaign",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),e.jsx("input",{type:"text",value:Array.isArray(M.tags)?M.tags.join(", "):"",onChange:Z=>re("tags",Z.target.value.split(",").map(Pe=>Pe.trim()).filter(Boolean)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Comma-separated tags"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Facebook Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),e.jsx("input",{type:"text",value:M.facebookCampaign||"",onChange:Z=>re("facebookCampaign",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),e.jsx("input",{type:"text",value:M.facebookAdset||"",onChange:Z=>re("facebookAdset",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),e.jsx("input",{type:"text",value:M.facebookAd||"",onChange:Z=>re("facebookAd",Z.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Custom Fields"}),e.jsx("div",{className:"space-y-3",children:s.map(Z=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:Z.name}),e.jsx("input",{type:Z.type==="date"?"date":"text",value:M.customFields?.[Z.id]||"",onChange:Pe=>{const lt={...M.customFields||{},[Z.id]:Pe.target.value},At={...M,customFields:lt};D(At),ie(!0),pe(ft=>new Set(ft).add(`customField_${Z.id}`))},className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]},Z.id))})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-muted",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[e.jsx(V.Call,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Log Call"})]}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[e.jsx(V.Whatsapp,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"WhatsApp"})]}),e.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[e.jsx(V.SMS,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"SMS"})]}),e.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[e.jsx(V.Tasks,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Add Task"})]}),e.jsxs("button",{onClick:()=>ae(),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[e.jsx(V.Note,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Add Note"})]})]})}),e.jsx("div",{className:"border-b border-muted",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>I("tasks"),className:`relative px-4 py-3 text-sm font-medium ${P==="tasks"?"border-b-2 border-primary-500 text-primary-600":"text-subtle hover:text-on-surface"}`,children:["Tasks",me.filter(Z=>!Z.isCompleted).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:me.filter(Z=>!Z.isCompleted).length})})]}),e.jsxs("button",{onClick:()=>I("scheduled"),className:`relative px-4 py-3 text-sm font-medium ${P==="scheduled"?"border-b-2 border-primary-500 text-primary-600":"text-subtle hover:text-on-surface"}`,children:["Scheduled",(M.scheduledMessages||[]).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(M.scheduledMessages||[]).length})})]})]})}),e.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[P==="tasks"&&e.jsxs("div",{className:"space-y-2",children:[q&&e.jsx(l3,{lead:M,onAddTask:m,onCancel:()=>Q(!1),currentUser:g}),me.map(Z=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[e.jsx("input",{type:"checkbox",checked:Z.isCompleted,onChange:()=>u({...Z,isCompleted:!Z.isCompleted}),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),e.jsx("p",{className:`flex-grow text-sm ${Z.isCompleted?"line-through text-subtle":""}`,children:Z.title}),e.jsx("p",{className:"text-xs text-subtle",children:new Date(Z.dueDate).toLocaleDateString()})]},Z.id||Z._id)),me.length===0&&!q&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),P==="scheduled"&&e.jsxs("div",{className:"space-y-3",children:[(M.scheduledMessages||[]).map(Z=>e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsxs("p",{className:"text-sm font-semibold",children:[Z.type," scheduled for ",new Date(Z.scheduledAt).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-subtle mt-1",children:['"',Z.content,'"']})]},Z.id)),(M.scheduledMessages||[]).length===0&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})})]})}),U&&e.jsx(o3,{lead:M,templates:i,currentUser:g,onClose:()=>F(!1),onSend:de}),W&&e.jsx(wy,{lead:M,templates:l,currentUser:g,onClose:()=>$(!1),onSend:Be}),H&&e.jsx(jy,{onClose:()=>z(!1),onLog:Me}),ee.open&&ee.type&&e.jsx(yy,{lead:M,currentUser:g,type:ee.type,onClose:()=>R({open:!1,type:null}),onSchedule:p}),Ee&&e.jsx(it,{isOpen:Ee,onClose:()=>Xe(!1),title:"Add Note",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Note Content"}),e.jsx("textarea",{value:ge,onChange:Z=>De(Z.target.value),rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your note...",autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:()=>Xe(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:ye,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add Note"})]})]})})]}):e.jsxs("div",{className:"space-y-6",children:[U&&e.jsx(o3,{lead:M,templates:i,currentUser:g,onClose:()=>F(!1),onSend:de}),W&&e.jsx(wy,{lead:M,templates:l,currentUser:g,onClose:()=>$(!1),onSend:Be}),H&&e.jsx(jy,{onClose:()=>z(!1),onLog:Me}),ee.open&&ee.type&&e.jsx(yy,{lead:M,currentUser:g,type:ee.type,onClose:()=>R({open:!1,type:null}),onSchedule:p}),Ee&&e.jsx(it,{isOpen:Ee,onClose:()=>Xe(!1),title:"Add Note",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Note Content"}),e.jsx("textarea",{value:ge,onChange:Z=>De(Z.target.value),rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your note...",autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[e.jsx("button",{type:"button",onClick:()=>Xe(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"button",onClick:ye,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add Note"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:M.name}),K&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-500",children:[e.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Unsaved changes"})]}),L==="saving"&&e.jsxs("div",{className:"flex items-center gap-2 text-primary-500",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm",children:"Saving..."})]}),L==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-sm",children:"Saved"})]}),L==="error"&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{className:"text-sm",children:"Save failed"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[K&&e.jsx("button",{onClick:Oe,disabled:L==="saving",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:L==="saving"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes ",xe.size>0&&`(${xe.size})`]})}),!v&&e.jsx(jt,{to:"/leads",className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg text-center",children:"Back to Leads List"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"lg:col-span-1 bg-surface p-6 rounded-xl shadow-sm border border-muted",children:[e.jsx(Vl,{title:"Contact Information",initiallyOpen:!0,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),e.jsx("input",{type:"text",value:M.name,onChange:Z=>re("name",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),e.jsx("input",{type:"email",value:M.email,onChange:Z=>re("email",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),e.jsx("input",{type:"tel",value:M.phone,onChange:Z=>re("phone",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),e.jsx("input",{type:"tel",value:M.alternatePhone,onChange:Z=>re("alternatePhone",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),e.jsx("input",{type:"text",value:M.company,onChange:Z=>re("company",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),e.jsx("input",{type:"text",value:M.city,onChange:Z=>re("city",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),e.jsxs("select",{value:M.source,onChange:Z=>re("source",Z.target.value),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:[e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"Facebook",children:"Facebook"}),e.jsx("option",{value:"Google Ads",children:"Google Ads"}),e.jsx("option",{value:"Referral",children:"Referral"}),e.jsx("option",{value:"Cold Call",children:"Cold Call"}),e.jsx("option",{value:"Chatbot",children:"Chatbot"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),e.jsx("select",{value:M.assignedToId,onChange:Z=>re("assignedToId",parseInt(Z.target.value)),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:r.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))})]})]})}),e.jsx(Vl,{title:"Deal Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),e.jsx("select",{value:M.stage,onChange:Z=>re("stage",Z.target.value),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:a.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),e.jsx("input",{type:"number",value:M.dealValue,onChange:Z=>re("dealValue",Number(Z.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),e.jsx("input",{type:"text",value:M.course,onChange:Z=>re("course",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Lead Score"}),e.jsx("input",{type:"number",value:M.score,onChange:Z=>re("score",Number(Z.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]})}),e.jsx(Vl,{title:"Marketing Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),e.jsx("input",{type:"text",value:M.campaign,onChange:Z=>re("campaign",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),e.jsx("input",{type:"text",value:Array.isArray(M.tags)?M.tags.join(", "):"",onChange:Z=>re("tags",Z.target.value.split(",").map(Pe=>Pe.trim()).filter(Boolean)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:"Comma-separated tags"})]})]})}),e.jsx(Vl,{title:"Facebook Details",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),e.jsx("input",{type:"text",value:M.facebookCampaign||"",onChange:Z=>re("facebookCampaign",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),e.jsx("input",{type:"text",value:M.facebookAdset||"",onChange:Z=>re("facebookAdset",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),e.jsx("input",{type:"text",value:M.facebookAd||"",onChange:Z=>re("facebookAd",Z.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]})}),s.length>0&&e.jsx(Vl,{title:"Custom Fields",children:s.map(Z=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-subtle",children:Z.name}),e.jsx("input",{type:Z.type==="date"?"date":"text",value:M.customFields?.[Z.id]||"",onChange:Pe=>{const lt={...M.customFields||{},[Z.id]:Pe.target.value},At={...M,customFields:lt};D(At),ie(!0),pe(ft=>new Set(ft).add(`customField_${Z.id}`))},className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]},Z.id))})]}),e.jsxs("div",{className:"lg:col-span-2 flex flex-col overflow-hidden bg-surface rounded-xl shadow-sm border border-muted",children:[e.jsx("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center justify-between gap-2 border-b border-muted",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>I("tasks"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${P==="tasks"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Tasks",me.filter(Z=>!Z.isCompleted).length>0&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:me.filter(Z=>!Z.isCompleted).length})]})]}),e.jsxs("button",{onClick:()=>I("scheduled"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${P==="scheduled"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Scheduled",(M.scheduledMessages||[]).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(M.scheduledMessages||[]).length})})]})]})}),e.jsxs("div",{className:"flex-shrink-0 p-2 grid grid-cols-2 sm:grid-cols-5 items-center gap-2 border-b border-muted",children:[e.jsxs("button",{onClick:()=>z(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Call,{className:"h-4 w-4"}),"Log Call"]}),e.jsxs("button",{onClick:()=>F(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Whatsapp,{className:"h-4 w-4"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>$(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.SMS,{className:"h-4 w-4"}),"SMS"]}),e.jsxs("button",{onClick:()=>Q(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Tasks,{className:"h-4 w-4"}),"Add Task"]}),e.jsxs("button",{onClick:()=>ae(),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[e.jsx(V.Note,{className:"h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-6",children:[P==="tasks"&&e.jsxs("div",{className:"space-y-2",children:[q&&e.jsx(l3,{lead:M,onAddTask:m,onCancel:()=>Q(!1),currentUser:g}),me.map(Z=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[e.jsx("input",{type:"checkbox",checked:Z.isCompleted,onChange:()=>{console.log("Task checkbox clicked:",Z),u({...Z,isCompleted:!Z.isCompleted})},className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),e.jsx("p",{className:`flex-grow text-sm ${Z.isCompleted?"line-through text-subtle":""}`,children:Z.title}),e.jsx("p",{className:"text-xs text-subtle",children:new Date(Z.dueDate).toLocaleDateString()})]},Z.id||Z._id)),me.length===0&&!q&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),P==="scheduled"&&e.jsxs("div",{className:"divide-y divide-muted",children:[(M.scheduledMessages||[]).map(Z=>e.jsxs("div",{className:"py-3",children:[e.jsxs("p",{className:"text-sm font-semibold",children:[Z.type," scheduled for ",new Date(Z.scheduledAt).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-subtle bg-muted p-2 rounded-md mt-1",children:['"',Z.content,'"']})]},Z.id)),(M.scheduledMessages||[]).length===0&&e.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})]})]})},YX=()=>{const t=[{to:"/settings",name:"General",icon:e.jsx(V.Settings,{})},{to:"/settings/users",name:"Users & Permissions",icon:e.jsx(V.Team,{})},{to:"/settings/teams",name:"Teams",icon:e.jsx(V.Leads,{})},{to:"/settings/integrations",name:"Integrations",icon:e.jsx(V.Integrations,{})},{to:"/settings/automation",name:"Automation",icon:e.jsx(V.Automation,{})}];return e.jsx(pP,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8 h-full",children:[e.jsxs("aside",{className:"lg:w-64 xl:w-72 flex-shrink-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-on-surface mb-4 sm:mb-6 hidden sm:block",children:"Settings"}),e.jsx("nav",{className:"flex space-x-1 sm:space-x-2 lg:space-x-0 lg:space-y-1 lg:flex-col overflow-x-auto -mx-2 sm:-mx-4 px-2 sm:px-4 pb-2 lg:pb-0 lg:mx-0 lg:px-0 lg:overflow-x-visible",children:t.map(r=>e.jsxs(k3,{to:r.to,end:r.to==="/settings",className:({isActive:n})=>`flex-shrink-0 flex items-center px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg transition-colors duration-200 text-sm sm:text-base ${n?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[Y.cloneElement(r.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:r.name})]},r.to))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:e.jsx(Cy,{})})]})})},XX=()=>{const t=[{to:"/marketing/email",name:"Email",icon:e.jsx(V.Email,{className:"h-5 w-5"})},{to:"/marketing/sms",name:"SMS",icon:e.jsx(V.SMS,{className:"h-5 w-5"})},{to:"/marketing/whatsapp",name:"WhatsApp & Chatbot",icon:e.jsx(V.Whatsapp,{className:"h-5 w-5"})},{to:"/marketing/call",name:"Calls",icon:e.jsx(V.Call,{className:"h-5 w-5"})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Marketing"}),e.jsx("p",{className:"text-subtle mt-1",children:"Engage with your audience through Email, SMS, and WhatsApp."})]})}),e.jsx("div",{className:"flex border-b border-muted",children:t.map(r=>e.jsxs(k3,{to:r.to,className:({isActive:n})=>`flex items-center gap-2 px-6 py-3 text-sm font-semibold ${n?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:[r.icon,e.jsx("span",{children:r.name})]},r.to))}),e.jsx("div",{className:"pt-2",children:e.jsx(Cy,{})})]})},JX=({to:t,children:r,onClick:n})=>t.startsWith("http")||t.startsWith("mailto")||t.startsWith("#")?e.jsx("a",{href:t,onClick:n,className:"block text-center text-lg font-semibold text-on-surface py-3 hover:bg-muted rounded-lg transition-colors",children:r}):e.jsx(jt,{to:t,onClick:n,className:"block text-center text-lg font-semibold text-on-surface py-3 hover:bg-muted rounded-lg transition-colors",children:r}),QX=({theme:t,toggleTheme:r,content:n,offerStrip:a})=>{const[s,i]=w.useState(!1),[l,d]=w.useState(!1),[u,m]=w.useState(!1);w.useEffect(()=>{const g=()=>{i(window.scrollY>10)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]),w.useEffect(()=>(document.body.style.overflow=l?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[l]);const f={LinkedIn:e.jsx(V.LinkedIn,{className:"h-5 w-5"}),Twitter:e.jsx(V.Twitter,{className:"h-5 w-5"}),Facebook:e.jsx(V.Facebook,{className:"h-5 w-5"}),Youtube:e.jsx(V.Youtube,{className:"h-5 w-5"}),Instagram:e.jsx(V.Instagram,{className:"h-5 w-5"})},p=[{to:"/#features",text:"Features"},{to:"/pricing",text:"Pricing"},{to:"/blog",text:"Blog"},{to:"/#privacy",text:"Privacy"},{to:"/#contact",text:"Contact"}],x=a&&a.isEnabled&&!u&&(!a.autoDisableAt||new Date<new Date(a.autoDisableAt));return e.jsxs("div",{className:"bg-background text-on-surface font-sans",children:[x&&a&&e.jsxs("div",{className:"bg-primary-600 text-white p-2.5 text-center text-sm relative",children:[e.jsx("span",{children:a.text}),a.ctaText&&a.ctaLink&&e.jsxs("a",{href:a.ctaLink,className:"font-bold underline ml-2 hover:opacity-80",children:[a.ctaText," "]}),e.jsx("button",{onClick:()=>m(!0),className:"absolute top-1/2 right-4 -translate-y-1/2 p-1 rounded-full hover:bg-white/20","aria-label":"Dismiss promotional banner",children:e.jsx(V.Close,{className:"h-4 w-4"})})]}),e.jsx("header",{className:`sticky top-0 bg-background/80 backdrop-blur-lg z-50 transition-shadow ${s?"shadow-md shadow-slate-900/5":""}`,children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[e.jsxs(jt,{to:"/",className:"flex items-center gap-3",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),e.jsx("nav",{"aria-label":"Main navigation",className:"hidden md:flex items-center gap-8",children:p.map(g=>e.jsx(jt,{to:g.to,className:"text-sm font-semibold text-subtle hover:text-on-surface transition-colors",children:g.text},g.text))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-muted text-subtle hover:text-on-surface",children:t==="dark"?e.jsx(V.Sun,{className:"h-5 w-5"}):e.jsx(V.Moon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(jt,{to:"/login",className:"text-sm font-semibold text-primary-500 hover:text-primary-600",children:"Log In"}),e.jsx(jt,{to:"/login",className:"hidden sm:block px-4 py-2 text-sm font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Start Free Trial"})]}),e.jsx("button",{onClick:()=>d(!0),className:"p-2 md:hidden",children:e.jsx(V.Menu,{className:"h-6 w-6"})})]})]})}),l&&e.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex flex-col p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs(jt,{to:"/",onClick:()=>d(!1),className:"flex items-center gap-3",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),e.jsx("button",{onClick:()=>d(!1),className:"p-2",children:e.jsx(V.Close,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex flex-col gap-4",children:p.map(g=>e.jsx(JX,{to:g.to,onClick:()=>d(!1),children:g.text},g.text))}),e.jsx("div",{className:"mt-auto pt-8 border-t border-muted space-y-4",children:e.jsx(jt,{to:"/login",onClick:()=>d(!1),className:"block w-full text-center px-4 py-3 text-lg font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Start Free Trial"})})]}),e.jsx("main",{children:e.jsx(Cy,{})}),e.jsx("footer",{className:"bg-surface border-t border-muted",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"col-span-full lg:col-span-2 mb-8 lg:mb-0 pr-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),e.jsx("p",{className:"mt-4 text-sm text-subtle",children:n.footer.description}),e.jsx("p",{className:"mt-4 text-sm text-subtle",children:n.footer.address})]}),n.footer.columns.map(g=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-on-surface uppercase tracking-wider text-sm",children:g.title}),e.jsx("ul",{className:"mt-4 space-y-3 text-sm",children:g.links.map(v=>{const{url:b,text:y}=v;if(b.startsWith("/#/")){const S=b.substring(2);return e.jsx("li",{children:e.jsx(jt,{to:S?`/${S}`:"/",className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:y})},y)}if(b.startsWith("/")&&!b.startsWith("//"))return e.jsx("li",{children:e.jsx(jt,{to:b,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:y})},y);if(b.startsWith("#")&&b.length>1){const S=`/${b}`;return e.jsx("li",{children:e.jsx(jt,{to:S,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:y})},y)}return e.jsx("li",{children:e.jsx("a",{href:b,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",target:"_blank",rel:"noopener noreferrer",children:y})},y)})})]},g.title))]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-muted flex flex-col sm:flex-row justify-between items-center text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 text-subtle order-2 sm:order-1 mt-4 sm:mt-0",children:[e.jsx("p",{children:n.footer.legal.copyright}),n.footer.legal.links.map(g=>e.jsx("a",{href:g.url,className:"hover:text-on-surface transition-colors",children:g.text},g.text))]}),e.jsx("div",{className:"flex gap-4 order-1 sm:order-2",children:n.footer.socialLinks.map(g=>e.jsxs("a",{href:g.url,className:"text-subtle hover:text-on-surface transition-colors",children:[f[g.name],e.jsx("span",{className:"sr-only",children:g.name})]},g.name))})]})]})})]})},ZX=({post:t,author:r})=>e.jsxs(jt,{to:`/blog/${t.slug}`,className:"group block bg-surface rounded-xl shadow-lg border border-muted/50 hover:shadow-primary-500/10 transition-all duration-300 overflow-hidden transform hover:-translate-y-1",children:[e.jsx("div",{className:"overflow-hidden",children:e.jsx("img",{src:t.featuredImage.src,alt:t.featuredImage.alt,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:t.tags.join("  ")}),e.jsx("h3",{className:"mt-2 text-xl font-bold text-on-surface group-hover:text-primary-500 transition-colors",children:t.title}),e.jsx("p",{className:"mt-3 text-sm text-subtle line-clamp-3",children:t.excerpt}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx("img",{src:r?.avatar,alt:r?.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-on-surface",children:r?.name}),e.jsx("p",{className:"text-xs text-subtle",children:new Date(t.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),c3=({blogPosts:t,users:r})=>{const[n,a]=oI(),s=n.get("category"),[i,l]=w.useState(s);w.useEffect(()=>{l(s)},[s]);const d=w.useMemo(()=>{const g=new Set;return t.forEach(v=>{v.tags.forEach(b=>g.add(b))}),Array.from(g).sort()},[t]),u=g=>{a(g?{category:g}:{})},m=w.useMemo(()=>{const g=[...t].sort((v,b)=>new Date(b.publishedAt).getTime()-new Date(v.publishedAt).getTime());return i?g.filter(v=>v.tags.includes(i)):g},[t,i]),f=m[0],p=m.slice(1),x=g=>r.find(v=>v.id===g);return e.jsx("div",{className:"py-12 sm:py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Clienn CRM Blog"}),e.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-subtle",children:"Insights, strategies, and tips on sales, marketing automation, and business growth."})]}),e.jsxs("nav",{className:"mb-12 flex flex-wrap justify-center gap-2",children:[e.jsx("button",{onClick:()=>u(null),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${i?"bg-surface text-on-surface hover:bg-muted":"bg-primary-600 text-white"}`,children:"All Posts"}),d.map(g=>e.jsx("button",{onClick:()=>u(g),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${i===g?"bg-primary-600 text-white":"bg-surface text-on-surface hover:bg-muted"}`,children:g},g))]}),f&&e.jsx("section",{className:"mb-16",children:e.jsxs(jt,{to:`/blog/${f.slug}`,className:"group grid grid-cols-1 lg:grid-cols-2 gap-8 items-center bg-surface p-8 rounded-2xl shadow-xl border border-muted/50 hover:shadow-primary-500/10 transition-shadow duration-300",children:[e.jsx("div",{className:"overflow-hidden rounded-lg",children:e.jsx("img",{src:f.featuredImage.src,alt:f.featuredImage.alt,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:f.tags.join("  ")}),e.jsx("h2",{className:"mt-4 text-3xl font-bold text-on-surface group-hover:text-primary-500 transition-colors",children:f.title}),e.jsx("p",{className:"mt-4 text-base text-subtle line-clamp-4",children:f.excerpt}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx("img",{src:x(f.authorId)?.avatar,alt:x(f.authorId)?.name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-on-surface",children:x(f.authorId)?.name}),e.jsx("p",{className:"text-xs text-subtle",children:new Date(f.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}),e.jsx("section",{children:p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map(g=>e.jsx(ZX,{post:g,author:x(g.authorId)},g.id))}):f?null:e.jsxs("div",{className:"text-center py-16 bg-surface rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"No posts found"}),e.jsxs("p",{className:"text-subtle mt-2",children:['There are no blog posts in the "',i,'" category yet.']})]})})]})})},eJ=({post:t,author:r})=>e.jsxs(jt,{to:`/blog/${t.slug}`,className:"group block",children:[e.jsx("div",{className:"overflow-hidden rounded-lg",children:e.jsx("img",{src:t.featuredImage.src,alt:t.featuredImage.alt,className:"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsx("h3",{className:"mt-4 text-lg font-bold group-hover:text-primary-500 transition-colors",children:t.title}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-subtle",children:[e.jsx("img",{src:r?.avatar,alt:r?.name,className:"w-6 h-6 rounded-full object-cover"}),e.jsx("span",{children:r?.name}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(t.publishedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),d3=({blogPosts:t,users:r})=>{const{slug:n}=y3(),a=t.find(d=>d.slug===n);w.useEffect(()=>{window.scrollTo(0,0),a&&(document.title=a.seo.title)},[a]);const s=w.useMemo(()=>a?t.filter(d=>d.id!==a.id&&d.tags.some(u=>a.tags.includes(u))).sort((d,u)=>new Date(u.publishedAt).getTime()-new Date(d.publishedAt).getTime()).slice(0,3):[],[a,t]);if(!a)return e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Post not found"}),e.jsx(jt,{to:"/blog",className:"mt-4 inline-block text-primary-500 hover:underline",children:" Back to all posts"})]});const i=r.find(d=>d.id===a.authorId),l={twitter:`https://twitter.com/intent/tweet?url=${window.location.href}&text=${encodeURIComponent(a.title)}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${window.location.href}&title=${encodeURIComponent(a.title)}&summary=${encodeURIComponent(a.excerpt)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${window.location.href}`};return e.jsxs("article",{className:"bg-surface",children:[e.jsxs("header",{className:"relative py-24 sm:py-32 lg:py-40",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:a.featuredImage.src,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface via-surface/80 to-transparent"})]}),e.jsxs("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl text-center",children:[e.jsx("div",{className:"flex justify-center gap-2",children:a.tags.map(d=>e.jsx(jt,{to:`/blog?category=${d}`,className:"bg-white/10 backdrop-blur-sm text-on-surface text-xs font-bold px-2.5 py-1 rounded-full border border-white/20 hover:bg-white/20 transition-colors",children:d},d))}),e.jsx("h1",{className:"mt-4 text-4xl sm:text-5xl font-extrabold tracking-tight text-on-surface",children:a.title}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4",children:[i&&e.jsx("img",{src:i.avatar,alt:i.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/50"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-on-surface",children:i?.name||"Clienn CRM Team"}),e.jsxs("p",{className:"text-xs text-on-surface/80",children:["Published on ",new Date(a.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]})]}),e.jsx("div",{className:"py-12 sm:py-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[e.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none",style:{whiteSpace:"pre-wrap"},children:a.content}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-muted text-center",children:[e.jsx("h3",{className:"font-semibold text-on-surface",children:"Share this post"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsx("a",{href:l.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:e.jsx(V.Twitter,{className:"h-5 w-5"})}),e.jsx("a",{href:l.linkedin,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:e.jsx(V.LinkedIn,{className:"h-5 w-5"})}),e.jsx("a",{href:l.facebook,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:e.jsx(V.Facebook,{className:"h-5 w-5"})})]})]}),s.length>0&&e.jsxs("div",{className:"mt-16 pt-12 border-t border-muted",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"You Might Also Like"}),e.jsx("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(d=>e.jsx(eJ,{post:d,author:r.find(u=>u.id===d.authorId)},d.id))})]})]})})]})},tJ=({plan:t,onCtaClick:r})=>{const n=t.price==="$0"?"Get Started":t.name==="Enterprise"?"Contact Us":"Start 14-Day Trial";return e.jsxs("div",{className:"p-6 h-full flex flex-col items-center text-center",children:[t.isPopular&&e.jsx("span",{className:"mb-4 px-3 py-1 text-sm font-semibold text-white bg-primary-500 rounded-full",children:"Most Popular"}),e.jsx("h3",{className:"text-2xl font-bold",children:t.name}),e.jsxs("p",{className:"mt-4 text-5xl font-bold",children:[t.price,e.jsx("span",{className:"text-base font-normal text-subtle",children:"/mo"})]}),e.jsx("p",{className:"mt-2 text-subtle text-center flex-grow h-12",children:t.description}),e.jsx("button",{onClick:r,className:`mt-8 w-full px-6 py-3 text-sm font-semibold rounded-lg transition-colors ${t.isPopular?"bg-primary-600 text-white hover:bg-primary-700":"bg-muted text-on-surface hover:bg-primary-500/10"}`,children:n})]})},wu=t=>typeof t=="boolean"?t?e.jsx(V.CheckCircle,{className:"h-6 w-6 text-green-500 mx-auto"}):e.jsx(V.XCircle,{className:"h-6 w-6 text-subtle/50 mx-auto"}):e.jsx("span",{className:"text-sm font-medium",children:t}),rJ=({content:t,comparisonData:r})=>{const[n,a]=w.useState("monthly"),[s,i]=w.useState(!1),[l,d]=w.useState(null),u=n==="monthly"?t.monthlyPlans:t.yearlyPlans,m=f=>{f.name==="Free"?window.location.hash="/login":f.name==="Enterprise"?window.location.hash="/#contact":(d(f),i(!0))};return e.jsxs(e.Fragment,{children:[e.jsx(xP,{isOpen:s,onClose:()=>i(!1),plan:l}),e.jsx("div",{className:"py-12 sm:py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight",children:"Flexible pricing for teams of all sizes"}),e.jsx("p",{className:"mt-6 text-lg text-subtle",children:"Choose the plan that's right for you. No hidden fees, and you can change your plan at any time."})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4 my-12",children:[e.jsx("span",{className:`font-medium ${n==="monthly"?"text-primary-500":"text-subtle"}`,children:"Monthly"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n==="yearly",onChange:()=>a(n==="monthly"?"yearly":"monthly"),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-muted rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]}),e.jsx("span",{className:`font-medium ${n==="yearly"?"text-primary-500":"text-subtle"}`,children:"Yearly"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2.5 py-1 rounded-full dark:bg-green-900 dark:text-green-300",children:"Save 20%"})]}),e.jsx("div",{className:"w-full overflow-x-auto relative border border-muted rounded-2xl shadow-xl shadow-slate-900/5",children:e.jsxs("table",{className:"w-full border-collapse min-w-[1200px] text-on-surface",children:[e.jsx("thead",{className:"sticky top-0 z-20 bg-background/80 backdrop-blur-lg",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-6 w-[32%] sticky left-0 bg-background/80 backdrop-blur-lg z-30",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Compare features"})}),u.map(f=>e.jsx("th",{className:`p-0 w-[17%] border-l border-muted ${f.isPopular?"bg-primary-500/5":""}`,children:e.jsx(tJ,{plan:f,onCtaClick:()=>m(f)})},f.name))]})}),e.jsx("tbody",{children:r.map(f=>e.jsxs(Y.Fragment,{children:[e.jsx("tr",{className:"bg-muted/50",children:e.jsx("th",{colSpan:5,className:"text-left p-3 font-bold text-on-surface sticky left-0 bg-muted/50 z-10",children:f.category})}),f.features.map(p=>e.jsxs("tr",{className:"border-b border-muted last:border-b-0 hover:bg-muted/30",children:[e.jsx("td",{title:p.description,className:"p-4 text-sm font-semibold sticky left-0 bg-background z-10",children:p.name}),e.jsx("td",{className:"p-4 text-center border-l border-muted",children:wu(p.values.free)}),e.jsx("td",{className:"p-4 text-center border-l border-muted",children:wu(p.values.basic)}),e.jsx("td",{className:`p-4 text-center border-l border-muted ${u[2].isPopular?"bg-primary-500/5":""}`,children:wu(p.values.pro)}),e.jsx("td",{className:"p-4 text-center border-l border-muted",children:wu(p.values.enterprise)})]},p.id))]},f.id))})]})})]})})]})},nJ="https://crm.clienn.com/api",u3=({currentUser:t,currentOrganization:r,hasPermission:n,hasFeature:a,onLogout:s,onLinkClick:i})=>{const l=fa(),d=l.pathname.startsWith("/marketing"),[u,m]=w.useState(d);w.useEffect(()=>{d&&m(!0)},[d]);const p=[{path:"/dashboard",icon:e.jsx(V.Dashboard,{}),name:"Leads Dashboard",feature:"DASHBOARD"},{path:"/reports",icon:e.jsx(V.Reports,{}),name:"Reports",feature:"REPORTS"},{path:"/tracking",icon:e.jsx(V.Activity,{}),name:"Tracking Dashboard",permission:Qt.VIEW_TRACKING_DASHBOARD,feature:"TRACKING"},{path:"/leads",icon:e.jsx(V.Leads,{}),name:"Leads",feature:"LEADS"},{path:"/tasks",icon:e.jsx(V.Tasks,{}),name:"Tasks",feature:"TASKS"},{path:"/marketing",icon:e.jsx(V.Marketing,{}),name:"Marketing",subItems:[{path:"/marketing/email",name:"Email Campaigns",feature:"EMAIL"},{path:"/marketing/sms",name:"SMS Campaigns",feature:"SMS"},{path:"/marketing/whatsapp",name:"WhatsApp",feature:"WHATSAPP"},{path:"/marketing/call",name:"Call Campaigns",feature:"CALLS"}]},{path:"/blog",icon:e.jsx(V.Blog,{}),name:"Blog",isOrgFeature:!0}].filter(g=>g.isOrgFeature?!!r?.hasBlogAccess:!0),x=({item:g,isSubItem:v=!1})=>{const b=l.pathname.startsWith(g.path)&&(g.path!=="/"||l.pathname==="/"),y=g.subItems&&g.subItems.length>0,S=C=>{y?(C.preventDefault(),m(!u)):i&&i()};return g.permission&&!n(g.permission)||g.feature&&!a(g.feature)?null:e.jsxs(e.Fragment,{children:[e.jsxs(jt,{to:g.path,onClick:S,className:`flex items-center p-3 rounded-lg transition-colors duration-200 ${v?"pl-10 text-sm":"text-base"} ${b?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[g.icon&&Y.cloneElement(g.icon,{className:"h-6 w-6 mr-3"}),e.jsx("span",{className:"flex-1",children:g.name}),y&&e.jsx("svg",{className:`w-5 h-5 transition-transform ${u?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),y&&u&&e.jsx("div",{className:"pl-6 space-y-1 mt-1",children:g.subItems?.map(C=>C.feature&&!a(C.feature)?null:e.jsx(x,{item:C,isSubItem:!0},C.path))})]})};return!t||!r?null:e.jsxs("div",{className:"bg-surface text-on-surface w-64 flex flex-col h-full border-r border-muted flex-shrink-0",children:[e.jsxs(jt,{to:"/dashboard",className:"h-16 flex items-center px-4 border-b border-muted group",children:[e.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-8 w-auto transition-transform group-hover:scale-110"}),e.jsx("h1",{className:"ml-3 text-lg font-bold group-hover:text-primary-500 transition-colors",children:r.name})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:p.map(g=>e.jsx(x,{item:g},g.path))}),e.jsxs("div",{className:"p-4 border-t border-muted",children:[e.jsxs(jt,{to:"/settings",onClick:i,className:`w-full flex items-center p-3 rounded-lg transition-colors duration-200 text-base ${l.pathname.startsWith("/settings")?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[e.jsx(V.Settings,{className:"h-6 w-6 mr-3"})," Settings"]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-semibold",children:t.name}),e.jsx("p",{className:"text-xs text-subtle",children:t.role})]}),e.jsx("button",{onClick:s,className:"ml-auto p-2 text-subtle hover:text-red-500 transition-colors",children:e.jsx(V.Logout,{className:"h-5 w-5"})})]})]})]})},aJ=({onMenuClick:t})=>e.jsxs("div",{className:"md:hidden h-16 bg-surface border-b border-muted flex items-center justify-between px-4",children:[e.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),e.jsx("button",{onClick:t,children:e.jsx(V.Menu,{className:"h-6 w-6"})})]}),sJ=()=>{const[t,r]=w.useState(()=>localStorage.getItem("theme")||"dark"),[n,a]=w.useState(null),[s,i]=w.useState(!0),[l,d]=w.useState(!0),[u,m]=w.useState(null),[f,p]=w.useState(localStorage.getItem("authToken")),[x,g]=w.useState([]),[v,b]=w.useState([]),[y,S]=w.useState([]),[C,k]=w.useState([]),[T,N]=w.useState([]),[O,E]=w.useState([]),[P,I]=w.useState([]),[M,D]=w.useState([]),[U,F]=w.useState([]),[W,$]=w.useState([]),[H,z]=w.useState([]),[q,Q]=w.useState(null),[ee,R]=w.useState([]),[L,G]=w.useState([]),[K,ie]=w.useState([]),[xe,pe]=w.useState([]),[be,me]=w.useState([]),[X,re]=w.useState([]),[de,Be]=w.useState([]),[Me,Ee]=w.useState([]),[Xe,ge]=w.useState([]),[De,ae]=w.useState([]),[ye,Oe]=w.useState([]),[Z,Pe]=w.useState([]),[lt,At]=w.useState([]),[ft,Fr]=w.useState(null),[ur,Br]=w.useState([]),[br,Ye]=w.useState([]),[Or,vr]=w.useState([]),[oe,fe]=w.useState([]),[Re,Ke]=w.useState([]),[Mt,Xt]=w.useState([]),[dt,pt]=w.useState([]),[Nr,ha]=w.useState(null),[ji,_s]=w.useState([]),[On,wi]=w.useState(uI),[ln,Ni]=w.useState([]),[xa,ga]=w.useState([]),[Ur,Va]=w.useState(cI),[ba,va]=w.useState([]),[Ka,Pn]=w.useState([]),[Ya,Xa]=w.useState(null),[Ja,Pr]=w.useState(dI),[Is,Si]=w.useState([]),Zn=An(),te=w.useCallback(async(le,_e="GET",je=null)=>{const Ve={"Content-Type":"application/json"};f&&(Ve.Authorization=`Bearer ${f}`);const ot={method:_e,headers:Ve};je&&(ot.body=JSON.stringify(je));const ht=await fetch(le,ot);if(ht.status===401&&Ae(),!ht.ok){const un=await ht.json();throw new Error(un.message||`Request failed with status ${ht.status}`)}return ht.status===204?null:ht.json()},[f]);w.useEffect(()=>{const le=localStorage.getItem("currentUser");le&&f&&a(JSON.parse(le)),i(!1)},[f]),w.useEffect(()=>{(async()=>{if(n&&f)try{d(!0);let _e="/api/data/app-data";n.role===Wt.SUPER_ADMIN&&(_e="/api/data/super-admin-data");const je=await te(_e);E(je.organizations||[]),g(je.users||[]),b(je.leads||[]),S(je.tasks||[]),k(je.teams||[]),console.log("DEBUG: Raw stages data from backend:",je.stages?.length||0,je.stages?.map(Ve=>({id:Ve.id,name:Ve.name}))),N(je.stages||[]),I(je.integrationLogs||[]),D(je.automationRules||[]),F(je.customFieldDefs||[]),$(je.whatsAppTemplates||[]),z(je.smsTemplates||[]),Q(je.chatbotConfig||null),R(je.userSessionLogs||[]),G(je.integrationSettings||[]),ie(je.webhooks||[]),pe(je.emailTemplates||[]),me(je.emailCampaigns||[]),re(je.smsCampaigns||[]),Be(je.whatsAppCampaigns||[]),Ee(je.callScripts||[]),ge(je.callCampaigns||[]),ae(je.leadScoreRules||[]),Pe(je.supportTickets||[]),At(je.auditLogs||[]),Ni(je.billingHistory||[]),ga(je.savedFilters||[]),Oe(je.subscriptionPlans||[]),n.role===Wt.SUPER_ADMIN&&(Ye(je.systemHealthData||[]),vr(je.apiUsageLogs||[]),fe(je.errorLogs||[]),Ke(je.globalAutomationRules||[]),Xt(je.globalEmailTemplates||[]),pt(je.globalIntegrationStatus||[]),ha(je.localizationSettings||null),_s(je.paymentGatewaySettings||[]),va(je.inquiries||[]),Va(je.blogPosts||[]),Pn(je.coupons||[]),Xa(je.offerStrip||A3),Pr(je.pricingComparisonData||[]),Br(je.addons||[]))}catch(_e){console.error("Failed to fetch app data:",_e),Ae()}finally{d(!1)}else f||(d(!1),i(!1))})()},[n,f,te]),w.useEffect(()=>{document.documentElement.className=t,localStorage.setItem("theme",t)},[t]),w.useEffect(()=>{if(n&&O.length>0){const le=O.find(_e=>_e.id===n.organizationId);le?(console.log("Organization found and loaded:",le),m(le)):(console.warn("Organization not found for user:",{userId:n.id,userOrgId:n.organizationId,availableOrgs:O.map(_e=>({id:_e.id,name:_e.name}))}),m(null))}else n||m(null)},[n,O]);const ke=()=>r(t==="dark"?"light":"dark"),Ie=w.useCallback(async(le,_e)=>{try{const je=await fetch(`${nJ}//auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:le,password:_e})});if(!je.ok){let ht="Unknown error";try{ht=await je.text()}catch{ht="Failed to read error response"}let un="Login failed";try{un=JSON.parse(ht).message||un}catch{ht&&ht.length>0&&ht!=="Failed to read error response"&&(un=ht)}throw je.status===401?new Error("Invalid email or password"):je.status>=500?new Error("Server error. Please check if the backend server is running."):new Error(un)}let Ve;try{const ht=await je.text();if(!ht.trim())throw new Error("Empty response from server");Ve=JSON.parse(ht)}catch(ht){throw console.error("Login JSON Parse Error:",ht),new Error(`Invalid response from server: ${ht.message}`)}if(!Ve.success)throw new Error(Ve.message||"Login failed");const ot=Ve.data||Ve;localStorage.setItem("currentUser",JSON.stringify(ot)),localStorage.setItem("authToken",ot.token),p(ot.token),a(ot),ot.role===Wt.SUPER_ADMIN?Zn("/super-admin"):Zn("/dashboard");return}catch(je){return je.message||"An unknown error occurred."}},[Zn]),Ae=w.useCallback(()=>{a(null),p(null),localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),Zn("/login")},[Zn]),$e=w.useCallback(le=>n?n.role===Wt.ADMIN?!0:n.permissions.includes(le):!1,[n]),nr=w.useRef(!1),Nt=w.useCallback(le=>{if(!u)return console.warn("hasFeature called but no current organization"),!1;if(u.manuallyAssignedFeatures?.includes(le))return console.log(`Feature ${le} granted via manual assignment`),!0;let _e=ye.find(Ve=>Ve.id===u.subscriptionPlanId);if(!_e){const Ve=u.subscriptionPlanId.startsWith("plan_")?u.subscriptionPlanId.substring(5):`plan_${u.subscriptionPlanId}`;_e=ye.find(ot=>ot.id===Ve)}if(!_e)return nr.current||(console.warn("No subscription plan found for organization:",{orgId:u.id,orgPlanId:u.subscriptionPlanId,availablePlans:ye.map(Ve=>({id:Ve.id,name:Ve.name}))}),nr.current=!0),!1;const je=_e.features.includes(le);return console.log(`Feature check for ${le}:`,{organization:u.name,plan:_e.name,planFeatures:_e.features,hasAccess:je}),je},[u,ye]),gt=async(le,_e,je)=>{const Ve=_e.id,ot=_e._id,ht=!!(ot||Ve&&typeof Ve=="string"&&Ve.trim()!==""&&Ve!=="undefined"&&Ve!=="null");console.log("createOrUpdateItem Debug:",{endpoint:le,itemId:Ve,item_id:ot,hasValidId:ht,itemIdType:typeof Ve,itemIdLength:typeof Ve=="string"?Ve.length:"N/A"});const un=ht,ya=un?"PUT":"POST",es=ht?ot||Ve:void 0,ol=un&&es?`${le}/${es}`:le;console.log("createOrUpdateItem Debug:",{endpoint:le,isUpdate:un,method:ya,identifier:es,url:ol,hasValidId:ht});const Ds=await te(ol,ya,_e);return je(ts=>ya==="PUT"?ts.map(ja=>ja._id===Ds._id||ja.id===Ds.id?Ds:ja):[Ds,...ts]),Ds},et=async(le,_e,je)=>{await te(`${le}/${_e}`,"DELETE"),je(Ve=>Ve.filter(ot=>ot._id!==_e&&ot.id!==_e))},_n=async le=>{await gt("/api/leads",le,b)},Qa=async(le,_e)=>{console.log("App.tsx - onUpdateLead called:",{updatedLeadId:le.id,updatedLead_id:le._id,hasId:!!(le.id||le._id)}),b(Ve=>Array.isArray(Ve)?Ve.map(ot=>ot.id===le.id||ot._id===le._id?le:ot):(console.error("Leads state is not an array:",Ve),Ve));const je=await gt("/api/leads",le,b);return console.log("App.tsx - onUpdateLead result:",je),!0},bf=le=>et("/api/leads",le,b),td=async le=>{if(n&&f)try{const _e=await te(`/api/leads/${le}`);return b(je=>je.some(ot=>ot.id===le||ot._id===le)?je.map(ot=>ot.id===le||ot._id===le?_e:ot):(console.log("Adding refreshed lead to array:",_e),[...je,_e])),_e}catch(_e){throw console.error("Failed to refresh lead:",_e),_e}},Za=async le=>{await gt("/api/tasks",le,S)},cn=le=>et("/api/tasks",le,S),el=async(le,_e)=>{try{if(_e){console.log("Creating batch tasks:",{taskData:le,assignment:_e});const je=await te("/api/tasks/batch","POST",{taskData:le,assignment:_e});console.log("Batch tasks created:",je),S(Ve=>[...Ve,...je])}else if(le.title&&le.leadId){console.log("Creating single task:",le);const je=await te("/api/tasks","POST",le);console.log("Single task created:",je),S(Ve=>[...Ve,je])}else console.error("Invalid task data:",le)}catch(je){throw console.error("Failed to create task:",je),je}},Xr=async le=>{try{if(await te("/api/notes","POST",le),v.find(je=>je.id===le.leadId)){const je=await te(`/api/leads/${le.leadId}`);je&&b(Ve=>Ve.map(ot=>ot.id===le.leadId?je:ot))}}catch(_e){console.error("Failed to create note:",_e)}},tl=le=>gt("/api/settings/users",le,g),vf=le=>et("/api/settings/users",le,g),yf=async(le,_e)=>{const je={name:le,color:_e,organizationId:u?.id},Ve=await te("/api/settings/stages","POST",je);N(ot=>[...ot,Ve])},ki=(le,_e,je)=>{const Ve=T.find(ot=>ot._id===le);Ve&&gt("/api/settings/stages",{...Ve,[_e]:je},N)},Ci=async le=>{try{await te(`/api/settings/stages/${le}`,"DELETE"),N(_e=>_e.filter(je=>je.id!==le&&je._id!==le))}catch(_e){throw console.error("Failed to delete stage:",_e),_e}},Ms=le=>gt("/api/automation/rules",le,D),Ai=le=>et("/api/automation/rules",le,D),jf=le=>gt("/api/settings/teams",le,k),wf=le=>et("/api/settings/teams",le,k),rl=le=>gt("/api/super-admin/plans",le,Oe),rd=le=>et("/api/super-admin/plans",le,Oe),nl=le=>gt("/api/super-admin/addons",le,Br),Ls=le=>et("/api/super-admin/addons",le,Br),Nf=le=>gt("/api/super-admin/coupons",le,Pn),al=le=>et("/api/super-admin/coupons",le,Pn),yt=le=>gt("/api/super-admin/blog",le,Va),nd=le=>et("/api/super-admin/blog",le,Va),ad=le=>gt("/api/super-admin/automation-rules",le,Ke),sl=le=>et("/api/super-admin/automation-rules",le,Ke),sd=async le=>{const _e=await te("/api/super-admin/offer-strip","PUT",le);Xa(_e)},id=async le=>{const _e=await te("/api/super-admin/pricing-data","PUT",le);Pr(_e)},Ti=async le=>{const _e=await te(`/api/leads/${le.leadId}/schedule-message`,"POST",le);b(je=>je.map(Ve=>Ve._id===_e._id?_e:Ve))},il=async(le,_e)=>{const{updatedLeads:je}=await te("/api/leads/bulk-assign","POST",{leadIds:le,assignedToId:_e});b(Ve=>Ve.map(ot=>je.find(ht=>ht._id===ot._id)||ot))},Ei=async le=>{await te("/api/leads/bulk","DELETE",{leadIds:le}),b(_e=>_e.filter(je=>!le.includes(je.id)))},[ea,dn]=w.useState(!1);if(s||n&&l)return e.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background text-on-surface",children:"Loading Application..."});if(!n)return e.jsxs(h2,{children:[e.jsxs(mt,{element:e.jsx(QX,{theme:t,toggleTheme:ke,content:On,offerStrip:Ya}),children:[e.jsx(mt,{index:!0,element:e.jsx(VX,{content:On,blogPosts:Ur})}),e.jsx(mt,{path:"/pricing",element:e.jsx(rJ,{content:On.pricing,comparisonData:Ja})}),e.jsx(mt,{path:"/blog",element:e.jsx(c3,{blogPosts:Ur,users:x})}),e.jsx(mt,{path:"/blog/:slug",element:e.jsx(d3,{blogPosts:Ur,users:x})}),e.jsx(mt,{path:"/api-docs",element:e.jsx(a3,{})})]}),e.jsx(mt,{path:"/login",element:e.jsx(nX,{onLogin:Ie,content:On.loginPage,features:On.features.items})}),e.jsx(mt,{path:"*",element:e.jsx(ou,{to:"/"})})]});if(n.role===Wt.SUPER_ADMIN)return e.jsx(EX,{organizations:O,users:x,leads:v,tasks:y,subscriptionPlans:ye,supportTickets:Z,auditLogs:lt,globalAnnouncement:ft,addons:ur,systemHealthData:br,apiUsageLogs:Or,errorLogs:oe,globalAutomationRules:Re,globalEmailTemplates:Mt,homepageContent:On,blogPosts:Ur,paymentGatewaySettings:ji,inquiries:ba,pricingComparisonData:Ja,setInquiries:va,setLeads:b,onLogout:Ae,onAddOrganization:le=>gt("/api/super-admin/organizations",le,E),onUpdateOrganization:le=>gt("/api/super-admin/organizations",le,E),onDeleteOrganization:le=>et("/api/super-admin/organizations",le,E),onSaveSubscriptionPlan:rl,onDeleteSubscriptionPlan:rd,onUpdateTicketStatus:(le,_e)=>gt("/api/super-admin/support-tickets",{_id:le,status:_e},Pe),onSaveAnnouncement:Fr,onSaveUser:tl,globalIntegrationStatus:dt,onUpdateGlobalIntegrationStatus:pt,localizationSettings:Nr,onUpdateLocalizationSettings:ha,onUpdateHomepageContent:wi,onSaveBlogPost:yt,onDeleteBlogPost:nd,onUpdatePaymentGatewaySettings:_s,onSaveGlobalRule:ad,onDeleteGlobalRule:sl,onUpdatePricingComparisonData:id,onSaveAddon:nl,onDeleteAddon:Ls,coupons:Ka,onSaveCoupon:Nf,onDeleteCoupon:al,offerStrip:Ya,onUpdateOfferStrip:sd,fetchAnalyticsData:async()=>({totalOrganizations:O.length,activeOrganizations:O.filter(le=>new Date(le.subscriptionExpiresAt)>new Date).length,mrrData:[]})});if(!u)return e.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background text-on-surface",children:"Loading organization... If this persists, please log out and log back in."});const ta=e.jsxs(h2,{children:[e.jsx(mt,{path:"/",element:e.jsx(ou,{to:"/dashboard"})}),e.jsx(mt,{path:"/dashboard",element:e.jsx(LK,{leads:v,users:x,pipelineStages:T,customWidgets:Is,onSaveWidget:le=>{},onDeleteWidget:le=>{}})}),e.jsx(mt,{path:"/leads",element:e.jsx(rY,{leads:v,users:x,pipelineStages:T,customFieldDefs:U,tasks:y,whatsAppTemplates:W,smsTemplates:H,addLead:_n,deleteLead:bf,currentUser:n,hasPermission:$e,savedFilters:xa,onSaveFilter:async le=>{await gt("/api/settings/filters",le,ga)},onDeleteFilter:le=>et("/api/settings/filters",le,ga),onBulkAssign:il,onBulkDelete:Ei,onUpdateLead:Qa,onUpdateTask:Za,onAddTask:el,onScheduleMessage:Ti,onImportLeads:async()=>{}})}),e.jsx(mt,{path:"/leads/:leadId",element:e.jsx(KX,{leads:v,users:x,pipelineStages:T,customFieldDefs:U,tasks:y,whatsAppTemplates:W,smsTemplates:H,currentUser:n,onUpdateLead:Qa,onUpdateTask:Za,onAddTask:el,onAddNote:Xr,onScheduleMessage:Ti,onRefreshLeadById:td})}),e.jsx(mt,{path:"/tasks",element:e.jsx(MY,{tasks:y,users:x,leads:v,teams:C,currentUser:n,updateTask:Za,onAddTask:el,onDeleteTask:cn,pipelineStages:T,customFieldDefs:U,whatsAppTemplates:W,smsTemplates:H,onUpdateLead:Qa,onScheduleMessage:Ti})}),e.jsx(mt,{path:"/reports",element:e.jsx(FX,{})}),e.jsx(mt,{path:"/tracking",element:$e(Qt.VIEW_TRACKING_DASHBOARD)?e.jsx(sX,{users:x,sessionLogs:ee,teams:C,onToggleTracking:le=>tl({...x.find(_e=>_e.id===le),isTrackingEnabled:!x.find(_e=>_e.id===le).isTrackingEnabled}),currentUser:n}):e.jsx(ou,{to:"/dashboard"})}),e.jsxs(mt,{path:"/marketing",element:e.jsx(XX,{}),children:[e.jsx(mt,{path:"email",element:e.jsx(IX,{users:x,pipelineStages:T,customFieldDefs:U})}),e.jsx(mt,{path:"sms",element:e.jsx(DX,{users:x,pipelineStages:T,customFieldDefs:U})}),e.jsx(mt,{path:"whatsapp",element:e.jsx(rX,{customFieldDefs:U,users:x,pipelineStages:T})}),e.jsx(mt,{path:"call",element:e.jsx(WX,{users:x,pipelineStages:T,customFieldDefs:U})})]}),e.jsx(mt,{path:"/blog",element:e.jsx(c3,{blogPosts:Ur,users:x})}),e.jsx(mt,{path:"/blog/:slug",element:e.jsx(d3,{blogPosts:Ur,users:x})}),e.jsx(mt,{path:"/api-docs",element:e.jsx(a3,{})}),e.jsxs(mt,{path:"/settings",element:e.jsx(YX,{}),children:[e.jsx(mt,{index:!0,element:e.jsx(HY,{pipelineStages:T,onAddStage:yf,onUpdateStage:ki,onDeleteStage:Ci,customFieldDefs:U,onAddCustomField:le=>gt("/api/settings/custom-fields",{name:"New Field",type:le,isMappable:!0,isRequired:!1},F),onUpdateCustomField:(le,_e)=>gt("/api/settings/custom-fields",{_id:le,..._e},F),onDeleteCustomField:le=>et("/api/settings/custom-fields",le,F),leadScoreRules:De,onSaveLeadScoreRule:le=>gt("/api/settings/score-rules",le,ae),onDeleteLeadScoreRule:le=>et("/api/settings/score-rules",le,ae),theme:t,toggleTheme:ke,currentUser:n,hasPermission:$e,currentOrganization:u,subscriptionPlans:ye,onUpdateProfile:le=>gt("/api/users/profile",{...n,...le},_e=>g(je=>je.map(Ve=>Ve.id===n.id?_e[0]:Ve))).then(()=>a(_e=>_e?{..._e,...le}:null)),billingHistory:ln,addons:ur,onUpdateOrganization:le=>te(`/api/organizations/${u._id}`,"PUT",le).then(E),onUpgradeSubscription:(le,_e)=>{},onRefreshData:()=>{}})}),e.jsx(mt,{path:"users",element:e.jsx(lY,{users:x,teams:C,onSaveUser:tl,onDeleteUser:le=>vf(le.toString())})}),e.jsx(mt,{path:"teams",element:e.jsx(QY,{teams:C,users:x,onSaveTeam:jf,onDeleteTeam:wf})}),e.jsx(mt,{path:"integrations",element:e.jsx(uY,{logs:P,settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,webhooks:K,onAddWebhook:le=>gt("/api/webhooks",le,ie),onDeleteWebhook:le=>et("/api/webhooks",le,ie),onUpdateWebhook:le=>gt("/api/webhooks",le,ie),onSendTestLead:()=>{},syncFacebookLeads:()=>{}})}),e.jsx(mt,{path:"integrations/facebook",element:e.jsx(gY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/google-ads",element:e.jsx(yY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/website",element:e.jsx(NY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/cloud-telephony",element:e.jsx(kY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/email-marketing",element:e.jsx(CY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/sms-marketing",element:e.jsx(OY,{settings:L,setSettings:G,customFieldDefs:U,currentOrganization:u,onSendTestLead:()=>{}})}),e.jsx(mt,{path:"integrations/api-webhooks",element:e.jsx(PY,{settings:L,setSettings:G,webhooks:K,onAddWebhook:le=>gt("/api/webhooks",le,ie),onDeleteWebhook:le=>et("/api/webhooks",le,ie),onUpdateWebhook:le=>gt("/api/webhooks",le,ie),onTestWebhook:async le=>({success:!0,status:200,responseTime:150}),currentOrganization:u})}),e.jsx(mt,{path:"automation",element:e.jsx(YY,{rules:M,users:x,teams:C,customFieldDefs:U,pipelineStages:T,onSaveRule:Ms,onDeleteRule:Ai})})]}),e.jsx(mt,{path:"*",element:e.jsx(ou,{to:"/dashboard"})})]});return e.jsxs("div",{className:"h-screen w-screen bg-background text-on-surface flex flex-col md:flex-row",children:[e.jsx("div",{className:"hidden md:flex",children:e.jsx(u3,{currentUser:n,currentOrganization:u,hasPermission:$e,hasFeature:Nt,onLogout:Ae})}),ea&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>dn(!1),children:e.jsx("div",{className:"absolute top-0 left-0 h-full",onClick:le=>le.stopPropagation(),children:e.jsx(u3,{currentUser:n,currentOrganization:u,hasPermission:$e,hasFeature:Nt,onLogout:Ae,onLinkClick:()=>dn(!1)})})}),e.jsx(aJ,{onMenuClick:()=>dn(!0)}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:ta})]})},gP=document.getElementById("root");if(!gP)throw new Error("Could not find root element to mount to");const iJ=n_.createRoot(gP);iJ.render(e.jsx(Y.StrictMode,{children:e.jsx(pP,{children:e.jsx(rI,{children:e.jsx(sJ,{})})})}));
