(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function H8(e,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gw={exports:{}},Ml={},Kw={exports:{}},dt={},Yw;function G8(){if(Yw)return dt;Yw=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=f&&F[f]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function j(F,_,G){this.props=F,this.context=_,this.refs=g,this.updater=G||b}j.prototype.isReactComponent={},j.prototype.setState=function(F,_){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,_,"setState")},j.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function k(){}k.prototype=j.prototype;function S(F,_,G){this.props=F,this.context=_,this.refs=g,this.updater=G||b}var A=S.prototype=new k;A.constructor=S,y(A,j.prototype),A.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function D(F,_,G){var Z,oe={},le=null,ge=null;if(_!=null)for(Z in _.ref!==void 0&&(ge=_.ref),_.key!==void 0&&(le=""+_.key),_)E.call(_,Z)&&!O.hasOwnProperty(Z)&&(oe[Z]=_[Z]);var ve=arguments.length-2;if(ve===1)oe.children=G;else if(1<ve){for(var fe=Array(ve),Y=0;Y<ve;Y++)fe[Y]=arguments[Y+2];oe.children=fe}if(F&&F.defaultProps)for(Z in ve=F.defaultProps,ve)oe[Z]===void 0&&(oe[Z]=ve[Z]);return{$$typeof:e,type:F,key:le,ref:ge,props:oe,_owner:T.current}}function I(F,_){return{$$typeof:e,type:F.type,key:_,ref:F.ref,props:F.props,_owner:F._owner}}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function L(F){var _={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(G){return _[G]})}var B=/\/+/g;function z(F,_){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):_.toString(36)}function W(F,_,G,Z,oe){var le=typeof F;(le==="undefined"||le==="boolean")&&(F=null);var ge=!1;if(F===null)ge=!0;else switch(le){case"string":case"number":ge=!0;break;case"object":switch(F.$$typeof){case e:case r:ge=!0}}if(ge)return ge=F,oe=oe(ge),F=Z===""?"."+z(ge,0):Z,w(oe)?(G="",F!=null&&(G=F.replace(B,"$&/")+"/"),W(oe,_,G,"",function(Y){return Y})):oe!=null&&(M(oe)&&(oe=I(oe,G+(!oe.key||ge&&ge.key===oe.key?"":(""+oe.key).replace(B,"$&/")+"/")+F)),_.push(oe)),1;if(ge=0,Z=Z===""?".":Z+":",w(F))for(var ve=0;ve<F.length;ve++){le=F[ve];var fe=Z+z(le,ve);ge+=W(le,_,G,fe,oe)}else if(fe=x(F),typeof fe=="function")for(F=fe.call(F),ve=0;!(le=F.next()).done;)le=le.value,fe=Z+z(le,ve++),ge+=W(le,_,G,fe,oe);else if(le==="object")throw _=String(F),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return ge}function R(F,_,G){if(F==null)return F;var Z=[],oe=0;return W(F,Z,"","",function(le){return _.call(G,le,oe++)}),Z}function H(F){if(F._status===-1){var _=F._result;_=_(),_.then(function(G){(F._status===0||F._status===-1)&&(F._status=1,F._result=G)},function(G){(F._status===0||F._status===-1)&&(F._status=2,F._result=G)}),F._status===-1&&(F._status=0,F._result=_)}if(F._status===1)return F._result.default;throw F._result}var U={current:null},q={transition:null},Q={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:q,ReactCurrentOwner:T};function K(){throw Error("act(...) is not supported in production builds of React.")}return dt.Children={map:R,forEach:function(F,_,G){R(F,function(){_.apply(this,arguments)},G)},count:function(F){var _=0;return R(F,function(){_++}),_},toArray:function(F){return R(F,function(_){return _})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},dt.Component=j,dt.Fragment=n,dt.Profiler=s,dt.PureComponent=S,dt.StrictMode=a,dt.Suspense=u,dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,dt.act=K,dt.cloneElement=function(F,_,G){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Z=y({},F.props),oe=F.key,le=F.ref,ge=F._owner;if(_!=null){if(_.ref!==void 0&&(le=_.ref,ge=T.current),_.key!==void 0&&(oe=""+_.key),F.type&&F.type.defaultProps)var ve=F.type.defaultProps;for(fe in _)E.call(_,fe)&&!O.hasOwnProperty(fe)&&(Z[fe]=_[fe]===void 0&&ve!==void 0?ve[fe]:_[fe])}var fe=arguments.length-2;if(fe===1)Z.children=G;else if(1<fe){ve=Array(fe);for(var Y=0;Y<fe;Y++)ve[Y]=arguments[Y+2];Z.children=ve}return{$$typeof:e,type:F.type,key:oe,ref:le,props:Z,_owner:ge}},dt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:i,_context:F},F.Consumer=F},dt.createElement=D,dt.createFactory=function(F){var _=D.bind(null,F);return _.type=F,_},dt.createRef=function(){return{current:null}},dt.forwardRef=function(F){return{$$typeof:d,render:F}},dt.isValidElement=M,dt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:H}},dt.memo=function(F,_){return{$$typeof:m,type:F,compare:_===void 0?null:_}},dt.startTransition=function(F){var _=q.transition;q.transition={};try{F()}finally{q.transition=_}},dt.unstable_act=K,dt.useCallback=function(F,_){return U.current.useCallback(F,_)},dt.useContext=function(F){return U.current.useContext(F)},dt.useDebugValue=function(){},dt.useDeferredValue=function(F){return U.current.useDeferredValue(F)},dt.useEffect=function(F,_){return U.current.useEffect(F,_)},dt.useId=function(){return U.current.useId()},dt.useImperativeHandle=function(F,_,G){return U.current.useImperativeHandle(F,_,G)},dt.useInsertionEffect=function(F,_){return U.current.useInsertionEffect(F,_)},dt.useLayoutEffect=function(F,_){return U.current.useLayoutEffect(F,_)},dt.useMemo=function(F,_){return U.current.useMemo(F,_)},dt.useReducer=function(F,_,G){return U.current.useReducer(F,_,G)},dt.useRef=function(F){return U.current.useRef(F)},dt.useState=function(F){return U.current.useState(F)},dt.useSyncExternalStore=function(F,_,G){return U.current.useSyncExternalStore(F,_,G)},dt.useTransition=function(){return U.current.useTransition()},dt.version="18.3.1",dt}var Xw;function hv(){return Xw||(Xw=1,Kw.exports=G8()),Kw.exports}var Jw;function K8(){if(Jw)return Ml;Jw=1;var e=hv(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,m){var p,f={},x=null,b=null;m!==void 0&&(x=""+m),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(b=u.ref);for(p in u)a.call(u,p)&&!i.hasOwnProperty(p)&&(f[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)f[p]===void 0&&(f[p]=u[p]);return{$$typeof:r,type:d,key:x,ref:b,props:f,_owner:s.current}}return Ml.Fragment=n,Ml.jsx=l,Ml.jsxs=l,Ml}var Zw;function Y8(){return Zw||(Zw=1,Gw.exports=K8()),Gw.exports}var t=Y8(),N=hv();const X=jt(N),X8=H8({__proto__:null,default:X},[N]);var ru={},Xh={exports:{}},Gr={},Qw={exports:{}},e2={},t2;function J8(){return t2||(t2=1,(function(e){function r(q,Q){var K=q.length;q.push(Q);e:for(;0<K;){var F=K-1>>>1,_=q[F];if(0<s(_,Q))q[F]=Q,q[K]=_,K=F;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var Q=q[0],K=q.pop();if(K!==Q){q[0]=K;e:for(var F=0,_=q.length,G=_>>>1;F<G;){var Z=2*(F+1)-1,oe=q[Z],le=Z+1,ge=q[le];if(0>s(oe,K))le<_&&0>s(ge,oe)?(q[F]=ge,q[le]=K,F=le):(q[F]=oe,q[Z]=K,F=Z);else if(le<_&&0>s(ge,K))q[F]=ge,q[le]=K,F=le;else break e}}return Q}function s(q,Q){var K=q.sortIndex-Q.sortIndex;return K!==0?K:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],m=[],p=1,f=null,x=3,b=!1,y=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var Q=n(m);Q!==null;){if(Q.callback===null)a(m);else if(Q.startTime<=q)a(m),Q.sortIndex=Q.expirationTime,r(u,Q);else break;Q=n(m)}}function w(q){if(g=!1,A(q),!y)if(n(u)!==null)y=!0,H(E);else{var Q=n(m);Q!==null&&U(w,Q.startTime-q)}}function E(q,Q){y=!1,g&&(g=!1,k(D),D=-1),b=!0;var K=x;try{for(A(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||q&&!L());){var F=f.callback;if(typeof F=="function"){f.callback=null,x=f.priorityLevel;var _=F(f.expirationTime<=Q);Q=e.unstable_now(),typeof _=="function"?f.callback=_:f===n(u)&&a(u),A(Q)}else a(u);f=n(u)}if(f!==null)var G=!0;else{var Z=n(m);Z!==null&&U(w,Z.startTime-Q),G=!1}return G}finally{f=null,x=K,b=!1}}var T=!1,O=null,D=-1,I=5,M=-1;function L(){return!(e.unstable_now()-M<I)}function B(){if(O!==null){var q=e.unstable_now();M=q;var Q=!0;try{Q=O(!0,q)}finally{Q?z():(T=!1,O=null)}}else T=!1}var z;if(typeof S=="function")z=function(){S(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=B,z=function(){R.postMessage(null)}}else z=function(){j(B,0)};function H(q){O=q,T||(T=!0,z())}function U(q,Q){D=j(function(){q(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,H(E))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return q()}finally{x=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=x;x=q;try{return Q()}finally{x=K}},e.unstable_scheduleCallback=function(q,Q,K){var F=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?F+K:F):K=F,q){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=K+_,q={id:p++,callback:Q,priorityLevel:q,startTime:K,expirationTime:_,sortIndex:-1},K>F?(q.sortIndex=K,r(m,q),n(u)===null&&q===n(m)&&(g?(k(D),D=-1):g=!0,U(w,K-F))):(q.sortIndex=_,r(u,q),y||b||(y=!0,H(E))),q},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(q){var Q=x;return function(){var K=x;x=Q;try{return q.apply(this,arguments)}finally{x=K}}}})(e2)),e2}var r2;function Z8(){return r2||(r2=1,Qw.exports=J8()),Qw.exports}var n2;function Q8(){if(n2)return Gr;n2=1;var e=hv(),r=Z8();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)a.add(c[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function x(o){return u.call(f,o)?!0:u.call(p,o)?!1:m.test(o)?f[o]=!0:(p[o]=!0,!1)}function b(o,c,h,v){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return v?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function y(o,c,h,v){if(c===null||typeof c>"u"||b(o,c,h,v))return!0;if(v)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function g(o,c,h,v,C,P,$){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=v,this.attributeNamespace=C,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=P,this.removeEmptyString=$}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){j[o]=new g(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];j[c]=new g(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){j[o]=new g(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){j[o]=new g(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){j[o]=new g(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){j[o]=new g(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){j[o]=new g(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){j[o]=new g(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){j[o]=new g(o,5,!1,o.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function S(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(k,S);j[c]=new g(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(k,S);j[c]=new g(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(k,S);j[c]=new g(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){j[o]=new g(o,1,!1,o.toLowerCase(),null,!1,!1)}),j.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){j[o]=new g(o,1,!1,o.toLowerCase(),null,!0,!0)});function A(o,c,h,v){var C=j.hasOwnProperty(c)?j[c]:null;(C!==null?C.type!==0:v||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(y(c,h,C,v)&&(h=null),v||C===null?x(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):C.mustUseProperty?o[C.propertyName]=h===null?C.type===3?!1:"":h:(c=C.attributeName,v=C.attributeNamespace,h===null?o.removeAttribute(c):(C=C.type,h=C===3||C===4&&h===!0?"":""+h,v?o.setAttributeNS(v,c,h):o.setAttribute(c,h))))}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),T=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),q=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var K=Object.assign,F;function _(o){if(F===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);F=c&&c[1]||""}return`
`+F+o}var G=!1;function Z(o,c){if(!o||G)return"";G=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var v=xe}Reflect.construct(o,[],c)}else{try{c.call()}catch(xe){v=xe}o.call(c.prototype)}else{try{throw Error()}catch(xe){v=xe}o()}}catch(xe){if(xe&&v&&typeof xe.stack=="string"){for(var C=xe.stack.split(`
`),P=v.stack.split(`
`),$=C.length-1,J=P.length-1;1<=$&&0<=J&&C[$]!==P[J];)J--;for(;1<=$&&0<=J;$--,J--)if(C[$]!==P[J]){if($!==1||J!==1)do if($--,J--,0>J||C[$]!==P[J]){var re=`
`+C[$].replace(" at new "," at ");return o.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",o.displayName)),re}while(1<=$&&0<=J);break}}}finally{G=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?_(o):""}function oe(o){switch(o.tag){case 5:return _(o.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return o=Z(o.type,!1),o;case 11:return o=Z(o.type.render,!1),o;case 1:return o=Z(o.type,!0),o;default:return""}}function le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case O:return"Fragment";case T:return"Portal";case I:return"Profiler";case D:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case M:return(o._context.displayName||"Context")+".Provider";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case R:return c=o.displayName||null,c!==null?c:le(o.type)||"Memo";case H:c=o._payload,o=o._init;try{return le(o(c))}catch{}}return null}function ge(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(c);case 8:return c===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function fe(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Y(o){var c=fe(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),v=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var C=h.get,P=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return C.call(this)},set:function($){v=""+$,P.call(this,$)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function($){v=""+$},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function ne(o){o._valueTracker||(o._valueTracker=Y(o))}function ue(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),v="";return o&&(v=fe(o)?o.checked?"true":"false":o.value),o=v,o!==h?(c.setValue(o),!0):!1}function Ve(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Te(o,c){var h=c.checked;return K({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Pe(o,c){var h=c.defaultValue==null?"":c.defaultValue,v=c.checked!=null?c.checked:c.defaultChecked;h=ve(c.value!=null?c.value:h),o._wrapperState={initialChecked:v,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Xe(o,c){c=c.checked,c!=null&&A(o,"checked",c,!1)}function pe(o,c){Xe(o,c);var h=ve(c.value),v=c.type;if(h!=null)v==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(v==="submit"||v==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?ae(o,c.type,h):c.hasOwnProperty("defaultValue")&&ae(o,c.type,ve(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Oe(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var v=c.type;if(!(v!=="submit"&&v!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function ae(o,c,h){(c!=="number"||Ve(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var je=Array.isArray;function Ie(o,c,h,v){if(o=o.options,c){c={};for(var C=0;C<h.length;C++)c["$"+h[C]]=!0;for(h=0;h<o.length;h++)C=c.hasOwnProperty("$"+o[h].value),o[h].selected!==C&&(o[h].selected=C),C&&v&&(o[h].defaultSelected=!0)}else{for(h=""+ve(h),c=null,C=0;C<o.length;C++){if(o[C].value===h){o[C].selected=!0,v&&(o[C].defaultSelected=!0);return}c!==null||o[C].disabled||(c=o[C])}c!==null&&(c.selected=!0)}}function ee(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ee(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(je(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:ve(h)}}function ot(o,c){var h=ve(c.value),v=ve(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),v!=null&&(o.defaultValue=""+v)}function Rt(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function $t(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $r(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?$t(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ur,zr=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,v,C){MSApp.execUnsafeLocalFunction(function(){return o(c,h,v,C)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ur.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function br(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tr=["Webkit","ms","Moz","O"];Object.keys(Ye).forEach(function(o){Tr.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ye[c]=Ye[o]})});function yr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ye.hasOwnProperty(o)&&Ye[o]?(""+c).trim():c+"px"}function ie(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var v=h.indexOf("--")===0,C=yr(h,c[h],v);h==="float"&&(h="cssFloat"),v?o.setProperty(h,C):o[h]=C}}var he=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fe(o,c){if(c){if(he[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Ke(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=null;function Xt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ct=null,mt=null,Nr=null;function fa(o){if(o=yl(o)){if(typeof ct!="function")throw Error(n(280));var c=o.stateNode;c&&(c=xd(c),ct(o.stateNode,o.type,c))}}function vi(o){mt?Nr?Nr.push(o):Nr=[o]:mt=o}function Ps(){if(mt){var o=mt,c=Nr;if(Nr=mt=null,fa(o),c)for(o=0;o<c.length;o++)fa(c[o])}}function Tn(o,c){return o(c)}function ji(){}var ln=!1;function wi(o,c,h){if(ln)return o(c,h);ln=!0;try{return Tn(o,c,h)}finally{ln=!1,(mt!==null||Nr!==null)&&(ji(),Ps())}}function xa(o,c){var h=o.stateNode;if(h===null)return null;var v=xd(h);if(v===null)return null;h=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var ga=!1;if(d)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){ga=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{ga=!1}function Ha(o,c,h,v,C,P,$,J,re){var xe=Array.prototype.slice.call(arguments,3);try{c.apply(h,xe)}catch(ke){this.onError(ke)}}var ba=!1,ya=null,Ga=!1,Pn=null,Ka={onError:function(o){ba=!0,ya=o}};function Ya(o,c,h,v,C,P,$,J,re){ba=!1,ya=null,Ha.apply(Ka,arguments)}function Xa(o,c,h,v,C,P,$,J,re){if(Ya.apply(this,arguments),ba){if(ba){var xe=ya;ba=!1,ya=null}else throw Error(n(198));Ga||(Ga=!0,Pn=xe)}}function Pr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Ds(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Ni(o){if(Pr(o)!==o)throw Error(n(188))}function Qn(o){var c=o.alternate;if(!c){if(c=Pr(o),c===null)throw Error(n(188));return c!==o?null:o}for(var h=o,v=c;;){var C=h.return;if(C===null)break;var P=C.alternate;if(P===null){if(v=C.return,v!==null){h=v;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===h)return Ni(C),o;if(P===v)return Ni(C),c;P=P.sibling}throw Error(n(188))}if(h.return!==v.return)h=C,v=P;else{for(var $=!1,J=C.child;J;){if(J===h){$=!0,h=C,v=P;break}if(J===v){$=!0,v=C,h=P;break}J=J.sibling}if(!$){for(J=P.child;J;){if(J===h){$=!0,h=P,v=C;break}if(J===v){$=!0,v=P,h=C;break}J=J.sibling}if(!$)throw Error(n(189))}}if(h.alternate!==v)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:c}function te(o){return o=Qn(o),o!==null?we(o):null}function we(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=we(o);if(c!==null)return c;o=o.sibling}return null}var De=r.unstable_scheduleCallback,ze=r.unstable_cancelCallback,_e=r.unstable_shouldYield,nr=r.unstable_requestPaint,wt=r.unstable_now,ft=r.unstable_getCurrentPriorityLevel,et=r.unstable_ImmediatePriority,Dn=r.unstable_UserBlockingPriority,Ja=r.unstable_NormalPriority,gp=r.unstable_LowPriority,Jc=r.unstable_IdlePriority,Za=null,cn=null;function el(o){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Za,o,void 0,(o.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:yp,tl=Math.log,bp=Math.LN2;function yp(o){return o>>>=0,o===0?32:31-(tl(o)/bp|0)|0}var ki=64,Si=4194304;function Is(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ci(o,c){var h=o.pendingLanes;if(h===0)return 0;var v=0,C=o.suspendedLanes,P=o.pingedLanes,$=h&268435455;if($!==0){var J=$&~C;J!==0?v=Is(J):(P&=$,P!==0&&(v=Is(P)))}else $=h&~C,$!==0?v=Is($):P!==0&&(v=Is(P));if(v===0)return 0;if(c!==0&&c!==v&&(c&C)===0&&(C=v&-v,P=c&-c,C>=P||C===16&&(P&4194240)!==0))return c;if((v&4)!==0&&(v|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=v;0<c;)h=31-Xr(c),C=1<<h,v|=o[h],c&=~C;return v}function vp(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jp(o,c){for(var h=o.suspendedLanes,v=o.pingedLanes,C=o.expirationTimes,P=o.pendingLanes;0<P;){var $=31-Xr(P),J=1<<$,re=C[$];re===-1?((J&h)===0||(J&v)!==0)&&(C[$]=vp(J,c)):re<=c&&(o.expiredLanes|=J),P&=~J}}function rl(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Zc(){var o=ki;return ki<<=1,(ki&4194240)===0&&(ki=64),o}function nl(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ms(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Xr(c),o[c]=h}function wp(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var v=o.eventTimes;for(o=o.expirationTimes;0<h;){var C=31-Xr(h),P=1<<C;c[C]=0,v[C]=-1,o[C]=-1,h&=~P}}function al(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var v=31-Xr(h),C=1<<v;C&c|o[v]&c&&(o[v]|=c),h&=~C}}var bt=0;function Qc(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ed,sl,td,rd,Ai,il=!1,Ei=[],ea=null,dn=null,ta=null,ce=new Map,be=new Map,qe=[],We="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yt(o,c){switch(o){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":ce.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":be.delete(c.pointerId)}}function pt(o,c,h,v,C,P){return o===null||o.nativeEvent!==P?(o={blockedOn:c,domEventName:h,eventSystemFlags:v,nativeEvent:P,targetContainers:[C]},c!==null&&(c=yl(c),c!==null&&sl(c)),o):(o.eventSystemFlags|=v,c=o.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),o)}function un(o,c,h,v,C){switch(c){case"focusin":return ea=pt(ea,o,c,h,v,C),!0;case"dragenter":return dn=pt(dn,o,c,h,v,C),!0;case"mouseover":return ta=pt(ta,o,c,h,v,C),!0;case"pointerover":var P=C.pointerId;return ce.set(P,pt(ce.get(P)||null,o,c,h,v,C)),!0;case"gotpointercapture":return P=C.pointerId,be.set(P,pt(be.get(P)||null,o,c,h,v,C)),!0}return!1}function Oi(o){var c=_s(o.target);if(c!==null){var h=Pr(c);if(h!==null){if(c=h.tag,c===13){if(c=Ds(h),c!==null){o.blockedOn=c,Ai(o.priority,function(){td(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qa(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=kp(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var v=new h.constructor(h.type,h);Pt=v,h.target.dispatchEvent(v),Pt=null}else return c=yl(h),c!==null&&sl(c),o.blockedOn=h,!1;c.shift()}return!0}function ol(o,c,h){Qa(o)&&h.delete(c)}function Ls(){il=!1,ea!==null&&Qa(ea)&&(ea=null),dn!==null&&Qa(dn)&&(dn=null),ta!==null&&Qa(ta)&&(ta=null),ce.forEach(ol),be.forEach(ol)}function es(o,c){o.blockedOn===c&&(o.blockedOn=null,il||(il=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ls)))}function va(o){function c(C){return es(C,o)}if(0<Ei.length){es(Ei[0],o);for(var h=1;h<Ei.length;h++){var v=Ei[h];v.blockedOn===o&&(v.blockedOn=null)}}for(ea!==null&&es(ea,o),dn!==null&&es(dn,o),ta!==null&&es(ta,o),ce.forEach(c),be.forEach(c),h=0;h<qe.length;h++)v=qe[h],v.blockedOn===o&&(v.blockedOn=null);for(;0<qe.length&&(h=qe[0],h.blockedOn===null);)Oi(h),h.blockedOn===null&&qe.shift()}var Ti=w.ReactCurrentBatchConfig,nd=!0;function gT(o,c,h,v){var C=bt,P=Ti.transition;Ti.transition=null;try{bt=1,Np(o,c,h,v)}finally{bt=C,Ti.transition=P}}function bT(o,c,h,v){var C=bt,P=Ti.transition;Ti.transition=null;try{bt=4,Np(o,c,h,v)}finally{bt=C,Ti.transition=P}}function Np(o,c,h,v){if(nd){var C=kp(o,c,h,v);if(C===null)Bp(o,c,v,ad,h),yt(o,v);else if(un(C,o,c,h,v))v.stopPropagation();else if(yt(o,v),c&4&&-1<We.indexOf(o)){for(;C!==null;){var P=yl(C);if(P!==null&&ed(P),P=kp(o,c,h,v),P===null&&Bp(o,c,v,ad,h),P===C)break;C=P}C!==null&&v.stopPropagation()}else Bp(o,c,v,null,h)}}var ad=null;function kp(o,c,h,v){if(ad=null,o=Xt(v),o=_s(o),o!==null)if(c=Pr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Ds(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ad=o,null}function Dj(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ft()){case et:return 1;case Dn:return 4;case Ja:case gp:return 16;case Jc:return 536870912;default:return 16}default:return 16}}var ts=null,Sp=null,sd=null;function Ij(){if(sd)return sd;var o,c=Sp,h=c.length,v,C="value"in ts?ts.value:ts.textContent,P=C.length;for(o=0;o<h&&c[o]===C[o];o++);var $=h-o;for(v=1;v<=$&&c[h-v]===C[P-v];v++);return sd=C.slice(o,1<v?1-v:void 0)}function id(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function od(){return!0}function Mj(){return!1}function Jr(o){function c(h,v,C,P,$){this._reactName=h,this._targetInst=C,this.type=v,this.nativeEvent=P,this.target=$,this.currentTarget=null;for(var J in o)o.hasOwnProperty(J)&&(h=o[J],this[J]=h?h(P):P[J]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?od:Mj,this.isPropagationStopped=Mj,this}return K(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),c}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cp=Jr(Pi),ll=K({},Pi,{view:0,detail:0}),yT=Jr(ll),Ap,Ep,cl,ld=K({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==cl&&(cl&&o.type==="mousemove"?(Ap=o.screenX-cl.screenX,Ep=o.screenY-cl.screenY):Ep=Ap=0,cl=o),Ap)},movementY:function(o){return"movementY"in o?o.movementY:Ep}}),Lj=Jr(ld),vT=K({},ld,{dataTransfer:0}),jT=Jr(vT),wT=K({},ll,{relatedTarget:0}),Op=Jr(wT),NT=K({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),kT=Jr(NT),ST=K({},Pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),CT=Jr(ST),AT=K({},Pi,{data:0}),_j=Jr(AT),ET={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=TT[o])?!!c[o]:!1}function Tp(){return PT}var DT=K({},ll,{key:function(o){if(o.key){var c=ET[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=id(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?OT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tp,charCode:function(o){return o.type==="keypress"?id(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?id(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),IT=Jr(DT),MT=K({},ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fj=Jr(MT),LT=K({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tp}),_T=Jr(LT),FT=K({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),RT=Jr(FT),$T=K({},ld,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),zT=Jr($T),BT=[9,13,27,32],Pp=d&&"CompositionEvent"in window,dl=null;d&&"documentMode"in document&&(dl=document.documentMode);var WT=d&&"TextEvent"in window&&!dl,Rj=d&&(!Pp||dl&&8<dl&&11>=dl),$j=" ",zj=!1;function Bj(o,c){switch(o){case"keyup":return BT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wj(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Di=!1;function UT(o,c){switch(o){case"compositionend":return Wj(c);case"keypress":return c.which!==32?null:(zj=!0,$j);case"textInput":return o=c.data,o===$j&&zj?null:o;default:return null}}function qT(o,c){if(Di)return o==="compositionend"||!Pp&&Bj(o,c)?(o=Ij(),sd=Sp=ts=null,Di=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Rj&&c.locale!=="ko"?null:c.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uj(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!VT[o.type]:c==="textarea"}function qj(o,c,h,v){vi(v),c=pd(c,"onChange"),0<c.length&&(h=new Cp("onChange","change",null,h,v),o.push({event:h,listeners:c}))}var ul=null,ml=null;function HT(o){l1(o,0)}function cd(o){var c=Fi(o);if(ue(c))return o}function GT(o,c){if(o==="change")return c}var Vj=!1;if(d){var Dp;if(d){var Ip="oninput"in document;if(!Ip){var Hj=document.createElement("div");Hj.setAttribute("oninput","return;"),Ip=typeof Hj.oninput=="function"}Dp=Ip}else Dp=!1;Vj=Dp&&(!document.documentMode||9<document.documentMode)}function Gj(){ul&&(ul.detachEvent("onpropertychange",Kj),ml=ul=null)}function Kj(o){if(o.propertyName==="value"&&cd(ml)){var c=[];qj(c,ml,o,Xt(o)),wi(HT,c)}}function KT(o,c,h){o==="focusin"?(Gj(),ul=c,ml=h,ul.attachEvent("onpropertychange",Kj)):o==="focusout"&&Gj()}function YT(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cd(ml)}function XT(o,c){if(o==="click")return cd(c)}function JT(o,c){if(o==="input"||o==="change")return cd(c)}function ZT(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var In=typeof Object.is=="function"?Object.is:ZT;function pl(o,c){if(In(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),v=Object.keys(c);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var C=h[v];if(!u.call(c,C)||!In(o[C],c[C]))return!1}return!0}function Yj(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Xj(o,c){var h=Yj(o);o=0;for(var v;h;){if(h.nodeType===3){if(v=o+h.textContent.length,o<=c&&v>=c)return{node:h,offset:c-o};o=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Yj(h)}}function Jj(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Jj(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Zj(){for(var o=window,c=Ve();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ve(o.document)}return c}function Mp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function QT(o){var c=Zj(),h=o.focusedElem,v=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Jj(h.ownerDocument.documentElement,h)){if(v!==null&&Mp(h)){if(c=v.start,o=v.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var C=h.textContent.length,P=Math.min(v.start,C);v=v.end===void 0?P:Math.min(v.end,C),!o.extend&&P>v&&(C=v,v=P,P=C),C=Xj(h,P);var $=Xj(h,v);C&&$&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==$.node||o.focusOffset!==$.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),o.removeAllRanges(),P>v?(o.addRange(c),o.extend($.node,$.offset)):(c.setEnd($.node,$.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var e8=d&&"documentMode"in document&&11>=document.documentMode,Ii=null,Lp=null,hl=null,_p=!1;function Qj(o,c,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;_p||Ii==null||Ii!==Ve(v)||(v=Ii,"selectionStart"in v&&Mp(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),hl&&pl(hl,v)||(hl=v,v=pd(Lp,"onSelect"),0<v.length&&(c=new Cp("onSelect","select",null,c,h),o.push({event:c,listeners:v}),c.target=Ii)))}function dd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Mi={animationend:dd("Animation","AnimationEnd"),animationiteration:dd("Animation","AnimationIteration"),animationstart:dd("Animation","AnimationStart"),transitionend:dd("Transition","TransitionEnd")},Fp={},e1={};d&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function ud(o){if(Fp[o])return Fp[o];if(!Mi[o])return o;var c=Mi[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in e1)return Fp[o]=c[h];return o}var t1=ud("animationend"),r1=ud("animationiteration"),n1=ud("animationstart"),a1=ud("transitionend"),s1=new Map,i1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(o,c){s1.set(o,c),i(c,[o])}for(var Rp=0;Rp<i1.length;Rp++){var $p=i1[Rp],t8=$p.toLowerCase(),r8=$p[0].toUpperCase()+$p.slice(1);rs(t8,"on"+r8)}rs(t1,"onAnimationEnd"),rs(r1,"onAnimationIteration"),rs(n1,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(a1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function o1(o,c,h){var v=o.type||"unknown-event";o.currentTarget=h,Xa(v,c,void 0,o),o.currentTarget=null}function l1(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var v=o[h],C=v.event;v=v.listeners;e:{var P=void 0;if(c)for(var $=v.length-1;0<=$;$--){var J=v[$],re=J.instance,xe=J.currentTarget;if(J=J.listener,re!==P&&C.isPropagationStopped())break e;o1(C,J,xe),P=re}else for($=0;$<v.length;$++){if(J=v[$],re=J.instance,xe=J.currentTarget,J=J.listener,re!==P&&C.isPropagationStopped())break e;o1(C,J,xe),P=re}}}if(Ga)throw o=Pn,Ga=!1,Pn=null,o}function Dt(o,c){var h=c[Gp];h===void 0&&(h=c[Gp]=new Set);var v=o+"__bubble";h.has(v)||(c1(c,o,2,!1),h.add(v))}function zp(o,c,h){var v=0;c&&(v|=4),c1(h,o,v,c)}var md="_reactListening"+Math.random().toString(36).slice(2);function xl(o){if(!o[md]){o[md]=!0,a.forEach(function(h){h!=="selectionchange"&&(n8.has(h)||zp(h,!1,o),zp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[md]||(c[md]=!0,zp("selectionchange",!1,c))}}function c1(o,c,h,v){switch(Dj(c)){case 1:var C=gT;break;case 4:C=bT;break;default:C=Np}h=C.bind(null,c,h,o),C=void 0,!ga||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),v?C!==void 0?o.addEventListener(c,h,{capture:!0,passive:C}):o.addEventListener(c,h,!0):C!==void 0?o.addEventListener(c,h,{passive:C}):o.addEventListener(c,h,!1)}function Bp(o,c,h,v,C){var P=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var $=v.tag;if($===3||$===4){var J=v.stateNode.containerInfo;if(J===C||J.nodeType===8&&J.parentNode===C)break;if($===4)for($=v.return;$!==null;){var re=$.tag;if((re===3||re===4)&&(re=$.stateNode.containerInfo,re===C||re.nodeType===8&&re.parentNode===C))return;$=$.return}for(;J!==null;){if($=_s(J),$===null)return;if(re=$.tag,re===5||re===6){v=P=$;continue e}J=J.parentNode}}v=v.return}wi(function(){var xe=P,ke=Xt(h),Se=[];e:{var Ne=s1.get(o);if(Ne!==void 0){var Le=Cp,Be=o;switch(o){case"keypress":if(id(h)===0)break e;case"keydown":case"keyup":Le=IT;break;case"focusin":Be="focus",Le=Op;break;case"focusout":Be="blur",Le=Op;break;case"beforeblur":case"afterblur":Le=Op;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Lj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=_T;break;case t1:case r1:case n1:Le=kT;break;case a1:Le=RT;break;case"scroll":Le=yT;break;case"wheel":Le=zT;break;case"copy":case"cut":case"paste":Le=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Fj}var Ue=(c&4)!==0,Jt=!Ue&&o==="scroll",de=Ue?Ne!==null?Ne+"Capture":null:Ne;Ue=[];for(var se=xe,me;se!==null;){me=se;var Ae=me.stateNode;if(me.tag===5&&Ae!==null&&(me=Ae,de!==null&&(Ae=xa(se,de),Ae!=null&&Ue.push(gl(se,Ae,me)))),Jt)break;se=se.return}0<Ue.length&&(Ne=new Le(Ne,Be,null,h,ke),Se.push({event:Ne,listeners:Ue}))}}if((c&7)===0){e:{if(Ne=o==="mouseover"||o==="pointerover",Le=o==="mouseout"||o==="pointerout",Ne&&h!==Pt&&(Be=h.relatedTarget||h.fromElement)&&(_s(Be)||Be[ja]))break e;if((Le||Ne)&&(Ne=ke.window===ke?ke:(Ne=ke.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Le?(Be=h.relatedTarget||h.toElement,Le=xe,Be=Be?_s(Be):null,Be!==null&&(Jt=Pr(Be),Be!==Jt||Be.tag!==5&&Be.tag!==6)&&(Be=null)):(Le=null,Be=xe),Le!==Be)){if(Ue=Lj,Ae="onMouseLeave",de="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(Ue=Fj,Ae="onPointerLeave",de="onPointerEnter",se="pointer"),Jt=Le==null?Ne:Fi(Le),me=Be==null?Ne:Fi(Be),Ne=new Ue(Ae,se+"leave",Le,h,ke),Ne.target=Jt,Ne.relatedTarget=me,Ae=null,_s(ke)===xe&&(Ue=new Ue(de,se+"enter",Be,h,ke),Ue.target=me,Ue.relatedTarget=Jt,Ae=Ue),Jt=Ae,Le&&Be)t:{for(Ue=Le,de=Be,se=0,me=Ue;me;me=Li(me))se++;for(me=0,Ae=de;Ae;Ae=Li(Ae))me++;for(;0<se-me;)Ue=Li(Ue),se--;for(;0<me-se;)de=Li(de),me--;for(;se--;){if(Ue===de||de!==null&&Ue===de.alternate)break t;Ue=Li(Ue),de=Li(de)}Ue=null}else Ue=null;Le!==null&&d1(Se,Ne,Le,Ue,!1),Be!==null&&Jt!==null&&d1(Se,Jt,Be,Ue,!0)}}e:{if(Ne=xe?Fi(xe):window,Le=Ne.nodeName&&Ne.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ne.type==="file")var He=GT;else if(Uj(Ne))if(Vj)He=JT;else{He=YT;var Je=KT}else(Le=Ne.nodeName)&&Le.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(He=XT);if(He&&(He=He(o,xe))){qj(Se,He,h,ke);break e}Je&&Je(o,Ne,xe),o==="focusout"&&(Je=Ne._wrapperState)&&Je.controlled&&Ne.type==="number"&&ae(Ne,"number",Ne.value)}switch(Je=xe?Fi(xe):window,o){case"focusin":(Uj(Je)||Je.contentEditable==="true")&&(Ii=Je,Lp=xe,hl=null);break;case"focusout":hl=Lp=Ii=null;break;case"mousedown":_p=!0;break;case"contextmenu":case"mouseup":case"dragend":_p=!1,Qj(Se,h,ke);break;case"selectionchange":if(e8)break;case"keydown":case"keyup":Qj(Se,h,ke)}var Ze;if(Pp)e:{switch(o){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Di?Bj(o,h)&&(rt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(rt="onCompositionStart");rt&&(Rj&&h.locale!=="ko"&&(Di||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Di&&(Ze=Ij()):(ts=ke,Sp="value"in ts?ts.value:ts.textContent,Di=!0)),Je=pd(xe,rt),0<Je.length&&(rt=new _j(rt,o,null,h,ke),Se.push({event:rt,listeners:Je}),Ze?rt.data=Ze:(Ze=Wj(h),Ze!==null&&(rt.data=Ze)))),(Ze=WT?UT(o,h):qT(o,h))&&(xe=pd(xe,"onBeforeInput"),0<xe.length&&(ke=new _j("onBeforeInput","beforeinput",null,h,ke),Se.push({event:ke,listeners:xe}),ke.data=Ze))}l1(Se,c)})}function gl(o,c,h){return{instance:o,listener:c,currentTarget:h}}function pd(o,c){for(var h=c+"Capture",v=[];o!==null;){var C=o,P=C.stateNode;C.tag===5&&P!==null&&(C=P,P=xa(o,h),P!=null&&v.unshift(gl(o,P,C)),P=xa(o,c),P!=null&&v.push(gl(o,P,C))),o=o.return}return v}function Li(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function d1(o,c,h,v,C){for(var P=c._reactName,$=[];h!==null&&h!==v;){var J=h,re=J.alternate,xe=J.stateNode;if(re!==null&&re===v)break;J.tag===5&&xe!==null&&(J=xe,C?(re=xa(h,P),re!=null&&$.unshift(gl(h,re,J))):C||(re=xa(h,P),re!=null&&$.push(gl(h,re,J)))),h=h.return}$.length!==0&&o.push({event:c,listeners:$})}var a8=/\r\n?/g,s8=/\u0000|\uFFFD/g;function u1(o){return(typeof o=="string"?o:""+o).replace(a8,`
`).replace(s8,"")}function hd(o,c,h){if(c=u1(c),u1(o)!==c&&h)throw Error(n(425))}function fd(){}var Wp=null,Up=null;function qp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Vp=typeof setTimeout=="function"?setTimeout:void 0,i8=typeof clearTimeout=="function"?clearTimeout:void 0,m1=typeof Promise=="function"?Promise:void 0,o8=typeof queueMicrotask=="function"?queueMicrotask:typeof m1<"u"?function(o){return m1.resolve(null).then(o).catch(l8)}:Vp;function l8(o){setTimeout(function(){throw o})}function Hp(o,c){var h=c,v=0;do{var C=h.nextSibling;if(o.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(v===0){o.removeChild(C),va(c);return}v--}else h!=="$"&&h!=="$?"&&h!=="$!"||v++;h=C}while(h);va(c)}function ns(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function p1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var _i=Math.random().toString(36).slice(2),ra="__reactFiber$"+_i,bl="__reactProps$"+_i,ja="__reactContainer$"+_i,Gp="__reactEvents$"+_i,c8="__reactListeners$"+_i,d8="__reactHandles$"+_i;function _s(o){var c=o[ra];if(c)return c;for(var h=o.parentNode;h;){if(c=h[ja]||h[ra]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=p1(o);o!==null;){if(h=o[ra])return h;o=p1(o)}return c}o=h,h=o.parentNode}return null}function yl(o){return o=o[ra]||o[ja],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Fi(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function xd(o){return o[bl]||null}var Kp=[],Ri=-1;function as(o){return{current:o}}function It(o){0>Ri||(o.current=Kp[Ri],Kp[Ri]=null,Ri--)}function Et(o,c){Ri++,Kp[Ri]=o.current,o.current=c}var ss={},kr=as(ss),Wr=as(!1),Fs=ss;function $i(o,c){var h=o.type.contextTypes;if(!h)return ss;var v=o.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===c)return v.__reactInternalMemoizedMaskedChildContext;var C={},P;for(P in h)C[P]=c[P];return v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=C),C}function Ur(o){return o=o.childContextTypes,o!=null}function gd(){It(Wr),It(kr)}function h1(o,c,h){if(kr.current!==ss)throw Error(n(168));Et(kr,c),Et(Wr,h)}function f1(o,c,h){var v=o.stateNode;if(c=c.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var C in v)if(!(C in c))throw Error(n(108,ge(o)||"Unknown",C));return K({},h,v)}function bd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ss,Fs=kr.current,Et(kr,o),Et(Wr,Wr.current),!0}function x1(o,c,h){var v=o.stateNode;if(!v)throw Error(n(169));h?(o=f1(o,c,Fs),v.__reactInternalMemoizedMergedChildContext=o,It(Wr),It(kr),Et(kr,o)):It(Wr),Et(Wr,h)}var wa=null,yd=!1,Yp=!1;function g1(o){wa===null?wa=[o]:wa.push(o)}function u8(o){yd=!0,g1(o)}function is(){if(!Yp&&wa!==null){Yp=!0;var o=0,c=bt;try{var h=wa;for(bt=1;o<h.length;o++){var v=h[o];do v=v(!0);while(v!==null)}wa=null,yd=!1}catch(C){throw wa!==null&&(wa=wa.slice(o+1)),De(et,is),C}finally{bt=c,Yp=!1}}return null}var zi=[],Bi=0,vd=null,jd=0,mn=[],pn=0,Rs=null,Na=1,ka="";function $s(o,c){zi[Bi++]=jd,zi[Bi++]=vd,vd=o,jd=c}function b1(o,c,h){mn[pn++]=Na,mn[pn++]=ka,mn[pn++]=Rs,Rs=o;var v=Na;o=ka;var C=32-Xr(v)-1;v&=~(1<<C),h+=1;var P=32-Xr(c)+C;if(30<P){var $=C-C%5;P=(v&(1<<$)-1).toString(32),v>>=$,C-=$,Na=1<<32-Xr(c)+C|h<<C|v,ka=P+o}else Na=1<<P|h<<C|v,ka=o}function Xp(o){o.return!==null&&($s(o,1),b1(o,1,0))}function Jp(o){for(;o===vd;)vd=zi[--Bi],zi[Bi]=null,jd=zi[--Bi],zi[Bi]=null;for(;o===Rs;)Rs=mn[--pn],mn[pn]=null,ka=mn[--pn],mn[pn]=null,Na=mn[--pn],mn[pn]=null}var Zr=null,Qr=null,zt=!1,Mn=null;function y1(o,c){var h=gn(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function v1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Zr=o,Qr=ns(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Zr=o,Qr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Rs!==null?{id:Na,overflow:ka}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=gn(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,Zr=o,Qr=null,!0):!1;default:return!1}}function Zp(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Qp(o){if(zt){var c=Qr;if(c){var h=c;if(!v1(o,c)){if(Zp(o))throw Error(n(418));c=ns(h.nextSibling);var v=Zr;c&&v1(o,c)?y1(v,h):(o.flags=o.flags&-4097|2,zt=!1,Zr=o)}}else{if(Zp(o))throw Error(n(418));o.flags=o.flags&-4097|2,zt=!1,Zr=o}}}function j1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Zr=o}function wd(o){if(o!==Zr)return!1;if(!zt)return j1(o),zt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!qp(o.type,o.memoizedProps)),c&&(c=Qr)){if(Zp(o))throw w1(),Error(n(418));for(;c;)y1(o,c),c=ns(c.nextSibling)}if(j1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Qr=ns(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Qr=null}}else Qr=Zr?ns(o.stateNode.nextSibling):null;return!0}function w1(){for(var o=Qr;o;)o=ns(o.nextSibling)}function Wi(){Qr=Zr=null,zt=!1}function eh(o){Mn===null?Mn=[o]:Mn.push(o)}var m8=w.ReactCurrentBatchConfig;function vl(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var v=h.stateNode}if(!v)throw Error(n(147,o));var C=v,P=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function($){var J=C.refs;$===null?delete J[P]:J[P]=$},c._stringRef=P,c)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function Nd(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function N1(o){var c=o._init;return c(o._payload)}function k1(o){function c(de,se){if(o){var me=de.deletions;me===null?(de.deletions=[se],de.flags|=16):me.push(se)}}function h(de,se){if(!o)return null;for(;se!==null;)c(de,se),se=se.sibling;return null}function v(de,se){for(de=new Map;se!==null;)se.key!==null?de.set(se.key,se):de.set(se.index,se),se=se.sibling;return de}function C(de,se){return de=hs(de,se),de.index=0,de.sibling=null,de}function P(de,se,me){return de.index=me,o?(me=de.alternate,me!==null?(me=me.index,me<se?(de.flags|=2,se):me):(de.flags|=2,se)):(de.flags|=1048576,se)}function $(de){return o&&de.alternate===null&&(de.flags|=2),de}function J(de,se,me,Ae){return se===null||se.tag!==6?(se=qh(me,de.mode,Ae),se.return=de,se):(se=C(se,me),se.return=de,se)}function re(de,se,me,Ae){var He=me.type;return He===O?ke(de,se,me.props.children,Ae,me.key):se!==null&&(se.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===H&&N1(He)===se.type)?(Ae=C(se,me.props),Ae.ref=vl(de,se,me),Ae.return=de,Ae):(Ae=Gd(me.type,me.key,me.props,null,de.mode,Ae),Ae.ref=vl(de,se,me),Ae.return=de,Ae)}function xe(de,se,me,Ae){return se===null||se.tag!==4||se.stateNode.containerInfo!==me.containerInfo||se.stateNode.implementation!==me.implementation?(se=Vh(me,de.mode,Ae),se.return=de,se):(se=C(se,me.children||[]),se.return=de,se)}function ke(de,se,me,Ae,He){return se===null||se.tag!==7?(se=Gs(me,de.mode,Ae,He),se.return=de,se):(se=C(se,me),se.return=de,se)}function Se(de,se,me){if(typeof se=="string"&&se!==""||typeof se=="number")return se=qh(""+se,de.mode,me),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return me=Gd(se.type,se.key,se.props,null,de.mode,me),me.ref=vl(de,null,se),me.return=de,me;case T:return se=Vh(se,de.mode,me),se.return=de,se;case H:var Ae=se._init;return Se(de,Ae(se._payload),me)}if(je(se)||Q(se))return se=Gs(se,de.mode,me,null),se.return=de,se;Nd(de,se)}return null}function Ne(de,se,me,Ae){var He=se!==null?se.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return He!==null?null:J(de,se,""+me,Ae);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case E:return me.key===He?re(de,se,me,Ae):null;case T:return me.key===He?xe(de,se,me,Ae):null;case H:return He=me._init,Ne(de,se,He(me._payload),Ae)}if(je(me)||Q(me))return He!==null?null:ke(de,se,me,Ae,null);Nd(de,me)}return null}function Le(de,se,me,Ae,He){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return de=de.get(me)||null,J(se,de,""+Ae,He);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case E:return de=de.get(Ae.key===null?me:Ae.key)||null,re(se,de,Ae,He);case T:return de=de.get(Ae.key===null?me:Ae.key)||null,xe(se,de,Ae,He);case H:var Je=Ae._init;return Le(de,se,me,Je(Ae._payload),He)}if(je(Ae)||Q(Ae))return de=de.get(me)||null,ke(se,de,Ae,He,null);Nd(se,Ae)}return null}function Be(de,se,me,Ae){for(var He=null,Je=null,Ze=se,rt=se=0,hr=null;Ze!==null&&rt<me.length;rt++){Ze.index>rt?(hr=Ze,Ze=null):hr=Ze.sibling;var xt=Ne(de,Ze,me[rt],Ae);if(xt===null){Ze===null&&(Ze=hr);break}o&&Ze&&xt.alternate===null&&c(de,Ze),se=P(xt,se,rt),Je===null?He=xt:Je.sibling=xt,Je=xt,Ze=hr}if(rt===me.length)return h(de,Ze),zt&&$s(de,rt),He;if(Ze===null){for(;rt<me.length;rt++)Ze=Se(de,me[rt],Ae),Ze!==null&&(se=P(Ze,se,rt),Je===null?He=Ze:Je.sibling=Ze,Je=Ze);return zt&&$s(de,rt),He}for(Ze=v(de,Ze);rt<me.length;rt++)hr=Le(Ze,de,rt,me[rt],Ae),hr!==null&&(o&&hr.alternate!==null&&Ze.delete(hr.key===null?rt:hr.key),se=P(hr,se,rt),Je===null?He=hr:Je.sibling=hr,Je=hr);return o&&Ze.forEach(function(fs){return c(de,fs)}),zt&&$s(de,rt),He}function Ue(de,se,me,Ae){var He=Q(me);if(typeof He!="function")throw Error(n(150));if(me=He.call(me),me==null)throw Error(n(151));for(var Je=He=null,Ze=se,rt=se=0,hr=null,xt=me.next();Ze!==null&&!xt.done;rt++,xt=me.next()){Ze.index>rt?(hr=Ze,Ze=null):hr=Ze.sibling;var fs=Ne(de,Ze,xt.value,Ae);if(fs===null){Ze===null&&(Ze=hr);break}o&&Ze&&fs.alternate===null&&c(de,Ze),se=P(fs,se,rt),Je===null?He=fs:Je.sibling=fs,Je=fs,Ze=hr}if(xt.done)return h(de,Ze),zt&&$s(de,rt),He;if(Ze===null){for(;!xt.done;rt++,xt=me.next())xt=Se(de,xt.value,Ae),xt!==null&&(se=P(xt,se,rt),Je===null?He=xt:Je.sibling=xt,Je=xt);return zt&&$s(de,rt),He}for(Ze=v(de,Ze);!xt.done;rt++,xt=me.next())xt=Le(Ze,de,rt,xt.value,Ae),xt!==null&&(o&&xt.alternate!==null&&Ze.delete(xt.key===null?rt:xt.key),se=P(xt,se,rt),Je===null?He=xt:Je.sibling=xt,Je=xt);return o&&Ze.forEach(function(V8){return c(de,V8)}),zt&&$s(de,rt),He}function Jt(de,se,me,Ae){if(typeof me=="object"&&me!==null&&me.type===O&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case E:e:{for(var He=me.key,Je=se;Je!==null;){if(Je.key===He){if(He=me.type,He===O){if(Je.tag===7){h(de,Je.sibling),se=C(Je,me.props.children),se.return=de,de=se;break e}}else if(Je.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===H&&N1(He)===Je.type){h(de,Je.sibling),se=C(Je,me.props),se.ref=vl(de,Je,me),se.return=de,de=se;break e}h(de,Je);break}else c(de,Je);Je=Je.sibling}me.type===O?(se=Gs(me.props.children,de.mode,Ae,me.key),se.return=de,de=se):(Ae=Gd(me.type,me.key,me.props,null,de.mode,Ae),Ae.ref=vl(de,se,me),Ae.return=de,de=Ae)}return $(de);case T:e:{for(Je=me.key;se!==null;){if(se.key===Je)if(se.tag===4&&se.stateNode.containerInfo===me.containerInfo&&se.stateNode.implementation===me.implementation){h(de,se.sibling),se=C(se,me.children||[]),se.return=de,de=se;break e}else{h(de,se);break}else c(de,se);se=se.sibling}se=Vh(me,de.mode,Ae),se.return=de,de=se}return $(de);case H:return Je=me._init,Jt(de,se,Je(me._payload),Ae)}if(je(me))return Be(de,se,me,Ae);if(Q(me))return Ue(de,se,me,Ae);Nd(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,se!==null&&se.tag===6?(h(de,se.sibling),se=C(se,me),se.return=de,de=se):(h(de,se),se=qh(me,de.mode,Ae),se.return=de,de=se),$(de)):h(de,se)}return Jt}var Ui=k1(!0),S1=k1(!1),kd=as(null),Sd=null,qi=null,th=null;function rh(){th=qi=Sd=null}function nh(o){var c=kd.current;It(kd),o._currentValue=c}function ah(o,c,h){for(;o!==null;){var v=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),o===h)break;o=o.return}}function Vi(o,c){Sd=o,th=qi=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(qr=!0),o.firstContext=null)}function hn(o){var c=o._currentValue;if(th!==o)if(o={context:o,memoizedValue:c,next:null},qi===null){if(Sd===null)throw Error(n(308));qi=o,Sd.dependencies={lanes:0,firstContext:o}}else qi=qi.next=o;return c}var zs=null;function sh(o){zs===null?zs=[o]:zs.push(o)}function C1(o,c,h,v){var C=c.interleaved;return C===null?(h.next=h,sh(c)):(h.next=C.next,C.next=h),c.interleaved=h,Sa(o,v)}function Sa(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var os=!1;function ih(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ca(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function ls(o,c,h){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(ht&2)!==0){var C=v.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),v.pending=c,Sa(o,h)}return C=v.interleaved,C===null?(c.next=c,sh(v)):(c.next=C.next,C.next=c),v.interleaved=c,Sa(o,h)}function Cd(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var v=c.lanes;v&=o.pendingLanes,h|=v,c.lanes=h,al(o,h)}}function E1(o,c){var h=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var C=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var $={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?C=P=$:P=P.next=$,h=h.next}while(h!==null);P===null?C=P=c:P=P.next=c}else C=P=c;h={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:v.shared,effects:v.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Ad(o,c,h,v){var C=o.updateQueue;os=!1;var P=C.firstBaseUpdate,$=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var re=J,xe=re.next;re.next=null,$===null?P=xe:$.next=xe,$=re;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,J=ke.lastBaseUpdate,J!==$&&(J===null?ke.firstBaseUpdate=xe:J.next=xe,ke.lastBaseUpdate=re))}if(P!==null){var Se=C.baseState;$=0,ke=xe=re=null,J=P;do{var Ne=J.lane,Le=J.eventTime;if((v&Ne)===Ne){ke!==null&&(ke=ke.next={eventTime:Le,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Be=o,Ue=J;switch(Ne=c,Le=h,Ue.tag){case 1:if(Be=Ue.payload,typeof Be=="function"){Se=Be.call(Le,Se,Ne);break e}Se=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ue.payload,Ne=typeof Be=="function"?Be.call(Le,Se,Ne):Be,Ne==null)break e;Se=K({},Se,Ne);break e;case 2:os=!0}}J.callback!==null&&J.lane!==0&&(o.flags|=64,Ne=C.effects,Ne===null?C.effects=[J]:Ne.push(J))}else Le={eventTime:Le,lane:Ne,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ke===null?(xe=ke=Le,re=Se):ke=ke.next=Le,$|=Ne;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;Ne=J,J=Ne.next,Ne.next=null,C.lastBaseUpdate=Ne,C.shared.pending=null}}while(!0);if(ke===null&&(re=Se),C.baseState=re,C.firstBaseUpdate=xe,C.lastBaseUpdate=ke,c=C.shared.interleaved,c!==null){C=c;do $|=C.lane,C=C.next;while(C!==c)}else P===null&&(C.shared.lanes=0);Us|=$,o.lanes=$,o.memoizedState=Se}}function O1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var v=o[c],C=v.callback;if(C!==null){if(v.callback=null,v=h,typeof C!="function")throw Error(n(191,C));C.call(v)}}}var jl={},na=as(jl),wl=as(jl),Nl=as(jl);function Bs(o){if(o===jl)throw Error(n(174));return o}function oh(o,c){switch(Et(Nl,c),Et(wl,o),Et(na,jl),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:$r(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=$r(c,o)}It(na),Et(na,c)}function Hi(){It(na),It(wl),It(Nl)}function T1(o){Bs(Nl.current);var c=Bs(na.current),h=$r(c,o.type);c!==h&&(Et(wl,o),Et(na,h))}function lh(o){wl.current===o&&(It(na),It(wl))}var qt=as(0);function Ed(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ch=[];function dh(){for(var o=0;o<ch.length;o++)ch[o]._workInProgressVersionPrimary=null;ch.length=0}var Od=w.ReactCurrentDispatcher,uh=w.ReactCurrentBatchConfig,Ws=0,Vt=null,ar=null,mr=null,Td=!1,kl=!1,Sl=0,p8=0;function Sr(){throw Error(n(321))}function mh(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!In(o[h],c[h]))return!1;return!0}function ph(o,c,h,v,C,P){if(Ws=P,Vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Od.current=o===null||o.memoizedState===null?g8:b8,o=h(v,C),kl){P=0;do{if(kl=!1,Sl=0,25<=P)throw Error(n(301));P+=1,mr=ar=null,c.updateQueue=null,Od.current=y8,o=h(v,C)}while(kl)}if(Od.current=Id,c=ar!==null&&ar.next!==null,Ws=0,mr=ar=Vt=null,Td=!1,c)throw Error(n(300));return o}function hh(){var o=Sl!==0;return Sl=0,o}function aa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Vt.memoizedState=mr=o:mr=mr.next=o,mr}function fn(){if(ar===null){var o=Vt.alternate;o=o!==null?o.memoizedState:null}else o=ar.next;var c=mr===null?Vt.memoizedState:mr.next;if(c!==null)mr=c,ar=o;else{if(o===null)throw Error(n(310));ar=o,o={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},mr===null?Vt.memoizedState=mr=o:mr=mr.next=o}return mr}function Cl(o,c){return typeof c=="function"?c(o):c}function fh(o){var c=fn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var v=ar,C=v.baseQueue,P=h.pending;if(P!==null){if(C!==null){var $=C.next;C.next=P.next,P.next=$}v.baseQueue=C=P,h.pending=null}if(C!==null){P=C.next,v=v.baseState;var J=$=null,re=null,xe=P;do{var ke=xe.lane;if((Ws&ke)===ke)re!==null&&(re=re.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),v=xe.hasEagerState?xe.eagerState:o(v,xe.action);else{var Se={lane:ke,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};re===null?(J=re=Se,$=v):re=re.next=Se,Vt.lanes|=ke,Us|=ke}xe=xe.next}while(xe!==null&&xe!==P);re===null?$=v:re.next=J,In(v,c.memoizedState)||(qr=!0),c.memoizedState=v,c.baseState=$,c.baseQueue=re,h.lastRenderedState=v}if(o=h.interleaved,o!==null){C=o;do P=C.lane,Vt.lanes|=P,Us|=P,C=C.next;while(C!==o)}else C===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function xh(o){var c=fn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var v=h.dispatch,C=h.pending,P=c.memoizedState;if(C!==null){h.pending=null;var $=C=C.next;do P=o(P,$.action),$=$.next;while($!==C);In(P,c.memoizedState)||(qr=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),h.lastRenderedState=P}return[P,v]}function P1(){}function D1(o,c){var h=Vt,v=fn(),C=c(),P=!In(v.memoizedState,C);if(P&&(v.memoizedState=C,qr=!0),v=v.queue,gh(L1.bind(null,h,v,o),[o]),v.getSnapshot!==c||P||mr!==null&&mr.memoizedState.tag&1){if(h.flags|=2048,Al(9,M1.bind(null,h,v,C,c),void 0,null),pr===null)throw Error(n(349));(Ws&30)!==0||I1(h,c,C)}return C}function I1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Vt.updateQueue,c===null?(c={lastEffect:null,stores:null},Vt.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function M1(o,c,h,v){c.value=h,c.getSnapshot=v,_1(c)&&F1(o)}function L1(o,c,h){return h(function(){_1(c)&&F1(o)})}function _1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!In(o,h)}catch{return!0}}function F1(o){var c=Sa(o,1);c!==null&&Rn(c,o,1,-1)}function R1(o){var c=aa();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:o},c.queue=o,o=o.dispatch=x8.bind(null,Vt,o),[c.memoizedState,o]}function Al(o,c,h,v){return o={tag:o,create:c,destroy:h,deps:v,next:null},c=Vt.updateQueue,c===null?(c={lastEffect:null,stores:null},Vt.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(v=h.next,h.next=o,o.next=v,c.lastEffect=o)),o}function $1(){return fn().memoizedState}function Pd(o,c,h,v){var C=aa();Vt.flags|=o,C.memoizedState=Al(1|c,h,void 0,v===void 0?null:v)}function Dd(o,c,h,v){var C=fn();v=v===void 0?null:v;var P=void 0;if(ar!==null){var $=ar.memoizedState;if(P=$.destroy,v!==null&&mh(v,$.deps)){C.memoizedState=Al(c,h,P,v);return}}Vt.flags|=o,C.memoizedState=Al(1|c,h,P,v)}function z1(o,c){return Pd(8390656,8,o,c)}function gh(o,c){return Dd(2048,8,o,c)}function B1(o,c){return Dd(4,2,o,c)}function W1(o,c){return Dd(4,4,o,c)}function U1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function q1(o,c,h){return h=h!=null?h.concat([o]):null,Dd(4,4,U1.bind(null,c,o),h)}function bh(){}function V1(o,c){var h=fn();c=c===void 0?null:c;var v=h.memoizedState;return v!==null&&c!==null&&mh(c,v[1])?v[0]:(h.memoizedState=[o,c],o)}function H1(o,c){var h=fn();c=c===void 0?null:c;var v=h.memoizedState;return v!==null&&c!==null&&mh(c,v[1])?v[0]:(o=o(),h.memoizedState=[o,c],o)}function G1(o,c,h){return(Ws&21)===0?(o.baseState&&(o.baseState=!1,qr=!0),o.memoizedState=h):(In(h,c)||(h=Zc(),Vt.lanes|=h,Us|=h,o.baseState=!0),c)}function h8(o,c){var h=bt;bt=h!==0&&4>h?h:4,o(!0);var v=uh.transition;uh.transition={};try{o(!1),c()}finally{bt=h,uh.transition=v}}function K1(){return fn().memoizedState}function f8(o,c,h){var v=ms(o);if(h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},Y1(o))X1(c,h);else if(h=C1(o,c,h,v),h!==null){var C=Ir();Rn(h,o,v,C),J1(h,c,v)}}function x8(o,c,h){var v=ms(o),C={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(Y1(o))X1(c,C);else{var P=o.alternate;if(o.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var $=c.lastRenderedState,J=P($,h);if(C.hasEagerState=!0,C.eagerState=J,In(J,$)){var re=c.interleaved;re===null?(C.next=C,sh(c)):(C.next=re.next,re.next=C),c.interleaved=C;return}}catch{}finally{}h=C1(o,c,C,v),h!==null&&(C=Ir(),Rn(h,o,v,C),J1(h,c,v))}}function Y1(o){var c=o.alternate;return o===Vt||c!==null&&c===Vt}function X1(o,c){kl=Td=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function J1(o,c,h){if((h&4194240)!==0){var v=c.lanes;v&=o.pendingLanes,h|=v,c.lanes=h,al(o,h)}}var Id={readContext:hn,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},g8={readContext:hn,useCallback:function(o,c){return aa().memoizedState=[o,c===void 0?null:c],o},useContext:hn,useEffect:z1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Pd(4194308,4,U1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Pd(4194308,4,o,c)},useInsertionEffect:function(o,c){return Pd(4,2,o,c)},useMemo:function(o,c){var h=aa();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var v=aa();return c=h!==void 0?h(c):c,v.memoizedState=v.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},v.queue=o,o=o.dispatch=f8.bind(null,Vt,o),[v.memoizedState,o]},useRef:function(o){var c=aa();return o={current:o},c.memoizedState=o},useState:R1,useDebugValue:bh,useDeferredValue:function(o){return aa().memoizedState=o},useTransition:function(){var o=R1(!1),c=o[0];return o=h8.bind(null,o[1]),aa().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var v=Vt,C=aa();if(zt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),pr===null)throw Error(n(349));(Ws&30)!==0||I1(v,c,h)}C.memoizedState=h;var P={value:h,getSnapshot:c};return C.queue=P,z1(L1.bind(null,v,P,o),[o]),v.flags|=2048,Al(9,M1.bind(null,v,P,h,c),void 0,null),h},useId:function(){var o=aa(),c=pr.identifierPrefix;if(zt){var h=ka,v=Na;h=(v&~(1<<32-Xr(v)-1)).toString(32)+h,c=":"+c+"R"+h,h=Sl++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=p8++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},b8={readContext:hn,useCallback:V1,useContext:hn,useEffect:gh,useImperativeHandle:q1,useInsertionEffect:B1,useLayoutEffect:W1,useMemo:H1,useReducer:fh,useRef:$1,useState:function(){return fh(Cl)},useDebugValue:bh,useDeferredValue:function(o){var c=fn();return G1(c,ar.memoizedState,o)},useTransition:function(){var o=fh(Cl)[0],c=fn().memoizedState;return[o,c]},useMutableSource:P1,useSyncExternalStore:D1,useId:K1,unstable_isNewReconciler:!1},y8={readContext:hn,useCallback:V1,useContext:hn,useEffect:gh,useImperativeHandle:q1,useInsertionEffect:B1,useLayoutEffect:W1,useMemo:H1,useReducer:xh,useRef:$1,useState:function(){return xh(Cl)},useDebugValue:bh,useDeferredValue:function(o){var c=fn();return ar===null?c.memoizedState=o:G1(c,ar.memoizedState,o)},useTransition:function(){var o=xh(Cl)[0],c=fn().memoizedState;return[o,c]},useMutableSource:P1,useSyncExternalStore:D1,useId:K1,unstable_isNewReconciler:!1};function Ln(o,c){if(o&&o.defaultProps){c=K({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function yh(o,c,h,v){c=o.memoizedState,h=h(v,c),h=h==null?c:K({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Md={isMounted:function(o){return(o=o._reactInternals)?Pr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var v=Ir(),C=ms(o),P=Ca(v,C);P.payload=c,h!=null&&(P.callback=h),c=ls(o,P,C),c!==null&&(Rn(c,o,C,v),Cd(c,o,C))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var v=Ir(),C=ms(o),P=Ca(v,C);P.tag=1,P.payload=c,h!=null&&(P.callback=h),c=ls(o,P,C),c!==null&&(Rn(c,o,C,v),Cd(c,o,C))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ir(),v=ms(o),C=Ca(h,v);C.tag=2,c!=null&&(C.callback=c),c=ls(o,C,v),c!==null&&(Rn(c,o,v,h),Cd(c,o,v))}};function Z1(o,c,h,v,C,P,$){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,P,$):c.prototype&&c.prototype.isPureReactComponent?!pl(h,v)||!pl(C,P):!0}function Q1(o,c,h){var v=!1,C=ss,P=c.contextType;return typeof P=="object"&&P!==null?P=hn(P):(C=Ur(c)?Fs:kr.current,v=c.contextTypes,P=(v=v!=null)?$i(o,C):ss),c=new c(h,P),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Md,o.stateNode=c,c._reactInternals=o,v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=P),c}function ew(o,c,h,v){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,v),c.state!==o&&Md.enqueueReplaceState(c,c.state,null)}function vh(o,c,h,v){var C=o.stateNode;C.props=h,C.state=o.memoizedState,C.refs={},ih(o);var P=c.contextType;typeof P=="object"&&P!==null?C.context=hn(P):(P=Ur(c)?Fs:kr.current,C.context=$i(o,P)),C.state=o.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(yh(o,c,P,h),C.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&Md.enqueueReplaceState(C,C.state,null),Ad(o,h,C,v),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function Gi(o,c){try{var h="",v=c;do h+=oe(v),v=v.return;while(v);var C=h}catch(P){C=`
Error generating stack: `+P.message+`
`+P.stack}return{value:o,source:c,stack:C,digest:null}}function jh(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function wh(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var v8=typeof WeakMap=="function"?WeakMap:Map;function tw(o,c,h){h=Ca(-1,h),h.tag=3,h.payload={element:null};var v=c.value;return h.callback=function(){Bd||(Bd=!0,_h=v),wh(o,c)},h}function rw(o,c,h){h=Ca(-1,h),h.tag=3;var v=o.type.getDerivedStateFromError;if(typeof v=="function"){var C=c.value;h.payload=function(){return v(C)},h.callback=function(){wh(o,c)}}var P=o.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){wh(o,c),typeof v!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var $=c.stack;this.componentDidCatch(c.value,{componentStack:$!==null?$:""})}),h}function nw(o,c,h){var v=o.pingCache;if(v===null){v=o.pingCache=new v8;var C=new Set;v.set(c,C)}else C=v.get(c),C===void 0&&(C=new Set,v.set(c,C));C.has(h)||(C.add(h),o=M8.bind(null,o,c,h),c.then(o,o))}function aw(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function sw(o,c,h,v,C){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Ca(-1,1),c.tag=2,ls(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=C,o)}var j8=w.ReactCurrentOwner,qr=!1;function Dr(o,c,h,v){c.child=o===null?S1(c,null,h,v):Ui(c,o.child,h,v)}function iw(o,c,h,v,C){h=h.render;var P=c.ref;return Vi(c,C),v=ph(o,c,h,v,P,C),h=hh(),o!==null&&!qr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,Aa(o,c,C)):(zt&&h&&Xp(c),c.flags|=1,Dr(o,c,v,C),c.child)}function ow(o,c,h,v,C){if(o===null){var P=h.type;return typeof P=="function"&&!Uh(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=P,lw(o,c,P,v,C)):(o=Gd(h.type,null,v,c,c.mode,C),o.ref=c.ref,o.return=c,c.child=o)}if(P=o.child,(o.lanes&C)===0){var $=P.memoizedProps;if(h=h.compare,h=h!==null?h:pl,h($,v)&&o.ref===c.ref)return Aa(o,c,C)}return c.flags|=1,o=hs(P,v),o.ref=c.ref,o.return=c,c.child=o}function lw(o,c,h,v,C){if(o!==null){var P=o.memoizedProps;if(pl(P,v)&&o.ref===c.ref)if(qr=!1,c.pendingProps=v=P,(o.lanes&C)!==0)(o.flags&131072)!==0&&(qr=!0);else return c.lanes=o.lanes,Aa(o,c,C)}return Nh(o,c,h,v,C)}function cw(o,c,h){var v=c.pendingProps,C=v.children,P=o!==null?o.memoizedState:null;if(v.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Yi,en),en|=h;else{if((h&1073741824)===0)return o=P!==null?P.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Et(Yi,en),en|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=P!==null?P.baseLanes:h,Et(Yi,en),en|=v}else P!==null?(v=P.baseLanes|h,c.memoizedState=null):v=h,Et(Yi,en),en|=v;return Dr(o,c,C,h),c.child}function dw(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Nh(o,c,h,v,C){var P=Ur(h)?Fs:kr.current;return P=$i(c,P),Vi(c,C),h=ph(o,c,h,v,P,C),v=hh(),o!==null&&!qr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,Aa(o,c,C)):(zt&&v&&Xp(c),c.flags|=1,Dr(o,c,h,C),c.child)}function uw(o,c,h,v,C){if(Ur(h)){var P=!0;bd(c)}else P=!1;if(Vi(c,C),c.stateNode===null)_d(o,c),Q1(c,h,v),vh(c,h,v,C),v=!0;else if(o===null){var $=c.stateNode,J=c.memoizedProps;$.props=J;var re=$.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=hn(xe):(xe=Ur(h)?Fs:kr.current,xe=$i(c,xe));var ke=h.getDerivedStateFromProps,Se=typeof ke=="function"||typeof $.getSnapshotBeforeUpdate=="function";Se||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(J!==v||re!==xe)&&ew(c,$,v,xe),os=!1;var Ne=c.memoizedState;$.state=Ne,Ad(c,v,$,C),re=c.memoizedState,J!==v||Ne!==re||Wr.current||os?(typeof ke=="function"&&(yh(c,h,ke,v),re=c.memoizedState),(J=os||Z1(c,h,J,v,Ne,re,xe))?(Se||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(c.flags|=4194308)):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=re),$.props=v,$.state=re,$.context=xe,v=J):(typeof $.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{$=c.stateNode,A1(o,c),J=c.memoizedProps,xe=c.type===c.elementType?J:Ln(c.type,J),$.props=xe,Se=c.pendingProps,Ne=$.context,re=h.contextType,typeof re=="object"&&re!==null?re=hn(re):(re=Ur(h)?Fs:kr.current,re=$i(c,re));var Le=h.getDerivedStateFromProps;(ke=typeof Le=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(J!==Se||Ne!==re)&&ew(c,$,v,re),os=!1,Ne=c.memoizedState,$.state=Ne,Ad(c,v,$,C);var Be=c.memoizedState;J!==Se||Ne!==Be||Wr.current||os?(typeof Le=="function"&&(yh(c,h,Le,v),Be=c.memoizedState),(xe=os||Z1(c,h,xe,v,Ne,Be,re)||!1)?(ke||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(v,Be,re),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(v,Be,re)),typeof $.componentDidUpdate=="function"&&(c.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof $.componentDidUpdate!="function"||J===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=Be),$.props=v,$.state=Be,$.context=re,v=xe):(typeof $.componentDidUpdate!="function"||J===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||J===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),v=!1)}return kh(o,c,h,v,P,C)}function kh(o,c,h,v,C,P){dw(o,c);var $=(c.flags&128)!==0;if(!v&&!$)return C&&x1(c,h,!1),Aa(o,c,P);v=c.stateNode,j8.current=c;var J=$&&typeof h.getDerivedStateFromError!="function"?null:v.render();return c.flags|=1,o!==null&&$?(c.child=Ui(c,o.child,null,P),c.child=Ui(c,null,J,P)):Dr(o,c,J,P),c.memoizedState=v.state,C&&x1(c,h,!0),c.child}function mw(o){var c=o.stateNode;c.pendingContext?h1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&h1(o,c.context,!1),oh(o,c.containerInfo)}function pw(o,c,h,v,C){return Wi(),eh(C),c.flags|=256,Dr(o,c,h,v),c.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Ch(o){return{baseLanes:o,cachePool:null,transitions:null}}function hw(o,c,h){var v=c.pendingProps,C=qt.current,P=!1,$=(c.flags&128)!==0,J;if((J=$)||(J=o!==null&&o.memoizedState===null?!1:(C&2)!==0),J?(P=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),Et(qt,C&1),o===null)return Qp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):($=v.children,o=v.fallback,P?(v=c.mode,P=c.child,$={mode:"hidden",children:$},(v&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=$):P=Kd($,v,0,null),o=Gs(o,v,h,null),P.return=c,o.return=c,P.sibling=o,c.child=P,c.child.memoizedState=Ch(h),c.memoizedState=Sh,o):Ah(c,$));if(C=o.memoizedState,C!==null&&(J=C.dehydrated,J!==null))return w8(o,c,$,v,J,C,h);if(P){P=v.fallback,$=c.mode,C=o.child,J=C.sibling;var re={mode:"hidden",children:v.children};return($&1)===0&&c.child!==C?(v=c.child,v.childLanes=0,v.pendingProps=re,c.deletions=null):(v=hs(C,re),v.subtreeFlags=C.subtreeFlags&14680064),J!==null?P=hs(J,P):(P=Gs(P,$,h,null),P.flags|=2),P.return=c,v.return=c,v.sibling=P,c.child=v,v=P,P=c.child,$=o.child.memoizedState,$=$===null?Ch(h):{baseLanes:$.baseLanes|h,cachePool:null,transitions:$.transitions},P.memoizedState=$,P.childLanes=o.childLanes&~h,c.memoizedState=Sh,v}return P=o.child,o=P.sibling,v=hs(P,{mode:"visible",children:v.children}),(c.mode&1)===0&&(v.lanes=h),v.return=c,v.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=v,c.memoizedState=null,v}function Ah(o,c){return c=Kd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ld(o,c,h,v){return v!==null&&eh(v),Ui(c,o.child,null,h),o=Ah(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function w8(o,c,h,v,C,P,$){if(h)return c.flags&256?(c.flags&=-257,v=jh(Error(n(422))),Ld(o,c,$,v)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(P=v.fallback,C=c.mode,v=Kd({mode:"visible",children:v.children},C,0,null),P=Gs(P,C,$,null),P.flags|=2,v.return=c,P.return=c,v.sibling=P,c.child=v,(c.mode&1)!==0&&Ui(c,o.child,null,$),c.child.memoizedState=Ch($),c.memoizedState=Sh,P);if((c.mode&1)===0)return Ld(o,c,$,null);if(C.data==="$!"){if(v=C.nextSibling&&C.nextSibling.dataset,v)var J=v.dgst;return v=J,P=Error(n(419)),v=jh(P,v,void 0),Ld(o,c,$,v)}if(J=($&o.childLanes)!==0,qr||J){if(v=pr,v!==null){switch($&-$){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(v.suspendedLanes|$))!==0?0:C,C!==0&&C!==P.retryLane&&(P.retryLane=C,Sa(o,C),Rn(v,o,C,-1))}return Wh(),v=jh(Error(n(421))),Ld(o,c,$,v)}return C.data==="$?"?(c.flags|=128,c.child=o.child,c=L8.bind(null,o),C._reactRetry=c,null):(o=P.treeContext,Qr=ns(C.nextSibling),Zr=c,zt=!0,Mn=null,o!==null&&(mn[pn++]=Na,mn[pn++]=ka,mn[pn++]=Rs,Na=o.id,ka=o.overflow,Rs=c),c=Ah(c,v.children),c.flags|=4096,c)}function fw(o,c,h){o.lanes|=c;var v=o.alternate;v!==null&&(v.lanes|=c),ah(o.return,c,h)}function Eh(o,c,h,v,C){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:C}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=v,P.tail=h,P.tailMode=C)}function xw(o,c,h){var v=c.pendingProps,C=v.revealOrder,P=v.tail;if(Dr(o,c,v.children,h),v=qt.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&fw(o,h,c);else if(o.tag===19)fw(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}v&=1}if(Et(qt,v),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(h=c.child,C=null;h!==null;)o=h.alternate,o!==null&&Ed(o)===null&&(C=h),h=h.sibling;h=C,h===null?(C=c.child,c.child=null):(C=h.sibling,h.sibling=null),Eh(c,!1,C,h,P);break;case"backwards":for(h=null,C=c.child,c.child=null;C!==null;){if(o=C.alternate,o!==null&&Ed(o)===null){c.child=C;break}o=C.sibling,C.sibling=h,h=C,C=o}Eh(c,!0,h,null,P);break;case"together":Eh(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _d(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Aa(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Us|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,h=hs(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=hs(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function N8(o,c,h){switch(c.tag){case 3:mw(c),Wi();break;case 5:T1(c);break;case 1:Ur(c.type)&&bd(c);break;case 4:oh(c,c.stateNode.containerInfo);break;case 10:var v=c.type._context,C=c.memoizedProps.value;Et(kd,v._currentValue),v._currentValue=C;break;case 13:if(v=c.memoizedState,v!==null)return v.dehydrated!==null?(Et(qt,qt.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?hw(o,c,h):(Et(qt,qt.current&1),o=Aa(o,c,h),o!==null?o.sibling:null);Et(qt,qt.current&1);break;case 19:if(v=(h&c.childLanes)!==0,(o.flags&128)!==0){if(v)return xw(o,c,h);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Et(qt,qt.current),v)break;return null;case 22:case 23:return c.lanes=0,cw(o,c,h)}return Aa(o,c,h)}var gw,Oh,bw,yw;gw=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Oh=function(){},bw=function(o,c,h,v){var C=o.memoizedProps;if(C!==v){o=c.stateNode,Bs(na.current);var P=null;switch(h){case"input":C=Te(o,C),v=Te(o,v),P=[];break;case"select":C=K({},C,{value:void 0}),v=K({},v,{value:void 0}),P=[];break;case"textarea":C=ee(o,C),v=ee(o,v),P=[];break;default:typeof C.onClick!="function"&&typeof v.onClick=="function"&&(o.onclick=fd)}Fe(h,v);var $;h=null;for(xe in C)if(!v.hasOwnProperty(xe)&&C.hasOwnProperty(xe)&&C[xe]!=null)if(xe==="style"){var J=C[xe];for($ in J)J.hasOwnProperty($)&&(h||(h={}),h[$]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?P||(P=[]):(P=P||[]).push(xe,null));for(xe in v){var re=v[xe];if(J=C?.[xe],v.hasOwnProperty(xe)&&re!==J&&(re!=null||J!=null))if(xe==="style")if(J){for($ in J)!J.hasOwnProperty($)||re&&re.hasOwnProperty($)||(h||(h={}),h[$]="");for($ in re)re.hasOwnProperty($)&&J[$]!==re[$]&&(h||(h={}),h[$]=re[$])}else h||(P||(P=[]),P.push(xe,h)),h=re;else xe==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,J=J?J.__html:void 0,re!=null&&J!==re&&(P=P||[]).push(xe,re)):xe==="children"?typeof re!="string"&&typeof re!="number"||(P=P||[]).push(xe,""+re):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(re!=null&&xe==="onScroll"&&Dt("scroll",o),P||J===re||(P=[])):(P=P||[]).push(xe,re))}h&&(P=P||[]).push("style",h);var xe=P;(c.updateQueue=xe)&&(c.flags|=4)}},yw=function(o,c,h,v){h!==v&&(c.flags|=4)};function El(o,c){if(!zt)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Cr(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,v=0;if(c)for(var C=o.child;C!==null;)h|=C.lanes|C.childLanes,v|=C.subtreeFlags&14680064,v|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)h|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=v,o.childLanes=h,c}function k8(o,c,h){var v=c.pendingProps;switch(Jp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(c),null;case 1:return Ur(c.type)&&gd(),Cr(c),null;case 3:return v=c.stateNode,Hi(),It(Wr),It(kr),dh(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(o===null||o.child===null)&&(wd(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Mn!==null&&($h(Mn),Mn=null))),Oh(o,c),Cr(c),null;case 5:lh(c);var C=Bs(Nl.current);if(h=c.type,o!==null&&c.stateNode!=null)bw(o,c,h,v,C),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!v){if(c.stateNode===null)throw Error(n(166));return Cr(c),null}if(o=Bs(na.current),wd(c)){v=c.stateNode,h=c.type;var P=c.memoizedProps;switch(v[ra]=c,v[bl]=P,o=(c.mode&1)!==0,h){case"dialog":Dt("cancel",v),Dt("close",v);break;case"iframe":case"object":case"embed":Dt("load",v);break;case"video":case"audio":for(C=0;C<fl.length;C++)Dt(fl[C],v);break;case"source":Dt("error",v);break;case"img":case"image":case"link":Dt("error",v),Dt("load",v);break;case"details":Dt("toggle",v);break;case"input":Pe(v,P),Dt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!P.multiple},Dt("invalid",v);break;case"textarea":Ee(v,P),Dt("invalid",v)}Fe(h,P),C=null;for(var $ in P)if(P.hasOwnProperty($)){var J=P[$];$==="children"?typeof J=="string"?v.textContent!==J&&(P.suppressHydrationWarning!==!0&&hd(v.textContent,J,o),C=["children",J]):typeof J=="number"&&v.textContent!==""+J&&(P.suppressHydrationWarning!==!0&&hd(v.textContent,J,o),C=["children",""+J]):s.hasOwnProperty($)&&J!=null&&$==="onScroll"&&Dt("scroll",v)}switch(h){case"input":ne(v),Oe(v,P,!0);break;case"textarea":ne(v),Rt(v);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(v.onclick=fd)}v=C,c.updateQueue=v,v!==null&&(c.flags|=4)}else{$=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=$t(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=$.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof v.is=="string"?o=$.createElement(h,{is:v.is}):(o=$.createElement(h),h==="select"&&($=o,v.multiple?$.multiple=!0:v.size&&($.size=v.size))):o=$.createElementNS(o,h),o[ra]=c,o[bl]=v,gw(o,c,!1,!1),c.stateNode=o;e:{switch($=Ke(h,v),h){case"dialog":Dt("cancel",o),Dt("close",o),C=v;break;case"iframe":case"object":case"embed":Dt("load",o),C=v;break;case"video":case"audio":for(C=0;C<fl.length;C++)Dt(fl[C],o);C=v;break;case"source":Dt("error",o),C=v;break;case"img":case"image":case"link":Dt("error",o),Dt("load",o),C=v;break;case"details":Dt("toggle",o),C=v;break;case"input":Pe(o,v),C=Te(o,v),Dt("invalid",o);break;case"option":C=v;break;case"select":o._wrapperState={wasMultiple:!!v.multiple},C=K({},v,{value:void 0}),Dt("invalid",o);break;case"textarea":Ee(o,v),C=ee(o,v),Dt("invalid",o);break;default:C=v}Fe(h,C),J=C;for(P in J)if(J.hasOwnProperty(P)){var re=J[P];P==="style"?ie(o,re):P==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&zr(o,re)):P==="children"?typeof re=="string"?(h!=="textarea"||re!=="")&&br(o,re):typeof re=="number"&&br(o,""+re):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?re!=null&&P==="onScroll"&&Dt("scroll",o):re!=null&&A(o,P,re,$))}switch(h){case"input":ne(o),Oe(o,v,!1);break;case"textarea":ne(o),Rt(o);break;case"option":v.value!=null&&o.setAttribute("value",""+ve(v.value));break;case"select":o.multiple=!!v.multiple,P=v.value,P!=null?Ie(o,!!v.multiple,P,!1):v.defaultValue!=null&&Ie(o,!!v.multiple,v.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=fd)}switch(h){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Cr(c),null;case 6:if(o&&c.stateNode!=null)yw(o,c,o.memoizedProps,v);else{if(typeof v!="string"&&c.stateNode===null)throw Error(n(166));if(h=Bs(Nl.current),Bs(na.current),wd(c)){if(v=c.stateNode,h=c.memoizedProps,v[ra]=c,(P=v.nodeValue!==h)&&(o=Zr,o!==null))switch(o.tag){case 3:hd(v.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&hd(v.nodeValue,h,(o.mode&1)!==0)}P&&(c.flags|=4)}else v=(h.nodeType===9?h:h.ownerDocument).createTextNode(v),v[ra]=c,c.stateNode=v}return Cr(c),null;case 13:if(It(qt),v=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(zt&&Qr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)w1(),Wi(),c.flags|=98560,P=!1;else if(P=wd(c),v!==null&&v.dehydrated!==null){if(o===null){if(!P)throw Error(n(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[ra]=c}else Wi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Cr(c),P=!1}else Mn!==null&&($h(Mn),Mn=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(v=v!==null,v!==(o!==null&&o.memoizedState!==null)&&v&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(qt.current&1)!==0?sr===0&&(sr=3):Wh())),c.updateQueue!==null&&(c.flags|=4),Cr(c),null);case 4:return Hi(),Oh(o,c),o===null&&xl(c.stateNode.containerInfo),Cr(c),null;case 10:return nh(c.type._context),Cr(c),null;case 17:return Ur(c.type)&&gd(),Cr(c),null;case 19:if(It(qt),P=c.memoizedState,P===null)return Cr(c),null;if(v=(c.flags&128)!==0,$=P.rendering,$===null)if(v)El(P,!1);else{if(sr!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if($=Ed(o),$!==null){for(c.flags|=128,El(P,!1),v=$.updateQueue,v!==null&&(c.updateQueue=v,c.flags|=4),c.subtreeFlags=0,v=h,h=c.child;h!==null;)P=h,o=v,P.flags&=14680066,$=P.alternate,$===null?(P.childLanes=0,P.lanes=o,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=$.childLanes,P.lanes=$.lanes,P.child=$.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=$.memoizedProps,P.memoizedState=$.memoizedState,P.updateQueue=$.updateQueue,P.type=$.type,o=$.dependencies,P.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Et(qt,qt.current&1|2),c.child}o=o.sibling}P.tail!==null&&wt()>Xi&&(c.flags|=128,v=!0,El(P,!1),c.lanes=4194304)}else{if(!v)if(o=Ed($),o!==null){if(c.flags|=128,v=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),El(P,!0),P.tail===null&&P.tailMode==="hidden"&&!$.alternate&&!zt)return Cr(c),null}else 2*wt()-P.renderingStartTime>Xi&&h!==1073741824&&(c.flags|=128,v=!0,El(P,!1),c.lanes=4194304);P.isBackwards?($.sibling=c.child,c.child=$):(h=P.last,h!==null?h.sibling=$:c.child=$,P.last=$)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=wt(),c.sibling=null,h=qt.current,Et(qt,v?h&1|2:h&1),c):(Cr(c),null);case 22:case 23:return Bh(),v=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==v&&(c.flags|=8192),v&&(c.mode&1)!==0?(en&1073741824)!==0&&(Cr(c),c.subtreeFlags&6&&(c.flags|=8192)):Cr(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function S8(o,c){switch(Jp(c),c.tag){case 1:return Ur(c.type)&&gd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Hi(),It(Wr),It(kr),dh(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return lh(c),null;case 13:if(It(qt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Wi()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return It(qt),null;case 4:return Hi(),null;case 10:return nh(c.type._context),null;case 22:case 23:return Bh(),null;case 24:return null;default:return null}}var Fd=!1,Ar=!1,C8=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Ki(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){Kt(o,c,v)}else h.current=null}function vw(o,c,h){try{h()}catch(v){Kt(o,c,v)}}var jw=!1;function A8(o,c){if(Wp=nd,o=Zj(),Mp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var C=v.anchorOffset,P=v.focusNode;v=v.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var $=0,J=-1,re=-1,xe=0,ke=0,Se=o,Ne=null;t:for(;;){for(var Le;Se!==h||C!==0&&Se.nodeType!==3||(J=$+C),Se!==P||v!==0&&Se.nodeType!==3||(re=$+v),Se.nodeType===3&&($+=Se.nodeValue.length),(Le=Se.firstChild)!==null;)Ne=Se,Se=Le;for(;;){if(Se===o)break t;if(Ne===h&&++xe===C&&(J=$),Ne===P&&++ke===v&&(re=$),(Le=Se.nextSibling)!==null)break;Se=Ne,Ne=Se.parentNode}Se=Le}h=J===-1||re===-1?null:{start:J,end:re}}else h=null}h=h||{start:0,end:0}}else h=null;for(Up={focusedElem:o,selectionRange:h},nd=!1,Re=c;Re!==null;)if(c=Re,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Re=o;else for(;Re!==null;){c=Re;try{var Be=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Be!==null){var Ue=Be.memoizedProps,Jt=Be.memoizedState,de=c.stateNode,se=de.getSnapshotBeforeUpdate(c.elementType===c.type?Ue:Ln(c.type,Ue),Jt);de.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var me=c.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ae){Kt(c,c.return,Ae)}if(o=c.sibling,o!==null){o.return=c.return,Re=o;break}Re=c.return}return Be=jw,jw=!1,Be}function Ol(o,c,h){var v=c.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var C=v=v.next;do{if((C.tag&o)===o){var P=C.destroy;C.destroy=void 0,P!==void 0&&vw(c,h,P)}C=C.next}while(C!==v)}}function Rd(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var v=h.create;h.destroy=v()}h=h.next}while(h!==c)}}function Th(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function ww(o){var c=o.alternate;c!==null&&(o.alternate=null,ww(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ra],delete c[bl],delete c[Gp],delete c[c8],delete c[d8])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Nw(o){return o.tag===5||o.tag===3||o.tag===4}function kw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Nw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ph(o,c,h){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=fd));else if(v!==4&&(o=o.child,o!==null))for(Ph(o,c,h),o=o.sibling;o!==null;)Ph(o,c,h),o=o.sibling}function Dh(o,c,h){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(v!==4&&(o=o.child,o!==null))for(Dh(o,c,h),o=o.sibling;o!==null;)Dh(o,c,h),o=o.sibling}var vr=null,_n=!1;function cs(o,c,h){for(h=h.child;h!==null;)Sw(o,c,h),h=h.sibling}function Sw(o,c,h){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Za,h)}catch{}switch(h.tag){case 5:Ar||Ki(h,c);case 6:var v=vr,C=_n;vr=null,cs(o,c,h),vr=v,_n=C,vr!==null&&(_n?(o=vr,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):vr.removeChild(h.stateNode));break;case 18:vr!==null&&(_n?(o=vr,h=h.stateNode,o.nodeType===8?Hp(o.parentNode,h):o.nodeType===1&&Hp(o,h),va(o)):Hp(vr,h.stateNode));break;case 4:v=vr,C=_n,vr=h.stateNode.containerInfo,_n=!0,cs(o,c,h),vr=v,_n=C;break;case 0:case 11:case 14:case 15:if(!Ar&&(v=h.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){C=v=v.next;do{var P=C,$=P.destroy;P=P.tag,$!==void 0&&((P&2)!==0||(P&4)!==0)&&vw(h,c,$),C=C.next}while(C!==v)}cs(o,c,h);break;case 1:if(!Ar&&(Ki(h,c),v=h.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=h.memoizedProps,v.state=h.memoizedState,v.componentWillUnmount()}catch(J){Kt(h,c,J)}cs(o,c,h);break;case 21:cs(o,c,h);break;case 22:h.mode&1?(Ar=(v=Ar)||h.memoizedState!==null,cs(o,c,h),Ar=v):cs(o,c,h);break;default:cs(o,c,h)}}function Cw(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new C8),c.forEach(function(v){var C=_8.bind(null,o,v);h.has(v)||(h.add(v),v.then(C,C))})}}function Fn(o,c){var h=c.deletions;if(h!==null)for(var v=0;v<h.length;v++){var C=h[v];try{var P=o,$=c,J=$;e:for(;J!==null;){switch(J.tag){case 5:vr=J.stateNode,_n=!1;break e;case 3:vr=J.stateNode.containerInfo,_n=!0;break e;case 4:vr=J.stateNode.containerInfo,_n=!0;break e}J=J.return}if(vr===null)throw Error(n(160));Sw(P,$,C),vr=null,_n=!1;var re=C.alternate;re!==null&&(re.return=null),C.return=null}catch(xe){Kt(C,c,xe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Aw(c,o),c=c.sibling}function Aw(o,c){var h=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Fn(c,o),sa(o),v&4){try{Ol(3,o,o.return),Rd(3,o)}catch(Ue){Kt(o,o.return,Ue)}try{Ol(5,o,o.return)}catch(Ue){Kt(o,o.return,Ue)}}break;case 1:Fn(c,o),sa(o),v&512&&h!==null&&Ki(h,h.return);break;case 5:if(Fn(c,o),sa(o),v&512&&h!==null&&Ki(h,h.return),o.flags&32){var C=o.stateNode;try{br(C,"")}catch(Ue){Kt(o,o.return,Ue)}}if(v&4&&(C=o.stateNode,C!=null)){var P=o.memoizedProps,$=h!==null?h.memoizedProps:P,J=o.type,re=o.updateQueue;if(o.updateQueue=null,re!==null)try{J==="input"&&P.type==="radio"&&P.name!=null&&Xe(C,P),Ke(J,$);var xe=Ke(J,P);for($=0;$<re.length;$+=2){var ke=re[$],Se=re[$+1];ke==="style"?ie(C,Se):ke==="dangerouslySetInnerHTML"?zr(C,Se):ke==="children"?br(C,Se):A(C,ke,Se,xe)}switch(J){case"input":pe(C,P);break;case"textarea":ot(C,P);break;case"select":var Ne=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!P.multiple;var Le=P.value;Le!=null?Ie(C,!!P.multiple,Le,!1):Ne!==!!P.multiple&&(P.defaultValue!=null?Ie(C,!!P.multiple,P.defaultValue,!0):Ie(C,!!P.multiple,P.multiple?[]:"",!1))}C[bl]=P}catch(Ue){Kt(o,o.return,Ue)}}break;case 6:if(Fn(c,o),sa(o),v&4){if(o.stateNode===null)throw Error(n(162));C=o.stateNode,P=o.memoizedProps;try{C.nodeValue=P}catch(Ue){Kt(o,o.return,Ue)}}break;case 3:if(Fn(c,o),sa(o),v&4&&h!==null&&h.memoizedState.isDehydrated)try{va(c.containerInfo)}catch(Ue){Kt(o,o.return,Ue)}break;case 4:Fn(c,o),sa(o);break;case 13:Fn(c,o),sa(o),C=o.child,C.flags&8192&&(P=C.memoizedState!==null,C.stateNode.isHidden=P,!P||C.alternate!==null&&C.alternate.memoizedState!==null||(Lh=wt())),v&4&&Cw(o);break;case 22:if(ke=h!==null&&h.memoizedState!==null,o.mode&1?(Ar=(xe=Ar)||ke,Fn(c,o),Ar=xe):Fn(c,o),sa(o),v&8192){if(xe=o.memoizedState!==null,(o.stateNode.isHidden=xe)&&!ke&&(o.mode&1)!==0)for(Re=o,ke=o.child;ke!==null;){for(Se=Re=ke;Re!==null;){switch(Ne=Re,Le=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:Ol(4,Ne,Ne.return);break;case 1:Ki(Ne,Ne.return);var Be=Ne.stateNode;if(typeof Be.componentWillUnmount=="function"){v=Ne,h=Ne.return;try{c=v,Be.props=c.memoizedProps,Be.state=c.memoizedState,Be.componentWillUnmount()}catch(Ue){Kt(v,h,Ue)}}break;case 5:Ki(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){Tw(Se);continue}}Le!==null?(Le.return=Ne,Re=Le):Tw(Se)}ke=ke.sibling}e:for(ke=null,Se=o;;){if(Se.tag===5){if(ke===null){ke=Se;try{C=Se.stateNode,xe?(P=C.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(J=Se.stateNode,re=Se.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null,J.style.display=yr("display",$))}catch(Ue){Kt(o,o.return,Ue)}}}else if(Se.tag===6){if(ke===null)try{Se.stateNode.nodeValue=xe?"":Se.memoizedProps}catch(Ue){Kt(o,o.return,Ue)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===o)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===o)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===o)break e;ke===Se&&(ke=null),Se=Se.return}ke===Se&&(ke=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:Fn(c,o),sa(o),v&4&&Cw(o);break;case 21:break;default:Fn(c,o),sa(o)}}function sa(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(Nw(h)){var v=h;break e}h=h.return}throw Error(n(160))}switch(v.tag){case 5:var C=v.stateNode;v.flags&32&&(br(C,""),v.flags&=-33);var P=kw(o);Dh(o,P,C);break;case 3:case 4:var $=v.stateNode.containerInfo,J=kw(o);Ph(o,J,$);break;default:throw Error(n(161))}}catch(re){Kt(o,o.return,re)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function E8(o,c,h){Re=o,Ew(o)}function Ew(o,c,h){for(var v=(o.mode&1)!==0;Re!==null;){var C=Re,P=C.child;if(C.tag===22&&v){var $=C.memoizedState!==null||Fd;if(!$){var J=C.alternate,re=J!==null&&J.memoizedState!==null||Ar;J=Fd;var xe=Ar;if(Fd=$,(Ar=re)&&!xe)for(Re=C;Re!==null;)$=Re,re=$.child,$.tag===22&&$.memoizedState!==null?Pw(C):re!==null?(re.return=$,Re=re):Pw(C);for(;P!==null;)Re=P,Ew(P),P=P.sibling;Re=C,Fd=J,Ar=xe}Ow(o)}else(C.subtreeFlags&8772)!==0&&P!==null?(P.return=C,Re=P):Ow(o)}}function Ow(o){for(;Re!==null;){var c=Re;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ar||Rd(5,c);break;case 1:var v=c.stateNode;if(c.flags&4&&!Ar)if(h===null)v.componentDidMount();else{var C=c.elementType===c.type?h.memoizedProps:Ln(c.type,h.memoizedProps);v.componentDidUpdate(C,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&O1(c,P,v);break;case 3:var $=c.updateQueue;if($!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}O1(c,$,h)}break;case 5:var J=c.stateNode;if(h===null&&c.flags&4){h=J;var re=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&h.focus();break;case"img":re.src&&(h.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var xe=c.alternate;if(xe!==null){var ke=xe.memoizedState;if(ke!==null){var Se=ke.dehydrated;Se!==null&&va(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ar||c.flags&512&&Th(c)}catch(Ne){Kt(c,c.return,Ne)}}if(c===o){Re=null;break}if(h=c.sibling,h!==null){h.return=c.return,Re=h;break}Re=c.return}}function Tw(o){for(;Re!==null;){var c=Re;if(c===o){Re=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Re=h;break}Re=c.return}}function Pw(o){for(;Re!==null;){var c=Re;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Rd(4,c)}catch(re){Kt(c,h,re)}break;case 1:var v=c.stateNode;if(typeof v.componentDidMount=="function"){var C=c.return;try{v.componentDidMount()}catch(re){Kt(c,C,re)}}var P=c.return;try{Th(c)}catch(re){Kt(c,P,re)}break;case 5:var $=c.return;try{Th(c)}catch(re){Kt(c,$,re)}}}catch(re){Kt(c,c.return,re)}if(c===o){Re=null;break}var J=c.sibling;if(J!==null){J.return=c.return,Re=J;break}Re=c.return}}var O8=Math.ceil,$d=w.ReactCurrentDispatcher,Ih=w.ReactCurrentOwner,xn=w.ReactCurrentBatchConfig,ht=0,pr=null,Qt=null,jr=0,en=0,Yi=as(0),sr=0,Tl=null,Us=0,zd=0,Mh=0,Pl=null,Vr=null,Lh=0,Xi=1/0,Ea=null,Bd=!1,_h=null,ds=null,Wd=!1,us=null,Ud=0,Dl=0,Fh=null,qd=-1,Vd=0;function Ir(){return(ht&6)!==0?wt():qd!==-1?qd:qd=wt()}function ms(o){return(o.mode&1)===0?1:(ht&2)!==0&&jr!==0?jr&-jr:m8.transition!==null?(Vd===0&&(Vd=Zc()),Vd):(o=bt,o!==0||(o=window.event,o=o===void 0?16:Dj(o.type)),o)}function Rn(o,c,h,v){if(50<Dl)throw Dl=0,Fh=null,Error(n(185));Ms(o,h,v),((ht&2)===0||o!==pr)&&(o===pr&&((ht&2)===0&&(zd|=h),sr===4&&ps(o,jr)),Hr(o,v),h===1&&ht===0&&(c.mode&1)===0&&(Xi=wt()+500,yd&&is()))}function Hr(o,c){var h=o.callbackNode;jp(o,c);var v=Ci(o,o===pr?jr:0);if(v===0)h!==null&&ze(h),o.callbackNode=null,o.callbackPriority=0;else if(c=v&-v,o.callbackPriority!==c){if(h!=null&&ze(h),c===1)o.tag===0?u8(Iw.bind(null,o)):g1(Iw.bind(null,o)),o8(function(){(ht&6)===0&&is()}),h=null;else{switch(Qc(v)){case 1:h=et;break;case 4:h=Dn;break;case 16:h=Ja;break;case 536870912:h=Jc;break;default:h=Ja}h=Bw(h,Dw.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function Dw(o,c){if(qd=-1,Vd=0,(ht&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Ji()&&o.callbackNode!==h)return null;var v=Ci(o,o===pr?jr:0);if(v===0)return null;if((v&30)!==0||(v&o.expiredLanes)!==0||c)c=Hd(o,v);else{c=v;var C=ht;ht|=2;var P=Lw();(pr!==o||jr!==c)&&(Ea=null,Xi=wt()+500,Vs(o,c));do try{D8();break}catch(J){Mw(o,J)}while(!0);rh(),$d.current=P,ht=C,Qt!==null?c=0:(pr=null,jr=0,c=sr)}if(c!==0){if(c===2&&(C=rl(o),C!==0&&(v=C,c=Rh(o,C))),c===1)throw h=Tl,Vs(o,0),ps(o,v),Hr(o,wt()),h;if(c===6)ps(o,v);else{if(C=o.current.alternate,(v&30)===0&&!T8(C)&&(c=Hd(o,v),c===2&&(P=rl(o),P!==0&&(v=P,c=Rh(o,P))),c===1))throw h=Tl,Vs(o,0),ps(o,v),Hr(o,wt()),h;switch(o.finishedWork=C,o.finishedLanes=v,c){case 0:case 1:throw Error(n(345));case 2:Hs(o,Vr,Ea);break;case 3:if(ps(o,v),(v&130023424)===v&&(c=Lh+500-wt(),10<c)){if(Ci(o,0)!==0)break;if(C=o.suspendedLanes,(C&v)!==v){Ir(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=Vp(Hs.bind(null,o,Vr,Ea),c);break}Hs(o,Vr,Ea);break;case 4:if(ps(o,v),(v&4194240)===v)break;for(c=o.eventTimes,C=-1;0<v;){var $=31-Xr(v);P=1<<$,$=c[$],$>C&&(C=$),v&=~P}if(v=C,v=wt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*O8(v/1960))-v,10<v){o.timeoutHandle=Vp(Hs.bind(null,o,Vr,Ea),v);break}Hs(o,Vr,Ea);break;case 5:Hs(o,Vr,Ea);break;default:throw Error(n(329))}}}return Hr(o,wt()),o.callbackNode===h?Dw.bind(null,o):null}function Rh(o,c){var h=Pl;return o.current.memoizedState.isDehydrated&&(Vs(o,c).flags|=256),o=Hd(o,c),o!==2&&(c=Vr,Vr=h,c!==null&&$h(c)),o}function $h(o){Vr===null?Vr=o:Vr.push.apply(Vr,o)}function T8(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var C=h[v],P=C.getSnapshot;C=C.value;try{if(!In(P(),C))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ps(o,c){for(c&=~Mh,c&=~zd,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Xr(c),v=1<<h;o[h]=-1,c&=~v}}function Iw(o){if((ht&6)!==0)throw Error(n(327));Ji();var c=Ci(o,0);if((c&1)===0)return Hr(o,wt()),null;var h=Hd(o,c);if(o.tag!==0&&h===2){var v=rl(o);v!==0&&(c=v,h=Rh(o,v))}if(h===1)throw h=Tl,Vs(o,0),ps(o,c),Hr(o,wt()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Hs(o,Vr,Ea),Hr(o,wt()),null}function zh(o,c){var h=ht;ht|=1;try{return o(c)}finally{ht=h,ht===0&&(Xi=wt()+500,yd&&is())}}function qs(o){us!==null&&us.tag===0&&(ht&6)===0&&Ji();var c=ht;ht|=1;var h=xn.transition,v=bt;try{if(xn.transition=null,bt=1,o)return o()}finally{bt=v,xn.transition=h,ht=c,(ht&6)===0&&is()}}function Bh(){en=Yi.current,It(Yi)}function Vs(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,i8(h)),Qt!==null)for(h=Qt.return;h!==null;){var v=h;switch(Jp(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&gd();break;case 3:Hi(),It(Wr),It(kr),dh();break;case 5:lh(v);break;case 4:Hi();break;case 13:It(qt);break;case 19:It(qt);break;case 10:nh(v.type._context);break;case 22:case 23:Bh()}h=h.return}if(pr=o,Qt=o=hs(o.current,null),jr=en=c,sr=0,Tl=null,Mh=zd=Us=0,Vr=Pl=null,zs!==null){for(c=0;c<zs.length;c++)if(h=zs[c],v=h.interleaved,v!==null){h.interleaved=null;var C=v.next,P=h.pending;if(P!==null){var $=P.next;P.next=C,v.next=$}h.pending=v}zs=null}return o}function Mw(o,c){do{var h=Qt;try{if(rh(),Od.current=Id,Td){for(var v=Vt.memoizedState;v!==null;){var C=v.queue;C!==null&&(C.pending=null),v=v.next}Td=!1}if(Ws=0,mr=ar=Vt=null,kl=!1,Sl=0,Ih.current=null,h===null||h.return===null){sr=1,Tl=c,Qt=null;break}e:{var P=o,$=h.return,J=h,re=c;if(c=jr,J.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var xe=re,ke=J,Se=ke.tag;if((ke.mode&1)===0&&(Se===0||Se===11||Se===15)){var Ne=ke.alternate;Ne?(ke.updateQueue=Ne.updateQueue,ke.memoizedState=Ne.memoizedState,ke.lanes=Ne.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Le=aw($);if(Le!==null){Le.flags&=-257,sw(Le,$,J,P,c),Le.mode&1&&nw(P,xe,c),c=Le,re=xe;var Be=c.updateQueue;if(Be===null){var Ue=new Set;Ue.add(re),c.updateQueue=Ue}else Be.add(re);break e}else{if((c&1)===0){nw(P,xe,c),Wh();break e}re=Error(n(426))}}else if(zt&&J.mode&1){var Jt=aw($);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),sw(Jt,$,J,P,c),eh(Gi(re,J));break e}}P=re=Gi(re,J),sr!==4&&(sr=2),Pl===null?Pl=[P]:Pl.push(P),P=$;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var de=tw(P,re,c);E1(P,de);break e;case 1:J=re;var se=P.type,me=P.stateNode;if((P.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(ds===null||!ds.has(me)))){P.flags|=65536,c&=-c,P.lanes|=c;var Ae=rw(P,J,c);E1(P,Ae);break e}}P=P.return}while(P!==null)}Fw(h)}catch(He){c=He,Qt===h&&h!==null&&(Qt=h=h.return);continue}break}while(!0)}function Lw(){var o=$d.current;return $d.current=Id,o===null?Id:o}function Wh(){(sr===0||sr===3||sr===2)&&(sr=4),pr===null||(Us&268435455)===0&&(zd&268435455)===0||ps(pr,jr)}function Hd(o,c){var h=ht;ht|=2;var v=Lw();(pr!==o||jr!==c)&&(Ea=null,Vs(o,c));do try{P8();break}catch(C){Mw(o,C)}while(!0);if(rh(),ht=h,$d.current=v,Qt!==null)throw Error(n(261));return pr=null,jr=0,sr}function P8(){for(;Qt!==null;)_w(Qt)}function D8(){for(;Qt!==null&&!_e();)_w(Qt)}function _w(o){var c=zw(o.alternate,o,en);o.memoizedProps=o.pendingProps,c===null?Fw(o):Qt=c,Ih.current=null}function Fw(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=k8(h,c,en),h!==null){Qt=h;return}}else{if(h=S8(h,c),h!==null){h.flags&=32767,Qt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{sr=6,Qt=null;return}}if(c=c.sibling,c!==null){Qt=c;return}Qt=c=o}while(c!==null);sr===0&&(sr=5)}function Hs(o,c,h){var v=bt,C=xn.transition;try{xn.transition=null,bt=1,I8(o,c,h,v)}finally{xn.transition=C,bt=v}return null}function I8(o,c,h,v){do Ji();while(us!==null);if((ht&6)!==0)throw Error(n(327));h=o.finishedWork;var C=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var P=h.lanes|h.childLanes;if(wp(o,P),o===pr&&(Qt=pr=null,jr=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Wd||(Wd=!0,Bw(Ja,function(){return Ji(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=xn.transition,xn.transition=null;var $=bt;bt=1;var J=ht;ht|=4,Ih.current=null,A8(o,h),Aw(h,o),QT(Up),nd=!!Wp,Up=Wp=null,o.current=h,E8(h),nr(),ht=J,bt=$,xn.transition=P}else o.current=h;if(Wd&&(Wd=!1,us=o,Ud=C),P=o.pendingLanes,P===0&&(ds=null),el(h.stateNode),Hr(o,wt()),c!==null)for(v=o.onRecoverableError,h=0;h<c.length;h++)C=c[h],v(C.value,{componentStack:C.stack,digest:C.digest});if(Bd)throw Bd=!1,o=_h,_h=null,o;return(Ud&1)!==0&&o.tag!==0&&Ji(),P=o.pendingLanes,(P&1)!==0?o===Fh?Dl++:(Dl=0,Fh=o):Dl=0,is(),null}function Ji(){if(us!==null){var o=Qc(Ud),c=xn.transition,h=bt;try{if(xn.transition=null,bt=16>o?16:o,us===null)var v=!1;else{if(o=us,us=null,Ud=0,(ht&6)!==0)throw Error(n(331));var C=ht;for(ht|=4,Re=o.current;Re!==null;){var P=Re,$=P.child;if((Re.flags&16)!==0){var J=P.deletions;if(J!==null){for(var re=0;re<J.length;re++){var xe=J[re];for(Re=xe;Re!==null;){var ke=Re;switch(ke.tag){case 0:case 11:case 15:Ol(8,ke,P)}var Se=ke.child;if(Se!==null)Se.return=ke,Re=Se;else for(;Re!==null;){ke=Re;var Ne=ke.sibling,Le=ke.return;if(ww(ke),ke===xe){Re=null;break}if(Ne!==null){Ne.return=Le,Re=Ne;break}Re=Le}}}var Be=P.alternate;if(Be!==null){var Ue=Be.child;if(Ue!==null){Be.child=null;do{var Jt=Ue.sibling;Ue.sibling=null,Ue=Jt}while(Ue!==null)}}Re=P}}if((P.subtreeFlags&2064)!==0&&$!==null)$.return=P,Re=$;else e:for(;Re!==null;){if(P=Re,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Ol(9,P,P.return)}var de=P.sibling;if(de!==null){de.return=P.return,Re=de;break e}Re=P.return}}var se=o.current;for(Re=se;Re!==null;){$=Re;var me=$.child;if(($.subtreeFlags&2064)!==0&&me!==null)me.return=$,Re=me;else e:for($=se;Re!==null;){if(J=Re,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Rd(9,J)}}catch(He){Kt(J,J.return,He)}if(J===$){Re=null;break e}var Ae=J.sibling;if(Ae!==null){Ae.return=J.return,Re=Ae;break e}Re=J.return}}if(ht=C,is(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Za,o)}catch{}v=!0}return v}finally{bt=h,xn.transition=c}}return!1}function Rw(o,c,h){c=Gi(h,c),c=tw(o,c,1),o=ls(o,c,1),c=Ir(),o!==null&&(Ms(o,1,c),Hr(o,c))}function Kt(o,c,h){if(o.tag===3)Rw(o,o,h);else for(;c!==null;){if(c.tag===3){Rw(c,o,h);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ds===null||!ds.has(v))){o=Gi(h,o),o=rw(c,o,1),c=ls(c,o,1),o=Ir(),c!==null&&(Ms(c,1,o),Hr(c,o));break}}c=c.return}}function M8(o,c,h){var v=o.pingCache;v!==null&&v.delete(c),c=Ir(),o.pingedLanes|=o.suspendedLanes&h,pr===o&&(jr&h)===h&&(sr===4||sr===3&&(jr&130023424)===jr&&500>wt()-Lh?Vs(o,0):Mh|=h),Hr(o,c)}function $w(o,c){c===0&&((o.mode&1)===0?c=1:(c=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var h=Ir();o=Sa(o,c),o!==null&&(Ms(o,c,h),Hr(o,h))}function L8(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),$w(o,h)}function _8(o,c){var h=0;switch(o.tag){case 13:var v=o.stateNode,C=o.memoizedState;C!==null&&(h=C.retryLane);break;case 19:v=o.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(c),$w(o,h)}var zw;zw=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Wr.current)qr=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return qr=!1,N8(o,c,h);qr=(o.flags&131072)!==0}else qr=!1,zt&&(c.flags&1048576)!==0&&b1(c,jd,c.index);switch(c.lanes=0,c.tag){case 2:var v=c.type;_d(o,c),o=c.pendingProps;var C=$i(c,kr.current);Vi(c,h),C=ph(null,c,v,o,C,h);var P=hh();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ur(v)?(P=!0,bd(c)):P=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ih(c),C.updater=Md,c.stateNode=C,C._reactInternals=c,vh(c,v,o,h),c=kh(null,c,v,!0,P,h)):(c.tag=0,zt&&P&&Xp(c),Dr(null,c,C,h),c=c.child),c;case 16:v=c.elementType;e:{switch(_d(o,c),o=c.pendingProps,C=v._init,v=C(v._payload),c.type=v,C=c.tag=R8(v),o=Ln(v,o),C){case 0:c=Nh(null,c,v,o,h);break e;case 1:c=uw(null,c,v,o,h);break e;case 11:c=iw(null,c,v,o,h);break e;case 14:c=ow(null,c,v,Ln(v.type,o),h);break e}throw Error(n(306,v,""))}return c;case 0:return v=c.type,C=c.pendingProps,C=c.elementType===v?C:Ln(v,C),Nh(o,c,v,C,h);case 1:return v=c.type,C=c.pendingProps,C=c.elementType===v?C:Ln(v,C),uw(o,c,v,C,h);case 3:e:{if(mw(c),o===null)throw Error(n(387));v=c.pendingProps,P=c.memoizedState,C=P.element,A1(o,c),Ad(c,v,null,h);var $=c.memoizedState;if(v=$.element,P.isDehydrated)if(P={element:v,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){C=Gi(Error(n(423)),c),c=pw(o,c,v,h,C);break e}else if(v!==C){C=Gi(Error(n(424)),c),c=pw(o,c,v,h,C);break e}else for(Qr=ns(c.stateNode.containerInfo.firstChild),Zr=c,zt=!0,Mn=null,h=S1(c,null,v,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Wi(),v===C){c=Aa(o,c,h);break e}Dr(o,c,v,h)}c=c.child}return c;case 5:return T1(c),o===null&&Qp(c),v=c.type,C=c.pendingProps,P=o!==null?o.memoizedProps:null,$=C.children,qp(v,C)?$=null:P!==null&&qp(v,P)&&(c.flags|=32),dw(o,c),Dr(o,c,$,h),c.child;case 6:return o===null&&Qp(c),null;case 13:return hw(o,c,h);case 4:return oh(c,c.stateNode.containerInfo),v=c.pendingProps,o===null?c.child=Ui(c,null,v,h):Dr(o,c,v,h),c.child;case 11:return v=c.type,C=c.pendingProps,C=c.elementType===v?C:Ln(v,C),iw(o,c,v,C,h);case 7:return Dr(o,c,c.pendingProps,h),c.child;case 8:return Dr(o,c,c.pendingProps.children,h),c.child;case 12:return Dr(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(v=c.type._context,C=c.pendingProps,P=c.memoizedProps,$=C.value,Et(kd,v._currentValue),v._currentValue=$,P!==null)if(In(P.value,$)){if(P.children===C.children&&!Wr.current){c=Aa(o,c,h);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var J=P.dependencies;if(J!==null){$=P.child;for(var re=J.firstContext;re!==null;){if(re.context===v){if(P.tag===1){re=Ca(-1,h&-h),re.tag=2;var xe=P.updateQueue;if(xe!==null){xe=xe.shared;var ke=xe.pending;ke===null?re.next=re:(re.next=ke.next,ke.next=re),xe.pending=re}}P.lanes|=h,re=P.alternate,re!==null&&(re.lanes|=h),ah(P.return,h,c),J.lanes|=h;break}re=re.next}}else if(P.tag===10)$=P.type===c.type?null:P.child;else if(P.tag===18){if($=P.return,$===null)throw Error(n(341));$.lanes|=h,J=$.alternate,J!==null&&(J.lanes|=h),ah($,h,c),$=P.sibling}else $=P.child;if($!==null)$.return=P;else for($=P;$!==null;){if($===c){$=null;break}if(P=$.sibling,P!==null){P.return=$.return,$=P;break}$=$.return}P=$}Dr(o,c,C.children,h),c=c.child}return c;case 9:return C=c.type,v=c.pendingProps.children,Vi(c,h),C=hn(C),v=v(C),c.flags|=1,Dr(o,c,v,h),c.child;case 14:return v=c.type,C=Ln(v,c.pendingProps),C=Ln(v.type,C),ow(o,c,v,C,h);case 15:return lw(o,c,c.type,c.pendingProps,h);case 17:return v=c.type,C=c.pendingProps,C=c.elementType===v?C:Ln(v,C),_d(o,c),c.tag=1,Ur(v)?(o=!0,bd(c)):o=!1,Vi(c,h),Q1(c,v,C),vh(c,v,C,h),kh(null,c,v,!0,o,h);case 19:return xw(o,c,h);case 22:return cw(o,c,h)}throw Error(n(156,c.tag))};function Bw(o,c){return De(o,c)}function F8(o,c,h,v){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(o,c,h,v){return new F8(o,c,h,v)}function Uh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function R8(o){if(typeof o=="function")return Uh(o)?1:0;if(o!=null){if(o=o.$$typeof,o===B)return 11;if(o===R)return 14}return 2}function hs(o,c){var h=o.alternate;return h===null?(h=gn(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Gd(o,c,h,v,C,P){var $=2;if(v=o,typeof o=="function")Uh(o)&&($=1);else if(typeof o=="string")$=5;else e:switch(o){case O:return Gs(h.children,C,P,c);case D:$=8,C|=8;break;case I:return o=gn(12,h,c,C|2),o.elementType=I,o.lanes=P,o;case z:return o=gn(13,h,c,C),o.elementType=z,o.lanes=P,o;case W:return o=gn(19,h,c,C),o.elementType=W,o.lanes=P,o;case U:return Kd(h,C,P,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:$=10;break e;case L:$=9;break e;case B:$=11;break e;case R:$=14;break e;case H:$=16,v=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=gn($,h,c,C),c.elementType=o,c.type=v,c.lanes=P,c}function Gs(o,c,h,v){return o=gn(7,o,v,c),o.lanes=h,o}function Kd(o,c,h,v){return o=gn(22,o,v,c),o.elementType=U,o.lanes=h,o.stateNode={isHidden:!1},o}function qh(o,c,h){return o=gn(6,o,null,c),o.lanes=h,o}function Vh(o,c,h){return c=gn(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function $8(o,c,h,v,C){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=v,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Hh(o,c,h,v,C,P,$,J,re){return o=new $8(o,c,h,J,re),c===1?(c=1,P===!0&&(c|=8)):c=0,P=gn(3,null,null,c),o.current=P,P.stateNode=o,P.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(P),o}function z8(o,c,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:v==null?null:""+v,children:o,containerInfo:c,implementation:h}}function Ww(o){if(!o)return ss;o=o._reactInternals;e:{if(Pr(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ur(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(Ur(h))return f1(o,h,c)}return c}function Uw(o,c,h,v,C,P,$,J,re){return o=Hh(h,v,!0,o,C,P,$,J,re),o.context=Ww(null),h=o.current,v=Ir(),C=ms(h),P=Ca(v,C),P.callback=c??null,ls(h,P,C),o.current.lanes=C,Ms(o,C,v),Hr(o,v),o}function Yd(o,c,h,v){var C=c.current,P=Ir(),$=ms(C);return h=Ww(h),c.context===null?c.context=h:c.pendingContext=h,c=Ca(P,$),c.payload={element:o},v=v===void 0?null:v,v!==null&&(c.callback=v),o=ls(C,c,$),o!==null&&(Rn(o,C,$,P),Cd(o,C,$)),$}function Xd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function qw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Gh(o,c){qw(o,c),(o=o.alternate)&&qw(o,c)}function B8(){return null}var Vw=typeof reportError=="function"?reportError:function(o){console.error(o)};function Kh(o){this._internalRoot=o}Jd.prototype.render=Kh.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));Yd(o,c,null,null)},Jd.prototype.unmount=Kh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;qs(function(){Yd(null,o,null,null)}),c[ja]=null}};function Jd(o){this._internalRoot=o}Jd.prototype.unstable_scheduleHydration=function(o){if(o){var c=rd();o={blockedOn:null,target:o,priority:c};for(var h=0;h<qe.length&&c!==0&&c<qe[h].priority;h++);qe.splice(h,0,o),h===0&&Oi(o)}};function Yh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Zd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Hw(){}function W8(o,c,h,v,C){if(C){if(typeof v=="function"){var P=v;v=function(){var xe=Xd($);P.call(xe)}}var $=Uw(c,v,o,0,null,!1,!1,"",Hw);return o._reactRootContainer=$,o[ja]=$.current,xl(o.nodeType===8?o.parentNode:o),qs(),$}for(;C=o.lastChild;)o.removeChild(C);if(typeof v=="function"){var J=v;v=function(){var xe=Xd(re);J.call(xe)}}var re=Hh(o,0,!1,null,null,!1,!1,"",Hw);return o._reactRootContainer=re,o[ja]=re.current,xl(o.nodeType===8?o.parentNode:o),qs(function(){Yd(c,re,h,v)}),re}function Qd(o,c,h,v,C){var P=h._reactRootContainer;if(P){var $=P;if(typeof C=="function"){var J=C;C=function(){var re=Xd($);J.call(re)}}Yd(c,$,o,C)}else $=W8(h,c,o,C,v);return Xd($)}ed=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Is(c.pendingLanes);h!==0&&(al(c,h|1),Hr(c,wt()),(ht&6)===0&&(Xi=wt()+500,is()))}break;case 13:qs(function(){var v=Sa(o,1);if(v!==null){var C=Ir();Rn(v,o,1,C)}}),Gh(o,1)}},sl=function(o){if(o.tag===13){var c=Sa(o,134217728);if(c!==null){var h=Ir();Rn(c,o,134217728,h)}Gh(o,134217728)}},td=function(o){if(o.tag===13){var c=ms(o),h=Sa(o,c);if(h!==null){var v=Ir();Rn(h,o,c,v)}Gh(o,c)}},rd=function(){return bt},Ai=function(o,c){var h=bt;try{return bt=o,c()}finally{bt=h}},ct=function(o,c,h){switch(c){case"input":if(pe(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var v=h[c];if(v!==o&&v.form===o.form){var C=xd(v);if(!C)throw Error(n(90));ue(v),pe(v,C)}}}break;case"textarea":ot(o,h);break;case"select":c=h.value,c!=null&&Ie(o,!!h.multiple,c,!1)}},Tn=zh,ji=qs;var U8={usingClientEntryPoint:!1,Events:[yl,Fi,xd,vi,Ps,zh]},Il={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q8={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=te(o),o===null?null:o.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||B8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Za=eu.inject(q8),cn=eu}catch{}}return Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U8,Gr.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yh(c))throw Error(n(200));return z8(o,c,null,h)},Gr.createRoot=function(o,c){if(!Yh(o))throw Error(n(299));var h=!1,v="",C=Vw;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=Hh(o,1,!1,null,null,h,!1,v,C),o[ja]=c.current,xl(o.nodeType===8?o.parentNode:o),new Kh(c)},Gr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=te(c),o=o===null?null:o.stateNode,o},Gr.flushSync=function(o){return qs(o)},Gr.hydrate=function(o,c,h){if(!Zd(c))throw Error(n(200));return Qd(null,o,c,!0,h)},Gr.hydrateRoot=function(o,c,h){if(!Yh(o))throw Error(n(405));var v=h!=null&&h.hydratedSources||null,C=!1,P="",$=Vw;if(h!=null&&(h.unstable_strictMode===!0&&(C=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&($=h.onRecoverableError)),c=Uw(c,null,o,1,h??null,C,!1,P,$),o[ja]=c.current,xl(o),v)for(o=0;o<v.length;o++)h=v[o],C=h._getVersion,C=C(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,C]:c.mutableSourceEagerHydrationData.push(h,C);return new Jd(c)},Gr.render=function(o,c,h){if(!Zd(c))throw Error(n(200));return Qd(null,o,c,!1,h)},Gr.unmountComponentAtNode=function(o){if(!Zd(o))throw Error(n(40));return o._reactRootContainer?(qs(function(){Qd(null,null,o,!1,function(){o._reactRootContainer=null,o[ja]=null})}),!0):!1},Gr.unstable_batchedUpdates=zh,Gr.unstable_renderSubtreeIntoContainer=function(o,c,h,v){if(!Zd(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Qd(o,c,h,!1,v)},Gr.version="18.3.1-next-f1338f8080-20240426",Gr}var a2;function u6(){if(a2)return Xh.exports;a2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Xh.exports=Q8(),Xh.exports}var s2;function eP(){if(s2)return ru;s2=1;var e=u6();return ru.createRoot=e.createRoot,ru.hydrateRoot=e.hydrateRoot,ru}var tP=eP();const rP=jt(tP);u6();function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tc.apply(this,arguments)}var vs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vs||(vs={}));const i2="popstate";function nP(e){e===void 0&&(e={});function r(a,s){let{pathname:i,search:l,hash:d}=a.location;return L0("",{pathname:i,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:ku(s)}return sP(r,n,null,e)}function Gt(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function m6(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function aP(){return Math.random().toString(36).substr(2,8)}function o2(e,r){return{usr:e.state,key:e.key,idx:r}}function L0(e,r,n,a){return n===void 0&&(n=null),tc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?zo(r):r,{state:n,key:r&&r.key||a||aP()})}function ku(e){let{pathname:r="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function zo(e){let r={};if(e){let n=e.indexOf("#");n>=0&&(r.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(r.search=e.substr(a),e=e.substr(0,a)),e&&(r.pathname=e)}return r}function sP(e,r,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,d=vs.Pop,u=null,m=p();m==null&&(m=0,l.replaceState(tc({},l.state,{idx:m}),""));function p(){return(l.state||{idx:null}).idx}function f(){d=vs.Pop;let j=p(),k=j==null?null:j-m;m=j,u&&u({action:d,location:g.location,delta:k})}function x(j,k){d=vs.Push;let S=L0(g.location,j,k);m=p()+1;let A=o2(S,m),w=g.createHref(S);try{l.pushState(A,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(w)}i&&u&&u({action:d,location:g.location,delta:1})}function b(j,k){d=vs.Replace;let S=L0(g.location,j,k);m=p();let A=o2(S,m),w=g.createHref(S);l.replaceState(A,"",w),i&&u&&u({action:d,location:g.location,delta:0})}function y(j){let k=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof j=="string"?j:ku(j);return S=S.replace(/ $/,"%20"),Gt(k,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,k)}let g={get action(){return d},get location(){return e(s,l)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(i2,f),u=j,()=>{s.removeEventListener(i2,f),u=null}},createHref(j){return r(s,j)},createURL:y,encodeLocation(j){let k=y(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:x,replace:b,go(j){return l.go(j)}};return g}var l2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(l2||(l2={}));function iP(e,r,n){return n===void 0&&(n="/"),oP(e,r,n)}function oP(e,r,n,a){let s=typeof r=="string"?zo(r):r,i=mo(s.pathname||"/",n);if(i==null)return null;let l=p6(e);lP(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let m=yP(i);d=gP(l[u],m)}return d}function p6(e,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(Gt(u.relativePath.startsWith(a),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(a.length));let m=Ns([a,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),p6(i.children,r,p,m)),!(i.path==null&&!i.index)&&r.push({path:m,score:fP(m,i.index),routesMeta:p})};return e.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let u of h6(i.path))s(i,l,u)}),r}function h6(e){let r=e.split("/");if(r.length===0)return[];let[n,...a]=r,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=h6(a.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function lP(e){e.sort((r,n)=>r.score!==n.score?n.score-r.score:xP(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const cP=/^:[\w-]+$/,dP=3,uP=2,mP=1,pP=10,hP=-2,c2=e=>e==="*";function fP(e,r){let n=e.split("/"),a=n.length;return n.some(c2)&&(a+=hP),r&&(a+=uP),n.filter(s=>!c2(s)).reduce((s,i)=>s+(cP.test(i)?dP:i===""?mP:pP),a)}function xP(e,r){return e.length===r.length&&e.slice(0,-1).every((n,a)=>n===r[a])?e[e.length-1]-r[r.length-1]:0}function gP(e,r,n){let{routesMeta:a}=e,s={},i="/",l=[];for(let d=0;d<a.length;++d){let u=a[d],m=d===a.length-1,p=i==="/"?r:r.slice(i.length)||"/",f=_0({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},p),x=u.route;if(!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:Ns([i,f.pathname]),pathnameBase:NP(Ns([i,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(i=Ns([i,f.pathnameBase]))}return l}function _0(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=bP(e.path,e.caseSensitive,e.end),s=r.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((u,m,p)=>{let{paramName:f,isOptional:x}=m;if(f==="*"){let y=d[p]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=d[p];return x&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function bP(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),m6(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),a]}function yP(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return m6(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function mo(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function vP(e,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?zo(e):e;return{pathname:n?n.startsWith("/")?n:jP(n,r):r,search:kP(a),hash:SP(s)}}function jP(e,r){let n=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Jh(e,r,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wP(e){return e.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function fv(e,r){let n=wP(e);return r?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function xv(e,r,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=zo(e):(s=tc({},e),Gt(!s.pathname||!s.pathname.includes("?"),Jh("?","pathname","search",s)),Gt(!s.pathname||!s.pathname.includes("#"),Jh("#","pathname","hash",s)),Gt(!s.search||!s.search.includes("#"),Jh("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=n;else{let f=r.length-1;if(!a&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}d=f>=0?r[f]:"/"}let u=vP(s,d),m=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(m||p)&&(u.pathname+="/"),u}const Ns=e=>e.join("/").replace(/\/\/+/g,"/"),NP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const f6=["post","put","patch","delete"];new Set(f6);const AP=["get",...f6];new Set(AP);function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rc.apply(this,arguments)}const Am=N.createContext(null),x6=N.createContext(null),Ba=N.createContext(null),Em=N.createContext(null),ma=N.createContext({outlet:null,matches:[],isDataRoute:!1}),g6=N.createContext(null);function EP(e,r){let{relative:n}=r===void 0?{}:r;Bo()||Gt(!1);let{basename:a,navigator:s}=N.useContext(Ba),{hash:i,pathname:l,search:d}=Om(e,{relative:n}),u=l;return a!=="/"&&(u=l==="/"?a:Ns([a,l])),s.createHref({pathname:u,search:d,hash:i})}function Bo(){return N.useContext(Em)!=null}function pa(){return Bo()||Gt(!1),N.useContext(Em).location}function b6(e){N.useContext(Ba).static||N.useLayoutEffect(e)}function An(){let{isDataRoute:e}=N.useContext(ma);return e?UP():OP()}function OP(){Bo()||Gt(!1);let e=N.useContext(Am),{basename:r,future:n,navigator:a}=N.useContext(Ba),{matches:s}=N.useContext(ma),{pathname:i}=pa(),l=JSON.stringify(fv(s,n.v7_relativeSplatPath)),d=N.useRef(!1);return b6(()=>{d.current=!0}),N.useCallback(function(u,m){if(m===void 0&&(m={}),!d.current)return;if(typeof u=="number"){a.go(u);return}let p=xv(u,JSON.parse(l),i,m.relative==="path");e==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Ns([r,p.pathname])),(m.replace?a.replace:a.push)(p,m.state,m)},[r,a,l,i,e])}const TP=N.createContext(null);function PP(e){let r=N.useContext(ma).outlet;return r&&N.createElement(TP.Provider,{value:e},r)}function y6(){let{matches:e}=N.useContext(ma),r=e[e.length-1];return r?r.params:{}}function Om(e,r){let{relative:n}=r===void 0?{}:r,{future:a}=N.useContext(Ba),{matches:s}=N.useContext(ma),{pathname:i}=pa(),l=JSON.stringify(fv(s,a.v7_relativeSplatPath));return N.useMemo(()=>xv(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function DP(e,r){return IP(e,r)}function IP(e,r,n,a){Bo()||Gt(!1);let{navigator:s}=N.useContext(Ba),{matches:i}=N.useContext(ma),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=pa(),p;if(r){var f;let j=typeof r=="string"?zo(r):r;u==="/"||(f=j.pathname)!=null&&f.startsWith(u)||Gt(!1),p=j}else p=m;let x=p.pathname||"/",b=x;if(u!=="/"){let j=u.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(j.length).join("/")}let y=iP(e,{pathname:b}),g=RP(y&&y.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:Ns([u,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:Ns([u,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,n,a);return r&&g?N.createElement(Em.Provider,{value:{location:rc({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:vs.Pop}},g):g}function MP(){let e=WP(),r=CP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},r),n?N.createElement("pre",{style:a},n):null,null)}const LP=N.createElement(MP,null);class _P extends N.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?N.createElement(ma.Provider,{value:this.props.routeContext},N.createElement(g6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FP(e){let{routeContext:r,match:n,children:a}=e,s=N.useContext(Am);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ma.Provider,{value:r},a)}function RP(e,r,n,a){var s;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,d=(s=n)==null?void 0:s.errors;if(d!=null){let p=l.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);p>=0||Gt(!1),l=l.slice(0,Math.min(l.length,p+1))}let u=!1,m=-1;if(n&&a&&a.v7_partialHydration)for(let p=0;p<l.length;p++){let f=l[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=p),f.route.id){let{loaderData:x,errors:b}=n,y=f.route.loader&&x[f.route.id]===void 0&&(!b||b[f.route.id]===void 0);if(f.route.lazy||y){u=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((p,f,x)=>{let b,y=!1,g=null,j=null;n&&(b=d&&f.route.id?d[f.route.id]:void 0,g=f.route.errorElement||LP,u&&(m<0&&x===0?(qP("route-fallback"),y=!0,j=null):m===x&&(y=!0,j=f.route.hydrateFallbackElement||null)));let k=r.concat(l.slice(0,x+1)),S=()=>{let A;return b?A=g:y?A=j:f.route.Component?A=N.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=p,N.createElement(FP,{match:f,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:A})};return n&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?N.createElement(_P,{location:n.location,revalidation:n.revalidation,component:g,error:b,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):S()},null)}var v6=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(v6||{}),j6=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(j6||{});function $P(e){let r=N.useContext(Am);return r||Gt(!1),r}function zP(e){let r=N.useContext(x6);return r||Gt(!1),r}function BP(e){let r=N.useContext(ma);return r||Gt(!1),r}function w6(e){let r=BP(),n=r.matches[r.matches.length-1];return n.route.id||Gt(!1),n.route.id}function WP(){var e;let r=N.useContext(g6),n=zP(),a=w6();return r!==void 0?r:(e=n.errors)==null?void 0:e[a]}function UP(){let{router:e}=$P(v6.UseNavigateStable),r=w6(j6.UseNavigateStable),n=N.useRef(!1);return b6(()=>{n.current=!0}),N.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,rc({fromRouteId:r},s)))},[e,r])}const d2={};function qP(e,r,n){d2[e]||(d2[e]=!0)}function VP(e,r){e?.v7_startTransition,e?.v7_relativeSplatPath}function nu(e){let{to:r,replace:n,state:a,relative:s}=e;Bo()||Gt(!1);let{future:i,static:l}=N.useContext(Ba),{matches:d}=N.useContext(ma),{pathname:u}=pa(),m=An(),p=xv(r,fv(d,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(p);return N.useEffect(()=>m(JSON.parse(f),{replace:n,state:a,relative:s}),[m,f,s,n,a]),null}function gv(e){return PP(e.context)}function ut(e){Gt(!1)}function HP(e){let{basename:r="/",children:n=null,location:a,navigationType:s=vs.Pop,navigator:i,static:l=!1,future:d}=e;Bo()&&Gt(!1);let u=r.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:u,navigator:i,static:l,future:rc({v7_relativeSplatPath:!1},d)}),[u,d,i,l]);typeof a=="string"&&(a=zo(a));let{pathname:p="/",search:f="",hash:x="",state:b=null,key:y="default"}=a,g=N.useMemo(()=>{let j=mo(p,u);return j==null?null:{location:{pathname:j,search:f,hash:x,state:b,key:y},navigationType:s}},[u,p,f,x,b,y,s]);return g==null?null:N.createElement(Ba.Provider,{value:m},N.createElement(Em.Provider,{children:n,value:g}))}function u2(e){let{children:r,location:n}=e;return DP(F0(r),n)}new Promise(()=>{});function F0(e,r){r===void 0&&(r=[]);let n=[];return N.Children.forEach(e,(a,s)=>{if(!N.isValidElement(a))return;let i=[...r,s];if(a.type===N.Fragment){n.push.apply(n,F0(a.props.children,i));return}a.type!==ut&&Gt(!1),!a.props.index||!a.props.children||Gt(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=F0(a.props.children,i)),n.push(l)}),n}function Su(){return Su=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Su.apply(this,arguments)}function N6(e,r){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(r.indexOf(s)>=0)&&(n[s]=e[s]);return n}function GP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function KP(e,r){return e.button===0&&(!r||r==="_self")&&!GP(e)}function R0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,n)=>{let a=e[n];return r.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function YP(e,r){let n=R0(e);return r&&r.forEach((a,s)=>{n.has(s)||r.getAll(s).forEach(i=>{n.append(s,i)})}),n}const XP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ZP="6";try{window.__reactRouterVersion=ZP}catch{}const QP=N.createContext({isTransitioning:!1}),eD="startTransition",m2=X8[eD];function tD(e){let{basename:r,children:n,future:a,window:s}=e,i=N.useRef();i.current==null&&(i.current=nP({window:s,v5Compat:!0}));let l=i.current,[d,u]=N.useState({action:l.action,location:l.location}),{v7_startTransition:m}=a||{},p=N.useCallback(f=>{m&&m2?m2(()=>u(f)):u(f)},[u,m]);return N.useLayoutEffect(()=>l.listen(p),[l,p]),N.useEffect(()=>VP(a),[a]),N.createElement(HP,{basename:r,children:n,location:d.location,navigationType:d.action,navigator:l,future:a})}const rD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=N.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:s,replace:i,state:l,target:d,to:u,preventScrollReset:m,viewTransition:p}=e,f=N6(e,XP),{basename:x}=N.useContext(Ba),b,y=!1;if(typeof u=="string"&&nD.test(u)&&(b=u,rD))try{let S=new URL(window.location.href),A=u.startsWith("//")?new URL(S.protocol+u):new URL(u),w=mo(A.pathname,x);A.origin===S.origin&&w!=null?u=w+A.search+A.hash:y=!0}catch{}let g=EP(u,{relative:a}),j=sD(u,{replace:i,state:l,target:d,preventScrollReset:m,relative:a,viewTransition:p});function k(S){n&&n(S),S.defaultPrevented||j(S)}return N.createElement("a",Su({},f,{href:b||g,onClick:y||s?n:k,ref:r,target:d}))}),k6=N.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:a=!1,className:s="",end:i=!1,style:l,to:d,viewTransition:u,children:m}=e,p=N6(e,JP),f=Om(d,{relative:p.relative}),x=pa(),b=N.useContext(x6),{navigator:y,basename:g}=N.useContext(Ba),j=b!=null&&oD(f)&&u===!0,k=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=x.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(S=S.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&g&&(A=mo(A,g)||A);const w=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let E=S===k||!i&&S.startsWith(k)&&S.charAt(w)==="/",T=A!=null&&(A===k||!i&&A.startsWith(k)&&A.charAt(k.length)==="/"),O={isActive:E,isPending:T,isTransitioning:j},D=E?n:void 0,I;typeof s=="function"?I=s(O):I=[s,E?"active":null,T?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(O):l;return N.createElement(vt,Su({},p,{"aria-current":D,className:I,ref:r,style:M,to:d,viewTransition:u}),typeof m=="function"?m(O):m)});var $0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($0||($0={}));var p2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(p2||(p2={}));function aD(e){let r=N.useContext(Am);return r||Gt(!1),r}function sD(e,r){let{target:n,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:d}=r===void 0?{}:r,u=An(),m=pa(),p=Om(e,{relative:l});return N.useCallback(f=>{if(KP(f,n)){f.preventDefault();let x=a!==void 0?a:ku(m)===ku(p);u(e,{replace:x,state:s,preventScrollReset:i,relative:l,viewTransition:d})}},[m,u,p,a,s,n,e,i,l,d])}function iD(e){let r=N.useRef(R0(e)),n=N.useRef(!1),a=pa(),s=N.useMemo(()=>YP(a.search,n.current?null:r.current),[a.search]),i=An(),l=N.useCallback((d,u)=>{const m=R0(typeof d=="function"?d(s):d);n.current=!0,i("?"+m,u)},[i,s]);return[s,l]}function oD(e,r){r===void 0&&(r={});let n=N.useContext(QP);n==null&&Gt(!1);let{basename:a}=aD($0.useViewTransitionState),s=Om(e,{relative:r.relative});if(!n.isTransitioning)return!1;let i=mo(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=mo(n.nextLocation.pathname,a)||n.nextLocation.pathname;return _0(s.pathname,l)!=null||_0(s.pathname,i)!=null}var Pa=(e=>(e.WEBSITE="Website",e.FACEBOOK="Facebook",e.GOOGLE_ADS="Google Ads",e.REFERRAL="Referral",e.COLD_CALL="Cold Call",e.CHATBOT="Chatbot",e))(Pa||{}),Qs=(e=>(e.PENDING="Pending",e.INTERESTED="Interested",e.CALL_LATER="Call Later",e.NOT_INTERESTED="Not Interested",e.CONVERTED="Converted",e))(Qs||{}),Wt=(e=>(e.SUPER_ADMIN="Super Admin",e.ADMIN="Admin",e.MANAGER="Manager",e.SALES_REP="Sales Rep",e))(Wt||{}),Zt=(e=>(e.VIEW_ALL_LEADS="view:all_leads",e.DELETE_LEADS="delete:leads",e.ASSIGN_LEADS="assign:leads",e.MANAGE_USERS="manage:users",e.MANAGE_TEAMS="manage:teams",e.MANAGE_SETTINGS="manage:settings",e.MANAGE_AUTOMATION="manage:automation",e.MANAGE_INTEGRATIONS="manage:integrations",e.VIEW_TRACKING_DASHBOARD="view:tracking_dashboard",e))(Zt||{}),S6=(e=>(e.NEW="New",e.CONTACTED="Contacted",e.DNP="DNP",e.CALL_BACK_LATER="Call Back Later",e.INTERESTED="Interested",e.NOT_INTERESTED="Not Interested",e.JUNK="Junk",e.INVALID="Invalid",e.CLOSED="Closed",e.CONVERTED="Converted",e))(S6||{});const lD=Array.from({length:5},(e,r)=>{const n=["10 Proven Strategies to Boost Your Sales Conversion Rate","How AI is Revolutionizing Lead Management in 2024","The Ultimate Guide to Sales Automation for Growing Teams","Building High-Performing Sales Teams: Best Practices","CRM Integration: Connecting Your Favorite Tools Seamlessly"][r]||`Blog Post ${r+1}`,a=n.split(" ").slice(0,2).join(" ").toLowerCase();return{_id:`blog-${r+1}`,id:`blog-${r+1}`,slug:n.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),title:n,excerpt:"Discover actionable insights and proven strategies to supercharge your sales performance and grow your business with Clienn CRM's comprehensive platform.",content:`Detailed content for ${n} covering industry best practices, actionable tips, and real-world examples to help you optimize your sales process and achieve better results.`,authorId:2,publishedAt:new Date(Date.now()-r*7*24*60*60*1e3).toISOString(),tags:["Sales","Marketing","CRM","Growth Hacking","AI"].slice(0,3),featuredImage:{src:`https://picsum.photos/seed/${r+1}/800/400`,alt:`Blog post image for ${n}`},seo:{title:`${n} | Clienn CRM Blog`,description:`Learn ${n.toLowerCase()} with expert insights and practical tips.`},focusKeyword:a,views:Math.floor(Math.random()*1e4)+150,comments:Math.floor(Math.random()*50)}}),cD=[{id:"core-crm",category:"Core CRM",features:[{id:"users",name:"Users Included",description:"Number of users that can access the CRM.",values:{free:"1",basic:"5",pro:"20",enterprise:"Custom"}},{id:"leads",name:"Lead Capacity",description:"Total number of leads you can store.",values:{free:"500",basic:"5,000",pro:"Unlimited",enterprise:"Unlimited"}},{id:"contacts",name:"Contact Management",description:"Store and manage all your customer and lead information.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"pipelines",name:"Deal Pipelines",description:"Visual sales pipelines to track deals.",values:{free:"1",basic:"2",pro:"Unlimited",enterprise:"Unlimited"}},{id:"tasks",name:"Task Management",description:"Create and assign tasks to yourself or team members.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"custom-fields",name:"Custom Fields",description:"Create custom data fields to store specific information on your leads.",values:{free:"5 Fields",basic:"25 Fields",pro:"100 Fields",enterprise:"Unlimited"}},{id:"tagging",name:"Lead Tagging",description:"Organize your leads with custom tags.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"storage",name:"File Storage",description:"Storage space for attachments and files.",values:{free:"100 MB",basic:"5 GB",pro:"50 GB",enterprise:"Custom"}}]},{id:"communication",category:"Communication",features:[{id:"email-sync",name:"Email Integration (Gmail/Outlook)",description:"Sync your email conversations with leads.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"email-campaigns",name:"Email Campaigns",description:"Send bulk email campaigns to your leads.",values:{free:!1,basic:"500 sends/mo",pro:"10,000 sends/mo",enterprise:"Custom"}},{id:"sms-campaigns",name:"SMS Campaigns",description:"Send bulk SMS campaigns. Credits sold separately.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"whatsapp",name:"WhatsApp Integration",description:"Communicate with leads directly via WhatsApp.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"call-campaigns",name:"Call Campaigns & Logging",description:"Run call campaigns and automatically log call activities.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"email-templates",name:"Email Templates",description:"Create and reuse email templates for quick communication.",values:{free:"3 Templates",basic:"10 Templates",pro:"Unlimited",enterprise:"Unlimited"}},{id:"whatsapp-templates",name:"WhatsApp Templates",description:"Create and use approved WhatsApp message templates.",values:{free:!1,basic:"5 Templates",pro:"Unlimited",enterprise:"Unlimited"}}]},{id:"automation-ai",category:"Automation & AI",features:[{id:"automation-rules",name:"Automation Rules",description:'Build "if-this-then-that" rules to automate your workflows.',values:{free:"3 Rules",basic:"10 Rules",pro:"Unlimited",enterprise:"Unlimited"}},{id:"lead-assignment",name:"Lead Assignment Rules",description:"Automatically assign new leads to users or teams.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"ai-summaries",name:"AI-Powered Lead Summaries",description:"Get instant summaries of lead activities and history with one click.",values:{free:"10/mo",basic:"50/mo",pro:"500/mo",enterprise:"Unlimited"}},{id:"lead-scoring",name:"Lead Scoring",description:"Automatically score leads based on their properties and actions.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"chatbot",name:"Website Chatbot",description:"Capture leads from your website with an automated chatbot.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}}]},{id:"integrations",category:"Integrations",features:[{id:"facebook",name:"Facebook Lead Ads",description:"Sync leads directly from your Facebook campaigns.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"google-ads",name:"Google Ads",description:"Track leads from your Google Ads campaigns.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"website-forms",name:"Website Forms",description:"Capture leads from any form on your website.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"api-access",name:"API Access",description:"Build custom integrations with our REST API.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"webhooks",name:"Webhook Triggers",description:"Send data to other applications when events happen in the CRM.",values:{free:!1,basic:"1 Webhook",pro:"10 Webhooks",enterprise:"Unlimited"}}]},{id:"reporting",category:"Reporting & Analytics",features:[{id:"standard-dashboards",name:"Standard Dashboards",description:"Get an overview of your sales performance.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"custom-reports",name:"Custom Reports",description:"Build reports tailored to your business needs.",values:{free:!1,basic:"5 Reports",pro:"25 Reports",enterprise:"Unlimited"}},{id:"sales-forecasting",name:"Sales Forecasting",description:"Forecast future sales based on your pipeline data.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"activity-tracking",name:"Employee Tracking",description:"Monitor user activity and session logs.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"goal-setting",name:"Goal Setting",description:"Set and track sales goals for your team and individual reps.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}}]},{id:"support",category:"Support & Security",features:[{id:"email-support",name:"Email Support",description:"Get help from our support team via email.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"priority-support",name:"Priority Phone & Chat Support",description:"Get faster support via phone and live chat.",values:{free:!1,basic:!1,pro:!0,enterprise:!0}},{id:"dedicated-manager",name:"Dedicated Support Manager",description:"A dedicated manager to help you succeed.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"mfa",name:"Two-Factor Authentication (2FA)",description:"Secure your account with two-factor authentication.",values:{free:!0,basic:!0,pro:!0,enterprise:!0}},{id:"permissions",name:"User Roles & Permissions",description:"Control what your users can see and do.",values:{free:!1,basic:!0,pro:!0,enterprise:!0}},{id:"sso",name:"SSO & White-Labeling",description:"Use your own branding and single sign-on.",values:{free:!1,basic:!1,pro:!1,enterprise:!0}},{id:"sla",name:"Uptime SLA",description:"Service Level Agreement for platform uptime.",values:{free:!1,basic:!1,pro:"99.9%",enterprise:"99.99%"}}]}],C6={isEnabled:!1,text:"",ctaText:"",ctaLink:"",autoDisableAt:""},dD={hero:{title:"The Smarter Way to Manage",gradientTitle:"Leads, Sales & Growth",subtitle:"Boost sales, automate workflows, and manage your entire business from one powerful CRM platform. Designed for growing teams, trusted by businesses everywhere.",cta1:"Start 14-Day Free Trial",cta2:"Book a Demo"},loginPage:{title:"Make conversations that convert students",subtitle:"Know how Echo, a WhatsApp live chat platform, can streamline communication and make engagement personal, immediate, and more effective.",cta:"Schedule a Demo",image:{src:"https://uploads-ssl.webflow.com/62a86551224472314601183b/6475d19a4e062227289f8263_Group%2018260.webp",alt:"Screenshot of the Echo WhatsApp live chat platform dashboard."}},trustedBy:{title:"TRUSTED BY HIGH-PERFORMING TEAMS WORLDWIDE",logos:[{name:"Google",src:"https://logo.clearbit.com/google.com",alt:"Google Logo"},{name:"Microsoft",src:"https://logo.clearbit.com/microsoft.com",alt:"Microsoft Logo"},{name:"Slack",src:"https://logo.clearbit.com/slack.com",alt:"Slack Logo"},{name:"Salesforce",src:"https://logo.clearbit.com/salesforce.com",alt:"Salesforce Logo"},{name:"Hubspot",src:"https://logo.clearbit.com/hubspot.com",alt:"Hubspot Logo"},{name:"Stripe",src:"https://logo.clearbit.com/stripe.com",alt:"Stripe Logo"},{name:"Notion",src:"https://logo.clearbit.com/notion.so",alt:"Notion Logo"},{name:"Figma",src:"https://logo.clearbit.com/figma.com",alt:"Figma Logo"}]},howItWorks:{title:"Get Started in 3 Simple Steps",subtitle:"Clienn CRM is designed to be powerful yet easy to use.",steps:[{id:"hw1",icon:"Connect",title:"Connect Your Sources",description:"Integrate your website forms, social media ads, and other lead sources in minutes with our one-click integrations."},{id:"hw2",icon:"AutomateSteps",title:"Automate Your Workflow",description:"Set up powerful rules to automatically assign leads, send follow-ups, and update stages so you can focus on selling."},{id:"hw3",icon:"Grow",title:"Grow Your Business",description:"Use our analytics and AI-powered insights to understand your pipeline, improve conversion rates, and close more deals."}]},integrations:{title:"Connect to the Tools You Already Use",subtitle:"Clienn CRM plays well with others. Integrate seamlessly with your favorite apps.",logos:[{name:"Facebook",src:"https://logo.clearbit.com/facebook.com",alt:"Facebook Logo"},{name:"Google",src:"https://logo.clearbit.com/google.com",alt:"Google Logo"},{name:"Zapier",src:"https://logo.clearbit.com/zapier.com",alt:"Zapier Logo"},{name:"Twilio",src:"https://logo.clearbit.com/twilio.com",alt:"Twilio Logo"},{name:"Mailchimp",src:"https://logo.clearbit.com/mailchimp.com",alt:"Mailchimp Logo"},{name:"WordPress",src:"https://logo.clearbit.com/wordpress.com",alt:"WordPress Logo"}]},features:{title:"Everything You Need, All in One Place",subtitle:"Powerful features to supercharge your sales team.",items:[{id:"dashboard",title:"Unified Leads Dashboard",description:"Get a bird's-eye view of your entire sales pipeline. Track leads through every stage, monitor team performance, and visualize your sales data with beautiful, easy-to-understand charts.",image:{src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2070&auto=format&fit=crop",alt:"A modern analytics dashboard with various charts and graphs on a dark background."}},{id:"summary",title:"AI-Powered Lead Summaries",description:"Stop wasting time digging through activity logs. With a single click, our Gemini-powered AI analyzes all communication, notes, and lead data to give you a concise summary and suggest the next best action.",image:{src:"https://images.unsplash.com/photo-1674027444485-cec3da58eef4?q=80&w=1932&auto=format&fit=crop",alt:"Abstract image representing artificial intelligence with glowing neural network connections."}},{id:"automation",title:"Effortless Sales Automation",description:'Build powerful "if-this-then-that" automation rules with a simple visual editor. Assign new leads, send follow-up emails, add tags, and moreall on autopilot, so you can focus on selling.',image:{src:"https://images.unsplash.com/photo-1521791136064-7986c2920216?q=80&w=2070&auto=format&fit=crop",alt:"A team collaborating on a glass wall with sticky notes, representing workflow automation."}},{id:"reporting",title:"Comprehensive Reporting",description:"Gain deep insights into your sales performance with customizable reports. Track key metrics, identify trends, and make data-driven decisions to optimize your sales process.",image:{src:"https://images.unsplash.com/photo-1608421448635-c21406691c25?q=80&w=2070&auto=format&fit=crop",alt:"A detailed financial report with colorful charts and graphs laid out on a table."}}]},growthChart:{title:"Watch Your Conversion Rate Soar",subtitle:"Our customers see a significant increase in their lead-to-conversion rate within the first three months of using Clienn CRM. The chart below represents a typical growth trajectory.",chartData:[{month:"Jan",value:8},{month:"Feb",value:9},{month:"Mar",value:12},{month:"Apr",value:15},{month:"May",value:22},{month:"Jun",value:32}],stat:{value:32,label:"Average Conversion Rate Increase"}},funnel:{title:"Visualize Your Sales Pipeline",subtitle:"Track leads as they move from initial contact to a closed deal. Our visual funnel helps you identify bottlenecks and optimize your sales process for higher conversion rates.",stages:[{name:"Leads",value:1e3},{name:"Contacted",value:800},{name:"Demo Scheduled",value:500},{name:"Proposal Sent",value:300},{name:"Closed-Won",value:150}]},pricing:{title:"Flexible Pricing for Teams of All Sizes",subtitle:"Choose the plan that's right for you. No hidden fees.",monthlyPlans:[{name:"Free",price:"$0",description:"For individuals & small teams.",features:["1 User Limit","500 Leads","Core CRM tools"]},{name:"Basic",price:"$49",description:"For growing teams.",features:["5 User Limit","5,000 Leads","Basic Integrations","Team Management"]},{name:"Pro",price:"$99",description:"For scaling businesses.",features:["20 User Limit","Unlimited Leads","Advanced Automation","Reporting & Analytics"],isPopular:!0},{name:"Enterprise",price:"Contact Us",description:"For large organizations.",features:["Unlimited Users","White-Labeling & SSO","Dedicated Support","API Access"]}],yearlyPlans:[{name:"Free",price:"$0",description:"For individuals & small teams.",features:["1 User Limit","500 Leads","Core CRM tools"]},{name:"Basic",price:"$39",description:"For growing teams.",features:["5 User Limit","5,000 Leads","Basic Integrations","Team Management"]},{name:"Pro",price:"$79",description:"For scaling businesses.",features:["20 User Limit","Unlimited Leads","Advanced Automation","Reporting & Analytics"],isPopular:!0},{name:"Enterprise",price:"Contact Us",description:"For large organizations.",features:["Unlimited Users","White-Labeling & SSO","Dedicated Support","API Access"]}]},testimonials:{title:"What Our Customers Say",items:[{id:"t1",quote:"With Clienn CRM, our conversion rate improved by 32% in 3 months. The AI summaries save my sales team hours every week!",author:"Sarah Johnson",company:"Marketing Manager, TechStart Inc.",avatar:{src:"https://i.pravatar.cc/150?u=sarah",alt:"Avatar of Sarah Johnson"}},{id:"t2",quote:"The ability to manage leads from Facebook, our website, and calls all in one place has been a total game-changer for our team's efficiency.",author:"David Lee",company:"Sales Director, Realty Kings",avatar:{src:"https://i.pravatar.cc/150?u=david",alt:"Avatar of David Lee"}},{id:"t3",quote:"Finally, a CRM that is both powerful and easy to use. The learning curve was minimal, and the impact on our productivity was immediate.",author:"Maria Garcia",company:"Founder, Ed-Tech Global",avatar:{src:"https://i.pravatar.cc/150?u=maria",alt:"Avatar of Maria Garcia"}},{id:"t4",quote:"The automation features are a dream. We now have a consistent follow-up process that runs on autopilot, ensuring no lead falls through the cracks.",author:"Chris Evans",company:"Operations Head, Innovate Solutions",avatar:{src:"https://i.pravatar.cc/150?u=chris",alt:"Avatar of Chris Evans"}},{id:"t5",quote:"As a manager, the reporting dashboard is invaluable. I can see team performance at a glance and make data-driven decisions on the fly.",author:"Emily White",company:"VP of Sales, Growth Co.",avatar:{src:"https://i.pravatar.cc/150?u=emily",alt:"Avatar of Emily White"}},{id:"t6",quote:"The customer support is top-notch. They are responsive, helpful, and genuinely care about our success. Highly recommend!",author:"Michael Brown",company:"CEO, Bright Ideas Agency",avatar:{src:"https://i.pravatar.cc/150?u=michael",alt:"Avatar of Michael Brown"}}]},faq:{title:"Frequently Asked Questions",subtitle:"Have questions? We've got answers.",items:[{id:"f1",q:"Is there a free trial available?",a:"Yes! You can try our Pro plan for 14 days, no credit card required. Get full access to all features and see how Clienn CRM can transform your sales process."},{id:"f2",q:"Can I change my plan later?",a:"Absolutely. You can upgrade, downgrade, or cancel your plan at any time directly from your billing settings. Changes will be prorated."},{id:"f3",q:"What integrations do you support?",a:"We offer native integrations with Facebook Lead Ads, Google Ads, and any website form. You can also connect to thousands of other apps via our API and webhooks."},{id:"f4",q:"Is my data secure?",a:"Security is our top priority. We use industry-standard encryption, offer multi-factor authentication (MFA), and are fully compliant with GDPR. Your data is safe with us."},{id:"f5",q:"Do you offer support?",a:"Yes, all our paid plans come with email support. Our Enterprise plan includes a dedicated account manager and priority support."},{id:"f6",q:"Can I import my existing leads?",a:"Of course! You can easily import your existing leads via a CSV file. Our importer will help you map your data to the correct fields in Clienn CRM."}]},contactForm:{title:"Get in Touch",subtitle:"Have a question or want to see a personalized demo? Fill out the form below and we'll get back to you.",webhookUrl:"https://hooks.example.com/contact-form",address:"123 Innovation Drive, Suite 456, Tech City, 78910",email:"support@Clienn CRM.app",phone:"+1 (555) 123-4567",mapSrc:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.617141569737!2d-73.987846684594!3d40.748440979327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259a9b3117469%3A0xd134e199a405a163!2sEmpire%20State%20Building!5e0!3m2!1sen!2sus!4v1675281728271!5m2!1sen!2sus",fields:[{id:"f_name",label:"Full Name",type:"text",required:!0},{id:"f_email",label:"Work Email",type:"email",required:!0},{id:"f_company",label:"Company Name",type:"text",required:!1},{id:"f_message",label:"Your Message",type:"textarea",required:!0}]},chatbot:{enabled:!0,welcomeMessage:"Hi there! I'm the Clienn CRM assistant. I can help answer questions or get you connected with our team. What can I help you with?",questions:[{id:"cq1",question:"To get started, what's your name?",crmField:"name"},{id:"cq2",question:"Great, {{name}}! What's your work email?",crmField:"email"},{id:"cq3",question:"And what's your company's name?",crmField:"company"}],thankYouMessage:"Thanks! Someone from our team will be in touch shortly.",color:"#2563eb",style:"button"},blog:{title:"From Our Blog",subtitle:"Get the latest insights on sales, marketing, and growth."},footer:{description:"Clienn CRM is the all-in-one platform for growing businesses to manage their sales, marketing, and customer relationships with the power of AI.",address:"123 Innovation Drive, Suite 456, Tech City, 78910",columns:[{title:"Product",links:[{text:"Features",url:"#features"},{text:"Pricing",url:"/#/pricing"},{text:"Integrations",url:"#integrations"},{text:"Updates",url:"#"}]},{title:"Company",links:[{text:"About",url:"#"},{text:"Blog",url:"/#/blog"},{text:"Careers",url:"#"},{text:"Contact Us",url:"#contact"}]},{title:"Resources",links:[{text:"Help Center",url:"#"},{text:"API Docs",url:"//crm.clienn.com/api-docs"},{text:"Case Studies",url:"#"},{text:"Webinars",url:"#"}]}],socialLinks:[{name:"LinkedIn",url:"#"},{name:"Twitter",url:"#"},{name:"Facebook",url:"#"}],legal:{copyright:` ${new Date().getFullYear()} Clienn CRM. All rights reserved.`,links:[{text:"Privacy Policy",url:"/privacy"},{text:"Terms of Service",url:"#"}]}},finalCta:{title:"Ready to Grow Smarter?",subtitle:"Join thousands of businesses who have transformed their sales process with Clienn CRM. Get started today and see the difference.",cta:"Start Free Trial Now"}};function A6(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(r=0;r<s;r++)e[r]&&(n=A6(e[r]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function st(){for(var e,r,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(r=A6(e))&&(a&&(a+=" "),a+=r);return a}var Zh,h2;function Rr(){if(h2)return Zh;h2=1;var e=Array.isArray;return Zh=e,Zh}var Qh,f2;function E6(){if(f2)return Qh;f2=1;var e=typeof tu=="object"&&tu&&tu.Object===Object&&tu;return Qh=e,Qh}var ef,x2;function Yn(){if(x2)return ef;x2=1;var e=E6(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=e||r||Function("return this")();return ef=n,ef}var tf,g2;function Wo(){if(g2)return tf;g2=1;var e=Yn(),r=e.Symbol;return tf=r,tf}var rf,b2;function uD(){if(b2)return rf;b2=1;var e=Wo(),r=Object.prototype,n=r.hasOwnProperty,a=r.toString,s=e?e.toStringTag:void 0;function i(l){var d=n.call(l,s),u=l[s];try{l[s]=void 0;var m=!0}catch{}var p=a.call(l);return m&&(d?l[s]=u:delete l[s]),p}return rf=i,rf}var nf,y2;function mD(){if(y2)return nf;y2=1;var e=Object.prototype,r=e.toString;function n(a){return r.call(a)}return nf=n,nf}var af,v2;function Wa(){if(v2)return af;v2=1;var e=Wo(),r=uD(),n=mD(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function l(d){return d==null?d===void 0?s:a:i&&i in Object(d)?r(d):n(d)}return af=l,af}var sf,j2;function Xn(){if(j2)return sf;j2=1;function e(r){return r!=null&&typeof r=="object"}return sf=e,sf}var of,w2;function Uo(){if(w2)return of;w2=1;var e=Wa(),r=Xn(),n="[object Symbol]";function a(s){return typeof s=="symbol"||r(s)&&e(s)==n}return of=a,of}var lf,N2;function bv(){if(N2)return lf;N2=1;var e=Rr(),r=Uo(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){if(e(i))return!1;var d=typeof i;return d=="number"||d=="symbol"||d=="boolean"||i==null||r(i)?!0:a.test(i)||!n.test(i)||l!=null&&i in Object(l)}return lf=s,lf}var cf,k2;function Jn(){if(k2)return cf;k2=1;function e(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return cf=e,cf}var df,S2;function yv(){if(S2)return df;S2=1;var e=Wa(),r=Jn(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function l(d){if(!r(d))return!1;var u=e(d);return u==a||u==s||u==n||u==i}return df=l,df}var uf,C2;function pD(){if(C2)return uf;C2=1;var e=Yn(),r=e["__core-js_shared__"];return uf=r,uf}var mf,A2;function hD(){if(A2)return mf;A2=1;var e=pD(),r=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!r&&r in a}return mf=n,mf}var pf,E2;function O6(){if(E2)return pf;E2=1;var e=Function.prototype,r=e.toString;function n(a){if(a!=null){try{return r.call(a)}catch{}try{return a+""}catch{}}return""}return pf=n,pf}var hf,O2;function fD(){if(O2)return hf;O2=1;var e=yv(),r=hD(),n=Jn(),a=O6(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,m=d.hasOwnProperty,p=RegExp("^"+u.call(m).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(x){if(!n(x)||r(x))return!1;var b=e(x)?p:i;return b.test(a(x))}return hf=f,hf}var ff,T2;function xD(){if(T2)return ff;T2=1;function e(r,n){return r?.[n]}return ff=e,ff}var xf,P2;function fi(){if(P2)return xf;P2=1;var e=fD(),r=xD();function n(a,s){var i=r(a,s);return e(i)?i:void 0}return xf=n,xf}var gf,D2;function Tm(){if(D2)return gf;D2=1;var e=fi(),r=e(Object,"create");return gf=r,gf}var bf,I2;function gD(){if(I2)return bf;I2=1;var e=Tm();function r(){this.__data__=e?e(null):{},this.size=0}return bf=r,bf}var yf,M2;function bD(){if(M2)return yf;M2=1;function e(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}return yf=e,yf}var vf,L2;function yD(){if(L2)return vf;L2=1;var e=Tm(),r="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var l=this.__data__;if(e){var d=l[i];return d===r?void 0:d}return a.call(l,i)?l[i]:void 0}return vf=s,vf}var jf,_2;function vD(){if(_2)return jf;_2=1;var e=Tm(),r=Object.prototype,n=r.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return jf=a,jf}var wf,F2;function jD(){if(F2)return wf;F2=1;var e=Tm(),r="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?r:s,this}return wf=n,wf}var Nf,R2;function wD(){if(R2)return Nf;R2=1;var e=gD(),r=bD(),n=yD(),a=vD(),s=jD();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Nf=i,Nf}var kf,$2;function ND(){if($2)return kf;$2=1;function e(){this.__data__=[],this.size=0}return kf=e,kf}var Sf,z2;function Pm(){if(z2)return Sf;z2=1;function e(r,n){return r===n||r!==r&&n!==n}return Sf=e,Sf}var Cf,B2;function Dm(){if(B2)return Cf;B2=1;var e=Pm();function r(n,a){for(var s=n.length;s--;)if(e(n[s][0],a))return s;return-1}return Cf=r,Cf}var Af,W2;function kD(){if(W2)return Af;W2=1;var e=Dm(),r=Array.prototype,n=r.splice;function a(s){var i=this.__data__,l=e(i,s);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():n.call(i,l,1),--this.size,!0}return Af=a,Af}var Ef,U2;function SD(){if(U2)return Ef;U2=1;var e=Dm();function r(n){var a=this.__data__,s=e(a,n);return s<0?void 0:a[s][1]}return Ef=r,Ef}var Of,q2;function CD(){if(q2)return Of;q2=1;var e=Dm();function r(n){return e(this.__data__,n)>-1}return Of=r,Of}var Tf,V2;function AD(){if(V2)return Tf;V2=1;var e=Dm();function r(n,a){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return Tf=r,Tf}var Pf,H2;function Im(){if(H2)return Pf;H2=1;var e=ND(),r=kD(),n=SD(),a=CD(),s=AD();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Pf=i,Pf}var Df,G2;function vv(){if(G2)return Df;G2=1;var e=fi(),r=Yn(),n=e(r,"Map");return Df=n,Df}var If,K2;function ED(){if(K2)return If;K2=1;var e=wD(),r=Im(),n=vv();function a(){this.size=0,this.__data__={hash:new e,map:new(n||r),string:new e}}return If=a,If}var Mf,Y2;function OD(){if(Y2)return Mf;Y2=1;function e(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}return Mf=e,Mf}var Lf,X2;function Mm(){if(X2)return Lf;X2=1;var e=OD();function r(n,a){var s=n.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Lf=r,Lf}var _f,J2;function TD(){if(J2)return _f;J2=1;var e=Mm();function r(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return _f=r,_f}var Ff,Z2;function PD(){if(Z2)return Ff;Z2=1;var e=Mm();function r(n){return e(this,n).get(n)}return Ff=r,Ff}var Rf,Q2;function DD(){if(Q2)return Rf;Q2=1;var e=Mm();function r(n){return e(this,n).has(n)}return Rf=r,Rf}var $f,eN;function ID(){if(eN)return $f;eN=1;var e=Mm();function r(n,a){var s=e(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return $f=r,$f}var zf,tN;function jv(){if(tN)return zf;tN=1;var e=ED(),r=TD(),n=PD(),a=DD(),s=ID();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var m=l[d];this.set(m[0],m[1])}}return i.prototype.clear=e,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,zf=i,zf}var Bf,rN;function T6(){if(rN)return Bf;rN=1;var e=jv(),r="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(r);var i=function(){var l=arguments,d=s?s.apply(this,l):l[0],u=i.cache;if(u.has(d))return u.get(d);var m=a.apply(this,l);return i.cache=u.set(d,m)||u,m};return i.cache=new(n.Cache||e),i}return n.Cache=e,Bf=n,Bf}var Wf,nN;function MD(){if(nN)return Wf;nN=1;var e=T6(),r=500;function n(a){var s=e(a,function(l){return i.size===r&&i.clear(),l}),i=s.cache;return s}return Wf=n,Wf}var Uf,aN;function LD(){if(aN)return Uf;aN=1;var e=MD(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(r,function(l,d,u,m){i.push(u?m.replace(n,"$1"):d||l)}),i});return Uf=a,Uf}var qf,sN;function Lm(){if(sN)return qf;sN=1;function e(r,n){for(var a=-1,s=r==null?0:r.length,i=Array(s);++a<s;)i[a]=n(r[a],a,r);return i}return qf=e,qf}var Vf,iN;function _D(){if(iN)return Vf;iN=1;var e=Wo(),r=Lm(),n=Rr(),a=Uo(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(n(d))return r(d,l)+"";if(a(d))return i?i.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return Vf=l,Vf}var Hf,oN;function P6(){if(oN)return Hf;oN=1;var e=_D();function r(n){return n==null?"":e(n)}return Hf=r,Hf}var Gf,lN;function _m(){if(lN)return Gf;lN=1;var e=Rr(),r=bv(),n=LD(),a=P6();function s(i,l){return e(i)?i:r(i,l)?[i]:n(a(i))}return Gf=s,Gf}var Kf,cN;function $c(){if(cN)return Kf;cN=1;var e=Uo();function r(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Kf=r,Kf}var Yf,dN;function Fm(){if(dN)return Yf;dN=1;var e=_m(),r=$c();function n(a,s){s=e(s,a);for(var i=0,l=s.length;a!=null&&i<l;)a=a[r(s[i++])];return i&&i==l?a:void 0}return Yf=n,Yf}var Xf,uN;function D6(){if(uN)return Xf;uN=1;var e=Fm();function r(n,a,s){var i=n==null?void 0:e(n,a);return i===void 0?s:i}return Xf=r,Xf}var FD=D6();const sn=jt(FD);var Jf,mN;function RD(){if(mN)return Jf;mN=1;function e(r){return r==null}return Jf=e,Jf}var $D=RD();const nt=jt($D);var Zf,pN;function zD(){if(pN)return Zf;pN=1;var e=Wa(),r=Rr(),n=Xn(),a="[object String]";function s(i){return typeof i=="string"||!r(i)&&n(i)&&e(i)==a}return Zf=s,Zf}var BD=zD();const Ss=jt(BD);var WD=yv();const Qe=jt(WD);var UD=Jn();const qo=jt(UD);var hN={exports:{}},Nt={},fN;function qD(){if(fN)return Nt;fN=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function g(j){if(typeof j=="object"&&j!==null){var k=j.$$typeof;switch(k){case e:switch(j=j.type,j){case n:case s:case a:case m:case p:return j;default:switch(j=j&&j.$$typeof,j){case d:case l:case u:case x:case f:case i:return j;default:return k}}case r:return k}}}return Nt.ContextConsumer=l,Nt.ContextProvider=i,Nt.Element=e,Nt.ForwardRef=u,Nt.Fragment=n,Nt.Lazy=x,Nt.Memo=f,Nt.Portal=r,Nt.Profiler=s,Nt.StrictMode=a,Nt.Suspense=m,Nt.SuspenseList=p,Nt.isAsyncMode=function(){return!1},Nt.isConcurrentMode=function(){return!1},Nt.isContextConsumer=function(j){return g(j)===l},Nt.isContextProvider=function(j){return g(j)===i},Nt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Nt.isForwardRef=function(j){return g(j)===u},Nt.isFragment=function(j){return g(j)===n},Nt.isLazy=function(j){return g(j)===x},Nt.isMemo=function(j){return g(j)===f},Nt.isPortal=function(j){return g(j)===r},Nt.isProfiler=function(j){return g(j)===s},Nt.isStrictMode=function(j){return g(j)===a},Nt.isSuspense=function(j){return g(j)===m},Nt.isSuspenseList=function(j){return g(j)===p},Nt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===s||j===a||j===m||j===p||j===b||typeof j=="object"&&j!==null&&(j.$$typeof===x||j.$$typeof===f||j.$$typeof===i||j.$$typeof===l||j.$$typeof===u||j.$$typeof===y||j.getModuleId!==void 0)},Nt.typeOf=g,Nt}var xN;function VD(){return xN||(xN=1,hN.exports=qD()),hN.exports}var HD=VD(),Qf,gN;function I6(){if(gN)return Qf;gN=1;var e=Wa(),r=Xn(),n="[object Number]";function a(s){return typeof s=="number"||r(s)&&e(s)==n}return Qf=a,Qf}var ex,bN;function GD(){if(bN)return ex;bN=1;var e=I6();function r(n){return e(n)&&n!=+n}return ex=r,ex}var KD=GD();const Vo=jt(KD);var YD=I6();const M6=jt(YD);var Mr=function(e){return e===0?0:e>0?1:-1},ti=function(e){return Ss(e)&&e.indexOf("%")===e.length-1},Ce=function(e){return M6(e)&&!Vo(e)},XD=function(e){return nt(e)},cr=function(e){return Ce(e)||Ss(e)},JD=0,xi=function(e){var r=++JD;return"".concat(e||"").concat(r)},Lr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ce(e)&&!Ss(e))return n;var s;if(ti(e)){var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return Vo(s)&&(s=n),a&&s>r&&(s=r),s},ys=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},ZD=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},St=function(e,r){return Ce(e)&&Ce(r)?function(n){return e+n*(r-e)}:function(){return r}};function Cu(e,r,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof r=="function"?r(a):sn(a,r))===n})}var QD=function(e,r){return Ce(e)&&Ce(r)?e-r:Ss(e)&&Ss(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function lo(e,r){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(r,n)||e[n]!==r[n]))return!1;for(var a in r)if({}.hasOwnProperty.call(r,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function z0(e){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},z0(e)}var eI=["viewBox","children"],tI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yN=["points","pathLength"],rI={svg:eI,polygon:yN,polyline:yN},wv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Au=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),!qo(n))return null;var a={};return Object.keys(n).forEach(function(s){wv.includes(s)&&(a[s]=r||function(i){return n[s](n,i)})}),a},nI=function(e,r,n){return function(a){return e(r,n,a),null}},Cs=function(e,r,n){if(!qo(e)||z0(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var i=e[s];wv.includes(s)&&typeof i=="function"&&(a||(a={}),a[s]=nI(i,r,n))}),a},aI=["children"],sI=["children"];function vN(e,r){if(e==null)return{};var n=iI(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function iI(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function B0(e){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},B0(e)}var jN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},La=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},wN=null,tx=null,Nv=function e(r){if(r===wN&&Array.isArray(tx))return tx;var n=[];return N.Children.forEach(r,function(a){nt(a)||(HD.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),tx=n,wN=r,n};function Yr(e,r){var n=[],a=[];return Array.isArray(r)?a=r.map(function(s){return La(s)}):a=[La(r)],Nv(e).forEach(function(s){var i=sn(s,"type.displayName")||sn(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function nn(e,r){var n=Yr(e,r);return n&&n[0]}var NN=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!Ce(n)||n<=0||!Ce(a)||a<=0)},oI=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lI=function(e){return e&&e.type&&Ss(e.type)&&oI.indexOf(e.type)>=0},L6=function(e){return e&&B0(e)==="object"&&"clipDot"in e},cI=function(e,r,n,a){var s,i=(s=rI?.[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Qe(e)&&(a&&i.includes(r)||tI.includes(r))||n&&wv.includes(r)},Ge=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(N.isValidElement(e)&&(a=e.props),!qo(a))return null;var s={};return Object.keys(a).forEach(function(i){var l;cI((l=a)===null||l===void 0?void 0:l[i],i,r,n)&&(s[i]=a[i])}),s},W0=function e(r,n){if(r===n)return!0;var a=N.Children.count(r);if(a!==N.Children.count(n))return!1;if(a===0)return!0;if(a===1)return kN(Array.isArray(r)?r[0]:r,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=r[s],l=n[s];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!kN(i,l))return!1}return!0},kN=function(e,r){if(nt(e)&&nt(r))return!0;if(!nt(e)&&!nt(r)){var n=e.props||{},a=n.children,s=vN(n,aI),i=r.props||{},l=i.children,d=vN(i,sI);return a&&l?lo(s,d)&&W0(a,l):!a&&!l?lo(s,d):!1}return!1},SN=function(e,r){var n=[],a={};return Nv(e).forEach(function(s,i){if(lI(s))n.push(s);else if(s){var l=La(s.type),d=r[l]||{},u=d.handler,m=d.once;if(u&&(!m||!a[l])){var p=u(s,l,i);n.push(p),a[l]=!0}}}),n},dI=function(e){var r=e&&e.type;return r&&jN[r]?jN[r]:null},uI=function(e,r){return Nv(r).indexOf(e)},mI=["children","width","height","viewBox","className","style","title","desc"];function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},U0.apply(this,arguments)}function pI(e,r){if(e==null)return{};var n=hI(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function hI(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function q0(e){var r=e.children,n=e.width,a=e.height,s=e.viewBox,i=e.className,l=e.style,d=e.title,u=e.desc,m=pI(e,mI),p=s||{width:n,height:a,x:0,y:0},f=st("recharts-surface",i);return X.createElement("svg",U0({},Ge(m,!0,"svg"),{className:f,width:n,height:a,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),X.createElement("title",null,d),X.createElement("desc",null,u),r)}var fI=["children","className"];function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V0.apply(this,arguments)}function xI(e,r){if(e==null)return{};var n=gI(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function gI(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}var lt=X.forwardRef(function(e,r){var n=e.children,a=e.className,s=xI(e,fI),i=st("recharts-layer",a);return X.createElement("g",V0({className:i},Ge(s,!0),{ref:r}),n)}),Vn=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]},rx,CN;function _6(){if(CN)return rx;CN=1;function e(r,n,a){var s=-1,i=r.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var l=Array(i);++s<i;)l[s]=r[s+n];return l}return rx=e,rx}var nx,AN;function bI(){if(AN)return nx;AN=1;var e=_6();function r(n,a,s){var i=n.length;return s=s===void 0?i:s,!a&&s>=i?n:e(n,a,s)}return nx=r,nx}var ax,EN;function F6(){if(EN)return ax;EN=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+n+a,i="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+e+s+i+"]");function u(m){return d.test(m)}return ax=u,ax}var sx,ON;function yI(){if(ON)return sx;ON=1;function e(r){return r.split("")}return sx=e,sx}var ix,TN;function vI(){if(TN)return ix;TN=1;var e="\\ud800-\\udfff",r="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+n+a,i="\\ufe0e\\ufe0f",l="["+e+"]",d="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",m="(?:"+d+"|"+u+")",p="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",y=m+"?",g="["+i+"]?",j="(?:"+b+"(?:"+[p,f,x].join("|")+")"+g+y+")*",k=g+y+j,S="(?:"+[p+d+"?",d,f,x,l].join("|")+")",A=RegExp(u+"(?="+u+")|"+S+k,"g");function w(E){return E.match(A)||[]}return ix=w,ix}var ox,PN;function jI(){if(PN)return ox;PN=1;var e=yI(),r=F6(),n=vI();function a(s){return r(s)?n(s):e(s)}return ox=a,ox}var lx,DN;function wI(){if(DN)return lx;DN=1;var e=bI(),r=F6(),n=jI(),a=P6();function s(i){return function(l){l=a(l);var d=r(l)?n(l):void 0,u=d?d[0]:l.charAt(0),m=d?e(d,1).join(""):l.slice(1);return u[i]()+m}}return lx=s,lx}var cx,IN;function NI(){if(IN)return cx;IN=1;var e=wI(),r=e("toUpperCase");return cx=r,cx}var kI=NI();const Rm=jt(kI);function Mt(e){return function(){return e}}const R6=Math.cos,Eu=Math.sin,Zn=Math.sqrt,Ou=Math.PI,$m=2*Ou,H0=Math.PI,G0=2*H0,Js=1e-6,SI=G0-Js;function $6(e){this._+=e[0];for(let r=1,n=e.length;r<n;++r)this._+=arguments[r]+e[r]}function CI(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return $6;const n=10**r;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class AI{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?$6:CI(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,a,s){this._append`Q${+r},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(r,n,a,s,i,l){this._append`C${+r},${+n},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(r,n,a,s,i){if(r=+r,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,d=this._y1,u=a-r,m=s-n,p=l-r,f=d-n,x=p*p+f*f;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(x>Js)if(!(Math.abs(f*u-m*p)>Js)||!i)this._append`L${this._x1=r},${this._y1=n}`;else{let b=a-l,y=s-d,g=u*u+m*m,j=b*b+y*y,k=Math.sqrt(g),S=Math.sqrt(x),A=i*Math.tan((H0-Math.acos((g+x-j)/(2*k*S)))/2),w=A/S,E=A/k;Math.abs(w-1)>Js&&this._append`L${r+w*p},${n+w*f}`,this._append`A${i},${i},0,0,${+(f*b>p*y)},${this._x1=r+E*u},${this._y1=n+E*m}`}}arc(r,n,a,s,i,l){if(r=+r,n=+n,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(s),u=a*Math.sin(s),m=r+d,p=n+u,f=1^l,x=l?s-i:i-s;this._x1===null?this._append`M${m},${p}`:(Math.abs(this._x1-m)>Js||Math.abs(this._y1-p)>Js)&&this._append`L${m},${p}`,a&&(x<0&&(x=x%G0+G0),x>SI?this._append`A${a},${a},0,1,${f},${r-d},${n-u}A${a},${a},0,1,${f},${this._x1=m},${this._y1=p}`:x>Js&&this._append`A${a},${a},0,${+(x>=H0)},${f},${this._x1=r+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(r,n,a,s){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function kv(e){let r=3;return e.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);r=a}return e},()=>new AI(r)}function Sv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function z6(e){this._context=e}z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function zm(e){return new z6(e)}function B6(e){return e[0]}function W6(e){return e[1]}function U6(e,r){var n=Mt(!0),a=null,s=zm,i=null,l=kv(d);e=typeof e=="function"?e:e===void 0?B6:Mt(e),r=typeof r=="function"?r:r===void 0?W6:Mt(r);function d(u){var m,p=(u=Sv(u)).length,f,x=!1,b;for(a==null&&(i=s(b=l())),m=0;m<=p;++m)!(m<p&&n(f=u[m],m,u))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(f,m,u),+r(f,m,u));if(b)return i=null,b+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Mt(+u),d):e},d.y=function(u){return arguments.length?(r=typeof u=="function"?u:Mt(+u),d):r},d.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Mt(!!u),d):n},d.curve=function(u){return arguments.length?(s=u,a!=null&&(i=s(a)),d):s},d.context=function(u){return arguments.length?(u==null?a=i=null:i=s(a=u),d):a},d}function au(e,r,n){var a=null,s=Mt(!0),i=null,l=zm,d=null,u=kv(m);e=typeof e=="function"?e:e===void 0?B6:Mt(+e),r=typeof r=="function"?r:Mt(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?W6:Mt(+n);function m(f){var x,b,y,g=(f=Sv(f)).length,j,k=!1,S,A=new Array(g),w=new Array(g);for(i==null&&(d=l(S=u())),x=0;x<=g;++x){if(!(x<g&&s(j=f[x],x,f))===k)if(k=!k)b=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),y=x-1;y>=b;--y)d.point(A[y],w[y]);d.lineEnd(),d.areaEnd()}k&&(A[x]=+e(j,x,f),w[x]=+r(j,x,f),d.point(a?+a(j,x,f):A[x],n?+n(j,x,f):w[x]))}if(S)return d=null,S+""||null}function p(){return U6().defined(s).curve(l).context(i)}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),a=null,m):e},m.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),m):e},m.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Mt(+f),m):a},m.y=function(f){return arguments.length?(r=typeof f=="function"?f:Mt(+f),n=null,m):r},m.y0=function(f){return arguments.length?(r=typeof f=="function"?f:Mt(+f),m):r},m.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Mt(+f),m):n},m.lineX0=m.lineY0=function(){return p().x(e).y(r)},m.lineY1=function(){return p().x(e).y(n)},m.lineX1=function(){return p().x(a).y(r)},m.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Mt(!!f),m):s},m.curve=function(f){return arguments.length?(l=f,i!=null&&(d=l(i)),m):l},m.context=function(f){return arguments.length?(f==null?i=d=null:d=l(i=f),m):i},m}class q6{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function EI(e){return new q6(e,!0)}function OI(e){return new q6(e,!1)}const Cv={draw(e,r){const n=Zn(r/Ou);e.moveTo(n,0),e.arc(0,0,n,0,$m)}},TI={draw(e,r){const n=Zn(r/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},V6=Zn(1/3),PI=V6*2,DI={draw(e,r){const n=Zn(r/PI),a=n*V6;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},II={draw(e,r){const n=Zn(r),a=-n/2;e.rect(a,a,n,n)}},MI=.8908130915292852,H6=Eu(Ou/10)/Eu(7*Ou/10),LI=Eu($m/10)*H6,_I=-R6($m/10)*H6,FI={draw(e,r){const n=Zn(r*MI),a=LI*n,s=_I*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const l=$m*i/5,d=R6(l),u=Eu(l);e.lineTo(u*n,-d*n),e.lineTo(d*a-u*s,u*a+d*s)}e.closePath()}},dx=Zn(3),RI={draw(e,r){const n=-Zn(r/(dx*3));e.moveTo(0,n*2),e.lineTo(-dx*n,-n),e.lineTo(dx*n,-n),e.closePath()}},bn=-.5,yn=Zn(3)/2,K0=1/Zn(12),$I=(K0/2+1)*3,zI={draw(e,r){const n=Zn(r/$I),a=n/2,s=n*K0,i=a,l=n*K0+n,d=-i,u=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(d,u),e.lineTo(bn*a-yn*s,yn*a+bn*s),e.lineTo(bn*i-yn*l,yn*i+bn*l),e.lineTo(bn*d-yn*u,yn*d+bn*u),e.lineTo(bn*a+yn*s,bn*s-yn*a),e.lineTo(bn*i+yn*l,bn*l-yn*i),e.lineTo(bn*d+yn*u,bn*u-yn*d),e.closePath()}};function BI(e,r){let n=null,a=kv(s);e=typeof e=="function"?e:Mt(e||Cv),r=typeof r=="function"?r:Mt(r===void 0?64:+r);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Mt(i),s):e},s.size=function(i){return arguments.length?(r=typeof i=="function"?i:Mt(+i),s):r},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function Tu(){}function Pu(e,r,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+n)/6)}function G6(e){this._context=e}G6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function WI(e){return new G6(e)}function K6(e){this._context=e}K6.prototype={areaStart:Tu,areaEnd:Tu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:Pu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function UI(e){return new K6(e)}function Y6(e){this._context=e}Y6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Pu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function qI(e){return new Y6(e)}function X6(e){this._context=e}X6.prototype={areaStart:Tu,areaEnd:Tu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function VI(e){return new X6(e)}function MN(e){return e<0?-1:1}function LN(e,r,n){var a=e._x1-e._x0,s=r-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(n-e._y1)/(s||a<0&&-0),d=(i*s+l*a)/(a+s);return(MN(i)+MN(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(d))||0}function _N(e,r){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-r)/2:r}function ux(e,r,n){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,d=(i-a)/3;e._context.bezierCurveTo(a+d,s+d*r,i-d,l-d*n,i,l)}function Du(e){this._context=e}Du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ux(this,this._t0,_N(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var n=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,ux(this,_N(this,n=LN(this,e,r)),n);break;default:ux(this,this._t0,n=LN(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=n}}};function J6(e){this._context=new Z6(e)}(J6.prototype=Object.create(Du.prototype)).point=function(e,r){Du.prototype.point.call(this,r,e)};function Z6(e){this._context=e}Z6.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,n,a,s,i){this._context.bezierCurveTo(r,e,a,n,i,s)}};function HI(e){return new Du(e)}function GI(e){return new J6(e)}function Q6(e){this._context=e}Q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),n===2)this._context.lineTo(e[1],r[1]);else for(var a=FN(e),s=FN(r),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],r[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function FN(e){var r,n=e.length-1,a,s=new Array(n),i=new Array(n),l=new Array(n);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],r=1;r<n-1;++r)s[r]=1,i[r]=4,l[r]=4*e[r]+2*e[r+1];for(s[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],r=1;r<n;++r)a=s[r]/i[r-1],i[r]-=a,l[r]-=a*l[r-1];for(s[n-1]=l[n-1]/i[n-1],r=n-2;r>=0;--r)s[r]=(l[r]-s[r+1])/i[r];for(i[n-1]=(e[n]+s[n-1])/2,r=0;r<n-1;++r)i[r]=2*e[r+1]-s[r+1];return[s,i]}function KI(e){return new Q6(e)}function Bm(e,r){this._context=e,this._t=r}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=e,this._y=r}};function YI(e){return new Bm(e,.5)}function XI(e){return new Bm(e,0)}function JI(e){return new Bm(e,1)}function po(e,r){if((l=e.length)>1)for(var n=1,a,s,i=e[r[0]],l,d=i.length;n<l;++n)for(s=i,i=e[r[n]],a=0;a<d;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Y0(e){for(var r=e.length,n=new Array(r);--r>=0;)n[r]=r;return n}function ZI(e,r){return e[r]}function QI(e){const r=[];return r.key=e,r}function eM(){var e=Mt([]),r=Y0,n=po,a=ZI;function s(i){var l=Array.from(e.apply(this,arguments),QI),d,u=l.length,m=-1,p;for(const f of i)for(d=0,++m;d<u;++d)(l[d][m]=[0,+a(f,l[d].key,m,i)]).data=f;for(d=0,p=Sv(r(l));d<u;++d)l[p[d]].index=d;return n(l,p),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Mt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Mt(+i),s):a},s.order=function(i){return arguments.length?(r=i==null?Y0:typeof i=="function"?i:Mt(Array.from(i)),s):r},s.offset=function(i){return arguments.length?(n=i??po,s):n},s}function tM(e,r){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,l;s<i;++s){for(l=n=0;n<a;++n)l+=e[n][s][1]||0;if(l)for(n=0;n<a;++n)e[n][s][1]/=l}po(e,r)}}function rM(e,r){if((s=e.length)>0){for(var n=0,a=e[r[0]],s,i=a.length;n<i;++n){for(var l=0,d=0;l<s;++l)d+=e[l][n][1]||0;a[n][1]+=a[n][0]=-d/2}po(e,r)}}function nM(e,r){if(!(!((l=e.length)>0)||!((i=(s=e[r[0]]).length)>0))){for(var n=0,a=1,s,i,l;a<i;++a){for(var d=0,u=0,m=0;d<l;++d){for(var p=e[r[d]],f=p[a][1]||0,x=p[a-1][1]||0,b=(f-x)/2,y=0;y<d;++y){var g=e[r[y]],j=g[a][1]||0,k=g[a-1][1]||0;b+=j-k}u+=f,m+=b*f}s[a-1][1]+=s[a-1][0]=n,u&&(n-=m/u)}s[a-1][1]+=s[a-1][0]=n,po(e,r)}}function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nc(e)}var aM=["type","size","sizeType"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},X0.apply(this,arguments)}function RN(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $N(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?RN(Object(n),!0).forEach(function(a){sM(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sM(e,r,n){return r=iM(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function iM(e){var r=oM(e,"string");return nc(r)=="symbol"?r:r+""}function oM(e,r){if(nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function lM(e,r){if(e==null)return{};var n=cM(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function cM(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}var eA={symbolCircle:Cv,symbolCross:TI,symbolDiamond:DI,symbolSquare:II,symbolStar:FI,symbolTriangle:RI,symbolWye:zI},dM=Math.PI/180,uM=function(e){var r="symbol".concat(Rm(e));return eA[r]||Cv},mM=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*dM;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pM=function(e,r){eA["symbol".concat(Rm(e))]=r},Av=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,s=a===void 0?64:a,i=e.sizeType,l=i===void 0?"area":i,d=lM(e,aM),u=$N($N({},d),{},{type:n,size:s,sizeType:l}),m=function(){var y=uM(n),g=BI().type(y).size(mM(s,l,n));return g()},p=u.className,f=u.cx,x=u.cy,b=Ge(u,!0);return f===+f&&x===+x&&s===+s?X.createElement("path",X0({},b,{className:st("recharts-symbols",p),transform:"translate(".concat(f,", ").concat(x,")"),d:m()})):null};Av.registerSymbol=pM;function ho(e){"@babel/helpers - typeof";return ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ho(e)}function J0(){return J0=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J0.apply(this,arguments)}function zN(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function hM(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?zN(Object(n),!0).forEach(function(a){ac(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function fM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function xM(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,rA(a.key),a)}}function gM(e,r,n){return r&&xM(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bM(e,r,n){return r=Iu(r),yM(e,tA()?Reflect.construct(r,n||[],Iu(e).constructor):r.apply(e,n))}function yM(e,r){if(r&&(ho(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vM(e)}function vM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tA=function(){return!!e})()}function Iu(e){return Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iu(e)}function jM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Z0(e,r)}function Z0(e,r){return Z0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z0(e,r)}function ac(e,r,n){return r=rA(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function rA(e){var r=wM(e,"string");return ho(r)=="symbol"?r:r+""}function wM(e,r){if(ho(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(ho(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vn=32,Ev=(function(e){function r(){return fM(this,r),bM(this,r,arguments)}return jM(r,e),gM(r,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=vn/2,i=vn/6,l=vn/3,d=n.inactive?a:n.color;if(n.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:vn,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(vn,"M").concat(2*l,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return X.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(vn/8,"h").concat(vn,"v").concat(vn*3/4,"h").concat(-vn,"z"),className:"recharts-legend-icon"});if(X.isValidElement(n.legendIcon)){var u=hM({},n);return delete u.legendIcon,X.cloneElement(n.legendIcon,u)}return X.createElement(Av,{fill:d,cx:s,cy:s,size:vn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,i=a.iconSize,l=a.layout,d=a.formatter,u=a.inactiveColor,m={x:0,y:0,width:vn,height:vn},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var y=x.formatter||d,g=st(ac(ac({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var j=Qe(x.value)?null:x.value;Vn(!Qe(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=x.inactive?u:x.color;return X.createElement("li",J0({className:g,style:p,key:"legend-item-".concat(b)},Cs(n.props,x,b)),X.createElement(q0,{width:i,height:i,viewBox:m,style:f},n.renderIcon(x)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},y?y(j,x,b):j))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,i=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?i:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(N.PureComponent);ac(Ev,"displayName","Legend");ac(Ev,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var mx,BN;function NM(){if(BN)return mx;BN=1;var e=Im();function r(){this.__data__=new e,this.size=0}return mx=r,mx}var px,WN;function kM(){if(WN)return px;WN=1;function e(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}return px=e,px}var hx,UN;function SM(){if(UN)return hx;UN=1;function e(r){return this.__data__.get(r)}return hx=e,hx}var fx,qN;function CM(){if(qN)return fx;qN=1;function e(r){return this.__data__.has(r)}return fx=e,fx}var xx,VN;function AM(){if(VN)return xx;VN=1;var e=Im(),r=vv(),n=jv(),a=200;function s(i,l){var d=this.__data__;if(d instanceof e){var u=d.__data__;if(!r||u.length<a-1)return u.push([i,l]),this.size=++d.size,this;d=this.__data__=new n(u)}return d.set(i,l),this.size=d.size,this}return xx=s,xx}var gx,HN;function Ov(){if(HN)return gx;HN=1;var e=Im(),r=NM(),n=kM(),a=SM(),s=CM(),i=AM();function l(d){var u=this.__data__=new e(d);this.size=u.size}return l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,gx=l,gx}var bx,GN;function EM(){if(GN)return bx;GN=1;var e="__lodash_hash_undefined__";function r(n){return this.__data__.set(n,e),this}return bx=r,bx}var yx,KN;function OM(){if(KN)return yx;KN=1;function e(r){return this.__data__.has(r)}return yx=e,yx}var vx,YN;function nA(){if(YN)return vx;YN=1;var e=jv(),r=EM(),n=OM();function a(s){var i=-1,l=s==null?0:s.length;for(this.__data__=new e;++i<l;)this.add(s[i])}return a.prototype.add=a.prototype.push=r,a.prototype.has=n,vx=a,vx}var jx,XN;function aA(){if(XN)return jx;XN=1;function e(r,n){for(var a=-1,s=r==null?0:r.length;++a<s;)if(n(r[a],a,r))return!0;return!1}return jx=e,jx}var wx,JN;function sA(){if(JN)return wx;JN=1;function e(r,n){return r.has(n)}return wx=e,wx}var Nx,ZN;function iA(){if(ZN)return Nx;ZN=1;var e=nA(),r=aA(),n=sA(),a=1,s=2;function i(l,d,u,m,p,f){var x=u&a,b=l.length,y=d.length;if(b!=y&&!(x&&y>b))return!1;var g=f.get(l),j=f.get(d);if(g&&j)return g==d&&j==l;var k=-1,S=!0,A=u&s?new e:void 0;for(f.set(l,d),f.set(d,l);++k<b;){var w=l[k],E=d[k];if(m)var T=x?m(E,w,k,d,l,f):m(w,E,k,l,d,f);if(T!==void 0){if(T)continue;S=!1;break}if(A){if(!r(d,function(O,D){if(!n(A,D)&&(w===O||p(w,O,u,m,f)))return A.push(D)})){S=!1;break}}else if(!(w===E||p(w,E,u,m,f))){S=!1;break}}return f.delete(l),f.delete(d),S}return Nx=i,Nx}var kx,QN;function oA(){if(QN)return kx;QN=1;var e=Yn(),r=e.Uint8Array;return kx=r,kx}var Sx,ek;function TM(){if(ek)return Sx;ek=1;function e(r){var n=-1,a=Array(r.size);return r.forEach(function(s,i){a[++n]=[i,s]}),a}return Sx=e,Sx}var Cx,tk;function Tv(){if(tk)return Cx;tk=1;function e(r){var n=-1,a=Array(r.size);return r.forEach(function(s){a[++n]=s}),a}return Cx=e,Cx}var Ax,rk;function PM(){if(rk)return Ax;rk=1;var e=Wo(),r=oA(),n=Pm(),a=iA(),s=TM(),i=Tv(),l=1,d=2,u="[object Boolean]",m="[object Date]",p="[object Error]",f="[object Map]",x="[object Number]",b="[object RegExp]",y="[object Set]",g="[object String]",j="[object Symbol]",k="[object ArrayBuffer]",S="[object DataView]",A=e?e.prototype:void 0,w=A?A.valueOf:void 0;function E(T,O,D,I,M,L,B){switch(D){case S:if(T.byteLength!=O.byteLength||T.byteOffset!=O.byteOffset)return!1;T=T.buffer,O=O.buffer;case k:return!(T.byteLength!=O.byteLength||!L(new r(T),new r(O)));case u:case m:case x:return n(+T,+O);case p:return T.name==O.name&&T.message==O.message;case b:case g:return T==O+"";case f:var z=s;case y:var W=I&l;if(z||(z=i),T.size!=O.size&&!W)return!1;var R=B.get(T);if(R)return R==O;I|=d,B.set(T,O);var H=a(z(T),z(O),I,M,L,B);return B.delete(T),H;case j:if(w)return w.call(T)==w.call(O)}return!1}return Ax=E,Ax}var Ex,nk;function Pv(){if(nk)return Ex;nk=1;function e(r,n){for(var a=-1,s=n.length,i=r.length;++a<s;)r[i+a]=n[a];return r}return Ex=e,Ex}var Ox,ak;function lA(){if(ak)return Ox;ak=1;var e=Pv(),r=Rr();function n(a,s,i){var l=s(a);return r(a)?l:e(l,i(a))}return Ox=n,Ox}var Tx,sk;function DM(){if(sk)return Tx;sk=1;function e(r,n){for(var a=-1,s=r==null?0:r.length,i=0,l=[];++a<s;){var d=r[a];n(d,a,r)&&(l[i++]=d)}return l}return Tx=e,Tx}var Px,ik;function cA(){if(ik)return Px;ik=1;function e(){return[]}return Px=e,Px}var Dx,ok;function Dv(){if(ok)return Dx;ok=1;var e=DM(),r=cA(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(l){return l==null?[]:(l=Object(l),e(s(l),function(d){return a.call(l,d)}))}:r;return Dx=i,Dx}var Ix,lk;function IM(){if(lk)return Ix;lk=1;function e(r,n){for(var a=-1,s=Array(r);++a<r;)s[a]=n(a);return s}return Ix=e,Ix}var Mx,ck;function MM(){if(ck)return Mx;ck=1;var e=Wa(),r=Xn(),n="[object Arguments]";function a(s){return r(s)&&e(s)==n}return Mx=a,Mx}var Lx,dk;function Iv(){if(dk)return Lx;dk=1;var e=MM(),r=Xn(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(l){return r(l)&&a.call(l,"callee")&&!s.call(l,"callee")};return Lx=i,Lx}var yu={exports:{}},_x,uk;function LM(){if(uk)return _x;uk=1;function e(){return!1}return _x=e,_x}yu.exports;var mk;function Mv(){return mk||(mk=1,(function(e,r){var n=Yn(),a=LM(),s=r&&!r.nodeType&&r,i=s&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===s,d=l?n.Buffer:void 0,u=d?d.isBuffer:void 0,m=u||a;e.exports=m})(yu,yu.exports)),yu.exports}var Fx,pk;function Lv(){if(pk)return Fx;pk=1;var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<s}return Fx=n,Fx}var Rx,hk;function _v(){if(hk)return Rx;hk=1;var e=9007199254740991;function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Rx=r,Rx}var $x,fk;function _M(){if(fk)return $x;fk=1;var e=Wa(),r=_v(),n=Xn(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",m="[object Map]",p="[object Number]",f="[object Object]",x="[object RegExp]",b="[object Set]",y="[object String]",g="[object WeakMap]",j="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",A="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",T="[object Int32Array]",O="[object Uint8Array]",D="[object Uint8ClampedArray]",I="[object Uint16Array]",M="[object Uint32Array]",L={};L[S]=L[A]=L[w]=L[E]=L[T]=L[O]=L[D]=L[I]=L[M]=!0,L[a]=L[s]=L[j]=L[i]=L[k]=L[l]=L[d]=L[u]=L[m]=L[p]=L[f]=L[x]=L[b]=L[y]=L[g]=!1;function B(z){return n(z)&&r(z.length)&&!!L[e(z)]}return $x=B,$x}var zx,xk;function Wm(){if(xk)return zx;xk=1;function e(r){return function(n){return r(n)}}return zx=e,zx}var vu={exports:{}};vu.exports;var gk;function Fv(){return gk||(gk=1,(function(e,r){var n=E6(),a=r&&!r.nodeType&&r,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i&&n.process,d=(function(){try{var u=s&&s.require&&s.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}})();e.exports=d})(vu,vu.exports)),vu.exports}var Bx,bk;function dA(){if(bk)return Bx;bk=1;var e=_M(),r=Wm(),n=Fv(),a=n&&n.isTypedArray,s=a?r(a):e;return Bx=s,Bx}var Wx,yk;function uA(){if(yk)return Wx;yk=1;var e=IM(),r=Iv(),n=Rr(),a=Mv(),s=Lv(),i=dA(),l=Object.prototype,d=l.hasOwnProperty;function u(m,p){var f=n(m),x=!f&&r(m),b=!f&&!x&&a(m),y=!f&&!x&&!b&&i(m),g=f||x||b||y,j=g?e(m.length,String):[],k=j.length;for(var S in m)(p||d.call(m,S))&&!(g&&(S=="length"||b&&(S=="offset"||S=="parent")||y&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||s(S,k)))&&j.push(S);return j}return Wx=u,Wx}var Ux,vk;function Rv(){if(vk)return Ux;vk=1;var e=Object.prototype;function r(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||e;return n===s}return Ux=r,Ux}var qx,jk;function mA(){if(jk)return qx;jk=1;function e(r,n){return function(a){return r(n(a))}}return qx=e,qx}var Vx,wk;function FM(){if(wk)return Vx;wk=1;var e=mA(),r=e(Object.keys,Object);return Vx=r,Vx}var Hx,Nk;function RM(){if(Nk)return Hx;Nk=1;var e=Rv(),r=FM(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!e(i))return r(i);var l=[];for(var d in Object(i))a.call(i,d)&&d!="constructor"&&l.push(d);return l}return Hx=s,Hx}var Gx,kk;function Ho(){if(kk)return Gx;kk=1;var e=yv(),r=_v();function n(a){return a!=null&&r(a.length)&&!e(a)}return Gx=n,Gx}var Kx,Sk;function Go(){if(Sk)return Kx;Sk=1;var e=uA(),r=RM(),n=Ho();function a(s){return n(s)?e(s):r(s)}return Kx=a,Kx}var Yx,Ck;function pA(){if(Ck)return Yx;Ck=1;var e=lA(),r=Dv(),n=Go();function a(s){return e(s,n,r)}return Yx=a,Yx}var Xx,Ak;function $M(){if(Ak)return Xx;Ak=1;var e=pA(),r=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d,u,m,p){var f=d&r,x=e(i),b=x.length,y=e(l),g=y.length;if(b!=g&&!f)return!1;for(var j=b;j--;){var k=x[j];if(!(f?k in l:a.call(l,k)))return!1}var S=p.get(i),A=p.get(l);if(S&&A)return S==l&&A==i;var w=!0;p.set(i,l),p.set(l,i);for(var E=f;++j<b;){k=x[j];var T=i[k],O=l[k];if(u)var D=f?u(O,T,k,l,i,p):u(T,O,k,i,l,p);if(!(D===void 0?T===O||m(T,O,d,u,p):D)){w=!1;break}E||(E=k=="constructor")}if(w&&!E){var I=i.constructor,M=l.constructor;I!=M&&"constructor"in i&&"constructor"in l&&!(typeof I=="function"&&I instanceof I&&typeof M=="function"&&M instanceof M)&&(w=!1)}return p.delete(i),p.delete(l),w}return Xx=s,Xx}var Jx,Ek;function zM(){if(Ek)return Jx;Ek=1;var e=fi(),r=Yn(),n=e(r,"DataView");return Jx=n,Jx}var Zx,Ok;function BM(){if(Ok)return Zx;Ok=1;var e=fi(),r=Yn(),n=e(r,"Promise");return Zx=n,Zx}var Qx,Tk;function hA(){if(Tk)return Qx;Tk=1;var e=fi(),r=Yn(),n=e(r,"Set");return Qx=n,Qx}var eg,Pk;function WM(){if(Pk)return eg;Pk=1;var e=fi(),r=Yn(),n=e(r,"WeakMap");return eg=n,eg}var tg,Dk;function Um(){if(Dk)return tg;Dk=1;var e=zM(),r=vv(),n=BM(),a=hA(),s=WM(),i=Wa(),l=O6(),d="[object Map]",u="[object Object]",m="[object Promise]",p="[object Set]",f="[object WeakMap]",x="[object DataView]",b=l(e),y=l(r),g=l(n),j=l(a),k=l(s),S=i;return(e&&S(new e(new ArrayBuffer(1)))!=x||r&&S(new r)!=d||n&&S(n.resolve())!=m||a&&S(new a)!=p||s&&S(new s)!=f)&&(S=function(A){var w=i(A),E=w==u?A.constructor:void 0,T=E?l(E):"";if(T)switch(T){case b:return x;case y:return d;case g:return m;case j:return p;case k:return f}return w}),tg=S,tg}var rg,Ik;function UM(){if(Ik)return rg;Ik=1;var e=Ov(),r=iA(),n=PM(),a=$M(),s=Um(),i=Rr(),l=Mv(),d=dA(),u=1,m="[object Arguments]",p="[object Array]",f="[object Object]",x=Object.prototype,b=x.hasOwnProperty;function y(g,j,k,S,A,w){var E=i(g),T=i(j),O=E?p:s(g),D=T?p:s(j);O=O==m?f:O,D=D==m?f:D;var I=O==f,M=D==f,L=O==D;if(L&&l(g)){if(!l(j))return!1;E=!0,I=!1}if(L&&!I)return w||(w=new e),E||d(g)?r(g,j,k,S,A,w):n(g,j,O,k,S,A,w);if(!(k&u)){var B=I&&b.call(g,"__wrapped__"),z=M&&b.call(j,"__wrapped__");if(B||z){var W=B?g.value():g,R=z?j.value():j;return w||(w=new e),A(W,R,k,S,w)}}return L?(w||(w=new e),a(g,j,k,S,A,w)):!1}return rg=y,rg}var ng,Mk;function $v(){if(Mk)return ng;Mk=1;var e=UM(),r=Xn();function n(a,s,i,l,d){return a===s?!0:a==null||s==null||!r(a)&&!r(s)?a!==a&&s!==s:e(a,s,i,l,n,d)}return ng=n,ng}var ag,Lk;function qM(){if(Lk)return ag;Lk=1;var e=Ov(),r=$v(),n=1,a=2;function s(i,l,d,u){var m=d.length,p=m,f=!u;if(i==null)return!p;for(i=Object(i);m--;){var x=d[m];if(f&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++m<p;){x=d[m];var b=x[0],y=i[b],g=x[1];if(f&&x[2]){if(y===void 0&&!(b in i))return!1}else{var j=new e;if(u)var k=u(y,g,b,i,l,j);if(!(k===void 0?r(g,y,n|a,u,j):k))return!1}}return!0}return ag=s,ag}var sg,_k;function fA(){if(_k)return sg;_k=1;var e=Jn();function r(n){return n===n&&!e(n)}return sg=r,sg}var ig,Fk;function VM(){if(Fk)return ig;Fk=1;var e=fA(),r=Go();function n(a){for(var s=r(a),i=s.length;i--;){var l=s[i],d=a[l];s[i]=[l,d,e(d)]}return s}return ig=n,ig}var og,Rk;function xA(){if(Rk)return og;Rk=1;function e(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==void 0||r in Object(a))}}return og=e,og}var lg,$k;function HM(){if($k)return lg;$k=1;var e=qM(),r=VM(),n=xA();function a(s){var i=r(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(l){return l===s||e(l,s,i)}}return lg=a,lg}var cg,zk;function GM(){if(zk)return cg;zk=1;function e(r,n){return r!=null&&n in Object(r)}return cg=e,cg}var dg,Bk;function KM(){if(Bk)return dg;Bk=1;var e=_m(),r=Iv(),n=Rr(),a=Lv(),s=_v(),i=$c();function l(d,u,m){u=e(u,d);for(var p=-1,f=u.length,x=!1;++p<f;){var b=i(u[p]);if(!(x=d!=null&&m(d,b)))break;d=d[b]}return x||++p!=f?x:(f=d==null?0:d.length,!!f&&s(f)&&a(b,f)&&(n(d)||r(d)))}return dg=l,dg}var ug,Wk;function YM(){if(Wk)return ug;Wk=1;var e=GM(),r=KM();function n(a,s){return a!=null&&r(a,s,e)}return ug=n,ug}var mg,Uk;function XM(){if(Uk)return mg;Uk=1;var e=$v(),r=D6(),n=YM(),a=bv(),s=fA(),i=xA(),l=$c(),d=1,u=2;function m(p,f){return a(p)&&s(f)?i(l(p),f):function(x){var b=r(x,p);return b===void 0&&b===f?n(x,p):e(f,b,d|u)}}return mg=m,mg}var pg,qk;function Ko(){if(qk)return pg;qk=1;function e(r){return r}return pg=e,pg}var hg,Vk;function JM(){if(Vk)return hg;Vk=1;function e(r){return function(n){return n?.[r]}}return hg=e,hg}var fg,Hk;function ZM(){if(Hk)return fg;Hk=1;var e=Fm();function r(n){return function(a){return e(a,n)}}return fg=r,fg}var xg,Gk;function QM(){if(Gk)return xg;Gk=1;var e=JM(),r=ZM(),n=bv(),a=$c();function s(i){return n(i)?e(a(i)):r(i)}return xg=s,xg}var gg,Kk;function ha(){if(Kk)return gg;Kk=1;var e=HM(),r=XM(),n=Ko(),a=Rr(),s=QM();function i(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?a(l)?r(l[0],l[1]):e(l):s(l)}return gg=i,gg}var bg,Yk;function gA(){if(Yk)return bg;Yk=1;function e(r,n,a,s){for(var i=r.length,l=a+(s?1:-1);s?l--:++l<i;)if(n(r[l],l,r))return l;return-1}return bg=e,bg}var yg,Xk;function eL(){if(Xk)return yg;Xk=1;function e(r){return r!==r}return yg=e,yg}var vg,Jk;function tL(){if(Jk)return vg;Jk=1;function e(r,n,a){for(var s=a-1,i=r.length;++s<i;)if(r[s]===n)return s;return-1}return vg=e,vg}var jg,Zk;function rL(){if(Zk)return jg;Zk=1;var e=gA(),r=eL(),n=tL();function a(s,i,l){return i===i?n(s,i,l):e(s,r,l)}return jg=a,jg}var wg,Qk;function nL(){if(Qk)return wg;Qk=1;var e=rL();function r(n,a){var s=n==null?0:n.length;return!!s&&e(n,a,0)>-1}return wg=r,wg}var Ng,e4;function aL(){if(e4)return Ng;e4=1;function e(r,n,a){for(var s=-1,i=r==null?0:r.length;++s<i;)if(a(n,r[s]))return!0;return!1}return Ng=e,Ng}var kg,t4;function sL(){if(t4)return kg;t4=1;function e(){}return kg=e,kg}var Sg,r4;function iL(){if(r4)return Sg;r4=1;var e=hA(),r=sL(),n=Tv(),a=1/0,s=e&&1/n(new e([,-0]))[1]==a?function(i){return new e(i)}:r;return Sg=s,Sg}var Cg,n4;function oL(){if(n4)return Cg;n4=1;var e=nA(),r=nL(),n=aL(),a=sA(),s=iL(),i=Tv(),l=200;function d(u,m,p){var f=-1,x=r,b=u.length,y=!0,g=[],j=g;if(p)y=!1,x=n;else if(b>=l){var k=m?null:s(u);if(k)return i(k);y=!1,x=a,j=new e}else j=m?[]:g;e:for(;++f<b;){var S=u[f],A=m?m(S):S;if(S=p||S!==0?S:0,y&&A===A){for(var w=j.length;w--;)if(j[w]===A)continue e;m&&j.push(A),g.push(S)}else x(j,A,p)||(j!==g&&j.push(A),g.push(S))}return g}return Cg=d,Cg}var Ag,a4;function lL(){if(a4)return Ag;a4=1;var e=ha(),r=oL();function n(a,s){return a&&a.length?r(a,e(s,2)):[]}return Ag=n,Ag}var cL=lL();const s4=jt(cL);function bA(e,r,n){return r===!0?s4(e,n):Qe(r)?s4(e,r):e}function fo(e){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fo(e)}var dL=["ref"];function i4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Oa(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?i4(Object(n),!0).forEach(function(a){qm(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o4(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vA(a.key),a)}}function mL(e,r,n){return r&&o4(e.prototype,r),n&&o4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pL(e,r,n){return r=Mu(r),hL(e,yA()?Reflect.construct(r,n||[],Mu(e).constructor):r.apply(e,n))}function hL(e,r){if(r&&(fo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fL(e)}function fL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yA=function(){return!!e})()}function Mu(e){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mu(e)}function xL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Q0(e,r)}function Q0(e,r){return Q0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Q0(e,r)}function qm(e,r,n){return r=vA(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function vA(e){var r=gL(e,"string");return fo(r)=="symbol"?r:r+""}function gL(e,r){if(fo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(fo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function bL(e,r){if(e==null)return{};var n=yL(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function yL(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function vL(e){return e.value}function jL(e,r){if(X.isValidElement(e))return X.cloneElement(e,r);if(typeof e=="function")return X.createElement(e,r);r.ref;var n=bL(r,dL);return X.createElement(Ev,n)}var l4=1,Nn=(function(e){function r(){var n;uL(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=pL(this,r,[].concat(s)),qm(n,"lastBoundingBox",{width:-1,height:-1}),n}return xL(r,e),mL(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>l4||Math.abs(a.height-this.lastBoundingBox.height)>l4)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Oa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,i=a.align,l=a.verticalAlign,d=a.margin,u=a.chartWidth,m=a.chartHeight,p,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=i==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();f={top:((m||0)-b.height)/2}}else f=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Oa(Oa({},p),f)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,i=a.width,l=a.height,d=a.wrapperStyle,u=a.payloadUniqBy,m=a.payload,p=Oa(Oa({position:"absolute",width:i||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return X.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(f){n.wrapperNode=f}},jL(s,Oa(Oa({},this.props),{},{payload:bA(m,u,vL)})))}}],[{key:"getWithHeight",value:function(n,a){var s=Oa(Oa({},this.defaultProps),n.props),i=s.layout;return i==="vertical"&&Ce(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||a}:null}}])})(N.PureComponent);qm(Nn,"displayName","Legend");qm(Nn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Eg,c4;function wL(){if(c4)return Eg;c4=1;var e=Wo(),r=Iv(),n=Rr(),a=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||r(i)||!!(a&&i&&i[a])}return Eg=s,Eg}var Og,d4;function zv(){if(d4)return Og;d4=1;var e=Pv(),r=wL();function n(a,s,i,l,d){var u=-1,m=a.length;for(i||(i=r),d||(d=[]);++u<m;){var p=a[u];s>0&&i(p)?s>1?n(p,s-1,i,l,d):e(d,p):l||(d[d.length]=p)}return d}return Og=n,Og}var Tg,u4;function NL(){if(u4)return Tg;u4=1;function e(r){return function(n,a,s){for(var i=-1,l=Object(n),d=s(n),u=d.length;u--;){var m=d[r?u:++i];if(a(l[m],m,l)===!1)break}return n}}return Tg=e,Tg}var Pg,m4;function kL(){if(m4)return Pg;m4=1;var e=NL(),r=e();return Pg=r,Pg}var Dg,p4;function jA(){if(p4)return Dg;p4=1;var e=kL(),r=Go();function n(a,s){return a&&e(a,s,r)}return Dg=n,Dg}var Ig,h4;function SL(){if(h4)return Ig;h4=1;var e=Ho();function r(n,a){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var l=s.length,d=a?l:-1,u=Object(s);(a?d--:++d<l)&&i(u[d],d,u)!==!1;);return s}}return Ig=r,Ig}var Mg,f4;function Bv(){if(f4)return Mg;f4=1;var e=jA(),r=SL(),n=r(e);return Mg=n,Mg}var Lg,x4;function wA(){if(x4)return Lg;x4=1;var e=Bv(),r=Ho();function n(a,s){var i=-1,l=r(a)?Array(a.length):[];return e(a,function(d,u,m){l[++i]=s(d,u,m)}),l}return Lg=n,Lg}var _g,g4;function CL(){if(g4)return _g;g4=1;function e(r,n){var a=r.length;for(r.sort(n);a--;)r[a]=r[a].value;return r}return _g=e,_g}var Fg,b4;function AL(){if(b4)return Fg;b4=1;var e=Uo();function r(n,a){if(n!==a){var s=n!==void 0,i=n===null,l=n===n,d=e(n),u=a!==void 0,m=a===null,p=a===a,f=e(a);if(!m&&!f&&!d&&n>a||d&&u&&p&&!m&&!f||i&&u&&p||!s&&p||!l)return 1;if(!i&&!d&&!f&&n<a||f&&s&&l&&!i&&!d||m&&s&&l||!u&&l||!p)return-1}return 0}return Fg=r,Fg}var Rg,y4;function EL(){if(y4)return Rg;y4=1;var e=AL();function r(n,a,s){for(var i=-1,l=n.criteria,d=a.criteria,u=l.length,m=s.length;++i<u;){var p=e(l[i],d[i]);if(p){if(i>=m)return p;var f=s[i];return p*(f=="desc"?-1:1)}}return n.index-a.index}return Rg=r,Rg}var $g,v4;function OL(){if(v4)return $g;v4=1;var e=Lm(),r=Fm(),n=ha(),a=wA(),s=CL(),i=Wm(),l=EL(),d=Ko(),u=Rr();function m(p,f,x){f.length?f=e(f,function(g){return u(g)?function(j){return r(j,g.length===1?g[0]:g)}:g}):f=[d];var b=-1;f=e(f,i(n));var y=a(p,function(g,j,k){var S=e(f,function(A){return A(g)});return{criteria:S,index:++b,value:g}});return s(y,function(g,j){return l(g,j,x)})}return $g=m,$g}var zg,j4;function TL(){if(j4)return zg;j4=1;function e(r,n,a){switch(a.length){case 0:return r.call(n);case 1:return r.call(n,a[0]);case 2:return r.call(n,a[0],a[1]);case 3:return r.call(n,a[0],a[1],a[2])}return r.apply(n,a)}return zg=e,zg}var Bg,w4;function NA(){if(w4)return Bg;w4=1;var e=TL(),r=Math.max;function n(a,s,i){return s=r(s===void 0?a.length-1:s,0),function(){for(var l=arguments,d=-1,u=r(l.length-s,0),m=Array(u);++d<u;)m[d]=l[s+d];d=-1;for(var p=Array(s+1);++d<s;)p[d]=l[d];return p[s]=i(m),e(a,this,p)}}return Bg=n,Bg}var Wg,N4;function PL(){if(N4)return Wg;N4=1;function e(r){return function(){return r}}return Wg=e,Wg}var Ug,k4;function kA(){if(k4)return Ug;k4=1;var e=fi(),r=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Ug=r,Ug}var qg,S4;function DL(){if(S4)return qg;S4=1;var e=PL(),r=kA(),n=Ko(),a=r?function(s,i){return r(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return qg=a,qg}var Vg,C4;function IL(){if(C4)return Vg;C4=1;var e=800,r=16,n=Date.now;function a(s){var i=0,l=0;return function(){var d=n(),u=r-(d-l);if(l=d,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Vg=a,Vg}var Hg,A4;function SA(){if(A4)return Hg;A4=1;var e=DL(),r=IL(),n=r(e);return Hg=n,Hg}var Gg,E4;function ML(){if(E4)return Gg;E4=1;var e=Ko(),r=NA(),n=SA();function a(s,i){return n(r(s,i,e),s+"")}return Gg=a,Gg}var Kg,O4;function Vm(){if(O4)return Kg;O4=1;var e=Pm(),r=Ho(),n=Lv(),a=Jn();function s(i,l,d){if(!a(d))return!1;var u=typeof l;return(u=="number"?r(d)&&n(l,d.length):u=="string"&&l in d)?e(d[l],i):!1}return Kg=s,Kg}var Yg,T4;function LL(){if(T4)return Yg;T4=1;var e=zv(),r=OL(),n=ML(),a=Vm(),s=n(function(i,l){if(i==null)return[];var d=l.length;return d>1&&a(i,l[0],l[1])?l=[]:d>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),r(i,e(l,1),[])});return Yg=s,Yg}var _L=LL();const Wv=jt(_L);function sc(e){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sc(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ey.apply(this,arguments)}function FL(e,r){return BL(e)||zL(e,r)||$L(e,r)||RL()}function RL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $L(e,r){if(e){if(typeof e=="string")return P4(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P4(e,r)}}function P4(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function zL(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function BL(e){if(Array.isArray(e))return e}function D4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xg(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?D4(Object(n),!0).forEach(function(a){WL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WL(e,r,n){return r=UL(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function UL(e){var r=qL(e,"string");return sc(r)=="symbol"?r:r+""}function qL(e,r){if(sc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(sc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function VL(e){return Array.isArray(e)&&cr(e[0])&&cr(e[1])?e.join(" ~ "):e}var HL=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,s=a===void 0?{}:a,i=e.itemStyle,l=i===void 0?{}:i,d=e.labelStyle,u=d===void 0?{}:d,m=e.payload,p=e.formatter,f=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,y=e.label,g=e.labelFormatter,j=e.accessibilityLayer,k=j===void 0?!1:j,S=function(){if(m&&m.length){var M={padding:0,margin:0},L=(f?Wv(m,f):m).map(function(B,z){if(B.type==="none")return null;var W=Xg({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),R=B.formatter||p||VL,H=B.value,U=B.name,q=H,Q=U;if(R&&q!=null&&Q!=null){var K=R(H,U,B,z,m);if(Array.isArray(K)){var F=FL(K,2);q=F[0],Q=F[1]}else q=K}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:W},cr(Q)?X.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,cr(Q)?X.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,X.createElement("span",{className:"recharts-tooltip-item-value"},q),X.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:M},L)}return null},A=Xg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=Xg({margin:0},u),E=!nt(y),T=E?y:"",O=st("recharts-default-tooltip",x),D=st("recharts-tooltip-label",b);E&&g&&m!==void 0&&m!==null&&(T=g(y,m));var I=k?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",ey({className:O,style:A},I),X.createElement("p",{className:D,style:w},X.isValidElement(T)?T:"".concat(T)),S())};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ic(e)}function su(e,r,n){return r=GL(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function GL(e){var r=KL(e,"string");return ic(r)=="symbol"?r:r+""}function KL(e,r){if(ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Ll="recharts-tooltip-wrapper",YL={visibility:"hidden"};function XL(e){var r=e.coordinate,n=e.translateX,a=e.translateY;return st(Ll,su(su(su(su({},"".concat(Ll,"-right"),Ce(n)&&r&&Ce(r.x)&&n>=r.x),"".concat(Ll,"-left"),Ce(n)&&r&&Ce(r.x)&&n<r.x),"".concat(Ll,"-bottom"),Ce(a)&&r&&Ce(r.y)&&a>=r.y),"".concat(Ll,"-top"),Ce(a)&&r&&Ce(r.y)&&a<r.y))}function I4(e){var r=e.allowEscapeViewBox,n=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,l=e.reverseDirection,d=e.tooltipDimension,u=e.viewBox,m=e.viewBoxDimension;if(i&&Ce(i[a]))return i[a];var p=n[a]-d-s,f=n[a]+s;if(r[a])return l[a]?p:f;if(l[a]){var x=p,b=u[a];return x<b?Math.max(f,u[a]):Math.max(p,u[a])}var y=f+d,g=u[a]+m;return y>g?Math.max(p,u[a]):Math.max(f,u[a])}function JL(e){var r=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function ZL(e){var r=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,l=e.tooltipBox,d=e.useTranslate3d,u=e.viewBox,m,p,f;return l.height>0&&l.width>0&&n?(p=I4({allowEscapeViewBox:r,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),f=I4({allowEscapeViewBox:r,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),m=JL({translateX:p,translateY:f,useTranslate3d:d})):m=YL,{cssProperties:m,cssClasses:XL({translateX:p,translateY:f,coordinate:n})}}function xo(e){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xo(e)}function M4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function L4(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?M4(Object(n),!0).forEach(function(a){ry(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function e7(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,AA(a.key),a)}}function t7(e,r,n){return r&&e7(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r7(e,r,n){return r=Lu(r),n7(e,CA()?Reflect.construct(r,n||[],Lu(e).constructor):r.apply(e,n))}function n7(e,r){if(r&&(xo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a7(e)}function a7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CA=function(){return!!e})()}function Lu(e){return Lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lu(e)}function s7(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ty(e,r)}function ty(e,r){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ty(e,r)}function ry(e,r,n){return r=AA(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function AA(e){var r=i7(e,"string");return xo(r)=="symbol"?r:r+""}function i7(e,r){if(xo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(xo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _4=1,o7=(function(e){function r(){var n;QL(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=r7(this,r,[].concat(s)),ry(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ry(n,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,m,p;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(m=(p=n.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&m!==void 0?m:0}})}}),n}return s7(r,e),t7(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>_4||Math.abs(n.height-this.state.lastBoundingBox.height)>_4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,d=a.animationEasing,u=a.children,m=a.coordinate,p=a.hasPayload,f=a.isAnimationActive,x=a.offset,b=a.position,y=a.reverseDirection,g=a.useTranslate3d,j=a.viewBox,k=a.wrapperStyle,S=ZL({allowEscapeViewBox:i,coordinate:m,offsetTopLeft:x,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:j}),A=S.cssClasses,w=S.cssProperties,E=L4(L4({transition:f&&s?"transform ".concat(l,"ms ").concat(d):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},k);return X.createElement("div",{tabIndex:-1,className:A,style:E,ref:function(T){n.wrapperNode=T}},u)}}])})(N.PureComponent),l7=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ua={isSsr:l7()};function go(e){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},go(e)}function F4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function R4(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?F4(Object(n),!0).forEach(function(a){Uv(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function c7(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function d7(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OA(a.key),a)}}function u7(e,r,n){return r&&d7(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m7(e,r,n){return r=_u(r),p7(e,EA()?Reflect.construct(r,n||[],_u(e).constructor):r.apply(e,n))}function p7(e,r){if(r&&(go(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h7(e)}function h7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EA=function(){return!!e})()}function _u(e){return _u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_u(e)}function f7(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ny(e,r)}function ny(e,r){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ny(e,r)}function Uv(e,r,n){return r=OA(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function OA(e){var r=x7(e,"string");return go(r)=="symbol"?r:r+""}function x7(e,r){if(go(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(go(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function g7(e){return e.dataKey}function b7(e,r){return X.isValidElement(e)?X.cloneElement(e,r):typeof e=="function"?X.createElement(e,r):X.createElement(HL,r)}var Bt=(function(e){function r(){return c7(this,r),m7(this,r,arguments)}return f7(r,e),u7(r,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,d=a.animationEasing,u=a.content,m=a.coordinate,p=a.filterNull,f=a.isAnimationActive,x=a.offset,b=a.payload,y=a.payloadUniqBy,g=a.position,j=a.reverseDirection,k=a.useTranslate3d,S=a.viewBox,A=a.wrapperStyle,w=b??[];p&&w.length&&(w=bA(b.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),y,g7));var E=w.length>0;return X.createElement(o7,{allowEscapeViewBox:i,animationDuration:l,animationEasing:d,isAnimationActive:f,active:s,coordinate:m,hasPayload:E,offset:x,position:g,reverseDirection:j,useTranslate3d:k,viewBox:S,wrapperStyle:A},b7(u,R4(R4({},this.props),{},{payload:w})))}}])})(N.PureComponent);Uv(Bt,"displayName","Tooltip");Uv(Bt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ua.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Jg,$4;function y7(){if($4)return Jg;$4=1;var e=Yn(),r=function(){return e.Date.now()};return Jg=r,Jg}var Zg,z4;function v7(){if(z4)return Zg;z4=1;var e=/\s/;function r(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return Zg=r,Zg}var Qg,B4;function j7(){if(B4)return Qg;B4=1;var e=v7(),r=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(r,"")}return Qg=n,Qg}var eb,W4;function TA(){if(W4)return eb;W4=1;var e=j7(),r=Jn(),n=Uo(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(m){if(typeof m=="number")return m;if(n(m))return a;if(r(m)){var p=typeof m.valueOf=="function"?m.valueOf():m;m=r(p)?p+"":p}if(typeof m!="string")return m===0?m:+m;m=e(m);var f=i.test(m);return f||l.test(m)?d(m.slice(2),f?2:8):s.test(m)?a:+m}return eb=u,eb}var tb,U4;function w7(){if(U4)return tb;U4=1;var e=Jn(),r=y7(),n=TA(),a="Expected a function",s=Math.max,i=Math.min;function l(d,u,m){var p,f,x,b,y,g,j=0,k=!1,S=!1,A=!0;if(typeof d!="function")throw new TypeError(a);u=n(u)||0,e(m)&&(k=!!m.leading,S="maxWait"in m,x=S?s(n(m.maxWait)||0,u):x,A="trailing"in m?!!m.trailing:A);function w(z){var W=p,R=f;return p=f=void 0,j=z,b=d.apply(R,W),b}function E(z){return j=z,y=setTimeout(D,u),k?w(z):b}function T(z){var W=z-g,R=z-j,H=u-W;return S?i(H,x-R):H}function O(z){var W=z-g,R=z-j;return g===void 0||W>=u||W<0||S&&R>=x}function D(){var z=r();if(O(z))return I(z);y=setTimeout(D,T(z))}function I(z){return y=void 0,A&&p?w(z):(p=f=void 0,b)}function M(){y!==void 0&&clearTimeout(y),j=0,p=g=f=y=void 0}function L(){return y===void 0?b:I(r())}function B(){var z=r(),W=O(z);if(p=arguments,f=this,g=z,W){if(y===void 0)return E(g);if(S)return clearTimeout(y),y=setTimeout(D,u),w(g)}return y===void 0&&(y=setTimeout(D,u)),b}return B.cancel=M,B.flush=L,B}return tb=l,tb}var rb,q4;function N7(){if(q4)return rb;q4=1;var e=w7(),r=Jn(),n="Expected a function";function a(s,i,l){var d=!0,u=!0;if(typeof s!="function")throw new TypeError(n);return r(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),e(s,i,{leading:d,maxWait:i,trailing:u})}return rb=a,rb}var k7=N7();const PA=jt(k7);function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oc(e)}function V4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function iu(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?V4(Object(n),!0).forEach(function(a){S7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function S7(e,r,n){return r=C7(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function C7(e){var r=A7(e,"string");return oc(r)=="symbol"?r:r+""}function A7(e,r){if(oc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function E7(e,r){return D7(e)||P7(e,r)||T7(e,r)||O7()}function O7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T7(e,r){if(e){if(typeof e=="string")return H4(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H4(e,r)}}function H4(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function P7(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function D7(e){if(Array.isArray(e))return e}var Fr=N.forwardRef(function(e,r){var n=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,l=i===void 0?"100%":i,d=e.height,u=d===void 0?"100%":d,m=e.minWidth,p=m===void 0?0:m,f=e.minHeight,x=e.maxHeight,b=e.children,y=e.debounce,g=y===void 0?0:y,j=e.id,k=e.className,S=e.onResize,A=e.style,w=A===void 0?{}:A,E=N.useRef(null),T=N.useRef();T.current=S,N.useImperativeHandle(r,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var O=N.useState({containerWidth:s.width,containerHeight:s.height}),D=E7(O,2),I=D[0],M=D[1],L=N.useCallback(function(z,W){M(function(R){var H=Math.round(z),U=Math.round(W);return R.containerWidth===H&&R.containerHeight===U?R:{containerWidth:H,containerHeight:U}})},[]);N.useEffect(function(){var z=function(q){var Q,K=q[0].contentRect,F=K.width,_=K.height;L(F,_),(Q=T.current)===null||Q===void 0||Q.call(T,F,_)};g>0&&(z=PA(z,g,{trailing:!0,leading:!1}));var W=new ResizeObserver(z),R=E.current.getBoundingClientRect(),H=R.width,U=R.height;return L(H,U),W.observe(E.current),function(){W.disconnect()}},[L,g]);var B=N.useMemo(function(){var z=I.containerWidth,W=I.containerHeight;if(z<0||W<0)return null;Vn(ti(l)||ti(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Vn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=ti(l)?z:l,H=ti(u)?W:u;n&&n>0&&(R?H=R/n:H&&(R=H*n),x&&H>x&&(H=x)),Vn(R>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,H,l,u,p,f,n);var U=!Array.isArray(b)&&La(b.type).endsWith("Chart");return X.Children.map(b,function(q){return X.isValidElement(q)?N.cloneElement(q,iu({width:R,height:H},U?{style:iu({height:"100%",width:"100%",maxHeight:H,maxWidth:R},q.props.style)}:{})):q})},[n,b,u,x,f,p,I,l]);return X.createElement("div",{id:j?"".concat(j):void 0,className:st("recharts-responsive-container",k),style:iu(iu({},w),{},{width:l,height:u,minWidth:p,minHeight:f,maxHeight:x}),ref:E},B)}),Hn=function(e){return null};Hn.displayName="Cell";function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lc(e)}function G4(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ay(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?G4(Object(n),!0).forEach(function(a){I7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function I7(e,r,n){return r=M7(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function M7(e){var r=L7(e,"string");return lc(r)=="symbol"?r:r+""}function L7(e,r){if(lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(lc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Zi={widthCache:{},cacheCount:0},_7=2e3,F7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K4="recharts_measurement_span";function R7(e){var r=ay({},e);return Object.keys(r).forEach(function(n){r[n]||delete r[n]}),r}var Yl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ua.isSsr)return{width:0,height:0};var n=R7(r),a=JSON.stringify({text:e,copyStyle:n});if(Zi.widthCache[a])return Zi.widthCache[a];try{var s=document.getElementById(K4);s||(s=document.createElement("span"),s.setAttribute("id",K4),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=ay(ay({},F7),n);Object.assign(s.style,i),s.textContent="".concat(e);var l=s.getBoundingClientRect(),d={width:l.width,height:l.height};return Zi.widthCache[a]=d,++Zi.cacheCount>_7&&(Zi.cacheCount=0,Zi.widthCache={}),d}catch{return{width:0,height:0}}},$7=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cc(e)}function Fu(e,r){return U7(e)||W7(e,r)||B7(e,r)||z7()}function z7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B7(e,r){if(e){if(typeof e=="string")return Y4(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y4(e,r)}}function Y4(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function W7(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function U7(e){if(Array.isArray(e))return e}function q7(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function X4(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H7(a.key),a)}}function V7(e,r,n){return r&&X4(e.prototype,r),n&&X4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H7(e){var r=G7(e,"string");return cc(r)=="symbol"?r:r+""}function G7(e,r){if(cc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Z4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Y7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,DA={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},X7=Object.keys(DA),no="NaN";function J7(e,r){return e*DA[r]}var ou=(function(){function e(r,n){q7(this,e),this.num=r,this.unit=n,this.num=r,this.unit=n,Number.isNaN(r)&&(this.unit=""),n!==""&&!K7.test(n)&&(this.num=NaN,this.unit=""),X7.includes(n)&&(this.num=J7(r,n),this.unit="px")}return V7(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Y7.exec(r))!==null&&n!==void 0?n:[],s=Fu(a,3),i=s[1],l=s[2];return new e(parseFloat(i),l??"")}}])})();function IA(e){if(e.includes(no))return no;for(var r=e;r.includes("*")||r.includes("/");){var n,a=(n=J4.exec(r))!==null&&n!==void 0?n:[],s=Fu(a,4),i=s[1],l=s[2],d=s[3],u=ou.parse(i??""),m=ou.parse(d??""),p=l==="*"?u.multiply(m):u.divide(m);if(p.isNaN())return no;r=r.replace(J4,p.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var f,x=(f=Z4.exec(r))!==null&&f!==void 0?f:[],b=Fu(x,4),y=b[1],g=b[2],j=b[3],k=ou.parse(y??""),S=ou.parse(j??""),A=g==="+"?k.add(S):k.subtract(S);if(A.isNaN())return no;r=r.replace(Z4,A.toString())}return r}var Q4=/\(([^()]*)\)/;function Z7(e){for(var r=e;r.includes("(");){var n=Q4.exec(r),a=Fu(n,2),s=a[1];r=r.replace(Q4,IA(s))}return r}function Q7(e){var r=e.replace(/\s+/g,"");return r=Z7(r),r=IA(r),r}function e_(e){try{return Q7(e)}catch{return no}}function nb(e){var r=e_(e.slice(5,-1));return r===no?"":r}var t_=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],r_=["dx","dy","angle","className","breakAll"];function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sy.apply(this,arguments)}function eS(e,r){if(e==null)return{};var n=n_(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function n_(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function tS(e,r){return o_(e)||i_(e,r)||s_(e,r)||a_()}function a_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s_(e,r){if(e){if(typeof e=="string")return rS(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rS(e,r)}}function rS(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function i_(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function o_(e){if(Array.isArray(e))return e}var MA=/[ \f\n\r\t\v\u2028\u2029]+/,LA=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var s=[];nt(r)||(n?s=r.toString().split(""):s=r.toString().split(MA));var i=s.map(function(d){return{word:d,width:Yl(d,a).width}}),l=n?0:Yl("",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},l_=function(e,r,n,a,s){var i=e.maxLines,l=e.children,d=e.style,u=e.breakAll,m=Ce(i),p=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(W,R){var H=R.word,U=R.width,q=W[W.length-1];if(q&&(a==null||s||q.width+U+n<Number(a)))q.words.push(H),q.width+=U+n;else{var Q={words:[H],width:U};W.push(Q)}return W},[])},x=f(r),b=function(z){return z.reduce(function(W,R){return W.width>R.width?W:R})};if(!m)return x;for(var y="",g=function(z){var W=p.slice(0,z),R=LA({breakAll:u,style:d,children:W+y}).wordsWithComputedWidth,H=f(R),U=H.length>i||b(H).width>Number(a);return[U,H]},j=0,k=p.length-1,S=0,A;j<=k&&S<=p.length-1;){var w=Math.floor((j+k)/2),E=w-1,T=g(E),O=tS(T,2),D=O[0],I=O[1],M=g(w),L=tS(M,1),B=L[0];if(!D&&!B&&(j=w+1),D&&B&&(k=w-1),!D&&B){A=I;break}S++}return A||x},nS=function(e){var r=nt(e)?[]:e.toString().split(MA);return[{words:r}]},c_=function(e){var r=e.width,n=e.scaleToFit,a=e.children,s=e.style,i=e.breakAll,l=e.maxLines;if((r||n)&&!Ua.isSsr){var d,u,m=LA({breakAll:i,children:a,style:s});if(m){var p=m.wordsWithComputedWidth,f=m.spaceWidth;d=p,u=f}else return nS(a);return l_({breakAll:i,children:a,maxLines:l,style:s},d,u,r,n)}return nS(a)},aS="#808080",di=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,i=e.lineHeight,l=i===void 0?"1em":i,d=e.capHeight,u=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,f=e.textAnchor,x=f===void 0?"start":f,b=e.verticalAnchor,y=b===void 0?"end":b,g=e.fill,j=g===void 0?aS:g,k=eS(e,t_),S=N.useMemo(function(){return c_({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:p,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,p,k.style,k.width]),A=k.dx,w=k.dy,E=k.angle,T=k.className,O=k.breakAll,D=eS(k,r_);if(!cr(n)||!cr(s))return null;var I=n+(Ce(A)?A:0),M=s+(Ce(w)?w:0),L;switch(y){case"start":L=nb("calc(".concat(u,")"));break;case"middle":L=nb("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:L=nb("calc(".concat(S.length-1," * -").concat(l,")"));break}var B=[];if(p){var z=S[0].width,W=k.width;B.push("scale(".concat((Ce(W)?W/z:1)/z,")"))}return E&&B.push("rotate(".concat(E,", ").concat(I,", ").concat(M,")")),B.length&&(D.transform=B.join(" ")),X.createElement("text",sy({},Ge(D,!0),{x:I,y:M,className:st("recharts-text",T),textAnchor:x,fill:j.includes("url")?aS:j}),S.map(function(R,H){var U=R.words.join(O?"":" ");return X.createElement("tspan",{x:I,dy:H===0?L:l,key:"".concat(U,"-").concat(H)},U)}))};function ks(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function d_(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function qv(e){let r,n,a;e.length!==2?(r=ks,n=(d,u)=>ks(e(d),u),a=(d,u)=>e(d)-u):(r=e===ks||e===d_?e:u_,n=e,a=e);function s(d,u,m=0,p=d.length){if(m<p){if(r(u,u)!==0)return p;do{const f=m+p>>>1;n(d[f],u)<0?m=f+1:p=f}while(m<p)}return m}function i(d,u,m=0,p=d.length){if(m<p){if(r(u,u)!==0)return p;do{const f=m+p>>>1;n(d[f],u)<=0?m=f+1:p=f}while(m<p)}return m}function l(d,u,m=0,p=d.length){const f=s(d,u,m,p-1);return f>m&&a(d[f-1],u)>-a(d[f],u)?f-1:f}return{left:s,center:l,right:i}}function u_(){return 0}function _A(e){return e===null?NaN:+e}function*m_(e,r){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const p_=qv(ks),zc=p_.right;qv(_A).center;class sS extends Map{constructor(r,n=x_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[a,s]of r)this.set(a,s)}get(r){return super.get(iS(this,r))}has(r){return super.has(iS(this,r))}set(r,n){return super.set(h_(this,r),n)}delete(r){return super.delete(f_(this,r))}}function iS({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):n}function h_({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function f_({_intern:e,_key:r},n){const a=r(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function x_(e){return e!==null&&typeof e=="object"?e.valueOf():e}function g_(e=ks){if(e===ks)return FA;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,n)=>{const a=e(r,n);return a||a===0?a:(e(n,n)===0)-(e(r,r)===0)}}function FA(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const b_=Math.sqrt(50),y_=Math.sqrt(10),v_=Math.sqrt(2);function Ru(e,r,n){const a=(r-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=b_?10:i>=y_?5:i>=v_?2:1;let d,u,m;return s<0?(m=Math.pow(10,-s)/l,d=Math.round(e*m),u=Math.round(r*m),d/m<e&&++d,u/m>r&&--u,m=-m):(m=Math.pow(10,s)*l,d=Math.round(e/m),u=Math.round(r/m),d*m<e&&++d,u*m>r&&--u),u<d&&.5<=n&&n<2?Ru(e,r,n*2):[d,u,m]}function iy(e,r,n){if(r=+r,e=+e,n=+n,!(n>0))return[];if(e===r)return[e];const a=r<e,[s,i,l]=a?Ru(r,e,n):Ru(e,r,n);if(!(i>=s))return[];const d=i-s+1,u=new Array(d);if(a)if(l<0)for(let m=0;m<d;++m)u[m]=(i-m)/-l;else for(let m=0;m<d;++m)u[m]=(i-m)*l;else if(l<0)for(let m=0;m<d;++m)u[m]=(s+m)/-l;else for(let m=0;m<d;++m)u[m]=(s+m)*l;return u}function oy(e,r,n){return r=+r,e=+e,n=+n,Ru(e,r,n)[2]}function ly(e,r,n){r=+r,e=+e,n=+n;const a=r<e,s=a?oy(r,e,n):oy(e,r,n);return(a?-1:1)*(s<0?1/-s:s)}function oS(e,r){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function lS(e,r){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function RA(e,r,n=0,a=1/0,s){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=r&&r<=a))return e;for(s=s===void 0?FA:g_(s);a>n;){if(a-n>600){const u=a-n+1,m=r-n+1,p=Math.log(u),f=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*f*(u-f)/u)*(m-u/2<0?-1:1),b=Math.max(n,Math.floor(r-m*f/u+x)),y=Math.min(a,Math.floor(r+(u-m)*f/u+x));RA(e,r,b,y,s)}const i=e[r];let l=n,d=a;for(_l(e,n,r),s(e[a],i)>0&&_l(e,n,a);l<d;){for(_l(e,l,d),++l,--d;s(e[l],i)<0;)++l;for(;s(e[d],i)>0;)--d}s(e[n],i)===0?_l(e,n,d):(++d,_l(e,d,a)),d<=r&&(n=d+1),r<=d&&(a=d-1)}return e}function _l(e,r,n){const a=e[r];e[r]=e[n],e[n]=a}function j_(e,r,n){if(e=Float64Array.from(m_(e)),!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return lS(e);if(r>=1)return oS(e);var a,s=(a-1)*r,i=Math.floor(s),l=oS(RA(e,i).subarray(0,i+1)),d=lS(e.subarray(i+1));return l+(d-l)*(s-i)}}function w_(e,r,n=_A){if(!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return+n(e[0],0,e);if(r>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*r,i=Math.floor(s),l=+n(e[i],i,e),d=+n(e[i+1],i+1,e);return l+(d-l)*(s-i)}}function N_(e,r,n){e=+e,r=+r,n=(s=arguments.length)<2?(r=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((r-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function En(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function qa(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const cy=Symbol("implicit");function Vv(){var e=new sS,r=[],n=[],a=cy;function s(i){let l=e.get(i);if(l===void 0){if(a!==cy)return a;e.set(i,l=r.push(i)-1)}return n[l%n.length]}return s.domain=function(i){if(!arguments.length)return r.slice();r=[],e=new sS;for(const l of i)e.has(l)||e.set(l,r.push(l)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return Vv(r,n).unknown(a)},En.apply(s,arguments),s}function dc(){var e=Vv().unknown(void 0),r=e.domain,n=e.range,a=0,s=1,i,l,d=!1,u=0,m=0,p=.5;delete e.unknown;function f(){var x=r().length,b=s<a,y=b?s:a,g=b?a:s;i=(g-y)/Math.max(1,x-u+m*2),d&&(i=Math.floor(i)),y+=(g-y-i*(x-u))*p,l=i*(1-u),d&&(y=Math.round(y),l=Math.round(l));var j=N_(x).map(function(k){return y+i*k});return n(b?j.reverse():j)}return e.domain=function(x){return arguments.length?(r(x),f()):r()},e.range=function(x){return arguments.length?([a,s]=x,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(x){return[a,s]=x,a=+a,s=+s,d=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(x){return arguments.length?(d=!!x,f()):d},e.padding=function(x){return arguments.length?(u=Math.min(1,m=+x),f()):u},e.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),f()):u},e.paddingOuter=function(x){return arguments.length?(m=+x,f()):m},e.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),f()):p},e.copy=function(){return dc(r(),[a,s]).round(d).paddingInner(u).paddingOuter(m).align(p)},En.apply(f(),arguments)}function $A(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $A(r())},e}function Xl(){return $A(dc.apply(null,arguments).paddingInner(1))}function Hv(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function zA(e,r){var n=Object.create(e.prototype);for(var a in r)n[a]=r[a];return n}function Bc(){}var uc=.7,$u=1/uc,co="\\s*([+-]?\\d+)\\s*",mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k_=/^#([0-9a-f]{3,8})$/,S_=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),C_=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),A_=new RegExp(`^rgba\\(${co},${co},${co},${mc}\\)$`),E_=new RegExp(`^rgba\\(${la},${la},${la},${mc}\\)$`),O_=new RegExp(`^hsl\\(${mc},${la},${la}\\)$`),T_=new RegExp(`^hsla\\(${mc},${la},${la},${mc}\\)$`),cS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(Bc,pc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dS,formatHex:dS,formatHex8:P_,formatHsl:D_,formatRgb:uS,toString:uS});function dS(){return this.rgb().formatHex()}function P_(){return this.rgb().formatHex8()}function D_(){return BA(this).formatHsl()}function uS(){return this.rgb().formatRgb()}function pc(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=k_.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?mS(r):n===3?new Kr(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?lu(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?lu(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=S_.exec(e))?new Kr(r[1],r[2],r[3],1):(r=C_.exec(e))?new Kr(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=A_.exec(e))?lu(r[1],r[2],r[3],r[4]):(r=E_.exec(e))?lu(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=O_.exec(e))?fS(r[1],r[2]/100,r[3]/100,1):(r=T_.exec(e))?fS(r[1],r[2]/100,r[3]/100,r[4]):cS.hasOwnProperty(e)?mS(cS[e]):e==="transparent"?new Kr(NaN,NaN,NaN,0):null}function mS(e){return new Kr(e>>16&255,e>>8&255,e&255,1)}function lu(e,r,n,a){return a<=0&&(e=r=n=NaN),new Kr(e,r,n,a)}function I_(e){return e instanceof Bc||(e=pc(e)),e?(e=e.rgb(),new Kr(e.r,e.g,e.b,e.opacity)):new Kr}function dy(e,r,n,a){return arguments.length===1?I_(e):new Kr(e,r,n,a??1)}function Kr(e,r,n,a){this.r=+e,this.g=+r,this.b=+n,this.opacity=+a}Hv(Kr,dy,zA(Bc,{brighter(e){return e=e==null?$u:Math.pow($u,e),new Kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new Kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kr(oi(this.r),oi(this.g),oi(this.b),zu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pS,formatHex:pS,formatHex8:M_,formatRgb:hS,toString:hS}));function pS(){return`#${ri(this.r)}${ri(this.g)}${ri(this.b)}`}function M_(){return`#${ri(this.r)}${ri(this.g)}${ri(this.b)}${ri((isNaN(this.opacity)?1:this.opacity)*255)}`}function hS(){const e=zu(this.opacity);return`${e===1?"rgb(":"rgba("}${oi(this.r)}, ${oi(this.g)}, ${oi(this.b)}${e===1?")":`, ${e})`}`}function zu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ri(e){return e=oi(e),(e<16?"0":"")+e.toString(16)}function fS(e,r,n,a){return a<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new qn(e,r,n,a)}function BA(e){if(e instanceof qn)return new qn(e.h,e.s,e.l,e.opacity);if(e instanceof Bc||(e=pc(e)),!e)return new qn;if(e instanceof qn)return e;e=e.rgb();var r=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(r,n,a),i=Math.max(r,n,a),l=NaN,d=i-s,u=(i+s)/2;return d?(r===i?l=(n-a)/d+(n<a)*6:n===i?l=(a-r)/d+2:l=(r-n)/d+4,d/=u<.5?i+s:2-i-s,l*=60):d=u>0&&u<1?0:l,new qn(l,d,u,e.opacity)}function L_(e,r,n,a){return arguments.length===1?BA(e):new qn(e,r,n,a??1)}function qn(e,r,n,a){this.h=+e,this.s=+r,this.l=+n,this.opacity=+a}Hv(qn,L_,zA(Bc,{brighter(e){return e=e==null?$u:Math.pow($u,e),new qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uc:Math.pow(uc,e),new qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,s=2*n-a;return new Kr(ab(e>=240?e-240:e+120,s,a),ab(e,s,a),ab(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new qn(xS(this.h),cu(this.s),cu(this.l),zu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zu(this.opacity);return`${e===1?"hsl(":"hsla("}${xS(this.h)}, ${cu(this.s)*100}%, ${cu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xS(e){return e=(e||0)%360,e<0?e+360:e}function cu(e){return Math.max(0,Math.min(1,e||0))}function ab(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}const Gv=e=>()=>e;function __(e,r){return function(n){return e+n*r}}function F_(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(a){return Math.pow(e+a*r,n)}}function R_(e){return(e=+e)==1?WA:function(r,n){return n-r?F_(r,n,e):Gv(isNaN(r)?n:r)}}function WA(e,r){var n=r-e;return n?__(e,n):Gv(isNaN(e)?r:e)}const gS=(function e(r){var n=R_(r);function a(s,i){var l=n((s=dy(s)).r,(i=dy(i)).r),d=n(s.g,i.g),u=n(s.b,i.b),m=WA(s.opacity,i.opacity);return function(p){return s.r=l(p),s.g=d(p),s.b=u(p),s.opacity=m(p),s+""}}return a.gamma=e,a})(1);function $_(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,a=r.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+r[s]*i;return a}}function z_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function B_(e,r){var n=r?r.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),l;for(l=0;l<a;++l)s[l]=Yo(e[l],r[l]);for(;l<n;++l)i[l]=r[l];return function(d){for(l=0;l<a;++l)i[l]=s[l](d);return i}}function W_(e,r){var n=new Date;return e=+e,r=+r,function(a){return n.setTime(e*(1-a)+r*a),n}}function Bu(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function U_(e,r){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in e?n[s]=Yo(e[s],r[s]):a[s]=r[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var uy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sb=new RegExp(uy.source,"g");function q_(e){return function(){return e}}function V_(e){return function(r){return e(r)+""}}function H_(e,r){var n=uy.lastIndex=sb.lastIndex=0,a,s,i,l=-1,d=[],u=[];for(e=e+"",r=r+"";(a=uy.exec(e))&&(s=sb.exec(r));)(i=s.index)>n&&(i=r.slice(n,i),d[l]?d[l]+=i:d[++l]=i),(a=a[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,u.push({i:l,x:Bu(a,s)})),n=sb.lastIndex;return n<r.length&&(i=r.slice(n),d[l]?d[l]+=i:d[++l]=i),d.length<2?u[0]?V_(u[0].x):q_(r):(r=u.length,function(m){for(var p=0,f;p<r;++p)d[(f=u[p]).i]=f.x(m);return d.join("")})}function Yo(e,r){var n=typeof r,a;return r==null||n==="boolean"?Gv(r):(n==="number"?Bu:n==="string"?(a=pc(r))?(r=a,gS):H_:r instanceof pc?gS:r instanceof Date?W_:z_(r)?$_:Array.isArray(r)?B_:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?U_:Bu)(e,r)}function Kv(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}function G_(e,r){r===void 0&&(r=e,e=Yo);for(var n=0,a=r.length-1,s=r[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=r[++n]);return function(l){var d=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[d](l-d)}}function K_(e){return function(){return e}}function Wu(e){return+e}var bS=[0,1];function _r(e){return e}function my(e,r){return(r-=e=+e)?function(n){return(n-e)/r}:K_(isNaN(r)?NaN:.5)}function Y_(e,r){var n;return e>r&&(n=e,e=r,r=n),function(a){return Math.max(e,Math.min(r,a))}}function X_(e,r,n){var a=e[0],s=e[1],i=r[0],l=r[1];return s<a?(a=my(s,a),i=n(l,i)):(a=my(a,s),i=n(i,l)),function(d){return i(a(d))}}function J_(e,r,n){var a=Math.min(e.length,r.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++l<a;)s[l]=my(e[l],e[l+1]),i[l]=n(r[l],r[l+1]);return function(d){var u=zc(e,d,1,a)-1;return i[u](s[u](d))}}function Wc(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hm(){var e=bS,r=bS,n=Yo,a,s,i,l=_r,d,u,m;function p(){var x=Math.min(e.length,r.length);return l!==_r&&(l=Y_(e[0],e[x-1])),d=x>2?J_:X_,u=m=null,f}function f(x){return x==null||isNaN(x=+x)?i:(u||(u=d(e.map(a),r,n)))(a(l(x)))}return f.invert=function(x){return l(s((m||(m=d(r,e.map(a),Bu)))(x)))},f.domain=function(x){return arguments.length?(e=Array.from(x,Wu),p()):e.slice()},f.range=function(x){return arguments.length?(r=Array.from(x),p()):r.slice()},f.rangeRound=function(x){return r=Array.from(x),n=Kv,p()},f.clamp=function(x){return arguments.length?(l=x?!0:_r,p()):l!==_r},f.interpolate=function(x){return arguments.length?(n=x,p()):n},f.unknown=function(x){return arguments.length?(i=x,f):i},function(x,b){return a=x,s=b,p()}}function Yv(){return Hm()(_r,_r)}function Z_(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Uu(e,r){if((n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function bo(e){return e=Uu(Math.abs(e)),e?e[1]:NaN}function Q_(e,r){return function(n,a){for(var s=n.length,i=[],l=0,d=e[0],u=0;s>0&&d>0&&(u+d+1>a&&(d=Math.max(1,a-u)),i.push(n.substring(s-=d,s+d)),!((u+=d+1)>a));)d=e[l=(l+1)%e.length];return i.reverse().join(r)}}function e9(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}var t9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hc(e){if(!(r=t9.exec(e)))throw new Error("invalid format: "+e);var r;return new Xv({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}hc.prototype=Xv.prototype;function Xv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r9(e){e:for(var r=e.length,n=1,a=-1,s;n<r;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var UA;function n9(e,r){var n=Uu(e,r);if(!n)return e+"";var a=n[0],s=n[1],i=s-(UA=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Uu(e,Math.max(0,r+i-1))[0]}function yS(e,r){var n=Uu(e,r);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const vS={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Z_,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>yS(e*100,r),r:yS,s:n9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jS(e){return e}var wS=Array.prototype.map,NS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a9(e){var r=e.grouping===void 0||e.thousands===void 0?jS:Q_(wS.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?jS:e9(wS.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function m(f){f=hc(f);var x=f.fill,b=f.align,y=f.sign,g=f.symbol,j=f.zero,k=f.width,S=f.comma,A=f.precision,w=f.trim,E=f.type;E==="n"?(S=!0,E="g"):vS[E]||(A===void 0&&(A=12),w=!0,E="g"),(j||x==="0"&&b==="=")&&(j=!0,x="0",b="=");var T=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",O=g==="$"?a:/[%p]/.test(E)?l:"",D=vS[E],I=/[defgprs%]/.test(E);A=A===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function M(L){var B=T,z=O,W,R,H;if(E==="c")z=D(L)+z,L="";else{L=+L;var U=L<0||1/L<0;if(L=isNaN(L)?u:D(Math.abs(L),A),w&&(L=r9(L)),U&&+L==0&&y!=="+"&&(U=!1),B=(U?y==="("?y:d:y==="-"||y==="("?"":y)+B,z=(E==="s"?NS[8+UA/3]:"")+z+(U&&y==="("?")":""),I){for(W=-1,R=L.length;++W<R;)if(H=L.charCodeAt(W),48>H||H>57){z=(H===46?s+L.slice(W+1):L.slice(W))+z,L=L.slice(0,W);break}}}S&&!j&&(L=r(L,1/0));var q=B.length+L.length+z.length,Q=q<k?new Array(k-q+1).join(x):"";switch(S&&j&&(L=r(Q+L,Q.length?k-z.length:1/0),Q=""),b){case"<":L=B+L+z+Q;break;case"=":L=B+Q+L+z;break;case"^":L=Q.slice(0,q=Q.length>>1)+B+L+z+Q.slice(q);break;default:L=Q+B+L+z;break}return i(L)}return M.toString=function(){return f+""},M}function p(f,x){var b=m((f=hc(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(bo(x)/3)))*3,g=Math.pow(10,-y),j=NS[8+y/3];return function(k){return b(g*k)+j}}return{format:m,formatPrefix:p}}var du,Jv,qA;s9({thousands:",",grouping:[3],currency:["$",""]});function s9(e){return du=a9(e),Jv=du.format,qA=du.formatPrefix,du}function i9(e){return Math.max(0,-bo(Math.abs(e)))}function o9(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bo(r)/3)))*3-bo(Math.abs(e)))}function l9(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,bo(r)-bo(e))+1}function VA(e,r,n,a){var s=ly(e,r,n),i;switch(a=hc(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(r));return a.precision==null&&!isNaN(i=o9(s,l))&&(a.precision=i),qA(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=l9(s,Math.max(Math.abs(e),Math.abs(r))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=i9(s))&&(a.precision=i-(a.type==="%")*2);break}}return Jv(a)}function Es(e){var r=e.domain;return e.ticks=function(n){var a=r();return iy(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=r();return VA(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=r(),s=0,i=a.length-1,l=a[s],d=a[i],u,m,p=10;for(d<l&&(m=l,l=d,d=m,m=s,s=i,i=m);p-- >0;){if(m=oy(l,d,n),m===u)return a[s]=l,a[i]=d,r(a);if(m>0)l=Math.floor(l/m)*m,d=Math.ceil(d/m)*m;else if(m<0)l=Math.ceil(l*m)/m,d=Math.floor(d*m)/m;else break;u=m}return e},e}function qu(){var e=Yv();return e.copy=function(){return Wc(e,qu())},En.apply(e,arguments),Es(e)}function HA(e){var r;function n(a){return a==null||isNaN(a=+a)?r:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Wu),n):e.slice()},n.unknown=function(a){return arguments.length?(r=a,n):r},n.copy=function(){return HA(e).unknown(r)},e=arguments.length?Array.from(e,Wu):[0,1],Es(n)}function GA(e,r){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],l;return i<s&&(l=n,n=a,a=l,l=s,s=i,i=l),e[n]=r.floor(s),e[a]=r.ceil(i),e}function kS(e){return Math.log(e)}function SS(e){return Math.exp(e)}function c9(e){return-Math.log(-e)}function d9(e){return-Math.exp(-e)}function u9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function m9(e){return e===10?u9:e===Math.E?Math.exp:r=>Math.pow(e,r)}function p9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function CS(e){return(r,n)=>-e(-r,n)}function Zv(e){const r=e(kS,SS),n=r.domain;let a=10,s,i;function l(){return s=p9(a),i=m9(a),n()[0]<0?(s=CS(s),i=CS(i),e(c9,d9)):e(kS,SS),r}return r.base=function(d){return arguments.length?(a=+d,l()):a},r.domain=function(d){return arguments.length?(n(d),l()):n()},r.ticks=d=>{const u=n();let m=u[0],p=u[u.length-1];const f=p<m;f&&([m,p]=[p,m]);let x=s(m),b=s(p),y,g;const j=d==null?10:+d;let k=[];if(!(a%1)&&b-x<j){if(x=Math.floor(x),b=Math.ceil(b),m>0){for(;x<=b;++x)for(y=1;y<a;++y)if(g=x<0?y/i(-x):y*i(x),!(g<m)){if(g>p)break;k.push(g)}}else for(;x<=b;++x)for(y=a-1;y>=1;--y)if(g=x>0?y/i(-x):y*i(x),!(g<m)){if(g>p)break;k.push(g)}k.length*2<j&&(k=iy(m,p,j))}else k=iy(x,b,Math.min(b-x,j)).map(i);return f?k.reverse():k},r.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=a===10?"s":","),typeof u!="function"&&(!(a%1)&&(u=hc(u)).precision==null&&(u.trim=!0),u=Jv(u)),d===1/0)return u;const m=Math.max(1,a*d/r.ticks().length);return p=>{let f=p/i(Math.round(s(p)));return f*a<a-.5&&(f*=a),f<=m?u(p):""}},r.nice=()=>n(GA(n(),{floor:d=>i(Math.floor(s(d))),ceil:d=>i(Math.ceil(s(d)))})),r}function KA(){const e=Zv(Hm()).domain([1,10]);return e.copy=()=>Wc(e,KA()).base(e.base()),En.apply(e,arguments),e}function AS(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function ES(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function Qv(e){var r=1,n=e(AS(r),ES(r));return n.constant=function(a){return arguments.length?e(AS(r=+a),ES(r)):r},Es(n)}function YA(){var e=Qv(Hm());return e.copy=function(){return Wc(e,YA()).constant(e.constant())},En.apply(e,arguments)}function OS(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function h9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function f9(e){return e<0?-e*e:e*e}function ej(e){var r=e(_r,_r),n=1;function a(){return n===1?e(_r,_r):n===.5?e(h9,f9):e(OS(n),OS(1/n))}return r.exponent=function(s){return arguments.length?(n=+s,a()):n},Es(r)}function tj(){var e=ej(Hm());return e.copy=function(){return Wc(e,tj()).exponent(e.exponent())},En.apply(e,arguments),e}function x9(){return tj.apply(null,arguments).exponent(.5)}function TS(e){return Math.sign(e)*e*e}function g9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function XA(){var e=Yv(),r=[0,1],n=!1,a;function s(i){var l=g9(e(i));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(i){return e.invert(TS(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((r=Array.from(i,Wu)).map(TS)),s):r.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return XA(e.domain(),r).round(n).clamp(e.clamp()).unknown(a)},En.apply(s,arguments),Es(s)}function JA(){var e=[],r=[],n=[],a;function s(){var l=0,d=Math.max(1,r.length);for(n=new Array(d-1);++l<d;)n[l-1]=w_(e,l/d);return i}function i(l){return l==null||isNaN(l=+l)?a:r[zc(n,l)]}return i.invertExtent=function(l){var d=r.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ks),s()},i.range=function(l){return arguments.length?(r=Array.from(l),s()):r.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return JA().domain(e).range(r).unknown(a)},En.apply(i,arguments)}function ZA(){var e=0,r=1,n=1,a=[.5],s=[0,1],i;function l(u){return u!=null&&u<=u?s[zc(a,u,0,n)]:i}function d(){var u=-1;for(a=new Array(n);++u<n;)a[u]=((u+1)*r-(u-n)*e)/(n+1);return l}return l.domain=function(u){return arguments.length?([e,r]=u,e=+e,r=+r,d()):[e,r]},l.range=function(u){return arguments.length?(n=(s=Array.from(u)).length-1,d()):s.slice()},l.invertExtent=function(u){var m=s.indexOf(u);return m<0?[NaN,NaN]:m<1?[e,a[0]]:m>=n?[a[n-1],r]:[a[m-1],a[m]]},l.unknown=function(u){return arguments.length&&(i=u),l},l.thresholds=function(){return a.slice()},l.copy=function(){return ZA().domain([e,r]).range(s).unknown(i)},En.apply(Es(l),arguments)}function QA(){var e=[.5],r=[0,1],n,a=1;function s(i){return i!=null&&i<=i?r[zc(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,r.length-1),s):e.slice()},s.range=function(i){return arguments.length?(r=Array.from(i),a=Math.min(e.length,r.length-1),s):r.slice()},s.invertExtent=function(i){var l=r.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return QA().domain(e).range(r).unknown(n)},En.apply(s,arguments)}const ib=new Date,ob=new Date;function dr(e,r,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),r(i,1),e(i),i),s.round=i=>{const l=s(i),d=s.ceil(i);return i-l<d-i?l:d},s.offset=(i,l)=>(r(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,d)=>{const u=[];if(i=s.ceil(i),d=d==null?1:Math.floor(d),!(i<l)||!(d>0))return u;let m;do u.push(m=new Date(+i)),r(i,d),e(i);while(m<i&&i<l);return u},s.filter=i=>dr(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;r(l,-1),!i(l););else for(;--d>=0;)for(;r(l,1),!i(l););}),n&&(s.count=(i,l)=>(ib.setTime(+i),ob.setTime(+l),e(ib),e(ob),Math.floor(n(ib,ob))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Vu=dr(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);Vu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dr(r=>{r.setTime(Math.floor(r/e)*e)},(r,n)=>{r.setTime(+r+n*e)},(r,n)=>(n-r)/e):Vu);Vu.range;const Da=1e3,wn=Da*60,Ia=wn*60,Ra=Ia*24,rj=Ra*7,PS=Ra*30,lb=Ra*365,ni=dr(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*Da)},(e,r)=>(r-e)/Da,e=>e.getUTCSeconds());ni.range;const nj=dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Da)},(e,r)=>{e.setTime(+e+r*wn)},(e,r)=>(r-e)/wn,e=>e.getMinutes());nj.range;const aj=dr(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*wn)},(e,r)=>(r-e)/wn,e=>e.getUTCMinutes());aj.range;const sj=dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Da-e.getMinutes()*wn)},(e,r)=>{e.setTime(+e+r*Ia)},(e,r)=>(r-e)/Ia,e=>e.getHours());sj.range;const ij=dr(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*Ia)},(e,r)=>(r-e)/Ia,e=>e.getUTCHours());ij.range;const Uc=dr(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*wn)/Ra,e=>e.getDate()-1);Uc.range;const Gm=dr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Ra,e=>e.getUTCDate()-1);Gm.range;const eE=dr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Ra,e=>Math.floor(e/Ra));eE.range;function gi(e){return dr(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*wn)/rj)}const Km=gi(0),Hu=gi(1),b9=gi(2),y9=gi(3),yo=gi(4),v9=gi(5),j9=gi(6);Km.range;Hu.range;b9.range;y9.range;yo.range;v9.range;j9.range;function bi(e){return dr(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/rj)}const Ym=bi(0),Gu=bi(1),w9=bi(2),N9=bi(3),vo=bi(4),k9=bi(5),S9=bi(6);Ym.range;Gu.range;w9.range;N9.range;vo.range;k9.range;S9.range;const oj=dr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oj.range;const lj=dr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lj.range;const $a=dr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());$a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dr(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*e)});$a.range;const za=dr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());za.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dr(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*e)});za.range;function tE(e,r,n,a,s,i){const l=[[ni,1,Da],[ni,5,5*Da],[ni,15,15*Da],[ni,30,30*Da],[i,1,wn],[i,5,5*wn],[i,15,15*wn],[i,30,30*wn],[s,1,Ia],[s,3,3*Ia],[s,6,6*Ia],[s,12,12*Ia],[a,1,Ra],[a,2,2*Ra],[n,1,rj],[r,1,PS],[r,3,3*PS],[e,1,lb]];function d(m,p,f){const x=p<m;x&&([m,p]=[p,m]);const b=f&&typeof f.range=="function"?f:u(m,p,f),y=b?b.range(m,+p+1):[];return x?y.reverse():y}function u(m,p,f){const x=Math.abs(p-m)/f,b=qv(([,,j])=>j).right(l,x);if(b===l.length)return e.every(ly(m/lb,p/lb,f));if(b===0)return Vu.every(Math.max(ly(m,p,f),1));const[y,g]=l[x/l[b-1][2]<l[b][2]/x?b-1:b];return y.every(g)}return[d,u]}const[C9,A9]=tE(za,lj,Ym,eE,ij,aj),[E9,O9]=tE($a,oj,Km,Uc,sj,nj);function cb(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function db(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fl(e,r,n){return{y:e,m:r,d:n,H:0,M:0,S:0,L:0}}function T9(e){var r=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,m=Rl(s),p=$l(s),f=Rl(i),x=$l(i),b=Rl(l),y=$l(l),g=Rl(d),j=$l(d),k=Rl(u),S=$l(u),A={a:U,A:q,b:Q,B:K,c:null,d:FS,e:FS,f:Q9,g:cF,G:uF,H:X9,I:J9,j:Z9,L:rE,m:eF,M:tF,p:F,q:_,Q:zS,s:BS,S:rF,u:nF,U:aF,V:sF,w:iF,W:oF,x:null,X:null,y:lF,Y:dF,Z:mF,"%":$S},w={a:G,A:Z,b:oe,B:le,c:null,d:RS,e:RS,f:xF,g:CF,G:EF,H:pF,I:hF,j:fF,L:aE,m:gF,M:bF,p:ge,q:ve,Q:zS,s:BS,S:yF,u:vF,U:jF,V:wF,w:NF,W:kF,x:null,X:null,y:SF,Y:AF,Z:OF,"%":$S},E={a:M,A:L,b:B,B:z,c:W,d:LS,e:LS,f:H9,g:MS,G:IS,H:_S,I:_S,j:W9,L:V9,m:B9,M:U9,p:I,q:z9,Q:K9,s:Y9,S:q9,u:L9,U:_9,V:F9,w:M9,W:R9,x:R,X:H,y:MS,Y:IS,Z:$9,"%":G9};A.x=T(n,A),A.X=T(a,A),A.c=T(r,A),w.x=T(n,w),w.X=T(a,w),w.c=T(r,w);function T(fe,Y){return function(ne){var ue=[],Ve=-1,Te=0,Pe=fe.length,Xe,pe,Oe;for(ne instanceof Date||(ne=new Date(+ne));++Ve<Pe;)fe.charCodeAt(Ve)===37&&(ue.push(fe.slice(Te,Ve)),(pe=DS[Xe=fe.charAt(++Ve)])!=null?Xe=fe.charAt(++Ve):pe=Xe==="e"?" ":"0",(Oe=Y[Xe])&&(Xe=Oe(ne,pe)),ue.push(Xe),Te=Ve+1);return ue.push(fe.slice(Te,Ve)),ue.join("")}}function O(fe,Y){return function(ne){var ue=Fl(1900,void 0,1),Ve=D(ue,fe,ne+="",0),Te,Pe;if(Ve!=ne.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Y&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Te=db(Fl(ue.y,0,1)),Pe=Te.getUTCDay(),Te=Pe>4||Pe===0?Gu.ceil(Te):Gu(Te),Te=Gm.offset(Te,(ue.V-1)*7),ue.y=Te.getUTCFullYear(),ue.m=Te.getUTCMonth(),ue.d=Te.getUTCDate()+(ue.w+6)%7):(Te=cb(Fl(ue.y,0,1)),Pe=Te.getDay(),Te=Pe>4||Pe===0?Hu.ceil(Te):Hu(Te),Te=Uc.offset(Te,(ue.V-1)*7),ue.y=Te.getFullYear(),ue.m=Te.getMonth(),ue.d=Te.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Pe="Z"in ue?db(Fl(ue.y,0,1)).getUTCDay():cb(Fl(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Pe+5)%7:ue.w+ue.U*7-(Pe+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,db(ue)):cb(ue)}}function D(fe,Y,ne,ue){for(var Ve=0,Te=Y.length,Pe=ne.length,Xe,pe;Ve<Te;){if(ue>=Pe)return-1;if(Xe=Y.charCodeAt(Ve++),Xe===37){if(Xe=Y.charAt(Ve++),pe=E[Xe in DS?Y.charAt(Ve++):Xe],!pe||(ue=pe(fe,ne,ue))<0)return-1}else if(Xe!=ne.charCodeAt(ue++))return-1}return ue}function I(fe,Y,ne){var ue=m.exec(Y.slice(ne));return ue?(fe.p=p.get(ue[0].toLowerCase()),ne+ue[0].length):-1}function M(fe,Y,ne){var ue=b.exec(Y.slice(ne));return ue?(fe.w=y.get(ue[0].toLowerCase()),ne+ue[0].length):-1}function L(fe,Y,ne){var ue=f.exec(Y.slice(ne));return ue?(fe.w=x.get(ue[0].toLowerCase()),ne+ue[0].length):-1}function B(fe,Y,ne){var ue=k.exec(Y.slice(ne));return ue?(fe.m=S.get(ue[0].toLowerCase()),ne+ue[0].length):-1}function z(fe,Y,ne){var ue=g.exec(Y.slice(ne));return ue?(fe.m=j.get(ue[0].toLowerCase()),ne+ue[0].length):-1}function W(fe,Y,ne){return D(fe,r,Y,ne)}function R(fe,Y,ne){return D(fe,n,Y,ne)}function H(fe,Y,ne){return D(fe,a,Y,ne)}function U(fe){return l[fe.getDay()]}function q(fe){return i[fe.getDay()]}function Q(fe){return u[fe.getMonth()]}function K(fe){return d[fe.getMonth()]}function F(fe){return s[+(fe.getHours()>=12)]}function _(fe){return 1+~~(fe.getMonth()/3)}function G(fe){return l[fe.getUTCDay()]}function Z(fe){return i[fe.getUTCDay()]}function oe(fe){return u[fe.getUTCMonth()]}function le(fe){return d[fe.getUTCMonth()]}function ge(fe){return s[+(fe.getUTCHours()>=12)]}function ve(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Y=T(fe+="",A);return Y.toString=function(){return fe},Y},parse:function(fe){var Y=O(fe+="",!1);return Y.toString=function(){return fe},Y},utcFormat:function(fe){var Y=T(fe+="",w);return Y.toString=function(){return fe},Y},utcParse:function(fe){var Y=O(fe+="",!0);return Y.toString=function(){return fe},Y}}}var DS={"-":"",_:" ",0:"0"},gr=/^\s*\d+/,P9=/^%/,D9=/[\\^$*+?|[\]().{}]/g;function gt(e,r,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(r)+s:s)}function I9(e){return e.replace(D9,"\\$&")}function Rl(e){return new RegExp("^(?:"+e.map(I9).join("|")+")","i")}function $l(e){return new Map(e.map((r,n)=>[r.toLowerCase(),n]))}function M9(e,r,n){var a=gr.exec(r.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function L9(e,r,n){var a=gr.exec(r.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function _9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function F9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function R9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function IS(e,r,n){var a=gr.exec(r.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function MS(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function $9(e,r,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function z9(e,r,n){var a=gr.exec(r.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function B9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function LS(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function W9(e,r,n){var a=gr.exec(r.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function _S(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function U9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function q9(e,r,n){var a=gr.exec(r.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function V9(e,r,n){var a=gr.exec(r.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function H9(e,r,n){var a=gr.exec(r.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function G9(e,r,n){var a=P9.exec(r.slice(n,n+1));return a?n+a[0].length:-1}function K9(e,r,n){var a=gr.exec(r.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function Y9(e,r,n){var a=gr.exec(r.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function FS(e,r){return gt(e.getDate(),r,2)}function X9(e,r){return gt(e.getHours(),r,2)}function J9(e,r){return gt(e.getHours()%12||12,r,2)}function Z9(e,r){return gt(1+Uc.count($a(e),e),r,3)}function rE(e,r){return gt(e.getMilliseconds(),r,3)}function Q9(e,r){return rE(e,r)+"000"}function eF(e,r){return gt(e.getMonth()+1,r,2)}function tF(e,r){return gt(e.getMinutes(),r,2)}function rF(e,r){return gt(e.getSeconds(),r,2)}function nF(e){var r=e.getDay();return r===0?7:r}function aF(e,r){return gt(Km.count($a(e)-1,e),r,2)}function nE(e){var r=e.getDay();return r>=4||r===0?yo(e):yo.ceil(e)}function sF(e,r){return e=nE(e),gt(yo.count($a(e),e)+($a(e).getDay()===4),r,2)}function iF(e){return e.getDay()}function oF(e,r){return gt(Hu.count($a(e)-1,e),r,2)}function lF(e,r){return gt(e.getFullYear()%100,r,2)}function cF(e,r){return e=nE(e),gt(e.getFullYear()%100,r,2)}function dF(e,r){return gt(e.getFullYear()%1e4,r,4)}function uF(e,r){var n=e.getDay();return e=n>=4||n===0?yo(e):yo.ceil(e),gt(e.getFullYear()%1e4,r,4)}function mF(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+gt(r/60|0,"0",2)+gt(r%60,"0",2)}function RS(e,r){return gt(e.getUTCDate(),r,2)}function pF(e,r){return gt(e.getUTCHours(),r,2)}function hF(e,r){return gt(e.getUTCHours()%12||12,r,2)}function fF(e,r){return gt(1+Gm.count(za(e),e),r,3)}function aE(e,r){return gt(e.getUTCMilliseconds(),r,3)}function xF(e,r){return aE(e,r)+"000"}function gF(e,r){return gt(e.getUTCMonth()+1,r,2)}function bF(e,r){return gt(e.getUTCMinutes(),r,2)}function yF(e,r){return gt(e.getUTCSeconds(),r,2)}function vF(e){var r=e.getUTCDay();return r===0?7:r}function jF(e,r){return gt(Ym.count(za(e)-1,e),r,2)}function sE(e){var r=e.getUTCDay();return r>=4||r===0?vo(e):vo.ceil(e)}function wF(e,r){return e=sE(e),gt(vo.count(za(e),e)+(za(e).getUTCDay()===4),r,2)}function NF(e){return e.getUTCDay()}function kF(e,r){return gt(Gu.count(za(e)-1,e),r,2)}function SF(e,r){return gt(e.getUTCFullYear()%100,r,2)}function CF(e,r){return e=sE(e),gt(e.getUTCFullYear()%100,r,2)}function AF(e,r){return gt(e.getUTCFullYear()%1e4,r,4)}function EF(e,r){var n=e.getUTCDay();return e=n>=4||n===0?vo(e):vo.ceil(e),gt(e.getUTCFullYear()%1e4,r,4)}function OF(){return"+0000"}function $S(){return"%"}function zS(e){return+e}function BS(e){return Math.floor(+e/1e3)}var Qi,iE,oE;TF({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function TF(e){return Qi=T9(e),iE=Qi.format,Qi.parse,oE=Qi.utcFormat,Qi.utcParse,Qi}function PF(e){return new Date(e)}function DF(e){return e instanceof Date?+e:+new Date(+e)}function cj(e,r,n,a,s,i,l,d,u,m){var p=Yv(),f=p.invert,x=p.domain,b=m(".%L"),y=m(":%S"),g=m("%I:%M"),j=m("%I %p"),k=m("%a %d"),S=m("%b %d"),A=m("%B"),w=m("%Y");function E(T){return(u(T)<T?b:d(T)<T?y:l(T)<T?g:i(T)<T?j:a(T)<T?s(T)<T?k:S:n(T)<T?A:w)(T)}return p.invert=function(T){return new Date(f(T))},p.domain=function(T){return arguments.length?x(Array.from(T,DF)):x().map(PF)},p.ticks=function(T){var O=x();return e(O[0],O[O.length-1],T??10)},p.tickFormat=function(T,O){return O==null?E:m(O)},p.nice=function(T){var O=x();return(!T||typeof T.range!="function")&&(T=r(O[0],O[O.length-1],T??10)),T?x(GA(O,T)):p},p.copy=function(){return Wc(p,cj(e,r,n,a,s,i,l,d,u,m))},p}function IF(){return En.apply(cj(E9,O9,$a,oj,Km,Uc,sj,nj,ni,iE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function MF(){return En.apply(cj(C9,A9,za,lj,Ym,Gm,ij,aj,ni,oE).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xm(){var e=0,r=1,n,a,s,i,l=_r,d=!1,u;function m(f){return f==null||isNaN(f=+f)?u:l(s===0?.5:(f=(i(f)-n)*s,d?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([e,r]=f,n=i(e=+e),a=i(r=+r),s=n===a?0:1/(a-n),m):[e,r]},m.clamp=function(f){return arguments.length?(d=!!f,m):d},m.interpolator=function(f){return arguments.length?(l=f,m):l};function p(f){return function(x){var b,y;return arguments.length?([b,y]=x,l=f(b,y),m):[l(0),l(1)]}}return m.range=p(Yo),m.rangeRound=p(Kv),m.unknown=function(f){return arguments.length?(u=f,m):u},function(f){return i=f,n=f(e),a=f(r),s=n===a?0:1/(a-n),m}}function Os(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lE(){var e=Es(Xm()(_r));return e.copy=function(){return Os(e,lE())},qa.apply(e,arguments)}function cE(){var e=Zv(Xm()).domain([1,10]);return e.copy=function(){return Os(e,cE()).base(e.base())},qa.apply(e,arguments)}function dE(){var e=Qv(Xm());return e.copy=function(){return Os(e,dE()).constant(e.constant())},qa.apply(e,arguments)}function dj(){var e=ej(Xm());return e.copy=function(){return Os(e,dj()).exponent(e.exponent())},qa.apply(e,arguments)}function LF(){return dj.apply(null,arguments).exponent(.5)}function uE(){var e=[],r=_r;function n(a){if(a!=null&&!isNaN(a=+a))return r((zc(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ks),n},n.interpolator=function(a){return arguments.length?(r=a,n):r},n.range=function(){return e.map((a,s)=>r(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>j_(e,i/a))},n.copy=function(){return uE(r).domain(e)},qa.apply(n,arguments)}function Jm(){var e=0,r=.5,n=1,a=1,s,i,l,d,u,m=_r,p,f=!1,x;function b(g){return isNaN(g=+g)?x:(g=.5+((g=+p(g))-i)*(a*g<a*i?d:u),m(f?Math.max(0,Math.min(1,g)):g))}b.domain=function(g){return arguments.length?([e,r,n]=g,s=p(e=+e),i=p(r=+r),l=p(n=+n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,b):[e,r,n]},b.clamp=function(g){return arguments.length?(f=!!g,b):f},b.interpolator=function(g){return arguments.length?(m=g,b):m};function y(g){return function(j){var k,S,A;return arguments.length?([k,S,A]=j,m=G_(g,[k,S,A]),b):[m(0),m(.5),m(1)]}}return b.range=y(Yo),b.rangeRound=y(Kv),b.unknown=function(g){return arguments.length?(x=g,b):x},function(g){return p=g,s=g(e),i=g(r),l=g(n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,b}}function mE(){var e=Es(Jm()(_r));return e.copy=function(){return Os(e,mE())},qa.apply(e,arguments)}function pE(){var e=Zv(Jm()).domain([.1,1,10]);return e.copy=function(){return Os(e,pE()).base(e.base())},qa.apply(e,arguments)}function hE(){var e=Qv(Jm());return e.copy=function(){return Os(e,hE()).constant(e.constant())},qa.apply(e,arguments)}function uj(){var e=ej(Jm());return e.copy=function(){return Os(e,uj()).exponent(e.exponent())},qa.apply(e,arguments)}function _F(){return uj.apply(null,arguments).exponent(.5)}const WS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dc,scaleDiverging:mE,scaleDivergingLog:pE,scaleDivergingPow:uj,scaleDivergingSqrt:_F,scaleDivergingSymlog:hE,scaleIdentity:HA,scaleImplicit:cy,scaleLinear:qu,scaleLog:KA,scaleOrdinal:Vv,scalePoint:Xl,scalePow:tj,scaleQuantile:JA,scaleQuantize:ZA,scaleRadial:XA,scaleSequential:lE,scaleSequentialLog:cE,scaleSequentialPow:dj,scaleSequentialQuantile:uE,scaleSequentialSqrt:LF,scaleSequentialSymlog:dE,scaleSqrt:x9,scaleSymlog:YA,scaleThreshold:QA,scaleTime:IF,scaleUtc:MF,tickFormat:VA},Symbol.toStringTag,{value:"Module"}));var ub,US;function Zm(){if(US)return ub;US=1;var e=Uo();function r(n,a,s){for(var i=-1,l=n.length;++i<l;){var d=n[i],u=a(d);if(u!=null&&(m===void 0?u===u&&!e(u):s(u,m)))var m=u,p=d}return p}return ub=r,ub}var mb,qS;function fE(){if(qS)return mb;qS=1;function e(r,n){return r>n}return mb=e,mb}var pb,VS;function FF(){if(VS)return pb;VS=1;var e=Zm(),r=fE(),n=Ko();function a(s){return s&&s.length?e(s,n,r):void 0}return pb=a,pb}var RF=FF();const js=jt(RF);var hb,HS;function xE(){if(HS)return hb;HS=1;function e(r,n){return r<n}return hb=e,hb}var fb,GS;function $F(){if(GS)return fb;GS=1;var e=Zm(),r=xE(),n=Ko();function a(s){return s&&s.length?e(s,n,r):void 0}return fb=a,fb}var zF=$F();const Qm=jt(zF);var xb,KS;function BF(){if(KS)return xb;KS=1;var e=Lm(),r=ha(),n=wA(),a=Rr();function s(i,l){var d=a(i)?e:n;return d(i,r(l,3))}return xb=s,xb}var gb,YS;function WF(){if(YS)return gb;YS=1;var e=zv(),r=BF();function n(a,s){return e(r(a,s),1)}return gb=n,gb}var UF=WF();const qF=jt(UF);var bb,XS;function VF(){if(XS)return bb;XS=1;var e=$v();function r(n,a){return e(n,a)}return bb=r,bb}var HF=VF();const As=jt(HF);var Xo=1e9,GF={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pj,Ut=!0,kn="[DecimalError] ",li=kn+"Invalid argument: ",mj=kn+"Exponent out of range: ",Jo=Math.floor,Zs=Math.pow,KF=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,an,fr=1e7,_t=7,gE=9007199254740991,Ku=Jo(gE/_t),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var r,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,r=0,n=a<s?a:s;r<n;++r)if(i.d[r]!==e.d[r])return i.d[r]>e.d[r]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,r=e.d.length-1,n=(r-e.e)*_t;if(r=e.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};$e.dividedBy=$e.div=function(e){return _a(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var r=this,n=r.constructor;return At(_a(r,new n(e),0,1),n.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return rr(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var r,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(an))throw Error(kn+"NaN");if(n.s<1)throw Error(kn+(n.s?"NaN":"-Infinity"));return n.eq(an)?new a(0):(Ut=!1,r=_a(fc(n,i),fc(e,i),i),Ut=!0,At(r,s))};$e.minus=$e.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?vE(r,e):bE(r,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var r,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(kn+"NaN");return n.s?(Ut=!1,r=_a(n,e,0,1).times(e),Ut=!0,n.minus(r)):At(new a(n),s)};$e.naturalExponential=$e.exp=function(){return yE(this)};$e.naturalLogarithm=$e.ln=function(){return fc(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?bE(r,e):vE(r,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var r,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(li+e);if(r=rr(s)+1,a=s.d.length-1,n=a*_t+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&r>n?r:n};$e.squareRoot=$e.sqrt=function(){var e,r,n,a,s,i,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(kn+"NaN")}for(e=rr(d),Ut=!1,s=Math.sqrt(+d),s==0||s==1/0?(r=ia(d.d),(r.length+e)%2==0&&(r+="0"),s=Math.sqrt(r),e=Jo((e+1)/2)-(e<0||e%2),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),a=new u(r)):a=new u(s.toString()),n=u.precision,s=l=n+3;;)if(i=a,a=i.plus(_a(d,i,l+2)).times(.5),ia(i.d).slice(0,l)===(r=ia(a.d)).slice(0,l)){if(r=r.slice(l-3,l+1),s==l&&r=="4999"){if(At(i,n+1,0),i.times(i).eq(d)){a=i;break}}else if(r!="9999")break;l+=4}return Ut=!0,At(a,n)};$e.times=$e.mul=function(e){var r,n,a,s,i,l,d,u,m,p=this,f=p.constructor,x=p.d,b=(e=new f(e)).d;if(!p.s||!e.s)return new f(0);for(e.s*=p.s,n=p.e+e.e,u=x.length,m=b.length,u<m&&(i=x,x=b,b=i,l=u,u=m,m=l),i=[],l=u+m,a=l;a--;)i.push(0);for(a=m;--a>=0;){for(r=0,s=u+a;s>a;)d=i[s]+b[a]*x[s-a-1]+r,i[s--]=d%fr|0,r=d/fr|0;i[s]=(i[s]+r)%fr|0}for(;!i[--l];)i.pop();return r?++n:i.shift(),e.d=i,e.e=n,Ut?At(e,f.precision):e};$e.toDecimalPlaces=$e.todp=function(e,r){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(ua(e,0,Xo),r===void 0?r=a.rounding:ua(r,0,8),At(n,e+rr(n)+1,r))};$e.toExponential=function(e,r){var n,a=this,s=a.constructor;return e===void 0?n=ui(a,!0):(ua(e,0,Xo),r===void 0?r=s.rounding:ua(r,0,8),a=At(new s(a),e+1,r),n=ui(a,!0,e+1)),n};$e.toFixed=function(e,r){var n,a,s=this,i=s.constructor;return e===void 0?ui(s):(ua(e,0,Xo),r===void 0?r=i.rounding:ua(r,0,8),a=At(new i(s),e+rr(s)+1,r),n=ui(a.abs(),!1,e+rr(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};$e.toInteger=$e.toint=function(){var e=this,r=e.constructor;return At(new r(e),rr(e)+1,r.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var r,n,a,s,i,l,d=this,u=d.constructor,m=12,p=+(e=new u(e));if(!e.s)return new u(an);if(d=new u(d),!d.s){if(e.s<1)throw Error(kn+"Infinity");return d}if(d.eq(an))return d;if(a=u.precision,e.eq(an))return At(d,a);if(r=e.e,n=e.d.length-1,l=r>=n,i=d.s,l){if((n=p<0?-p:p)<=gE){for(s=new u(an),r=Math.ceil(a/_t+4),Ut=!1;n%2&&(s=s.times(d),ZS(s.d,r)),n=Jo(n/2),n!==0;)d=d.times(d),ZS(d.d,r);return Ut=!0,e.s<0?new u(an).div(s):At(s,a)}}else if(i<0)throw Error(kn+"NaN");return i=i<0&&e.d[Math.max(r,n)]&1?-1:1,d.s=1,Ut=!1,s=e.times(fc(d,a+m)),Ut=!0,s=yE(s),s.s=i,s};$e.toPrecision=function(e,r){var n,a,s=this,i=s.constructor;return e===void 0?(n=rr(s),a=ui(s,n<=i.toExpNeg||n>=i.toExpPos)):(ua(e,1,Xo),r===void 0?r=i.rounding:ua(r,0,8),s=At(new i(s),e,r),n=rr(s),a=ui(s,e<=n||n<=i.toExpNeg,e)),a};$e.toSignificantDigits=$e.tosd=function(e,r){var n=this,a=n.constructor;return e===void 0?(e=a.precision,r=a.rounding):(ua(e,1,Xo),r===void 0?r=a.rounding:ua(r,0,8)),At(new a(n),e,r)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=rr(e),n=e.constructor;return ui(e,r<=n.toExpNeg||r>=n.toExpPos)};function bE(e,r){var n,a,s,i,l,d,u,m,p=e.constructor,f=p.precision;if(!e.s||!r.s)return r.s||(r=new p(e)),Ut?At(r,f):r;if(u=e.d,m=r.d,l=e.e,s=r.e,u=u.slice(),i=l-s,i){for(i<0?(a=u,i=-i,d=m.length):(a=m,s=l,d=u.length),l=Math.ceil(f/_t),d=l>d?l+1:d+1,i>d&&(i=d,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(d=u.length,i=m.length,d-i<0&&(i=d,a=m,m=u,u=a),n=0;i;)n=(u[--i]=u[i]+m[i]+n)/fr|0,u[i]%=fr;for(n&&(u.unshift(n),++s),d=u.length;u[--d]==0;)u.pop();return r.d=u,r.e=s,Ut?At(r,f):r}function ua(e,r,n){if(e!==~~e||e<r||e>n)throw Error(li+e)}function ia(e){var r,n,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,r=1;r<s;r++)a=e[r]+"",n=_t-a.length,n&&(i+=bs(n)),i+=a;l=e[r],a=l+"",n=_t-a.length,n&&(i+=bs(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var _a=(function(){function e(a,s){var i,l=0,d=a.length;for(a=a.slice();d--;)i=a[d]*s+l,a[d]=i%fr|0,l=i/fr|0;return l&&a.unshift(l),a}function r(a,s,i,l){var d,u;if(i!=l)u=i>l?1:-1;else for(d=u=0;d<i;d++)if(a[d]!=s[d]){u=a[d]>s[d]?1:-1;break}return u}function n(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*fr+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var d,u,m,p,f,x,b,y,g,j,k,S,A,w,E,T,O,D,I=a.constructor,M=a.s==s.s?1:-1,L=a.d,B=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(kn+"Division by zero");for(u=a.e-s.e,O=B.length,E=L.length,b=new I(M),y=b.d=[],m=0;B[m]==(L[m]||0);)++m;if(B[m]>(L[m]||0)&&--u,i==null?S=i=I.precision:l?S=i+(rr(a)-rr(s))+1:S=i,S<0)return new I(0);if(S=S/_t+2|0,m=0,O==1)for(p=0,B=B[0],S++;(m<E||p)&&S--;m++)A=p*fr+(L[m]||0),y[m]=A/B|0,p=A%B|0;else{for(p=fr/(B[0]+1)|0,p>1&&(B=e(B,p),L=e(L,p),O=B.length,E=L.length),w=O,g=L.slice(0,O),j=g.length;j<O;)g[j++]=0;D=B.slice(),D.unshift(0),T=B[0],B[1]>=fr/2&&++T;do p=0,d=r(B,g,O,j),d<0?(k=g[0],O!=j&&(k=k*fr+(g[1]||0)),p=k/T|0,p>1?(p>=fr&&(p=fr-1),f=e(B,p),x=f.length,j=g.length,d=r(f,g,x,j),d==1&&(p--,n(f,O<x?D:B,x))):(p==0&&(d=p=1),f=B.slice()),x=f.length,x<j&&f.unshift(0),n(g,f,j),d==-1&&(j=g.length,d=r(B,g,O,j),d<1&&(p++,n(g,O<j?D:B,j))),j=g.length):d===0&&(p++,g=[0]),y[m++]=p,d&&g[0]?g[j++]=L[w]||0:(g=[L[w]],j=1);while((w++<E||g[0]!==void 0)&&S--)}return y[0]||y.shift(),b.e=u,At(b,l?i+rr(b)+1:i)}})();function yE(e,r){var n,a,s,i,l,d,u=0,m=0,p=e.constructor,f=p.precision;if(rr(e)>16)throw Error(mj+rr(e));if(!e.s)return new p(an);for(Ut=!1,d=f,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(a=Math.log(Zs(2,m))/Math.LN10*2+5|0,d+=a,n=s=i=new p(an),p.precision=d;;){if(s=At(s.times(e),d),n=n.times(++u),l=i.plus(_a(s,n,d)),ia(l.d).slice(0,d)===ia(i.d).slice(0,d)){for(;m--;)i=At(i.times(i),d);return p.precision=f,r==null?(Ut=!0,At(i,f)):i}i=l}}function rr(e){for(var r=e.e*_t,n=e.d[0];n>=10;n/=10)r++;return r}function yb(e,r,n){if(r>e.LN10.sd())throw Ut=!0,n&&(e.precision=n),Error(kn+"LN10 precision limit exceeded");return At(new e(e.LN10),r)}function bs(e){for(var r="";e--;)r+="0";return r}function fc(e,r){var n,a,s,i,l,d,u,m,p,f=1,x=10,b=e,y=b.d,g=b.constructor,j=g.precision;if(b.s<1)throw Error(kn+(b.s?"NaN":"-Infinity"));if(b.eq(an))return new g(0);if(r==null?(Ut=!1,m=j):m=r,b.eq(10))return r==null&&(Ut=!0),yb(g,m);if(m+=x,g.precision=m,n=ia(y),a=n.charAt(0),i=rr(b),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)b=b.times(e),n=ia(b.d),a=n.charAt(0),f++;i=rr(b),a>1?(b=new g("0."+n),i++):b=new g(a+"."+n.slice(1))}else return u=yb(g,m+2,j).times(i+""),b=fc(new g(a+"."+n.slice(1)),m-x).plus(u),g.precision=j,r==null?(Ut=!0,At(b,j)):b;for(d=l=b=_a(b.minus(an),b.plus(an),m),p=At(b.times(b),m),s=3;;){if(l=At(l.times(p),m),u=d.plus(_a(l,new g(s),m)),ia(u.d).slice(0,m)===ia(d.d).slice(0,m))return d=d.times(2),i!==0&&(d=d.plus(yb(g,m+2,j).times(i+""))),d=_a(d,new g(f),m),g.precision=j,r==null?(Ut=!0,At(d,j)):d;d=u,s+=2}}function JS(e,r){var n,a,s;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(n<0&&(n=a),n+=+r.slice(a+1),r=r.substring(0,a)):n<0&&(n=r.length),a=0;r.charCodeAt(a)===48;)++a;for(s=r.length;r.charCodeAt(s-1)===48;)--s;if(r=r.slice(a,s),r){if(s-=a,n=n-a-1,e.e=Jo(n/_t),e.d=[],a=(n+1)%_t,n<0&&(a+=_t),a<s){for(a&&e.d.push(+r.slice(0,a)),s-=_t;a<s;)e.d.push(+r.slice(a,a+=_t));r=r.slice(a),a=_t-r.length}else a-=s;for(;a--;)r+="0";if(e.d.push(+r),Ut&&(e.e>Ku||e.e<-Ku))throw Error(mj+n)}else e.s=0,e.e=0,e.d=[0];return e}function At(e,r,n){var a,s,i,l,d,u,m,p,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(a=r-l,a<0)a+=_t,s=r,m=f[p=0];else{if(p=Math.ceil((a+1)/_t),i=f.length,p>=i)return e;for(m=i=f[p],l=1;i>=10;i/=10)l++;a%=_t,s=a-_t+l}if(n!==void 0&&(i=Zs(10,l-s-1),d=m/i%10|0,u=r<0||f[p+1]!==void 0||m%i,u=n<4?(d||u)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||u||n==6&&(a>0?s>0?m/Zs(10,l-s):0:f[p-1])%10&1||n==(e.s<0?8:7))),r<1||!f[0])return u?(i=rr(e),f.length=1,r=r-i-1,f[0]=Zs(10,(_t-r%_t)%_t),e.e=Jo(-r/_t)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=p,i=1,p--):(f.length=p+1,i=Zs(10,_t-a),f[p]=s>0?(m/Zs(10,l-s)%Zs(10,s)|0)*i:0),u)for(;;)if(p==0){(f[0]+=i)==fr&&(f[0]=1,++e.e);break}else{if(f[p]+=i,f[p]!=fr)break;f[p--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(Ut&&(e.e>Ku||e.e<-Ku))throw Error(mj+rr(e));return e}function vE(e,r){var n,a,s,i,l,d,u,m,p,f,x=e.constructor,b=x.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new x(e),Ut?At(r,b):r;if(u=e.d,f=r.d,a=r.e,m=e.e,u=u.slice(),l=m-a,l){for(p=l<0,p?(n=u,l=-l,d=f.length):(n=f,a=m,d=u.length),s=Math.max(Math.ceil(b/_t),d)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=u.length,d=f.length,p=s<d,p&&(d=s),s=0;s<d;s++)if(u[s]!=f[s]){p=u[s]<f[s];break}l=0}for(p&&(n=u,u=f,f=n,r.s=-r.s),d=u.length,s=f.length-d;s>0;--s)u[d++]=0;for(s=f.length;s>l;){if(u[--s]<f[s]){for(i=s;i&&u[--i]===0;)u[i]=fr-1;--u[i],u[s]+=fr}u[s]-=f[s]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--a;return u[0]?(r.d=u,r.e=a,Ut?At(r,b):r):new x(0)}function ui(e,r,n){var a,s=rr(e),i=ia(e.d),l=i.length;return r?(n&&(a=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+bs(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+bs(-s-1)+i,n&&(a=n-l)>0&&(i+=bs(a))):s>=l?(i+=bs(s+1-l),n&&(a=n-s-1)>0&&(i=i+"."+bs(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(i+="."),i+=bs(a))),e.s<0?"-"+i:i}function ZS(e,r){if(e.length>r)return e.length=r,!0}function jE(e){var r,n,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(li+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return JS(l,i.toString())}else if(typeof i!="string")throw Error(li+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,KF.test(i))JS(l,i);else throw Error(li+i)}if(s.prototype=$e,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=jE,s.config=s.set=YF,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)e.hasOwnProperty(n=a[r++])||(e[n]=this[n]);return s.config(e),s}function YF(e){if(!e||typeof e!="object")throw Error(kn+"Object expected");var r,n,a,s=["precision",1,Xo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<s.length;r+=3)if((a=e[n=s[r]])!==void 0)if(Jo(a)===a&&a>=s[r+1]&&a<=s[r+2])this[n]=a;else throw Error(li+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(li+n+": "+a);return this}var pj=jE(GF);an=new pj(1);const Ct=pj;function XF(e){return eR(e)||QF(e)||ZF(e)||JF()}function JF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZF(e,r){if(e){if(typeof e=="string")return py(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return py(e,r)}}function QF(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function eR(e){if(Array.isArray(e))return py(e)}function py(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}var tR=function(e){return e},wE={},NE=function(e){return e===wE},QS=function(e){return function r(){return arguments.length===0||arguments.length===1&&NE(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},rR=function e(r,n){return r===1?n:QS(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var l=s.filter(function(d){return d!==wE}).length;return l>=r?n.apply(void 0,s):e(r-l,QS(function(){for(var d=arguments.length,u=new Array(d),m=0;m<d;m++)u[m]=arguments[m];var p=s.map(function(f){return NE(f)?u.shift():f});return n.apply(void 0,XF(p).concat(u))}))})},ep=function(e){return rR(e.length,e)},hy=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},nR=ep(function(e,r){return Array.isArray(r)?r.map(e):Object.keys(r).map(function(n){return r[n]}).map(e)}),aR=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return tR;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce(function(l,d){return d(l)},s.apply(void 0,arguments))}},fy=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},kE=function(e){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r&&s.every(function(l,d){return l===r[d]})||(r=s,n=e.apply(void 0,s)),n}};function sR(e){var r;return e===0?r=1:r=Math.floor(new Ct(e).abs().log(10).toNumber())+1,r}function iR(e,r,n){for(var a=new Ct(e),s=0,i=[];a.lt(r)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var oR=ep(function(e,r,n){var a=+e,s=+r;return a+n*(s-a)}),lR=ep(function(e,r,n){var a=r-+e;return a=a||1/0,(n-e)/a}),cR=ep(function(e,r,n){var a=r-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const tp={rangeStep:iR,getDigitCount:sR,interpolateNumber:oR,uninterpolateNumber:lR,uninterpolateTruncation:cR};function xy(e){return mR(e)||uR(e)||SE(e)||dR()}function dR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uR(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mR(e){if(Array.isArray(e))return gy(e)}function xc(e,r){return fR(e)||hR(e,r)||SE(e,r)||pR()}function pR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SE(e,r){if(e){if(typeof e=="string")return gy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gy(e,r)}}function gy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function hR(e,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,s=!1,i=void 0;try{for(var l=e[Symbol.iterator](),d;!(a=(d=l.next()).done)&&(n.push(d.value),!(r&&n.length===r));a=!0);}catch(u){s=!0,i=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(s)throw i}}return n}}function fR(e){if(Array.isArray(e))return e}function CE(e){var r=xc(e,2),n=r[0],a=r[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function AE(e,r,n){if(e.lte(0))return new Ct(0);var a=tp.getDigitCount(e.toNumber()),s=new Ct(10).pow(a),i=e.div(s),l=a!==1?.05:.1,d=new Ct(Math.ceil(i.div(l).toNumber())).add(n).mul(l),u=d.mul(s);return r?u:new Ct(Math.ceil(u))}function xR(e,r,n){var a=1,s=new Ct(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new Ct(10).pow(tp.getDigitCount(e)-1),s=new Ct(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Ct(Math.floor(e)))}else e===0?s=new Ct(Math.floor((r-1)/2)):n||(s=new Ct(Math.floor(e)));var l=Math.floor((r-1)/2),d=aR(nR(function(u){return s.add(new Ct(u-l).mul(a)).toNumber()}),hy);return d(0,r)}function EE(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Ct(0),tickMin:new Ct(0),tickMax:new Ct(0)};var i=AE(new Ct(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Ct(0):(l=new Ct(e).add(r).div(2),l=l.sub(new Ct(l).mod(i)));var d=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new Ct(r).sub(l).div(i).toNumber()),m=d+u+1;return m>n?EE(e,r,n,a,s+1):(m<n&&(u=r>0?u+(n-m):u,d=r>0?d:d+(n-m)),{step:i,tickMin:l.sub(new Ct(d).mul(i)),tickMax:l.add(new Ct(u).mul(i))})}function gR(e){var r=xc(e,2),n=r[0],a=r[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),d=CE([n,a]),u=xc(d,2),m=u[0],p=u[1];if(m===-1/0||p===1/0){var f=p===1/0?[m].concat(xy(hy(0,s-1).map(function(){return 1/0}))):[].concat(xy(hy(0,s-1).map(function(){return-1/0})),[p]);return n>a?fy(f):f}if(m===p)return xR(m,s,i);var x=EE(m,p,l,i),b=x.step,y=x.tickMin,g=x.tickMax,j=tp.rangeStep(y,g.add(new Ct(.1).mul(b)),b);return n>a?fy(j):j}function bR(e,r){var n=xc(e,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=CE([a,s]),d=xc(l,2),u=d[0],m=d[1];if(u===-1/0||m===1/0)return[a,s];if(u===m)return[u];var p=Math.max(r,2),f=AE(new Ct(m).sub(u).div(p-1),i,0),x=[].concat(xy(tp.rangeStep(new Ct(u),new Ct(m).sub(new Ct(.99).mul(f)),f)),[m]);return a>s?fy(x):x}var yR=kE(gR),vR=kE(bR),jR="Invariant failed";function mi(e,r){throw new Error(jR)}var wR=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jo(e){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jo(e)}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yu.apply(this,arguments)}function NR(e,r){return AR(e)||CR(e,r)||SR(e,r)||kR()}function kR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SR(e,r){if(e){if(typeof e=="string")return e5(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e5(e,r)}}function e5(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function CR(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function AR(e){if(Array.isArray(e))return e}function ER(e,r){if(e==null)return{};var n=OR(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function OR(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function TR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function PR(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PE(a.key),a)}}function DR(e,r,n){return r&&PR(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IR(e,r,n){return r=Xu(r),MR(e,OE()?Reflect.construct(r,n||[],Xu(e).constructor):r.apply(e,n))}function MR(e,r){if(r&&(jo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LR(e)}function LR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OE=function(){return!!e})()}function Xu(e){return Xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xu(e)}function _R(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&by(e,r)}function by(e,r){return by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},by(e,r)}function TE(e,r,n){return r=PE(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function PE(e){var r=FR(e,"string");return jo(r)=="symbol"?r:r+""}function FR(e,r){if(jo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(jo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qc=(function(e){function r(){return TR(this,r),IR(this,r,arguments)}return _R(r,e),DR(r,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,i=n.width,l=n.dataKey,d=n.data,u=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,f=ER(n,wR),x=Ge(f,!1);this.props.direction==="x"&&m.type!=="number"&&mi();var b=d.map(function(y){var g=u(y,l),j=g.x,k=g.y,S=g.value,A=g.errorVal;if(!A)return null;var w=[],E,T;if(Array.isArray(A)){var O=NR(A,2);E=O[0],T=O[1]}else E=T=A;if(s==="vertical"){var D=m.scale,I=k+a,M=I+i,L=I-i,B=D(S-E),z=D(S+T);w.push({x1:z,y1:M,x2:z,y2:L}),w.push({x1:B,y1:I,x2:z,y2:I}),w.push({x1:B,y1:M,x2:B,y2:L})}else if(s==="horizontal"){var W=p.scale,R=j+a,H=R-i,U=R+i,q=W(S-E),Q=W(S+T);w.push({x1:H,y1:Q,x2:U,y2:Q}),w.push({x1:R,y1:q,x2:R,y2:Q}),w.push({x1:H,y1:q,x2:U,y2:q})}return X.createElement(lt,Yu({className:"recharts-errorBar",key:"bar-".concat(w.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},x),w.map(function(K){return X.createElement("line",Yu({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return X.createElement(lt,{className:"recharts-errorBars"},b)}}])})(X.Component);TE(qc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});TE(qc,"displayName","ErrorBar");function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gc(e)}function t5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ks(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?t5(Object(n),!0).forEach(function(a){RR(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RR(e,r,n){return r=$R(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function $R(e){var r=zR(e,"string");return gc(r)=="symbol"?r:r+""}function zR(e,r){if(gc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(gc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var DE=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,i=nn(r,Nn);if(!i)return null;var l=Nn.defaultProps,d=l!==void 0?Ks(Ks({},l),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:s==="children"?u=(n||[]).reduce(function(m,p){var f=p.item,x=p.props,b=x.sectors||x.data||[];return m.concat(b.map(function(y){return{type:i.props.iconType||f.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(m){var p=m.item,f=p.type.defaultProps,x=f!==void 0?Ks(Ks({},f),p.props):{},b=x.dataKey,y=x.name,g=x.legendType,j=x.hide;return{inactive:j,dataKey:b,type:d.iconType||g||"square",color:hj(p),value:y||b,payload:x}}),Ks(Ks(Ks({},d),Nn.getWithHeight(i,a)),{},{payload:u,item:i})};function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bc(e)}function r5(e){return qR(e)||UR(e)||WR(e)||BR()}function BR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(e,r){if(e){if(typeof e=="string")return yy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yy(e,r)}}function UR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qR(e){if(Array.isArray(e))return yy(e)}function yy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function n5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Yt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?n5(Object(n),!0).forEach(function(a){uo(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uo(e,r,n){return r=VR(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function VR(e){var r=HR(e,"string");return bc(r)=="symbol"?r:r+""}function HR(e,r){if(bc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(bc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ft(e,r,n){return nt(e)||nt(r)?n:cr(r)?sn(e,r,n):Qe(r)?r(e):n}function ju(e,r,n,a){var s=qF(e,function(d){return Ft(d,r)});if(n==="number"){var i=s.filter(function(d){return Ce(d)||parseFloat(d)});return i.length?[Qm(i),js(i)]:[1/0,-1/0]}var l=a?s.filter(function(d){return!nt(d)}):s;return l.map(function(d){return cr(d)||d instanceof Date?d:""})}var GR=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var d=s.range,u=0;u<l;u++){var m=u>0?a[u-1].coordinate:a[l-1].coordinate,p=a[u].coordinate,f=u>=l-1?a[0].coordinate:a[u+1].coordinate,x=void 0;if(Mr(p-m)!==Mr(f-p)){var b=[];if(Mr(f-p)===Mr(d[1]-d[0])){x=f;var y=p+d[1]-d[0];b[0]=Math.min(y,(y+m)/2),b[1]=Math.max(y,(y+m)/2)}else{x=m;var g=f+d[1]-d[0];b[0]=Math.min(p,(g+p)/2),b[1]=Math.max(p,(g+p)/2)}var j=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>j[0]&&e<=j[1]||e>=b[0]&&e<=b[1]){i=a[u].index;break}}else{var k=Math.min(m,f),S=Math.max(m,f);if(e>(k+p)/2&&e<=(S+p)/2){i=a[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&e<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<l-1&&e>(n[A].coordinate+n[A-1].coordinate)/2&&e<=(n[A].coordinate+n[A+1].coordinate)/2||A===l-1&&e>(n[A].coordinate+n[A-1].coordinate)/2){i=n[A].index;break}return i},hj=function(e){var r,n=e,a=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,i=s.stroke,l=s.fill,d;switch(a){case"Line":d=i;break;case"Area":case"Radar":d=i&&i!=="none"?i:l;break;default:d=l;break}return d},KR=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var i={},l=Object.keys(s),d=0,u=l.length;d<u;d++)for(var m=s[l[d]].stackGroups,p=Object.keys(m),f=0,x=p.length;f<x;f++){var b=m[p[f]],y=b.items,g=b.cateAxisId,j=y.filter(function(T){return La(T.type).indexOf("Bar")>=0});if(j&&j.length){var k=j[0].type.defaultProps,S=k!==void 0?Yt(Yt({},k),j[0].props):j[0].props,A=S.barSize,w=S[g];i[w]||(i[w]=[]);var E=nt(A)?r:A;i[w].push({item:j[0],stackList:j.slice(1),barSize:nt(E)?void 0:Lr(E,n,0)})}}return i},YR=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,s=e.sizeList,i=s===void 0?[]:s,l=e.maxBarSize,d=i.length;if(d<1)return null;var u=Lr(r,a,0,!0),m,p=[];if(i[0].barSize===+i[0].barSize){var f=!1,x=a/d,b=i.reduce(function(A,w){return A+w.barSize||0},0);b+=(d-1)*u,b>=a&&(b-=(d-1)*u,u=0),b>=a&&x>0&&(f=!0,x*=.9,b=d*x);var y=(a-b)/2>>0,g={offset:y-u,size:0};m=i.reduce(function(A,w){var E={item:w.item,position:{offset:g.offset+g.size+u,size:f?x:w.barSize}},T=[].concat(r5(A),[E]);return g=T[T.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(O){T.push({item:O,position:g})}),T},p)}else{var j=Lr(n,a,0,!0);a-2*j-(d-1)*u<=0&&(u=0);var k=(a-2*j-(d-1)*u)/d;k>1&&(k>>=0);var S=l===+l?Math.min(k,l):k;m=i.reduce(function(A,w,E){var T=[].concat(r5(A),[{item:w.item,position:{offset:j+(k+u)*E+(k-S)/2,size:S}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(O){T.push({item:O,position:T[T.length-1].position})}),T},p)}return m},XR=function(e,r,n,a){var s=n.children,i=n.width,l=n.margin,d=i-(l.left||0)-(l.right||0),u=DE({children:s,legendWidth:d});if(u){var m=a||{},p=m.width,f=m.height,x=u.align,b=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&x!=="center"&&Ce(e[x]))return Yt(Yt({},e),{},uo({},x,e[x]+(p||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&b!=="middle"&&Ce(e[b]))return Yt(Yt({},e),{},uo({},b,e[b]+(f||0)))}return e},JR=function(e,r,n){return nt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},IE=function(e,r,n,a,s){var i=r.props.children,l=Yr(i,qc).filter(function(u){return JR(a,s,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,m){var p=Ft(m,n);if(nt(p))return u;var f=Array.isArray(p)?[Qm(p),js(p)]:[p,p],x=d.reduce(function(b,y){var g=Ft(m,y,0),j=f[0]-Math.abs(Array.isArray(g)?g[0]:g),k=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(j,b[0]),Math.max(k,b[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},ZR=function(e,r,n,a,s){var i=r.map(function(l){return IE(e,l,n,s,a)}).filter(function(l){return!nt(l)});return i&&i.length?i.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},ME=function(e,r,n,a,s){var i=r.map(function(d){var u=d.props.dataKey;return n==="number"&&u&&IE(e,d,u,a)||ju(e,u,n,s)});if(n==="number")return i.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return i.reduce(function(d,u){for(var m=0,p=u.length;m<p;m++)l[u[m]]||(l[u[m]]=!0,d.push(u[m]));return d},[])},LE=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},_E=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var s,i,l=e.map(function(d){return d.coordinate===r&&(s=!0),d.coordinate===n&&(i=!0),d.coordinate});return s||l.push(r),i||l.push(n),l},Ma=function(e,r,n){if(!e)return null;var a=e.scale,s=e.duplicateDomain,i=e.type,l=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&i==="category"&&a.bandwidth?a.bandwidth()/d:0;if(u=e.axisType==="angleAxis"&&l?.length>=2?Mr(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var f=s?s.indexOf(p):p;return{coordinate:a(f)+u,value:p,offset:u}});return m.filter(function(p){return!Vo(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,f){return{coordinate:a(p)+u,value:p,index:f,offset:u}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(p){return{coordinate:a(p)+u,value:p,offset:u}}):a.domain().map(function(p,f){return{coordinate:a(p)+u,value:s?s[p]:p,index:f,offset:u}})},vb=new WeakMap,uu=function(e,r){if(typeof r!="function")return e;vb.has(e)||vb.set(e,new WeakMap);var n=vb.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},FE=function(e,r,n){var a=e.scale,s=e.type,i=e.layout,l=e.axisType;if(a==="auto")return i==="radial"&&l==="radiusAxis"?{scale:dc(),realScaleType:"band"}:i==="radial"&&l==="angleAxis"?{scale:qu(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Xl(),realScaleType:"point"}:s==="category"?{scale:dc(),realScaleType:"band"}:{scale:qu(),realScaleType:"linear"};if(Ss(a)){var d="scale".concat(Rm(a));return{scale:(WS[d]||Xl)(),realScaleType:WS[d]?d:"point"}}return Qe(a)?{scale:a}:{scale:Xl(),realScaleType:"point"}},a5=1e-4,RE=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),s=Math.min(a[0],a[1])-a5,i=Math.max(a[0],a[1])+a5,l=e(r[0]),d=e(r[n-1]);(l<s||l>i||d<s||d>i)&&e.domain([r[0],r[n-1]])}},QR=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},e$=function(e,r){if(!r||r.length!==2||!Ce(r[0])||!Ce(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!Ce(e[0])||e[0]<n)&&(s[0]=n),(!Ce(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},t$=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,i=0,l=0;l<r;++l){var d=Vo(e[l][n][1])?e[l][n][0]:e[l][n][1];d>=0?(e[l][n][0]=s,e[l][n][1]=s+d,s=e[l][n][1]):(e[l][n][0]=i,e[l][n][1]=i+d,i=e[l][n][1])}},r$=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,i=0;i<r;++i){var l=Vo(e[i][n][1])?e[i][n][0]:e[i][n][1];l>=0?(e[i][n][0]=s,e[i][n][1]=s+l,s=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}},n$={sign:t$,expand:tM,none:po,silhouette:rM,wiggle:nM,positive:r$},a$=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),s=n$[n],i=eM().keys(a).value(function(l,d){return+Ft(l,d,0)}).order(Y0).offset(s);return i(e)},s$=function(e,r,n,a,s,i){if(!e)return null;var l=i?r.reverse():r,d={},u=l.reduce(function(p,f){var x,b=(x=f.type)!==null&&x!==void 0&&x.defaultProps?Yt(Yt({},f.type.defaultProps),f.props):f.props,y=b.stackId,g=b.hide;if(g)return p;var j=b[n],k=p[j]||{hasStack:!1,stackGroups:{}};if(cr(y)){var S=k.stackGroups[y]||{numericAxisId:n,cateAxisId:a,items:[]};S.items.push(f),k.hasStack=!0,k.stackGroups[y]=S}else k.stackGroups[xi("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[f]};return Yt(Yt({},p),{},uo({},j,k))},d),m={};return Object.keys(u).reduce(function(p,f){var x=u[f];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,g){var j=x.stackGroups[g];return Yt(Yt({},y),{},uo({},g,{numericAxisId:n,cateAxisId:a,items:j.items,stackedData:a$(e,j.items,s)}))},b)}return Yt(Yt({},p),{},uo({},f,x))},m)},$E=function(e,r){var n=r.realScaleType,a=r.type,s=r.tickCount,i=r.originalDomain,l=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(s&&a==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=e.domain();if(!u.length)return null;var m=yR(u,s,l);return e.domain([Qm(m),js(m)]),{niceTicks:m}}if(s&&a==="number"){var p=e.domain(),f=vR(p,s,l);return{niceTicks:f}}return null};function Ju(e){var r=e.axis,n=e.ticks,a=e.bandSize,s=e.entry,i=e.index,l=e.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!nt(s[r.dataKey])){var d=Cu(n,"value",s[r.dataKey]);if(d)return d.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var u=Ft(s,nt(l)?r.dataKey:l);return nt(u)?null:r.scale(u)}var s5=function(e){var r=e.axis,n=e.ticks,a=e.offset,s=e.bandSize,i=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var d=Ft(i,r.dataKey,r.domain[l]);return nt(d)?null:r.scale(d)-s/2+a},i$=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},o$=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(cr(s)){var i=r[s];if(i){var l=i.items.indexOf(e);return l>=0?i.stackedData[l]:null}}return null},l$=function(e){return e.reduce(function(r,n){return[Qm(n.concat([r[0]]).filter(Ce)),js(n.concat([r[1]]).filter(Ce))]},[1/0,-1/0])},zE=function(e,r,n){return Object.keys(e).reduce(function(a,s){var i=e[s],l=i.stackedData,d=l.reduce(function(u,m){var p=l$(m.slice(r,n+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},i5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vy=function(e,r,n){if(Qe(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(Ce(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(i5.test(e[0])){var s=+i5.exec(e[0])[1];a[0]=r[0]-s}else Qe(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(Ce(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(o5.test(e[1])){var i=+o5.exec(e[1])[1];a[1]=r[1]+i}else Qe(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Zu=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var s=Wv(r,function(p){return p.coordinate}),i=1/0,l=1,d=s.length;l<d;l++){var u=s[l],m=s[l-1];i=Math.min((u.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},l5=function(e,r,n){return!e||!e.length||As(e,sn(n,"type.defaultProps.domain"))?r:e},BE=function(e,r){var n=e.type.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,a=n.dataKey,s=n.name,i=n.unit,l=n.formatter,d=n.tooltipType,u=n.chartType,m=n.hide;return Yt(Yt({},Ge(e,!1)),{},{dataKey:a,unit:i,formatter:l,name:s||a,color:hj(e),value:Ft(r,a),type:d,payload:r,chartType:u,hide:m})};function yc(e){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},yc(e)}function c5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ta(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?c5(Object(n),!0).forEach(function(a){WE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WE(e,r,n){return r=c$(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function c$(e){var r=d$(e,"string");return yc(r)=="symbol"?r:r+""}function d$(e,r){if(yc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(yc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function u$(e,r){return f$(e)||h$(e,r)||p$(e,r)||m$()}function m$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p$(e,r){if(e){if(typeof e=="string")return d5(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d5(e,r)}}function d5(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function h$(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function f$(e){if(Array.isArray(e))return e}var Qu=Math.PI/180,x$=function(e){return e*180/Math.PI},Tt=function(e,r,n,a){return{x:e+Math.cos(-Qu*a)*n,y:r+Math.sin(-Qu*a)*n}},UE=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},g$=function(e,r,n,a,s){var i=e.width,l=e.height,d=e.startAngle,u=e.endAngle,m=Lr(e.cx,i,i/2),p=Lr(e.cy,l,l/2),f=UE(i,l,n),x=Lr(e.innerRadius,f,0),b=Lr(e.outerRadius,f,f*.8),y=Object.keys(r);return y.reduce(function(g,j){var k=r[j],S=k.domain,A=k.reversed,w;if(nt(k.range))a==="angleAxis"?w=[d,u]:a==="radiusAxis"&&(w=[x,b]),A&&(w=[w[1],w[0]]);else{w=k.range;var E=w,T=u$(E,2);d=T[0],u=T[1]}var O=FE(k,s),D=O.realScaleType,I=O.scale;I.domain(S).range(w),RE(I);var M=$E(I,Ta(Ta({},k),{},{realScaleType:D})),L=Ta(Ta(Ta({},k),M),{},{range:w,radius:b,realScaleType:D,scale:I,cx:m,cy:p,innerRadius:x,outerRadius:b,startAngle:d,endAngle:u});return Ta(Ta({},g),{},WE({},j,L))},{})},b$=function(e,r){var n=e.x,a=e.y,s=r.x,i=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-i,2))},y$=function(e,r){var n=e.x,a=e.y,s=r.cx,i=r.cy,l=b$({x:n,y:a},{x:s,y:i});if(l<=0)return{radius:l};var d=(n-s)/l,u=Math.acos(d);return a>i&&(u=2*Math.PI-u),{radius:l,angle:x$(u),angleInRadian:u}},v$=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return{startAngle:r-i*360,endAngle:n-i*360}},j$=function(e,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),l=Math.min(s,i);return e+l*360},u5=function(e,r){var n=e.x,a=e.y,s=y$({x:n,y:a},r),i=s.radius,l=s.angle,d=r.innerRadius,u=r.outerRadius;if(i<d||i>u)return!1;if(i===0)return!0;var m=v$(r),p=m.startAngle,f=m.endAngle,x=l,b;if(p<=f){for(;x>f;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=f}else{for(;x>p;)x-=360;for(;x<f;)x+=360;b=x>=f&&x<=p}return b?Ta(Ta({},r),{},{radius:i,angle:j$(x,r)}):null},qE=function(e){return!N.isValidElement(e)&&!Qe(e)&&typeof e!="boolean"?e.className:""};function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vc(e)}var w$=["offset"];function N$(e){return A$(e)||C$(e)||S$(e)||k$()}function k$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(e,r){if(e){if(typeof e=="string")return jy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jy(e,r)}}function C$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A$(e){if(Array.isArray(e))return jy(e)}function jy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function E$(e,r){if(e==null)return{};var n=O$(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function O$(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function m5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function or(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?m5(Object(n),!0).forEach(function(a){T$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function T$(e,r,n){return r=P$(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function P$(e){var r=D$(e,"string");return vc(r)=="symbol"?r:r+""}function D$(e,r){if(vc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(vc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jc.apply(this,arguments)}var I$=function(e){var r=e.value,n=e.formatter,a=nt(e.children)?r:e.children;return Qe(n)?n(a):a},M$=function(e,r){var n=Mr(r-e),a=Math.min(Math.abs(r-e),360);return n*a},L$=function(e,r,n){var a=e.position,s=e.viewBox,i=e.offset,l=e.className,d=s,u=d.cx,m=d.cy,p=d.innerRadius,f=d.outerRadius,x=d.startAngle,b=d.endAngle,y=d.clockWise,g=(p+f)/2,j=M$(x,b),k=j>=0?1:-1,S,A;a==="insideStart"?(S=x+k*i,A=y):a==="insideEnd"?(S=b-k*i,A=!y):a==="end"&&(S=b+k*i,A=y),A=j<=0?A:!A;var w=Tt(u,m,g,S),E=Tt(u,m,g,S+(A?1:-1)*359),T="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),O=nt(e.id)?xi("recharts-radial-line-"):e.id;return X.createElement("text",jc({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",l)}),X.createElement("defs",null,X.createElement("path",{id:O,d:T})),X.createElement("textPath",{xlinkHref:"#".concat(O)},r))},_$=function(e){var r=e.viewBox,n=e.offset,a=e.position,s=r,i=s.cx,l=s.cy,d=s.innerRadius,u=s.outerRadius,m=s.startAngle,p=s.endAngle,f=(m+p)/2;if(a==="outside"){var x=Tt(i,l,u+n,f),b=x.x,y=x.y;return{x:b,y,textAnchor:b>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(d+u)/2,j=Tt(i,l,g,f),k=j.x,S=j.y;return{x:k,y:S,textAnchor:"middle",verticalAnchor:"middle"}},F$=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,s=e.position,i=r,l=i.x,d=i.y,u=i.width,m=i.height,p=m>=0?1:-1,f=p*a,x=p>0?"end":"start",b=p>0?"start":"end",y=u>=0?1:-1,g=y*a,j=y>0?"end":"start",k=y>0?"start":"end";if(s==="top"){var S={x:l+u/2,y:d-p*a,textAnchor:"middle",verticalAnchor:x};return or(or({},S),n?{height:Math.max(d-n.y,0),width:u}:{})}if(s==="bottom"){var A={x:l+u/2,y:d+m+f,textAnchor:"middle",verticalAnchor:b};return or(or({},A),n?{height:Math.max(n.y+n.height-(d+m),0),width:u}:{})}if(s==="left"){var w={x:l-g,y:d+m/2,textAnchor:j,verticalAnchor:"middle"};return or(or({},w),n?{width:Math.max(w.x-n.x,0),height:m}:{})}if(s==="right"){var E={x:l+u+g,y:d+m/2,textAnchor:k,verticalAnchor:"middle"};return or(or({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:m}:{})}var T=n?{width:u,height:m}:{};return s==="insideLeft"?or({x:l+g,y:d+m/2,textAnchor:k,verticalAnchor:"middle"},T):s==="insideRight"?or({x:l+u-g,y:d+m/2,textAnchor:j,verticalAnchor:"middle"},T):s==="insideTop"?or({x:l+u/2,y:d+f,textAnchor:"middle",verticalAnchor:b},T):s==="insideBottom"?or({x:l+u/2,y:d+m-f,textAnchor:"middle",verticalAnchor:x},T):s==="insideTopLeft"?or({x:l+g,y:d+f,textAnchor:k,verticalAnchor:b},T):s==="insideTopRight"?or({x:l+u-g,y:d+f,textAnchor:j,verticalAnchor:b},T):s==="insideBottomLeft"?or({x:l+g,y:d+m-f,textAnchor:k,verticalAnchor:x},T):s==="insideBottomRight"?or({x:l+u-g,y:d+m-f,textAnchor:j,verticalAnchor:x},T):qo(s)&&(Ce(s.x)||ti(s.x))&&(Ce(s.y)||ti(s.y))?or({x:l+Lr(s.x,u),y:d+Lr(s.y,m),textAnchor:"end",verticalAnchor:"end"},T):or({x:l+u/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},T)},R$=function(e){return"cx"in e&&Ce(e.cx)};function xr(e){var r=e.offset,n=r===void 0?5:r,a=E$(e,w$),s=or({offset:n},a),i=s.viewBox,l=s.position,d=s.value,u=s.children,m=s.content,p=s.className,f=p===void 0?"":p,x=s.textBreakAll;if(!i||nt(d)&&nt(u)&&!N.isValidElement(m)&&!Qe(m))return null;if(N.isValidElement(m))return N.cloneElement(m,s);var b;if(Qe(m)){if(b=N.createElement(m,s),N.isValidElement(b))return b}else b=I$(s);var y=R$(i),g=Ge(s,!0);if(y&&(l==="insideStart"||l==="insideEnd"||l==="end"))return L$(s,b,g);var j=y?_$(s):F$(s);return X.createElement(di,jc({className:st("recharts-label",f)},g,j,{breakAll:x}),b)}xr.displayName="Label";var VE=function(e){var r=e.cx,n=e.cy,a=e.angle,s=e.startAngle,i=e.endAngle,l=e.r,d=e.radius,u=e.innerRadius,m=e.outerRadius,p=e.x,f=e.y,x=e.top,b=e.left,y=e.width,g=e.height,j=e.clockWise,k=e.labelViewBox;if(k)return k;if(Ce(y)&&Ce(g)){if(Ce(p)&&Ce(f))return{x:p,y:f,width:y,height:g};if(Ce(x)&&Ce(b))return{x,y:b,width:y,height:g}}return Ce(p)&&Ce(f)?{x:p,y:f,width:0,height:0}:Ce(r)&&Ce(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:i||a||0,innerRadius:u||0,outerRadius:m||d||l||0,clockWise:j}:e.viewBox?e.viewBox:{}},$$=function(e,r){return e?e===!0?X.createElement(xr,{key:"label-implicit",viewBox:r}):cr(e)?X.createElement(xr,{key:"label-implicit",viewBox:r,value:e}):N.isValidElement(e)?e.type===xr?N.cloneElement(e,{key:"label-implicit",viewBox:r}):X.createElement(xr,{key:"label-implicit",content:e,viewBox:r}):Qe(e)?X.createElement(xr,{key:"label-implicit",content:e,viewBox:r}):qo(e)?X.createElement(xr,jc({viewBox:r},e,{key:"label-implicit"})):null:null},z$=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=VE(e),i=Yr(a,xr).map(function(d,u){return N.cloneElement(d,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return i;var l=$$(e.label,r||s);return[l].concat(N$(i))};xr.parseViewBox=VE;xr.renderCallByParent=z$;var jb,p5;function HE(){if(p5)return jb;p5=1;function e(r){var n=r==null?0:r.length;return n?r[n-1]:void 0}return jb=e,jb}var B$=HE();const W$=jt(B$);function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wc(e)}var U$=["valueAccessor"],q$=["data","dataKey","clockWise","id","textBreakAll"];function V$(e){return Y$(e)||K$(e)||G$(e)||H$()}function H$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G$(e,r){if(e){if(typeof e=="string")return wy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wy(e,r)}}function K$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y$(e){if(Array.isArray(e))return wy(e)}function wy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},em.apply(this,arguments)}function h5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function f5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?h5(Object(n),!0).forEach(function(a){X$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function X$(e,r,n){return r=J$(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function J$(e){var r=Z$(e,"string");return wc(r)=="symbol"?r:r+""}function Z$(e,r){if(wc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function x5(e,r){if(e==null)return{};var n=Q$(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Q$(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}var ez=function(e){return Array.isArray(e.value)?W$(e.value):e.value};function on(e){var r=e.valueAccessor,n=r===void 0?ez:r,a=x5(e,U$),s=a.data,i=a.dataKey,l=a.clockWise,d=a.id,u=a.textBreakAll,m=x5(a,q$);return!s||!s.length?null:X.createElement(lt,{className:"recharts-label-list"},s.map(function(p,f){var x=nt(i)?n(p,f):Ft(p&&p.payload,i),b=nt(d)?{}:{id:"".concat(d,"-").concat(f)};return X.createElement(xr,em({},Ge(p,!0),m,b,{parentViewBox:p.parentViewBox,value:x,textBreakAll:u,viewBox:xr.parseViewBox(nt(l)?p:f5(f5({},p),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}on.displayName="LabelList";function tz(e,r){return e?e===!0?X.createElement(on,{key:"labelList-implicit",data:r}):X.isValidElement(e)||Qe(e)?X.createElement(on,{key:"labelList-implicit",data:r,content:e}):qo(e)?X.createElement(on,em({data:r},e,{key:"labelList-implicit"})):null:null}function rz(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=Yr(a,on).map(function(l,d){return N.cloneElement(l,{data:r,key:"labelList-".concat(d)})});if(!n)return s;var i=tz(e.label,r);return[i].concat(V$(s))}on.renderCallByParent=rz;function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nc(e)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ny.apply(this,arguments)}function g5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function b5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?g5(Object(n),!0).forEach(function(a){nz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nz(e,r,n){return r=az(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function az(e){var r=sz(e,"string");return Nc(r)=="symbol"?r:r+""}function sz(e,r){if(Nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var iz=function(e,r){var n=Mr(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},mu=function(e){var r=e.cx,n=e.cy,a=e.radius,s=e.angle,i=e.sign,l=e.isExternal,d=e.cornerRadius,u=e.cornerIsExternal,m=d*(l?1:-1)+a,p=Math.asin(d/m)/Qu,f=u?s:s+i*p,x=Tt(r,n,m,f),b=Tt(r,n,a,f),y=u?s-i*p:s,g=Tt(r,n,m*Math.cos(p*Qu),y);return{center:x,circleTangency:b,lineTangency:g,theta:p}},GE=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,i=e.startAngle,l=e.endAngle,d=iz(i,l),u=i+d,m=Tt(r,n,s,i),p=Tt(r,n,s,u),f="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(i>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var x=Tt(r,n,a,i),b=Tt(r,n,a,u);f+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(i<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},oz=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,i=e.cornerRadius,l=e.forceCornerRadius,d=e.cornerIsExternal,u=e.startAngle,m=e.endAngle,p=Mr(m-u),f=mu({cx:r,cy:n,radius:s,angle:u,sign:p,cornerRadius:i,cornerIsExternal:d}),x=f.circleTangency,b=f.lineTangency,y=f.theta,g=mu({cx:r,cy:n,radius:s,angle:m,sign:-p,cornerRadius:i,cornerIsExternal:d}),j=g.circleTangency,k=g.lineTangency,S=g.theta,A=d?Math.abs(u-m):Math.abs(u-m)-y-S;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):GE({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:m});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(a>0){var E=mu({cx:r,cy:n,radius:a,angle:u,sign:p,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),T=E.circleTangency,O=E.lineTangency,D=E.theta,I=mu({cx:r,cy:n,radius:a,angle:m,sign:-p,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),M=I.circleTangency,L=I.lineTangency,B=I.theta,z=d?Math.abs(u-m):Math.abs(u-m)-D-B;if(z<0&&i===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(p>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(p<0),",").concat(O.x,",").concat(O.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},lz={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KE=function(e){var r=b5(b5({},lz),e),n=r.cx,a=r.cy,s=r.innerRadius,i=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,f=r.className;if(i<s||m===p)return null;var x=st("recharts-sector",f),b=i-s,y=Lr(l,b,0,!0),g;return y>0&&Math.abs(m-p)<360?g=oz({cx:n,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(y,b/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:m,endAngle:p}):g=GE({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:m,endAngle:p}),X.createElement("path",Ny({},Ge(r,!0),{className:x,d:g,role:"img"}))};function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kc(e)}function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ky.apply(this,arguments)}function y5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function v5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?y5(Object(n),!0).forEach(function(a){cz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cz(e,r,n){return r=dz(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function dz(e){var r=uz(e,"string");return kc(r)=="symbol"?r:r+""}function uz(e,r){if(kc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(kc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var j5={curveBasisClosed:UI,curveBasisOpen:qI,curveBasis:WI,curveBumpX:EI,curveBumpY:OI,curveLinearClosed:VI,curveLinear:zm,curveMonotoneX:HI,curveMonotoneY:GI,curveNatural:KI,curveStep:YI,curveStepAfter:JI,curveStepBefore:XI},pu=function(e){return e.x===+e.x&&e.y===+e.y},zl=function(e){return e.x},Bl=function(e){return e.y},mz=function(e,r){if(Qe(e))return e;var n="curve".concat(Rm(e));return(n==="curveMonotone"||n==="curveBump")&&r?j5["".concat(n).concat(r==="vertical"?"Y":"X")]:j5[n]||zm},pz=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,s=a===void 0?[]:a,i=e.baseLine,l=e.layout,d=e.connectNulls,u=d===void 0?!1:d,m=mz(n,l),p=u?s.filter(function(y){return pu(y)}):s,f;if(Array.isArray(i)){var x=u?i.filter(function(y){return pu(y)}):i,b=p.map(function(y,g){return v5(v5({},y),{},{base:x[g]})});return l==="vertical"?f=au().y(Bl).x1(zl).x0(function(y){return y.base.x}):f=au().x(zl).y1(Bl).y0(function(y){return y.base.y}),f.defined(pu).curve(m),f(b)}return l==="vertical"&&Ce(i)?f=au().y(Bl).x1(zl).x0(i):Ce(i)?f=au().x(zl).y1(Bl).y0(i):f=U6().x(zl).y(Bl),f.defined(pu).curve(m),f(p)},ci=function(e){var r=e.className,n=e.points,a=e.path,s=e.pathRef;if((!n||!n.length)&&!a)return null;var i=n&&n.length?pz(e):a;return N.createElement("path",ky({},Ge(e,!1),Au(e),{className:st("recharts-curve",r),d:i,ref:s}))},w5={exports:{}},wb,N5;function hz(){if(N5)return wb;N5=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wb=e,wb}var Nb,k5;function fz(){if(k5)return Nb;k5=1;var e=hz();function r(){}function n(){}return n.resetWarningCache=r,Nb=function(){function a(l,d,u,m,p,f){if(f!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:r};return i.PropTypes=i,i},Nb}var S5;function xz(){return S5||(S5=1,w5.exports=fz()()),w5.exports}var gz=xz();const kt=jt(gz);var bz=Object.getOwnPropertyNames,yz=Object.getOwnPropertySymbols,vz=Object.prototype.hasOwnProperty;function C5(e,r){return function(n,a,s){return e(n,a,s)&&r(n,a,s)}}function hu(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var s=a.cache,i=s.get(r),l=s.get(n);if(i&&l)return i===n&&l===r;s.set(r,n),s.set(n,r);var d=e(r,n,a);return s.delete(r),s.delete(n),d}}function jz(e){return e?.[Symbol.toStringTag]}function A5(e){return bz(e).concat(yz(e))}var wz=Object.hasOwn||(function(e,r){return vz.call(e,r)});function yi(e,r){return e===r||!e&&!r&&e!==e&&r!==r}var Nz="__v",kz="__o",Sz="_owner",E5=Object.getOwnPropertyDescriptor,O5=Object.keys;function Cz(e,r,n){var a=e.length;if(r.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],r[a],a,a,e,r,n))return!1;return!0}function Az(e,r){return yi(e.getTime(),r.getTime())}function Ez(e,r){return e.name===r.name&&e.message===r.message&&e.cause===r.cause&&e.stack===r.stack}function Oz(e,r){return e===r}function T5(e,r,n){var a=e.size;if(a!==r.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),l,d,u=0;(l=i.next())&&!l.done;){for(var m=r.entries(),p=!1,f=0;(d=m.next())&&!d.done;){if(s[f]){f++;continue}var x=l.value,b=d.value;if(n.equals(x[0],b[0],u,f,e,r,n)&&n.equals(x[1],b[1],x[0],b[0],e,r,n)){p=s[f]=!0;break}f++}if(!p)return!1;u++}return!0}var Tz=yi;function Pz(e,r,n){var a=O5(e),s=a.length;if(O5(r).length!==s)return!1;for(;s-- >0;)if(!YE(e,r,n,a[s]))return!1;return!0}function Wl(e,r,n){var a=A5(e),s=a.length;if(A5(r).length!==s)return!1;for(var i,l,d;s-- >0;)if(i=a[s],!YE(e,r,n,i)||(l=E5(e,i),d=E5(r,i),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function Dz(e,r){return yi(e.valueOf(),r.valueOf())}function Iz(e,r){return e.source===r.source&&e.flags===r.flags}function P5(e,r,n){var a=e.size;if(a!==r.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),l,d;(l=i.next())&&!l.done;){for(var u=r.values(),m=!1,p=0;(d=u.next())&&!d.done;){if(!s[p]&&n.equals(l.value,d.value,l.value,d.value,e,r,n)){m=s[p]=!0;break}p++}if(!m)return!1}return!0}function Mz(e,r){var n=e.length;if(r.length!==n)return!1;for(;n-- >0;)if(e[n]!==r[n])return!1;return!0}function Lz(e,r){return e.hostname===r.hostname&&e.pathname===r.pathname&&e.protocol===r.protocol&&e.port===r.port&&e.hash===r.hash&&e.username===r.username&&e.password===r.password}function YE(e,r,n,a){return(a===Sz||a===kz||a===Nz)&&(e.$$typeof||r.$$typeof)?!0:wz(r,a)&&n.equals(e[a],r[a],a,a,e,r,n)}var _z="[object Arguments]",Fz="[object Boolean]",Rz="[object Date]",$z="[object Error]",zz="[object Map]",Bz="[object Number]",Wz="[object Object]",Uz="[object RegExp]",qz="[object Set]",Vz="[object String]",Hz="[object URL]",Gz=Array.isArray,D5=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,I5=Object.assign,Kz=Object.prototype.toString.call.bind(Object.prototype.toString);function Yz(e){var r=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,d=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,m=e.areRegExpsEqual,p=e.areSetsEqual,f=e.areTypedArraysEqual,x=e.areUrlsEqual,b=e.unknownTagComparators;return function(y,g,j){if(y===g)return!0;if(y==null||g==null)return!1;var k=typeof y;if(k!==typeof g)return!1;if(k!=="object")return k==="number"?l(y,g,j):k==="function"?s(y,g,j):!1;var S=y.constructor;if(S!==g.constructor)return!1;if(S===Object)return d(y,g,j);if(Gz(y))return r(y,g,j);if(D5!=null&&D5(y))return f(y,g,j);if(S===Date)return n(y,g,j);if(S===RegExp)return m(y,g,j);if(S===Map)return i(y,g,j);if(S===Set)return p(y,g,j);var A=Kz(y);if(A===Rz)return n(y,g,j);if(A===Uz)return m(y,g,j);if(A===zz)return i(y,g,j);if(A===qz)return p(y,g,j);if(A===Wz)return typeof y.then!="function"&&typeof g.then!="function"&&d(y,g,j);if(A===Hz)return x(y,g,j);if(A===$z)return a(y,g,j);if(A===_z)return d(y,g,j);if(A===Fz||A===Bz||A===Vz)return u(y,g,j);if(b){var w=b[A];if(!w){var E=jz(y);E&&(w=b[E])}if(w)return w(y,g,j)}return!1}}function Xz(e){var r=e.circular,n=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?Wl:Cz,areDatesEqual:Az,areErrorsEqual:Ez,areFunctionsEqual:Oz,areMapsEqual:a?C5(T5,Wl):T5,areNumbersEqual:Tz,areObjectsEqual:a?Wl:Pz,arePrimitiveWrappersEqual:Dz,areRegExpsEqual:Iz,areSetsEqual:a?C5(P5,Wl):P5,areTypedArraysEqual:a?Wl:Mz,areUrlsEqual:Lz,unknownTagComparators:void 0};if(n&&(s=I5({},s,n(s))),r){var i=hu(s.areArraysEqual),l=hu(s.areMapsEqual),d=hu(s.areObjectsEqual),u=hu(s.areSetsEqual);s=I5({},s,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:d,areSetsEqual:u})}return s}function Jz(e){return function(r,n,a,s,i,l,d){return e(r,n,d)}}function Zz(e){var r=e.circular,n=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(d,u){var m=a(),p=m.cache,f=p===void 0?r?new WeakMap:void 0:p,x=m.meta;return n(d,u,{cache:f,equals:s,meta:x,strict:i})};if(r)return function(d,u){return n(d,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var l={cache:void 0,equals:s,meta:void 0,strict:i};return function(d,u){return n(d,u,l)}}var Qz=Ts();Ts({strict:!0});Ts({circular:!0});Ts({circular:!0,strict:!0});Ts({createInternalComparator:function(){return yi}});Ts({strict:!0,createInternalComparator:function(){return yi}});Ts({circular:!0,createInternalComparator:function(){return yi}});Ts({circular:!0,createInternalComparator:function(){return yi},strict:!0});function Ts(e){e===void 0&&(e={});var r=e.circular,n=r===void 0?!1:r,a=e.createInternalComparator,s=e.createState,i=e.strict,l=i===void 0?!1:i,d=Xz(e),u=Yz(d),m=a?a(u):Jz(u);return Zz({circular:n,comparator:u,createState:s,equals:m,strict:l})}function eB(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function M5(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>r?(e(i),n=-1):eB(s)};requestAnimationFrame(a)}function Sy(e){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sy(e)}function tB(e){return sB(e)||aB(e)||nB(e)||rB()}function rB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nB(e,r){if(e){if(typeof e=="string")return L5(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L5(e,r)}}function L5(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function aB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sB(e){if(Array.isArray(e))return e}function iB(){var e={},r=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,d=tB(l),u=d[0],m=d.slice(1);if(typeof u=="number"){M5(s.bind(null,m),u);return}s(u),M5(s.bind(null,m));return}Sy(i)==="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return r=s,function(){r=function(){return null}}}}}function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sc(e)}function _5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function F5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_5(Object(n),!0).forEach(function(a){XE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XE(e,r,n){return r=oB(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function oB(e){var r=lB(e,"string");return Sc(r)==="symbol"?r:String(r)}function lB(e,r){if(Sc(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Sc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var cB=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},dB=function(e){return e},uB=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Jl=function(e,r){return Object.keys(r).reduce(function(n,a){return F5(F5({},n),{},XE({},a,e(a,r[a])))},{})},R5=function(e,r,n){return e.map(function(a){return"".concat(uB(a)," ").concat(r,"ms ").concat(n)}).join(",")};function mB(e,r){return fB(e)||hB(e,r)||JE(e,r)||pB()}function pB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hB(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function fB(e){if(Array.isArray(e))return e}function xB(e){return yB(e)||bB(e)||JE(e)||gB()}function gB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JE(e,r){if(e){if(typeof e=="string")return Cy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cy(e,r)}}function bB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yB(e){if(Array.isArray(e))return Cy(e)}function Cy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}var tm=1e-4,ZE=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},QE=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},$5=function(e,r){return function(n){var a=ZE(e,r);return QE(a,n)}},vB=function(e,r){return function(n){var a=ZE(e,r),s=[].concat(xB(a.map(function(i,l){return i*l}).slice(1)),[0]);return QE(s,n)}},z5=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],s=r[1],i=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,i=1,l=1;break;case"ease":a=.25,s=.1,i=.25,l=1;break;case"ease-in":a=.42,s=0,i=1,l=1;break;case"ease-out":a=.42,s=0,i=.58,l=1;break;case"ease-in-out":a=0,s=0,i=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),m=mB(u,4);a=m[0],s=m[1],i=m[2],l=m[3]}}}var p=$5(a,i),f=$5(s,l),x=vB(a,i),b=function(g){return g>1?1:g<0?0:g},y=function(g){for(var j=g>1?1:g,k=j,S=0;S<8;++S){var A=p(k)-j,w=x(k);if(Math.abs(A-j)<tm||w<tm)return f(k);k=b(k-A/w)}return f(k)};return y.isStepper=!1,y},jB=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,s=a===void 0?8:a,i=e.dt,l=i===void 0?17:i,d=function(u,m,p){var f=-(u-m)*n,x=p*s,b=p+(f-x)*l/1e3,y=p*l/1e3+u;return Math.abs(y-m)<tm&&Math.abs(b)<tm?[m,0]:[y,b]};return d.isStepper=!0,d.dt=l,d},wB=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return z5(a);case"spring":return jB();default:if(a.split("(")[0]==="cubic-bezier")return z5(a)}return typeof a=="function"?a:null};function Cc(e){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cc(e)}function B5(e){return SB(e)||kB(e)||eO(e)||NB()}function NB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SB(e){if(Array.isArray(e))return Ey(e)}function W5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function wr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?W5(Object(n),!0).forEach(function(a){Ay(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ay(e,r,n){return r=CB(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function CB(e){var r=AB(e,"string");return Cc(r)==="symbol"?r:String(r)}function AB(e,r){if(Cc(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Cc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function EB(e,r){return PB(e)||TB(e,r)||eO(e,r)||OB()}function OB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eO(e,r){if(e){if(typeof e=="string")return Ey(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ey(e,r)}}function Ey(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function TB(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function PB(e){if(Array.isArray(e))return e}var rm=function(e,r,n){return e+(r-e)*n},Oy=function(e){var r=e.from,n=e.to;return r!==n},DB=function e(r,n,a){var s=Jl(function(i,l){if(Oy(l)){var d=r(l.from,l.to,l.velocity),u=EB(d,2),m=u[0],p=u[1];return wr(wr({},l),{},{from:m,velocity:p})}return l},n);return a<1?Jl(function(i,l){return Oy(l)?wr(wr({},l),{},{velocity:rm(l.velocity,s[i].velocity,a),from:rm(l.from,s[i].from,a)}):l},n):e(r,s,a-1)};const IB=(function(e,r,n,a,s){var i=cB(e,r),l=i.reduce(function(j,k){return wr(wr({},j),{},Ay({},k,[e[k],r[k]]))},{}),d=i.reduce(function(j,k){return wr(wr({},j),{},Ay({},k,{from:e[k],velocity:0,to:r[k]}))},{}),u=-1,m,p,f=function(){return null},x=function(){return Jl(function(j,k){return k.from},d)},b=function(){return!Object.values(d).filter(Oy).length},y=function(j){m||(m=j);var k=j-m,S=k/n.dt;d=DB(n,d,S),s(wr(wr(wr({},e),r),x())),m=j,b()||(u=requestAnimationFrame(f))},g=function(j){p||(p=j);var k=(j-p)/a,S=Jl(function(w,E){return rm.apply(void 0,B5(E).concat([n(k)]))},l);if(s(wr(wr(wr({},e),r),S)),k<1)u=requestAnimationFrame(f);else{var A=Jl(function(w,E){return rm.apply(void 0,B5(E).concat([n(1)]))},l);s(wr(wr(wr({},e),r),A))}};return f=n.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}});function wo(e){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wo(e)}var MB=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function LB(e,r){if(e==null)return{};var n=_B(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _B(e,r){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(r.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kb(e){return zB(e)||$B(e)||RB(e)||FB()}function FB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RB(e,r){if(e){if(typeof e=="string")return Ty(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ty(e,r)}}function $B(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zB(e){if(Array.isArray(e))return Ty(e)}function Ty(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function U5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $n(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?U5(Object(n),!0).forEach(function(a){Kl(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Kl(e,r,n){return r=tO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function BB(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function WB(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tO(a.key),a)}}function UB(e,r,n){return r&&WB(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tO(e){var r=qB(e,"string");return wo(r)==="symbol"?r:String(r)}function qB(e,r){if(wo(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(wo(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function VB(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Py(e,r)}function Py(e,r){return Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Py(e,r)}function HB(e){var r=GB();return function(){var n=nm(e),a;if(r){var s=nm(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Dy(this,a)}}function Dy(e,r){if(r&&(wo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iy(e)}function Iy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nm(e){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nm(e)}var Sn=(function(e){VB(n,e);var r=HB(n);function n(a,s){var i;BB(this,n),i=r.call(this,a,s);var l=i.props,d=l.isActive,u=l.attributeName,m=l.from,p=l.to,f=l.steps,x=l.children,b=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Iy(i)),i.changeStyle=i.changeStyle.bind(Iy(i)),!d||b<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:p}),Dy(i);if(f&&f.length)i.state={style:f[0].style};else if(m){if(typeof x=="function")return i.state={style:m},Dy(i);i.state={style:u?Kl({},u,m):m}}else i.state={style:{}};return i}return UB(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,i=a.canBegin;this.mounted=!0,!(!s||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,i=s.isActive,l=s.canBegin,d=s.attributeName,u=s.shouldReAnimate,m=s.to,p=s.from,f=this.state.style;if(l){if(!i){var x={style:d?Kl({},d,m):m};this.state&&f&&(d&&f[d]!==m||!d&&f!==m)&&this.setState(x);return}if(!(Qz(a.to,m)&&a.canBegin&&a.isActive)){var b=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||u?p:a.to;if(this.state&&f){var g={style:d?Kl({},d,y):y};(d&&f[d]!==y||!d&&f!==y)&&this.setState(g)}this.runAnimation($n($n({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,i=a.from,l=a.to,d=a.duration,u=a.easing,m=a.begin,p=a.onAnimationEnd,f=a.onAnimationStart,x=IB(i,l,wB(u),d,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([f,m,b,d,p])}},{key:"runStepAnimation",value:function(a){var s=this,i=a.steps,l=a.begin,d=a.onAnimationStart,u=i[0],m=u.style,p=u.duration,f=p===void 0?0:p,x=function(b,y,g){if(g===0)return b;var j=y.duration,k=y.easing,S=k===void 0?"ease":k,A=y.style,w=y.properties,E=y.onAnimationEnd,T=g>0?i[g-1]:y,O=w||Object.keys(A);if(typeof S=="function"||S==="spring")return[].concat(kb(b),[s.runJSAnimation.bind(s,{from:T.style,to:A,duration:j,easing:S}),j]);var D=R5(O,j,S),I=$n($n($n({},T.style),A),{},{transition:D});return[].concat(kb(b),[I,j,E]).filter(dB)};return this.manager.start([d].concat(kb(i.reduce(x,[m,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=iB());var s=a.begin,i=a.duration,l=a.attributeName,d=a.to,u=a.easing,m=a.onAnimationStart,p=a.onAnimationEnd,f=a.steps,x=a.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var y=l?Kl({},l,d):d,g=R5(Object.keys(y),i,u);b.start([m,s,$n($n({},y),{},{transition:g}),i,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var i=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=LB(a,MB),u=N.Children.count(s),m=this.state.style;if(typeof s=="function")return s(m);if(!l||u===0||i<=0)return s;var p=function(f){var x=f.props,b=x.style,y=b===void 0?{}:b,g=x.className,j=N.cloneElement(f,$n($n({},d),{},{style:$n($n({},y),m),className:g}));return j};return u===1?p(N.Children.only(s)):X.createElement("div",null,N.Children.map(s,function(f){return p(f)}))}}]),n})(N.PureComponent);Sn.displayName="Animate";Sn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Sn.propTypes={from:kt.oneOfType([kt.object,kt.string]),to:kt.oneOfType([kt.object,kt.string]),attributeName:kt.string,duration:kt.number,begin:kt.number,easing:kt.oneOfType([kt.string,kt.func]),steps:kt.arrayOf(kt.shape({duration:kt.number.isRequired,style:kt.object.isRequired,easing:kt.oneOfType([kt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kt.func]),properties:kt.arrayOf("string"),onAnimationEnd:kt.func})),children:kt.oneOfType([kt.node,kt.func]),isActive:kt.bool,canBegin:kt.bool,onAnimationEnd:kt.func,shouldReAnimate:kt.bool,onAnimationStart:kt.func,onAnimationReStart:kt.func};function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ac(e)}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},am.apply(this,arguments)}function KB(e,r){return ZB(e)||JB(e,r)||XB(e,r)||YB()}function YB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XB(e,r){if(e){if(typeof e=="string")return q5(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q5(e,r)}}function q5(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function JB(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function ZB(e){if(Array.isArray(e))return e}function V5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function H5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?V5(Object(n),!0).forEach(function(a){QB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QB(e,r,n){return r=eW(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function eW(e){var r=tW(e,"string");return Ac(r)=="symbol"?r:r+""}function tW(e,r){if(Ac(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var G5=function(e,r,n,a,s){var i=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,d=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,m;if(i>0&&s instanceof Array){for(var p=[0,0,0,0],f=0,x=4;f<x;f++)p[f]=s[f]>i?i:s[f];m="M".concat(e,",").concat(r+l*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*p[1])),m+="L ".concat(e+n,",").concat(r+a-l*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(e+n-d*p[2],",").concat(r+a)),m+="L ".concat(e+d*p[3],",").concat(r+a),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+a-l*p[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var b=Math.min(i,s);m="M ".concat(e,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+d*b,",").concat(r,`
            L `).concat(e+n-d*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*b,`
            L `).concat(e+n,",").concat(r+a-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+n-d*b,",").concat(r+a,`
            L `).concat(e+d*b,",").concat(r+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(r+a-l*b," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return m},rW=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,s=r.x,i=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(s,s+l),m=Math.max(s,s+l),p=Math.min(i,i+d),f=Math.max(i,i+d);return n>=u&&n<=m&&a>=p&&a<=f}return!1},nW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fj=function(e){var r=H5(H5({},nW),e),n=N.useRef(),a=N.useState(-1),s=KB(a,2),i=s[0],l=s[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,m=r.width,p=r.height,f=r.radius,x=r.className,b=r.animationEasing,y=r.animationDuration,g=r.animationBegin,j=r.isAnimationActive,k=r.isUpdateAnimationActive;if(d!==+d||u!==+u||m!==+m||p!==+p||m===0||p===0)return null;var S=st("recharts-rectangle",x);return k?X.createElement(Sn,{canBegin:i>0,from:{width:m,height:p,x:d,y:u},to:{width:m,height:p,x:d,y:u},duration:y,animationEasing:b,isActive:k},function(A){var w=A.width,E=A.height,T=A.x,O=A.y;return X.createElement(Sn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:j,easing:b},X.createElement("path",am({},Ge(r,!0),{className:S,d:G5(T,O,w,E,f),ref:n})))}):X.createElement("path",am({},Ge(r,!0),{className:S,d:G5(d,u,m,p,f)}))},aW=["points","className","baseLinePoints","connectNulls"];function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ao.apply(this,arguments)}function sW(e,r){if(e==null)return{};var n=iW(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function iW(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function K5(e){return dW(e)||cW(e)||lW(e)||oW()}function oW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lW(e,r){if(e){if(typeof e=="string")return My(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return My(e,r)}}function cW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dW(e){if(Array.isArray(e))return My(e)}function My(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}var Y5=function(e){return e&&e.x===+e.x&&e.y===+e.y},uW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){Y5(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Y5(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Zl=function(e,r){var n=uW(e);r&&(n=[n.reduce(function(s,i){return[].concat(K5(s),K5(i))},[])]);var a=n.map(function(s){return s.reduce(function(i,l,d){return"".concat(i).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},mW=function(e,r,n){var a=Zl(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Zl(r.reverse(),n).slice(1))},pW=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,s=e.connectNulls,i=sW(e,aW);if(!r||!r.length)return null;var l=st("recharts-polygon",n);if(a&&a.length){var d=i.stroke&&i.stroke!=="none",u=mW(r,a,s);return X.createElement("g",{className:l},X.createElement("path",ao({},Ge(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:u})),d?X.createElement("path",ao({},Ge(i,!0),{fill:"none",d:Zl(r,s)})):null,d?X.createElement("path",ao({},Ge(i,!0),{fill:"none",d:Zl(a,s)})):null)}var m=Zl(r,s);return X.createElement("path",ao({},Ge(i,!0),{fill:m.slice(-1)==="Z"?i.fill:"none",className:l,d:m}))};function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ly.apply(this,arguments)}var Vc=function(e){var r=e.cx,n=e.cy,a=e.r,s=e.className,i=st("recharts-dot",s);return r===+r&&n===+n&&a===+a?N.createElement("circle",Ly({},Ge(e,!1),Au(e),{className:i,cx:r,cy:n,r:a})):null};function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ec(e)}var hW=["x","y","top","left","width","height","className"];function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_y.apply(this,arguments)}function X5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function fW(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?X5(Object(n),!0).forEach(function(a){xW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xW(e,r,n){return r=gW(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function gW(e){var r=bW(e,"string");return Ec(r)=="symbol"?r:r+""}function bW(e,r){if(Ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Ec(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function yW(e,r){if(e==null)return{};var n=vW(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function vW(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}var jW=function(e,r,n,a,s,i){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(r,"h").concat(n)},wW=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,i=e.top,l=i===void 0?0:i,d=e.left,u=d===void 0?0:d,m=e.width,p=m===void 0?0:m,f=e.height,x=f===void 0?0:f,b=e.className,y=yW(e,hW),g=fW({x:n,y:s,top:l,left:u,width:p,height:x},y);return!Ce(n)||!Ce(s)||!Ce(p)||!Ce(x)||!Ce(l)||!Ce(u)?null:X.createElement("path",_y({},Ge(g,!0),{className:st("recharts-cross",b),d:jW(n,s,p,x,l,u)}))},Sb,J5;function NW(){if(J5)return Sb;J5=1;var e=Zm(),r=fE(),n=ha();function a(s,i){return s&&s.length?e(s,n(i,2),r):void 0}return Sb=a,Sb}var kW=NW();const SW=jt(kW);var Cb,Z5;function CW(){if(Z5)return Cb;Z5=1;var e=Zm(),r=ha(),n=xE();function a(s,i){return s&&s.length?e(s,r(i,2),n):void 0}return Cb=a,Cb}var AW=CW();const EW=jt(AW);var OW=["cx","cy","angle","ticks","axisLine"],TW=["ticks","tick","angle","tickFormatter","stroke"];function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},No(e)}function Ql(){return Ql=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ql.apply(this,arguments)}function Q5(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ys(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Q5(Object(n),!0).forEach(function(a){rp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eC(e,r){if(e==null)return{};var n=PW(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function PW(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function DW(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,nO(a.key),a)}}function IW(e,r,n){return r&&tC(e.prototype,r),n&&tC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function MW(e,r,n){return r=sm(r),LW(e,rO()?Reflect.construct(r,n||[],sm(e).constructor):r.apply(e,n))}function LW(e,r){if(r&&(No(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _W(e)}function _W(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rO=function(){return!!e})()}function sm(e){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sm(e)}function FW(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Fy(e,r)}function Fy(e,r){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fy(e,r)}function rp(e,r,n){return r=nO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function nO(e){var r=RW(e,"string");return No(r)=="symbol"?r:r+""}function RW(e,r){if(No(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(No(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var np=(function(e){function r(){return DW(this,r),MW(this,r,arguments)}return FW(r,e),IW(r,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,i=s.angle,l=s.cx,d=s.cy;return Tt(l,d,a,i)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,i=n.angle,l=n.ticks,d=SW(l,function(m){return m.coordinate||0}),u=EW(l,function(m){return m.coordinate||0});return{cx:a,cy:s,startAngle:i,endAngle:i,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,i=n.angle,l=n.ticks,d=n.axisLine,u=eC(n,OW),m=l.reduce(function(b,y){return[Math.min(b[0],y.coordinate),Math.max(b[1],y.coordinate)]},[1/0,-1/0]),p=Tt(a,s,m[0],i),f=Tt(a,s,m[1],i),x=Ys(Ys(Ys({},Ge(u,!1)),{},{fill:"none"},Ge(d,!1)),{},{x1:p.x,y1:p.y,x2:f.x,y2:f.y});return X.createElement("line",Ql({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,i=a.tick,l=a.angle,d=a.tickFormatter,u=a.stroke,m=eC(a,TW),p=this.getTickTextAnchor(),f=Ge(m,!1),x=Ge(i,!1),b=s.map(function(y,g){var j=n.getTickValueCoord(y),k=Ys(Ys(Ys(Ys({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:u},x),{},{index:g},j),{},{payload:y});return X.createElement(lt,Ql({className:st("recharts-polar-radius-axis-tick",qE(i)),key:"tick-".concat(y.coordinate)},Cs(n.props,y,g)),r.renderTickItem(i,k,d?d(y.value,g):y.value))});return X.createElement(lt,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,i=n.tick;return!a||!a.length?null:X.createElement(lt,{className:st("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),i&&this.renderTicks(),xr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var i;return X.isValidElement(n)?i=X.cloneElement(n,a):Qe(n)?i=n(a):i=X.createElement(di,Ql({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),i}}])})(N.PureComponent);rp(np,"displayName","PolarRadiusAxis");rp(np,"axisType","radiusAxis");rp(np,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ko(e){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ko(e)}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ei.apply(this,arguments)}function rC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xs(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?rC(Object(n),!0).forEach(function(a){ap(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $W(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function nC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sO(a.key),a)}}function zW(e,r,n){return r&&nC(e.prototype,r),n&&nC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BW(e,r,n){return r=im(r),WW(e,aO()?Reflect.construct(r,n||[],im(e).constructor):r.apply(e,n))}function WW(e,r){if(r&&(ko(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UW(e)}function UW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aO=function(){return!!e})()}function im(e){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},im(e)}function qW(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Ry(e,r)}function Ry(e,r){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ry(e,r)}function ap(e,r,n){return r=sO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function sO(e){var r=VW(e,"string");return ko(r)=="symbol"?r:r+""}function VW(e,r){if(ko(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(ko(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HW=Math.PI/180,aC=1e-5,sp=(function(e){function r(){return $W(this,r),BW(this,r,arguments)}return qW(r,e),zW(r,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,i=a.cy,l=a.radius,d=a.orientation,u=a.tickSize,m=u||8,p=Tt(s,i,l,n.coordinate),f=Tt(s,i,l+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*HW),i;return s>aC?i=a==="outer"?"start":"end":s<-aC?i=a==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,i=n.radius,l=n.axisLine,d=n.axisLineType,u=Xs(Xs({},Ge(this.props,!1)),{},{fill:"none"},Ge(l,!1));if(d==="circle")return X.createElement(Vc,ei({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:i}));var m=this.props.ticks,p=m.map(function(f){return Tt(a,s,i,f.coordinate)});return X.createElement(pW,ei({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,i=a.tick,l=a.tickLine,d=a.tickFormatter,u=a.stroke,m=Ge(this.props,!1),p=Ge(i,!1),f=Xs(Xs({},m),{},{fill:"none"},Ge(l,!1)),x=s.map(function(b,y){var g=n.getTickLineCoord(b),j=n.getTickTextAnchor(b),k=Xs(Xs(Xs({textAnchor:j},m),{},{stroke:"none",fill:u},p),{},{index:y,payload:b,x:g.x2,y:g.y2});return X.createElement(lt,ei({className:st("recharts-polar-angle-axis-tick",qE(i)),key:"tick-".concat(b.coordinate)},Cs(n.props,b,y)),l&&X.createElement("line",ei({className:"recharts-polar-angle-axis-tick-line"},f,g)),i&&r.renderTickItem(i,k,d?d(b.value,y):b.value))});return X.createElement(lt,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,i=n.axisLine;return s<=0||!a||!a.length?null:X.createElement(lt,{className:st("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var i;return X.isValidElement(n)?i=X.cloneElement(n,a):Qe(n)?i=n(a):i=X.createElement(di,ei({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),i}}])})(N.PureComponent);ap(sp,"displayName","PolarAngleAxis");ap(sp,"axisType","angleAxis");ap(sp,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ab,sC;function xj(){if(sC)return Ab;sC=1;var e=mA(),r=e(Object.getPrototypeOf,Object);return Ab=r,Ab}var Eb,iC;function iO(){if(iC)return Eb;iC=1;var e=Wa(),r=xj(),n=Xn(),a="[object Object]",s=Function.prototype,i=Object.prototype,l=s.toString,d=i.hasOwnProperty,u=l.call(Object);function m(p){if(!n(p)||e(p)!=a)return!1;var f=r(p);if(f===null)return!0;var x=d.call(f,"constructor")&&f.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==u}return Eb=m,Eb}var GW=iO();const KW=jt(GW);var Ob,oC;function YW(){if(oC)return Ob;oC=1;var e=Wa(),r=Xn(),n="[object Boolean]";function a(s){return s===!0||s===!1||r(s)&&e(s)==n}return Ob=a,Ob}var XW=YW();const JW=jt(XW);function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oc(e)}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},om.apply(this,arguments)}function ZW(e,r){return rU(e)||tU(e,r)||eU(e,r)||QW()}function QW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eU(e,r){if(e){if(typeof e=="string")return lC(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lC(e,r)}}function lC(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function tU(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function rU(e){if(Array.isArray(e))return e}function cC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function dC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?cC(Object(n),!0).forEach(function(a){nU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nU(e,r,n){return r=aU(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function aU(e){var r=sU(e,"string");return Oc(r)=="symbol"?r:r+""}function sU(e,r){if(Oc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var uC=function(e,r,n,a,s){var i=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-i/2,",").concat(r+s),l+="L ".concat(e+n-i/2-a,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},iU={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oU=function(e){var r=dC(dC({},iU),e),n=N.useRef(),a=N.useState(-1),s=ZW(a,2),i=s[0],l=s[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var d=r.x,u=r.y,m=r.upperWidth,p=r.lowerWidth,f=r.height,x=r.className,b=r.animationEasing,y=r.animationDuration,g=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||u!==+u||m!==+m||p!==+p||f!==+f||m===0&&p===0||f===0)return null;var k=st("recharts-trapezoid",x);return j?X.createElement(Sn,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:f,x:d,y:u},to:{upperWidth:m,lowerWidth:p,height:f,x:d,y:u},duration:y,animationEasing:b,isActive:j},function(S){var A=S.upperWidth,w=S.lowerWidth,E=S.height,T=S.x,O=S.y;return X.createElement(Sn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:b},X.createElement("path",om({},Ge(r,!0),{className:k,d:uC(T,O,A,w,E),ref:n})))}):X.createElement("g",null,X.createElement("path",om({},Ge(r,!0),{className:k,d:uC(d,u,m,p,f)})))},lU=["option","shapeType","propTransformer","activeClassName","isActive"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tc(e)}function cU(e,r){if(e==null)return{};var n=dU(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dU(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function mC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function lm(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?mC(Object(n),!0).forEach(function(a){uU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uU(e,r,n){return r=mU(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function mU(e){var r=pU(e,"string");return Tc(r)=="symbol"?r:r+""}function pU(e,r){if(Tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Tc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function hU(e,r){return lm(lm({},r),e)}function fU(e,r){return e==="symbols"}function pC(e){var r=e.shapeType,n=e.elementProps;switch(r){case"rectangle":return X.createElement(fj,n);case"trapezoid":return X.createElement(oU,n);case"sector":return X.createElement(KE,n);case"symbols":if(fU(r))return X.createElement(Av,n);break;default:return null}}function oO(e){return N.isValidElement(e)?e.props:e}function gj(e){var r=e.option,n=e.shapeType,a=e.propTransformer,s=a===void 0?hU:a,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,d=e.isActive,u=cU(e,lU),m;if(N.isValidElement(r))m=N.cloneElement(r,lm(lm({},u),oO(r)));else if(Qe(r))m=r(u);else if(KW(r)&&!JW(r)){var p=s(r,u);m=X.createElement(pC,{shapeType:n,elementProps:p})}else{var f=u;m=X.createElement(pC,{shapeType:n,elementProps:f})}return d?X.createElement(lt,{className:l},m):m}function ip(e,r){return r!=null&&"trapezoids"in e.props}function op(e,r){return r!=null&&"sectors"in e.props}function Pc(e,r){return r!=null&&"points"in e.props}function xU(e,r){var n,a,s=e.x===(r==null||(n=r.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===r.x,i=e.y===(r==null||(a=r.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===r.y;return s&&i}function gU(e,r){var n=e.endAngle===r.endAngle,a=e.startAngle===r.startAngle;return n&&a}function bU(e,r){var n=e.x===r.x,a=e.y===r.y,s=e.z===r.z;return n&&a&&s}function yU(e,r){var n;return ip(e,r)?n=xU:op(e,r)?n=gU:Pc(e,r)&&(n=bU),n}function vU(e,r){var n;return ip(e,r)?n="trapezoids":op(e,r)?n="sectors":Pc(e,r)&&(n="points"),n}function jU(e,r){if(ip(e,r)){var n;return(n=r.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(op(e,r)){var a;return(a=r.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Pc(e,r)?r.payload:{}}function wU(e){var r=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,s=vU(n,r),i=jU(n,r),l=a.filter(function(u,m){var p=As(i,u),f=n.props[s].filter(function(y){var g=yU(n,r);return g(y,r)}),x=n.props[s].indexOf(f[f.length-1]),b=m===x;return p&&b}),d=a.indexOf(l[l.length-1]);return d}var wu;function So(e){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},So(e)}function so(){return so=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},so.apply(this,arguments)}function hC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ot(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?hC(Object(n),!0).forEach(function(a){jn(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NU(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function fC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cO(a.key),a)}}function kU(e,r,n){return r&&fC(e.prototype,r),n&&fC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function SU(e,r,n){return r=cm(r),CU(e,lO()?Reflect.construct(r,n||[],cm(e).constructor):r.apply(e,n))}function CU(e,r){if(r&&(So(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AU(e)}function AU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lO=function(){return!!e})()}function cm(e){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cm(e)}function EU(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&$y(e,r)}function $y(e,r){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$y(e,r)}function jn(e,r,n){return r=cO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function cO(e){var r=OU(e,"string");return So(r)=="symbol"?r:r+""}function OU(e,r){if(So(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(So(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var On=(function(e){function r(n){var a;return NU(this,r),a=SU(this,r,[n]),jn(a,"pieRef",null),jn(a,"sectorRefs",[]),jn(a,"id",xi("recharts-pie-")),jn(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Qe(s)&&s()}),jn(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Qe(s)&&s()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return EU(r,e),kU(r,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.label,l=s.labelLine,d=s.dataKey,u=s.valueKey,m=Ge(this.props,!1),p=Ge(i,!1),f=Ge(l,!1),x=i&&i.offsetRadius||20,b=n.map(function(y,g){var j=(y.startAngle+y.endAngle)/2,k=Tt(y.cx,y.cy,y.outerRadius+x,j),S=Ot(Ot(Ot(Ot({},m),y),{},{stroke:"none"},p),{},{index:g,textAnchor:r.getTextAnchor(k.x,y.cx)},k),A=Ot(Ot(Ot(Ot({},m),y),{},{fill:"none",stroke:y.fill},f),{},{index:g,points:[Tt(y.cx,y.cy,y.outerRadius,j),k]}),w=d;return nt(d)&&nt(u)?w="value":nt(d)&&(w=u),X.createElement(lt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},l&&r.renderLabelLineItem(l,A,"line"),r.renderLabelItem(i,S,Ft(y,w)))});return X.createElement(lt,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,i=s.activeShape,l=s.blendStroke,d=s.inactiveShape;return n.map(function(u,m){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var p=a.isActiveIndex(m),f=d&&a.hasActiveIndex()?d:null,x=p?i:f,b=Ot(Ot({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return X.createElement(lt,so({ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Cs(a.props,u,m),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(m)}),X.createElement(gj,so({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,i=a.isAnimationActive,l=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,p=this.state,f=p.prevSectors,x=p.prevIsAnimationActive;return X.createElement(Sn,{begin:l,duration:d,isActive:i,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var y=b.t,g=[],j=s&&s[0],k=j.startAngle;return s.forEach(function(S,A){var w=f&&f[A],E=A>0?sn(S,"paddingAngle",0):0;if(w){var T=St(w.endAngle-w.startAngle,S.endAngle-S.startAngle),O=Ot(Ot({},S),{},{startAngle:k+E,endAngle:k+T(y)+E});g.push(O),k=O.endAngle}else{var D=S.endAngle,I=S.startAngle,M=St(0,D-I),L=M(y),B=Ot(Ot({},S),{},{startAngle:k+E,endAngle:k+L+E});g.push(B),k=B.endAngle}}),X.createElement(lt,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var i=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[i].focus(),a.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,i=this.state.prevSectors;return s&&a&&a.length&&(!i||!As(i,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,i=a.sectors,l=a.className,d=a.label,u=a.cx,m=a.cy,p=a.innerRadius,f=a.outerRadius,x=a.isAnimationActive,b=this.state.isAnimationFinished;if(s||!i||!i.length||!Ce(u)||!Ce(m)||!Ce(p)||!Ce(f))return null;var y=st("recharts-pie",l);return X.createElement(lt,{tabIndex:this.props.rootTabIndex,className:y,ref:function(g){n.pieRef=g}},this.renderSectors(),d&&this.renderLabels(i),xr.renderCallByParent(this.props,null,!1),(!x||b)&&on.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if(X.isValidElement(n))return X.cloneElement(n,a);if(Qe(n))return n(a);var i=st("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return X.createElement(ci,so({},a,{key:s,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(n,a,s){if(X.isValidElement(n))return X.cloneElement(n,a);var i=s;if(Qe(n)&&(i=n(a),X.isValidElement(i)))return i;var l=st("recharts-pie-label-text",typeof n!="boolean"&&!Qe(n)?n.className:"");return X.createElement(di,so({},a,{alignmentBaseline:"middle",className:l}),i)}}])})(N.PureComponent);wu=On;jn(On,"displayName","Pie");jn(On,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ua.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});jn(On,"parseDeltaAngle",function(e,r){var n=Mr(r-e),a=Math.min(Math.abs(r-e),360);return n*a});jn(On,"getRealPieData",function(e){var r=e.data,n=e.children,a=Ge(e,!1),s=Yr(n,Hn);return r&&r.length?r.map(function(i,l){return Ot(Ot(Ot({payload:i},a),i),s&&s[l]&&s[l].props)}):s&&s.length?s.map(function(i){return Ot(Ot({},a),i.props)}):[]});jn(On,"parseCoordinateOfPie",function(e,r){var n=r.top,a=r.left,s=r.width,i=r.height,l=UE(s,i),d=a+Lr(e.cx,s,s/2),u=n+Lr(e.cy,i,i/2),m=Lr(e.innerRadius,l,0),p=Lr(e.outerRadius,l,l*.8),f=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:d,cy:u,innerRadius:m,outerRadius:p,maxRadius:f}});jn(On,"getComposedData",function(e){var r=e.item,n=e.offset,a=r.type.defaultProps!==void 0?Ot(Ot({},r.type.defaultProps),r.props):r.props,s=wu.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,l=a.startAngle,d=a.endAngle,u=a.paddingAngle,m=a.dataKey,p=a.nameKey,f=a.valueKey,x=a.tooltipType,b=Math.abs(a.minAngle),y=wu.parseCoordinateOfPie(a,n),g=wu.parseDeltaAngle(l,d),j=Math.abs(g),k=m;nt(m)&&nt(f)?(Vn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):nt(m)&&(Vn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=f);var S=s.filter(function(D){return Ft(D,k,0)!==0}).length,A=(j>=360?S:S-1)*u,w=j-S*b-A,E=s.reduce(function(D,I){var M=Ft(I,k,0);return D+(Ce(M)?M:0)},0),T;if(E>0){var O;T=s.map(function(D,I){var M=Ft(D,k,0),L=Ft(D,p,I),B=(Ce(M)?M:0)/E,z;I?z=O.endAngle+Mr(g)*u*(M!==0?1:0):z=l;var W=z+Mr(g)*((M!==0?b:0)+B*w),R=(z+W)/2,H=(y.innerRadius+y.outerRadius)/2,U=[{name:L,value:M,payload:D,dataKey:k,type:x}],q=Tt(y.cx,y.cy,H,R);return O=Ot(Ot(Ot({percent:B,cornerRadius:i,name:L,tooltipPayload:U,midAngle:R,middleRadius:H,tooltipPosition:q},D),y),{},{value:Ft(D,k),startAngle:z,endAngle:W,payload:D,paddingAngle:Mr(g)*u}),O})}return Ot(Ot({},y),{},{sectors:T,data:s})});var Tb,xC;function TU(){if(xC)return Tb;xC=1;var e=Math.ceil,r=Math.max;function n(a,s,i,l){for(var d=-1,u=r(e((s-a)/(i||1)),0),m=Array(u);u--;)m[l?u:++d]=a,a+=i;return m}return Tb=n,Tb}var Pb,gC;function dO(){if(gC)return Pb;gC=1;var e=TA(),r=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===r||s===-r){var i=s<0?-1:1;return i*n}return s===s?s:0}return Pb=a,Pb}var Db,bC;function PU(){if(bC)return Db;bC=1;var e=TU(),r=Vm(),n=dO();function a(s){return function(i,l,d){return d&&typeof d!="number"&&r(i,l,d)&&(l=d=void 0),i=n(i),l===void 0?(l=i,i=0):l=n(l),d=d===void 0?i<l?1:-1:n(d),e(i,l,d,s)}}return Db=a,Db}var Ib,yC;function DU(){if(yC)return Ib;yC=1;var e=PU(),r=e();return Ib=r,Ib}var IU=DU();const dm=jt(IU);function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dc(e)}function vC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?vC(Object(n),!0).forEach(function(a){uO(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uO(e,r,n){return r=MU(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function MU(e){var r=LU(e,"string");return Dc(r)=="symbol"?r:r+""}function LU(e,r){if(Dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var _U=["Webkit","Moz","O","ms"],FU=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=_U.reduce(function(s,i){return jC(jC({},s),{},uO({},i+n,r))},{});return a[e]=r,a};function Co(e){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Co(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},um.apply(this,arguments)}function wC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Mb(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wC(Object(n),!0).forEach(function(a){rn(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RU(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function NC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pO(a.key),a)}}function $U(e,r,n){return r&&NC(e.prototype,r),n&&NC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zU(e,r,n){return r=mm(r),BU(e,mO()?Reflect.construct(r,n||[],mm(e).constructor):r.apply(e,n))}function BU(e,r){if(r&&(Co(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WU(e)}function WU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mO=function(){return!!e})()}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mm(e)}function UU(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&zy(e,r)}function zy(e,r){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zy(e,r)}function rn(e,r,n){return r=pO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function pO(e){var r=qU(e,"string");return Co(r)=="symbol"?r:r+""}function qU(e,r){if(Co(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Co(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VU=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,s=e.x,i=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=Xl().domain(dm(0,d)).range([s,s+i-l]),m=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:m}},kC=function(e){return e.changedTouches&&!!e.changedTouches.length},Ao=(function(e){function r(n){var a;return RU(this,r),a=zU(this,r,[n]),rn(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),rn(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),rn(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,l=s.onDragEnd,d=s.startIndex;l?.({endIndex:i,startIndex:d})}),a.detachDragEndListener()}),rn(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),rn(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),rn(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),rn(a,"handleSlideDragStart",function(s){var i=kC(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return UU(r,e),$U(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,i=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,m=u.length-1,p=Math.min(a,s),f=Math.max(a,s),x=r.getIndexInRange(i,p),b=r.getIndexInRange(i,f);return{startIndex:x-x%d,endIndex:b===m?m:b-b%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,i=a.tickFormatter,l=a.dataKey,d=Ft(s[n],l,n);return Qe(i)?i(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,i=a.startX,l=a.endX,d=this.props,u=d.x,m=d.width,p=d.travellerWidth,f=d.startIndex,x=d.endIndex,b=d.onChange,y=n.pageX-s;y>0?y=Math.min(y,u+m-p-l,u+m-p-i):y<0&&(y=Math.max(y,u-i,u-l));var g=this.getIndex({startX:i+y,endX:l+y});(g.startIndex!==f||g.endIndex!==x)&&b&&b(g),this.setState({startX:i+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=kC(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,i=a.movingTravellerId,l=a.endX,d=a.startX,u=this.state[i],m=this.props,p=m.x,f=m.width,x=m.travellerWidth,b=m.onChange,y=m.gap,g=m.data,j={startX:this.state.startX,endX:this.state.endX},k=n.pageX-s;k>0?k=Math.min(k,p+f-x-u):k<0&&(k=Math.max(k,p-u)),j[i]=u+k;var S=this.getIndex(j),A=S.startIndex,w=S.endIndex,E=function(){var T=g.length-1;return i==="startX"&&(l>d?A%y===0:w%y===0)||l<d&&w===T||i==="endX"&&(l>d?w%y===0:A%y===0)||l>d&&w===T};this.setState(rn(rn({},i,u+k),"brushMoveStartX",n.pageX),function(){b&&E()&&b(S)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,i=this.state,l=i.scaleValues,d=i.startX,u=i.endX,m=this.state[a],p=l.indexOf(m);if(p!==-1){var f=p+n;if(!(f===-1||f>=l.length)){var x=l[f];a==="startX"&&x>=u||a==="endX"&&x<=d||this.setState(rn({},a,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,i=n.width,l=n.height,d=n.fill,u=n.stroke;return X.createElement("rect",{stroke:u,fill:d,x:a,y:s,width:i,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,i=n.width,l=n.height,d=n.data,u=n.children,m=n.padding,p=N.Children.only(u);return p?X.cloneElement(p,{x:a,y:s,width:i,height:l,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,i,l=this,d=this.props,u=d.y,m=d.travellerWidth,p=d.height,f=d.traveller,x=d.ariaLabel,b=d.data,y=d.startIndex,g=d.endIndex,j=Math.max(n,this.props.x),k=Mb(Mb({},Ge(this.props,!1)),{},{x:j,y:u,width:m,height:p}),S=x||"Min value: ".concat((s=b[y])===null||s===void 0?void 0:s.name,", Max value: ").concat((i=b[g])===null||i===void 0?void 0:i.name);return X.createElement(lt,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(f,k))}},{key:"renderSlide",value:function(n,a){var s=this.props,i=s.y,l=s.height,d=s.stroke,u=s.travellerWidth,m=Math.min(n,a)+u,p=Math.max(Math.abs(a-n)-u,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:i,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,i=n.y,l=n.height,d=n.travellerWidth,u=n.stroke,m=this.state,p=m.startX,f=m.endX,x=5,b={pointerEvents:"none",fill:u};return X.createElement(lt,{className:"recharts-brush-texts"},X.createElement(di,um({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,f)-x,y:i+l/2},b),this.getTextOfTick(a)),X.createElement(di,um({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,f)+d+x,y:i+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,i=n.children,l=n.x,d=n.y,u=n.width,m=n.height,p=n.alwaysShowText,f=this.state,x=f.startX,b=f.endX,y=f.isTextActive,g=f.isSlideMoving,j=f.isTravellerMoving,k=f.isTravellerFocused;if(!a||!a.length||!Ce(l)||!Ce(d)||!Ce(u)||!Ce(m)||u<=0||m<=0)return null;var S=st("recharts-brush",s),A=X.Children.count(i)===1,w=FU("userSelect","none");return X.createElement(lt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(y||g||j||k||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,i=n.width,l=n.height,d=n.stroke,u=Math.floor(s+l/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:a,y:s,width:i,height:l,fill:d,stroke:"none"}),X.createElement("line",{x1:a+1,y1:u,x2:a+i-1,y2:u,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:a+1,y1:u+2,x2:a+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return X.isValidElement(n)?s=X.cloneElement(n,a):Qe(n)?s=n(a):s=r.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,i=n.width,l=n.x,d=n.travellerWidth,u=n.updateId,m=n.startIndex,p=n.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return Mb({prevData:s,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:i},s&&s.length?VU({data:s,width:i,x:l,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(i!==a.prevWidth||l!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([l,l+i-d]);var f=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:s,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:i,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,i=0,l=s-1;l-i>1;){var d=Math.floor((i+l)/2);n[d]>a?l=d:i=d}return a>=n[l]?l:i}}])})(N.PureComponent);rn(Ao,"displayName","Brush");rn(Ao,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Lb,SC;function HU(){if(SC)return Lb;SC=1;var e=Bv();function r(n,a){var s;return e(n,function(i,l,d){return s=a(i,l,d),!s}),!!s}return Lb=r,Lb}var _b,CC;function GU(){if(CC)return _b;CC=1;var e=aA(),r=ha(),n=HU(),a=Rr(),s=Vm();function i(l,d,u){var m=a(l)?e:n;return u&&s(l,d,u)&&(d=void 0),m(l,r(d,3))}return _b=i,_b}var KU=GU();const YU=jt(KU);var ca=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},Fb,AC;function bj(){if(AC)return Fb;AC=1;var e=kA();function r(n,a,s){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return Fb=r,Fb}var Rb,EC;function XU(){if(EC)return Rb;EC=1;var e=bj(),r=jA(),n=ha();function a(s,i){var l={};return i=n(i,3),r(s,function(d,u,m){e(l,u,i(d,u,m))}),l}return Rb=a,Rb}var JU=XU();const ZU=jt(JU);var $b,OC;function QU(){if(OC)return $b;OC=1;function e(r,n){for(var a=-1,s=r==null?0:r.length;++a<s;)if(!n(r[a],a,r))return!1;return!0}return $b=e,$b}var zb,TC;function eq(){if(TC)return zb;TC=1;var e=Bv();function r(n,a){var s=!0;return e(n,function(i,l,d){return s=!!a(i,l,d),s}),s}return zb=r,zb}var Bb,PC;function tq(){if(PC)return Bb;PC=1;var e=QU(),r=eq(),n=ha(),a=Rr(),s=Vm();function i(l,d,u){var m=a(l)?e:r;return u&&s(l,d,u)&&(d=void 0),m(l,n(d,3))}return Bb=i,Bb}var rq=tq();const hO=jt(rq);var nq=["x","y"];function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ic(e)}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},By.apply(this,arguments)}function DC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ul(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?DC(Object(n),!0).forEach(function(a){aq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aq(e,r,n){return r=sq(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function sq(e){var r=iq(e,"string");return Ic(r)=="symbol"?r:r+""}function iq(e,r){if(Ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function oq(e,r){if(e==null)return{};var n=lq(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lq(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function cq(e,r){var n=e.x,a=e.y,s=oq(e,nq),i="".concat(n),l=parseInt(i,10),d="".concat(a),u=parseInt(d,10),m="".concat(r.height||s.height),p=parseInt(m,10),f="".concat(r.width||s.width),x=parseInt(f,10);return Ul(Ul(Ul(Ul(Ul({},r),s),l?{x:l}:{}),u?{y:u}:{}),{},{height:p,width:x,name:r.name,radius:r.radius})}function IC(e){return X.createElement(gj,By({shapeType:"rectangle",propTransformer:cq,activeClassName:"recharts-active-bar"},e))}var dq=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var s=Ce(n)||XD(n);return s?e(n,a):(s||mi(),r)}},uq=["value","background"],fO;function Eo(e){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Eo(e)}function mq(e,r){if(e==null)return{};var n=pq(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function pq(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pm.apply(this,arguments)}function MC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function er(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?MC(Object(n),!0).forEach(function(a){ws(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hq(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function LC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,gO(a.key),a)}}function fq(e,r,n){return r&&LC(e.prototype,r),n&&LC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xq(e,r,n){return r=hm(r),gq(e,xO()?Reflect.construct(r,n||[],hm(e).constructor):r.apply(e,n))}function gq(e,r){if(r&&(Eo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bq(e)}function bq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xO=function(){return!!e})()}function hm(e){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hm(e)}function yq(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Wy(e,r)}function Wy(e,r){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wy(e,r)}function ws(e,r,n){return r=gO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function gO(e){var r=vq(e,"string");return Eo(r)=="symbol"?r:r+""}function vq(e,r){if(Eo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Eo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gn=(function(e){function r(){var n;hq(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xq(this,r,[].concat(s)),ws(n,"state",{isAnimationFinished:!1}),ws(n,"id",xi("recharts-bar-")),ws(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),ws(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return yq(r,e),fq(r,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,i=s.shape,l=s.dataKey,d=s.activeIndex,u=s.activeBar,m=Ge(this.props,!1);return n&&n.map(function(p,f){var x=f===d,b=x?u:i,y=er(er(er({},m),p),{},{isActive:x,option:b,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return X.createElement(lt,pm({className:"recharts-bar-rectangle"},Cs(a.props,p,f),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(f)}),X.createElement(IC,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,i=a.layout,l=a.isAnimationActive,d=a.animationBegin,u=a.animationDuration,m=a.animationEasing,p=a.animationId,f=this.state.prevData;return X.createElement(Sn,{begin:d,duration:u,isActive:l,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,y=s.map(function(g,j){var k=f&&f[j];if(k){var S=St(k.x,g.x),A=St(k.y,g.y),w=St(k.width,g.width),E=St(k.height,g.height);return er(er({},g),{},{x:S(b),y:A(b),width:w(b),height:E(b)})}if(i==="horizontal"){var T=St(0,g.height),O=T(b);return er(er({},g),{},{y:g.y+g.height-O,height:O})}var D=St(0,g.width),I=D(b);return er(er({},g),{},{width:I})});return X.createElement(lt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,i=this.state.prevData;return s&&a&&a.length&&(!i||!As(i,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,i=a.dataKey,l=a.activeIndex,d=Ge(this.props.background,!1);return s.map(function(u,m){u.value;var p=u.background,f=mq(u,uq);if(!p)return null;var x=er(er(er(er(er({},f),{},{fill:"#eee"},p),d),Cs(n.props,u,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:m,className:"recharts-bar-background-rectangle"});return X.createElement(IC,pm({key:"background-bar-".concat(m),option:n.props.background,isActive:m===l},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.data,l=s.xAxis,d=s.yAxis,u=s.layout,m=s.children,p=Yr(m,qc);if(!p)return null;var f=u==="vertical"?i[0].height/2:i[0].width/2,x=function(y,g){var j=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:j,errorVal:Ft(y,g)}},b={clipPath:n?"url(#clipPath-".concat(a,")"):null};return X.createElement(lt,b,p.map(function(y){return X.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:i,xAxis:l,yAxis:d,layout:u,offset:f,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,i=n.className,l=n.xAxis,d=n.yAxis,u=n.left,m=n.top,p=n.width,f=n.height,x=n.isAnimationActive,b=n.background,y=n.id;if(a||!s||!s.length)return null;var g=this.state.isAnimationFinished,j=st("recharts-bar",i),k=l&&l.allowDataOverflow,S=d&&d.allowDataOverflow,A=k||S,w=nt(y)?this.id:y;return X.createElement(lt,{className:j},k||S?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(w)},X.createElement("rect",{x:k?u:u-p/2,y:S?m:m-f/2,width:k?p:p*2,height:S?f:f*2}))):null,X.createElement(lt,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(w,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,w),(!x||g)&&on.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(N.PureComponent);fO=Gn;ws(Gn,"displayName","Bar");ws(Gn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ws(Gn,"getComposedData",function(e){var r=e.props,n=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,l=e.yAxis,d=e.xAxisTicks,u=e.yAxisTicks,m=e.stackedData,p=e.dataStartIndex,f=e.displayedData,x=e.offset,b=QR(a,n);if(!b)return null;var y=r.layout,g=n.type.defaultProps,j=g!==void 0?er(er({},g),n.props):n.props,k=j.dataKey,S=j.children,A=j.minPointSize,w=y==="horizontal"?l:i,E=m?w.scale.domain():null,T=i$({numericAxis:w}),O=Yr(S,Hn),D=f.map(function(I,M){var L,B,z,W,R,H;m?L=e$(m[p+M],E):(L=Ft(I,k),Array.isArray(L)||(L=[T,L]));var U=dq(A,fO.defaultProps.minPointSize)(L[1],M);if(y==="horizontal"){var q,Q=[l.scale(L[0]),l.scale(L[1])],K=Q[0],F=Q[1];B=s5({axis:i,ticks:d,bandSize:s,offset:b.offset,entry:I,index:M}),z=(q=F??K)!==null&&q!==void 0?q:void 0,W=b.size;var _=K-F;if(R=Number.isNaN(_)?0:_,H={x:B,y:l.y,width:W,height:l.height},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var G=Mr(R||U)*(Math.abs(U)-Math.abs(R));z-=G,R+=G}}else{var Z=[i.scale(L[0]),i.scale(L[1])],oe=Z[0],le=Z[1];if(B=oe,z=s5({axis:l,ticks:u,bandSize:s,offset:b.offset,entry:I,index:M}),W=le-oe,R=b.size,H={x:i.x,y:z,width:i.width,height:R},Math.abs(U)>0&&Math.abs(W)<Math.abs(U)){var ge=Mr(W||U)*(Math.abs(U)-Math.abs(W));W+=ge}}return er(er(er({},I),{},{x:B,y:z,width:W,height:R,value:m?L:L[1],payload:I,background:H},O&&O[M]&&O[M].props),{},{tooltipPayload:[BE(n,I)],tooltipPosition:{x:B+W/2,y:z+R/2}})});return er({data:D,layout:y},x)});function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mc(e)}function jq(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _C(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bO(a.key),a)}}function wq(e,r,n){return r&&_C(e.prototype,r),n&&_C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Wn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?FC(Object(n),!0).forEach(function(a){lp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lp(e,r,n){return r=bO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function bO(e){var r=Nq(e,"string");return Mc(r)=="symbol"?r:r+""}function Nq(e,r){if(Mc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Mc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var yj=function(e,r,n,a,s){var i=e.width,l=e.height,d=e.layout,u=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!nn(u,Gn);return m.reduce(function(x,b){var y=r[b],g=y.orientation,j=y.domain,k=y.padding,S=k===void 0?{}:k,A=y.mirror,w=y.reversed,E="".concat(g).concat(A?"Mirror":""),T,O,D,I,M;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var L=j[1]-j[0],B=1/0,z=y.categoricalDomain.sort(QD);if(z.forEach(function(G,Z){Z>0&&(B=Math.min((G||0)-(z[Z-1]||0),B))}),Number.isFinite(B)){var W=B/L,R=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(T=W*R/2),y.padding==="no-gap"){var H=Lr(e.barCategoryGap,W*R),U=W*R/2;T=U-H-(U-H)/R*H}}}a==="xAxis"?O=[n.left+(S.left||0)+(T||0),n.left+n.width-(S.right||0)-(T||0)]:a==="yAxis"?O=d==="horizontal"?[n.top+n.height-(S.bottom||0),n.top+(S.top||0)]:[n.top+(S.top||0)+(T||0),n.top+n.height-(S.bottom||0)-(T||0)]:O=y.range,w&&(O=[O[1],O[0]]);var q=FE(y,s,f),Q=q.scale,K=q.realScaleType;Q.domain(j).range(O),RE(Q);var F=$E(Q,Wn(Wn({},y),{},{realScaleType:K}));a==="xAxis"?(M=g==="top"&&!A||g==="bottom"&&A,D=n.left,I=p[E]-M*y.height):a==="yAxis"&&(M=g==="left"&&!A||g==="right"&&A,D=p[E]-M*y.width,I=n.top);var _=Wn(Wn(Wn({},y),F),{},{realScaleType:K,x:D,y:I,scale:Q,width:a==="xAxis"?n.width:y.width,height:a==="yAxis"?n.height:y.height});return _.bandSize=Zu(_,F),!y.hide&&a==="xAxis"?p[E]+=(M?-1:1)*_.height:y.hide||(p[E]+=(M?-1:1)*_.width),Wn(Wn({},x),{},lp({},b,_))},{})},yO=function(e,r){var n=e.x,a=e.y,s=r.x,i=r.y;return{x:Math.min(n,s),y:Math.min(a,i),width:Math.abs(s-n),height:Math.abs(i-a)}},kq=function(e){var r=e.x1,n=e.y1,a=e.x2,s=e.y2;return yO({x:r,y:n},{x:a,y:s})},vO=(function(){function e(r){jq(this,e),this.scale=r}return wq(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])})();lp(vO,"EPS",1e-4);var vj=function(e){var r=Object.keys(e).reduce(function(n,a){return Wn(Wn({},n),{},lp({},a,vO.create(e[a])))},{});return Wn(Wn({},r),{},{apply:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;return ZU(n,function(l,d){return r[d].apply(l,{bandAware:s,position:i})})},isInRange:function(n){return hO(n,function(a,s){return r[s].isInRange(a)})}})};function Sq(e){return(e%180+180)%180}var Cq=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Sq(a),i=s*Math.PI/180,l=Math.atan(n/r),d=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(d)},Wb,RC;function Aq(){if(RC)return Wb;RC=1;var e=ha(),r=Ho(),n=Go();function a(s){return function(i,l,d){var u=Object(i);if(!r(i)){var m=e(l,3);i=n(i),l=function(f){return m(u[f],f,u)}}var p=s(i,l,d);return p>-1?u[m?i[p]:p]:void 0}}return Wb=a,Wb}var Ub,$C;function Eq(){if($C)return Ub;$C=1;var e=dO();function r(n){var a=e(n),s=a%1;return a===a?s?a-s:a:0}return Ub=r,Ub}var qb,zC;function Oq(){if(zC)return qb;zC=1;var e=gA(),r=ha(),n=Eq(),a=Math.max;function s(i,l,d){var u=i==null?0:i.length;if(!u)return-1;var m=d==null?0:n(d);return m<0&&(m=a(u+m,0)),e(i,r(l,3),m)}return qb=s,qb}var Vb,BC;function Tq(){if(BC)return Vb;BC=1;var e=Aq(),r=Oq(),n=e(r);return Vb=n,Vb}var Pq=Tq();const Dq=jt(Pq);var Iq=T6();const Mq=jt(Iq);var Lq=Mq(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),jj=N.createContext(void 0),wj=N.createContext(void 0),jO=N.createContext(void 0),wO=N.createContext({}),NO=N.createContext(void 0),kO=N.createContext(0),SO=N.createContext(0),WC=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,i=e.clipPathId,l=e.children,d=e.width,u=e.height,m=Lq(s);return X.createElement(jj.Provider,{value:n},X.createElement(wj.Provider,{value:a},X.createElement(wO.Provider,{value:s},X.createElement(jO.Provider,{value:m},X.createElement(NO.Provider,{value:i},X.createElement(kO.Provider,{value:u},X.createElement(SO.Provider,{value:d},l)))))))},_q=function(){return N.useContext(NO)},CO=function(e){var r=N.useContext(jj);r==null&&mi();var n=r[e];return n==null&&mi(),n},Fq=function(){var e=N.useContext(jj);return ys(e)},Rq=function(){var e=N.useContext(wj),r=Dq(e,function(n){return hO(n.domain,Number.isFinite)});return r||ys(e)},AO=function(e){var r=N.useContext(wj);r==null&&mi();var n=r[e];return n==null&&mi(),n},$q=function(){var e=N.useContext(jO);return e},zq=function(){return N.useContext(wO)},Nj=function(){return N.useContext(SO)},kj=function(){return N.useContext(kO)};function Oo(e){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oo(e)}function Bq(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Wq(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OO(a.key),a)}}function Uq(e,r,n){return r&&Wq(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qq(e,r,n){return r=fm(r),Vq(e,EO()?Reflect.construct(r,n||[],fm(e).constructor):r.apply(e,n))}function Vq(e,r){if(r&&(Oo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hq(e)}function Hq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EO=function(){return!!e})()}function fm(e){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fm(e)}function Gq(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Uy(e,r)}function Uy(e,r){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(e,r)}function UC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function qC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?UC(Object(n),!0).forEach(function(a){Sj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Sj(e,r,n){return r=OO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function OO(e){var r=Kq(e,"string");return Oo(r)=="symbol"?r:r+""}function Kq(e,r){if(Oo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Oo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Yq(e,r){return Qq(e)||Zq(e,r)||Jq(e,r)||Xq()}function Xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jq(e,r){if(e){if(typeof e=="string")return VC(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VC(e,r)}}function VC(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function Zq(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function Qq(e){if(Array.isArray(e))return e}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qy.apply(this,arguments)}var eV=function(e,r){var n;return X.isValidElement(e)?n=X.cloneElement(e,r):Qe(e)?n=e(r):n=X.createElement("line",qy({},r,{className:"recharts-reference-line-line"})),n},tV=function(e,r,n,a,s,i,l,d,u){var m=s.x,p=s.y,f=s.width,x=s.height;if(n){var b=u.y,y=e.y.apply(b,{position:i});if(ca(u,"discard")&&!e.y.isInRange(y))return null;var g=[{x:m+f,y},{x:m,y}];return d==="left"?g.reverse():g}if(r){var j=u.x,k=e.x.apply(j,{position:i});if(ca(u,"discard")&&!e.x.isInRange(k))return null;var S=[{x:k,y:p+x},{x:k,y:p}];return l==="top"?S.reverse():S}if(a){var A=u.segment,w=A.map(function(E){return e.apply(E,{position:i})});return ca(u,"discard")&&YU(w,function(E){return!e.isInRange(E)})?null:w}return null};function rV(e){var r=e.x,n=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,l=e.shape,d=e.className,u=e.alwaysShow,m=_q(),p=CO(s),f=AO(i),x=$q();if(!m||!x)return null;Vn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=vj({x:p.scale,y:f.scale}),y=cr(r),g=cr(n),j=a&&a.length===2,k=tV(b,y,g,j,x,e.position,p.orientation,f.orientation,e);if(!k)return null;var S=Yq(k,2),A=S[0],w=A.x,E=A.y,T=S[1],O=T.x,D=T.y,I=ca(e,"hidden")?"url(#".concat(m,")"):void 0,M=qC(qC({clipPath:I},Ge(e,!0)),{},{x1:w,y1:E,x2:O,y2:D});return X.createElement(lt,{className:st("recharts-reference-line",d)},eV(l,M),xr.renderCallByParent(e,kq({x1:w,y1:E,x2:O,y2:D})))}var Cj=(function(e){function r(){return Bq(this,r),qq(this,r,arguments)}return Gq(r,e),Uq(r,[{key:"render",value:function(){return X.createElement(rV,this.props)}}])})(X.Component);Sj(Cj,"displayName","ReferenceLine");Sj(Cj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vy.apply(this,arguments)}function To(e){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},To(e)}function HC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function GC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?HC(Object(n),!0).forEach(function(a){cp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nV(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function aV(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PO(a.key),a)}}function sV(e,r,n){return r&&aV(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iV(e,r,n){return r=xm(r),oV(e,TO()?Reflect.construct(r,n||[],xm(e).constructor):r.apply(e,n))}function oV(e,r){if(r&&(To(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lV(e)}function lV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TO=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function cV(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Hy(e,r)}function Hy(e,r){return Hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hy(e,r)}function cp(e,r,n){return r=PO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function PO(e){var r=dV(e,"string");return To(r)=="symbol"?r:r+""}function dV(e,r){if(To(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(To(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uV=function(e){var r=e.x,n=e.y,a=e.xAxis,s=e.yAxis,i=vj({x:a.scale,y:s.scale}),l=i.apply({x:r,y:n},{bandAware:!0});return ca(e,"discard")&&!i.isInRange(l)?null:l},dp=(function(e){function r(){return nV(this,r),iV(this,r,arguments)}return cV(r,e),sV(r,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,i=n.r,l=n.alwaysShow,d=n.clipPathId,u=cr(a),m=cr(s);if(Vn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!m)return null;var p=uV(this.props);if(!p)return null;var f=p.x,x=p.y,b=this.props,y=b.shape,g=b.className,j=ca(this.props,"hidden")?"url(#".concat(d,")"):void 0,k=GC(GC({clipPath:j},Ge(this.props,!0)),{},{cx:f,cy:x});return X.createElement(lt,{className:st("recharts-reference-dot",g)},r.renderDot(y,k),xr.renderCallByParent(this.props,{x:f-i,y:x-i,width:2*i,height:2*i}))}}])})(X.Component);cp(dp,"displayName","ReferenceDot");cp(dp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});cp(dp,"renderDot",function(e,r){var n;return X.isValidElement(e)?n=X.cloneElement(e,r):Qe(e)?n=e(r):n=X.createElement(Vc,Vy({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),n});function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gy.apply(this,arguments)}function Po(e){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Po(e)}function KC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function YC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?KC(Object(n),!0).forEach(function(a){up(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mV(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pV(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IO(a.key),a)}}function hV(e,r,n){return r&&pV(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fV(e,r,n){return r=gm(r),xV(e,DO()?Reflect.construct(r,n||[],gm(e).constructor):r.apply(e,n))}function xV(e,r){if(r&&(Po(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gV(e)}function gV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DO=function(){return!!e})()}function gm(e){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gm(e)}function bV(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Ky(e,r)}function Ky(e,r){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(e,r)}function up(e,r,n){return r=IO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function IO(e){var r=yV(e,"string");return Po(r)=="symbol"?r:r+""}function yV(e,r){if(Po(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vV=function(e,r,n,a,s){var i=s.x1,l=s.x2,d=s.y1,u=s.y2,m=s.xAxis,p=s.yAxis;if(!m||!p)return null;var f=vj({x:m.scale,y:p.scale}),x={x:e?f.x.apply(i,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(d,{position:"start"}):f.y.rangeMin},b={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(u,{position:"end"}):f.y.rangeMax};return ca(s,"discard")&&(!f.isInRange(x)||!f.isInRange(b))?null:yO(x,b)},mp=(function(e){function r(){return mV(this,r),fV(this,r,arguments)}return bV(r,e),hV(r,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,i=n.y1,l=n.y2,d=n.className,u=n.alwaysShow,m=n.clipPathId;Vn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=cr(a),f=cr(s),x=cr(i),b=cr(l),y=this.props.shape;if(!p&&!f&&!x&&!b&&!y)return null;var g=vV(p,f,x,b,this.props);if(!g&&!y)return null;var j=ca(this.props,"hidden")?"url(#".concat(m,")"):void 0;return X.createElement(lt,{className:st("recharts-reference-area",d)},r.renderRect(y,YC(YC({clipPath:j},Ge(this.props,!0)),g)),xr.renderCallByParent(this.props,g))}}])})(X.Component);up(mp,"displayName","ReferenceArea");up(mp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});up(mp,"renderRect",function(e,r){var n;return X.isValidElement(e)?n=X.cloneElement(e,r):Qe(e)?n=e(r):n=X.createElement(fj,Gy({},r,{className:"recharts-reference-area-rect"})),n});function MO(e,r,n){if(r<1)return[];if(r===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=r)a.push(e[s]);return a}function jV(e,r,n){var a={width:e.width+r.width,height:e.height+r.height};return Cq(a,n)}function wV(e,r,n){var a=n==="width",s=e.x,i=e.y,l=e.width,d=e.height;return r===1?{start:a?s:i,end:a?s+l:i+d}:{start:a?s+l:i+d,end:a?s:i}}function bm(e,r,n,a,s){if(e*r<e*a||e*r>e*s)return!1;var i=n();return e*(r-e*i/2-a)>=0&&e*(r+e*i/2-s)<=0}function NV(e,r){return MO(e,r+1)}function kV(e,r,n,a,s){for(var i=(a||[]).slice(),l=r.start,d=r.end,u=0,m=1,p=l,f=function(){var b=a?.[u];if(b===void 0)return{v:MO(a,m)};var y=u,g,j=function(){return g===void 0&&(g=n(b,y)),g},k=b.coordinate,S=u===0||bm(e,k,j,p,d);S||(u=0,p=l,m+=1),S&&(p=k+e*(j()/2+s),u+=m)},x;m<=i.length;)if(x=f(),x)return x.v;return[]}function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lc(e)}function XC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Er(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?XC(Object(n),!0).forEach(function(a){SV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SV(e,r,n){return r=CV(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function CV(e){var r=AV(e,"string");return Lc(r)=="symbol"?r:r+""}function AV(e,r){if(Lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Lc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function EV(e,r,n,a,s){for(var i=(a||[]).slice(),l=i.length,d=r.start,u=r.end,m=function(f){var x=i[f],b,y=function(){return b===void 0&&(b=n(x,f)),b};if(f===l-1){var g=e*(x.coordinate+e*y()/2-u);i[f]=x=Er(Er({},x),{},{tickCoord:g>0?x.coordinate-g*e:x.coordinate})}else i[f]=x=Er(Er({},x),{},{tickCoord:x.coordinate});var j=bm(e,x.tickCoord,y,d,u);j&&(u=x.tickCoord-e*(y()/2+s),i[f]=Er(Er({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)m(p);return i}function OV(e,r,n,a,s,i){var l=(a||[]).slice(),d=l.length,u=r.start,m=r.end;if(i){var p=a[d-1],f=n(p,d-1),x=e*(p.coordinate+e*f/2-m);l[d-1]=p=Er(Er({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate});var b=bm(e,p.tickCoord,function(){return f},u,m);b&&(m=p.tickCoord-e*(f/2+s),l[d-1]=Er(Er({},p),{},{isShow:!0}))}for(var y=i?d-1:d,g=function(k){var S=l[k],A,w=function(){return A===void 0&&(A=n(S,k)),A};if(k===0){var E=e*(S.coordinate-e*w()/2-u);l[k]=S=Er(Er({},S),{},{tickCoord:E<0?S.coordinate-E*e:S.coordinate})}else l[k]=S=Er(Er({},S),{},{tickCoord:S.coordinate});var T=bm(e,S.tickCoord,w,u,m);T&&(u=S.tickCoord+e*(w()/2+s),l[k]=Er(Er({},S),{},{isShow:!0}))},j=0;j<y;j++)g(j);return l}function Aj(e,r,n){var a=e.tick,s=e.ticks,i=e.viewBox,l=e.minTickGap,d=e.orientation,u=e.interval,m=e.tickFormatter,p=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(Ce(u)||Ua.isSsr)return NV(s,typeof u=="number"&&Ce(u)?u:0);var x=[],b=d==="top"||d==="bottom"?"width":"height",y=p&&b==="width"?Yl(p,{fontSize:r,letterSpacing:n}):{width:0,height:0},g=function(S,A){var w=Qe(m)?m(S.value,A):S.value;return b==="width"?jV(Yl(w,{fontSize:r,letterSpacing:n}),y,f):Yl(w,{fontSize:r,letterSpacing:n})[b]},j=s.length>=2?Mr(s[1].coordinate-s[0].coordinate):1,k=wV(i,j,b);return u==="equidistantPreserveStart"?kV(j,k,g,s,l):(u==="preserveStart"||u==="preserveStartEnd"?x=OV(j,k,g,s,l,u==="preserveStartEnd"):x=EV(j,k,g,s,l),x.filter(function(S){return S.isShow}))}var TV=["viewBox"],PV=["viewBox"],DV=["ticks"];function Do(e){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Do(e)}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},io.apply(this,arguments)}function JC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ir(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?JC(Object(n),!0).forEach(function(a){Ej(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Hb(e,r){if(e==null)return{};var n=IV(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function IV(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function MV(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ZC(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_O(a.key),a)}}function LV(e,r,n){return r&&ZC(e.prototype,r),n&&ZC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _V(e,r,n){return r=ym(r),FV(e,LO()?Reflect.construct(r,n||[],ym(e).constructor):r.apply(e,n))}function FV(e,r){if(r&&(Do(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RV(e)}function RV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LO=function(){return!!e})()}function ym(e){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(e)}function $V(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Yy(e,r)}function Yy(e,r){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(e,r)}function Ej(e,r,n){return r=_O(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _O(e){var r=zV(e,"string");return Do(r)=="symbol"?r:r+""}function zV(e,r){if(Do(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Do(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zo=(function(e){function r(n){var a;return MV(this,r),a=_V(this,r,[n]),a.state={fontSize:"",letterSpacing:""},a}return $V(r,e),LV(r,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,i=Hb(n,TV),l=this.props,d=l.viewBox,u=Hb(l,PV);return!lo(s,d)||!lo(i,u)||!lo(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.orientation,m=a.tickSize,p=a.mirror,f=a.tickMargin,x,b,y,g,j,k,S=p?-1:1,A=n.tickSize||m,w=Ce(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":x=b=n.coordinate,g=i+ +!p*d,y=g-S*A,k=y-S*f,j=w;break;case"left":y=g=n.coordinate,b=s+ +!p*l,x=b-S*A,j=x-S*f,k=w;break;case"right":y=g=n.coordinate,b=s+ +p*l,x=b+S*A,j=x+S*f,k=w;break;default:x=b=n.coordinate,g=i+ +p*d,y=g+S*A,k=y+S*f,j=w;break}return{line:{x1:x,y1:y,x2:b,y2:g},tick:{x:j,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,i;switch(a){case"left":i=s?"start":"end";break;case"right":i=s?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,i="end";switch(a){case"left":case"right":i="middle";break;case"top":i=s?"start":"end";break;default:i=s?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,i=n.width,l=n.height,d=n.orientation,u=n.mirror,m=n.axisLine,p=ir(ir(ir({},Ge(this.props,!1)),Ge(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var f=+(d==="top"&&!u||d==="bottom"&&u);p=ir(ir({},p),{},{x1:a,y1:s+f*l,x2:a+i,y2:s+f*l})}else{var x=+(d==="left"&&!u||d==="right"&&u);p=ir(ir({},p),{},{x1:a+x*i,y1:s,x2:a+x*i,y2:s+l})}return X.createElement("line",io({},p,{className:st("recharts-cartesian-axis-line",sn(m,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var i=this,l=this.props,d=l.tickLine,u=l.stroke,m=l.tick,p=l.tickFormatter,f=l.unit,x=Aj(ir(ir({},this.props),{},{ticks:n}),a,s),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),g=Ge(this.props,!1),j=Ge(m,!1),k=ir(ir({},g),{},{fill:"none"},Ge(d,!1)),S=x.map(function(A,w){var E=i.getTickLineCoord(A),T=E.line,O=E.tick,D=ir(ir(ir(ir({textAnchor:b,verticalAnchor:y},g),{},{stroke:"none",fill:u},j),O),{},{index:w,payload:A,visibleTicksCount:x.length,tickFormatter:p});return X.createElement(lt,io({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Cs(i.props,A,w)),d&&X.createElement("line",io({},k,T,{className:st("recharts-cartesian-axis-tick-line",sn(d,"className"))})),m&&r.renderTickItem(m,D,"".concat(Qe(p)?p(A.value,w):A.value).concat(f||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,i=a.width,l=a.height,d=a.ticksGenerator,u=a.className,m=a.hide;if(m)return null;var p=this.props,f=p.ticks,x=Hb(p,DV),b=f;return Qe(d)&&(b=f&&f.length>0?d(this.props):d(x)),i<=0||l<=0||!b||!b.length?null:X.createElement(lt,{className:st("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),xr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var i,l=st(a.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(n)?i=X.cloneElement(n,ir(ir({},a),{},{className:l})):Qe(n)?i=n(ir(ir({},a),{},{className:l})):i=X.createElement(di,io({},a,{className:"recharts-cartesian-axis-tick-value"}),s),i}}])})(N.Component);Ej(Zo,"displayName","CartesianAxis");Ej(Zo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var BV=["x1","y1","x2","y2","key"],WV=["offset"];function pi(e){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pi(e)}function QC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QC(Object(n),!0).forEach(function(a){UV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function UV(e,r,n){return r=qV(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function qV(e){var r=VV(e,"string");return pi(r)=="symbol"?r:r+""}function VV(e,r){if(pi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(pi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ai.apply(this,arguments)}function e3(e,r){if(e==null)return{};var n=HV(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function HV(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}var GV=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,s=e.y,i=e.width,l=e.height,d=e.ry;return X.createElement("rect",{x:a,y:s,ry:d,width:i,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function FO(e,r){var n;if(X.isValidElement(e))n=X.cloneElement(e,r);else if(Qe(e))n=e(r);else{var a=r.x1,s=r.y1,i=r.x2,l=r.y2,d=r.key,u=e3(r,BV),m=Ge(u,!1);m.offset;var p=e3(m,WV);n=X.createElement("line",ai({},p,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:d}))}return n}function KV(e){var r=e.x,n=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var m=Or(Or({},e),{},{x1:r,y1:d,x2:r+n,y2:d,key:"line-".concat(u),index:u});return FO(s,m)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function YV(e){var r=e.y,n=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var m=Or(Or({},e),{},{x1:d,y1:r,x2:d,y2:r+n,key:"line-".concat(u),index:u});return FO(s,m)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function XV(e){var r=e.horizontalFill,n=e.fillOpacity,a=e.x,s=e.y,i=e.width,l=e.height,d=e.horizontalPoints,u=e.horizontal,m=u===void 0?!0:u;if(!m||!r||!r.length)return null;var p=d.map(function(x){return Math.round(x+s-s)}).sort(function(x,b){return x-b});s!==p[0]&&p.unshift(0);var f=p.map(function(x,b){var y=!p[b+1],g=y?s+l-x:p[b+1]-x;if(g<=0)return null;var j=b%r.length;return X.createElement("rect",{key:"react-".concat(b),y:x,x:a,height:g,width:i,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function JV(e){var r=e.vertical,n=r===void 0?!0:r,a=e.verticalFill,s=e.fillOpacity,i=e.x,l=e.y,d=e.width,u=e.height,m=e.verticalPoints;if(!n||!a||!a.length)return null;var p=m.map(function(x){return Math.round(x+i-i)}).sort(function(x,b){return x-b});i!==p[0]&&p.unshift(0);var f=p.map(function(x,b){var y=!p[b+1],g=y?i+d-x:p[b+1]-x;if(g<=0)return null;var j=b%a.length;return X.createElement("rect",{key:"react-".concat(b),x,y:l,width:g,height:u,stroke:"none",fill:a[j],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var ZV=function(e,r){var n=e.xAxis,a=e.width,s=e.height,i=e.offset;return _E(Aj(Or(Or(Or({},Zo.defaultProps),n),{},{ticks:Ma(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,r)},QV=function(e,r){var n=e.yAxis,a=e.width,s=e.height,i=e.offset;return _E(Aj(Or(Or(Or({},Zo.defaultProps),n),{},{ticks:Ma(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,r)},eo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hi(e){var r,n,a,s,i,l,d=Nj(),u=kj(),m=zq(),p=Or(Or({},e),{},{stroke:(r=e.stroke)!==null&&r!==void 0?r:eo.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:eo.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:eo.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:eo.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:eo.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:eo.verticalFill,x:Ce(e.x)?e.x:m.left,y:Ce(e.y)?e.y:m.top,width:Ce(e.width)?e.width:m.width,height:Ce(e.height)?e.height:m.height}),f=p.x,x=p.y,b=p.width,y=p.height,g=p.syncWithTicks,j=p.horizontalValues,k=p.verticalValues,S=Fq(),A=Rq();if(!Ce(b)||b<=0||!Ce(y)||y<=0||!Ce(f)||f!==+f||!Ce(x)||x!==+x)return null;var w=p.verticalCoordinatesGenerator||ZV,E=p.horizontalCoordinatesGenerator||QV,T=p.horizontalPoints,O=p.verticalPoints;if((!T||!T.length)&&Qe(E)){var D=j&&j.length,I=E({yAxis:A?Or(Or({},A),{},{ticks:D?j:A.ticks}):void 0,width:d,height:u,offset:m},D?!0:g);Vn(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pi(I),"]")),Array.isArray(I)&&(T=I)}if((!O||!O.length)&&Qe(w)){var M=k&&k.length,L=w({xAxis:S?Or(Or({},S),{},{ticks:M?k:S.ticks}):void 0,width:d,height:u,offset:m},M?!0:g);Vn(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pi(L),"]")),Array.isArray(L)&&(O=L)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(GV,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),X.createElement(KV,ai({},p,{offset:m,horizontalPoints:T,xAxis:S,yAxis:A})),X.createElement(YV,ai({},p,{offset:m,verticalPoints:O,xAxis:S,yAxis:A})),X.createElement(XV,ai({},p,{horizontalPoints:T})),X.createElement(JV,ai({},p,{verticalPoints:O})))}hi.displayName="CartesianGrid";var eH=["type","layout","connectNulls","ref"],tH=["key"];function Io(e){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Io(e)}function t3(e,r){if(e==null)return{};var n=rH(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function rH(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ec.apply(this,arguments)}function r3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function tn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?r3(Object(n),!0).forEach(function(a){Un(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function to(e){return iH(e)||sH(e)||aH(e)||nH()}function nH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aH(e,r){if(e){if(typeof e=="string")return Xy(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xy(e,r)}}function sH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iH(e){if(Array.isArray(e))return Xy(e)}function Xy(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function oH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n3(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$O(a.key),a)}}function lH(e,r,n){return r&&n3(e.prototype,r),n&&n3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cH(e,r,n){return r=vm(r),dH(e,RO()?Reflect.construct(r,n||[],vm(e).constructor):r.apply(e,n))}function dH(e,r){if(r&&(Io(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uH(e)}function uH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RO=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function mH(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Jy(e,r)}function Jy(e,r){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(e,r)}function Un(e,r,n){return r=$O(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function $O(e){var r=pH(e,"string");return Io(r)=="symbol"?r:r+""}function pH(e,r){if(Io(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Io(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qo=(function(e){function r(){var n;oH(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=cH(this,r,[].concat(s)),Un(n,"state",{isAnimationFinished:!0,totalLength:0}),Un(n,"generateSimpleStrokeDasharray",function(l,d){return"".concat(d,"px ").concat(l-d,"px")}),Un(n,"getStrokeDasharray",function(l,d,u){var m=u.reduce(function(k,S){return k+S});if(!m)return n.generateSimpleStrokeDasharray(d,l);for(var p=Math.floor(l/m),f=l%m,x=d-l,b=[],y=0,g=0;y<u.length;g+=u[y],++y)if(g+u[y]>f){b=[].concat(to(u.slice(0,y)),[f-g]);break}var j=b.length%2===0?[0,x]:[x];return[].concat(to(r.repeat(u,p)),to(b),j).map(function(k){return"".concat(k,"px")}).join(", ")}),Un(n,"id",xi("recharts-line-")),Un(n,"pathRef",function(l){n.mainCurve=l}),Un(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Un(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return mH(r,e),lH(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,l=s.xAxis,d=s.yAxis,u=s.layout,m=s.children,p=Yr(m,qc);if(!p)return null;var f=function(b,y){return{x:b.x,y:b.y,value:b.value,errorVal:Ft(b.payload,y)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return X.createElement(lt,x,p.map(function(b){return X.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:i,xAxis:l,yAxis:d,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,a,s){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,m=l.dataKey,p=Ge(this.props,!1),f=Ge(d,!0),x=u.map(function(y,g){var j=tn(tn(tn({key:"dot-".concat(g),r:3},p),f),{},{index:g,cx:y.x,cy:y.y,value:y.value,dataKey:m,payload:y.payload,points:u});return r.renderDotItem(d,j)}),b={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return X.createElement(lt,ec({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(n,a,s,i){var l=this.props,d=l.type,u=l.layout,m=l.connectNulls;l.ref;var p=t3(l,eH),f=tn(tn(tn({},Ge(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:n},i),{},{type:d,layout:u,connectNulls:m});return X.createElement(ci,ec({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var s=this,i=this.props,l=i.points,d=i.strokeDasharray,u=i.isAnimationActive,m=i.animationBegin,p=i.animationDuration,f=i.animationEasing,x=i.animationId,b=i.animateNewValues,y=i.width,g=i.height,j=this.state,k=j.prevPoints,S=j.totalLength;return X.createElement(Sn,{begin:m,duration:p,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var w=A.t;if(k){var E=k.length/l.length,T=l.map(function(L,B){var z=Math.floor(B*E);if(k[z]){var W=k[z],R=St(W.x,L.x),H=St(W.y,L.y);return tn(tn({},L),{},{x:R(w),y:H(w)})}if(b){var U=St(y*2,L.x),q=St(g/2,L.y);return tn(tn({},L),{},{x:U(w),y:q(w)})}return tn(tn({},L),{},{x:L.x,y:L.y})});return s.renderCurveStatically(T,n,a)}var O=St(0,S),D=O(w),I;if(d){var M="".concat(d).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});I=s.getStrokeDasharray(D,S,M)}else I=s.generateSimpleStrokeDasharray(S,D);return s.renderCurveStatically(l,n,a,{strokeDasharray:I})})}},{key:"renderCurve",value:function(n,a){var s=this.props,i=s.points,l=s.isAnimationActive,d=this.state,u=d.prevPoints,m=d.totalLength;return l&&i&&i.length&&(!u&&m>0||!As(u,i))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(i,n,a)}},{key:"render",value:function(){var n,a=this.props,s=a.hide,i=a.dot,l=a.points,d=a.className,u=a.xAxis,m=a.yAxis,p=a.top,f=a.left,x=a.width,b=a.height,y=a.isAnimationActive,g=a.id;if(s||!l||!l.length)return null;var j=this.state.isAnimationFinished,k=l.length===1,S=st("recharts-line",d),A=u&&u.allowDataOverflow,w=m&&m.allowDataOverflow,E=A||w,T=nt(g)?this.id:g,O=(n=Ge(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},D=O.r,I=D===void 0?3:D,M=O.strokeWidth,L=M===void 0?2:M,B=L6(i)?i:{},z=B.clipDot,W=z===void 0?!0:z,R=I*2+L;return X.createElement(lt,{className:S},A||w?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(T)},X.createElement("rect",{x:A?f:f-x/2,y:w?p:p-b/2,width:A?x:x*2,height:w?b:b*2})),!W&&X.createElement("clipPath",{id:"clipPath-dots-".concat(T)},X.createElement("rect",{x:f-R/2,y:p-R/2,width:x+R,height:b+R}))):null,!k&&this.renderCurve(E,T),this.renderErrorBar(E,T),(k||i)&&this.renderDots(E,W,T),(!y||j)&&on.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var s=n.length%2!==0?[].concat(to(n),[0]):n,i=[],l=0;l<a;++l)i=[].concat(to(i),to(s));return i}},{key:"renderDotItem",value:function(n,a){var s;if(X.isValidElement(n))s=X.cloneElement(n,a);else if(Qe(n))s=n(a);else{var i=a.key,l=t3(a,tH),d=st("recharts-line-dot",typeof n!="boolean"?n.className:"");s=X.createElement(Vc,ec({key:i},l,{className:d}))}return s}}])})(N.PureComponent);Un(Qo,"displayName","Line");Un(Qo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ua.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Un(Qo,"getComposedData",function(e){var r=e.props,n=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,d=e.bandSize,u=e.displayedData,m=e.offset,p=r.layout,f=u.map(function(x,b){var y=Ft(x,l);return p==="horizontal"?{x:Ju({axis:n,ticks:s,bandSize:d,entry:x,index:b}),y:nt(y)?null:a.scale(y),value:y,payload:x}:{x:nt(y)?null:n.scale(y),y:Ju({axis:a,ticks:i,bandSize:d,entry:x,index:b}),value:y,payload:x}});return tn({points:f,layout:p},m)});var hH=["layout","type","stroke","connectNulls","isRange","ref"],fH=["key"],zO;function Mo(e){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mo(e)}function BO(e,r){if(e==null)return{};var n=xH(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xH(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function si(){return si=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},si.apply(this,arguments)}function a3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gs(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?a3(Object(n),!0).forEach(function(a){oa(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s3(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,UO(a.key),a)}}function bH(e,r,n){return r&&s3(e.prototype,r),n&&s3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yH(e,r,n){return r=jm(r),vH(e,WO()?Reflect.construct(r,n||[],jm(e).constructor):r.apply(e,n))}function vH(e,r){if(r&&(Mo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jH(e)}function jH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WO=function(){return!!e})()}function jm(e){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jm(e)}function wH(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Zy(e,r)}function Zy(e,r){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zy(e,r)}function oa(e,r,n){return r=UO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function UO(e){var r=NH(e,"string");return Mo(r)=="symbol"?r:r+""}function NH(e,r){if(Mo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Mo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var da=(function(e){function r(){var n;gH(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=yH(this,r,[].concat(s)),oa(n,"state",{isAnimationFinished:!0}),oa(n,"id",xi("recharts-area-")),oa(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Qe(l)&&l()}),oa(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Qe(l)&&l()}),n}return wH(r,e),bH(r,[{key:"renderDots",value:function(n,a,s){var i=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(i&&!l)return null;var d=this.props,u=d.dot,m=d.points,p=d.dataKey,f=Ge(this.props,!1),x=Ge(u,!0),b=m.map(function(g,j){var k=gs(gs(gs({key:"dot-".concat(j),r:3},f),x),{},{index:j,cx:g.x,cy:g.y,dataKey:p,value:g.value,payload:g.payload,points:m});return r.renderDotItem(u,k)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return X.createElement(lt,si({className:"recharts-area-dots"},y),b)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,s=a.baseLine,i=a.points,l=a.strokeWidth,d=i[0].x,u=i[i.length-1].x,m=n*Math.abs(d-u),p=js(i.map(function(f){return f.y||0}));return Ce(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(js(s.map(function(f){return f.y||0})),p)),Ce(p)?X.createElement("rect",{x:d<u?d:d-m,y:0,width:m,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,s=a.baseLine,i=a.points,l=a.strokeWidth,d=i[0].y,u=i[i.length-1].y,m=n*Math.abs(d-u),p=js(i.map(function(f){return f.x||0}));return Ce(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(js(s.map(function(f){return f.x||0})),p)),Ce(p)?X.createElement("rect",{x:0,y:d<u?d:d-m,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,s,i){var l=this.props,d=l.layout,u=l.type,m=l.stroke,p=l.connectNulls,f=l.isRange;l.ref;var x=BO(l,hH);return X.createElement(lt,{clipPath:s?"url(#clipPath-".concat(i,")"):null},X.createElement(ci,si({},Ge(x,!0),{points:n,connectNulls:p,type:u,baseLine:a,layout:d,stroke:"none",className:"recharts-area-area"})),m!=="none"&&X.createElement(ci,si({},Ge(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:p,fill:"none",points:n})),m!=="none"&&f&&X.createElement(ci,si({},Ge(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:p,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var s=this,i=this.props,l=i.points,d=i.baseLine,u=i.isAnimationActive,m=i.animationBegin,p=i.animationDuration,f=i.animationEasing,x=i.animationId,b=this.state,y=b.prevPoints,g=b.prevBaseLine;return X.createElement(Sn,{begin:m,duration:p,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var k=j.t;if(y){var S=y.length/l.length,A=l.map(function(O,D){var I=Math.floor(D*S);if(y[I]){var M=y[I],L=St(M.x,O.x),B=St(M.y,O.y);return gs(gs({},O),{},{x:L(k),y:B(k)})}return O}),w;if(Ce(d)&&typeof d=="number"){var E=St(g,d);w=E(k)}else if(nt(d)||Vo(d)){var T=St(g,0);w=T(k)}else w=d.map(function(O,D){var I=Math.floor(D*S);if(g[I]){var M=g[I],L=St(M.x,O.x),B=St(M.y,O.y);return gs(gs({},O),{},{x:L(k),y:B(k)})}return O});return s.renderAreaStatically(A,w,n,a)}return X.createElement(lt,null,X.createElement("defs",null,X.createElement("clipPath",{id:"animationClipPath-".concat(a)},s.renderClipRect(k))),X.createElement(lt,{clipPath:"url(#animationClipPath-".concat(a,")")},s.renderAreaStatically(l,d,n,a)))})}},{key:"renderArea",value:function(n,a){var s=this.props,i=s.points,l=s.baseLine,d=s.isAnimationActive,u=this.state,m=u.prevPoints,p=u.prevBaseLine,f=u.totalLength;return d&&i&&i.length&&(!m&&f>0||!As(m,i)||!As(p,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(i,l,n,a)}},{key:"render",value:function(){var n,a=this.props,s=a.hide,i=a.dot,l=a.points,d=a.className,u=a.top,m=a.left,p=a.xAxis,f=a.yAxis,x=a.width,b=a.height,y=a.isAnimationActive,g=a.id;if(s||!l||!l.length)return null;var j=this.state.isAnimationFinished,k=l.length===1,S=st("recharts-area",d),A=p&&p.allowDataOverflow,w=f&&f.allowDataOverflow,E=A||w,T=nt(g)?this.id:g,O=(n=Ge(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},D=O.r,I=D===void 0?3:D,M=O.strokeWidth,L=M===void 0?2:M,B=L6(i)?i:{},z=B.clipDot,W=z===void 0?!0:z,R=I*2+L;return X.createElement(lt,{className:S},A||w?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(T)},X.createElement("rect",{x:A?m:m-x/2,y:w?u:u-b/2,width:A?x:x*2,height:w?b:b*2})),!W&&X.createElement("clipPath",{id:"clipPath-dots-".concat(T)},X.createElement("rect",{x:m-R/2,y:u-R/2,width:x+R,height:b+R}))):null,k?null:this.renderArea(E,T),(i||k)&&this.renderDots(E,W,T),(!y||j)&&on.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(N.PureComponent);zO=da;oa(da,"displayName","Area");oa(da,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});oa(da,"getBaseValue",function(e,r,n,a){var s=e.layout,i=e.baseValue,l=r.props.baseValue,d=l??i;if(Ce(d)&&typeof d=="number")return d;var u=s==="horizontal"?a:n,m=u.scale.domain();if(u.type==="number"){var p=Math.max(m[0],m[1]),f=Math.min(m[0],m[1]);return d==="dataMin"?f:d==="dataMax"||p<0?p:Math.max(Math.min(m[0],m[1]),0)}return d==="dataMin"?m[0]:d==="dataMax"?m[1]:m[0]});oa(da,"getComposedData",function(e){var r=e.props,n=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,d=e.bandSize,u=e.dataKey,m=e.stackedData,p=e.dataStartIndex,f=e.displayedData,x=e.offset,b=r.layout,y=m&&m.length,g=zO.getBaseValue(r,n,a,s),j=b==="horizontal",k=!1,S=f.map(function(w,E){var T;y?T=m[p+E]:(T=Ft(w,u),Array.isArray(T)?k=!0:T=[g,T]);var O=T[1]==null||y&&Ft(w,u)==null;return j?{x:Ju({axis:a,ticks:i,bandSize:d,entry:w,index:E}),y:O?null:s.scale(T[1]),value:T,payload:w}:{x:O?null:a.scale(T[1]),y:Ju({axis:s,ticks:l,bandSize:d,entry:w,index:E}),value:T,payload:w}}),A;return y||k?A=S.map(function(w){var E=Array.isArray(w.value)?w.value[0]:null;return j?{x:w.x,y:E!=null&&w.y!=null?s.scale(E):null}:{x:E!=null?a.scale(E):null,y:w.y}}):A=j?s.scale(g):a.scale(g),gs({points:S,baseLine:A,layout:b,isRange:k},x)});oa(da,"renderDotItem",function(e,r){var n;if(X.isValidElement(e))n=X.cloneElement(e,r);else if(Qe(e))n=e(r);else{var a=st("recharts-area-dot",typeof e!="boolean"?e.className:""),s=r.key,i=BO(r,fH);n=X.createElement(Vc,si({},i,{key:s,className:a}))}return n});function Lo(e){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lo(e)}function kH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function SH(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,HO(a.key),a)}}function CH(e,r,n){return r&&SH(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AH(e,r,n){return r=wm(r),EH(e,qO()?Reflect.construct(r,n||[],wm(e).constructor):r.apply(e,n))}function EH(e,r){if(r&&(Lo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OH(e)}function OH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qO=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wm(e)}function TH(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Qy(e,r)}function Qy(e,r){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qy(e,r)}function VO(e,r,n){return r=HO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function HO(e){var r=PH(e,"string");return Lo(r)=="symbol"?r:r+""}function PH(e,r){if(Lo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Lo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ev.apply(this,arguments)}function DH(e){var r=e.xAxisId,n=Nj(),a=kj(),s=CO(r);return s==null?null:N.createElement(Zo,ev({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(i){return Ma(i,!0)}}))}var Kn=(function(e){function r(){return kH(this,r),AH(this,r,arguments)}return TH(r,e),CH(r,[{key:"render",value:function(){return N.createElement(DH,this.props)}}])})(N.Component);VO(Kn,"displayName","XAxis");VO(Kn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _o(e){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_o(e)}function IH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function MH(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YO(a.key),a)}}function LH(e,r,n){return r&&MH(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _H(e,r,n){return r=Nm(r),FH(e,GO()?Reflect.construct(r,n||[],Nm(e).constructor):r.apply(e,n))}function FH(e,r){if(r&&(_o(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RH(e)}function RH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GO=function(){return!!e})()}function Nm(e){return Nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nm(e)}function $H(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&tv(e,r)}function tv(e,r){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,r)}function KO(e,r,n){return r=YO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function YO(e){var r=zH(e,"string");return _o(r)=="symbol"?r:r+""}function zH(e,r){if(_o(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(_o(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rv.apply(this,arguments)}var BH=function(e){var r=e.yAxisId,n=Nj(),a=kj(),s=AO(r);return s==null?null:N.createElement(Zo,rv({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(i){return Ma(i,!0)}}))},Cn=(function(e){function r(){return IH(this,r),_H(this,r,arguments)}return $H(r,e),LH(r,[{key:"render",value:function(){return N.createElement(BH,this.props)}}])})(N.Component);KO(Cn,"displayName","YAxis");KO(Cn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function i3(e){return VH(e)||qH(e)||UH(e)||WH()}function WH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(e,r){if(e){if(typeof e=="string")return nv(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nv(e,r)}}function qH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VH(e){if(Array.isArray(e))return nv(e)}function nv(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}var av=function(e,r,n,a,s){var i=Yr(e,Cj),l=Yr(e,dp),d=[].concat(i3(i),i3(l)),u=Yr(e,mp),m="".concat(a,"Id"),p=a[0],f=r;if(d.length&&(f=d.reduce(function(y,g){if(g.props[m]===n&&ca(g.props,"extendDomain")&&Ce(g.props[p])){var j=g.props[p];return[Math.min(y[0],j),Math.max(y[1],j)]}return y},f)),u.length){var x="".concat(p,"1"),b="".concat(p,"2");f=u.reduce(function(y,g){if(g.props[m]===n&&ca(g.props,"extendDomain")&&Ce(g.props[x])&&Ce(g.props[b])){var j=g.props[x],k=g.props[b];return[Math.min(y[0],j,k),Math.max(y[1],j,k)]}return y},f)}return s&&s.length&&(f=s.reduce(function(y,g){return Ce(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},f)),f},o3={exports:{}},l3;function HH(){return l3||(l3=1,(function(e){var r=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(u,m,p){this.fn=u,this.context=m,this.once=p||!1}function i(u,m,p,f,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new s(p,f||u,x),y=n?n+m:m;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],b]:u._events[y].push(b):(u._events[y]=b,u._eventsCount++),u}function l(u,m){--u._eventsCount===0?u._events=new a:delete u._events[m]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var u=[],m,p;if(this._eventsCount===0)return u;for(p in m=this._events)r.call(m,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(m)):u},d.prototype.listeners=function(u){var m=n?n+u:u,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,x=p.length,b=new Array(x);f<x;f++)b[f]=p[f].fn;return b},d.prototype.listenerCount=function(u){var m=n?n+u:u,p=this._events[m];return p?p.fn?1:p.length:0},d.prototype.emit=function(u,m,p,f,x,b){var y=n?n+u:u;if(!this._events[y])return!1;var g=this._events[y],j=arguments.length,k,S;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),j){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,m),!0;case 3:return g.fn.call(g.context,m,p),!0;case 4:return g.fn.call(g.context,m,p,f),!0;case 5:return g.fn.call(g.context,m,p,f,x),!0;case 6:return g.fn.call(g.context,m,p,f,x,b),!0}for(S=1,k=new Array(j-1);S<j;S++)k[S-1]=arguments[S];g.fn.apply(g.context,k)}else{var A=g.length,w;for(S=0;S<A;S++)switch(g[S].once&&this.removeListener(u,g[S].fn,void 0,!0),j){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,m);break;case 3:g[S].fn.call(g[S].context,m,p);break;case 4:g[S].fn.call(g[S].context,m,p,f);break;default:if(!k)for(w=1,k=new Array(j-1);w<j;w++)k[w-1]=arguments[w];g[S].fn.apply(g[S].context,k)}}return!0},d.prototype.on=function(u,m,p){return i(this,u,m,p,!1)},d.prototype.once=function(u,m,p){return i(this,u,m,p,!0)},d.prototype.removeListener=function(u,m,p,f){var x=n?n+u:u;if(!this._events[x])return this;if(!m)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===m&&(!f||b.once)&&(!p||b.context===p)&&l(this,x);else{for(var y=0,g=[],j=b.length;y<j;y++)(b[y].fn!==m||f&&!b[y].once||p&&b[y].context!==p)&&g.push(b[y]);g.length?this._events[x]=g.length===1?g[0]:g:l(this,x)}return this},d.prototype.removeAllListeners=function(u){var m;return u?(m=n?n+u:u,this._events[m]&&l(this,m)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(o3)),o3.exports}var GH=HH();const KH=jt(GH);var Gb=new KH,Kb="recharts.syncMouseEvents";function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_c(e)}function YH(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function XH(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XO(a.key),a)}}function JH(e,r,n){return r&&XH(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yb(e,r,n){return r=XO(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function XO(e){var r=ZH(e,"string");return _c(r)=="symbol"?r:r+""}function ZH(e,r){if(_c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(_c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QH=(function(){function e(){YH(this,e),Yb(this,"activeIndex",0),Yb(this,"coordinateList",[]),Yb(this,"layout","horizontal")}return JH(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,i=r.container,l=i===void 0?null:i,d=r.layout,u=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,f=r.mouseHandlerCallback,x=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,i=a.y,l=a.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=s+d+u,f=i+this.offset.top+l/2+m;this.mouseHandlerCallback({pageX:p,pageY:f})}}}])})();function eG(e,r,n){if(n==="number"&&r===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&Ce(a)&&Ce(s))return!0}return!1}function tG(e,r,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:r.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function JO(e){var r=e.cx,n=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,l=Tt(r,n,a,s),d=Tt(r,n,a,i);return{points:[l,d],cx:r,cy:n,radius:a,startAngle:s,endAngle:i}}function rG(e,r,n){var a,s,i,l;if(e==="horizontal")a=r.x,i=a,s=n.top,l=n.top+n.height;else if(e==="vertical")s=r.y,l=s,a=n.left,i=n.left+n.width;else if(r.cx!=null&&r.cy!=null)if(e==="centric"){var d=r.cx,u=r.cy,m=r.innerRadius,p=r.outerRadius,f=r.angle,x=Tt(d,u,m,f),b=Tt(d,u,p,f);a=x.x,s=x.y,i=b.x,l=b.y}else return JO(r);return[{x:a,y:s},{x:i,y:l}]}function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fc(e)}function c3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function fu(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?c3(Object(n),!0).forEach(function(a){nG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nG(e,r,n){return r=aG(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function aG(e){var r=sG(e,"string");return Fc(r)=="symbol"?r:r+""}function sG(e,r){if(Fc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function iG(e){var r,n,a=e.element,s=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,d=e.activePayload,u=e.offset,m=e.activeTooltipIndex,p=e.tooltipAxisBandSize,f=e.layout,x=e.chartName,b=(r=a.props.cursor)!==null&&r!==void 0?r:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!b||!i||!l||x!=="ScatterChart"&&s!=="axis")return null;var y,g=ci;if(x==="ScatterChart")y=l,g=wW;else if(x==="BarChart")y=tG(f,l,u,p),g=fj;else if(f==="radial"){var j=JO(l),k=j.cx,S=j.cy,A=j.radius,w=j.startAngle,E=j.endAngle;y={cx:k,cy:S,startAngle:w,endAngle:E,innerRadius:A,outerRadius:A},g=KE}else y={points:rG(f,l,u)},g=ci;var T=fu(fu(fu(fu({stroke:"#ccc",pointerEvents:"none"},u),y),Ge(b,!1)),{},{payload:d,payloadIndex:m,className:st("recharts-tooltip-cursor",b.className)});return N.isValidElement(b)?N.cloneElement(b,T):N.createElement(g,T)}var oG=["item"],lG=["children","className","width","height","style","compact","title","desc"];function Fo(e){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fo(e)}function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oo.apply(this,arguments)}function d3(e,r){return uG(e)||dG(e,r)||QO(e,r)||cG()}function cG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dG(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function uG(e){if(Array.isArray(e))return e}function u3(e,r){if(e==null)return{};var n=mG(e,r),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function mG(e,r){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;n[a]=e[a]}return n}function pG(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function hG(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eT(a.key),a)}}function fG(e,r,n){return r&&hG(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xG(e,r,n){return r=km(r),gG(e,ZO()?Reflect.construct(r,n||[],km(e).constructor):r.apply(e,n))}function gG(e,r){if(r&&(Fo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bG(e)}function bG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZO=function(){return!!e})()}function km(e){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},km(e)}function yG(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&sv(e,r)}function sv(e,r){return sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sv(e,r)}function Ro(e){return wG(e)||jG(e)||QO(e)||vG()}function vG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QO(e,r){if(e){if(typeof e=="string")return iv(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iv(e,r)}}function jG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wG(e){if(Array.isArray(e))return iv(e)}function iv(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function m3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ye(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?m3(Object(n),!0).forEach(function(a){tt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tt(e,r,n){return r=eT(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function eT(e){var r=NG(e,"string");return Fo(r)=="symbol"?r:r+""}function NG(e,r){if(Fo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Fo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var kG={xAxis:["bottom","top"],yAxis:["left","right"]},SG={width:"100%",height:"100%"},tT={x:0,y:0};function xu(e){return e}var CG=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},AG=function(e,r,n,a){var s=r.find(function(m){return m&&m.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,l=a.radius;return ye(ye(ye({},a),Tt(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var d=s.coordinate,u=a.angle;return ye(ye(ye({},a),Tt(a.cx,a.cy,d,u)),{},{angle:u,radius:d})}return tT},pp=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,i=(n??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(Ro(l),Ro(u)):l},[]);return i.length>0?i:e&&e.length&&Ce(a)&&Ce(s)?e.slice(a,s+1):[]};function rT(e){return e==="number"?[0,"auto"]:void 0}var ov=function(e,r,n,a){var s=e.graphicalItems,i=e.tooltipAxis,l=pp(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(d,u){var m,p=(m=u.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(i.dataKey&&!i.allowDuplicatedCategory){var x=p===void 0?l:p;f=Cu(x,i.dataKey,a)}else f=p&&p[n]||l[n];return f?[].concat(Ro(d),[BE(u,f)]):d},[])},p3=function(e,r,n,a){var s=a||{x:e.chartX,y:e.chartY},i=CG(s,n),l=e.orderedTooltipTicks,d=e.tooltipAxis,u=e.tooltipTicks,m=GR(i,l,u,d);if(m>=0&&u){var p=u[m]&&u[m].value,f=ov(e,r,m,p),x=AG(n,l,m,s);return{activeTooltipIndex:m,activeLabel:p,activePayload:f,activeCoordinate:x}}return null},EG=function(e,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,i=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=e.layout,p=e.children,f=e.stackOffset,x=LE(m,s);return n.reduce(function(b,y){var g,j=y.type.defaultProps!==void 0?ye(ye({},y.type.defaultProps),y.props):y.props,k=j.type,S=j.dataKey,A=j.allowDataOverflow,w=j.allowDuplicatedCategory,E=j.scale,T=j.ticks,O=j.includeHidden,D=j[i];if(b[D])return b;var I=pp(e.data,{graphicalItems:a.filter(function(F){var _,G=i in F.props?F.props[i]:(_=F.type.defaultProps)===null||_===void 0?void 0:_[i];return G===D}),dataStartIndex:d,dataEndIndex:u}),M=I.length,L,B,z;eG(j.domain,A,k)&&(L=vy(j.domain,null,A),x&&(k==="number"||E!=="auto")&&(z=ju(I,S,"category")));var W=rT(k);if(!L||L.length===0){var R,H=(R=j.domain)!==null&&R!==void 0?R:W;if(S){if(L=ju(I,S,k),k==="category"&&x){var U=ZD(L);w&&U?(B=L,L=dm(0,M)):w||(L=l5(H,L,y).reduce(function(F,_){return F.indexOf(_)>=0?F:[].concat(Ro(F),[_])},[]))}else if(k==="category")w?L=L.filter(function(F){return F!==""&&!nt(F)}):L=l5(H,L,y).reduce(function(F,_){return F.indexOf(_)>=0||_===""||nt(_)?F:[].concat(Ro(F),[_])},[]);else if(k==="number"){var q=ZR(I,a.filter(function(F){var _,G,Z=i in F.props?F.props[i]:(_=F.type.defaultProps)===null||_===void 0?void 0:_[i],oe="hide"in F.props?F.props.hide:(G=F.type.defaultProps)===null||G===void 0?void 0:G.hide;return Z===D&&(O||!oe)}),S,s,m);q&&(L=q)}x&&(k==="number"||E!=="auto")&&(z=ju(I,S,"category"))}else x?L=dm(0,M):l&&l[D]&&l[D].hasStack&&k==="number"?L=f==="expand"?[0,1]:zE(l[D].stackGroups,d,u):L=ME(I,a.filter(function(F){var _=i in F.props?F.props[i]:F.type.defaultProps[i],G="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return _===D&&(O||!G)}),k,m,!0);if(k==="number")L=av(p,L,D,s,T),H&&(L=vy(H,L,A));else if(k==="category"&&H){var Q=H,K=L.every(function(F){return Q.indexOf(F)>=0});K&&(L=Q)}}return ye(ye({},b),{},tt({},D,ye(ye({},j),{},{axisType:s,domain:L,categoricalDomain:z,duplicateDomain:B,originalDomain:(g=j.domain)!==null&&g!==void 0?g:W,isCategorical:x,layout:m})))},{})},OG=function(e,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,i=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=e.layout,p=e.children,f=pp(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:u}),x=f.length,b=LE(m,s),y=-1;return n.reduce(function(g,j){var k=j.type.defaultProps!==void 0?ye(ye({},j.type.defaultProps),j.props):j.props,S=k[i],A=rT("number");if(!g[S]){y++;var w;return b?w=dm(0,x):l&&l[S]&&l[S].hasStack?(w=zE(l[S].stackGroups,d,u),w=av(p,w,S,s)):(w=vy(A,ME(f,n.filter(function(E){var T,O,D=i in E.props?E.props[i]:(T=E.type.defaultProps)===null||T===void 0?void 0:T[i],I="hide"in E.props?E.props.hide:(O=E.type.defaultProps)===null||O===void 0?void 0:O.hide;return D===S&&!I}),"number",m),a.defaultProps.allowDataOverflow),w=av(p,w,S,s)),ye(ye({},g),{},tt({},S,ye(ye({axisType:s},a.defaultProps),{},{hide:!0,orientation:sn(kG,"".concat(s,".").concat(y%2),null),domain:w,originalDomain:A,isCategorical:b,layout:m})))}return g},{})},TG=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,i=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,m=e.children,p="".concat(a,"Id"),f=Yr(m,s),x={};return f&&f.length?x=EG(e,{axes:f,graphicalItems:i,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):i&&i.length&&(x=OG(e,{Axis:s,graphicalItems:i,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),x},PG=function(e){var r=ys(e),n=Ma(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Wv(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Zu(r,n)}},h3=function(e){var r=e.children,n=e.defaultShowTooltip,a=nn(r,Ao),s=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(i=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},DG=function(e){return!e||!e.length?!1:e.some(function(r){var n=La(r&&r.type);return n&&n.indexOf("Bar")>=0})},f3=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IG=function(e,r){var n=e.props,a=e.graphicalItems,s=e.xAxisMap,i=s===void 0?{}:s,l=e.yAxisMap,d=l===void 0?{}:l,u=n.width,m=n.height,p=n.children,f=n.margin||{},x=nn(p,Ao),b=nn(p,Nn),y=Object.keys(d).reduce(function(w,E){var T=d[E],O=T.orientation;return!T.mirror&&!T.hide?ye(ye({},w),{},tt({},O,w[O]+T.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(i).reduce(function(w,E){var T=i[E],O=T.orientation;return!T.mirror&&!T.hide?ye(ye({},w),{},tt({},O,sn(w,"".concat(O))+T.height)):w},{top:f.top||0,bottom:f.bottom||0}),j=ye(ye({},g),y),k=j.bottom;x&&(j.bottom+=x.props.height||Ao.defaultProps.height),b&&r&&(j=XR(j,a,n,r));var S=u-j.left-j.right,A=m-j.top-j.bottom;return ye(ye({brushBottom:k},j),{},{width:Math.max(S,0),height:Math.max(A,0)})},MG=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Hc=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,i=e.validateTooltipEventTypes,l=i===void 0?["axis"]:i,d=e.axisComponents,u=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,f=function(g,j){var k=j.graphicalItems,S=j.stackGroups,A=j.offset,w=j.updateId,E=j.dataStartIndex,T=j.dataEndIndex,O=g.barSize,D=g.layout,I=g.barGap,M=g.barCategoryGap,L=g.maxBarSize,B=f3(D),z=B.numericAxisName,W=B.cateAxisName,R=DG(k),H=[];return k.forEach(function(U,q){var Q=pp(g.data,{graphicalItems:[U],dataStartIndex:E,dataEndIndex:T}),K=U.type.defaultProps!==void 0?ye(ye({},U.type.defaultProps),U.props):U.props,F=K.dataKey,_=K.maxBarSize,G=K["".concat(z,"Id")],Z=K["".concat(W,"Id")],oe={},le=d.reduce(function(ae,je){var Ie=j["".concat(je.axisType,"Map")],ee=K["".concat(je.axisType,"Id")];Ie&&Ie[ee]||je.axisType==="zAxis"||mi();var Ee=Ie[ee];return ye(ye({},ae),{},tt(tt({},je.axisType,Ee),"".concat(je.axisType,"Ticks"),Ma(Ee)))},oe),ge=le[W],ve=le["".concat(W,"Ticks")],fe=S&&S[G]&&S[G].hasStack&&o$(U,S[G].stackGroups),Y=La(U.type).indexOf("Bar")>=0,ne=Zu(ge,ve),ue=[],Ve=R&&KR({barSize:O,stackGroups:S,totalSize:MG(le,W)});if(Y){var Te,Pe,Xe=nt(_)?L:_,pe=(Te=(Pe=Zu(ge,ve,!0))!==null&&Pe!==void 0?Pe:Xe)!==null&&Te!==void 0?Te:0;ue=YR({barGap:I,barCategoryGap:M,bandSize:pe!==ne?pe:ne,sizeList:Ve[Z],maxBarSize:Xe}),pe!==ne&&(ue=ue.map(function(ae){return ye(ye({},ae),{},{position:ye(ye({},ae.position),{},{offset:ae.position.offset-pe/2})})}))}var Oe=U&&U.type&&U.type.getComposedData;Oe&&H.push({props:ye(ye({},Oe(ye(ye({},le),{},{displayedData:Q,props:g,dataKey:F,item:U,bandSize:ne,barPosition:ue,offset:A,stackedData:fe,layout:D,dataStartIndex:E,dataEndIndex:T}))),{},tt(tt(tt({key:U.key||"item-".concat(q)},z,le[z]),W,le[W]),"animationId",w)),childIndex:uI(U,g.children),item:U})}),H},x=function(g,j){var k=g.props,S=g.dataStartIndex,A=g.dataEndIndex,w=g.updateId;if(!NN({props:k}))return null;var E=k.children,T=k.layout,O=k.stackOffset,D=k.data,I=k.reverseStackOrder,M=f3(T),L=M.numericAxisName,B=M.cateAxisName,z=Yr(E,n),W=s$(D,z,"".concat(L,"Id"),"".concat(B,"Id"),O,I),R=d.reduce(function(K,F){var _="".concat(F.axisType,"Map");return ye(ye({},K),{},tt({},_,TG(k,ye(ye({},F),{},{graphicalItems:z,stackGroups:F.axisType===L&&W,dataStartIndex:S,dataEndIndex:A}))))},{}),H=IG(ye(ye({},R),{},{props:k,graphicalItems:z}),j?.legendBBox);Object.keys(R).forEach(function(K){R[K]=m(k,R[K],H,K.replace("Map",""),r)});var U=R["".concat(B,"Map")],q=PG(U),Q=f(k,ye(ye({},R),{},{dataStartIndex:S,dataEndIndex:A,updateId:w,graphicalItems:z,stackGroups:W,offset:H}));return ye(ye({formattedGraphicalItems:Q,graphicalItems:z,offset:H,stackGroups:W},q),R)},b=(function(g){function j(k){var S,A,w;return pG(this,j),w=xG(this,j,[k]),tt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),tt(w,"accessibilityManager",new QH),tt(w,"handleLegendBBoxUpdate",function(E){if(E){var T=w.state,O=T.dataStartIndex,D=T.dataEndIndex,I=T.updateId;w.setState(ye({legendBBox:E},x({props:w.props,dataStartIndex:O,dataEndIndex:D,updateId:I},ye(ye({},w.state),{},{legendBBox:E}))))}}),tt(w,"handleReceiveSyncEvent",function(E,T,O){if(w.props.syncId===E){if(O===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(T)}}),tt(w,"handleBrushChange",function(E){var T=E.startIndex,O=E.endIndex;if(T!==w.state.dataStartIndex||O!==w.state.dataEndIndex){var D=w.state.updateId;w.setState(function(){return ye({dataStartIndex:T,dataEndIndex:O},x({props:w.props,dataStartIndex:T,dataEndIndex:O,updateId:D},w.state))}),w.triggerSyncEvent({dataStartIndex:T,dataEndIndex:O})}}),tt(w,"handleMouseEnter",function(E){var T=w.getMouseInfo(E);if(T){var O=ye(ye({},T),{},{isTooltipActive:!0});w.setState(O),w.triggerSyncEvent(O);var D=w.props.onMouseEnter;Qe(D)&&D(O,E)}}),tt(w,"triggeredAfterMouseMove",function(E){var T=w.getMouseInfo(E),O=T?ye(ye({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(O),w.triggerSyncEvent(O);var D=w.props.onMouseMove;Qe(D)&&D(O,E)}),tt(w,"handleItemMouseEnter",function(E){w.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),tt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),tt(w,"handleMouseMove",function(E){E.persist(),w.throttleTriggeredAfterMouseMove(E)}),tt(w,"handleMouseLeave",function(E){w.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};w.setState(T),w.triggerSyncEvent(T);var O=w.props.onMouseLeave;Qe(O)&&O(T,E)}),tt(w,"handleOuterEvent",function(E){var T=dI(E),O=sn(w.props,"".concat(T));if(T&&Qe(O)){var D,I;/.*touch.*/i.test(T)?I=w.getMouseInfo(E.changedTouches[0]):I=w.getMouseInfo(E),O((D=I)!==null&&D!==void 0?D:{},E)}}),tt(w,"handleClick",function(E){var T=w.getMouseInfo(E);if(T){var O=ye(ye({},T),{},{isTooltipActive:!0});w.setState(O),w.triggerSyncEvent(O);var D=w.props.onClick;Qe(D)&&D(O,E)}}),tt(w,"handleMouseDown",function(E){var T=w.props.onMouseDown;if(Qe(T)){var O=w.getMouseInfo(E);T(O,E)}}),tt(w,"handleMouseUp",function(E){var T=w.props.onMouseUp;if(Qe(T)){var O=w.getMouseInfo(E);T(O,E)}}),tt(w,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),tt(w,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&w.handleMouseDown(E.changedTouches[0])}),tt(w,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&w.handleMouseUp(E.changedTouches[0])}),tt(w,"handleDoubleClick",function(E){var T=w.props.onDoubleClick;if(Qe(T)){var O=w.getMouseInfo(E);T(O,E)}}),tt(w,"handleContextMenu",function(E){var T=w.props.onContextMenu;if(Qe(T)){var O=w.getMouseInfo(E);T(O,E)}}),tt(w,"triggerSyncEvent",function(E){w.props.syncId!==void 0&&Gb.emit(Kb,w.props.syncId,E,w.eventEmitterSymbol)}),tt(w,"applySyncEvent",function(E){var T=w.props,O=T.layout,D=T.syncMethod,I=w.state.updateId,M=E.dataStartIndex,L=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)w.setState(ye({dataStartIndex:M,dataEndIndex:L},x({props:w.props,dataStartIndex:M,dataEndIndex:L,updateId:I},w.state)));else if(E.activeTooltipIndex!==void 0){var B=E.chartX,z=E.chartY,W=E.activeTooltipIndex,R=w.state,H=R.offset,U=R.tooltipTicks;if(!H)return;if(typeof D=="function")W=D(U,E);else if(D==="value"){W=-1;for(var q=0;q<U.length;q++)if(U[q].value===E.activeLabel){W=q;break}}var Q=ye(ye({},H),{},{x:H.left,y:H.top}),K=Math.min(B,Q.x+Q.width),F=Math.min(z,Q.y+Q.height),_=U[W]&&U[W].value,G=ov(w.state,w.props.data,W),Z=U[W]?{x:O==="horizontal"?U[W].coordinate:K,y:O==="horizontal"?F:U[W].coordinate}:tT;w.setState(ye(ye({},E),{},{activeLabel:_,activeCoordinate:Z,activePayload:G,activeTooltipIndex:W}))}else w.setState(E)}),tt(w,"renderCursor",function(E){var T,O=w.state,D=O.isTooltipActive,I=O.activeCoordinate,M=O.activePayload,L=O.offset,B=O.activeTooltipIndex,z=O.tooltipAxisBandSize,W=w.getTooltipEventType(),R=(T=E.props.active)!==null&&T!==void 0?T:D,H=w.props.layout,U=E.key||"_recharts-cursor";return X.createElement(iG,{key:U,activeCoordinate:I,activePayload:M,activeTooltipIndex:B,chartName:r,element:E,isActive:R,layout:H,offset:L,tooltipAxisBandSize:z,tooltipEventType:W})}),tt(w,"renderPolarAxis",function(E,T,O){var D=sn(E,"type.axisType"),I=sn(w.state,"".concat(D,"Map")),M=E.type.defaultProps,L=M!==void 0?ye(ye({},M),E.props):E.props,B=I&&I[L["".concat(D,"Id")]];return N.cloneElement(E,ye(ye({},B),{},{className:st(D,B.className),key:E.key||"".concat(T,"-").concat(O),ticks:Ma(B,!0)}))}),tt(w,"renderPolarGrid",function(E){var T=E.props,O=T.radialLines,D=T.polarAngles,I=T.polarRadius,M=w.state,L=M.radiusAxisMap,B=M.angleAxisMap,z=ys(L),W=ys(B),R=W.cx,H=W.cy,U=W.innerRadius,q=W.outerRadius;return N.cloneElement(E,{polarAngles:Array.isArray(D)?D:Ma(W,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(I)?I:Ma(z,!0).map(function(Q){return Q.coordinate}),cx:R,cy:H,innerRadius:U,outerRadius:q,key:E.key||"polar-grid",radialLines:O})}),tt(w,"renderLegend",function(){var E=w.state.formattedGraphicalItems,T=w.props,O=T.children,D=T.width,I=T.height,M=w.props.margin||{},L=D-(M.left||0)-(M.right||0),B=DE({children:O,formattedGraphicalItems:E,legendWidth:L,legendContent:u});if(!B)return null;var z=B.item,W=u3(B,oG);return N.cloneElement(z,ye(ye({},W),{},{chartWidth:D,chartHeight:I,margin:M,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),tt(w,"renderTooltip",function(){var E,T=w.props,O=T.children,D=T.accessibilityLayer,I=nn(O,Bt);if(!I)return null;var M=w.state,L=M.isTooltipActive,B=M.activeCoordinate,z=M.activePayload,W=M.activeLabel,R=M.offset,H=(E=I.props.active)!==null&&E!==void 0?E:L;return N.cloneElement(I,{viewBox:ye(ye({},R),{},{x:R.left,y:R.top}),active:H,label:W,payload:H?z:[],coordinate:B,accessibilityLayer:D})}),tt(w,"renderBrush",function(E){var T=w.props,O=T.margin,D=T.data,I=w.state,M=I.offset,L=I.dataStartIndex,B=I.dataEndIndex,z=I.updateId;return N.cloneElement(E,{key:E.key||"_recharts-brush",onChange:uu(w.handleBrushChange,E.props.onChange),data:D,x:Ce(E.props.x)?E.props.x:M.left,y:Ce(E.props.y)?E.props.y:M.top+M.height+M.brushBottom-(O.bottom||0),width:Ce(E.props.width)?E.props.width:M.width,startIndex:L,endIndex:B,updateId:"brush-".concat(z)})}),tt(w,"renderReferenceElement",function(E,T,O){if(!E)return null;var D=w,I=D.clipPathId,M=w.state,L=M.xAxisMap,B=M.yAxisMap,z=M.offset,W=E.type.defaultProps||{},R=E.props,H=R.xAxisId,U=H===void 0?W.xAxisId:H,q=R.yAxisId,Q=q===void 0?W.yAxisId:q;return N.cloneElement(E,{key:E.key||"".concat(T,"-").concat(O),xAxis:L[U],yAxis:B[Q],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:I})}),tt(w,"renderActivePoints",function(E){var T=E.item,O=E.activePoint,D=E.basePoint,I=E.childIndex,M=E.isRange,L=[],B=T.props.key,z=T.item.type.defaultProps!==void 0?ye(ye({},T.item.type.defaultProps),T.item.props):T.item.props,W=z.activeDot,R=z.dataKey,H=ye(ye({index:I,dataKey:R,cx:O.x,cy:O.y,r:4,fill:hj(T.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Ge(W,!1)),Au(W));return L.push(j.renderActiveDot(W,H,"".concat(B,"-activePoint-").concat(I))),D?L.push(j.renderActiveDot(W,ye(ye({},H),{},{cx:D.x,cy:D.y}),"".concat(B,"-basePoint-").concat(I))):M&&L.push(null),L}),tt(w,"renderGraphicChild",function(E,T,O){var D=w.filterFormatItem(E,T,O);if(!D)return null;var I=w.getTooltipEventType(),M=w.state,L=M.isTooltipActive,B=M.tooltipAxis,z=M.activeTooltipIndex,W=M.activeLabel,R=w.props.children,H=nn(R,Bt),U=D.props,q=U.points,Q=U.isRange,K=U.baseLine,F=D.item.type.defaultProps!==void 0?ye(ye({},D.item.type.defaultProps),D.item.props):D.item.props,_=F.activeDot,G=F.hide,Z=F.activeBar,oe=F.activeShape,le=!!(!G&&L&&H&&(_||Z||oe)),ge={};I!=="axis"&&H&&H.props.trigger==="click"?ge={onClick:uu(w.handleItemMouseEnter,E.props.onClick)}:I!=="axis"&&(ge={onMouseLeave:uu(w.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:uu(w.handleItemMouseEnter,E.props.onMouseEnter)});var ve=N.cloneElement(E,ye(ye({},D.props),ge));function fe(Ie){return typeof B.dataKey=="function"?B.dataKey(Ie.payload):null}if(le)if(z>=0){var Y,ne;if(B.dataKey&&!B.allowDuplicatedCategory){var ue=typeof B.dataKey=="function"?fe:"payload.".concat(B.dataKey.toString());Y=Cu(q,ue,W),ne=Q&&K&&Cu(K,ue,W)}else Y=q?.[z],ne=Q&&K&&K[z];if(oe||Z){var Ve=E.props.activeIndex!==void 0?E.props.activeIndex:z;return[N.cloneElement(E,ye(ye(ye({},D.props),ge),{},{activeIndex:Ve})),null,null]}if(!nt(Y))return[ve].concat(Ro(w.renderActivePoints({item:D,activePoint:Y,basePoint:ne,childIndex:z,isRange:Q})))}else{var Te,Pe=(Te=w.getItemByXY(w.state.activeCoordinate))!==null&&Te!==void 0?Te:{graphicalItem:ve},Xe=Pe.graphicalItem,pe=Xe.item,Oe=pe===void 0?E:pe,ae=Xe.childIndex,je=ye(ye(ye({},D.props),ge),{},{activeIndex:ae});return[N.cloneElement(Oe,je),null,null]}return Q?[ve,null,null]:[ve,null]}),tt(w,"renderCustomized",function(E,T,O){return N.cloneElement(E,ye(ye({key:"recharts-customized-".concat(O)},w.props),w.state))}),tt(w,"renderMap",{CartesianGrid:{handler:xu,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:xu},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:xu},YAxis:{handler:xu},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((S=k.id)!==null&&S!==void 0?S:xi("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=PA(w.triggeredAfterMouseMove,(A=k.throttleDelay)!==null&&A!==void 0?A:1e3/60),w.state={},w}return yG(j,g),fG(j,[{key:"componentDidMount",value:function(){var k,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,S=k.children,A=k.data,w=k.height,E=k.layout,T=nn(S,Bt);if(T){var O=T.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,I=ov(this.state,A,O,D),M=this.state.tooltipTicks[O].coordinate,L=(this.state.offset.top+w)/2,B=E==="horizontal",z=B?{x:M,y:L}:{y:M,x:L},W=this.state.formattedGraphicalItems.find(function(H){var U=H.item;return U.type.name==="Scatter"});W&&(z=ye(ye({},z),W.props.points[O].tooltipPosition),I=W.props.points[O].tooltipPayload);var R={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:D,activePayload:I,activeCoordinate:z};this.setState(R),this.renderCursor(T),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var A,w;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(k){W0([nn(k.children,Bt)],[nn(this.props.children,Bt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=nn(this.props.children,Bt);if(k&&typeof k.props.shared=="boolean"){var S=k.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var S=this.container,A=S.getBoundingClientRect(),w=$7(A),E={chartX:Math.round(k.pageX-w.left),chartY:Math.round(k.pageY-w.top)},T=A.width/S.offsetWidth||1,O=this.inRange(E.chartX,E.chartY,T);if(!O)return null;var D=this.state,I=D.xAxisMap,M=D.yAxisMap,L=this.getTooltipEventType(),B=p3(this.state,this.props.data,this.props.layout,O);if(L!=="axis"&&I&&M){var z=ys(I).scale,W=ys(M).scale,R=z&&z.invert?z.invert(E.chartX):null,H=W&&W.invert?W.invert(E.chartY):null;return ye(ye({},E),{},{xValue:R,yValue:H},B)}return B?ye(ye({},E),B):null}},{key:"inRange",value:function(k,S){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,E=k/A,T=S/A;if(w==="horizontal"||w==="vertical"){var O=this.state.offset,D=E>=O.left&&E<=O.left+O.width&&T>=O.top&&T<=O.top+O.height;return D?{x:E,y:T}:null}var I=this.state,M=I.angleAxisMap,L=I.radiusAxisMap;if(M&&L){var B=ys(M);return u5({x:E,y:T},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,S=this.getTooltipEventType(),A=nn(k,Bt),w={};A&&S==="axis"&&(A.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Au(this.props,this.handleOuterEvent);return ye(ye({},E),w)}},{key:"addListener",value:function(){Gb.on(Kb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Gb.removeListener(Kb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,S,A){for(var w=this.state.formattedGraphicalItems,E=0,T=w.length;E<T;E++){var O=w[E];if(O.item===k||O.props.key===k.key||S===La(O.item.type)&&A===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,S=this.state.offset,A=S.left,w=S.top,E=S.height,T=S.width;return X.createElement("defs",null,X.createElement("clipPath",{id:k},X.createElement("rect",{x:A,y:w,height:E,width:T})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(S,A){var w=d3(A,2),E=w[0],T=w[1];return ye(ye({},S),{},tt({},E,T.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(S,A){var w=d3(A,2),E=w[0],T=w[1];return ye(ye({},S),{},tt({},E,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[k])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(k){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[k])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(k){var S=this.state,A=S.formattedGraphicalItems,w=S.activeItem;if(A&&A.length)for(var E=0,T=A.length;E<T;E++){var O=A[E],D=O.props,I=O.item,M=I.type.defaultProps!==void 0?ye(ye({},I.type.defaultProps),I.props):I.props,L=La(I.type);if(L==="Bar"){var B=(D.data||[]).find(function(H){return rW(k,H)});if(B)return{graphicalItem:O,payload:B}}else if(L==="RadialBar"){var z=(D.data||[]).find(function(H){return u5(k,H)});if(z)return{graphicalItem:O,payload:z}}else if(ip(O,w)||op(O,w)||Pc(O,w)){var W=wU({graphicalItem:O,activeTooltipItem:w,itemData:M.data}),R=M.activeIndex===void 0?W:M.activeIndex;return{graphicalItem:ye(ye({},O),{},{childIndex:R}),payload:Pc(O,w)?M.data[W]:O.props.data[W]}}}return null}},{key:"render",value:function(){var k=this;if(!NN(this))return null;var S=this.props,A=S.children,w=S.className,E=S.width,T=S.height,O=S.style,D=S.compact,I=S.title,M=S.desc,L=u3(S,lG),B=Ge(L,!1);if(D)return X.createElement(WC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(q0,oo({},B,{width:E,height:T,title:I,desc:M}),this.renderClipPath(),SN(A,this.renderMap)));if(this.props.accessibilityLayer){var z,W;B.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,B.role=(W=this.props.role)!==null&&W!==void 0?W:"application",B.onKeyDown=function(H){k.accessibilityManager.keyboardEvent(H)},B.onFocus=function(){k.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return X.createElement(WC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",oo({className:st("recharts-wrapper",w),style:ye({position:"relative",cursor:"default",width:E,height:T},O)},R,{ref:function(H){k.container=H}}),X.createElement(q0,oo({},B,{width:E,height:T,title:I,desc:M,style:SG}),this.renderClipPath(),SN(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(N.Component);tt(b,"displayName",r),tt(b,"defaultProps",ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),tt(b,"getDerivedStateFromProps",function(g,j){var k=g.dataKey,S=g.data,A=g.children,w=g.width,E=g.height,T=g.layout,O=g.stackOffset,D=g.margin,I=j.dataStartIndex,M=j.dataEndIndex;if(j.updateId===void 0){var L=h3(g);return ye(ye(ye({},L),{},{updateId:0},x(ye(ye({props:g},L),{},{updateId:0}),j)),{},{prevDataKey:k,prevData:S,prevWidth:w,prevHeight:E,prevLayout:T,prevStackOffset:O,prevMargin:D,prevChildren:A})}if(k!==j.prevDataKey||S!==j.prevData||w!==j.prevWidth||E!==j.prevHeight||T!==j.prevLayout||O!==j.prevStackOffset||!lo(D,j.prevMargin)){var B=h3(g),z={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},W=ye(ye({},p3(j,S,T)),{},{updateId:j.updateId+1}),R=ye(ye(ye({},B),z),W);return ye(ye(ye({},R),x(ye({props:g},R),j)),{},{prevDataKey:k,prevData:S,prevWidth:w,prevHeight:E,prevLayout:T,prevStackOffset:O,prevMargin:D,prevChildren:A})}if(!W0(A,j.prevChildren)){var H,U,q,Q,K=nn(A,Ao),F=K&&(H=(U=K.props)===null||U===void 0?void 0:U.startIndex)!==null&&H!==void 0?H:I,_=K&&(q=(Q=K.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&q!==void 0?q:M,G=F!==I||_!==M,Z=!nt(S),oe=Z&&!G?j.updateId:j.updateId+1;return ye(ye({updateId:oe},x(ye(ye({props:g},j),{},{updateId:oe,dataStartIndex:F,dataEndIndex:_}),j)),{},{prevChildren:A,dataStartIndex:F,dataEndIndex:_})}return null}),tt(b,"renderActiveDot",function(g,j,k){var S;return N.isValidElement(g)?S=N.cloneElement(g,j):Qe(g)?S=g(j):S=X.createElement(Vc,j),X.createElement(lt,{className:"recharts-active-dot",key:k},S)});var y=N.forwardRef(function(g,j){return X.createElement(b,oo({},g,{ref:j}))});return y.displayName=b.displayName,y},nT=Hc({chartName:"LineChart",GraphicalChild:Qo,axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:yj}),hp=Hc({chartName:"BarChart",GraphicalChild:Gn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:yj}),fp=Hc({chartName:"PieChart",GraphicalChild:On,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:sp},{axisType:"radiusAxis",AxisComp:np}],formatAxisMap:g$,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Xb,x3;function LG(){if(x3)return Xb;x3=1;function e(r,n){for(var a=-1,s=r==null?0:r.length;++a<s&&n(r[a],a,r)!==!1;);return r}return Xb=e,Xb}var Jb,g3;function aT(){if(g3)return Jb;g3=1;var e=bj(),r=Pm(),n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d){var u=i[l];(!(a.call(i,l)&&r(u,d))||d===void 0&&!(l in i))&&e(i,l,d)}return Jb=s,Jb}var Zb,b3;function Gc(){if(b3)return Zb;b3=1;var e=aT(),r=bj();function n(a,s,i,l){var d=!i;i||(i={});for(var u=-1,m=s.length;++u<m;){var p=s[u],f=l?l(i[p],a[p],p,i,a):void 0;f===void 0&&(f=a[p]),d?r(i,p,f):e(i,p,f)}return i}return Zb=n,Zb}var Qb,y3;function _G(){if(y3)return Qb;y3=1;var e=Gc(),r=Go();function n(a,s){return a&&e(s,r(s),a)}return Qb=n,Qb}var e0,v3;function FG(){if(v3)return e0;v3=1;function e(r){var n=[];if(r!=null)for(var a in Object(r))n.push(a);return n}return e0=e,e0}var t0,j3;function RG(){if(j3)return t0;j3=1;var e=Jn(),r=Rv(),n=FG(),a=Object.prototype,s=a.hasOwnProperty;function i(l){if(!e(l))return n(l);var d=r(l),u=[];for(var m in l)m=="constructor"&&(d||!s.call(l,m))||u.push(m);return u}return t0=i,t0}var r0,w3;function Oj(){if(w3)return r0;w3=1;var e=uA(),r=RG(),n=Ho();function a(s){return n(s)?e(s,!0):r(s)}return r0=a,r0}var n0,N3;function $G(){if(N3)return n0;N3=1;var e=Gc(),r=Oj();function n(a,s){return a&&e(s,r(s),a)}return n0=n,n0}var Nu={exports:{}};Nu.exports;var k3;function zG(){return k3||(k3=1,(function(e,r){var n=Yn(),a=r&&!r.nodeType&&r,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i?n.Buffer:void 0,d=l?l.allocUnsafe:void 0;function u(m,p){if(p)return m.slice();var f=m.length,x=d?d(f):new m.constructor(f);return m.copy(x),x}e.exports=u})(Nu,Nu.exports)),Nu.exports}var a0,S3;function BG(){if(S3)return a0;S3=1;function e(r,n){var a=-1,s=r.length;for(n||(n=Array(s));++a<s;)n[a]=r[a];return n}return a0=e,a0}var s0,C3;function WG(){if(C3)return s0;C3=1;var e=Gc(),r=Dv();function n(a,s){return e(a,r(a),s)}return s0=n,s0}var i0,A3;function sT(){if(A3)return i0;A3=1;var e=Pv(),r=xj(),n=Dv(),a=cA(),s=Object.getOwnPropertySymbols,i=s?function(l){for(var d=[];l;)e(d,n(l)),l=r(l);return d}:a;return i0=i,i0}var o0,E3;function UG(){if(E3)return o0;E3=1;var e=Gc(),r=sT();function n(a,s){return e(a,r(a),s)}return o0=n,o0}var l0,O3;function iT(){if(O3)return l0;O3=1;var e=lA(),r=sT(),n=Oj();function a(s){return e(s,n,r)}return l0=a,l0}var c0,T3;function qG(){if(T3)return c0;T3=1;var e=Object.prototype,r=e.hasOwnProperty;function n(a){var s=a.length,i=new a.constructor(s);return s&&typeof a[0]=="string"&&r.call(a,"index")&&(i.index=a.index,i.input=a.input),i}return c0=n,c0}var d0,P3;function Tj(){if(P3)return d0;P3=1;var e=oA();function r(n){var a=new n.constructor(n.byteLength);return new e(a).set(new e(n)),a}return d0=r,d0}var u0,D3;function VG(){if(D3)return u0;D3=1;var e=Tj();function r(n,a){var s=a?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return u0=r,u0}var m0,I3;function HG(){if(I3)return m0;I3=1;var e=/\w*$/;function r(n){var a=new n.constructor(n.source,e.exec(n));return a.lastIndex=n.lastIndex,a}return m0=r,m0}var p0,M3;function GG(){if(M3)return p0;M3=1;var e=Wo(),r=e?e.prototype:void 0,n=r?r.valueOf:void 0;function a(s){return n?Object(n.call(s)):{}}return p0=a,p0}var h0,L3;function KG(){if(L3)return h0;L3=1;var e=Tj();function r(n,a){var s=a?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return h0=r,h0}var f0,_3;function YG(){if(_3)return f0;_3=1;var e=Tj(),r=VG(),n=HG(),a=GG(),s=KG(),i="[object Boolean]",l="[object Date]",d="[object Map]",u="[object Number]",m="[object RegExp]",p="[object Set]",f="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",j="[object Float64Array]",k="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]";function D(I,M,L){var B=I.constructor;switch(M){case b:return e(I);case i:case l:return new B(+I);case y:return r(I,L);case g:case j:case k:case S:case A:case w:case E:case T:case O:return s(I,L);case d:return new B;case u:case f:return new B(I);case m:return n(I);case p:return new B;case x:return a(I)}}return f0=D,f0}var x0,F3;function XG(){if(F3)return x0;F3=1;var e=Jn(),r=Object.create,n=(function(){function a(){}return function(s){if(!e(s))return{};if(r)return r(s);a.prototype=s;var i=new a;return a.prototype=void 0,i}})();return x0=n,x0}var g0,R3;function JG(){if(R3)return g0;R3=1;var e=XG(),r=xj(),n=Rv();function a(s){return typeof s.constructor=="function"&&!n(s)?e(r(s)):{}}return g0=a,g0}var b0,$3;function ZG(){if($3)return b0;$3=1;var e=Um(),r=Xn(),n="[object Map]";function a(s){return r(s)&&e(s)==n}return b0=a,b0}var y0,z3;function QG(){if(z3)return y0;z3=1;var e=ZG(),r=Wm(),n=Fv(),a=n&&n.isMap,s=a?r(a):e;return y0=s,y0}var v0,B3;function eK(){if(B3)return v0;B3=1;var e=Um(),r=Xn(),n="[object Set]";function a(s){return r(s)&&e(s)==n}return v0=a,v0}var j0,W3;function tK(){if(W3)return j0;W3=1;var e=eK(),r=Wm(),n=Fv(),a=n&&n.isSet,s=a?r(a):e;return j0=s,j0}var w0,U3;function rK(){if(U3)return w0;U3=1;var e=Ov(),r=LG(),n=aT(),a=_G(),s=$G(),i=zG(),l=BG(),d=WG(),u=UG(),m=pA(),p=iT(),f=Um(),x=qG(),b=YG(),y=JG(),g=Rr(),j=Mv(),k=QG(),S=Jn(),A=tK(),w=Go(),E=Oj(),T=1,O=2,D=4,I="[object Arguments]",M="[object Array]",L="[object Boolean]",B="[object Date]",z="[object Error]",W="[object Function]",R="[object GeneratorFunction]",H="[object Map]",U="[object Number]",q="[object Object]",Q="[object RegExp]",K="[object Set]",F="[object String]",_="[object Symbol]",G="[object WeakMap]",Z="[object ArrayBuffer]",oe="[object DataView]",le="[object Float32Array]",ge="[object Float64Array]",ve="[object Int8Array]",fe="[object Int16Array]",Y="[object Int32Array]",ne="[object Uint8Array]",ue="[object Uint8ClampedArray]",Ve="[object Uint16Array]",Te="[object Uint32Array]",Pe={};Pe[I]=Pe[M]=Pe[Z]=Pe[oe]=Pe[L]=Pe[B]=Pe[le]=Pe[ge]=Pe[ve]=Pe[fe]=Pe[Y]=Pe[H]=Pe[U]=Pe[q]=Pe[Q]=Pe[K]=Pe[F]=Pe[_]=Pe[ne]=Pe[ue]=Pe[Ve]=Pe[Te]=!0,Pe[z]=Pe[W]=Pe[G]=!1;function Xe(pe,Oe,ae,je,Ie,ee){var Ee,ot=Oe&T,Rt=Oe&O,$t=Oe&D;if(ae&&(Ee=Ie?ae(pe,je,Ie,ee):ae(pe)),Ee!==void 0)return Ee;if(!S(pe))return pe;var $r=g(pe);if($r){if(Ee=x(pe),!ot)return l(pe,Ee)}else{var ur=f(pe),zr=ur==W||ur==R;if(j(pe))return i(pe,ot);if(ur==q||ur==I||zr&&!Ie){if(Ee=Rt||zr?{}:y(pe),!ot)return Rt?u(pe,s(Ee,pe)):d(pe,a(Ee,pe))}else{if(!Pe[ur])return Ie?pe:{};Ee=b(pe,ur,ot)}}ee||(ee=new e);var br=ee.get(pe);if(br)return br;ee.set(pe,Ee),A(pe)?pe.forEach(function(yr){Ee.add(Xe(yr,Oe,ae,yr,pe,ee))}):k(pe)&&pe.forEach(function(yr,ie){Ee.set(ie,Xe(yr,Oe,ae,ie,pe,ee))});var Ye=$t?Rt?p:m:Rt?E:w,Tr=$r?void 0:Ye(pe);return r(Tr||pe,function(yr,ie){Tr&&(ie=yr,yr=pe[ie]),n(Ee,ie,Xe(yr,Oe,ae,ie,pe,ee))}),Ee}return w0=Xe,w0}var N0,q3;function nK(){if(q3)return N0;q3=1;var e=Fm(),r=_6();function n(a,s){return s.length<2?a:e(a,r(s,0,-1))}return N0=n,N0}var k0,V3;function aK(){if(V3)return k0;V3=1;var e=_m(),r=HE(),n=nK(),a=$c();function s(i,l){return l=e(l,i),i=n(i,l),i==null||delete i[a(r(l))]}return k0=s,k0}var S0,H3;function sK(){if(H3)return S0;H3=1;var e=iO();function r(n){return e(n)?void 0:n}return S0=r,S0}var C0,G3;function iK(){if(G3)return C0;G3=1;var e=zv();function r(n){var a=n==null?0:n.length;return a?e(n,1):[]}return C0=r,C0}var A0,K3;function oK(){if(K3)return A0;K3=1;var e=iK(),r=NA(),n=SA();function a(s){return n(r(s,void 0,e),s+"")}return A0=a,A0}var E0,Y3;function lK(){if(Y3)return E0;Y3=1;var e=Lm(),r=rK(),n=aK(),a=_m(),s=Gc(),i=sK(),l=oK(),d=iT(),u=1,m=2,p=4,f=l(function(x,b){var y={};if(x==null)return y;var g=!1;b=e(b,function(k){return k=a(k,x),g||(g=k.length>1),k}),s(x,d(x),y),g&&(y=r(y,u|m|p,i));for(var j=b.length;j--;)n(y,b[j]);return y});return E0=f,E0}var cK=lK();const dK=jt(cK);var O0=Hc({chartName:"AreaChart",GraphicalChild:da,axisComponents:[{axisType:"xAxis",AxisComp:Kn},{axisType:"yAxis",AxisComp:Cn}],formatAxisMap:yj});function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rc(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lv.apply(this,arguments)}function X3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function T0(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?X3(Object(n),!0).forEach(function(a){uK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uK(e,r,n){return r=mK(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function mK(e){var r=pK(e,"string");return Rc(r)=="symbol"?r:r+""}function pK(e,r){if(Rc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(Rc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function hK(e,r){var n="".concat(r.x||e.x),a=parseInt(n,10),s="".concat(r.y||e.y),i=parseInt(s,10),l="".concat(r?.height||e?.height),d=parseInt(l,10);return T0(T0(T0({},r),oO(e)),{},{height:d,x:a,y:i})}function fK(e){return X.createElement(gj,lv({shapeType:"trapezoid",propTransformer:hK},e))}var cv;function J3(e,r){return yK(e)||bK(e,r)||gK(e,r)||xK()}function xK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gK(e,r){if(e){if(typeof e=="string")return Z3(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z3(e,r)}}function Z3(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function bK(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,m=!1;try{if(i=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==r);u=!0);}catch(p){m=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(m)throw s}}return d}}function yK(e){if(Array.isArray(e))return e}function $o(e){"@babel/helpers - typeof";return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$o(e)}function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sm.apply(this,arguments)}function Q3(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function lr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Q3(Object(n),!0).forEach(function(a){Fa(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vK(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function e6(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lT(a.key),a)}}function jK(e,r,n){return r&&e6(e.prototype,r),n&&e6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wK(e,r,n){return r=Cm(r),NK(e,oT()?Reflect.construct(r,n||[],Cm(e).constructor):r.apply(e,n))}function NK(e,r){if(r&&($o(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kK(e)}function kK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oT=function(){return!!e})()}function Cm(e){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cm(e)}function SK(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&dv(e,r)}function dv(e,r){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dv(e,r)}function Fa(e,r,n){return r=lT(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function lT(e){var r=CK(e,"string");return $o(r)=="symbol"?r:r+""}function CK(e,r){if($o(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if($o(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Va=(function(e){function r(){var n;vK(this,r);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=wK(this,r,[].concat(s)),Fa(n,"state",{isAnimationFinished:!1}),Fa(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Qe(l)&&l()}),Fa(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Qe(l)&&l()}),n}return SK(r,e),jK(r,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"renderTrapezoidsStatically",value:function(n){var a=this,s=this.props,i=s.shape,l=s.activeShape;return n.map(function(d,u){var m=a.isActiveIndex(u)?l:i,p=lr(lr({},d),{},{isActive:a.isActiveIndex(u),stroke:d.stroke});return X.createElement(lt,Sm({className:"recharts-funnel-trapezoid"},Cs(a.props,d,u),{key:"trapezoid-".concat(d?.x,"-").concat(d?.y,"-").concat(d?.name,"-").concat(d?.value),role:"img"}),X.createElement(fK,Sm({option:m},p)))})}},{key:"renderTrapezoidsWithAnimation",value:function(){var n=this,a=this.props,s=a.trapezoids,i=a.isAnimationActive,l=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,p=this.state.prevTrapezoids;return X.createElement(Sn,{begin:l,duration:d,isActive:i,easing:u,from:{t:0},to:{t:1},key:"funnel-".concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(f){var x=f.t,b=s.map(function(y,g){var j=p&&p[g];if(j){var k=St(j.x,y.x),S=St(j.y,y.y),A=St(j.upperWidth,y.upperWidth),w=St(j.lowerWidth,y.lowerWidth),E=St(j.height,y.height);return lr(lr({},y),{},{x:k(x),y:S(x),upperWidth:A(x),lowerWidth:w(x),height:E(x)})}var T=St(y.x+y.upperWidth/2,y.x),O=St(y.y+y.height/2,y.y),D=St(0,y.upperWidth),I=St(0,y.lowerWidth),M=St(0,y.height);return lr(lr({},y),{},{x:T(x),y:O(x),upperWidth:D(x),lowerWidth:I(x),height:M(x)})});return X.createElement(lt,null,n.renderTrapezoidsStatically(b))})}},{key:"renderTrapezoids",value:function(){var n=this.props,a=n.trapezoids,s=n.isAnimationActive,i=this.state.prevTrapezoids;return s&&a&&a.length&&(!i||!As(i,a))?this.renderTrapezoidsWithAnimation():this.renderTrapezoidsStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.trapezoids,i=n.className,l=n.isAnimationActive,d=this.state.isAnimationFinished;if(a||!s||!s.length)return null;var u=st("recharts-trapezoids",i);return X.createElement(lt,{className:u},this.renderTrapezoids(),(!l||d)&&on.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curTrapezoids:n.trapezoids,prevTrapezoids:a.curTrapezoids}:n.trapezoids!==a.curTrapezoids?{curTrapezoids:n.trapezoids}:null}}])})(N.PureComponent);cv=Va;Fa(Va,"displayName","Funnel");Fa(Va,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",labelLine:!0,hide:!1,isAnimationActive:!Ua.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",lastShapeType:"triangle"});Fa(Va,"getRealFunnelData",function(e){var r=e.props,n=r.data,a=r.children,s=Ge(e.props,!1),i=Yr(a,Hn);return n&&n.length?n.map(function(l,d){return lr(lr(lr({payload:l},s),l),i&&i[d]&&i[d].props)}):i&&i.length?i.map(function(l){return lr(lr({},s),l.props)}):[]});Fa(Va,"getRealWidthHeight",function(e,r){var n=e.props.width,a=r.width,s=r.height,i=r.left,l=r.right,d=r.top,u=r.bottom,m=s,p=a;return M6(n)?p=n:Ss(n)&&(p=p*parseFloat(n)/100),{realWidth:p-i-l-50,realHeight:m-u-d,offsetX:(a-p)/2,offsetY:(s-m)/2}});Fa(Va,"getComposedData",function(e){var r=e.item,n=e.offset,a=cv.getRealFunnelData(r),s=r.props,i=s.dataKey,l=s.nameKey,d=s.tooltipType,u=s.lastShapeType,m=s.reversed,p=n.left,f=n.top,x=cv.getRealWidthHeight(r,n),b=x.realHeight,y=x.realWidth,g=x.offsetX,j=x.offsetY,k=Math.max.apply(null,a.map(function(T){return Ft(T,i,0)})),S=a.length,A=b/S,w={x:n.left,y:n.top,width:n.width,height:n.height},E=a.map(function(T,O){var D=Ft(T,i,0),I=Ft(T,l,O),M=D,L;if(O!==S-1){if(L=Ft(a[O+1],i,0),L instanceof Array){var B=L,z=J3(B,1);L=z[0]}}else if(D instanceof Array&&D.length===2){var W=J3(D,2);M=W[0],L=W[1]}else u==="rectangle"?L=M:L=0;var R=(k-M)*y/(2*k)+f+25+g,H=A*O+p+j,U=M/k*y,q=L/k*y,Q=[{name:I,value:M,payload:T,dataKey:i,type:d}],K={x:R+U/2,y:H+A/2};return lr(lr({x:R,y:H,width:Math.max(U,q),upperWidth:U,lowerWidth:q,height:A,name:I,val:M,tooltipPayload:Q,tooltipPosition:K},dK(T,"width")),{},{payload:T,parentViewBox:w,labelViewBox:{x:R+(U-q)/4,y:H,width:Math.abs(U-q)/2+Math.min(U,q),height:A}})});return m&&(E=E.map(function(T,O){var D=T.y-O*A+(S-1-O)*A;return lr(lr({},T),{},{upperWidth:T.lowerWidth,lowerWidth:T.upperWidth,x:T.x-(T.lowerWidth-T.upperWidth)/2,y:T.y-O*A+(S-1-O)*A,tooltipPosition:lr(lr({},T.tooltipPosition),{},{y:D+A/2}),labelViewBox:lr(lr({},T.labelViewBox),{},{y:D})})})),{trapezoids:E,data:a}});var cT=Hc({chartName:"FunnelChart",GraphicalChild:Va,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",axisComponents:[],defaultProps:{layout:"centric"}});const V={Logo:e=>t.jsxs("svg",{...e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5z",opacity:"0.6"}),t.jsx("path",{d:"M2 12l10 5 10-5-10-5-10 5z"})]}),Dashboard:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 16v-4a2 2 0 114 0v4"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 16v-2a2 2 0 00-4 0v2"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16v-6a2 2 0 014 0v6"})]}),Reports:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-6l-2 2m2-2l2 2m-2-2v6m4-13L9 3l-3 4m12 0L9 3l-3 4m12 0h-3.375M5.625 7H3m18 0h-3.375m0 0l-3 4m3-4l3 4M3 7l3 4m0 0l-3 4m3-4h3.375"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 21H6a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2h-3"})]}),Leads:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Integrations:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Settings:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Automation:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",opacity:.4})]}),Team:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),Tasks:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Add:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Close:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Sparkles:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M19 3v4M17 5h4M14 11l-1.5 1.5-1.5-1.5-1.5 1.5L8 11l1.5-1.5L8 8l1.5 1.5L11 8l1.5 1.5L14 11zm5 4l-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5L12 15l1.5-1.5L12 12l1.5 1.5L15 12l1.5 1.5L19 15z"})}),Email:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),SMS:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Whatsapp:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.919 6.066l-1.21 4.383 4.536-1.187z"})}),Marketing:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.164.398-.142.854.108 1.204l.527.738c.32.447.27.96-.12 1.45l-.773.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.93l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527a1.125 1.125 0 0 1-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0 .55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.142-.854-.108-1.204l-.527-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.93l.15-.893Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Note:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Call:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Delete:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Filter:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L12 14.414V19a1 1 0 01-1.447.894l-4-2A1 1 0 016 17v-2.586L3.293 6.707A1 1 0 013 6V4z"})}),Success:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Key:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),Export:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Import:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Logout:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Menu:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Activity:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Billing:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 18.75 4.5h-15A2.25 2.25 0 0 0 1.5 6.75v10.5A2.25 2.25 0 0 0 3.75 19.5Z"})}),Support:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),Analytics:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75c0 .621-.504 1.125-1.125 1.125h-2.25A1.125 1.125 0 0 1 3 21v-7.875M3 13.125c0-6.075 4.925-11 11-11h.375c.621 0 1.125.504 1.125 1.125V21h-4.875c-.621 0-1.125-.504-1.125-1.125V13.125c0-1.56-1.24-2.813-2.781-2.813H9.375c-1.54 0-2.781 1.253-2.781 2.813v5.25c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V13.125"})}),Security:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm-1.5 6.445 3 3 1.5-1.5"})}),Rocket:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Bolt:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),ChartBar:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75c0 .621-.504 1.125-1.125 1.125h-2.25A1.125 1.125 0 0 1 3 21v-7.875M3 13.125c0-6.075 4.925-11 11-11h.375c.621 0 1.125.504 1.125 1.125V21h-4.875c-.621 0-1.125-.504-1.125-1.125V13.125c0-1.56-1.24-2.813-2.781-2.813H9.375c-1.54 0-2.781 1.253-2.781 2.813v5.25c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V13.125"})}),Globe:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 13.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),CheckCircle:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),XCircle:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Sun:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),Moon:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),ChatBubble:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Eye:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),EyeOff:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"})}),Google:e=>t.jsxs("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),t.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),LinkedIn:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),Twitter:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616v.064c0 2.298 1.634 4.212 3.793 4.649-.65.177-1.354.238-2.08.083.616 1.948 2.396 3.328 4.491 3.366-1.855 1.449-4.174 2.308-6.711 2.308-.436 0-.867-.025-1.295-.075 2.18 1.391 4.793 2.208 7.622 2.208 8.855 0 13.712-7.34 13.712-13.712 0-.208-.005-.416-.014-.623.938-.678 1.75-1.522 2.404-2.493z"})}),Facebook:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})}),Youtube:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})}),Instagram:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.07-1.645-.07-4.85s.012-3.584.07-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"})}),ListUl:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75V6.75z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75v-.008z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 17.25a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H4.5a.75.75 0 01-.75-.75v-.008z"})]}),ListOl:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Quote:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),Link:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),Blog:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})}),Connect:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),AutomateSteps:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-4.991-2.691v4.992m0 0h-4.992m4.992 0-3.181-3.183a8.25 8.25 0 0 0-11.667 0l-3.181 3.183"})}),Grow:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),MapPin:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),Envelope:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),Phone:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})}),ChevronRight:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),GripVertical:e=>t.jsxs("svg",{...e,viewBox:"0 0 24 24",fill:"currentColor",children:[t.jsx("circle",{cx:"9",cy:"5",r:"1"}),t.jsx("circle",{cx:"15",cy:"5",r:"1"}),t.jsx("circle",{cx:"9",cy:"12",r:"1"}),t.jsx("circle",{cx:"15",cy:"12",r:"1"}),t.jsx("circle",{cx:"9",cy:"19",r:"1"}),t.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),Code:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})}),Calendar:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},tr=({title:e,value:r,subtext:n,icon:a})=>t.jsxs("div",{className:"bg-surface p-5 rounded-xl shadow-sm border border-muted",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-3 rounded-lg bg-muted",children:a}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-subtle",children:e}),t.jsx("p",{className:"text-2xl font-bold text-on-surface",children:r})]})]}),n&&t.jsx("p",{className:"text-xs text-subtle mt-2",children:n})]}),dT=[Pa.WEBSITE,Pa.FACEBOOK,Pa.GOOGLE_ADS,Pa.REFERRAL,Pa.COLD_CALL];Qs.PENDING,Qs.INTERESTED,Qs.CALL_LATER,Qs.NOT_INTERESTED,Qs.CONVERTED;const AK=[Wt.SUPER_ADMIN,Wt.ADMIN,Wt.MANAGER,Wt.SALES_REP],EK=[{id:Zt.VIEW_ALL_LEADS,name:"View All Leads",description:"Can see all leads, not just their own or their team's."},{id:Zt.DELETE_LEADS,name:"Delete Leads",description:"Can delete leads from the system."},{id:Zt.ASSIGN_LEADS,name:"Assign & Re-assign Leads",description:"Can change the owner of any lead."},{id:Zt.MANAGE_USERS,name:"Manage Users & Permissions",description:"Can add, edit, and delete users and their permissions."},{id:Zt.MANAGE_TEAMS,name:"Manage Teams",description:"Can create and manage sales teams."},{id:Zt.MANAGE_SETTINGS,name:"Manage Workspace Settings",description:"Can edit pipeline stages and custom fields."},{id:Zt.MANAGE_AUTOMATION,name:"Manage Automation Rules",description:"Can create, edit, and delete automation rules."},{id:Zt.MANAGE_INTEGRATIONS,name:"Manage Integrations",description:"Can connect/disconnect sources and map fields."},{id:Zt.VIEW_TRACKING_DASHBOARD,name:"View Tracking Dashboard",description:"Can view employee productivity and session reports."}],it=({isOpen:e,onClose:r,title:n,children:a})=>(N.useEffect(()=>{const s=i=>{i.key==="Escape"&&r()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r]),e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4",onClick:r,children:t.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-6xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",onClick:s=>s.stopPropagation(),children:[n&&t.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-muted flex-shrink-0",children:[t.jsx("h2",{className:"text-xl font-bold text-on-surface",children:n}),t.jsx("button",{onClick:r,className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted",children:t.jsx(V.Close,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:a})]})}):null),P0=({label:e,options:r,value:n,onChange:a})=>t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:e}),t.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[{value:"all",label:"All"},...r].map(s=>t.jsx("option",{value:s.value,children:s.label},s.value))})]}),OK=({widgets:e,setWidgets:r,onClose:n})=>{const a=s=>{r({...e,[s]:!e[s]})};return t.jsxs(it,{isOpen:!0,onClose:n,title:"Customize Dashboard",children:[t.jsx("p",{className:"text-subtle mb-4",children:"Select the built-in widgets you want to see on your dashboard."}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center p-3 bg-background rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.leadsBySource,onChange:()=>a("leadsBySource"),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 font-medium text-on-surface",children:"Leads by Source Chart"})]}),t.jsxs("label",{className:"flex items-center p-3 bg-background rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.leadsByStage,onChange:()=>a("leadsByStage"),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 font-medium text-on-surface",children:"Leads by Stage Chart"})]})]}),t.jsx("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:t.jsx("button",{type:"button",onClick:n,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Done"})})]})},TK=[{value:"source",label:"Lead Source"},{value:"stage",label:"Pipeline Stage"},{value:"assignedToId",label:"Owner (User)"},{value:"campaign",label:"Campaign"},{value:"createdAt_month",label:"Date (by Month)"}],PK=[{value:"lead_count",label:"Number of Leads"},{value:"deal_value_sum",label:"Total Deal Value"},{value:"deal_value_avg",label:"Average Deal Value"}],DK=[{value:"bar",label:"Bar Chart",icon:t.jsx(V.ChartBar,{className:"h-8 w-8"})},{value:"pie",label:"Pie Chart",icon:t.jsx(V.Reports,{className:"h-8 w-8"})},{value:"line",label:"Line Chart",icon:t.jsx(V.Grow,{className:"h-8 w-8"})},{value:"stat",label:"Stat Card",icon:t.jsx(V.Leads,{className:"h-8 w-8"})}],IK=({onClose:e,onSave:r,existingWidget:n})=>{const[a,s]=N.useState(n||{title:"",chartType:"bar",metric:"lead_count",dimension:"source"}),i=()=>{if(!a.title){alert("Please enter a title for the widget.");return}r({id:n?.id||crypto.randomUUID(),...a}),e()};return t.jsxs(it,{isOpen:!0,onClose:e,title:n?"Edit Widget":"Add New Dashboard Widget",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Title"}),t.jsx("input",{type:"text",value:a.title,onChange:l=>s(d=>({...d,title:l.target.value})),placeholder:"e.g., Leads per Source",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Chart Style"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:DK.map(l=>t.jsxs("button",{onClick:()=>s(d=>({...d,chartType:l.value})),className:`p-4 rounded-lg border-2 flex flex-col items-center justify-center gap-2 ${a.chartType===l.value?"border-primary-500 bg-primary-500/10":"border-muted bg-surface hover:border-primary-400"}`,children:[l.icon,t.jsx("span",{className:"text-sm font-semibold",children:l.label})]},l.value))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Metric to Display"}),t.jsx("select",{value:a.metric,onChange:l=>s(d=>({...d,metric:l.target.value})),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500",children:PK.map(l=>t.jsx("option",{value:l.value,children:l.label},l.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Group By (Dimension)"}),t.jsx("select",{value:a.dimension,onChange:l=>s(d=>({...d,dimension:l.target.value})),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500",children:TK.map(l=>t.jsx("option",{value:l.value,children:l.label},l.value))})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:e,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:n?"Save Changes":"Add Widget"})]})]})},MK=({widget:e,leads:r,users:n,pipelineStages:a,onEdit:s,onDelete:i})=>{const[l,d]=N.useState(!1),[u,m]=N.useState(!0),p=N.useMemo(()=>{const x=g=>{switch(e.dimension){case"assignedToId":return n.find(j=>j.id===g.assignedToId)?.name||"Unassigned";case"stage":return a.find(j=>j.id===g.stage)?.name||"Unknown Stage";case"createdAt_month":return new Date(g.createdAt).toISOString().slice(0,7);default:return g[e.dimension]||"N/A"}},b=r.reduce((g,j)=>{const k=x(j);return g[k]||(g[k]=[]),g[k].push(j),g},{});let y=Object.entries(b).map(([g,j])=>{let k=0;switch(e.metric){case"lead_count":k=j.length;break;case"deal_value_sum":k=j.reduce((S,A)=>S+A.dealValue,0);break;case"deal_value_avg":k=j.length>0?j.reduce((S,A)=>S+A.dealValue,0)/j.length:0;break}return{name:g,value:k}});return e.dimension==="createdAt_month"&&(y=y.sort((g,j)=>g.name.localeCompare(j.name))),y},[e,r,n,a]),f=()=>{const x=["#3b82f6","#10b981","#f97316","#8b5cf6","#ec4899"];if(p.length===0)return t.jsx("div",{className:"flex-grow flex items-center justify-center text-subtle",children:"No data for this configuration."});switch(e.chartType){case"stat":const b=p.reduce((j,k)=>j+k.value,0),y=e.metric==="deal_value_avg"?b/p.length:b,g=e.metric.includes("deal_value")?`$${Math.round(y).toLocaleString()}`:y.toLocaleString();return t.jsx("div",{className:"flex-grow flex items-center justify-center text-5xl font-bold",children:g});case"pie":return t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(fp,{children:[t.jsx(On,{data:p,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:p.map((j,k)=>t.jsx(Hn,{fill:x[k%x.length]},`cell-${k}`))}),t.jsx(Bt,{}),t.jsx(Nn,{})]})});case"line":return t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(nT,{data:p,margin:{top:5,right:20,left:-10,bottom:5},children:[t.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),t.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12}}),t.jsx(Cn,{stroke:"var(--subtle)"}),t.jsx(Bt,{}),t.jsx(Qo,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2})]})});case"bar":default:return t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(hp,{data:p,margin:{top:5,right:20,left:-10,bottom:5},children:[t.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),t.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:10},interval:0,angle:-35,textAnchor:"end",height:50}),t.jsx(Cn,{stroke:"var(--subtle)"}),t.jsx(Bt,{}),t.jsx(Gn,{dataKey:"value",radius:[4,4,0,0],children:p.map((j,k)=>t.jsx(Hn,{fill:x[k%x.length]},`cell-${k}`))})]})})}};return t.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start p-6 pb-2",children:[t.jsx("button",{onClick:()=>m(!u),className:"flex-grow text-left",children:t.jsx("h3",{className:"font-semibold text-on-surface",children:e.title})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>m(!u),className:"p-1 text-subtle hover:text-on-surface",children:t.jsx(V.ChevronRight,{className:`w-5 h-5 transition-transform ${u?"rotate-90":""}`})}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>d(!l),onBlur:()=>setTimeout(()=>d(!1),200),className:"p-1 text-subtle hover:text-on-surface",children:t.jsx(V.Settings,{className:"w-5 h-5"})}),l&&t.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-surface rounded-md shadow-lg border border-muted z-10",children:[t.jsx("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-on-surface hover:bg-muted",children:"Edit"}),t.jsx("button",{onClick:i,className:"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-muted",children:"Delete"})]})]})]})]}),t.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${u?"max-h-[400px]":"max-h-0"}`,children:t.jsx("div",{className:"p-6 pt-0 h-[340px] flex flex-col",children:f()})})]})},LK=({leads:e,users:r,pipelineStages:n,customWidgets:a,onSaveWidget:s,onDeleteWidget:i})=>{const[l,d]=N.useState("all"),[u,m]=N.useState("all"),[p,f]=N.useState("all"),[x,b]=N.useState(!1),[y,g]=N.useState(!1),[j,k]=N.useState(null),[S,A]=N.useState(!1),[w,E]=N.useState({source:!0,stage:!0}),[T,O]=N.useState(()=>{try{const U=localStorage.getItem("dashboard-widgets");return U?JSON.parse(U):{leadsBySource:!0,leadsByStage:!0}}catch{return{leadsBySource:!0,leadsByStage:!0}}});N.useEffect(()=>{localStorage.setItem("dashboard-widgets",JSON.stringify(T))},[T]);const D=N.useMemo(()=>[...new Set(e.map(U=>U.campaign))],[e]),I=N.useMemo(()=>e.filter(U=>{const q=l==="all"||U.source===l,Q=u==="all"||U.assignedToId===parseInt(u,10),K=p==="all"||U.campaign===p;return q&&Q&&K}),[e,l,u,p]),M=I.length,L=I.reduce((U,q)=>U+q.dealValue,0),B=I.filter(U=>U.stage==="closed-won").length,z=M>0?(B/M*100).toFixed(1):"0",W=N.useMemo(()=>{const U=I.reduce((q,Q)=>(q[Q.source]=(q[Q.source]||0)+1,q),{});return Object.entries(U).map(([q,Q])=>({name:q,value:Q}))},[I]),R=N.useMemo(()=>{const U=new Map(n.map(q=>[q.id,{name:q.name,count:0,color:q.color}]));return I.forEach(q=>{const Q=U.get(q.stage);Q&&Q.count++}),Array.from(U.values())},[I,n]),H=(U=null)=>{k(U),g(!0)};return t.jsxs("div",{className:"space-y-6",children:[x&&t.jsx(OK,{widgets:T,setWidgets:O,onClose:()=>b(!1)}),y&&t.jsx(IK,{existingWidget:j,onClose:()=>{g(!1),k(null)},onSave:s}),t.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Leads Dashboard"}),t.jsx("p",{className:"text-subtle mt-1",children:"An overview of your sales pipeline and performance."})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[t.jsx("button",{onClick:()=>b(!0),className:"flex-1 sm:flex-none bg-surface hover:bg-muted text-on-surface font-semibold py-2 px-4 rounded-lg flex items-center justify-center border border-muted",children:"Customize"}),t.jsxs("button",{onClick:()=>H(),className:"flex-1 sm:flex-none bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Add Widget"]})]})]}),t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-sm border border-muted",children:[t.jsxs("button",{onClick:()=>A(!S),className:"md:hidden w-full flex justify-between items-center font-semibold mb-2",children:[t.jsx("span",{children:"Filters"}),t.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${S?"rotate-90":""}`})]}),t.jsxs("div",{className:`flex-col md:flex-row flex-wrap items-center gap-4 ${S?"flex":"hidden"} md:flex`,children:[t.jsx(P0,{label:"Source",value:l,onChange:d,options:dT.map(U=>({value:U,label:U}))}),t.jsx(P0,{label:"Campaign",value:p,onChange:f,options:D.map(U=>({value:U,label:U}))}),t.jsx(P0,{label:"Owner",value:u,onChange:m,options:r.filter(U=>U.role==="Sales Rep").map(U=>({value:U.id.toString(),label:U.name}))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(tr,{title:"Total Leads",value:M.toString(),icon:t.jsx(V.Leads,{className:"h-6 w-6 text-blue-500"})}),t.jsx(tr,{title:"Pipeline Value",value:`$${(L/1e3).toFixed(1)}k`,icon:t.jsx(V.Reports,{className:"h-6 w-6 text-purple-500"})}),t.jsx(tr,{title:"Closed-Won Deals",value:B.toString(),icon:t.jsx(V.Rocket,{className:"h-6 w-6 text-green-500"})}),t.jsx(tr,{title:"Conversion Rate",value:`${z}%`,icon:t.jsx(V.Bolt,{className:"h-6 w-6 text-orange-500"})})]}),I.length===0?t.jsx("div",{className:"text-center py-16 bg-surface rounded-xl shadow-sm border border-muted",children:t.jsx("p",{className:"text-lg font-medium text-subtle",children:"No leads match the current filters."})}):t.jsxs("div",{className:`grid grid-cols-1 ${T.leadsBySource&&T.leadsByStage?"lg:grid-cols-5":""} gap-6`,children:[T.leadsBySource&&t.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-xl shadow-sm border border-muted",children:[t.jsxs("button",{onClick:()=>E(U=>({...U,source:!U.source})),className:"w-full flex justify-between items-center p-6 pb-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Leads by Source"}),t.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${w.source?"rotate-90":""}`})]}),t.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${w.source?"max-h-[350px]":"max-h-0"}`,children:t.jsx("div",{className:"p-6 pt-4 h-[300px]",children:t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(fp,{children:[t.jsx(On,{data:W,dataKey:"value",nameKey:"name",cx:"50%",cy:"45%",outerRadius:80,innerRadius:0,fill:"#8884d8",labelLine:!1,label:({cx:U,cy:q,midAngle:Q,innerRadius:K,outerRadius:F,percent:_,name:G})=>{if(_<.05)return null;const Z=K+(F-K)*.5,oe=U+Z*Math.cos(-Q*Math.PI/180),le=q+Z*Math.sin(-Q*Math.PI/180);return t.jsx("text",{x:oe,y:le,fill:"white",textAnchor:"middle",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:`${(_*100).toFixed(0)}%`})},children:W.map((U,q)=>t.jsx(Hn,{fill:n[q%n.length]?.color||"#8884d8"},`cell-${q}`))}),t.jsx(Bt,{formatter:U=>`${U} leads`,contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)",borderRadius:"0.75rem",fontSize:"14px"}}),t.jsx(Nn,{wrapperStyle:{color:"var(--on-surface)",fontSize:"12px",paddingTop:"10px"},iconType:"circle"})]})})})})]}),T.leadsByStage&&t.jsxs("div",{className:`${T.leadsBySource?"lg:col-span-3":"col-span-1"} bg-surface rounded-xl shadow-sm border border-muted`,children:[t.jsxs("button",{onClick:()=>E(U=>({...U,stage:!U.stage})),className:"w-full flex justify-between items-center p-6 pb-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Leads by Stage"}),t.jsx(V.ChevronRight,{className:`h-5 w-5 text-subtle transition-transform ${w.stage?"rotate-90":""}`})]}),t.jsx("div",{className:`transition-[max-height] duration-500 ease-in-out overflow-hidden ${w.stage?"max-h-[350px]":"max-h-0"}`,children:t.jsx("div",{className:"p-6 pt-4 h-[300px]",children:t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(hp,{data:R,margin:{top:5,right:20,left:-10,bottom:5},children:[t.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),t.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12,fill:"var(--subtle)"},angle:-25,textAnchor:"end",height:60}),t.jsx(Cn,{stroke:"var(--subtle)",tick:{fill:"var(--subtle)"}}),t.jsx(Bt,{cursor:{fill:"var(--muted)"},contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)",borderRadius:"0.75rem"}}),t.jsx(Gn,{dataKey:"count",name:"Lead Count",radius:[4,4,0,0],children:R.map((U,q)=>t.jsx(Hn,{fill:U.color},`cell-${q}`))})]})})})})]})]}),t.jsxs("div",{className:"pt-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-on-surface",children:"My Dashboard"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-4",children:[a.map(U=>t.jsx(MK,{widget:U,leads:I,users:r,pipelineStages:n,onEdit:()=>H(U),onDelete:()=>i(U.id)},U.id)),t.jsxs("div",{onClick:()=>H(null),className:"bg-surface p-5 rounded-xl border-2 border-dashed border-muted hover:border-primary-500 hover:bg-primary-500/5 transition-colors cursor-pointer flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx(V.Add,{className:"h-12 w-12 text-subtle"}),t.jsx("p",{className:"mt-2 font-semibold text-subtle",children:"Add New Widget"})]})]})]})]})},_K=({users:e,onClose:r,onAssign:n})=>{const[a,s]=N.useState(e[0]?.id),i=()=>{a?n(a):alert("Please select a user to assign the leads to.")};return t.jsxs(it,{isOpen:!0,onClose:r,title:"Assign Leads to a User",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-subtle text-sm",children:"Select a user from the dropdown below. All selected leads will be reassigned to this user, and this action will be recorded in each lead's timeline."}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"user-select",className:"block text-sm font-medium text-subtle mb-1",children:"Assign to"}),t.jsxs("select",{id:"user-select",value:a,onChange:l=>s(Number(l.target.value)),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"",disabled:!0,children:"Select a user"}),e.map(l=>t.jsxs("option",{value:l.id,children:[l.name," (",l.role,")"]},l.id))]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Assign Leads"})]})]})},Lt={Tasks:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Add:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Close:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Email:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),SMS:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Whatsapp:e=>t.jsx("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.919 6.066l-1.21 4.383 4.536-1.187z"})}),Note:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Call:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),StatusChange:e=>t.jsxs("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 9l4-4L14 9"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 15l-4 4-6-4"})]}),Delete:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Success:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Upload:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Activity:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),XCircle:e=>t.jsx("svg",{...e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})},FK=({onFileSelect:e,acceptedTypes:r=".csv,.xlsx,.xls",maxSize:n=10,loading:a=!1,error:s})=>{const[i,l]=N.useState(!1),[d,u]=N.useState(null),m=N.useCallback(y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?l(!0):y.type==="dragleave"&&l(!1)},[]),p=N.useCallback(y=>{if(y.preventDefault(),y.stopPropagation(),l(!1),y.dataTransfer.files&&y.dataTransfer.files[0]){const g=y.dataTransfer.files[0];f(g)}},[]),f=y=>{const g=r.split(",").map(k=>k.trim()),j="."+y.name.split(".").pop()?.toLowerCase();if(!g.includes(j)){alert(`Invalid file type. Please upload: ${r}`);return}if(y.size>n*1024*1024){alert(`File size too large. Maximum size: ${n}MB`);return}u(y),e(y)},x=y=>{y.target.files&&y.target.files[0]&&f(y.target.files[0])},b=y=>{if(y===0)return"0 Bytes";const g=1024,j=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(y)/Math.log(g));return parseFloat((y/Math.pow(g,k)).toFixed(2))+" "+j[k]};return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-muted hover:border-primary-400"} ${a?"opacity-50 pointer-events-none":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:p,children:[t.jsx("input",{type:"file",accept:r,onChange:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:a}),t.jsx("div",{className:"space-y-4",children:a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto"}),t.jsx("p",{className:"text-sm text-subtle",children:"Processing file..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Lt.Upload,{className:"h-12 w-12 mx-auto text-subtle"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:d?"File Selected":"Upload your file"}),t.jsx("p",{className:"text-sm text-subtle mt-1",children:d?`${d.name} (${b(d.size)})`:`Supported formats: CSV, XLS, XLSX. Maximum size: ${n}MB`}),!d&&t.jsx("p",{className:"text-sm text-subtle mt-2",children:"Drag and drop your file here, or click to browse"})]})]})})]}),s&&t.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})}),d&&!a&&t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx("button",{onClick:()=>{u(null),e(null)},className:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Remove file"})})]})},t6=({isImporting:e,progress:r,currentStep:n,result:a,onClose:s,onRetry:i})=>e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-surface rounded-lg p-6 max-w-md w-full mx-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Importing Leads"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:n}),t.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:t.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),t.jsxs("p",{className:"text-xs text-subtle mt-2",children:[Math.round(r),"% complete"]})]})})}):a?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-surface rounded-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`h-12 w-12 mx-auto mb-4 rounded-full flex items-center justify-center ${a.success?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:a.success?"":""}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:a.success?"Import Completed":"Import Failed"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.newLeads}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"New Leads"})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.updatedLeads}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Updated"})]}),a.failedLeads>0&&t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.failedLeads}),t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Failed"})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-3 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-600",children:a.newLeads+a.updatedLeads}),t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Total Success"})]})]}),a.errors.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"font-semibold text-on-surface mb-2",children:"Errors:"}),t.jsxs("div",{className:"max-h-32 overflow-y-auto bg-red-50 dark:bg-red-900/20 rounded-lg p-3 text-left",children:[a.errors.slice(0,10).map((l,d)=>t.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mb-1",children:["Row ",l.row,": ",l.message,l.field&&` (${l.field})`]},d)),a.errors.length>10&&t.jsxs("p",{className:"text-sm text-red-500 mt-2",children:["... and ",a.errors.length-10," more errors"]})]})]}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[i&&t.jsx("button",{onClick:i,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Import Again"}),t.jsx("button",{onClick:s,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Close"})]})]})})}):null,RK=e=>{const r=e.split(`
`).filter(s=>s.trim());if(r.length===0)throw new Error("CSV file is empty");const n=r[0].split(",").map(s=>s.trim()),a=[];for(let s=1;s<r.length;s++){const i=r[s].split(",").map(l=>l.trim());if(i.length===n.length){const l={};n.forEach((d,u)=>{l[d]=i[u]||""}),a.push(l)}}return{headers:n,rows:a,totalRows:a.length}},$K=async e=>new Promise((r,n)=>{n(new Error("Excel file parsing is not yet implemented. Please convert your Excel file to CSV format and try again."))}),zK=async e=>{const r=e.name.split(".").pop()?.toLowerCase();switch(r){case"csv":return new Promise((n,a)=>{const s=new FileReader;s.onload=i=>{const l=i.target?.result;try{const d=RK(l);n(d)}catch(d){a(d)}},s.onerror=()=>a(new Error("Failed to read file")),s.readAsText(e)});case"xlsx":case"xls":return $K();default:throw new Error(`Unsupported file format: ${r}. Supported formats: CSV, XLS, XLSX`)}},BK=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),WK=e=>e.replace(/[\s\-\(\)\.]/g,"").length>=10&&/^\+?[\d\s\-\(\)\.]+$/.test(e),UK=(e,r)=>{const n=[];return r.forEach((a,s)=>{if(a.crmField==="---")return;const i=e[a.sourceField];switch(a.crmField){case"email":i?BK(i)||n.push({row:1,field:a.sourceField,message:"Invalid email format"}):n.push({row:1,field:a.sourceField,message:"Email is required"});break;case"phone":i&&!WK(i)&&n.push({row:1,field:a.sourceField,message:"Invalid phone format"});break;case"name":(!i||i.trim().length===0)&&n.push({row:1,field:a.sourceField,message:"Name is required"});break}}),n},xs="/api";class qK{constructor(){this.refreshPromise=null,this.isRefreshing=!1}clearAuthData(){localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),localStorage.removeItem("sessionId"),localStorage.removeItem("activeSessions"),localStorage.removeItem("refreshToken")}async request(r,n){let a=localStorage.getItem("token")||localStorage.getItem("authToken");if(console.log("API Request Debug:",{endpoint:r,hasToken:!!a,tokenLength:a?.length,tokenPreview:a?`${a.substring(0,20)}...`:"none"}),!a){const d=localStorage.getItem("currentUser");if(d)try{const u=JSON.parse(d);a=u.token||u.authToken,console.log("Retrieved token from currentUser data")}catch{console.warn("Failed to parse current user data")}}const s={"Content-Type":"application/json",...n?.headers};if(a&&a.length>10){const d=a.split(".");if(d.length===3)try{const u=JSON.parse(atob(d[1]));s.Authorization=`Bearer ${a}`,console.log("Added authorization header with valid token")}catch{console.warn("Token payload invalid, clearing corrupted token"),this.clearAuthData()}else console.warn("Token format invalid, clearing corrupted token"),this.clearAuthData()}else console.warn("No valid token found for API request");console.log("Making request to:",`${xs}${r}`);const i=await fetch(`${xs}${r}`,{headers:s,credentials:"include",...n});if(console.log("Response status:",i.status,i.statusText),!i.ok){let d="Unknown error";try{d=await i.text()}catch{d="Failed to read error response"}const u=`API request failed: ${i.statusText} (${i.status}) - ${d}`;throw console.error("API Error Response:",{status:i.status,statusText:i.statusText,errorText:d,endpoint:r}),i.status===401&&!r.includes("/super-admin/")&&(console.log("Clearing invalid tokens due to 401 error"),this.clearAuthData()),new Error(u)}let l;try{const d=await i.text();if(!d.trim())throw new Error("Empty response from server");l=JSON.parse(d)}catch(d){throw console.error("JSON Parse Error:",{error:d,responseText:await i.text(),endpoint:r}),new Error(`Invalid JSON response from server: ${d.message}`)}if(console.log("API Response success:",l.success),!l.success){const d=l.message||"API request failed";throw i.status===401&&!r.includes("/super-admin/")&&this.clearAuthData(),new Error(d)}return l.data}async requestWithRetry(r,n,a=3){for(let s=1;s<=a;s++)try{return await this.request(r,n)}catch(i){const l=s===a;if((i.message.includes("401")||i.message.includes("Unauthorized"))&&!l&&!r.includes("/super-admin/"))try{await this.refreshToken();continue}catch{if(l)throw new Error("Authentication failed. Please log in again.");continue}if(l)throw i;await new Promise(d=>setTimeout(d,Math.pow(2,s)*1e3))}throw new Error("Max retries exceeded")}async refreshToken(){if(this.isRefreshing)return this.refreshPromise;this.isRefreshing=!0,this.refreshPromise=this.performTokenRefresh();try{return await this.refreshPromise}finally{this.isRefreshing=!1,this.refreshPromise=null}}async performTokenRefresh(){const r=localStorage.getItem("refreshToken");if(!r)throw new Error("No refresh token available");const n=await fetch(`${xs}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refreshToken:r})});if(!n.ok)throw new Error("Token refresh failed");const a=await n.json();if(a.success&&a.token)return localStorage.setItem("token",a.token),a.refreshToken&&localStorage.setItem("refreshToken",a.refreshToken),a;throw new Error("Invalid refresh response")}async getTenantContext(){return this.requestWithRetry("/tenant/context")}async getReportsData(){return this.requestWithRetry("/data/reports")}async login(r,n){try{const a=await fetch(`${xs}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:r,password:n})});if(!a.ok){let l="Unknown error";try{l=await a.text()}catch{l="Failed to read error response"}let d="Login failed";try{d=JSON.parse(l).message||d}catch{l&&l.length>0&&l!=="Failed to read error response"&&(d=l)}throw console.error("Login API Error:",{status:a.status,statusText:a.statusText,errorText:l,errorMessage:d}),a.status===401?new Error("Invalid email or password"):a.status>=500?new Error("Server error. Please check if the backend server is running."):new Error(d)}let s;try{const l=await a.text();if(!l.trim())throw new Error("Empty response from server");s=JSON.parse(l)}catch(l){throw console.error("Login JSON Parse Error:",l),new Error(`Invalid response from server: ${l.message}`)}if(!s.success)throw new Error(s.message||"Login failed");const i=s.data||s;return i.token&&localStorage.setItem("token",i.token),i.refreshToken&&localStorage.setItem("refreshToken",i.refreshToken),i}catch(a){throw a.message.includes("ECONNREFUSED")||a.message.includes("Network Error")?new Error("Cannot connect to server. Please ensure the backend server is running on port 3000."):a}}async getLeads(r){const n=r?`/leads?organizationId=${r}`:"/leads";return this.requestWithRetry(n)}async getUsers(r){const n=r?`/users?organizationId=${r}`:"/users";return this.requestWithRetry(n)}async getStages(r){const n="/settings/stages";console.log("DEBUG: API getStages called with endpoint:",n,"for org:",r);const a=await this.requestWithRetry(n);return console.log("DEBUG: API getStages result:",a?.length||0,a?.map(s=>({id:s.id,name:s.name}))),a||[]}async getTeams(r){const n="/settings/teams";console.log("DEBUG: API getTeams called with endpoint:",n,"for org:",r);const a=await this.requestWithRetry(n);return console.log("DEBUG: API getTeams result:",a?.length||0,a?.map(s=>({id:s.id,name:s.name}))),a||[]}async getTasks(r){const n=r?`/tasks?organizationId=${r}`:"/tasks";return this.requestWithRetry(n)}async getOrganizations(){return this.requestWithRetry("/organizations")}async getCustomFields(r,n){const a=new URLSearchParams;r&&a.append("organizationId",r),n?.mappableOnly&&a.append("mappableOnly","true"),n?.category&&a.append("category",n.category),n?.integrationType&&a.append("integrationType",n.integrationType);const s=`/custom-fields${a.toString()?`?${a.toString()}`:""}`;return this.requestWithRetry(s)}async getMappableCustomFields(r,n){const a=n?`/custom-fields/mappable/${n}?organizationId=${r}`:`/custom-fields/mappable?organizationId=${r}`;return this.requestWithRetry(a)}async getLeadDisplayFields(r){const n=`/custom-fields/lead-display?organizationId=${r}`;return this.requestWithRetry(n)}async createLead(r){return this.requestWithRetry("/leads",{method:"POST",body:JSON.stringify(r)})}async updateLead(r,n){console.log("API Service - Updating lead:",r,n);try{const a=await this.requestWithRetry(`/leads/${r}`,{method:"PUT",body:JSON.stringify(n)});return console.log("API Service - Update successful:",a),a}catch(a){throw console.error("API Service - Update failed:",a),a}}async getLeadById(r){console.log("API Service - Getting lead by ID:",r);try{const n=await this.requestWithRetry(`/leads/${r}`);return console.log("API Service - Get lead successful:",n),n}catch(n){throw console.error("API Service - Get lead failed:",n),n}}async deleteLead(r){return this.requestWithRetry(`/leads/${r}`,{method:"DELETE"})}async createTask(r){return this.requestWithRetry("/tasks",{method:"POST",body:JSON.stringify(r)})}async updateTask(r,n){return this.requestWithRetry(`/tasks/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteTask(r){return this.requestWithRetry(`/tasks/${r}`,{method:"DELETE"})}async createNote(r){return this.requestWithRetry("/notes",{method:"POST",body:JSON.stringify(r)})}async getNotes(r){return this.requestWithRetry(`/notes/${r}`)}async createLeadNote(r,n){return this.requestWithRetry("/notes",{method:"POST",body:JSON.stringify(n)})}async createLeadTask(r,n){return this.requestWithRetry(`/leads/${r}/tasks`,{method:"POST",body:JSON.stringify(n)})}async getLeadActivities(r,n=50){return this.requestWithRetry(`/leads/${r}/activities?limit=${n}`)}async getCalls(r){return this.requestWithRetry(`/calls/${r}`)}async createCall(r){return this.requestWithRetry("/calls",{method:"POST",body:JSON.stringify(r)})}async updateUser(r,n){return this.requestWithRetry(`/users/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createStage(r){return this.requestWithRetry("/settings/stages",{method:"POST",body:JSON.stringify(r)})}async updateStage(r,n){return this.requestWithRetry(`/settings/stages/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteStage(r){return this.requestWithRetry(`/settings/stages/${r}`,{method:"DELETE"})}async createCustomField(r){return this.requestWithRetry("/custom-fields",{method:"POST",body:JSON.stringify(r)})}async updateCustomField(r,n){return this.requestWithRetry(`/custom-fields/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCustomField(r){return this.requestWithRetry(`/custom-fields/${r}`,{method:"DELETE"})}async createLeadScoreRule(r){return this.requestWithRetry("/lead-score-rules",{method:"POST",body:JSON.stringify(r)})}async updateOrganization(r,n){return this.requestWithRetry(`/organizations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createCustomDomain(r){return this.requestWithRetry("/custom-domains",{method:"POST",body:JSON.stringify(r)})}async updateBlogPost(r,n){return this.requestWithRetry(`/blog-posts/${r}`,{method:"PUT",body:JSON.stringify(n)})}async createBlogPost(r){return this.requestWithRetry("/blog-posts",{method:"POST",body:JSON.stringify(r)})}async deleteBlogPost(r){return this.requestWithRetry(`/blog-posts/${r}`,{method:"DELETE"})}async bulkUpdateLeads(r,n){return this.requestWithRetry("/leads/bulk",{method:"PUT",body:JSON.stringify({leadIds:r,updates:n})})}async sendSMS(r){return this.requestWithRetry("/sms/send",{method:"POST",body:JSON.stringify(r)})}async getSMSIntegrations(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/integrations${n}`)}async createSMSIntegration(r){return this.requestWithRetry("/sms/integrations",{method:"POST",body:JSON.stringify(r)})}async updateSMSIntegration(r,n){return this.requestWithRetry(`/sms/integrations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSMSIntegration(r){return this.requestWithRetry(`/sms/integrations/${r}`,{method:"DELETE"})}async testSMSIntegration(r){return this.requestWithRetry(`/sms/integrations/${r}/test`,{method:"POST"})}async getSMSPhoneLists(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/phone-lists${n}`)}async createSMSPhoneList(r){return this.requestWithRetry("/sms/phone-lists",{method:"POST",body:JSON.stringify(r)})}async getSMSBalance(r){const n=r?`?organizationId=${r}`:"";return this.requestWithRetry(`/sms/balance${n}`)}async getSMSAnalytics(r,n,a){const s=new URLSearchParams;return r&&s.append("organizationId",r),n&&s.append("startDate",n),a&&s.append("endDate",a),this.requestWithRetry(`/sms/analytics?${s.toString()}`)}async sendBulkSMS(r){return this.requestWithRetry("/sms/send-bulk",{method:"POST",body:JSON.stringify(r)})}async getSMSDeliveryStatus(r){return this.requestWithRetry(`/sms/status/${r}`)}async sendEmail(r){return this.requestWithRetry("/email/send",{method:"POST",body:JSON.stringify(r)})}async getBillingHistory(){return this.requestWithRetry("/billing/history")}async getCurrentSubscription(){return this.requestWithRetry("/billing/subscription/current")}async changeSubscription(r,n="monthly"){return this.requestWithRetry("/billing/subscription/change",{method:"POST",body:JSON.stringify({newPlanId:r,billingCycle:n})})}async getLeadScoreRules(r){return this.requestWithRetry("/settings/score-rules")}async getCustomDashboardWidgets(r,n){const a=new URLSearchParams;r&&a.append("organizationId",r),n&&a.append("userId",n.toString());const s=`/custom-dashboard-widgets${a.toString()?`?${a.toString()}`:""}`;return this.requestWithRetry(s)}async createCustomDashboardWidget(r){return this.requestWithRetry("/custom-dashboard-widgets",{method:"POST",body:JSON.stringify(r)})}async updateCustomDashboardWidget(r,n){return this.requestWithRetry(`/custom-dashboard-widgets/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCustomDashboardWidget(r){return this.requestWithRetry(`/custom-dashboard-widgets/${r}`,{method:"DELETE"})}async deleteLeadScoreRule(r){return this.requestWithRetry(`/settings/score-rules/${r}`,{method:"DELETE"})}async getGoogleAdsIntegrations(){return this.requestWithRetry("/integrations/google-ads")}async createGoogleAdsIntegration(r){return this.requestWithRetry("/integrations/google-ads",{method:"POST",body:JSON.stringify(r)})}async connectGoogleAdsAccount(r,n){return this.requestWithRetry(`/integrations/google-ads/${r}/connect`,{method:"POST",body:JSON.stringify({code:n})})}async getGoogleAdsCampaigns(r,n){const a=n?`?accountId=${n}`:"";return this.requestWithRetry(`/integrations/google-ads/${r}/campaigns${a}`)}async getGoogleAdsConversionData(r,n,a){const s=new URLSearchParams;return n&&s.append("accountId",n),a&&s.append("campaignIds",a),this.requestWithRetry(`/integrations/google-ads/${r}/conversions?${s.toString()}`)}async testGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/test`,{method:"POST"})}async activateGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/activate`,{method:"POST"})}async deactivateGoogleAdsIntegration(r){return this.requestWithRetry(`/integrations/google-ads/${r}/deactivate`,{method:"POST"})}async updateGoogleAdsIntegration(r,n){return this.requestWithRetry(`/integrations/google-ads/${r}`,{method:"PUT",body:JSON.stringify(n)})}async getWebsiteIntegrations(){return this.requestWithRetry("/integrations/website")}async createWebsiteIntegration(r){return this.requestWithRetry("/integrations/website",{method:"POST",body:JSON.stringify(r)})}async generateWebsiteTrackingCode(r,n){console.log("API Service - generateWebsiteTrackingCode called with:",{integrationId:r,options:n});const a=localStorage.getItem("token")||localStorage.getItem("authToken"),s={"Content-Type":"application/json"};if(a&&a.length>10){const d=a.split(".");if(d.length===3)try{JSON.parse(atob(d[1])),s.Authorization=`Bearer ${a}`}catch{console.warn("Token payload invalid")}}const i=await fetch(`${xs}/integrations/website/${r}/tracking-code`,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(n||{})});if(!i.ok){let d="Unknown error";try{d=await i.text()}catch{d="Failed to read error response"}throw new Error(`API request failed: ${i.statusText} (${i.status}) - ${d}`)}const l=await i.json();if(console.log("API Service - generateWebsiteTrackingCode raw response:",l),!l.success)throw new Error(l.message||"API request failed");return l}async getWebsiteAnalytics(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/website/${r}/analytics?${a.toString()}`)}async getWebsiteFormPerformance(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),n?.formId&&a.append("formId",n.formId),this.requestWithRetry(`/integrations/website/${r}/forms?${a.toString()}`)}async testWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/test`,{method:"POST"})}async activateWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/activate`,{method:"POST"})}async deactivateWebsiteIntegration(r){return this.requestWithRetry(`/integrations/website/${r}/deactivate`,{method:"POST"})}async addWebsiteForm(r,n){return this.requestWithRetry(`/integrations/website/${r}/forms`,{method:"POST",body:JSON.stringify(n)})}async updateWebsiteForm(r,n,a){return this.requestWithRetry(`/integrations/website/${r}/forms/${n}`,{method:"PUT",body:JSON.stringify(a)})}async trackWebsiteFormSubmission(r,n,a){return fetch(`${xs}/integrations/track/${r}/form`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:n,metadata:a})}).then(s=>s.json())}async trackWebsitePageView(r,n,a){return fetch(`${xs}/integrations/track/${r}/pageview`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageData:n,metadata:a})}).then(s=>s.json())}async trackWebsiteCustomEvent(r,n,a,s){return fetch(`${xs}/integrations/track/${r}/event`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:n,eventData:a,metadata:s})}).then(i=>i.json())}async getCloudTelephonyIntegrations(){return this.requestWithRetry("/integrations/cloud-telephony")}async createCloudTelephonyIntegration(r){return this.requestWithRetry("/integrations/cloud-telephony",{method:"POST",body:JSON.stringify(r)})}async updateCloudTelephonyIntegration(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}`,{method:"DELETE"})}async testCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/test`,{method:"POST"})}async activateCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/activate`,{method:"POST"})}async deactivateCloudTelephonyIntegration(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/deactivate`,{method:"POST"})}async getCloudTelephonyPhoneNumbers(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers`)}async addCloudTelephonyPhoneNumber(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers`,{method:"POST",body:JSON.stringify(n)})}async updateCloudTelephonyPhoneNumber(r,n,a){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers/${n}`,{method:"PUT",body:JSON.stringify(a)})}async removeCloudTelephonyPhoneNumber(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/phone-numbers/${n}`,{method:"DELETE"})}async getCloudTelephonyCallLogs(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),n?.limit&&a.append("limit",n.limit.toString()),this.requestWithRetry(`/integrations/cloud-telephony/${r}/calls?${a.toString()}`)}async getCloudTelephonyAnalytics(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/cloud-telephony/${r}/analytics?${a.toString()}`)}async makeTestCall(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/test-call`,{method:"POST",body:JSON.stringify(n)})}async updateCloudTelephonyIVR(r,n){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/ivr`,{method:"PUT",body:JSON.stringify(n)})}async getCloudTelephonyIVR(r){return this.requestWithRetry(`/integrations/cloud-telephony/${r}/ivr`)}async getCloudTelephonyRecordings(r,n){const a=n?`?callSid=${n}`:"";return this.requestWithRetry(`/integrations/cloud-telephony/${r}/recordings${a}`)}async getCloudTelephonyUsage(r,n){const a=new URLSearchParams;return n?.startDate&&a.append("startDate",n.startDate),n?.endDate&&a.append("endDate",n.endDate),this.requestWithRetry(`/integrations/cloud-telephony/${r}/usage?${a.toString()}`)}async getSuperAdminDashboardData(){return this.requestWithRetry("/super-admin/dashboard")}async getSuperAdminOrganizations(){return this.requestWithRetry("/super-admin/organizations")}async getSuperAdminUsers(){return this.requestWithRetry("/super-admin/users")}async getSuperAdminLeads(){return this.requestWithRetry("/super-admin/leads")}async getSuperAdminTasks(){return this.requestWithRetry("/super-admin/tasks")}async getSuperAdminSupportTickets(){return this.requestWithRetry("/super-admin/support-tickets")}async getSuperAdminInquiries(){return this.requestWithRetry("/super-admin/inquiries")}async getSuperAdminBlogPosts(){return this.requestWithRetry("/super-admin/blog")}async createSuperAdminOrganization(r){return this.requestWithRetry("/super-admin/organizations",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminOrganization(r,n){return this.requestWithRetry(`/super-admin/organizations/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminOrganization(r){return this.requestWithRetry(`/super-admin/organizations/${r}`,{method:"DELETE"})}async createSuperAdminPlan(r){return this.requestWithRetry("/super-admin/plans",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminPlan(r,n){return this.requestWithRetry(`/super-admin/plans/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminPlan(r){return this.requestWithRetry(`/super-admin/plans/${r}`,{method:"DELETE"})}async updateSuperAdminSupportTicketStatus(r,n){return this.requestWithRetry(`/super-admin/support-tickets/${r}/status`,{method:"PUT",body:JSON.stringify({status:n})})}async updateSuperAdminInquiryStatus(r,n){return this.requestWithRetry(`/super-admin/inquiries/${r}/status`,{method:"PUT",body:JSON.stringify({status:n})})}async getSuperAdminAnalytics(){return this.requestWithRetry("/super-admin/analytics")}async getSuperAdminMonitoring(){return this.requestWithRetry("/super-admin/monitoring")}async getSystemInfo(){return this.requestWithRetry("/super-admin/monitoring")}async getSuperAdminAuditLogs(){return this.requestWithRetry("/super-admin/audit-logs")}async getSuperAdminGlobalSettings(){return this.requestWithRetry("/super-admin/settings")}async getSuperAdminPaymentGatewaySettings(){return this.requestWithRetry("/super-admin/payment-gateways")}async testSuperAdminPaymentGateway(r,n,a,s){return this.requestWithRetry("/super-admin/test-payment",{method:"POST",body:JSON.stringify({provider:r,amount:n||1,currency:a||"USD",description:s||"Payment Gateway Test"})})}async createSuperAdminPaymentGatewaySetting(r){return this.requestWithRetry("/super-admin/payment-gateways",{method:"POST",body:JSON.stringify(r)})}async updateSuperAdminPaymentGatewaySetting(r,n){return this.requestWithRetry(`/super-admin/payment-gateways/${r}`,{method:"PUT",body:JSON.stringify(n)})}async updateSuperAdminPaymentGatewaySettingByProvider(r,n){return console.log("API Service - Updating payment gateway by provider:",r,n),this.requestWithRetry(`/super-admin/payment-gateways/provider?provider=${encodeURIComponent(r)}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSuperAdminPaymentGatewaySetting(r){return this.requestWithRetry(`/super-admin/payment-gateways/${r}`,{method:"DELETE"})}}const Me=new qK,VK=({onNext:e,onFileSelect:r,loading:n,error:a})=>t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Upload your file"}),t.jsx("p",{className:"text-sm text-subtle mb-6",children:"Supported formats: CSV, XLS, XLSX. Maximum size: 10MB"}),t.jsx(FK,{onFileSelect:r,loading:n,error:a}),t.jsx("div",{className:"mt-6",children:t.jsxs("button",{onClick:()=>{const s=["full_name","email","phone_number","alternate_phone","city","company","lead_source","pipeline_stage","assigned_user_email","deal_value","expected_close_date","campaign_name","facebook_campaign","facebook_adset","facebook_ad","course_program","lead_status","job_title","work_experience_years","preferred_callback_time","dba_interest_reason"],i=["John Doe","john.doe@example.com","+1-555-0123","+1-555-0124","New York","Acme Corp","Facebook","Qualified","sales@company.com","50000","2024-12-31","Q4 Campaign","FB_Q4_2024","AdSet_001","Ad_001","MBA Program","Interested","Marketing Manager","5","Evening","Career advancement and leadership skills"],l=[s.join(","),i.join(",")].join(`
`),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),m=URL.createObjectURL(d);u.setAttribute("href",m),u.setAttribute("download","crm_import_sample.csv"),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m8 2h3m-3 0h-3m0 0v3m0-3v-3"})}),"Download Sample CSV Format"]})}),t.jsxs("div",{className:"mt-6 text-xs text-subtle",children:[t.jsx("p",{children:"Your file data will be processed securely and not stored permanently."}),t.jsx("p",{className:"mt-2",children:" Download the sample format above to see how to structure your data."})]})]}),HK=({customFieldDefs:e,users:r,fileData:n,onMappingsChange:a,onValidationChange:s})=>{const[i,l]=N.useState({}),d=[{id:"name",label:"Full Name",required:!0,category:"Basic"},{id:"email",label:"Email Address",required:!0,category:"Contact"},{id:"phone",label:"Phone Number",required:!1,category:"Contact"},{id:"alternatePhone",label:"Alternate Phone",required:!1,category:"Contact"},{id:"city",label:"City",required:!1,category:"Location"},{id:"company",label:"Company",required:!1,category:"Basic"},{id:"source",label:"Lead Source",required:!1,category:"Marketing"},{id:"stage",label:"Pipeline Stage",required:!1,category:"Sales"},{id:"assignedToId",label:"Assigned User (Owner)",required:!1,category:"Assignment"},{id:"dealValue",label:"Deal Value",required:!1,category:"Sales"},{id:"closeDate",label:"Expected Close Date",required:!1,category:"Sales"},{id:"campaign",label:"Campaign Name",required:!1,category:"Marketing"},{id:"facebookCampaign",label:"Facebook Campaign",required:!1,category:"Marketing"},{id:"facebookAdset",label:"Facebook Ad Set",required:!1,category:"Marketing"},{id:"facebookAd",label:"Facebook Ad",required:!1,category:"Marketing"},{id:"course",label:"Course/Program",required:!1,category:"Education"},...e.filter(p=>p.isMappable).map(p=>({id:`customFields.${p.id}`,label:p.name,required:p.isRequired,category:"Custom Fields"}))];N.useEffect(()=>{const p={};n.headers.forEach(y=>{const g=y.toLowerCase(),j=n.rows[0]?.[y]||"";g.includes("email")||j.includes("@")?p[y]="email":g.includes("full_name")||g.includes("name")||g.includes("first_name")||g.includes("last_name")?p[y]="name":g.includes("phone")||g.includes("mobile")||g.includes("contact")?p[y]="phone":g.includes("alternate_phone")||g.includes("secondary_phone")?p[y]="alternatePhone":g.includes("city")||g.includes("location")?p[y]="city":g.includes("company")||g.includes("organization")?p[y]="company":g.includes("lead_source")||g.includes("source")?p[y]="source":g.includes("pipeline_stage")||g.includes("stage")?p[y]="stage":g.includes("assigned_user")||g.includes("owner")||g.includes("assignee")?p[y]="assignedToId":g.includes("deal_value")||g.includes("value")||g.includes("amount")?p[y]="dealValue":g.includes("close_date")||g.includes("expected_close")?p[y]="closeDate":g.includes("campaign")||g.includes("campaign_name")?p[y]="campaign":g.includes("facebook_campaign")?p[y]="facebookCampaign":g.includes("facebook_adset")||g.includes("ad_set")?p[y]="facebookAdset":g.includes("facebook_ad")?p[y]="facebookAd":(g.includes("course")||g.includes("program"))&&(p[y]="course")});const f={...p,...i};l(f),a(f);const x=["name","email"],b=Object.values(f).filter(y=>x.includes(y)).length===x.length;s({isValid:b,errors:b?[]:[`Missing required field mappings: ${x.filter(y=>!Object.values(f).includes(y)).join(", ")}`],warnings:[]})},[n.headers,n.rows]);const u=p=>{const f=n.rows.slice(0,3).map(x=>x[p]).filter(x=>x!=null&&x!=="");return f.length>0?f.slice(0,2).join(", ")+(f.length>2?"...":""):"No data"},m=Object.values(i).filter(Boolean).length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-xl font-semibold text-on-surface mb-2",children:"Map Fields"}),t.jsxs("p",{className:"text-sm text-subtle mb-4",children:[m," of ",n.headers.length," columns mapped"]}),t.jsxs("button",{onClick:()=>{const p=["full_name","email","phone_number","alternate_phone","city","company","lead_source","pipeline_stage","assigned_user_email","deal_value","expected_close_date","campaign_name","facebook_campaign","facebook_adset","facebook_ad","course_program","lead_status","job_title","work_experience_years","preferred_callback_time","dba_interest_reason"],f=["John Doe","john.doe@example.com","+1-555-0123","+1-555-0124","New York","Acme Corp","Facebook","Qualified","sales@company.com","50000","2024-12-31","Q4 Campaign","FB_Q4_2024","AdSet_001","Ad_001","MBA Program","Interested","Marketing Manager","5","Evening","Career advancement and leadership skills"],x=[p.join(","),f.join(",")].join(`
`),b=new Blob([x],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),g=URL.createObjectURL(b);y.setAttribute("href",g),y.setAttribute("download","crm_import_sample.csv"),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium mb-4",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m8 2h3m-3 0h-3m0 0v3m0-3v-3"})}),"Download Sample CSV"]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-2 border-b border-muted text-sm font-semibold text-on-surface",children:[t.jsx("div",{children:"CRM Field"}),t.jsx("div",{children:"CSV Header (select to map)"}),t.jsx("div",{children:"Custom Field Options"})]}),t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.map(p=>{const f=Object.keys(i).find(x=>i[x]===p.id)||"";return f&&u(f),t.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"font-semibold text-sm text-on-surface bg-primary-50 dark:bg-primary-900/20 px-3 py-2 rounded",children:[p.label," ",p.required?"*":""]}),t.jsx("div",{className:"text-xs text-subtle px-3",children:p.category})]}),t.jsxs("select",{value:f,onChange:x=>{const b={...i};Object.keys(b).forEach(y=>{b[y]===p.id&&delete b[y]}),x.target.value&&(b[x.target.value]=p.id),l(b),a(b)},className:"bg-background border border-muted px-3 py-2 rounded text-sm focus:border-primary-500 focus:outline-none",children:[t.jsx("option",{value:"",children:"-- Select CSV Header --"}),n.headers.map(x=>t.jsx("option",{value:x,children:x},x))]}),t.jsxs("div",{className:"space-y-2",children:[p.id==="course"&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-xs",children:"Course Selection:"}),t.jsx("input",{type:"text",placeholder:"Type course name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),t.jsx("div",{className:"text-xs text-muted",children:"CSV values will be validated against these options"})]}),p.id==="stage"&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-xs",children:"Pipeline Stage Selection:"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",placeholder:"Type stage name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"})}),t.jsx("div",{className:"text-xs text-muted",children:"CSV values will be matched to pipeline stages"})]}),p.id==="source"&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-xs",children:"Lead Source Selection:"}),t.jsx("input",{type:"text",placeholder:"Type source name...",className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),t.jsx("div",{className:"text-xs text-muted",children:"CSV values will be categorized by source"})]}),p.id.startsWith("customFields.")&&(()=>{const x=e.find(b=>`customFields.${b.id}`===p.id);if(x&&x.type==="dropdown"&&x.options){const[b,y]=N.useState(""),[g,j]=N.useState(!1),k=b?x.options.filter(S=>S.toLowerCase().includes(b.toLowerCase())):x.options;return t.jsxs("div",{className:"space-y-1 relative",children:[t.jsx("div",{className:"font-medium text-xs",children:"Custom Field Options:"}),t.jsx("input",{type:"text",placeholder:"Type option value...",value:b,onChange:S=>{y(S.target.value),j(!0)},onFocus:()=>j(!0),onBlur:()=>setTimeout(()=>j(!1),200),className:"w-full bg-background border border-muted px-2 py-1 rounded text-xs focus:border-primary-500 focus:outline-none"}),g&&b&&k.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 bg-background border border-muted rounded-b shadow-lg max-h-32 overflow-y-auto z-10",children:k.map(S=>t.jsx("div",{className:"px-2 py-1 text-xs hover:bg-muted cursor-pointer",onClick:()=>{y(S),j(!1)},children:S},S))}),t.jsx("div",{className:"text-xs text-muted",children:"CSV values must match these predefined options"})]})}else if(x)return t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-xs",children:"Field Type:"}),t.jsxs("div",{className:"text-xs text-muted",children:[x.type==="text"&&"Text input field - any text value accepted",x.type==="number"&&"Number field - CSV values must be numeric",x.type==="date"&&"Date field - CSV values should be in date format",!["text","number","date","dropdown"].includes(x.type)&&"Custom field - validation depends on field type"]})]});return t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-xs",children:"Custom Field:"}),t.jsx("div",{className:"text-xs text-muted",children:"User-defined field values"})]})})(),!["course","stage","source"].includes(p.id)&&!p.id.startsWith("customFields.")&&t.jsxs("div",{className:"text-xs text-muted",children:[t.jsx("div",{className:"font-medium",children:"Field Type:"}),t.jsx("div",{children:"Free text input - any value accepted"})]})]})]},p.id)})})]}),t.jsxs("div",{className:"flex items-center justify-center gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>{const p={};n.headers.forEach(f=>{p[f]=""}),l(p),a(p)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"Clear All"}),t.jsx("button",{onClick:()=>{const p={};n.headers.forEach(x=>{const b=x.toLowerCase(),y=n.rows[0]?.[x]||"";b.includes("email")||y.includes("@")?p[x]="email":b.includes("full_name")||b.includes("name")||b.includes("first_name")||b.includes("last_name")?p[x]="name":b.includes("phone")||b.includes("mobile")||b.includes("contact")?p[x]="phone":b.includes("alternate_phone")||b.includes("secondary_phone")?p[x]="alternatePhone":b.includes("city")||b.includes("location")?p[x]="city":b.includes("company")||b.includes("organization")?p[x]="company":b.includes("lead_source")||b.includes("source")?p[x]="source":b.includes("pipeline_stage")||b.includes("stage")?p[x]="stage":b.includes("assigned_user")||b.includes("owner")||b.includes("assignee")?p[x]="assignedToId":b.includes("deal_value")||b.includes("value")||b.includes("amount")?p[x]="dealValue":b.includes("close_date")||b.includes("expected_close")?p[x]="closeDate":b.includes("campaign")||b.includes("campaign_name")?p[x]="campaign":b.includes("facebook_campaign")?p[x]="facebookCampaign":b.includes("facebook_adset")||b.includes("ad_set")?p[x]="facebookAdset":b.includes("facebook_ad")?p[x]="facebookAd":(b.includes("course")||b.includes("program"))&&(p[x]="course")});const f={...p};l(f),a(f)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:"Apply Auto-Mapping"})]})]})},GK=({mappings:e,fileHeaders:r,sampleData:n,onImport:a})=>{const s=e.filter(l=>l.crmField!=="---"),i=["name","email"].filter(l=>!s.some(d=>d.crmField===l));return t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Review a sample of your data before importing. Only mapped fields will be imported."}),i.length>0&&t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4",children:[t.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-semibold",children:["Missing required fields: ",i.join(", ")]}),t.jsx("p",{className:"text-xs text-red-500 dark:text-red-300 mt-1",children:"Please map these fields to continue with the import."})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"font-semibold text-on-surface mb-2",children:"Field Mappings:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:s.map(l=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono bg-muted px-2 py-1 rounded text-xs",children:l.sourceField}),t.jsx("span",{className:"text-subtle",children:""}),t.jsx("span",{className:"font-semibold",children:l.crmField})]},l.sourceField))})]}),t.jsxs("div",{className:"overflow-x-auto bg-background rounded-lg p-2",children:[t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsx("tr",{className:"text-left border-b border-muted",children:s.map(l=>t.jsx("th",{className:"p-2 font-semibold",children:l.crmField},l.sourceField))})}),t.jsx("tbody",{children:n.slice(0,5).map((l,d)=>t.jsx("tr",{className:"border-t border-muted",children:s.map(u=>t.jsx("td",{className:"p-2 truncate max-w-32",title:l[u.sourceField],children:l[u.sourceField]||"-"},u.sourceField))},d))})]}),n.length>5&&t.jsxs("p",{className:"text-xs text-subtle mt-2 text-center",children:["Showing 5 of ",n.length," rows"]})]}),t.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsxs("strong",{children:["Ready to import ",n.length," leads."]}),i.length===0?t.jsx(t.Fragment,{children:' Click "Confirm & Import" to start the import process.'}):t.jsx(t.Fragment,{children:" Please go back and map the required fields first."})]})})]})},KK=({customFieldDefs:e,users:r,onClose:n,onImport:a,currentOrganization:s,existingLeads:i})=>{const[l,d]=N.useState(1),[u,m]=N.useState(null),[p,f]=N.useState({}),[x,b]=N.useState({isValid:!1,errors:[],warnings:[]}),[y,g]=N.useState(null),[j,k]=N.useState(!1),[S,A]=N.useState(""),[w,E]=N.useState(!1),[T,O]=N.useState(0),[D,I]=N.useState(null),[M,L]=N.useState(""),B=async U=>{g(U),k(!0),A("");try{const q=await zK(U);m(q);const Q={};q.headers.forEach(K=>{Q[K]=""}),f(Q),d(2)}catch(q){A(q instanceof Error?q.message:"Failed to parse file")}finally{k(!1)}},z=async()=>{if(!(!u||!p)){E(!0),O(0),L("Preparing import...");try{const U=Object.entries(p).filter(([le,ge])=>ge).map(([le,ge])=>({sourceField:le,crmField:ge})),q=["name","email"].filter(le=>!U.some(ge=>ge.crmField===le));if(q.length>0)throw new Error(`Missing required field mappings: ${q.join(", ")}`);L("Validating data..."),O(10);const Q=[];if(u.rows.forEach((le,ge)=>{const ve=Object.entries(p).filter(([fe,Y])=>Y).map(([fe,Y])=>({sourceField:fe,crmField:Y}));UK(le,ve).forEach(fe=>{Q.push({...fe,row:ge+2})})}),Q.length>0&&Q.length>u.rows.length*.5)throw new Error(`Too many validation errors (${Q.length}). Please check your data and mappings.`);L("Detecting duplicates..."),O(30);const K=[],F=[],_=[],G=[];u.rows.forEach((le,ge)=>{try{const ve={organizationId:s.id,activities:[],score:0,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};U.forEach(fe=>{const Y=le[fe.sourceField];if(Y&&fe.crmField)if(fe.crmField.startsWith("customFields.")){const ne=fe.crmField.replace("customFields.","");ve.customFields=ve.customFields||{},ve.customFields[ne]=Y}else if(fe.crmField==="assignedToId"){const ne=r.find(ue=>ue.email.toLowerCase()===Y.toLowerCase());ne&&(ve.assignedToId=ne.id)}else ve[fe.crmField]=Y}),ve.source||(ve.source=Pa.WEBSITE),ve.stage||(ve.stage="new"),ve.followUpStatus||(ve.followUpStatus=Qs.PENDING),i.find(fe=>fe.email.toLowerCase()===ve.email?.toLowerCase())?_.push(ge+2):K.push(ve)}catch(ve){G.push({row:ge+2,message:ve instanceof Error?ve.message:"Unknown error"})}}),L("Creating leads..."),O(60);const Z=[];for(let le=0;le<K.length;le++){try{const ge=await Me.createLead(K[le]);Z.push(ge)}catch(ge){console.error(`Failed to create lead ${le+1}:`,ge),G.push({row:u.rows.indexOf(u.rows[le])+2,message:`Failed to create lead: ${ge instanceof Error?ge.message:"Unknown error"}`})}O(60+le/K.length*30)}L("Finalizing..."),O(95);const oe={success:!0,newLeads:Z.length,updatedLeads:F.length,failedLeads:G.length+_.length,errors:[...G,..._.map(le=>({row:le,message:"Duplicate lead (skipped)"}))]};I(oe),O(100),Z.length>0&&a(Z)}catch(U){I({success:!1,newLeads:0,updatedLeads:0,failedLeads:u.rows.length,errors:[{row:0,message:U instanceof Error?U.message:"Import failed"}]})}finally{E(!1)}}},W=()=>{I(null),O(0),E(!1),L("")},R=["Upload File","Map Fields","Review & Import"];if(D)return t.jsx(it,{isOpen:!0,onClose:n,title:"Import Results",children:t.jsx("div",{className:"p-4",children:t.jsx(t6,{isImporting:!1,progress:100,currentStep:"",result:D,onClose:n,onRetry:W})})});return t.jsxs(it,{isOpen:!0,onClose:n,title:`Import Leads (${l}/${R.length}) - ${R[l-1]}`,children:[t.jsxs("div",{className:"p-4",children:[l===1&&t.jsx(VK,{onNext:U=>{m(U),d(2)},onFileSelect:B,loading:j,error:S}),l===2&&u&&t.jsx(HK,{customFieldDefs:e,users:r,fileData:u,onMappingsChange:f,onValidationChange:b}),l===3&&u&&t.jsx(GK,{mappings:Object.entries(p).filter(([U,q])=>q).map(([U,q])=>({sourceField:U,crmField:q})),fileHeaders:u.headers,sampleData:u.rows,onImport:z})]}),t.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:()=>l>1?d(l-1):n(),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",disabled:w,children:l===1?"Cancel":"Back"}),t.jsx("button",{type:"button",onClick:()=>{l<3?d(l+1):z()},disabled:w||l===3&&!H(),className:"bg-primary-600 hover:bg-primary-700 disabled:bg-muted disabled:text-subtle text-white font-bold py-2 px-4 rounded-lg",children:w?"Importing...":l<3?"Next":"Confirm & Import"})]}),w&&t.jsx("div",{className:"mt-4",children:t.jsx(t6,{isImporting:!0,progress:T,currentStep:M,result:null,onClose:()=>{}})})]});function H(){if(!u||!p)return!1;const U=Object.values(p).filter(Boolean),q=["name","email"],Q=q.every(K=>U.includes(K));return console.log("canProceedWithImport check:",{hasRequiredFields:Q,validationIsValid:x.isValid,mappedFields:U,requiredFields:q,mappings:p}),Q&&x.isValid}},Kc=({conditions:e,onConditionsChange:r,users:n,pipelineStages:a,customFieldDefs:s,headerContent:i})=>{const l=N.useMemo(()=>[{id:"name",name:"Name",type:"text"},{id:"email",name:"Email",type:"text"},{id:"phone",name:"Phone",type:"text"},{id:"city",name:"City",type:"text"},{id:"course",name:"Course",type:"text"},{id:"company",name:"Company",type:"text"},{id:"campaign",name:"Campaign",type:"text"},{id:"tags",name:"Tags",type:"text"},{id:"source",name:"Source",type:"select",options:dT},{id:"stage",name:"Stage",type:"select",options:a.map(f=>f.id),displayOptions:a.map(f=>f.name)},{id:"assignedToId",name:"Owner",type:"select",options:[0,...n.map(f=>f.id)],displayOptions:["System",...n.map(f=>f.name)]},{id:"score",name:"Score",type:"number"},{id:"dealValue",name:"Deal Value",type:"number"},...s.map(f=>({...f,name:`(Custom) ${f.name}`}))],[n,a,s]),d=()=>r([...e,{field:"name",operator:"contains",value:"",logic:"AND"}]),u=f=>r(e.filter((x,b)=>b!==f)),m=(f,x)=>r(e.map((b,y)=>y===f?x:b)),p=(f,x)=>{const b=l.find(y=>y.id===f.field);return b?.type==="select"?t.jsx("select",{value:f.value,onChange:y=>m(x,{...f,value:y.target.value}),className:"bg-surface border border-muted rounded-md p-2 w-full text-sm",children:(b.options||[]).map((y,g)=>t.jsx("option",{value:y.toString(),children:(b.displayOptions||b.options||[])[g]},y.toString()))}):t.jsx("input",{type:b?.type||"text",value:f.value,onChange:y=>m(x,{...f,value:y.target.value}),placeholder:"Value",className:"bg-surface border border-muted rounded-md p-2 w-full text-sm"})};return t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-sm border border-muted space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Filters"}),i]}),t.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:e.map((f,x)=>t.jsxs("div",{className:"space-y-2",children:[x>0&&t.jsx("div",{className:"pl-2",children:t.jsxs("select",{value:f.logic,onChange:b=>m(x,{...f,logic:b.target.value}),className:"bg-muted text-on-surface text-xs font-bold p-1 rounded-md",children:[t.jsx("option",{value:"AND",children:"AND"}),t.jsx("option",{value:"OR",children:"OR"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-2 items-center",children:[t.jsx("select",{value:f.field,onChange:b=>m(x,{...f,field:b.target.value}),className:"md:col-span-3 bg-background border border-muted rounded-md p-2 text-sm",children:l.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))}),t.jsxs("select",{value:f.operator,onChange:b=>m(x,{...f,operator:b.target.value}),className:"md:col-span-3 bg-background border border-muted rounded-md p-2 text-sm",children:[t.jsx("option",{value:"contains",children:"Contains"}),t.jsx("option",{value:"equals",children:"Equals"}),t.jsx("option",{value:"not_equals",children:"Does not equal"}),t.jsx("option",{value:"gt",children:"Greater than"}),t.jsx("option",{value:"lt",children:"Less than"})]}),t.jsx("div",{className:"md:col-span-3",children:p(f,x)}),t.jsx("button",{onClick:()=>u(x),className:"text-red-400 hover:text-red-500",children:t.jsx(V.Delete,{className:"w-5 h-5"})})]})]},x))}),t.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-muted mt-3",children:[t.jsx("button",{type:"button",onClick:d,className:"text-sm text-primary-500 font-semibold hover:text-primary-600",children:"+ Add condition"}),e.length>0&&t.jsx("button",{type:"button",onClick:()=>r([]),className:"text-sm text-subtle font-semibold hover:text-on-surface",children:"Clear all"})]})]})},uv=({lead:e,currentUser:r,type:n,onClose:a,onSchedule:s})=>{const[i,l]=N.useState(""),[d,u]=N.useState(()=>{const p=new Date;return p.setDate(p.getDate()+1),p.setHours(10,0,0,0),p.toISOString().slice(0,16)}),m=()=>{if(!i.trim()||!d){alert("Message and schedule time are required.");return}s({leadId:e.id,type:n,content:i,scheduledAt:new Date(d).toISOString(),status:"PENDING"}),a()};return t.jsxs(it,{isOpen:!0,onClose:a,title:`Schedule ${n} for ${e.name}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Schedule for"}),t.jsx("input",{type:"datetime-local",value:d,onChange:p=>u(p.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message"}),t.jsx("textarea",{value:i,onChange:p=>l(p.target.value),rows:8,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",placeholder:`Write your ${n.toLowerCase()} message here...`})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:m,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:"Schedule Message"})]})]})},r6=["Connected","No Answer","Left Voicemail","Wrong Number","Call Back Later"],mv=({onClose:e,onLog:r})=>{const[n,a]=N.useState(r6[0]),[s,i]=N.useState(""),l=()=>{if(!s.trim()){alert("Please enter some notes for the call.");return}r(n,s)};return t.jsxs(it,{isOpen:!0,onClose:e,title:"Log a Call",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Call Outcome"}),t.jsx("select",{value:n,onChange:d=>a(d.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",children:r6.map(d=>t.jsx("option",{value:d,children:d},d))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Notes"}),t.jsx("textarea",{value:s,onChange:d=>i(d.target.value),rows:5,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3",placeholder:"e.g., Discussed pricing, customer is interested in the pro plan..."})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:e,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:l,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Log Call"})]})]})},pv=({lead:e,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=N.useState("template"),[d,u]=N.useState(r[0]?.id||""),[m,p]=N.useState(""),f=()=>{if(i==="custom")return m;const b=r.find(y=>y.id===d);return b?b.body.replace(/{{name}}/g,e.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,e.course||"the course"):""},x=()=>{const b=f();if(!b.trim()){alert("Message cannot be empty.");return}console.log(`Sending SMS to ${e.phone}: "${b}"`),alert(`SMS message sent to ${e.name} at ${e.phone}`),s(b)};return t.jsxs(it,{isOpen:!0,onClose:a,title:`Send SMS to ${e.name}`,children:[t.jsxs("div",{className:"flex border-b border-muted mb-4",children:[t.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),t.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),t.jsx("select",{value:d,onChange:b=>u(b.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))})]}):t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),t.jsx("textarea",{value:m,onChange:b=>p(b.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[t.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),t.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:f()})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsxs("button",{type:"button",onClick:x,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.SMS,{className:"h-5 w-5 mr-2"})," Send SMS"]})]})]})},Yc=({isOpen:e,onClose:r,title:n,children:a})=>(N.useEffect(()=>{const s=i=>{i.key==="Escape"&&r()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e,r]),e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:t.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r})}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:t.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[n&&t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:n}),t.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"max-h-[80vh] sm:max-h-[70vh] overflow-y-auto",children:a})]})})]})}):null),YK=({isOpen:e,onClose:r,onSave:n,leadId:a,currentUser:s,isLoading:i=!1})=>{const[l,d]=N.useState(""),[u,m]=N.useState(!1),p=()=>{!l.trim()||i||(n({content:l.trim(),leadId:a}),d(""),m(!1),r())},f=b=>{b.preventDefault()},x=()=>{i||(d(""),m(!1),r())};return t.jsx(Yc,{isOpen:e,onClose:x,title:"Add Note",children:t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Note Content"}),t.jsx("textarea",{value:l,onChange:b=>{d(b.target.value),m(b.target.value.trim().length>0)},placeholder:"Add a note about this lead...",rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none",disabled:i,autoFocus:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:x,className:"bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-4 rounded-lg disabled:opacity-50",disabled:i,children:"Cancel"}),t.jsx("button",{type:"button",onClick:p,className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center gap-2 disabled:opacity-50",disabled:!l.trim()||i,children:i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Lt.Note,{className:"h-4 w-4"}),u?"Save Note":"Add Note"]})})]})]})})},XK=e=>{const r=N.useRef(null),n=N.useRef(null);N.useCallback(()=>{if(r.current?.readyState!==WebSocket.OPEN)try{console.log("WebSocket disabled - no backend endpoint available");return}catch(i){console.error("Failed to create WebSocket connection:",i)}},[e]);const a=N.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),r.current&&(r.current.close(1e3,"Component unmounting"),r.current=null)},[]),s=N.useCallback(i=>{console.warn("WebSocket is disabled - message not sent:",i)},[]);return N.useEffect(()=>()=>{a()},[a]),{isConnected:!1,sendMessage:s}},JK=({activities:e,users:r,currentUser:n,leadId:a,onRefresh:s,onManualRefresh:i,realTime:l=!0,disableAutoRefresh:d=!1})=>{const[u,m]=N.useState([]),[p,f]=N.useState(!1),[x,b]=N.useState(new Set),[y,g]=N.useState(l),[j,k]=N.useState(!1),S=N.useRef(null),{isConnected:A}=XK(a),w=N.useCallback(async()=>{if(a){f(!0);try{console.log("ActivityTimeline: Loading all activities for lead:",a);const[W,R,H]=await Promise.all([Me.getNotes(a),Me.getCalls(a),Me.getTasks(n.organizationId)]),U=[];(W||[]).forEach(K=>{U.push({id:K.id||`note-${K.createdAt}`,type:"NOTE",content:`Note added: <i class="whitespace-pre-wrap">"${K.content}"</i>`,timestamp:K.createdAt,authorId:K.authorId})}),(R||[]).forEach(K=>{U.push({id:K.id||`call-${K.createdAt}`,type:"CALL",content:`Call logged. Outcome: <strong>${K.outcome}</strong>. Notes: <i class="whitespace-pre-wrap">"${K.notes||""}"</i>`,timestamp:K.createdAt,authorId:K.authorId})}),(H||[]).filter(K=>K.leadId===a).forEach(K=>{U.push({id:K.id||`task-${K.createdAt}`,type:K.isCompleted?"TASK_COMPLETED":"TASK_CREATED",content:K.isCompleted?`Task completed: "${K.title}"`:`Task created: "${K.title}"`,timestamp:K.updatedAt||K.createdAt,authorId:K.createdById})});const q=new Map;U.forEach(K=>{const F=`${K.type}-${K.timestamp}-${K.content}`;q.set(F,K)}),(e||[]).forEach(K=>{const F=K,_=`${F.type}-${F.timestamp}-${F.content}`;q.has(_)||q.set(_,F)});const Q=Array.from(q.values()).sort((K,F)=>new Date(F.timestamp).getTime()-new Date(K.timestamp).getTime());m(Q),console.log("ActivityTimeline: Loaded activities:",Q.length)}catch(W){console.error("ActivityTimeline: Error loading activities:",W)}finally{f(!1)}}},[a,n.organizationId,e]);N.useEffect(()=>{w()},[w]);const E=X.useMemo(()=>{const W={};return u.forEach(R=>{const H=new Date(R.timestamp).toDateString();W[H]||(W[H]=[]),W[H].push(R)}),Object.keys(W).forEach(R=>{W[R].sort((H,U)=>new Date(U.timestamp).getTime()-new Date(H.timestamp).getTime())}),W},[u]);N.useEffect(()=>{if(!l||!y||A||d){S.current&&(console.log("ActivityTimeline: Stopping polling due to condition change"),clearInterval(S.current),S.current=null);return}return console.log("ActivityTimeline: Starting polling every 5 seconds for instant updates"),S.current=setInterval(()=>{console.log("ActivityTimeline: Polling triggered - fetching latest activities"),w()},5e3),()=>{console.log("ActivityTimeline: Stopping polling"),S.current&&(clearInterval(S.current),S.current=null)}},[l,y,A,d,w]),N.useEffect(()=>{const W=H=>{H.detail?.leadId===a&&(console.log("ActivityTimeline: Timeline refresh event received, fetching activities immediately"),w())},R=H=>{H.detail?.leadId===a&&(console.log("ActivityTimeline: Instant activity update received, refreshing immediately"),w())};return window.addEventListener("timelineRefresh",W),window.addEventListener("activityUpdate",R),()=>{window.removeEventListener("timelineRefresh",W),window.removeEventListener("activityUpdate",R)}},[a,w]),N.useEffect(()=>{},[A,l]),N.useEffect(()=>()=>{console.log("ActivityTimeline: Component cleanup, ensuring no polling remains active"),S.current&&(clearInterval(S.current),S.current=null),g(!1)},[]),N.useEffect(()=>{l||(console.log("ActivityTimeline: realTime disabled, stopping all polling"),S.current&&(clearInterval(S.current),S.current=null),g(!1))},[l]),N.useEffect(()=>{console.log("ActivityTimeline Debug:",{isRealTimeEnabled:y,hasOnRefresh:!!s,isConnected:A,shouldPoll:y&&!!s&&!A})},[y,s,A]),N.useEffect(()=>{l||console.log("ActivityTimeline: realTime prop is false, ensuring no polling")},[l]),N.useEffect(()=>{!l&&y&&(console.log("ActivityTimeline: Forcing isRealTimeEnabled to false due to realTime prop"),g(!1))},[l,y]),N.useEffect(()=>{l||(console.log("ActivityTimeline: realTime is false, completely disabling polling"),g(!1))},[l]);const T=W=>{const R=new Set(x);R.has(W)?R.delete(W):R.add(W),b(R)},O=(W,R,H)=>{const U={className:"h-5 w-5"};let q="";switch(W){case"EMAIL":q="text-blue-500";break;case"WHATSAPP":q="text-green-500";break;case"SMS":q="text-purple-500";break;case"CALL":q="text-indigo-500";break;case"NOTE":q="text-yellow-500";break;case"TASK_CREATED":q="text-cyan-500";break;case"TASK_COMPLETED":q="text-emerald-500";break;case"LEAD_CREATED":q="text-blue-600";break;case"MESSAGE_SCHEDULED":q="text-orange-500";break;case"FIELD_UPDATE":case"STATUS_CHANGE":q=D(H||"");break;default:q="text-gray-500"}switch(R==="failed"?U.className+=" text-red-500":R==="sent"||R==="delivered"?U.className+=" text-green-600":R==="pending"?U.className+=" text-yellow-500":R==="initiated"?U.className+=" text-blue-500":U.className+=` ${q}`,W){case"EMAIL":return t.jsx(Lt.Email,{...U});case"WHATSAPP":return t.jsx(Lt.Whatsapp,{...U});case"SMS":return t.jsx(Lt.SMS,{...U});case"CALL":return t.jsx(Lt.Call,{...U});case"NOTE":return t.jsx(Lt.Note,{...U});case"TASK_CREATED":return t.jsx(Lt.Tasks,{...U});case"TASK_COMPLETED":return t.jsx(Lt.Tasks,{...U});case"LEAD_CREATED":return t.jsx(Lt.Add,{...U});case"MESSAGE_SCHEDULED":return t.jsx(Lt.Activity,{...U});case"FIELD_UPDATE":case"STATUS_CHANGE":return t.jsx(Lt.StatusChange,{...U});default:return t.jsx("div",{className:"text-gray-400",children:""})}},D=W=>{const R=W.toLowerCase();return R.includes("stage")||R.includes("pipeline")||R.includes("status")?"text-orange-500":R.includes("assigned to")||R.includes("owner")||R.includes("assigned")?"text-purple-500":R.includes("deal value")||R.includes("price")||R.includes("cost")?"text-green-500":R.includes("email")||R.includes("phone")||R.includes("contact")?"text-blue-500":R.includes("name")||R.includes("company")||R.includes("city")||R.includes("course")?"text-teal-500":R.includes("campaign")||R.includes("facebook")||R.includes("source")?"text-pink-500":"text-gray-500"},I=W=>{if(!W)return null;const R={sent:{label:"Saved",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},delivered:{label:"Delivered",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},failed:{label:"Failed",className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"},pending:{label:"Saving...",className:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},initiated:{label:"Initiated",className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}}[W];return R?t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.className}`,children:R.label}):null},M=W=>{const R=r.find(U=>U.id===W.authorId),H=new Date(W.timestamp).toLocaleString();return t.jsxs("div",{className:"flex items-start space-x-3 p-4 hover:bg-muted/30 rounded-lg transition-colors",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:O(W.type,W.status,W.content)}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-on-surface text-sm",children:L(W)}),I(W.status)]}),t.jsxs("span",{className:"text-xs text-subtle",children:[R?.name?.split(" (")[0]||"System","  ",H]})]}),t.jsx("p",{className:"text-sm text-subtle mb-2 line-clamp-2",children:B(W)}),z(W)&&t.jsxs("div",{className:"mt-2",children:[t.jsx("button",{onClick:()=>T(W.id),className:"text-xs text-primary-600 hover:text-primary-700 dark:text-primary-400",children:x.has(W.id)?"Show less":"Show more"}),x.has(W.id)&&t.jsx("div",{className:"mt-2 p-3 bg-muted/30 rounded border",children:z(W)})]})]})]})},L=W=>{switch(W.type){case"EMAIL":return"Email Sent";case"WHATSAPP":return"WhatsApp Message";case"SMS":return"SMS Sent";case"CALL":return"Call Logged";case"NOTE":return"Note Added";case"TASK_CREATED":return"Task Created";case"TASK_COMPLETED":return"Task Completed";case"LEAD_CREATED":return"Lead Created";case"MESSAGE_SCHEDULED":return"Message Scheduled";case"FIELD_UPDATE":return"Field Updated";case"STATUS_CHANGE":return"Status Changed";default:return"Activity"}},B=W=>{const R=W.content.replace(/<[^>]*>/g,"");return R.length>100?`${R.substring(0,100)}...`:R},z=W=>{const R=[];W.metadata?.duration&&R.push(`Duration: ${W.metadata.duration} seconds`),W.metadata?.templateId&&R.push("Template used"),W.metadata?.recipientCount&&R.push(`Recipients: ${W.metadata.recipientCount}`),W.metadata?.errorMessage&&R.push(`Error: ${W.metadata.errorMessage}`);const H=W.content.replace(/<[^>]*>/g,"");return H.length>100&&R.push(`Full content: ${H}`),R.length>0?t.jsx("div",{className:"space-y-1 text-xs text-subtle",children:R.map((U,q)=>t.jsxs("div",{children:[" ",U]},q))}):null};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-semibold text-on-surface",children:"Activity Timeline"}),d&&t.jsxs("div",{className:"flex items-center gap-1 text-xs bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300 px-2 py-1 rounded-full",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsx("span",{children:"Manual Refresh"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[y&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-600 dark:text-orange-400",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),t.jsx("span",{children:"Live (Polling)"})]})}),t.jsx("button",{onClick:()=>{console.log(`ActivityTimeline: ${y?"Pausing":"Resuming"} real-time updates`),g(!y)},className:`text-xs px-2 py-1 rounded transition-colors ${y?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200":"bg-muted text-subtle hover:bg-muted/80"}`,children:y?"Pause":"Resume"}),s&&t.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered by user"),k(!0),w(),setTimeout(()=>k(!1),2e3)},disabled:j,className:`text-xs px-3 py-1.5 rounded-lg flex items-center gap-1.5 transition-all duration-200 ${j?"bg-gray-400 text-white cursor-not-allowed scale-95":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white shadow-sm hover:shadow-md active:scale-95"}`,title:"Refresh timeline manually",children:j?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Refreshing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t.jsx("span",{children:"Refresh"})]})})]})]}),t.jsx("div",{className:"space-y-4",children:Object.keys(E).length===0?t.jsxs("div",{className:"text-center py-8 text-subtle",children:[t.jsx(Lt.Activity,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No activities yet"}),t.jsx("p",{className:"text-sm",children:"Activities will appear here when you interact with this lead"})]}):Object.entries(E).map(([W,R])=>t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-xs font-semibold text-primary-700 dark:text-primary-300",children:new Date(W).getDate()})}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("h4",{className:"font-medium text-on-surface",children:new Date(W).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),t.jsxs("p",{className:"text-xs text-subtle",children:[R.length," activit",R.length===1?"y":"ies"]})]})]}),t.jsx("div",{className:"ml-5 space-y-1 border-l border-muted pl-4",children:R.map((H,U)=>t.jsx("div",{children:M(H)},H.id))})]},W))})]})},ZK=({lead:e,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=N.useState("template"),[d,u]=N.useState(r[0]?.id||""),[m,p]=N.useState(""),f=()=>{if(i==="custom")return m;const b=r.find(y=>y.id===d);return b?b.body.replace(/{{name}}/g,e.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,e.course||"the course").replace(/{{dealValue}}/g,e.dealValue.toLocaleString()):""},x=()=>{const b=f();if(!b.trim()){console.error("Message Required: Please enter a message before sending.");return}console.log(`Sending WhatsApp to ${e.phone}: "${b}"`),console.log(`WhatsApp Sent: Message sent to ${e.name} at ${e.phone}`),s(b)};return t.jsxs(it,{isOpen:!0,onClose:a,title:`Send WhatsApp to ${e.name}`,children:[t.jsxs("div",{className:"flex border-b border-muted mb-4",children:[t.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),t.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),t.jsxs("select",{value:d,onChange:b=>u(b.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"",className:"bg-background text-on-surface",children:"Select a template"}),r.map(b=>t.jsx("option",{value:b.id,className:"bg-background text-on-surface",children:b.name},b.id))]})]}):t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),t.jsx("textarea",{value:m,onChange:b=>p(b.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[t.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),t.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:f()})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsxs("button",{type:"button",onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Whatsapp,{className:"h-5 w-5 mr-2"})," Send Message"]})]})]})},QK=({lead:e,onAddTask:r,onCancel:n,currentUser:a,onTaskCreated:s})=>{const[i,l]=N.useState(""),[d,u]=N.useState(""),[m,p]=N.useState(""),[f,x]=N.useState(!0),b=N.useRef(null),y=N.useRef(null);N.useEffect(()=>{const A=new Date;A.setDate(A.getDate()+1),A.setHours(9,0,0,0);const w=A.toISOString().split("T")[0],E=A.toTimeString().slice(0,5);u(w),p(E)},[]);const g=async A=>{if(A.preventDefault(),console.log("AddTaskForm: handleSubmit called with title:",i),!i.trim()){console.error("Task Title Required: Please enter a title for the task.");return}if(!d||!m){console.error("Date and Time Required: Please select a due date and time.");return}try{const w=new Date(`${d}T${m}`);if(w<=new Date){console.error("Invalid Date/Time: Please select a future date and time.");return}const E={title:i.trim(),leadId:e.id,assignedToId:e.assignedToId,isCompleted:!1,dueDate:w.toISOString(),createdById:a.id,organizationId:e.organizationId,reminderEnabled:f};console.log("AddTaskForm: Creating task:",E);const T=await Me.createTask(E);console.log("AddTaskForm: Task created successfully:",T),f&&j(T,w),r(T),s&&(console.log("AddTaskForm: Calling onTaskCreated callback"),s()),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:e.id}})),l(""),n(),console.log("Task Created: Task has been created successfully!")}catch(w){console.error("AddTaskForm: Error creating task:",w),console.error("Task Creation Failed:",w.message||"Please try again.")}},j=(A,w)=>{const E=new Date,T=w.getTime()-E.getTime();T>0&&setTimeout(()=>{k(A)},T)},k=A=>{"Notification"in window&&Notification.permission==="granted"?new Notification(`Task Reminder: ${A.title}`,{body:`Task for lead "${e.name}" is due now`,icon:"/favicon.ico",tag:`task-${A.id}`}):S(A)},S=A=>{const w=document.createElement("div");w.id="task-reminder-popup",w.innerHTML=`
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-surface rounded-xl p-6 max-w-lg mx-4 shadow-2xl border border-muted">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-500 text-white rounded-full p-3 mr-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-on-surface"> Task Reminder</h3>
                            <p class="text-sm text-subtle">Don't miss your important task!</p>
                        </div>
                    </div>

                    <div class="bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 mb-6 border-l-4 border-primary-500">
                        <h4 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-2">
                            "${A.title}"
                        </h4>
                        <p class="text-primary-700 dark:text-primary-300 mb-3">
                            Hey there! You have an important task to complete for your lead <strong>"${e.name}"</strong>.
                        </p>
                        <p class="text-primary-600 dark:text-primary-400 text-sm">
                            Completing this task will boost your performance and help convert more leads. Stay on top of your game! 
                        </p>
                    </div>

                    <div class="flex gap-3 justify-end">
                        <button onclick="document.getElementById('task-reminder-popup').remove()"
                                class="bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-6 rounded-lg transition-colors">
                            Remind me later
                        </button>
                        <button onclick="window.location.href='/leads/${e.id}'"
                                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-lg flex items-center gap-2 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                            Go to Task
                        </button>
                    </div>

                    <div class="mt-4 text-center">
                        <p class="text-xs text-subtle">
                            This reminder will auto-close in <span id="countdown">10</span> seconds
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(w);let E=10;const T=w.querySelector("#countdown");setInterval(()=>{E--,T&&(T.textContent=E.toString())},1e3)};return t.jsxs("form",{onSubmit:A=>{console.log("AddTaskForm: Form submitted"),g(A)},className:"p-4 space-y-4 bg-surface border border-muted rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Task Title"}),t.jsx("input",{type:"text",value:i,onChange:A=>{l(A.target.value)},placeholder:"What needs to be done?",autoFocus:!0,className:"w-full bg-background border border-muted p-3 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:b,type:"date",value:d,onChange:A=>u(A.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-month-field]:text-on-surface [&::-webkit-datetime-edit-day-field]:text-on-surface [&::-webkit-datetime-edit-year-field]:text-on-surface",min:new Date().toISOString().split("T")[0],required:!0}),t.jsx("button",{type:"button",onClick:()=>{b.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:t.jsx(V.Calendar,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Time"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:y,type:"time",value:m,onChange:A=>p(A.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-hour-field]:text-on-surface [&::-webkit-datetime-edit-minute-field]:text-on-surface [&::-webkit-datetime-edit-ampm-field]:text-on-surface",required:!0}),t.jsx("button",{type:"button",onClick:()=>{y.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:t.jsx(V.Activity,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"reminder-enabled",checked:f,onChange:A=>x(A.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),t.jsx("label",{htmlFor:"reminder-enabled",className:"text-sm text-subtle",children:"Enable reminder notification"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:()=>{console.log("AddTaskForm: Cancel button clicked"),n()},className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Add Task"})]})]})},ql=({title:e,children:r,initiallyOpen:n=!1})=>{const[a,s]=N.useState(n);return t.jsxs("div",{className:"border-t border-muted first-of-type:border-t-0",children:[t.jsxs("button",{onClick:()=>s(!a),className:"md:cursor-default md:pointer-events-none w-full flex justify-between items-center py-3 text-left",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:e}),t.jsx(V.ChevronRight,{className:`md:hidden h-5 w-5 text-subtle transition-transform ${a?"rotate-90":""}`})]}),t.jsx("div",{className:`pl-2 pb-4 space-y-4 md:block ${a?"block":"hidden"}`,children:r})]})},uT=({lead:e,users:r,tasks:n,pipelineStages:a,customFieldDefs:s,whatsAppTemplates:i,smsTemplates:l,onUpdateLead:d,onUpdateTask:u,onAddTask:m,onScheduleMessage:p,currentUser:f,onClose:x})=>{const[b,y]=N.useState("timeline"),[g,j]=N.useState(e),[k,S]=N.useState(!1),[A,w]=N.useState(!1),[E,T]=N.useState(!1),[O,D]=N.useState(!1);N.useEffect(()=>{console.log("LeadDetailModal: isAddingTask changed to:",O)},[O]);const[I,M]=N.useState(!1),[L,B]=N.useState({open:!1,type:null}),[z,W]=N.useState(!1),[R,H]=N.useState(!1),[U,q]=N.useState(!1),[Q,K]=N.useState([]),[F,_]=N.useState([]),[G,Z]=N.useState([]),oe=N.useMemo(()=>e,[e]),[le,ge]=N.useState([]),ve=N.useCallback(async()=>{try{const[ae,je,Ie]=await Promise.all([Me.getNotes(e.id),Me.getCalls(e.id),Me.getTasks(e.organizationId)]);K(ae||[]),_(je||[]),Z(Ie.filter(ee=>ee.leadId===e.id)||[]),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:e.id}}))}catch(ae){console.error("Error loading notes, calls, and tasks:",ae)}},[e.id,e.organizationId]);N.useEffect(()=>{ve()},[ve]);const fe=()=>{localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),localStorage.removeItem("sessionId"),localStorage.removeItem("activeSessions")},Y=()=>{const ae=localStorage.getItem("token")||localStorage.getItem("authToken");if(ae&&ae.split(".").length===3)try{const je=JSON.parse(atob(ae.split(".")[1]));return!0}catch{return console.warn("Token validation failed, clearing corrupted token"),fe(),!1}return!1};N.useEffect(()=>{j(e),H(!1),ge([])},[e]);const ne=(ae,je)=>{const Ie=oe[ae],ee=je;if(j(Ee=>({...Ee,[ae]:je})),Ie!==ee){H(!0);let Ee="";switch(ae){case"assignedToId":r.find(ot=>ot.id===Ie),Ee=`Assigned to ${r.find(ot=>ot.id===ee)?.name||"Unassigned"}`;break;case"stage":a.find(ot=>ot.id===Ie),Ee=`Stage changed to ${a.find(ot=>ot.id===ee)?.name||"Unknown"}`;break;case"name":Ee="Name updated";break;case"email":Ee="Email updated";break;case"phone":Ee="Phone updated";break;case"dealValue":Ee="Deal value updated";break;case"course":Ee="Course interest updated";break;case"company":Ee="Company updated";break;case"city":Ee="City updated";break;case"alternatePhone":Ee="Alternate phone updated";break;case"campaign":Ee="Campaign updated";break;case"tags":Ee="Tags updated";break;case"facebookCampaign":Ee="Facebook campaign updated";break;case"facebookAdset":Ee="Facebook adset updated";break;case"facebookAd":Ee="Facebook ad updated";break;default:Ee=`${ae} updated`}ge(ot=>[...ot,Ee])}},ue=(ae,je)=>{const Ie=s.find(Ee=>Ee.id===ae),ee=oe.customFields?.[ae]||"";if(ee!==je){j(ot=>({...ot,customFields:{...ot.customFields||{},[ae]:je}})),H(!0);const Ee=`Custom field "${Ie?.name||ae}" changed from "${ee}" to "${je}"`;ge(ot=>[...ot,Ee])}},Ve=async ae=>{try{console.log("Creating WhatsApp note:",{content:`Sent WhatsApp: "${ae}"`,leadId:e.id});const je=await Me.createNote({content:`Sent WhatsApp: "${ae}"`,leadId:e.id});console.log("WhatsApp note created successfully:",je),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:e.id}})),S(!1)}catch(je){console.error("Error sending WhatsApp:",je),console.error("WhatsApp Error:",je.message||"Please try again.")}},Te=async ae=>{try{console.log("Creating SMS note:",{content:`Sent SMS: "${ae}"`,leadId:e.id});const je=await Me.createNote({content:`Sent SMS: "${ae}"`,leadId:e.id});console.log("SMS note created successfully:",je),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:e.id}})),w(!1)}catch(je){console.error("Error sending SMS:",je),console.error("SMS Error:",je.message||"Please try again.")}},Pe=async(ae,je)=>{try{console.log("Creating call log:",{leadId:e.id,outcome:ae,notes:je,callType:"outbound"});const Ie=await Me.createCall({leadId:e.id,outcome:ae,notes:je,callType:"outbound"});console.log("Call logged successfully:",Ie),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("activityUpdate",{detail:{leadId:e.id}})),T(!1)}catch(Ie){console.error("Error logging call:",Ie),console.error("Call Logging Failed:",Ie.message||"Please try again.")}},Xe=async ae=>{try{console.log("Creating note:",{content:`Note: "${ae}"`,leadId:e.id});const je=await Me.createNote({content:`Note: "${ae}"`,leadId:e.id});console.log("Note created successfully:",je),await ve(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:e.id}})),M(!1)}catch(je){console.error("Error adding note:",je),console.error("Note Creation Failed:",je.message||"Please try again.")}},pe=async()=>{if(!R){x();return}if(!Y()){alert("Your session has expired. Please refresh the page and log in again."),fe(),setTimeout(()=>window.location.reload(),1e3);return}W(!0),console.log("Starting save process for lead:",g.id);try{const ae={name:g.name,email:g.email,phone:g.phone,alternatePhone:g.alternatePhone,city:g.city,course:g.course,company:g.company,source:g.source,stage:g.stage,followUpStatus:g.followUpStatus,score:g.score,tags:g.tags,assignedToId:g.assignedToId,dealValue:g.dealValue,closeDate:g.closeDate,activities:g.activities||[],scheduledMessages:g.scheduledMessages||[],campaign:g.campaign,facebookCampaign:g.facebookCampaign,facebookAdset:g.facebookAdset,facebookAd:g.facebookAd,customFields:g.customFields,organizationId:g.organizationId};console.log("Sending data to backend:",ae);const je=await Me.updateLead(g.id,ae);console.log("Backend response received successfully:",je._id);let Ie=je;if(le.length>0){const ee=`Lead updated: ${le.join(", ")}`,Ee={id:crypto.randomUUID(),type:"FIELD_UPDATE",content:ee,timestamp:new Date().toISOString(),authorId:f.id};Ie={...je,activities:[Ee,...je.activities||[]]}}d(Ie,oe),H(!1),ge([]),q(!0),console.log("Save process completed successfully"),console.log("LeadDetailModal: Backend save successful, dispatching timeline refresh event"),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:g.id}})),setTimeout(()=>{q(!1),x()},2e3)}catch(ae){console.error("Error saving lead:",ae),console.error("Error details:",{message:ae.message,stack:ae.stack,status:ae.status,response:ae.response}),ae.message&&(ae.message.includes("401")||ae.message.includes("invalid")||ae.message.includes("unauthorized"))?(alert("Your session has expired or is invalid. Please refresh the page and log in again."),fe(),setTimeout(()=>{window.location.href="/"},2e3)):ae.message&&ae.message.includes("Cannot connect to server")?alert("Cannot connect to server. Please ensure the backend server is running and try again."):alert(`Failed to save changes: ${ae.message||"Unknown error"}. Check console for details.`)}finally{W(!1)}},Oe=()=>{R?window.confirm("You have unsaved changes. Are you sure you want to close without saving?")&&x():x()};return t.jsxs(it,{isOpen:!0,onClose:()=>{},title:"",children:[k&&t.jsx(ZK,{lead:g,templates:i,currentUser:f,onClose:()=>S(!1),onSend:Ve}),A&&t.jsx(pv,{lead:g,templates:l,currentUser:f,onClose:()=>w(!1),onSend:Te}),E&&t.jsx(mv,{onClose:()=>T(!1),onLog:Pe}),I&&t.jsx(YK,{isOpen:I,onClose:()=>M(!1),onSave:ae=>Xe(ae.content),leadId:g.id,currentUser:f}),L.open&&L.type&&t.jsx(uv,{lead:g,currentUser:f,type:L.type,onClose:()=>B({open:!1,type:null}),onSchedule:p}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-muted bg-surface",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h2",{className:"text-xl font-bold text-on-surface",children:"Lead Details"}),R&&t.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full",children:"Unsaved Changes"}),U&&t.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:" Saved Successfully"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{window.confirm("This will clear all authentication data and require you to log in again. Continue?")&&(fe(),alert("Authentication data cleared. Please refresh the page to log in again."),setTimeout(()=>window.location.reload(),1e3))},className:"px-3 py-2 rounded-lg font-semibold text-sm bg-red-600 hover:bg-red-700 text-white",title:"Clear authentication data if you're having login issues",children:" Clear Auth"}),t.jsx("button",{onClick:pe,disabled:!R||z,className:`px-4 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 ${R&&!z?"bg-primary-600 hover:bg-primary-700 text-white":"bg-muted text-subtle cursor-not-allowed"}`,children:z?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(V.Success,{className:"w-4 h-4"}),"Save Changes"]})}),t.jsx("button",{onClick:Oe,className:"px-4 py-2 rounded-lg font-semibold text-sm bg-gray-600 hover:bg-gray-700 text-white",title:"Close modal",children:" Close"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[t.jsxs("div",{className:"lg:col-span-1 overflow-y-auto pr-4",onWheel:ae=>{ae.stopPropagation(),ae.preventDefault()},children:[t.jsxs(ql,{title:"Contact",initiallyOpen:!0,children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),t.jsx("input",{type:"text",value:g.name,onChange:ae=>ne("name",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),t.jsx("input",{type:"email",value:g.email,onChange:ae=>ne("email",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),t.jsx("input",{type:"tel",value:g.phone,onChange:ae=>ne("phone",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),t.jsxs("select",{value:g.assignedToId,onChange:ae=>ne("assignedToId",parseInt(ae.target.value)),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",children:[t.jsx("option",{value:0,className:"bg-background text-on-surface",children:"System"}),r.map(ae=>t.jsx("option",{value:ae.id,className:"bg-background text-on-surface",children:ae.name},ae.id))]})]})]}),t.jsxs(ql,{title:"Deal Info",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),t.jsx("select",{value:g.stage,onChange:ae=>ne("stage",ae.target.value),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",children:a.map(ae=>t.jsx("option",{value:ae.id,className:"bg-background text-on-surface",children:ae.name},ae.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),t.jsx("input",{type:"number",value:g.dealValue,onChange:ae=>ne("dealValue",Number(ae.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),t.jsx("input",{type:"text",value:g.course,onChange:ae=>ne("course",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),t.jsx("div",{className:"py-1 text-on-surface",children:g.source})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Created"}),t.jsx("div",{className:"py-1 text-on-surface",children:new Date(g.createdAt).toLocaleDateString()})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Last Updated"}),t.jsx("div",{className:"py-1 text-on-surface",children:new Date(g.updatedAt).toLocaleDateString()})]})]}),t.jsxs(ql,{title:"Additional Details",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),t.jsx("input",{type:"text",value:g.company||"",onChange:ae=>ne("company",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),t.jsx("input",{type:"text",value:g.city||"",onChange:ae=>ne("city",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),t.jsx("input",{type:"tel",value:g.alternatePhone||"",onChange:ae=>ne("alternatePhone",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),t.jsx("input",{type:"text",value:g.campaign||"",onChange:ae=>ne("campaign",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),t.jsx("input",{type:"text",value:Array.isArray(g.tags)?g.tags.join(", "):"",onChange:ae=>ne("tags",ae.target.value.split(",").map(je=>je.trim()).filter(Boolean)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:"Enter tags separated by commas"})]})]}),t.jsxs(ql,{title:"Facebook Details",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),t.jsx("input",{type:"text",value:g.facebookCampaign||"",onChange:ae=>ne("facebookCampaign",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),t.jsx("input",{type:"text",value:g.facebookAdset||"",onChange:ae=>ne("facebookAdset",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),t.jsx("input",{type:"text",value:g.facebookAd||"",onChange:ae=>ne("facebookAd",ae.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]}),s.length>0&&t.jsx(ql,{title:"Custom Fields",children:s.map(ae=>{const je=g.customFields?.[ae.id];return t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"text-xs font-medium text-subtle",children:[ae.name,ae.isRequired&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ae.type==="date"?t.jsx("input",{type:"date",value:je||"",onChange:Ie=>ue(ae.id,Ie.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",required:ae.isRequired}):ae.type==="number"?t.jsx("input",{type:"number",value:je||"",onChange:Ie=>ue(ae.id,Number(Ie.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",required:ae.isRequired}):ae.type==="dropdown"?t.jsxs("select",{value:je||"",onChange:Ie=>ue(ae.id,Ie.target.value),className:"w-full bg-background border border-muted py-1 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 rounded",required:ae.isRequired,children:[t.jsxs("option",{value:"",className:"bg-background text-on-surface",children:["Select ",ae.name]}),ae.options?.map(Ie=>t.jsx("option",{value:Ie,className:"bg-background text-on-surface",children:Ie},Ie))]}):t.jsx("input",{type:"text",value:je||"",onChange:Ie=>ue(ae.id,Ie.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:`Enter ${ae.name}`,required:ae.isRequired})]},ae.id)})})]}),t.jsxs("div",{className:"lg:col-span-2 flex flex-col overflow-hidden bg-background rounded-lg border border-muted",onWheel:ae=>{ae.stopPropagation(),ae.preventDefault()},children:[t.jsx("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center justify-between gap-2 border-b border-muted",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>y("timeline"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${b==="timeline"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Timeline"}),t.jsxs("button",{onClick:()=>y("tasks"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${b==="tasks"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Tasks",G.filter(ae=>!ae.isCompleted).length>0&&t.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[t.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:G.filter(ae=>!ae.isCompleted).length})]})]}),t.jsxs("button",{onClick:()=>y("scheduled"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${b==="scheduled"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Scheduled",(g.scheduledMessages||[]).length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(g.scheduledMessages||[]).length})})]})]})}),t.jsxs("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center gap-2 border-b border-muted",children:[t.jsxs("button",{onClick:()=>T(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Call,{className:"h-4 w-4"}),"Log Call"]}),t.jsxs("button",{onClick:()=>S(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Whatsapp,{className:"h-4 w-4"}),"WhatsApp"]}),t.jsxs("button",{onClick:()=>w(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.SMS,{className:"h-4 w-4"}),"SMS"]}),t.jsxs("button",{onClick:()=>{console.log("Add Task button clicked, setting isAddingTask to true and switching to tasks tab"),D(!0),y("tasks")},className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Tasks,{className:"h-4 w-4"}),"Add Task"]}),t.jsxs("button",{onClick:()=>M(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Note,{className:"h-4 w-4"}),"Add Note"]})]}),t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-6",children:[b==="timeline"&&t.jsx(JK,{activities:g.activities||[],users:r,currentUser:f,leadId:g.id,realTime:!0,onRefresh:ve}),b==="tasks"&&t.jsxs("div",{className:"space-y-2",children:[O&&t.jsxs(t.Fragment,{children:[console.log("AddTaskForm: Rendering form, isAddingTask is true"),t.jsx(QK,{lead:g,onAddTask:m,onCancel:()=>{console.log("AddTaskForm: Cancel button clicked"),D(!1)},currentUser:f,onTaskCreated:ve})]}),G.map(ae=>t.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[t.jsx("input",{type:"checkbox",checked:ae.isCompleted,onChange:()=>u({...ae,isCompleted:!ae.isCompleted}),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),t.jsx("p",{className:`flex-grow text-sm ${ae.isCompleted?"line-through text-subtle":""}`,children:ae.title}),t.jsx("p",{className:"text-xs text-subtle",children:new Date(ae.dueDate).toLocaleDateString()})]},ae.id||ae._id)),G.length===0&&!O&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),b==="scheduled"&&t.jsxs("div",{className:"divide-y divide-muted",children:[(g.scheduledMessages||[]).map(ae=>t.jsxs("div",{className:"py-3",children:[t.jsxs("p",{className:"text-sm font-semibold",children:[ae.type," scheduled for ",new Date(ae.scheduledAt).toLocaleString()]}),t.jsxs("p",{className:"text-sm text-subtle bg-muted p-2 rounded-md mt-1",children:['"',ae.content,'"']})]},ae.id)),(g.scheduledMessages||[]).length===0&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})]})]})},eY=({children:e,columnWidths:r,onColumnResize:n,columnOrder:a,onColumnReorder:s})=>{const[i,l]=N.useState(!1),[d,u]=N.useState(0),[m,p]=N.useState(null),[f,x]=N.useState(null),[b,y]=N.useState(null),g=k=>{if(!i||!m)return;const S=k.clientX-d,A=Math.max(80,(r[m]||150)+S);n(m,A),u(k.clientX)},j=()=>{l(!1),p(null)};return N.useEffect(()=>{if(i)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",j),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",j)}},[i,m,d]),t.jsx("div",{className:"relative",children:e})},tY=({isOpen:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(""),i=d=>{d.preventDefault(),a.trim()&&(n(a.trim()),s(""),r())},l=()=>{s(""),r()};return e?t.jsx(it,{isOpen:e,onClose:l,title:"Save Filter View",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Filter View Name"}),t.jsx("input",{type:"text",value:a,onChange:d=>s(d.target.value),placeholder:"Enter a name for this filter view",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",autoFocus:!0,required:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:l,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Filter View"})]})]})}):null},rY=({leads:e,users:r,pipelineStages:n,customFieldDefs:a,tasks:s,whatsAppTemplates:i,smsTemplates:l,addLead:d,deleteLead:u,currentUser:m,hasPermission:p,savedFilters:f,onSaveFilter:x,onDeleteFilter:b,onBulkAssign:y,onBulkDelete:g,onUpdateLead:j,onUpdateTask:k,onAddTask:S,onScheduleMessage:A,onImportLeads:w})=>{const[E,T]=N.useState(""),[O,D]=N.useState(new Set),[I,M]=N.useState("updatedAt"),[L,B]=N.useState("desc"),[z,W]=N.useState(1),[R,H]=N.useState(25),[U,q]=N.useState(!1),[Q,K]=N.useState(!1),[F,_]=N.useState(!1),[G,Z]=N.useState(!1),[oe,le]=N.useState(null),[ge,ve]=N.useState([]),[fe,Y]=N.useState(null),[ne,ue]=N.useState(!1),[Ve,Te]=N.useState(!1),[Pe,Xe]=N.useState(!1),[pe,Oe]=N.useState(!1),[ae,je]=N.useState(null),[Ie,ee]=N.useState(null),[Ee,ot]=N.useState(!1),[Rt,$t]=N.useState(!1),[$r,ur]=N.useState(!1),[zr,br]=N.useState(!1),[Ye,Tr]=N.useState({campaign:"",stage:"",assignedToId:0,course:""}),[yr,ie]=N.useState({checkbox:50,name:200,source:120,email:180,phone:140,alternatePhone:140,city:120,course:150,company:150,stage:120,followUpStatus:140,score:80,tags:120,assignedToId:140,dealValue:120,closeDate:120,campaign:150,facebookCampaign:150,facebookAdset:150,facebookAd:150,createdAt:120,updatedAt:120,actions:100}),[he,Fe]=N.useState(["checkbox","name","source","email","phone","alternatePhone","city","course","company","stage","followUpStatus","score","tags","assignedToId","dealValue","closeDate","campaign","facebookCampaign","facebookAdset","facebookAd","createdAt","updatedAt","actions"]),[Ke,Pt]=N.useState({name:!0,email:!0,phone:!0,alternatePhone:!1,city:!1,course:!1,company:!1,source:!1,stage:!0,followUpStatus:!1,score:!1,tags:!1,assignedToId:!0,dealValue:!1,closeDate:!1,campaign:!1,facebookCampaign:!1,facebookAdset:!1,facebookAd:!1,createdAt:!1,updatedAt:!0});N.useEffect(()=>{(async()=>(ue(!0),ue(!1)))()},[]),N.useEffect(()=>{(async()=>{try{const te=await Me.getLeadColumnPreferences();te.columnOrder&&Fe(te.columnOrder),te.visibleColumns&&Pt(we=>({...we,...te.visibleColumns}))}catch(te){console.error("Failed to load column preferences:",te);const we=localStorage.getItem("leadColumnPreferences");if(we)try{const De=JSON.parse(we);De.columnOrder&&Fe(De.columnOrder),De.visibleColumns&&Pt(ze=>({...ze,...De.visibleColumns}))}catch(De){console.error("Failed to parse saved column preferences:",De)}}})()},[]),N.useEffect(()=>{const te=setTimeout(async()=>{try{await Me.updateLeadColumnPreferences({columnOrder:he,visibleColumns:Ke})}catch(we){console.error("Failed to save column preferences:",we);const De={columnOrder:he,visibleColumns:Ke};localStorage.setItem("leadColumnPreferences",JSON.stringify(De))}},500);return()=>clearTimeout(te)},[he,Ke]);const Xt=(te,we)=>{Pt(De=>{const ze={...De,[te]:we},_e={columnOrder:he,visibleColumns:ze};return localStorage.setItem("leadColumnPreferences",JSON.stringify(_e)),ze})},ct=N.useMemo(()=>{let te=e;if(E){const we=E.toLowerCase();te=te.filter(De=>De.name?.toLowerCase().includes(we)||De.email?.toLowerCase().includes(we)||De.phone?.toLowerCase().includes(we)||De.company?.toLowerCase().includes(we))}return Ye.campaign&&(te=te.filter(we=>we.campaign?.toLowerCase().includes(Ye.campaign.toLowerCase()))),Ye.stage&&(te=te.filter(we=>we.stage===Ye.stage)),Ye.assignedToId>0&&(te=te.filter(we=>we.assignedToId===Ye.assignedToId)),Ye.course&&(te=te.filter(we=>we.course?.toLowerCase().includes(Ye.course.toLowerCase()))),te},[e,E,Ye.campaign,Ye.stage,Ye.assignedToId,Ye.course]),mt=N.useMemo(()=>{let te=ct;return ge.length>0&&(te=te.filter(we=>ge.every(De=>{const ze=we[De.field],_e=De.value;switch(De.operator){case"contains":return String(ze||"").toLowerCase().includes(String(_e||"").toLowerCase());case"equals":return ze===_e;case"not_equals":return ze!==_e;case"gt":return Number(ze)>Number(_e);case"lt":return Number(ze)<Number(_e);case"gte":return Number(ze)>=Number(_e);case"lte":return Number(ze)<=Number(_e);case"is_between":const[nr,wt]=Array.isArray(_e)?_e:[_e,_e];return Number(ze)>=Number(nr)&&Number(ze)<=Number(wt);default:return!0}}))),te.sort((we,De)=>{let ze=we[I],_e=De[I];if(I==="stage"){const nr=n.find(ft=>ft.id===ze),wt=n.find(ft=>ft.id===_e);ze=nr?.name||"",_e=wt?.name||""}return ze==null&&_e==null?0:ze==null?L==="asc"?-1:1:_e==null?L==="asc"?1:-1:(typeof ze=="string"&&typeof _e=="string"&&(ze=ze.toLowerCase(),_e=_e.toLowerCase()),ze<_e?L==="asc"?-1:1:ze>_e?L==="asc"?1:-1:0)}),te},[ct,ge,I,L,n]),Nr=N.useMemo(()=>{const te=(z-1)*R;return mt.slice(te,te+R)},[mt,z,R]),fa=Math.ceil(mt.length/R),vi=(te,we)=>{const De=new Set(O);we?De.add(te):De.delete(te),D(De)},Ps=te=>{D(te?new Set(Nr.map(we=>we.id)):new Set)},Tn=async te=>{try{await y(Array.from(O),te),D(new Set),q(!1)}catch(we){console.error("Failed to bulk assign leads:",we)}},ji=async()=>{if(window.confirm(`Are you sure you want to delete ${O.size} leads?`))try{await g(Array.from(O)),D(new Set)}catch(te){console.error("Failed to bulk delete leads:",te)}},ln=async te=>{try{for(const we of Array.from(O)){const De=e.find(ze=>ze.id===we);De&&await j({...De,...te})}alert(`Successfully updated ${O.size} leads!`)}catch(we){console.error("Failed to bulk update leads:",we),alert("Failed to update leads. Please try again.")}},wi=te=>{I===te?B(L==="asc"?"desc":"asc"):(M(te),B("asc"))},xa=te=>{ve(te),W(1)},ga=async te=>{try{await x({name:te,conditions:ge})}catch(we){console.error("Failed to save filter:",we)}},Br=te=>{ve(te.conditions),Y(te),W(1)},Ha=()=>{ve([]),Y(null),Tr({campaign:"",stage:"",assignedToId:0,course:""}),W(1)},ba=()=>{Tr({campaign:"",stage:"",assignedToId:0,course:""}),W(1)},ya=(te,we)=>{ie(De=>({...De,[te]:we}))},Ga=te=>{Fe(te)},Pn=(te,we)=>{je(we),te.dataTransfer.effectAllowed="move"},Ka=(te,we)=>{te.preventDefault(),ee(we)},Ya=()=>{je(null),ee(null)},Xa=(te,we)=>{if(te.preventDefault(),!ae||ae===we)return;const De=he.indexOf(ae),ze=he.indexOf(we);if(De===-1||ze===-1)return;const _e=[...he];_e.splice(De,1),_e.splice(ze,0,ae),Fe(_e),je(null),ee(null);const nr={columnOrder:_e,visibleColumns:Ke};localStorage.setItem("leadColumnPreferences",JSON.stringify(nr))},Pr=async te=>{try{Xe(!0);let we=[];switch(te){case"filtered":we=mt;break;case"all":we=e;break;case"selected":we=Array.from(O).map(et=>e.find(Dn=>Dn.id===et)).filter(Boolean);break;case"currentPage":we=Nr;break}if(we.length===0){alert("No leads to export.");return}const De=we.map(et=>({Name:et.name||"",Email:et.email||"",Phone:et.phone||"","Alternate Phone":et.alternatePhone||"",City:et.city||"",Course:et.course||"",Company:et.company||"",Source:typeof et.source=="string"?et.source:"",Stage:Ni(et.stage),"Follow Up Status":et.followUpStatus||"",Score:et.score||0,Tags:et.tags?.join(", ")||"","Assigned To":Ds(et.assignedToId),"Deal Value":et.dealValue||0,"Close Date":et.closeDate?new Date(et.closeDate).toLocaleDateString():"",Campaign:et.campaign||"","Facebook Campaign":et.facebookCampaign||"","Facebook Adset":et.facebookAdset||"","Facebook Ad":et.facebookAd||"","Created At":et.createdAt?new Date(et.createdAt).toLocaleDateString():"","Updated At":et.updatedAt?new Date(et.updatedAt).toLocaleDateString():"",...Object.fromEntries(a.map(Dn=>[Dn.name,et.customFields?.[Dn.id]||""]))})),ze=[Object.keys(De[0]).join(","),...De.map(et=>Object.values(et).map(Dn=>`"${Dn}"`).join(","))].join(`
`),_e=new Blob([ze],{type:"text/csv;charset=utf-8;"}),nr=document.createElement("a"),wt=URL.createObjectURL(_e);nr.setAttribute("href",wt);const ft={filtered:"filtered",all:"all",selected:"selected",currentPage:"current_page"}[te];nr.setAttribute("download",`leads_export_${ft}_${new Date().toISOString().split("T")[0]}.csv`),nr.style.visibility="hidden",document.body.appendChild(nr),nr.click(),document.body.removeChild(nr),ot(!1)}catch(we){console.error("Failed to export leads:",we),alert("Failed to export leads. Please try again.")}finally{Xe(!1)}},Ds=te=>r.find(we=>we.id===te)?.name||"Unassigned",Ni=te=>n.find(we=>we.id===te)?.name||"Unknown Stage",Qn=te=>n.find(we=>we.id===te)?.color||"#6b7280";return ne?t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),t.jsx("span",{className:"ml-2 text-subtle",children:"Loading leads..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-on-surface",children:"Leads"}),t.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[t.jsxs("p",{className:"text-subtle",children:[mt.length," lead",mt.length!==1?"s":"",E&&` matching "${E}"`]}),(Ye.campaign||Ye.stage||Ye.assignedToId>0)&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"text-primary-600 font-medium",children:"Basic filters active:"}),t.jsxs("span",{className:"bg-primary-100 text-primary-800 px-2 py-1 rounded-full text-xs",children:[ct.length," results"]})]})]})]}),t.jsx("div",{className:"flex gap-2",children:p(Zt.MANAGE_USERS)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-w-xs mr-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(V.Filter,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-subtle"}),t.jsx("input",{type:"text",placeholder:"Search by name, email, phone, company...",value:E,onChange:te=>T(te.target.value),className:"w-full pl-10 pr-12 py-3 bg-background border border-muted rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"}),t.jsx("button",{onClick:()=>$t(!0),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 text-subtle hover:text-primary-500",title:"Advanced Search Options",children:t.jsx(V.Filter,{className:"h-4 w-4"})})]})}),t.jsxs("button",{onClick:()=>K(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[t.jsx(V.Import,{className:"h-4 w-4"}),"Import"]}),t.jsxs("button",{onClick:()=>ot(!0),disabled:mt.length===0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[t.jsx(V.Export,{className:"h-4 w-4"}),"Export"]}),t.jsxs("button",{onClick:()=>{const te={name:"",email:"",phone:"",alternatePhone:"",city:"",course:"",company:"",stage:n[0]?.id||"",source:Pa.WEBSITE,assignedToId:m.id,followUpStatus:"Pending",dealValue:0,closeDate:"",tags:[],campaign:"",facebookCampaign:"",facebookAdset:"",facebookAd:""};d(te)},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[t.jsx(V.Add,{className:"h-4 w-4"}),"Add Lead"]}),t.jsxs("button",{onClick:()=>Oe(!0),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[t.jsx(V.Settings,{className:"h-4 w-4"}),"Columns"]})]})})]}),t.jsxs("div",{className:"bg-surface rounded-lg p-4 space-y-4",children:[t.jsx("div",{className:"flex flex-col lg:flex-row gap-4",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>ur(!$r),className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors ${$r||Ye.campaign||Ye.stage||Ye.assignedToId>0?"bg-primary-600 text-white":"bg-muted hover:bg-muted/80 text-on-surface"}`,children:[t.jsx(V.Filter,{className:"h-4 w-4"}),"Basic Filters",(Ye.campaign||Ye.stage||Ye.assignedToId>0||Ye.course)&&t.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:(Ye.campaign?1:0)+(Ye.stage?1:0)+(Ye.assignedToId>0?1:0)+(Ye.course?1:0)})]}),t.jsxs("button",{onClick:()=>Te(!Ve),className:`px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors ${Ve?"bg-primary-600 text-white":"bg-muted hover:bg-muted/80 text-on-surface"}`,children:[t.jsx(V.Filter,{className:"h-4 w-4"}),"Advanced Filters",ge.length>0&&t.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:ge.length})]}),f.length>0&&t.jsx("div",{className:"relative",children:t.jsxs("select",{value:fe?.id||"",onChange:te=>{const we=f.find(De=>De.id===te.target.value);we?Br(we):Ha()},className:"px-3 py-2 bg-background border border-muted rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"",children:"Saved Filters"}),f.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]})}),(ge.length>0||Ye.campaign||Ye.stage||Ye.assignedToId>0||Ye.course)&&t.jsx("button",{onClick:Ha,className:"px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-medium",children:"Clear All"})]})}),$r&&t.jsxs("div",{className:"border-t border-muted pt-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Campaign"}),t.jsx("input",{type:"text",value:Ye.campaign,onChange:te=>Tr(we=>({...we,campaign:te.target.value})),placeholder:"Filter by campaign name",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),Ye.campaign&&t.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",ct.length,' leads with campaign containing "',Ye.campaign,'"']})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Lead Stage"}),t.jsxs("select",{value:Ye.stage,onChange:te=>Tr(we=>({...we,stage:te.target.value})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"",children:"All Stages"}),n.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]}),Ye.stage&&t.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",ct.length," leads in ",n.find(te=>te.id===Ye.stage)?.name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Assigned To"}),t.jsxs("select",{value:Ye.assignedToId,onChange:te=>Tr(we=>({...we,assignedToId:Number(te.target.value)})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:0,children:"All Users"}),r.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]}),Ye.assignedToId>0&&t.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",ct.length," leads assigned to ",r.find(te=>te.id===Ye.assignedToId)?.name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Course"}),t.jsxs("select",{value:Ye.course,onChange:te=>Tr(we=>({...we,course:te.target.value})),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"",children:"All Courses"}),Array.from(new Set(e.map(te=>te.course).filter(Boolean))).sort().map(te=>t.jsx("option",{value:te,children:te},te))]}),Ye.course&&t.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Showing ",ct.length,' leads with course "',Ye.course,'"']})]})]}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsxs("div",{className:"text-sm text-subtle",children:["Total results: ",t.jsx("span",{className:"font-medium text-primary-600",children:ct.length})," leads"]}),t.jsx("button",{onClick:ba,className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded",children:"Clear Basic Filters"})]})]}),Ve&&t.jsx("div",{className:"border-t border-muted pt-4",children:t.jsx(Kc,{conditions:ge,onConditionsChange:xa,users:r,pipelineStages:n,customFieldDefs:a,headerContent:t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:()=>_(!0),className:"px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded",children:"Save Filter"})})})})]}),O.size>0&&t.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-primary-700 font-medium",children:[O.size," lead",O.size!==1?"s":""," selected"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>br(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Bulk Edit"}),t.jsx("button",{onClick:()=>q(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded text-sm",children:"Assign"}),t.jsx("button",{onClick:ji,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Delete"})]})]})}),t.jsx("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsx(eY,{columnWidths:yr,onColumnResize:ya,columnOrder:he,onColumnReorder:Ga,children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsx("tr",{children:he.filter(te=>Ke[te]!==!1).map(te=>{if(te==="checkbox")return t.jsx("th",{className:"px-6 py-3 text-left",children:t.jsx("input",{type:"checkbox",checked:Nr.length>0&&Nr.every(De=>O.has(De.id)),onChange:De=>Ps(De.target.checked),className:"rounded border-muted"})},te);if(te==="actions")return t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-subtle uppercase tracking-wider",children:"Actions"},te);const we={name:{label:"Name",sortable:!0,sortKey:"name"},source:{label:"Source",sortable:!0,sortKey:"source"},email:{label:"Email",sortable:!0,sortKey:"email"},phone:{label:"Phone",sortable:!0,sortKey:"phone"},alternatePhone:{label:"Alternate Phone",sortable:!1},city:{label:"City",sortable:!1},course:{label:"Course",sortable:!1},company:{label:"Company",sortable:!1},stage:{label:"Stage",sortable:!0,sortKey:"stage"},followUpStatus:{label:"Follow Up Status",sortable:!1},score:{label:"Score",sortable:!1},tags:{label:"Tags",sortable:!1},assignedToId:{label:"Assigned To",sortable:!1},dealValue:{label:"Deal Value",sortable:!1},closeDate:{label:"Close Date",sortable:!1},campaign:{label:"Campaign",sortable:!1},facebookCampaign:{label:"Facebook Campaign",sortable:!1},facebookAdset:{label:"Facebook Adset",sortable:!1},facebookAd:{label:"Facebook Ad",sortable:!1},createdAt:{label:"Created At",sortable:!1},updatedAt:{label:"Last Updated",sortable:!0,sortKey:"updatedAt"}}[te];return we?t.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider ${we.sortable?"cursor-pointer hover:bg-muted/70":""}`,onClick:we.sortable&&we.sortKey?()=>wi(we.sortKey):void 0,children:t.jsxs("div",{className:"flex items-center gap-1",children:[we.label,we.sortable&&we.sortKey&&I===we.sortKey&&t.jsx(V.ChevronRight,{className:`h-3 w-3 ${L==="desc"?"rotate-180":""}`})]})},te):null})})}),t.jsx("tbody",{className:"bg-surface divide-y divide-muted",children:Nr.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:he.filter(te=>Ke[te]!==!1).length,className:"px-6 py-12 text-center text-subtle",children:e.length===0?t.jsxs("div",{children:[t.jsx(V.Leads,{className:"mx-auto h-12 w-12 text-muted mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No leads yet"}),t.jsx("p",{className:"text-subtle mb-4",children:"Get started by adding your first lead or importing from a CSV file."}),t.jsxs("button",{onClick:()=>{const te={name:"",email:"",phone:"",alternatePhone:"",city:"",course:"",company:"",stage:n[0]?.id||"",source:Pa.WEBSITE,assignedToId:m.id,followUpStatus:"Pending",dealValue:0,closeDate:"",tags:[],campaign:"",facebookCampaign:"",facebookAdset:"",facebookAd:""};d(te)},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2",children:[t.jsx(V.Add,{className:"h-4 w-4"}),"Add Your First Lead"]})]}):t.jsxs("div",{children:[t.jsx(V.Filter,{className:"mx-auto h-12 w-12 text-muted mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No leads found"}),t.jsx("p",{className:"text-subtle",children:"Try adjusting your search or filters."})]})})}):Nr.map(te=>t.jsx("tr",{className:"hover:bg-muted/30 cursor-pointer",onClick:()=>{le(te),Z(!0)},children:he.filter(we=>Ke[we]!==!1).map(we=>{if(we==="checkbox")return t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:ze=>ze.stopPropagation(),children:t.jsx("input",{type:"checkbox",checked:O.has(te.id),onChange:ze=>vi(te.id,ze.target.checked),className:"rounded border-muted"})},we);if(we==="actions")return t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:ze=>ze.stopPropagation(),children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(vt,{to:`/leads/${te.id}`,className:"text-primary-600 hover:text-primary-900 p-1",onClick:ze=>ze.stopPropagation(),children:t.jsx(V.Edit,{className:"h-4 w-4"})}),p(Zt.DELETE_LEADS)&&t.jsx("button",{onClick:ze=>{ze.stopPropagation(),window.confirm("Are you sure you want to delete this lead?")&&u(te.id)},className:"text-red-600 hover:text-red-900 p-1",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})},we);const De=(ze,_e)=>{switch(ze){case"name":return t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium text-sm",children:_e.name?.charAt(0)?.toUpperCase()||"?"})})}),t.jsx("div",{className:"ml-4",children:t.jsx("div",{className:"text-sm font-medium text-on-surface",children:_e.name||"Unnamed Lead"})})]});case"source":return t.jsx("span",{children:typeof _e.source=="string"?_e.source:"Unknown"});case"email":return t.jsx("span",{children:_e.email||"-"});case"phone":return t.jsx("span",{children:_e.phone||"-"});case"alternatePhone":return t.jsx("span",{children:_e.alternatePhone||"-"});case"city":return t.jsx("span",{children:_e.city||"-"});case"course":return t.jsx("span",{children:_e.course||"-"});case"company":return t.jsx("span",{children:_e.company||"-"});case"stage":return t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`${Qn(_e.stage)}20`,color:Qn(_e.stage)},children:Ni(_e.stage)});case"followUpStatus":return t.jsx("span",{children:_e.followUpStatus||"-"});case"score":return t.jsx("span",{children:_e.score||0});case"tags":return t.jsx("span",{children:_e.tags?.join(", ")||"-"});case"assignedToId":return t.jsx("span",{children:Ds(_e.assignedToId)});case"dealValue":return t.jsx("span",{children:_e.dealValue?`$${_e.dealValue}`:"-"});case"closeDate":return t.jsx("span",{children:_e.closeDate?new Date(_e.closeDate).toLocaleDateString():"-"});case"campaign":return t.jsx("span",{children:_e.campaign||"-"});case"facebookCampaign":return t.jsx("span",{children:_e.facebookCampaign||"-"});case"facebookAdset":return t.jsx("span",{children:_e.facebookAdset||"-"});case"facebookAd":return t.jsx("span",{children:_e.facebookAd||"-"});case"createdAt":return t.jsx("span",{children:_e.createdAt?new Date(_e.createdAt).toLocaleDateString():"-"});case"updatedAt":return t.jsx("span",{children:_e.updatedAt?new Date(_e.updatedAt).toLocaleDateString():"-"});default:if(ze.startsWith("custom_")){const nr=ze.replace("custom_","");return t.jsx("span",{children:_e.customFields?.[nr]||"-"})}return t.jsx("span",{children:"-"})}};return t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-on-surface",children:De(we,te)},we)})},te.id))})]})})})}),fa>1&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-subtle",children:"Rows per page:"}),t.jsxs("select",{value:R,onChange:te=>{H(Number(te.target.value)),W(1)},className:"bg-background border border-muted rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:25,children:"25"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-subtle",children:[Math.min((z-1)*R+1,mt.length),"-",Math.min(z*R,mt.length)," of ",mt.length]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>W(Math.max(1,z-1)),disabled:z===1,className:"px-3 py-1 border border-muted rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted",children:"Previous"}),t.jsx("button",{onClick:()=>W(Math.min(fa,z+1)),disabled:z===fa,className:"px-3 py-1 border border-muted rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted",children:"Next"})]})]})]}),U&&t.jsx(_K,{onClose:()=>q(!1),users:r,onAssign:Tn}),Q&&w&&t.jsx(KK,{onClose:()=>K(!1),onImport:w,customFieldDefs:a,pipelineStages:n,users:r}),F&&t.jsx(tY,{isOpen:F,onClose:()=>_(!1),onSave:ga}),Rt&&t.jsx(it,{isOpen:Rt,onClose:()=>$t(!1),title:"Search Leads",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("input",{type:"text",placeholder:"Name",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}}),t.jsx("input",{type:"email",placeholder:"Email",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}}),t.jsx("input",{type:"tel",placeholder:"Phone",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}}),t.jsx("input",{type:"text",placeholder:"Company",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}}),t.jsx("input",{type:"text",placeholder:"City",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}}),t.jsx("input",{type:"text",placeholder:"Course",className:"bg-background border border-muted rounded py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&(T(te.target.value),$t(!1))}})]}),t.jsx("div",{className:"flex justify-end pt-3 border-t border-muted",children:t.jsx("button",{onClick:()=>$t(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface py-1 px-3 rounded text-sm",children:"Cancel"})})]})}),Ee&&t.jsx(it,{isOpen:Ee,onClose:()=>ot(!1),title:"Export Leads",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-subtle",children:"Choose what leads you want to export:"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>Pr("filtered"),disabled:Pe,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface",children:"Filtered Leads"}),t.jsxs("p",{className:"text-sm text-subtle",children:["Export leads matching current search and filters (",mt.length," leads)"]})]}),t.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),t.jsx("button",{onClick:()=>Pr("all"),disabled:Pe,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface",children:"All Leads"}),t.jsxs("p",{className:"text-sm text-subtle",children:["Export all leads in your organization (",e.length," leads)"]})]}),t.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),t.jsx("button",{onClick:()=>Pr("selected"),disabled:Pe||O.size===0,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface",children:"Selected Leads"}),t.jsxs("p",{className:"text-sm text-subtle",children:["Export only the leads you have selected (",O.size," leads)"]})]}),t.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})}),t.jsx("button",{onClick:()=>Pr("currentPage"),disabled:Pe,className:"w-full text-left p-4 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface",children:"Current Page"}),t.jsxs("p",{className:"text-sm text-subtle",children:["Export leads shown on current page (",Nr.length," leads)"]})]}),t.jsx(V.Export,{className:"h-5 w-5 text-primary-500"})]})})]}),Pe&&t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500 mr-2"}),t.jsx("span",{className:"text-sm text-subtle",children:"Exporting leads..."})]}),t.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:t.jsx("button",{onClick:()=>ot(!1),disabled:Pe,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg disabled:opacity-50",children:"Cancel"})})]})}),zr&&t.jsx(it,{isOpen:zr,onClose:()=>br(!1),title:`Bulk Edit ${O.size} Leads`,children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("p",{className:"text-sm text-subtle",children:"Update multiple leads at once. Only fill in the fields you want to change."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Lead Stage"}),t.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({stage:te.target.value})},children:[t.jsx("option",{value:"",children:"Select Stage"}),n.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Assigned To"}),t.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({assignedToId:Number(te.target.value)})},children:[t.jsx("option",{value:"",children:"Select User"}),r.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Follow Up Status"}),t.jsxs("select",{className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({followUpStatus:te.target.value})},children:[t.jsx("option",{value:"",children:"Select Status"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"In Progress",children:"In Progress"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Deal Value"}),t.jsx("input",{type:"number",placeholder:"Enter deal value",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value&&ln({dealValue:Number(te.target.value)})}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Campaign"}),t.jsx("input",{type:"text",placeholder:"Enter campaign name",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value.trim()&&ln({campaign:te.target.value.trim()})}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Tags (comma separated)"}),t.jsx("input",{type:"text",placeholder:"tag1, tag2, tag3",className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:te=>{te.target.value.trim()&&ln({tags:te.target.value.split(",").map(we=>we.trim())})}})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>br(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:()=>{br(!1),D(new Set)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Done"})]})]})}),pe&&t.jsx(it,{isOpen:pe,onClose:()=>Oe(!1),title:"Customize Columns",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-subtle",children:"Select which columns to display and drag to reorder them:"}),t.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Basic Lead Fields"}),t.jsx("div",{className:"space-y-2 pl-2",children:he.filter(te=>!te.startsWith("custom_")&&!["checkbox","actions","campaign","facebookCampaign","facebookAdset","facebookAd"].includes(te)).map(te=>{const we={name:"Name",source:"Source",email:"Email",phone:"Phone",alternatePhone:"Alternate Phone",city:"City",course:"Course",company:"Company",stage:"Stage",followUpStatus:"Follow Up Status",score:"Score",tags:"Tags",assignedToId:"Assigned To",dealValue:"Deal Value",closeDate:"Close Date",createdAt:"Created At",updatedAt:"Last Updated"}[te];return we?t.jsxs("div",{draggable:!0,onDragStart:De=>Pn(De,te),onDragOver:De=>Ka(De,te),onDragEnd:Ya,onDrop:De=>Xa(De,te),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===te?"opacity-50":""} ${Ie===te?"bg-primary-100":"hover:bg-muted/50"}`,children:[t.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),t.jsx("input",{type:"checkbox",checked:Ke[te]||!1,onChange:De=>Xt(te,De.target.checked),className:"rounded border-muted"}),t.jsx("span",{className:"text-sm text-on-surface",children:we})]},te):null})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Facebook Form Fields"}),t.jsx("div",{className:"space-y-2 pl-2",children:he.filter(te=>["campaign","facebookCampaign","facebookAdset","facebookAd"].includes(te)).map(te=>{const we={campaign:"Campaign",facebookCampaign:"Facebook Campaign",facebookAdset:"Facebook Adset",facebookAd:"Facebook Ad"}[te];return we?t.jsxs("div",{draggable:!0,onDragStart:De=>Pn(De,te),onDragOver:De=>Ka(De,te),onDragEnd:Ya,onDrop:De=>Xa(De,te),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===te?"opacity-50":""} ${Ie===te?"bg-primary-100":"hover:bg-muted/50"}`,children:[t.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),t.jsx("input",{type:"checkbox",checked:Ke[te]||!1,onChange:De=>Xt(te,De.target.checked),className:"rounded border-muted"}),t.jsx("span",{className:"text-sm text-on-surface",children:we})]},te):null})})]}),a.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-on-surface mb-2",children:"Custom Fields"}),t.jsx("div",{className:"space-y-2 pl-2",children:he.filter(te=>te.startsWith("custom_")).map(te=>{const we=te.replace("custom_",""),De=a.find(ze=>ze.id===we);return De?t.jsxs("div",{draggable:!0,onDragStart:ze=>Pn(ze,`custom_${De.id}`),onDragOver:ze=>Ka(ze,`custom_${De.id}`),onDragEnd:Ya,onDrop:ze=>Xa(ze,`custom_${De.id}`),className:`flex items-center space-x-3 p-2 rounded cursor-move transition-colors ${ae===`custom_${De.id}`?"opacity-50":""} ${Ie===`custom_${De.id}`?"bg-primary-100":"hover:bg-muted/50"}`,children:[t.jsx(V.GripVertical,{className:"h-4 w-4 text-subtle"}),t.jsx("input",{type:"checkbox",checked:Ke[`custom_${De.id}`]||!1,onChange:ze=>Xt(`custom_${De.id}`,ze.target.checked),className:"rounded border-muted"}),t.jsx("span",{className:"text-sm text-on-surface",children:De.name})]},De.id):null})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>Oe(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:()=>Oe(!1),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Apply Changes"})]})]})}),G&&oe&&t.jsx(uT,{onClose:()=>{Z(!1),le(null)},lead:oe,users:r,pipelineStages:n,customFieldDefs:a,tasks:s,whatsAppTemplates:i,smsTemplates:l,currentUser:m,onUpdateLead:j,onUpdateTask:k,onAddTask:S,onScheduleMessage:A})]})},mT=N.createContext(void 0),Xc=()=>{const e=N.useContext(mT);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},pT=({children:e})=>{const[r,n]=N.useState([]),a=i=>{const l=crypto.randomUUID(),d={id:l,duration:5e3,...i};n(u=>[...u,d]),d.duration&&d.duration>0&&setTimeout(()=>{s(l)},d.duration)},s=i=>{n(l=>l.filter(d=>d.id!==i))};return t.jsxs(mT.Provider,{value:{toasts:r,addToast:a,removeToast:s},children:[e,t.jsx(nY,{})]})},nY=()=>{const{toasts:e,removeToast:r}=Xc();return e.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(n=>t.jsx(aY,{toast:n,onClose:()=>r(n.id)},n.id))})},aY=({toast:e,onClose:r})=>{const[n,a]=N.useState(!1);N.useEffect(()=>{setTimeout(()=>a(!0),10)},[]);const s=()=>{a(!1),setTimeout(r,300)},i=()=>{const d={className:"h-5 w-5"};switch(e.type){case"success":return t.jsx(Lt.Success,{...d});case"error":return t.jsx(Lt.Close,{...d});case"warning":return t.jsx(Lt.Note,{...d});case"info":return t.jsx(Lt.Activity,{...d});default:return t.jsx(Lt.Activity,{...d})}},l=()=>{const d="flex items-start gap-3 p-4 rounded-lg shadow-lg border transition-all duration-300";if(n)switch(e.type){case"success":return`${d} bg-green-50 border-green-200 text-green-800 dark:bg-green-900/30 dark:border-green-800 dark:text-green-300`;case"error":return`${d} bg-red-50 border-red-200 text-red-800 dark:bg-red-900/30 dark:border-red-800 dark:text-red-300`;case"warning":return`${d} bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/30 dark:border-yellow-800 dark:text-yellow-300`;case"info":return`${d} bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300`;default:return`${d} bg-surface border-muted text-on-surface`}else return`${d} opacity-0 transform translate-x-full`};return t.jsxs("div",{className:l(),children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i()}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsx("div",{className:"font-semibold text-sm",children:e.title}),e.message&&t.jsx("div",{className:"text-sm mt-1 opacity-90",children:e.message})]}),t.jsx("button",{onClick:s,className:"flex-shrink-0 ml-2 p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Close notification",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},sY=e=>{const{organizationId:r,onCustomFieldsUpdate:n,onLeadsUpdate:a,onIntegrationUpdate:s,onUsersUpdate:i,enabled:l=!0}=e,[d,u]=N.useState(!1),[m,p]=N.useState(null),f=N.useRef(null),x=N.useRef(),b=N.useRef(0),y=5,g=N.useCallback(()=>{if(!(f.current?.readyState===WebSocket.OPEN||!l))try{const E=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/sync`;console.log("Connecting to RealTime sync WebSocket:",E),f.current=new WebSocket(E),f.current.onopen=()=>{console.log("RealTime sync WebSocket connected"),u(!0),p(null),b.current=0,x.current&&(clearTimeout(x.current),x.current=void 0)},f.current.onmessage=T=>{try{const O=JSON.parse(T.data);switch(console.log("RealTime sync message:",O),O.type){case"custom_fields_updated":O.organizationId===r&&n&&n(O.fields);break;case"leads_updated":O.organizationId===r&&a&&a(O.leads);break;case"integration_updated":O.organizationId===r&&s&&s(O.integration);break;case"users_updated":O.organizationId===r&&i&&i(O.users);break;case"field_mapping_updated":O.organizationId===r&&console.log("Field mapping updated:",O.mapping);break;default:console.log("Unknown message type:",O.type)}}catch(O){console.error("Error parsing WebSocket message:",O)}},f.current.onclose=T=>{if(console.log("RealTime sync WebSocket closed:",T.code,T.reason),u(!1),T.code!==1e3&&b.current<y){const O=Math.pow(2,b.current)*1e3;x.current=setTimeout(()=>{b.current++,console.log(`RealTime sync reconnect attempt (${b.current}/${y})`),g()},O)}},f.current.onerror=T=>{console.error("RealTime sync WebSocket error:",T),p("WebSocket connection error")}}catch(E){console.error("Failed to create RealTime sync WebSocket:",E),p("Failed to connect to sync server")}},[r,n,a,s,l]);N.useCallback(()=>{x.current&&(clearTimeout(x.current),x.current=void 0),f.current&&(f.current.close(1e3,"Component unmounting"),f.current=null),u(!1)},[]);const j=N.useCallback(E=>{f.current?.readyState===WebSocket.OPEN?f.current.send(JSON.stringify(E)):console.warn("RealTime sync WebSocket is not connected")},[]);N.useEffect(()=>{d&&r&&j({type:"subscribe",organizationId:r,events:["custom_fields","leads","integrations","field_mappings","users"]})},[d,r,j]),N.useEffect(()=>{d&&(b.current=0,x.current&&clearTimeout(x.current))},[d]),N.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const k=N.useCallback(async()=>{d&&j({type:"sync_custom_fields",organizationId:r})},[d,r,j]),S=N.useCallback(async()=>{d&&j({type:"sync_leads",organizationId:r})},[d,r,j]),A=N.useCallback(async()=>{d&&j({type:"sync_integrations",organizationId:r})},[d,r,j]),w=N.useCallback(async()=>{d&&j({type:"sync_users",organizationId:r})},[d,r,j]);return{isConnected:d,error:m,syncCustomFields:k,syncLeads:S,syncIntegrations:A,syncUsers:w,reconnectAttempts:b.current}},iY=({user:e,onClose:r,onConfirm:n,isLoading:a=!1})=>e?t.jsx(it,{isOpen:!0,onClose:r,title:"Delete User",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(V.Delete,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h3",{className:"text-lg font-medium text-on-surface",children:"Delete User"}),t.jsx("p",{className:"text-sm text-subtle",children:"This action cannot be undone."})]})]}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-red-800",children:["Are you sure you want to delete ",t.jsx("strong",{children:e.name})," (",e.email,")? This will permanently remove the user and all associated data."]})}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:r,disabled:a,className:"px-4 py-2 text-sm font-medium text-subtle bg-muted hover:bg-subtle/80 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>n(e.id),disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center",children:a?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(V.Delete,{className:"w-4 h-4 mr-2"}),"Delete User"]})})]})]})}):null,oY=({user:e,teams:r,onClose:n,onSave:a,isLoading:s=!1})=>{const[i,l]=N.useState(e||{id:0,name:"",email:"",password:"",role:Wt.SALES_REP,permissions:[],avatar:"",phone:"",teamId:void 0,isTrackingEnabled:!1,organizationId:""}),[d,u]=N.useState({}),m=e&&e.id&&e.id>0,p=()=>{const g={};return i.name.trim()||(g.name="Full name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(g.email="Please enter a valid email address"):g.email="Email address is required",!m&&!i.password?g.password="Password is required for new users":i.password&&i.password.length<6&&(g.password="Password must be at least 6 characters"),u(g),Object.keys(g).length===0},f=g=>{const{name:j,value:k}=g.target;l({...i,[j]:k}),d[j]&&u({...d,[j]:""})},x=(g,j)=>{const k=i.permissions||[],S=j?[...k,g]:k.filter(A=>A!==g);l({...i,permissions:S})},b=g=>{if(g.preventDefault(),!p())return;const j={...i};m&&!j.password&&delete j.password,a(j)},y=i.role===Wt.ADMIN;return t.jsx(it,{isOpen:!0,onClose:n,title:m?"Edit User & Permissions":"Add New User",children:t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Full Name *"}),t.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.name?"border-red-500":"border-muted"}`,placeholder:"Enter full name"}),d.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Email Address *"}),t.jsx("input",{type:"email",name:"email",value:i.email,onChange:f,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.email?"border-red-500":"border-muted"}`,placeholder:"Enter email address"}),d.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Phone Number"}),t.jsx("input",{type:"tel",name:"phone",value:i.phone||"",onChange:f,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter phone number"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Avatar URL"}),t.jsx("input",{type:"url",name:"avatar",value:i.avatar||"",onChange:f,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://example.com/avatar.jpg"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Role & Team Assignment"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Role *"}),t.jsx("select",{name:"role",value:i.role,onChange:f,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:AK.filter(g=>g!==Wt.SUPER_ADMIN).map(g=>t.jsx("option",{value:g,children:g},g))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Team"}),t.jsxs("select",{name:"teamId",value:i.teamId||"",onChange:f,className:"w-full px-3 py-2 bg-background border border-muted rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"No Team"}),r.map(g=>t.jsx("option",{value:g.id,children:g.name},g.id))]})]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isTrackingEnabled",name:"isTrackingEnabled",checked:i.isTrackingEnabled||!1,onChange:g=>l({...i,isTrackingEnabled:g.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),t.jsx("label",{htmlFor:"isTrackingEnabled",className:"ml-2 block text-sm text-subtle",children:"Enable activity tracking for this user"})]})]}),!m&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Account Setup"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Temporary Password *"}),t.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:f,className:`w-full px-3 py-2 bg-background border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${d.password?"border-red-500":"border-muted"}`,placeholder:"Enter temporary password"}),d.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password}),t.jsx("p",{className:"mt-1 text-xs text-subtle",children:"User will be required to change this password on first login"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface border-b border-muted pb-2",children:"Permissions"}),t.jsx("p",{className:"text-sm text-subtle",children:"Assign granular permissions. Admins have all permissions by default."}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:EK.map(g=>t.jsxs("label",{className:`flex items-start p-3 bg-background border rounded-lg transition-all ${y?"cursor-not-allowed opacity-60 border-muted":"hover:bg-muted/50 cursor-pointer border-muted hover:border-primary-300"}`,children:[t.jsx("input",{type:"checkbox",checked:y||i.permissions.includes(g.id),onChange:j=>x(g.id,j.target.checked),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 border-muted bg-surface mt-0.5",disabled:y}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("span",{className:"font-medium text-on-surface text-sm",children:g.name}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:g.description})]})]},g.id))})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:n,disabled:s,className:"px-4 py-2 text-sm font-medium text-subtle bg-muted hover:bg-subtle/80 rounded-lg transition-colors disabled:opacity-50 order-2 sm:order-1",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center order-1 sm:order-2",children:s?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),m?"Updating...":"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(V.Add,{className:"w-4 h-4 mr-2"}),m?"Update User":"Create User"]})})]})]})})},lY=({users:e,teams:r,onSaveUser:n,onDeleteUser:a})=>{const[s,i]=N.useState(!1),[l,d]=N.useState(!1),[u,m]=N.useState(null),[p,f]=N.useState(null),[x,b]=N.useState(!1),[y,g]=N.useState(!1),{addToast:j}=Xc(),k=localStorage.getItem("currentOrganizationId")||"org-1";sY({organizationId:k,onUsersUpdate:I=>{console.log("Real-time user update received:",I)},enabled:!0}),N.useEffect(()=>{console.log(" UserManagementPage: Component rendered"),console.log(" Props users count:",e.length),console.log(" Props users:",e.map(I=>({id:I.id,name:I.name})))});const S=(I=null)=>{m(I),i(!0)},A=()=>{m(null),i(!1)},w=I=>{f(I),d(!0)},E=()=>{f(null),d(!1)},T=async I=>{b(!0);try{await n(I),j({type:"success",title:"Success",message:`User ${u?"updated":"created"} successfully`}),A()}catch{j({type:"error",title:"Error",message:`Failed to ${u?"update":"create"} user`})}finally{b(!1)}},O=async I=>{console.log(" UserManagementPage: Starting deletion for user:",I),console.log(" Current users before deletion:",e.map(M=>({id:M.id,name:M.name}))),g(!0);try{await a(I),j({type:"success",title:"Success",message:"User deleted successfully"}),E(),console.log(" Forcing component re-render after deletion")}catch{j({type:"error",title:"Error",message:"Failed to delete user"})}finally{g(!1)}},D=I=>{switch(I){case Wt.ADMIN:return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300";case Wt.MANAGER:return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case Wt.SALES_REP:return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-300"}};return t.jsxs("div",{className:"flex flex-col h-full space-y-6 p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-on-surface",children:"Users & Permissions"}),t.jsx("p",{className:"text-subtle mt-1 text-sm sm:text-base",children:"Manage your team members and their access levels"})]}),t.jsxs("button",{onClick:()=>S(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center shadow-sm hover:shadow-md",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"}),"Add User"]})]}),t.jsx("div",{className:"flex-grow bg-surface rounded-xl shadow-sm border border-muted overflow-hidden",children:e.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[t.jsx(V.Team,{className:"w-12 h-12 text-subtle mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No users found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Get started by adding your first team member"}),t.jsxs("button",{onClick:()=>S(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center",children:[t.jsx(V.Add,{className:"w-4 h-4 mr-2"}),"Add Your First User"]})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider",children:"User"}),t.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden sm:table-cell",children:"Role"}),t.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden md:table-cell",children:"Team"}),t.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-subtle uppercase tracking-wider hidden lg:table-cell",children:"Status"}),t.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-right text-xs font-semibold text-subtle uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:e.map(I=>t.jsxs("tr",{className:"hover:bg-muted/30 transition-colors duration-150",children:[t.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:t.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:I.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(I.name)}&background=4F46E5&color=fff&size=40`,alt:I.name,onError:M=>{const L=M.target;L.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(I.name)}&background=4F46E5&color=fff&size=40`}})}),t.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-on-surface truncate",children:I.name}),t.jsx("div",{className:"text-sm text-subtle truncate",children:I.email}),I.phone&&t.jsx("div",{className:"text-xs text-subtle truncate sm:hidden",children:I.phone})]})]})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(I.role)}`,children:I.role})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-subtle hidden md:table-cell",children:r.find(M=>M.id===I.teamId)?.name||"No Team"}),t.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${I.isTrackingEnabled?"bg-green-400":"bg-gray-400"}`}),t.jsx("span",{className:"text-xs text-subtle",children:I.isTrackingEnabled?"Active":"Inactive"})]})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>S(I),className:"text-primary-600 hover:text-primary-900 p-1 rounded transition-colors duration-150 hover:bg-primary-50",title:"Edit user",children:t.jsx(V.Edit,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>w(I),className:"text-red-600 hover:text-red-900 p-1 rounded transition-colors duration-150 hover:bg-red-50",title:"Delete user",children:t.jsx(V.Delete,{className:"w-4 h-4"})})]})})]},I.id))})]})})}),s&&t.jsx(oY,{user:u,teams:r,onClose:A,onSave:T,isLoading:x}),l&&t.jsx(iY,{user:p,onClose:E,onConfirm:O,isLoading:y})]})},cY=({isOpen:e,onClose:r,webhookId:n,webhookName:a})=>{const[s,i]=N.useState([]),[l,d]=N.useState(!1),[u,m]=N.useState(null),[p,f]=N.useState(null),[x,b]=N.useState(null),[y,g]=N.useState({event:"all",status:"all",search:""}),j=async()=>{try{if(d(!0),m(null),console.log("Fetching logs for webhookId:",n),!n)throw new Error("Webhook ID is required");const D=localStorage.getItem("token")||localStorage.getItem("authToken");if(!D)throw new Error("No authentication token found");const I=new URLSearchParams;I.append("limit","50"),y.event&&y.event!=="all"&&I.append("event",y.event),y.status&&y.status!=="all"&&I.append("status",y.status),y.search&&I.append("search",y.search);const M=`https://crm.clienn.com/api/webhooks/${n}/logs?${I}`;console.log("Fetching logs from URL:",M),console.log("WebhookId type:",typeof n,"Value:",n);const L=await fetch(M,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(!L.ok)throw new Error(`Failed to fetch logs: ${L.statusText}`);const B=await L.json();if(B.success)i(B.data||[]);else throw new Error(B.message||"Failed to fetch logs")}catch(D){console.error("Error fetching webhook logs:",D),m(D instanceof Error?D.message:"Couldn't load logs. Try again.")}finally{d(!1)}},k=async D=>{try{b(D);const I=localStorage.getItem("token")||localStorage.getItem("authToken");if(!I)throw new Error("No authentication token found");const M=await fetch(`https://crm.clienn.com/api/webhooks/deliveries/${D}/retry`,{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});if(!M.ok)throw new Error(`Retry failed: ${M.statusText}`);const L=await M.json();if(L.success)await j(),console.log("Retry successful");else throw new Error(L.message||"Retry failed")}catch(I){throw console.error("Error retrying delivery:",I),I}finally{b(null)}},S=N.useMemo(()=>s.filter(D=>{if(y.event&&y.event!=="all"&&D.event!==y.event||y.status&&y.status!=="all"&&(y.status==="success"&&!D.success||y.status==="failed"&&D.success))return!1;if(y.search){const I=y.search.toLowerCase();return D.event.toLowerCase().includes(I)||D.statusCode.toString().includes(I)||D.deliveryId&&D.deliveryId.toLowerCase().includes(I)}return!0}),[s,y]),A=D=>new Date(D).toLocaleString(),w=D=>D<1e3?`${D}ms`:`${(D/1e3).toFixed(1)}s`,E=D=>t.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[D.statusCode," ",D.success?"OK":"Failed"]}),T=[{value:"all",label:"All Events"},{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"},{value:"lead.received",label:"Lead Received"}],O=[{value:"all",label:"All Results"},{value:"success",label:"Success"},{value:"failed",label:"Failed"}];return N.useEffect(()=>{e&&n&&(console.log("Modal opened with webhookId:",n),j())},[e,n]),N.useEffect(()=>{e||f(null)},[e]),t.jsxs(it,{isOpen:e,onClose:r,title:`Delivery Logs - ${a}`,children:[t.jsxs("div",{className:"flex h-96",children:[t.jsxs("div",{className:`${p?"w-2/3":"w-full"} flex flex-col`,children:[t.jsxs("div",{className:"flex gap-4 mb-4 p-4 border-b border-muted",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Event"}),t.jsx("select",{value:y.event||"all",onChange:D=>g(I=>({...I,event:D.target.value})),className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm",children:T.map(D=>t.jsx("option",{value:D.value,children:D.label},D.value))})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Result"}),t.jsx("select",{value:y.status||"all",onChange:D=>g(I=>({...I,status:D.target.value})),className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm",children:O.map(D=>t.jsx("option",{value:D.value,children:D.label},D.value))})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Search"}),t.jsx("input",{type:"text",value:y.search||"",onChange:D=>g(I=>({...I,search:D.target.value})),placeholder:"Search events, status codes...",className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm"})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:j,disabled:l,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-300 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[l&&t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Refresh"]})})]}),t.jsx("div",{className:"flex-1 overflow-hidden",children:l?t.jsx("div",{className:"p-4",children:[...Array(5)].map((D,I)=>t.jsx("div",{className:"animate-pulse p-4 border-b border-muted",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-2"}),t.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),t.jsx("div",{className:"h-6 bg-muted rounded w-16"})]})},I))}):u?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(V.XCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("p",{className:"text-red-600 font-medium",children:u}),t.jsx("button",{onClick:j,className:"mt-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Try Again"})]}):S.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(V.Activity,{className:"h-12 w-12 text-muted mx-auto mb-4"}),t.jsx("p",{className:"text-subtle",children:"No deliveries yet"}),t.jsx("p",{className:"text-sm text-subtle mt-1",children:"Webhook deliveries will appear here once events are triggered."})]}):t.jsx("div",{className:"overflow-y-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-muted sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Time"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Event"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Duration"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Result"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-subtle uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-background divide-y divide-muted",children:S.map(D=>t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:A(D.createdAt)}),t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-on-surface",children:T.find(I=>I.value===D.event)?.label||D.event}),t.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:D.statusCode}),t.jsx("td",{className:"px-4 py-3 text-sm text-subtle",children:w(D.responseTimeMs)}),t.jsx("td",{className:"px-4 py-3",children:E(D)}),t.jsxs("td",{className:"px-4 py-3 text-right",children:[t.jsx("button",{onClick:()=>f(D),className:"text-primary-600 hover:text-primary-800 font-medium text-sm",children:"View details"}),!D.success&&t.jsx("button",{onClick:()=>k(D.deliveryId||D.id),disabled:x===(D.deliveryId||D.id),className:"ml-3 text-blue-600 hover:text-blue-800 font-medium text-sm disabled:opacity-50",children:x===(D.deliveryId||D.id)?t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}):"Retry"})]})]},D.id))})]})})})]}),p&&t.jsxs("div",{className:"w-1/3 border-l border-muted bg-surface p-4 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Delivery Details"}),t.jsx("button",{onClick:()=>f(null),className:"text-subtle hover:text-on-surface",children:t.jsx(V.Close,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Delivery ID"}),t.jsx("p",{className:"text-sm font-mono bg-muted p-2 rounded",children:p.deliveryId||p.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Event"}),t.jsx("p",{className:"text-sm",children:T.find(D=>D.value===p.event)?.label||p.event})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Status"}),t.jsxs("div",{className:"flex items-center gap-2",children:[E(p),t.jsx("span",{className:"text-sm text-subtle",children:w(p.responseTimeMs)})]})]}),p.requestHeaders&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Request Headers"}),t.jsx("div",{className:"bg-muted p-3 rounded-md",children:Object.entries(p.requestHeaders).map(([D,I])=>t.jsxs("div",{className:"text-xs font-mono mb-1",children:[t.jsxs("span",{className:"text-subtle",children:[D,":"]})," ",I]},D))})]}),p.requestBody&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Request Body"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(p.requestBody),className:"text-xs bg-muted hover:bg-subtle/80 text-on-surface font-bold py-1 px-2 rounded",children:"Copy"})]}),t.jsx("textarea",{readOnly:!0,value:p.requestBody.length>2e3?p.requestBody.substring(0,2e3)+"...":p.requestBody,className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm font-mono h-32"})]}),p.responseBody&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Response Body"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(p.responseBody),className:"text-xs bg-muted hover:bg-subtle/80 text-on-surface font-bold py-1 px-2 rounded",children:"Copy"})]}),t.jsx("textarea",{readOnly:!0,value:p.responseBody.length>2e3?p.responseBody.substring(0,2e3)+"...":p.responseBody,className:"w-full bg-surface border border-muted rounded-md py-2 px-3 text-sm font-mono h-32"})]}),p.errorMessage&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Error"}),t.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md border border-red-200",children:p.errorMessage})]}),!p.success&&t.jsx("div",{className:"pt-4 border-t border-muted",children:t.jsxs("button",{onClick:()=>{k(p.deliveryId||p.id),f(null)},disabled:x===(p.deliveryId||p.id),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center justify-center gap-2",children:[x===(p.deliveryId||p.id)&&t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Retry now"]})})]})]})]}),t.jsx("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Close"})})]})},dY=({isOpen:e,onClose:r,onSave:n,editingMapping:a,availableAccounts:s=[]})=>{const[i,l]=N.useState({name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"}),[d,u]=N.useState({}),[m,p]=N.useState([{id:"1",crmField:"",value:""}]),[f,x]=N.useState([]),[b,y]=N.useState(!1),[g,j]=N.useState(!1),k=s.find(z=>z.name===i.facebookAccount)?.pages||[],S=k.find(z=>z.name===i.facebookPage)?.forms||[];console.log(" Debug Info:"),console.log("Selected Account:",i.facebookAccount),console.log("Selected Page:",i.facebookPage),console.log("Available Pages:",k.map(z=>z.name)),console.log("Available Forms:",S.map(z=>z.name)),console.log("Form Data:",i);const A=s.length>0?s.map(z=>z.name):["John Doe Marketing","Tech Solutions Inc","Digital Agency Pro"],w=["None","Email","Phone","Email + Phone"],E=z=>{l({...i,facebookAccount:z,facebookPage:"",facebookForm:""}),y(!1),x([])},T=z=>{l({...i,facebookPage:z,facebookForm:""}),y(!1),x([])};N.useEffect(()=>{l(a?{name:a.name,facebookAccount:a.sourceForm,facebookPage:"My Awesome Product",facebookForm:a.sourceForm,deduplicationStrategy:"None"}:{name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"})},[a,e]),N.useEffect(()=>{console.log("showFieldMapping state changed:",b),console.log("facebookForm value:",i.facebookForm),console.log("facebookFormFields:",f)},[b,i.facebookForm,f]);const O=z=>{z.preventDefault(),n(i),D()},D=()=>{l({name:"",facebookAccount:"",facebookPage:"",facebookForm:"",deduplicationStrategy:"None"}),u({}),x([]),y(!1),j(!1),p([{id:"1",crmField:"",value:""}]),r()},I=()=>{p([...m,{id:Date.now().toString(),crmField:"",value:""}])},M=z=>{m.length>1&&p(m.filter(W=>W.id!==z))},L=(z,W,R)=>{p(m.map(H=>H.id===z?{...H,[W]:R}:H))},B=z=>{if(console.log("Form selection changed to:",z),console.log("Available forms:",S),l({...i,facebookForm:z}),z&&z!==""&&z!=="Select Form"){console.log(" Form selected, showing field mapping section");const W=S.find(R=>R.name===z);if(W&&W.fields.length>0){console.log(" Found form with fields:",W.fields),x(W.fields),y(!0),j(!1);const R={};W.fields.forEach(H=>{R[H]="Dont Sync"}),u(R),console.log(" Field mapping initialized with",W.fields.length,"fields")}else{console.log(" Form not found or has no fields, using fallback method");const R=["first_name","last_name","email","phone_number","company"];x(R),y(!0),j(!1);const H={};R.forEach(U=>{H[U]="Dont Sync"}),u(H),console.log(" Field mapping initialized with fallback fields:",R.length,"fields")}}else console.log(' No form selected or "Select Form" chosen, hiding mapping'),x([]),y(!1),j(!1)};return t.jsx(Yc,{isOpen:e,onClose:D,title:"",children:t.jsxs("div",{className:"w-full max-w-sm sm:max-w-md md:max-w-3xl lg:max-w-5xl xl:max-w-6xl bg-surface rounded-xl shadow-2xl mx-4 border border-muted",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[t.jsx("div",{className:"bg-white/20 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),t.jsx("h2",{className:"text-base sm:text-xl font-bold text-white truncate",children:a?"Edit Mapping":"Create New Mapping"})]}),t.jsx("button",{onClick:D,className:"text-white/80 hover:text-white hover:bg-white/20 p-1.5 sm:p-2 rounded-lg transition-all duration-200 flex-shrink-0 ml-2",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8 max-h-[70vh] overflow-y-auto",children:t.jsxs("form",{onSubmit:O,className:"space-y-4 sm:space-y-6 md:space-y-8",children:[t.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface mb-2 sm:mb-3",children:" Mapping Name"}),t.jsx("input",{type:"text",value:i.name,onChange:z=>l({...i,name:z.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface placeholder-subtle text-sm sm:text-base",placeholder:"e.g., Winter Sale Leads, Newsletter Signup...",required:!0})]}),t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[t.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Facebook Configuration"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[t.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Account"}),t.jsxs("select",{value:i.facebookAccount,onChange:z=>E(z.target.value),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,children:[t.jsx("option",{value:"",children:"Select Account"}),t.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose an account first"}),A.map(z=>t.jsx("option",{value:z,className:"bg-surface text-on-surface",children:z},z))]})]}),t.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Page"}),t.jsxs("select",{value:i.facebookPage,onChange:z=>T(z.target.value),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,disabled:!i.facebookAccount,children:[t.jsx("option",{value:"",children:"Select Page"}),t.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose a page after selecting account"}),k.map(z=>t.jsx("option",{value:z.name,className:"bg-surface text-on-surface",children:z.name},z.fbPageId))]})]}),t.jsxs("div",{className:"space-y-1 sm:space-y-2 sm:col-span-2 lg:col-span-1",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Facebook Form"}),t.jsxs("select",{value:i.facebookForm,onChange:z=>{console.log(" Form dropdown changed to:",z.target.value),B(z.target.value)},className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",required:!0,disabled:!i.facebookPage,children:[t.jsx("option",{value:"",children:"Select Form"}),t.jsx("option",{value:"",disabled:!0,className:"text-subtle",children:"Choose a form after selecting page"}),S.map(z=>t.jsx("option",{value:z.name,className:"bg-surface text-on-surface",children:z.name},z.id))]})]})]})]}),(i.facebookForm&&i.facebookForm!==""&&i.facebookForm!=="Select Form"||b)&&t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[t.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Field Mapping"})]}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle bg-background p-2 sm:p-3 rounded-lg border border-muted",children:"Map fields from your Facebook form to your CRM fields. Select Account  Page  Form above to load the field mapping options."}),t.jsx("div",{className:"bg-background p-3 sm:p-4 rounded-xl border border-muted",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-semibold text-on-surface",children:"Field Mapping"}),t.jsx("span",{className:"text-xs text-subtle",children:"Map your Facebook form fields to CRM fields"})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g?t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),t.jsx("span",{className:"ml-2 text-sm text-subtle",children:"Loading form fields..."})]}):f.length>0?f.map(z=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface rounded-lg border border-muted",children:[t.jsx("div",{className:"flex-1 mr-4",children:t.jsx("span",{className:"text-sm font-medium text-on-surface",children:z==="full_name"||z==="first_name"?"First Name":z==="last_name"?"Last Name":z==="email"?"Email Address":z==="phone_number"?"Phone Number":z==="company"?"Company":z==="job_title"?"Job Title":z.replace(/_/g," ").replace(/\b\w/g,W=>W.toUpperCase())})}),t.jsx("div",{className:"w-48",children:t.jsxs("select",{value:d[z]||"Dont Sync",onChange:W=>u({...d,[z]:W.target.value}),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface text-sm",children:[t.jsx("option",{value:"Dont Sync",children:"Don't Sync"}),t.jsx("option",{value:"First Name",children:"First Name"}),t.jsx("option",{value:"Last Name",children:"Last Name"}),t.jsx("option",{value:"Email",children:"Email"}),t.jsx("option",{value:"Phone",children:"Phone"}),t.jsx("option",{value:"Company",children:"Company"}),t.jsx("option",{value:"Lead Source",children:"Lead Source"}),t.jsx("option",{value:"Custom Field 1",children:"Custom Field 1"}),t.jsx("option",{value:"Custom Field 2",children:"Custom Field 2"})]})})]},z)):t.jsx("div",{className:"flex items-center justify-center p-8 text-sm text-subtle",children:"No form fields available. Please select a Facebook form first."})})]})})]}),t.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("p",{className:"text-xs text-blue-800 font-semibold",children:" Debug Info:"}),t.jsxs("p",{className:"text-xs text-blue-700",children:['Selected Form: "',i.facebookForm,'"']}),t.jsxs("p",{className:"text-xs text-blue-700",children:["showFieldMapping: ",b?" true":" false"]}),t.jsxs("p",{className:"text-xs text-blue-700",children:["Facebook Fields Count: ",f.length]}),t.jsxs("p",{className:"text-xs text-blue-700",children:["Field Mappings Count: ",Object.keys(d).length]}),t.jsx("p",{className:"text-xs text-blue-700 font-bold",children:i.facebookForm&&i.facebookForm!==""&&i.facebookForm!=="Select Form"?" MAPPING SECTION SHOULD BE VISIBLE ABOVE":" Select a form to show mapping section"})]}),t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[t.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:"Custom Value Mapping"})]}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle bg-background p-2 sm:p-3 rounded-lg border border-muted",children:"Set static values for specific CRM fields for every new lead."}),t.jsx("div",{className:"space-y-2 sm:space-y-3 bg-background p-3 sm:p-4 rounded-xl border border-muted",children:m.map((z,W)=>t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 p-3 bg-surface rounded-lg border border-muted",children:[t.jsxs("select",{value:z.crmField,onChange:R=>L(z.id,"crmField",R.target.value),className:"flex-1 px-3 py-2 border-2 border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-surface text-on-surface text-sm sm:text-base order-1 sm:order-1",children:[t.jsx("option",{value:"",children:"Select CRM Field"}),t.jsx("option",{value:"Lead Source",className:"bg-surface text-on-surface",children:"Lead Source"}),t.jsx("option",{value:"Campaign",className:"bg-surface text-on-surface",children:"Campaign"}),t.jsx("option",{value:"Lead Status",className:"bg-surface text-on-surface",children:"Lead Status"}),t.jsx("option",{value:"Assignee",className:"bg-surface text-on-surface",children:"Assignee"})]}),t.jsx("input",{type:"text",value:z.value,onChange:R=>L(z.id,"value",R.target.value),className:"flex-1 px-3 py-2 border-2 border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-surface text-on-surface text-sm sm:text-base order-2 sm:order-2",placeholder:"Enter value..."}),t.jsx("button",{type:"button",onClick:()=>M(z.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200 order-3 self-center sm:self-auto",disabled:m.length===1,children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},z.id))}),t.jsxs("button",{type:"button",onClick:I,className:"flex items-center justify-center space-x-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300 text-xs sm:text-sm font-semibold bg-primary-50 dark:bg-primary-900/20 hover:bg-primary-100 dark:hover:bg-primary-900/30 px-3 sm:px-4 py-2 rounded-lg transition-all duration-200 w-full sm:w-auto",children:[t.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{children:"Add Custom Field"})]})]}),t.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-on-surface",children:" Deduplication Strategy"}),t.jsx("select",{value:i.deduplicationStrategy,onChange:z=>l({...i,deduplicationStrategy:z.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border-2 border-muted rounded-lg sm:rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-background focus:bg-surface text-on-surface text-sm sm:text-base",children:w.map(z=>t.jsx("option",{value:z,className:"bg-surface text-on-surface",children:z},z))})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-8 border-t-2 border-muted bg-background p-3 sm:p-4 rounded-b-xl",children:[t.jsx("button",{type:"button",onClick:D,className:"px-4 sm:px-6 py-2 sm:py-3 border-2 border-muted text-on-surface rounded-lg sm:rounded-xl hover:bg-background hover:border-primary-500 font-semibold transition-all duration-200 text-sm sm:text-base order-2 sm:order-1",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white rounded-lg sm:rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 text-sm sm:text-base order-1 sm:order-2",children:a?"Update Mapping":"Save Mapping"})]})]})})]})})},uY=({logs:e,settings:r,setSettings:n,customFieldDefs:a,onSendTestLead:s,syncFacebookLeads:i,currentOrganization:l,webhooks:d,onAddWebhook:u,onDeleteWebhook:m,onUpdateWebhook:p,onRefreshApiKey:f})=>{const[x,b]=N.useState({source:null,type:"connect"}),[y,g]=N.useState(!1),[j,k]=N.useState(null),[S,A]=N.useState(!1),[w,E]=N.useState(!1),[T,O]=N.useState({isOpen:!1,webhook:null}),[D,I]=N.useState(!1),[M,L]=N.useState(!1),[B,z]=N.useState({type:null,message:""}),[W,R]=N.useState({isOpen:!1,webhookId:"",webhookName:""}),[H,U]=N.useState(!1),[q,Q]=N.useState(null),[K,F]=N.useState(!1),[_,G]=N.useState(null),Z=pa(),oe=An();N.useEffect(()=>{const ne=new URLSearchParams(Z.search),ue=ne.get("status"),Ve=ne.get("token"),Te=ne.get("message");ue==="fb_success"&&Ve?(n(Pe=>Pe.map(Xe=>Xe.source==="Facebook"?{...Xe,isConnected:!0}:Xe)),b({source:"Facebook",type:"connect"}),oe(Z.pathname,{replace:!0})):ue==="fb_error"&&(alert(`Facebook connection failed: ${Te||"Unknown error"}`),oe(Z.pathname,{replace:!0}))},[Z,oe,n]);const le=ne=>{console.log("Creating new mapping:",ne),U(!1),Q(null)},ge=ne=>{console.log("Updating mapping:",ne),U(!1),Q(null)},ve=["Facebook","Google Ads","Website","Cloud Telephony","Email Marketing","SMS Marketing"],fe=N.useMemo(()=>{const ne=r.map(Te=>Te.source),ue=ve.filter(Te=>!ne.includes(Te)).map(Te=>({source:Te,isConnected:!1,fieldMappings:[],organizationId:l?.id||"",connectedAccounts:[],connectedWebsites:[]})),Ve=[...r,...ue];return{"Lead Capture":Ve.filter(Te=>["Facebook","Google Ads","Website"].includes(Te.source)),Communication:Ve.filter(Te=>["Cloud Telephony","Email Marketing","SMS Marketing"].includes(Te.source))}},[r,l?.id]),Y={Facebook:t.jsx("div",{className:"text-blue-500 bg-blue-500/10 p-2 rounded-lg",children:t.jsx(V.Facebook,{className:"h-6 w-6"})}),"Google Ads":t.jsx("div",{className:"text-orange-500 bg-orange-500/10 p-2 rounded-lg",children:t.jsx(V.Google,{className:"h-6 w-6"})}),Website:t.jsx("div",{className:"text-purple-500 bg-purple-500/10 p-2 rounded-lg",children:t.jsx(V.Globe,{className:"h-6 w-6"})}),"Cloud Telephony":t.jsx("div",{className:"text-cyan-500 bg-cyan-500/10 p-2 rounded-lg",children:t.jsx(V.Call,{className:"h-6 w-6"})}),"Email Marketing":t.jsx("div",{className:"text-red-500 bg-red-500/10 p-2 rounded-lg",children:t.jsx(V.Email,{className:"h-6 w-6"})}),"SMS Marketing":t.jsx("div",{className:"text-indigo-500 bg-indigo-500/10 p-2 rounded-lg",children:t.jsx(V.SMS,{className:"h-6 w-6"})})};return t.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[B.type&&t.jsx("div",{className:`p-4 rounded-lg border ${B.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:t.jsxs("div",{className:"flex items-center",children:[B.type==="success"?t.jsx(V.CheckCircle,{className:"h-5 w-5 mr-2"}):t.jsx(V.XCircle,{className:"h-5 w-5 mr-2"}),t.jsx("span",{className:"font-medium",children:B.message})]})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-on-surface",children:"Integration Hub"}),t.jsx("p",{className:"text-subtle mt-1",children:"Connect your marketing channels and other tools to supercharge your CRM."})]}),t.jsx("div",{className:"flex-grow overflow-y-auto",children:t.jsx("div",{className:"bg-surface rounded-xl shadow-sm border border-muted p-4 flex flex-col min-h-full",children:t.jsxs("div",{className:"space-y-6 pb-6",children:[Object.entries(fe).map(([ne,ue])=>t.jsxs("div",{children:[t.jsx("h3",{className:"px-3 text-xs font-semibold text-subtle uppercase tracking-wider mb-2",children:ne}),t.jsx("div",{className:"space-y-1",children:Array.isArray(ue)&&ue.map(Ve=>t.jsxs("button",{onClick:()=>{oe({Facebook:"/settings/integrations/facebook","Google Ads":"/settings/integrations/google-ads",Website:"/settings/integrations/website","Cloud Telephony":"/settings/integrations/cloud-telephony","Email Marketing":"/settings/integrations/email-marketing","SMS Marketing":"/settings/integrations/sms-marketing"}[Ve.source])},className:"w-full flex items-center gap-3 p-3 text-left rounded-lg transition-colors text-subtle hover:bg-muted hover:text-on-surface",children:[Y[Ve.source],t.jsx("span",{className:"font-semibold text-on-surface flex-grow",children:Ve.source}),t.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium ${Ve.isConnected?"text-green-500":"text-amber-500"}`,children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${Ve.isConnected?"bg-green-500":"bg-amber-500"}`}),Ve.isConnected?"Connected":"Action Needed"]}),t.jsx(V.ChevronRight,{className:"h-4 w-4"})]},Ve.source))})]},ne)),t.jsxs("div",{children:[t.jsx("h3",{className:"px-3 text-xs font-semibold text-subtle uppercase tracking-wider mb-2",children:"Developer"}),t.jsx("div",{className:"space-y-1",children:t.jsxs("button",{onClick:()=>oe("/settings/integrations/api-webhooks"),className:"w-full flex items-center gap-3 p-3 text-left rounded-lg transition-colors text-subtle hover:bg-muted hover:text-on-surface",children:[t.jsx("div",{className:"text-gray-500 bg-gray-500/10 p-2 rounded-lg",children:t.jsx(V.Code,{className:"h-6 w-6"})}),t.jsx("span",{className:"font-semibold text-on-surface flex-grow",children:"API & Webhooks"}),t.jsx(V.ChevronRight,{className:"h-4 w-4"})]})})]})]})})}),t.jsx(cY,{isOpen:W.isOpen,onClose:()=>R({isOpen:!1,webhookId:"",webhookName:""}),webhookId:W.webhookId,webhookName:W.webhookName}),t.jsx(dY,{isOpen:H,onClose:()=>{U(!1),Q(null)},onSave:q?ge:le,editingMapping:q})]})},mY=({onConnect:e,onSave:r})=>{const n=async()=>{try{const a=await(await fetch(`${window.location.origin}/api/fb/auth/start?tenantId=org-1`)).json();if(a.success){const s=window.open(a.authUrl,"facebook-oauth","width=600,height=700,scrollbars=yes,resizable=yes");if(!s){alert("Please allow popups for this website to connect with Facebook.");return}const i=d=>{if(console.log("Received postMessage:",d.data,"from source:",d.source===s?"popup":"other"),d.source===s&&(d.data.type==="FACEBOOK_AUTH_SUCCESS"||d.data.type==="FACEBOOK_AUTH_ERROR")){if(console.log("Processing Facebook auth message:",d.data.type),window.removeEventListener("message",i),d.data.type==="FACEBOOK_AUTH_SUCCESS"){console.log("Facebook auth successful, updating state with pages:",d.data.data.pages);const u={id:d.data.data.pages[0]?.pageId||"fb-main",name:d.data.data.accountName||"Facebook Account",accessToken:"connected",pages:d.data.data.pages.map(m=>({id:m.pageId,name:m.pageName,forms:[]}))};r({isConnected:!0,connectedAccounts:[u]})}else console.error("Facebook auth failed:",d.data.data.message),alert(`Facebook connection failed: ${d.data.data.message}`);s.closed||(s.close(),console.log("Popup closed after postMessage processing"))}};window.addEventListener("message",i);const l=window.setInterval(()=>{if(s.closed){window.clearInterval(l),window.removeEventListener("message",i);const d=new URLSearchParams(window.location.search),u=d.get("code"),m=d.get("state");u&&m?console.log("OAuth callback detected, not reloading page"):window.location.reload()}},1e3)}else console.error("Failed to start Facebook auth:",a.message),alert("Failed to connect to Facebook. Please try again.")}catch(a){console.error("Error starting Facebook auth:",a),alert("Error connecting to Facebook. Please try again.")}};return t.jsxs("div",{className:"text-center p-8 bg-background rounded-lg",children:[t.jsx("h3",{className:"text-2xl font-bold text-on-surface",children:"Connect a Facebook Account"}),t.jsx("p",{className:"text-subtle mt-2 mb-6",children:"Facebook login will open in a popup window for better experience."}),t.jsx("button",{onClick:n,className:"w-full max-w-sm mx-auto bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Connect with Facebook"})]})},pY=({setting:e,onSave:r,onDisconnect:n,onSendTestLead:a})=>{const[s,i]=N.useState(e.connectedAccounts||[]),[l,d]=N.useState([]),[u,m]=N.useState(!1);N.useEffect(()=>{p()},[]);const p=async()=>{try{m(!0);const x=await(await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`)).json();x.success?d(x.pages||[]):console.error("Failed to fetch Facebook pages:",x.message)}catch(x){console.error("Error fetching Facebook pages:",x)}finally{m(!1)}},f=async()=>{try{const x=await(await fetch(`${window.location.origin}/api/fb/auth/start?tenantId=org-1`)).json();if(x.success){const b=window.open(x.authUrl,"facebook-oauth-add-account","width=600,height=700,scrollbars=yes,resizable=yes");if(!b){alert("Please allow popups for this website to connect with Facebook.");return}const y=j=>{console.log("Received postMessage for additional account:",j.data,"from source:",j.source===b?"popup":"other"),j.source===b&&(j.data.type==="FACEBOOK_AUTH_SUCCESS"||j.data.type==="FACEBOOK_AUTH_ERROR")&&(console.log("Processing additional Facebook account auth message:",j.data.type),window.removeEventListener("message",y),j.data.type==="FACEBOOK_AUTH_SUCCESS"?(console.log("Additional Facebook account auth successful, refreshing data..."),window.location.reload()):(console.error("Additional Facebook account auth failed:",j.data.data.message),alert(`Facebook connection failed: ${j.data.data.message}`)),b.closed||(b.close(),console.log("Additional account popup closed after postMessage processing")))};window.addEventListener("message",y);const g=window.setInterval(()=>{if(b.closed){window.clearInterval(g),window.removeEventListener("message",y);const j=new URLSearchParams(window.location.search),k=j.get("code"),S=j.get("state");k&&S?console.log("OAuth callback detected for additional account, not reloading page"):window.location.reload()}},1e3)}else alert("Failed to connect additional Facebook account. Please try again.")}catch(x){console.error("Error adding account:",x),alert("Error connecting additional Facebook account.")}};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Manage Facebook Connections"}),t.jsx("p",{className:"text-subtle text-sm",children:"Select the forms you want to sync. Leads from selected forms will be automatically added to your CRM."}),t.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto p-1",children:u?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),t.jsx("p",{className:"mt-2 text-subtle",children:"Loading Facebook pages..."})]}):l.length>0?s.map(x=>t.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:x.name}),t.jsx("div",{className:"pl-4 mt-2 space-y-3",children:l.map(b=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-sm text-subtle",children:b.pageName}),t.jsx("div",{className:"pl-4 mt-1 space-y-2",children:t.jsx("p",{className:"text-xs text-subtle",children:"Forms will be loaded from Facebook API"})})]},b.pageId))})]},x.id)):t.jsx("div",{className:"text-center py-8 text-subtle",children:t.jsx("p",{children:"No Facebook pages found. Please connect your Facebook account first."})})}),t.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:n,className:"bg-red-600/10 hover:bg-red-600/20 text-red-400 font-bold py-2 px-4 rounded-lg text-sm",children:"Disconnect All"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:f,className:"bg-blue-600/10 hover:bg-blue-600/20 text-blue-400 font-bold py-2 px-4 rounded-lg text-sm",children:"Add Account"}),t.jsx("button",{type:"button",onClick:()=>r(s),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Connections"})]})]})]})},hY=({setting:e,onClose:r,onSave:n,onDisconnect:a,onSendTestLead:s})=>{N.useEffect(()=>{const m=new URLSearchParams(window.location.search),p=m.get("code"),f=m.get("state"),x=m.get("error");if(x){console.error("Facebook OAuth error:",x),alert("Facebook authentication failed. Please try again."),i();return}p&&f&&l()},[]);const i=()=>{const m=new URL(window.location.href);m.searchParams.delete("code"),m.searchParams.delete("state"),m.searchParams.delete("error"),window.history.replaceState({},document.title,m.pathname+m.hash)},l=async(m,p)=>{try{console.log("OAuth callback detected, waiting for popup postMessage..."),i()}catch(f){console.error("Error in OAuth callback:",f),alert("Error completing Facebook connection."),i()}},d=m=>{n({connectedAccounts:m}),r()},u=()=>{a(),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:"Connect to Facebook Lead Ads",children:e.isConnected?t.jsx(pY,{setting:e,onSave:d,onDisconnect:u,onSendTestLead:s}):t.jsx(mY,{onConnect:()=>{},onSave:n})})},fY=({facebookFields:e,crmFields:r,initialMappings:n=[],onMappingsChange:a,onValidationChange:s,salesPipelineStages:i=["New Lead","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],users:l=[]})=>{const[d,u]=N.useState(n),[m,p]=N.useState(""),[f,x]=N.useState({});N.useEffect(()=>{if(a(d),s){const A=S();s(A.isValid,A.unmappedFields)}},[d,a,s]),N.useEffect(()=>{const A=w=>{w.target.closest(".searchable-dropdown")||x({})};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const b=A=>d.find(w=>w.crmField===A),y=A=>{const w=d.filter(E=>E.crmField!==A&&E.facebookField).map(E=>E.facebookField);return e.filter(E=>!w.includes(E.name))},g=(A,w,E)=>{u(T=>{const O=T.findIndex(I=>I.crmField===A);if(w===""&&!E)return T.filter(I=>I.crmField!==A);const D={facebookField:w,crmField:A,customValue:E};if(O>=0){const I=[...T];return I[O]=D,I}else return[...T,D]})},j=(A,w)=>{w==="Use Custom Value"?g(A,"",void 0):g(A,w,void 0)},k=A=>{const w=A.toLowerCase();return w==="name"||w==="email"||w.includes("phone")},S=()=>{const A=r.filter(w=>k(w.key)).filter(w=>{const E=b(w.key);return!E?.facebookField&&!E?.customValue});return{isValid:A.length===0,unmappedFields:A.map(w=>w.label)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm text-on-surface",children:["Available fields: ",t.jsx("span",{className:"font-medium",children:e.length}),t.jsx("span",{className:"text-red-600 ml-2",children:"*"})," are required for mapping."]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"space-y-4",children:t.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Field Name",t.jsxs("span",{className:"text-sm font-normal text-subtle",children:["(",r.length," fields)"]})]})}),t.jsx("div",{className:"space-y-4",children:t.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Form Field"]})}),t.jsx("div",{className:"space-y-4",children:t.jsxs("h3",{className:"text-lg font-bold text-on-surface flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Custom Value"]})})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"space-y-3",children:r.map(A=>{const w=b(A.key),E=!!(w?.facebookField||w?.customValue);return t.jsx("div",{className:"rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start bg-background",children:t.jsxs("div",{className:"flex items-center gap-2 w-full",children:[t.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E?"bg-green-500":"bg-gray-400"}`}),t.jsxs("span",{className:"font-medium text-on-surface flex-shrink-0",children:[A.label,A.required&&t.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),w?.facebookField&&t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:["Facebook: ",w.facebookField]}),w?.customValue&&!w?.facebookField&&t.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:["Custom: ",w.customValue]})]})},A.key)})}),t.jsx("div",{className:"space-y-3",children:r.map(A=>{const w=b(A.key),E=y(A.key);return t.jsx("div",{className:"bg-background rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start",children:t.jsxs("select",{value:w?.facebookField||"",onChange:T=>j(A.key,T.target.value),className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Map ${A.label} to Facebook field or use custom value`,disabled:!!w?.customValue,children:[t.jsx("option",{value:"",children:"Select Facebook field..."}),t.jsx("option",{value:"Use Custom Value",children:"Use Custom Value"}),E.map(T=>t.jsx("option",{value:T.name,children:T.name},T.name))]})},A.key)})}),t.jsx("div",{className:"space-y-3",children:r.map(A=>{const w=b(A.key),E=!!w?.facebookField,T=A.options&&A.options.length>0;return t.jsx("div",{className:"bg-background rounded-lg border border-muted p-3 shadow-sm min-h-[60px] flex items-center justify-start",children:E&&w?.facebookField!=="Use Custom Value"?t.jsx("div",{className:"w-full h-8 px-3 rounded-lg bg-muted text-muted-foreground flex items-center text-sm",children:"Using Facebook field value"}):A.type==="variable"?t.jsxs("div",{className:"relative w-full searchable-dropdown",children:[t.jsx("input",{type:"text",value:f[A.key]||w?.customValue||"",onChange:O=>{const D=O.target.value;x(I=>({...I,[A.key]:D})),(A.variableType==="pipeline_status"?i:A.variableType==="users"?l.map(I=>I.name):[]).includes(D)&&g(A.key,"",D)},onFocus:()=>{x(O=>({...O,[A.key]:O[A.key]||w?.customValue||""}))},placeholder:`Search ${A.label}...`,className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Search and select ${A.label} value`,disabled:E}),f[A.key]&&!E&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-background border border-muted rounded-lg shadow-xl max-h-48 overflow-y-auto",children:[(()=>{const O=A.variableType==="pipeline_status"?i:A.variableType==="users"?l.map(I=>I.name||I.email||I.id||I._id).filter(Boolean):[],D=O.filter(I=>I.toLowerCase().includes((f[A.key]||"").toLowerCase()));return console.log("Variable field options for",A.label,":",O),D.map(I=>t.jsx("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer text-on-surface",onClick:()=>{g(A.key,"",I),x(M=>({...M,[A.key]:""}))},children:I},I))})(),(A.variableType==="pipeline_status"?i:A.variableType==="users"?l.map(O=>O.name||O.email||O.id||O._id).filter(Boolean):[]).filter(O=>O.toLowerCase().includes((f[A.key]||"").toLowerCase())).length===0&&t.jsx("div",{className:"px-3 py-2 text-subtle",children:"No options found"})]})]}):T?t.jsxs("div",{className:"relative w-full searchable-dropdown",children:[t.jsx("input",{type:"text",value:f[A.key]||w?.customValue||"",onChange:O=>{const D=O.target.value;x(I=>({...I,[A.key]:D})),A.options?.includes(D)&&g(A.key,"",D)},onFocus:()=>{x(O=>({...O,[A.key]:O[A.key]||w?.customValue||""}))},placeholder:`Search ${A.label}...`,className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Search and select ${A.label} value`}),f[A.key]&&!E&&t.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-background border border-muted rounded-lg shadow-lg max-h-32 overflow-y-auto",children:[A.options?.filter(O=>O.toLowerCase().includes((f[A.key]||"").toLowerCase())).map(O=>t.jsx("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer text-on-surface",onClick:()=>{g(A.key,"",O),x(D=>({...D,[A.key]:""}))},children:O},O)),A.options?.filter(O=>O.toLowerCase().includes((f[A.key]||"").toLowerCase())).length===0&&t.jsx("div",{className:"px-3 py-2 text-subtle",children:"No options found"})]})]}):t.jsx("input",{type:"text",value:w?.customValue||"",onChange:O=>g(A.key,"",O.target.value),placeholder:"Enter custom value...",className:"w-full h-8 px-3 border-0 rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-background",title:`Custom value for ${A.label}`,disabled:E})},A.key)})})]})}),(()=>{const A=S();return t.jsx("div",{className:"bg-muted/30 rounded-lg p-4 mt-4",children:A.isValid?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-green-800",children:"All mandatory fields are properly mapped! "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-subtle",children:"Total CRM fields:"}),t.jsx("span",{className:"font-medium text-on-surface ml-2",children:r.length})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-subtle",children:"Mapped fields:"}),t.jsx("span",{className:"font-medium text-green-600 ml-2",children:d.filter(w=>w.facebookField||w.customValue).length})]})]})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-amber-800",children:[t.jsx("strong",{children:"Required fields:"})," ",A.unmappedFields.join(", ")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-subtle",children:"Total CRM fields:"}),t.jsx("span",{className:"font-medium text-on-surface ml-2",children:r.length})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-subtle",children:"Mapped fields:"}),t.jsx("span",{className:"font-medium text-green-600 ml-2",children:d.filter(w=>w.facebookField||w.customValue).length})]})]})]})})})()]})},xY=()=>{const[e,r]=N.useState([]),[n,a]=N.useState({activityTypes:[],statuses:[],formIds:[],formNames:[],campaignIds:[],campaignNames:[],leadIds:[]}),[s,i]=N.useState(!1),[l,d]=N.useState(null),[u,m]=N.useState({activityType:"",status:"",conditions:[],startDate:"",endDate:""}),[p,f]=N.useState(1),[x,b]=N.useState(1),[y,g]=N.useState(0),[j]=N.useState(20),[k,S]=N.useState("createdAt"),[A,w]=N.useState("desc"),E=async(R=1)=>{i(!0),d(null);try{const H=new URLSearchParams({organizationId:"org-1",page:R.toString(),limit:j.toString(),sortBy:k,sortOrder:A});u.activityType&&H.append("activityType",u.activityType),u.status&&H.append("status",u.status),u.startDate&&H.append("startDate",u.startDate),u.endDate&&H.append("endDate",u.endDate),u.conditions.forEach((Q,K)=>{if(Q.field&&Q.value)if(Q.field==="createdAt"){if(Q.value!=="custom"){const{startDate:F,endDate:_}=W(Q.value);F&&H.append("startDate",F),_&&H.append("endDate",_)}}else H.append(`conditions[${K}][field]`,Q.field),H.append(`conditions[${K}][condition]`,Q.condition),H.append(`conditions[${K}][value]`,Q.value)});const U=await fetch(`${window.location.origin}/api/fb/activity-logs?${H}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!U.ok)throw new Error("Failed to fetch activity logs");const q=await U.json();if(q.success)r(q.logs),b(q.pagination.totalPages),g(q.pagination.totalCount),f(q.pagination.currentPage);else throw new Error(q.message||"Failed to fetch activity logs")}catch(H){d(H instanceof Error?H.message:"Failed to fetch activity logs")}finally{i(!1)}},T=async()=>{try{const R=await fetch(`${window.location.origin}/api/fb/activity-logs/filters?organizationId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(R.ok){const H=await R.json();H.success&&a(H.filterOptions)}}catch(R){console.error("Error fetching filter options:",R)}};N.useEffect(()=>{T(),E()},[]);const O=(R,H)=>{m(U=>({...U,[R]:H})),f(1)},D=()=>{E(1)},I=()=>{m({activityType:"",status:"",conditions:[],startDate:"",endDate:""}),f(1),E(1)},M=R=>{k===R?w(A==="asc"?"desc":"asc"):(S(R),w("desc")),E(1)},L=R=>R.split("_").map(H=>H.charAt(0).toUpperCase()+H.slice(1)).join(" "),B=R=>{const H={success:{color:"bg-green-100 text-green-700",icon:""},failed:{color:"bg-red-100 text-red-700",icon:""},pending:{color:"bg-amber-100 text-amber-700",icon:""},skipped:{color:"bg-gray-100 text-gray-700",icon:""}},U=H[R]||H.pending;return t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${U.color}`,children:[U.icon," ",R.charAt(0).toUpperCase()+R.slice(1)]})},z=[{value:"last_7_days",label:"Last 7 days"},{value:"last_15_days",label:"Last 15 days"},{value:"last_30_days",label:"Last 30 days"},{value:"last_1_month",label:"Last 1 month"},{value:"last_3_months",label:"Last 3 months"},{value:"last_6_months",label:"Last 6 months"},{value:"last_1_year",label:"Last 1 year"},{value:"maximum",label:"Maximum"},{value:"custom",label:"Custom"}],W=R=>{const H=new Date;let U="",q="";switch(R){case"last_7_days":U=new Date(H.getTime()-10080*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_15_days":U=new Date(H.getTime()-360*60*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_30_days":U=new Date(H.getTime()-720*60*60*1e3).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_1_month":U=new Date(H.getFullYear(),H.getMonth()-1,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_3_months":U=new Date(H.getFullYear(),H.getMonth()-3,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_6_months":U=new Date(H.getFullYear(),H.getMonth()-6,H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"last_1_year":U=new Date(H.getFullYear()-1,H.getMonth(),H.getDate()).toISOString().split("T")[0],q=H.toISOString().split("T")[0];break;case"maximum":U="",q="";break}return{startDate:U,endDate:q}};return t.jsxs("div",{className:"space-y-6 mx-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Activity Log"}),t.jsx("p",{className:"text-subtle mt-1",children:"Monitor lead sync activities and webhook deliveries."})]}),t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6 shadow-sm",children:[t.jsxs("h4",{className:"font-semibold text-on-surface mb-4 flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Advanced Filters"]}),t.jsxs("div",{className:"space-y-4 mb-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Activity Type"}),t.jsxs("select",{value:u.activityType,onChange:R=>O("activityType",R.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"All Types"}),n.activityTypes.map(R=>t.jsx("option",{value:R,children:L(R)},R))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Status"}),t.jsxs("select",{value:u.status,onChange:R=>O("status",R.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"All Statuses"}),n.statuses.map(R=>t.jsx("option",{value:R,children:R.charAt(0).toUpperCase()+R.slice(1)},R))]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface",children:"Advanced Filters"}),t.jsxs("button",{onClick:()=>{m(R=>({...R,conditions:[...R.conditions,{field:"",condition:"contains",value:""}]}))},className:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-1 px-3 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2 text-sm",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Filter"]})]}),t.jsxs("div",{className:"space-y-3",children:[u.conditions.map((R,H)=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/20 rounded-lg",children:[t.jsxs("select",{value:R.field,onChange:U=>{const q=[...u.conditions];q[H]={...q[H],field:U.target.value,condition:U.target.value==="createdAt"?"equals":"contains",value:U.target.value==="createdAt"?"last_7_days":""},m(Q=>({...Q,conditions:q}))},className:"px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-w-[140px]",children:[t.jsx("option",{value:"",children:"Select Field"}),t.jsx("option",{value:"createdAt",children:"Date"}),t.jsx("option",{value:"formId",children:"Form ID"}),t.jsx("option",{value:"formName",children:"Form Name"}),t.jsx("option",{value:"campaignId",children:"Campaign ID"}),t.jsx("option",{value:"campaignName",children:"Campaign Name"}),t.jsx("option",{value:"leadId",children:"Lead ID"})]}),t.jsx("select",{value:R.condition,onChange:U=>{const q=[...u.conditions];q[H]={...q[H],condition:U.target.value,value:""},m(Q=>({...Q,conditions:q}))},className:"px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-w-[100px]",children:R.field==="createdAt"?t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"equals",children:"Equals"}),t.jsx("option",{value:"is",children:"Is"})]}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"contains",children:"Contains"}),t.jsx("option",{value:"equals",children:"Equals"}),t.jsx("option",{value:"starts_with",children:"Starts with"}),t.jsx("option",{value:"ends_with",children:"Ends with"})]})}),R.field==="createdAt"?t.jsxs("div",{className:"flex-1",children:[t.jsxs("select",{value:R.value,onChange:U=>{const q=[...u.conditions];q[H]={...q[H],value:U.target.value},m(Q=>({...Q,conditions:q}))},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select date range"}),z.map(U=>t.jsx("option",{value:U.value,children:U.label},U.value))]}),R.value==="custom"&&t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{htmlFor:`startDate-${H}`,className:"block text-xs font-medium text-on-surface mb-1",children:"Start Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:`startDate-${H}`,type:"date",value:u.startDate,onChange:U=>O("startDate",U.target.value),className:"w-full px-3 py-2 pr-10 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),t.jsx("button",{type:"button",onClick:()=>{const U=document.getElementById(`startDate-${H}`);U&&(U.showPicker?U.showPicker():U.focus())},className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer hover:text-primary-600 transition-colors",title:"Open calendar",children:t.jsx("svg",{className:"h-4 w-4 text-subtle hover:text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{htmlFor:`endDate-${H}`,className:"block text-xs font-medium text-on-surface mb-1",children:"End Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:`endDate-${H}`,type:"date",value:u.endDate,onChange:U=>O("endDate",U.target.value),className:"w-full px-3 py-2 pr-10 border border-muted rounded-lg bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),t.jsx("button",{type:"button",onClick:()=>{const U=document.getElementById(`endDate-${H}`);U&&(U.showPicker?U.showPicker():U.focus())},className:"absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer hover:text-primary-600 transition-colors",title:"Open calendar",children:t.jsx("svg",{className:"h-4 w-4 text-subtle hover:text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]})]}):t.jsx("input",{type:"text",value:R.value,onChange:U=>{const q=[...u.conditions];q[H]={...q[H],value:U.target.value},m(Q=>({...Q,conditions:q}))},placeholder:"Enter value...",className:"flex-1 px-3 py-2 border border-muted rounded-lg bg-background text-on-surface placeholder-subtle text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),t.jsx("button",{onClick:()=>{m(U=>({...U,conditions:U.conditions.filter((q,Q)=>Q!==H)}))},className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Remove Filter",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},H)),u.conditions.length===0&&t.jsx("div",{className:"text-center py-4 text-subtle bg-muted/10 rounded-lg",children:t.jsx("p",{children:'No filters added. Click "Add Filter" to create filter conditions.'})})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:D,disabled:s,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-300 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Apply Filters"]}),t.jsxs("button",{onClick:I,className:"bg-muted hover:bg-muted/80 text-on-surface font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})]})]}),t.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("span",{className:"text-subtle",children:["Showing ",t.jsx("span",{className:"font-medium text-on-surface",children:e.length})," of"," ",t.jsx("span",{className:"font-medium text-on-surface",children:y})," activities"]}),t.jsxs("span",{className:"text-subtle",children:["Page ",t.jsx("span",{className:"font-medium text-on-surface",children:p})," of"," ",t.jsx("span",{className:"font-medium text-on-surface",children:x})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("select",{value:j,onChange:R=>{parseInt(R.target.value)},className:"px-2 py-1 border border-muted rounded bg-background text-on-surface text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:10,children:"10 per page"}),t.jsx("option",{value:20,children:"20 per page"}),t.jsx("option",{value:50,children:"50 per page"}),t.jsx("option",{value:100,children:"100 per page"})]})})]})}),t.jsxs("div",{className:"bg-background rounded-lg border border-muted shadow-sm overflow-hidden",children:[t.jsx("div",{className:"bg-muted/30 px-6 py-4 border-b border-muted",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-on-surface",children:[t.jsx("div",{className:"col-span-2",children:t.jsxs("button",{onClick:()=>M("status"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Status",k==="status"&&t.jsx("svg",{className:`h-4 w-4 ${A==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("button",{onClick:()=>M("createdAt"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Timestamp",k==="createdAt"&&t.jsx("svg",{className:`h-4 w-4 ${A==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("button",{onClick:()=>M("activityType"),className:"flex items-center gap-1 hover:text-primary-600 transition-colors",children:["Activity Type",k==="activityType"&&t.jsx("svg",{className:`h-4 w-4 ${A==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})}),t.jsx("div",{className:"col-span-3",children:"Details"}),t.jsx("div",{className:"col-span-2",children:"Form/Campaign"}),t.jsx("div",{className:"col-span-1",children:"Actions"})]})}),s&&t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t.jsx("span",{className:"ml-2 text-on-surface",children:"Loading activities..."})]}),l&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 m-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-red-800 text-sm",children:l})]})}),t.jsx("div",{className:"divide-y divide-muted",children:e.length>0?e.map(R=>t.jsx("div",{className:"px-6 py-4 hover:bg-muted/20 transition-colors",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center text-sm",children:[t.jsx("div",{className:"col-span-2",children:B(R.status)}),t.jsx("div",{className:"col-span-2 text-on-surface",children:new Date(R.createdAt).toLocaleString()}),t.jsx("div",{className:"col-span-2",children:t.jsx("div",{className:"font-medium text-on-surface",children:L(R.activityType)})}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("div",{className:"text-on-surface",children:R.description}),R.leadData&&t.jsxs("div",{className:"text-xs text-subtle mt-1",children:[R.leadData.name&&`Name: ${R.leadData.name}`,R.leadData.email&&`  Email: ${R.leadData.email}`]}),R.errorMessage&&t.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",R.errorMessage]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsxs("div",{className:"text-on-surface",children:[R.formName&&`Form: ${R.formName}`,R.campaignName&&`Campaign: ${R.campaignName}`]}),t.jsxs("div",{className:"text-xs text-subtle",children:[R.formId&&`Form ID: ${R.formId}`,R.campaignId&&`  Campaign ID: ${R.campaignId}`]})]}),t.jsx("div",{className:"col-span-1",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{console.log("View details for log:",R._id)},className:"p-1 text-subtle hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"View Details",children:t.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),R.status==="failed"&&t.jsx("button",{onClick:()=>{console.log("Retry log:",R._id)},className:"p-1 text-subtle hover:text-green-500 hover:bg-green-50 rounded transition-colors",title:"Retry",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})})]})},R._id)):!s&&t.jsxs("div",{className:"px-6 py-8 text-center",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-muted/50 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-6 w-6 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h4",{className:"text-lg font-semibold text-on-surface mb-2",children:"No activity logs found"}),t.jsx("p",{className:"text-subtle mb-6",children:Object.values(u).some(R=>R!=="")?"Try adjusting your filters to see more results.":"Activity logs will appear here once you start syncing leads or performing other Facebook integration activities."}),Object.values(u).some(R=>R!=="")&&t.jsx("button",{onClick:I,className:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md",children:"Clear Filters"})]})}),x>1&&t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-muted bg-muted/30",children:[t.jsxs("div",{className:"text-sm text-subtle",children:["Showing page ",p," of ",x]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>E(p-1),disabled:p<=1||s,className:"px-3 py-2 text-sm font-medium text-on-surface bg-background border border-muted rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x)},(R,H)=>{const U=Math.max(1,Math.min(x-4,p-2))+H;return t.jsx("button",{onClick:()=>E(U),disabled:s,className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${U===p?"bg-primary-600 text-white":"text-on-surface bg-background border border-muted hover:bg-muted"}`,children:U},U)})}),t.jsx("button",{onClick:()=>E(p+1),disabled:p>=x||s,className:"px-3 py-2 text-sm font-medium text-on-surface bg-background border border-muted rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})},hT=e=>{const[r,n]=N.useState([]),[a,s]=N.useState(!0),[i,l]=N.useState(null),d=N.useCallback(async()=>{if(!e){n([]),s(!1);return}try{s(!0),l(null);const k=await Me.getCustomFields(e);n(k||[])}catch(k){console.error("Error fetching custom fields:",k),l(k instanceof Error?k.message:"Failed to fetch custom fields"),n([])}finally{s(!1)}},[e]);N.useEffect(()=>{d()},[d]);const u=async k=>{try{l(null);const S={...k,id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},A=await Me.createCustomField(S);n(w=>[...w,A])}catch(S){throw console.error("Error creating custom field:",S),l(S instanceof Error?S.message:"Failed to create custom field"),S}},m=async(k,S)=>{try{l(null);const A=await Me.updateCustomField(k,S);n(w=>w.map(E=>E._id===k?{...E,...A}:E))}catch(A){throw console.error("Error updating custom field:",A),l(A instanceof Error?A.message:"Failed to update custom field"),A}},p=async k=>{try{l(null),await Me.deleteCustomField(k),n(S=>S.filter(A=>A._id!==k))}catch(S){throw console.error("Error deleting custom field:",S),l(S instanceof Error?S.message:"Failed to delete custom field"),S}},f=async k=>{try{const S=r.find(A=>A._id===k);if(!S)return;await m(k,{isMappable:!S.isMappable})}catch(S){throw console.error("Error toggling mappable status:",S),S}},x=async()=>{await d()},b=async k=>{try{return l(null),await Me.getMappableCustomFields(e,k)||[]}catch(S){return console.error("Error fetching mappable fields:",S),l(S instanceof Error?S.message:"Failed to fetch mappable fields"),[]}},y=async()=>{try{return l(null),await Me.getLeadDisplayFields(e)||[]}catch(k){return console.error("Error fetching lead display fields:",k),l(k instanceof Error?k.message:"Failed to fetch lead display fields"),[]}},g=async(k,S,A)=>{try{l(null);const w=r.find(T=>T._id===k);if(!w)return;const E={...w.usage,[`in${S}`]:A};await m(k,{usage:E})}catch(w){throw console.error("Error updating field usage:",w),l(w instanceof Error?w.message:"Failed to update field usage"),w}},j=r.filter(k=>k.isMappable);return{fields:r,loading:a,error:i,createField:u,updateField:m,deleteField:p,toggleMappable:f,refreshFields:x,mappableFields:j,getMappableFields:b,getLeadDisplayFields:y,updateFieldUsage:g}},gY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const[i,l]=N.useState([]),d=An(),{mappableFields:u}=hT(a?.id||"org-1"),[m,p]=N.useState("account"),[f,x]=N.useState({isOpen:!1,type:"connect"}),[b,y]=N.useState(!1),[g,j]=N.useState(!1),[k,S]=N.useState(null),[A,w]=N.useState(!0),[E,T]=N.useState({name:"",accountId:"",pageId:"",formId:""}),[O,D]=N.useState([]),[I,M]=N.useState([]),[L,B]=N.useState([]),[z,W]=N.useState([]),[R,H]=N.useState([]),[U,q]=N.useState(!1),[Q,K]=N.useState([]),[F,_]=N.useState(!1),[G,Z]=N.useState(null),oe=(ie,he)=>{q(ie),K(he)},[le,ge]=N.useState({accountId:"",formId:"",pageId:"",since:"",until:""}),[ve,fe]=N.useState(null),[Y,ne]=N.useState(!1),[ue,Ve]=N.useState([]),Te=async()=>{console.log("Fetching Facebook accounts and pages..."),_(!0),Z(null);try{const ie=await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!ie.ok)throw new Error("Failed to fetch accounts");const he=await ie.json();if(console.log("Raw response from /api/fb/pages:",he),he.success){console.log("Successfully fetched Facebook pages:",he.pages);const Fe=[{id:"fb-main",name:he.accountName||"Facebook Account",accessToken:"connected",pages:he.pages.map(Ke=>({id:Ke.pageId,name:Ke.pageName,subscribed:Ke.subscribed||!1,forms:[]}))}];console.log("Formatted accounts for frontend:",Fe),D(Fe),console.log("Accounts state set successfully")}else throw console.error("Failed to fetch Facebook pages:",he.message),new Error(he.message||"Failed to fetch accounts")}catch(ie){console.error("Error fetching accounts:",ie),Z(ie instanceof Error?ie.message:"Failed to fetch accounts")}finally{_(!1)}},Pe=async()=>{_(!0),Z(null);try{const ie=await fetch(`${window.location.origin}/api/fb/mappings?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!ie.ok)throw new Error("Failed to fetch mappings");const he=await ie.json();if(he.success)M(he.mappings);else throw new Error(he.message||"Failed to fetch mappings")}catch(ie){Z(ie instanceof Error?ie.message:"Failed to fetch mappings")}finally{_(!1)}},Xe=async ie=>{if(!ie){B([]);return}_(!0),Z(null);try{console.log("Fetching forms for pageId:",ie);const he=await fetch(`${window.location.origin}/api/fb/forms?pageId=${ie}&tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!he.ok)throw new Error("Failed to fetch forms");const Fe=await he.json();if(console.log("Forms response:",Fe),Fe.success)B(Fe.forms);else throw new Error(Fe.message||"Failed to fetch forms")}catch(he){console.error("Error fetching forms:",he),Z(he instanceof Error?he.message:"Failed to fetch forms")}finally{_(!1)}};N.useEffect(()=>{const ie=[{key:"name",label:"Full Name",type:"text",required:!0},{key:"email",label:"Email Address",type:"email",required:!0},{key:"phone",label:"Phone Number",type:"phone"},{key:"city",label:"City",type:"text"},{key:"source",label:"Lead Source",type:"text"},{key:"notes",label:"Notes",type:"textarea"},{key:"campaignName",label:"Campaign Name",type:"text"},{key:"adSetName",label:"Ad Set Name",type:"text"},{key:"adName",label:"Ad Name",type:"text"},{key:"formName",label:"Form Name",type:"text"},{key:"pageName",label:"Page Name",type:"text"},{key:"platform",label:"Platform",type:"text"},{key:"leadCreatedTime",label:"Lead Created Time",type:"datetime"}],he=u.map(Fe=>({key:Fe._id||Fe.id,label:Fe.name,type:Fe.type,required:Fe.isRequired||!1,options:Fe.options||[],isCustom:!0,variableType:Fe.variableType}));Ve([...ie,...he]),console.log("Updated CRM fields with custom fields:",[...ie,...he])},[u]);const pe=async()=>{try{const ie=await fetch(`${window.location.origin}/api/fb/custom-fields?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(ie.ok){const he=await ie.json();he.success&&console.log("Fetched additional CRM fields from API:",he.fields)}}catch(ie){console.error("Error fetching CRM fields:",ie)}},Oe=async ie=>{if(!ie){W([]);return}_(!0),Z(null);try{const he=L.find(Fe=>Fe.formId===ie);if(he&&he.fields&&he.fields.length>0){const Fe=he.fields.map(Ke=>({name:Ke.name,values:[`Sample ${Ke.label||Ke.name} value`]}));W(Fe),console.log("Using real Facebook form fields:",Fe)}else W([]),console.log("No form fields available for formId:",ie)}catch(he){console.error("Error fetching form fields:",he),Z(he instanceof Error?he.message:"Failed to fetch form fields"),W([])}finally{_(!1)}},ae=e.find(ie=>ie.source==="Facebook"),je=async()=>{try{const ie=await fetch(`${window.location.origin}/api/fb/pages?tenantId=org-1`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(ie.ok){const he=await ie.json();he.success&&he.pages&&he.pages.length>0&&(console.log("Facebook integration found in backend, loading data..."),r(Fe=>Fe.map(Ke=>Ke.source==="Facebook"?{...Ke,isConnected:!0,connectedAccounts:[{id:"fb-main",name:he.accountName||"Facebook Account",accessToken:"connected",pages:he.pages.map(Pt=>({id:Pt.pageId,name:Pt.pageName,forms:[]}))}]}:Ke)),Te(),Pe())}}catch(ie){console.error("Error checking Facebook integration:",ie)}};N.useEffect(()=>{console.log("Facebook Integration Page mounted, current setting:",ae),ae?.isConnected?(console.log("Frontend setting shows connected, fetching data..."),Te(),Pe(),pe()):(console.log("Checking backend for existing integration..."),je()),(async()=>{try{const ie=await fetch(`${window.location.origin}/api/users?organizationId=${a?.id||"org-1"}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(ie.ok){const he=await ie.json();he.success&&(console.log("Fetched users for variable fields:",he.data),l(he.data))}}catch(ie){console.error("Error fetching users:",ie)}})()},[]);const Ie=()=>x({isOpen:!1,type:"connect"}),ee=async(ie,he)=>{Array.isArray(he)?r(Fe=>Fe.map(Ke=>Ke.source===ie?{...Ke,isConnected:!0,connectedAccounts:he}:Ke)):r(Fe=>Fe.map(Ke=>Ke.source===ie?{...Ke,...he}:Ke)),he&&typeof he=="object"&&"isConnected"in he&&he.isConnected&&(console.log("Facebook OAuth completed successfully, refreshing data..."),await Te())},Ee=ie=>{window.confirm(`Are you sure you want to disconnect ${ie}? This will stop new leads from coming in.`)&&(r(he=>he.map(Fe=>Fe.source===ie?{...Fe,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:Fe)),D([]))},ot=ie=>{window.confirm("Are you sure you want to disconnect this account? This will stop new leads from coming in.")&&(D(he=>he.filter(Fe=>Fe.id!==ie)),r(he=>he.map(Fe=>Fe.source==="Facebook"?{...Fe,connectedAccounts:Fe.connectedAccounts?.filter(Ke=>Ke.id!==ie)}:Fe)))},Rt=async(ie,he,Fe)=>{_(!0),Z(null);try{const Ke=await fetch(`${window.location.origin}/api/fb/pages/${he}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tenantId:"org-1"})});if(!Ke.ok)throw new Error("Failed to update subscription");const Pt=await Ke.json();if(Pt.success)D(Xt=>Xt.map(ct=>ct.id===ie?{...ct,pages:ct.pages.map(mt=>mt.id===he?{...mt,subscribed:Fe}:mt)}:ct));else throw new Error(Pt.message||"Failed to update subscription")}catch(Ke){Z(Ke instanceof Error?Ke.message:"Subscription update failed")}finally{_(!1)}},$t=()=>{x({isOpen:!0,type:"connect"})},$r=async ie=>{_(!0),Z(null);try{const he=`form_${Date.now()}`,Fe=ie.pageId,Ke=await fetch(`${window.location.origin}/api/fb/forms/${he}/map`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pageId:Fe,tenantId:"org-1",fieldMapping:R})});if(!Ke.ok)throw new Error("Failed to save mapping");const Pt=await Ke.json();if(Pt.success){if(k)M(Xt=>Xt.map(ct=>ct.id===k.id?{...ct,name:ie.name,accountId:ie.accountId,pageId:ie.pageId,formId:ie.formId,accountName:O.find(mt=>mt.id===ie.accountId)?.name||"",pageName:O.find(mt=>mt.id===ie.accountId)?.pages.find(mt=>mt.id===ie.pageId)?.name||"",formName:L.find(mt=>mt.formId===ie.formId)?.formName||"",destination:ie.destination}:ct)),alert("Mapping updated successfully!");else{const Xt={id:`mapping-${Date.now()}`,name:ie.name,accountId:ie.accountId,pageId:ie.pageId,formId:ie.formId,accountName:O.find(ct=>ct.id===ie.accountId)?.name||"",pageName:O.find(ct=>ct.id===ie.accountId)?.pages.find(ct=>ct.id===ie.pageId)?.name||"",formName:L.find(ct=>ct.formId===ie.formId)?.formName||"",fieldMappings:R,lastLead:"Never",status:"active"};M(ct=>[...ct,Xt]),alert("Mapping created successfully!")}await Pe()}else throw new Error(Pt.message||"Failed to save mapping")}catch(he){Z(he instanceof Error?he.message:"Failed to save mapping")}finally{_(!1)}y(!1),S(null),T({name:"",accountId:"",pageId:"",formId:""})},ur=()=>{if(!E.name||!E.accountId||!E.pageId||!E.formId){alert("Please fill in all required fields");return}if(!U){alert(`Please map all mandatory fields first:
${Q.join(", ")}`);return}$r(E)},zr=()=>{S(null),T({name:"",accountId:"",pageId:"",formId:""}),y(!0)},br=ie=>{const he=I.find(Fe=>Fe.id===ie);he&&(S(he),T({name:he.name,accountId:he.accountId,pageId:he.pageId,formId:he.formId||""}),he.pageId&&Xe(he.pageId),y(!0))},Ye=async ie=>{if(window.confirm("Are you sure you want to delete this mapping?")){_(!0),Z(null);try{const he=I.find(Pt=>Pt.id===ie);if(!he)return;const Fe=await fetch(`${window.location.origin}/api/fb/forms/${he.formId}/map`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tenantId:"org-1"})});if(!Fe.ok)throw new Error("Failed to delete mapping");const Ke=await Fe.json();if(Ke.success)M(Pt=>Pt.filter(Xt=>Xt.id!==ie)),alert("Mapping deleted successfully!"),await Pe();else throw new Error(Ke.message||"Failed to delete mapping")}catch(he){Z(he instanceof Error?he.message:"Failed to delete mapping")}finally{_(!1)}}},Tr=()=>{ge({accountId:"",formId:"",pageId:"",since:"",until:""}),fe(null),j(!0)},yr=async()=>{if(!le.formId||!le.pageId){alert("Please select a form and page");return}ne(!0),fe(null);try{const ie=await fetch(`${window.location.origin}/api/fb/sync/backfill`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({formId:le.formId,pageId:le.pageId,tenantId:"org-1",since:le.since||void 0,until:le.until||void 0})});if(!ie.ok)throw new Error("Failed to sync leads");const he=await ie.json();if(he.success){fe(he.results);const Fe=he.results.filter(ct=>ct.status==="saved").length,Ke=he.results.filter(ct=>ct.status==="skipped").length,Pt=he.results.filter(ct=>ct.status==="error").length;let Xt=` Sync completed! ${Fe} leads imported successfully.`;Ke>0&&(Xt+=` ${Ke} duplicates skipped.`),Pt>0&&(Xt+=` ${Pt} errors occurred.`),alert(Xt)}else throw new Error(he.message||"Failed to sync leads")}catch(ie){const he=ie instanceof Error?ie.message:"Sync failed";Z(he),he.includes("No leads found")?console.log("No leads found - error will be displayed in UI"):he.includes("access token")||he.includes("token")?alert("Facebook access token expired or invalid. Please reconnect your Facebook account."):he.includes("network")||he.includes("timeout")?alert("Network error. Please check your internet connection and try again."):he.includes("facebookService.fetchLeadsFromFacebook is not a function")?alert("System error: Facebook service method not found. Please contact support."):alert(`Sync failed: ${he}`)}finally{ne(!1)}};return t.jsxs("div",{className:"space-y-8 h-full flex flex-col min-h-0 bg-surface px-6 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between bg-surface border-b border-muted",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>d("/settings/integrations"),className:"p-2 hover:bg-muted text-subtle hover:text-on-surface rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Facebook Integration"}),t.jsx("p",{className:"text-subtle mt-1",children:"Connect your Facebook Lead Forms to automatically capture leads"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${ae?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:ae?.isConnected?"Connected":"Not Connected"})})]}),t.jsx("div",{className:"border-b border-muted bg-surface",children:t.jsxs("nav",{className:"flex space-x-8",children:[t.jsx("button",{onClick:()=>p("account"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="account"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Account Management"}),t.jsx("button",{onClick:()=>p("mapping"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="mapping"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Field Mapping"}),t.jsx("button",{onClick:()=>p("activity-log"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${m==="activity-log"?"border-primary-500 text-primary-600":"border-transparent text-subtle hover:text-on-surface hover:border-muted"}`,children:"Activity Log"})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-2",children:[m==="account"&&t.jsxs("div",{className:"space-y-6 mx-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Connected Accounts"}),t.jsx("p",{className:"text-subtle mt-1",children:"Manage your connected Facebook accounts and pages."})]}),t.jsxs("button",{onClick:$t,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Add Account"]})]}),F&&t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-on-surface",children:"Loading..."})]}),G&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-red-800 text-sm",children:G})]})}),t.jsx("div",{className:"space-y-6",children:O.length>0?O.map(ie=>t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-background rounded-full"})]}),t.jsx("h4",{className:"font-semibold text-on-surface",children:ie.name})]}),t.jsx("button",{onClick:()=>ot(ie.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded-lg text-sm transition-colors",children:"Disconnect"})]}),t.jsxs("div",{className:"space-y-4 ml-11",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h5",{className:"font-medium text-on-surface",children:["Connected Pages (",ie.pages?.length||0,")"]}),t.jsxs("button",{onClick:()=>w(!A),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1 transition-colors",children:[A?"Collapse":"Expand",t.jsx("svg",{className:`h-4 w-4 transition-transform ${A?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),A&&t.jsx(t.Fragment,{children:ie.pages&&ie.pages.length>0?ie.pages.map(he=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-muted/50",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-on-surface",children:he.name}),t.jsxs("div",{className:"text-sm text-subtle",children:["Page ID: ",he.id]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${he.subscribed?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:he.subscribed?"Subscribed":"Not Subscribed"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:he.subscribed||!1,onChange:Fe=>Rt(ie.id,he.id,Fe.target.checked),disabled:F,className:"sr-only peer"}),t.jsx("div",{className:`w-10 h-5 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-4 after:w-4 ${he.subscribed?"bg-primary-600":"bg-muted"}`})]})]})]},he.id)):t.jsx("div",{className:"text-center py-4 text-subtle",children:t.jsx("p",{children:"No Facebook pages found for this account."})})})]})]},ie.id)):t.jsxs("div",{className:"text-center py-8 text-subtle bg-muted/20 rounded-lg",children:[t.jsx("svg",{className:"h-12 w-12 mx-auto mb-4 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("p",{children:"No Facebook accounts connected."}),t.jsx("p",{className:"text-sm mt-1",children:'Use the "Add Account" button above to connect an account.'})]})})]}),m==="mapping"&&t.jsxs("div",{className:"space-y-6 mx-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:"Field Mappings"}),t.jsx("p",{className:"text-subtle mt-1",children:"Map your Facebook Lead Form fields to your CRM."})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:Tr,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Leads"]}),t.jsxs("button",{className:"bg-teal-500 hover:bg-teal-600 disabled:bg-teal-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Test Lead"]}),t.jsxs("button",{onClick:zr,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create New Mapping"]})]})]}),t.jsxs("div",{className:"bg-background rounded-lg border border-muted shadow-sm overflow-hidden mx-4",children:[t.jsx("div",{className:"bg-muted/30 px-6 py-4 border-b border-muted",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-on-surface",children:[t.jsx("div",{className:"col-span-1"}),t.jsx("div",{className:"col-span-3",children:"MAPPING NAME"}),t.jsx("div",{className:"col-span-4",children:"SOURCE FORM"}),t.jsx("div",{className:"col-span-2",children:"STATUS"}),t.jsx("div",{className:"col-span-2",children:"LAST LEAD"})]})}),t.jsx("div",{className:"divide-y divide-muted",children:I.length>0?I.map(ie=>t.jsx("div",{className:"px-6 py-4 hover:bg-muted/20 transition-colors",children:t.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center text-sm",children:[t.jsx("div",{className:"col-span-1 flex justify-center",children:t.jsx("div",{className:`w-3 h-3 rounded-full ${ie.status==="active"?"bg-green-500":"bg-red-500"}`})}),t.jsx("div",{className:"col-span-3",children:t.jsx("div",{className:"font-medium text-on-surface",children:ie.name})}),t.jsxs("div",{className:"col-span-4",children:[t.jsxs("div",{className:"text-on-surface",children:[ie.pageName," Form"]}),t.jsxs("div",{className:"text-xs text-subtle mt-1",children:[ie.accountName,", ",ie.pageName]})]}),t.jsx("div",{className:"col-span-2",children:t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ie.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ie.status==="active"?"Active":"Inactive"})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-on-surface",children:ie.lastLead==="Never"?"Never":ie.lastLead.split(",")[0]}),t.jsx("div",{className:"text-xs text-subtle",children:ie.lastLead==="Never"?"":ie.lastLead.split(",")[1]})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.jsx("button",{onClick:()=>br(ie.id),className:"p-1 text-subtle hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Edit Mapping",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsx("button",{onClick:()=>Ye(ie.id),className:"p-1 text-subtle hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Delete Mapping",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})]})},ie.id)):t.jsxs("div",{className:"px-6 py-8 text-center",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-muted/50 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-6 w-6 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h4",{className:"text-lg font-semibold text-on-surface mb-2",children:"No mappings yet"}),t.jsx("p",{className:"text-subtle mb-6",children:"Create your first field mapping to start syncing Facebook leads to your CRM."}),t.jsx("button",{onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md",children:"Create Your First Mapping"})]})})]})]}),m==="activity-log"&&t.jsx(xY,{})]}),f.isOpen&&f.type==="connect"&&ae&&t.jsx(hY,{setting:ae,onClose:Ie,onSave:ie=>ee("Facebook",ie),onDisconnect:()=>Ee("Facebook"),onSendTestLead:ie=>s("Facebook",ie)}),b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:t.jsxs("div",{className:"bg-background rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center p-8 border-b border-muted flex-shrink-0",children:[t.jsx("h2",{className:"text-xl font-bold text-on-surface",children:k?"Edit Mapping":"Create New Mapping"}),t.jsx("button",{onClick:()=>{y(!1),S(null),T({name:"",accountId:"",pageId:"",formId:""})},className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-8 overflow-y-auto flex-grow",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Mapping Name"}),t.jsx("input",{type:"text",placeholder:"Enter mapping name",value:E.name,onChange:ie=>T(he=>({...he,name:ie.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Account"}),t.jsxs("select",{value:E.accountId,onChange:ie=>T(he=>({...he,accountId:ie.target.value,pageId:""})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Account"}),O.map(ie=>t.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Page"}),t.jsxs("select",{value:E.pageId,onChange:ie=>{const he=ie.target.value;T(Fe=>({...Fe,pageId:he,formId:""})),he?Xe(he):B([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Page"}),O.find(ie=>ie.id===E.accountId)?.pages.filter(ie=>ie.subscribed).map(ie=>t.jsx("option",{value:ie.id,children:ie.name},ie.id))||[]]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Form"}),t.jsxs("select",{value:E.formId||"",onChange:ie=>{const he=ie.target.value;T(Fe=>({...Fe,formId:he})),he?Oe(he):W([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Form"}),L.map(ie=>t.jsx("option",{value:ie.formId,children:ie.formName},ie.formId))]})]})]}),E.formId&&z.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface mb-4",children:"Field Mapping"}),t.jsx(fY,{facebookFields:z,crmFields:ue,initialMappings:R,onMappingsChange:H,onValidationChange:oe,salesPipelineStages:["New Lead","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],users:i})]}),E.formId&&z.length===0&&t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"h-5 w-5 text-amber-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-amber-800 text-sm",children:"No form fields found for the selected form. The form might not have any questions configured."})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Deduplication Strategy"}),t.jsxs("select",{className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{children:"None"}),t.jsx("option",{children:"Email Match"}),t.jsx("option",{children:"Phone Match"}),t.jsx("option",{children:"Email + Phone Match"}),t.jsx("option",{children:"Skip Duplicate"})]})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 p-8 border-t border-muted bg-muted/30",children:[t.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-subtle hover:text-on-surface font-medium rounded-lg hover:bg-muted transition-colors",children:"Cancel"}),t.jsx("button",{onClick:ur,disabled:!U,className:`font-bold py-2 px-4 rounded-lg transition-colors shadow-sm hover:shadow-md ${U?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:k?"Update Mapping":"Save Mapping"})]})]})}),g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:t.jsxs("div",{className:"bg-background rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col ring-1 ring-inset ring-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-muted flex-shrink-0",children:[t.jsx("h2",{className:"text-xl font-bold text-on-surface",children:"Sync Facebook Leads"}),t.jsx("button",{onClick:()=>j(!1),className:"text-subtle hover:text-on-surface p-1 rounded-full hover:bg-muted transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Historical Leads"]}),t.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Import leads from your Facebook Lead Forms that were created before setting up the webhook integration."}),t.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:t.jsxs("p",{className:"text-xs text-blue-700",children:[t.jsx("strong",{children:"How it works:"}),t.jsx("br",{}),"1. Select a Facebook form with existing leads",t.jsx("br",{}),"2. Choose date range (optional)",t.jsx("br",{}),'3. Click "Start Sync" to import leads',t.jsx("br",{}),"4. View detailed results below"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Account"}),t.jsxs("select",{value:le.accountId||"",onChange:ie=>ge(he=>({...he,accountId:ie.target.value,pageId:"",formId:""})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Account"}),O.map(ie=>t.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Page"}),t.jsxs("select",{value:le.pageId,onChange:ie=>{const he=ie.target.value;ge(Fe=>({...Fe,pageId:he,formId:""})),he?Xe(he):B([])},className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Page"}),O.find(ie=>ie.id===le.accountId)?.pages.filter(ie=>ie.subscribed).map(ie=>t.jsx("option",{value:ie.id,children:ie.name},ie.id))||[]]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Facebook Form"}),t.jsxs("select",{value:le.formId,onChange:ie=>ge(he=>({...he,formId:ie.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"Select Form"}),L.map(ie=>t.jsx("option",{value:ie.formId,children:ie.formName},ie.formId))]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"From Date (optional)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",value:le.since,onChange:ie=>ge(he=>({...he,since:ie.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:t.jsx("svg",{className:"h-4 w-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"To Date (optional)"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",value:le.until,onChange:ie=>ge(he=>({...he,until:ie.target.value})),className:"w-full px-3 py-2 border border-muted rounded-lg bg-background text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:t.jsx("svg",{className:"h-4 w-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]}),ve&&t.jsxs("div",{className:`border rounded-lg p-4 ${ve.length===0?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"}`,children:[t.jsxs("h4",{className:`font-semibold mb-3 flex items-center gap-2 ${ve.length===0?"text-blue-900":"text-green-900"}`,children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.length===0?t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}):t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ve.length===0?"No Leads Found":"Sync Results"]}),ve.length===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsxs("div",{className:"text-blue-700 mb-2",children:[t.jsx("strong",{children:"0 leads found"})," for the selected form and date range."]}),t.jsx("div",{className:"text-sm text-blue-600",children:"Try adjusting your date range or check if the form has received any leads."})]}):t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:ve.length}),t.jsx("div",{className:"text-green-800",children:"Total Processed"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:ve.filter(ie=>ie.status==="saved").length}),t.jsx("div",{className:"text-green-800",children:"Successfully Synced"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-amber-600",children:ve.filter(ie=>ie.status==="skipped").length}),t.jsx("div",{className:"text-amber-800",children:"Skipped (Duplicates)"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:ve.filter(ie=>ie.status==="error").length}),t.jsx("div",{className:"text-red-800",children:"Errors"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h5",{className:"font-medium text-green-900 mb-2",children:"Detailed Results:"}),t.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:ve.map((ie,he)=>t.jsxs("div",{className:`text-xs p-2 rounded flex items-center justify-between ${ie.status==="saved"?"bg-green-100 text-green-800":ie.status==="skipped"?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:[t.jsxs("span",{children:["Lead ID: ",ie.leadId]}),t.jsx("span",{className:"font-medium",children:ie.status==="saved"?" Saved":ie.status==="skipped"?" Skipped":` ${ie.error||"Error"}`})]},he))})]})]})]}),G&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 shadow-sm",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-full",children:t.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),t.jsxs("div",{className:"ml-4 flex-1",children:[t.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?"System Configuration Error":G.includes("No leads found")?"No Leads Found":"Sync Failed"}),t.jsx("p",{className:"text-sm text-red-700 mb-4 leading-relaxed",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?"There is a system configuration issue preventing the sync. Please contact support or try again later.":G}),t.jsxs("div",{className:"bg-red-100 rounded-lg p-4",children:[t.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Troubleshooting Steps:"}),t.jsx("ul",{className:"text-sm text-red-700 space-y-2",children:G.includes("facebookService.fetchLeadsFromFacebook is not a function")?t.jsxs(t.Fragment,{children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"This is a system error. Please contact support for assistance."})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Try refreshing the page and attempting the sync again."})]})]}):G.includes("No leads found")?t.jsxs(t.Fragment,{children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Check if the selected form has received any leads in the specified date range"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Try expanding the date range or removing date filters"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Verify the form is active and still collecting leads"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Check if your Facebook access token is still valid and hasn't expired"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Ensure the selected form has leads in the specified date range"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Verify your Facebook page has the necessary permissions (leads_retrieval)"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Try reconnecting your Facebook account in the integration settings"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0"}),t.jsx("span",{children:"Check your internet connection and Facebook API status"})]})]})})]}),t.jsxs("div",{className:"mt-4 flex space-x-3",children:[t.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),t.jsx("button",{onClick:()=>Z(null),className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors duration-200",children:"Dismiss"})]})]})]})})]})}),t.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-muted bg-muted/30",children:[t.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-subtle hover:text-on-surface font-medium rounded-lg hover:bg-muted transition-colors",children:"Close"}),t.jsx("button",{onClick:yr,disabled:Y||!le.formId||!le.pageId,className:`font-bold py-2 px-6 rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-2 ${Y||!le.formId||!le.pageId?"bg-purple-300 text-purple-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white hover:scale-105"}`,children:Y?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Syncing Leads..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t.jsx("span",{children:"Start Sync"})]})})]})]})})]})},bY=({isOpen:e,onClose:r,accounts:n,onConnectAccount:a,onDisconnectAccount:s,onToggleAccount:i})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Google Ads Accounts"}),t.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-blue-800",children:"Connect New Account"}),t.jsx("p",{className:"text-sm text-blue-600",children:"Add another Google Ads account to your integration"})]}),t.jsxs("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Connect Account"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"font-medium text-slate-800",children:["Connected Accounts (",n.length,")"]}),n.length>0?n.map(l=>t.jsx("div",{className:"border border-slate-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",checked:l.isActive!==!1,onChange:()=>i(l.id),className:"w-4 h-4 text-blue-600 rounded"}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-slate-800",children:l.name||`Account ${l.id}`}),t.jsxs("p",{className:"text-sm text-slate-600",children:["ID: ",l.id]}),l.managerName&&t.jsxs("p",{className:"text-xs text-slate-500",children:["Manager: ",l.managerName]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l.isActive!==!1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:l.isActive!==!1?"Active":"Inactive"}),t.jsx("button",{onClick:()=>s(l.id),className:"text-red-600 hover:text-red-800 p-1",title:"Disconnect Account",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},l.id)):t.jsxs("div",{className:"text-center py-8 text-slate-500",children:[t.jsx("svg",{className:"h-12 w-12 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsx("p",{children:"No Google Ads accounts connected yet"}),t.jsx("p",{className:"text-sm",children:'Click "Connect Account" to get started'})]})]})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:r,className:"bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Close"})})]})}):null,yY=({isOpen:e,onClose:r,onSave:n,onConnectAccount:a,initialConfig:s})=>{const[i,l]=N.useState({clientId:"",clientSecret:"",redirectUri:`${window.location.origin}/api/oauth/google-ads/callback`,...s}),[d,u]=N.useState(!1),[m,p]=N.useState(null),[f,x]=N.useState("setup"),b=()=>{n(i),x("connect")},y=()=>{a(i)},g=async()=>{u(!0),p(null);try{const j={name:"Google Ads Integration",clientId:i.clientId,clientSecret:i.clientSecret,redirectUri:i.redirectUri},k=await Me.createGoogleAdsIntegration(j);k&&k._id?p({success:!0,message:"Configuration is valid! Integration created successfully."}):p({success:!1,message:"Configuration test failed - invalid response from server"})}catch(j){console.error("Configuration test error:",j),p({success:!1,message:j.message||"Failed to test configuration. Please check your credentials."})}finally{u(!1)}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Google Ads Integration Setup"}),t.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex mb-6 border-b border-slate-200",children:[t.jsx("button",{onClick:()=>x("setup"),className:`pb-2 px-4 font-medium text-sm border-b-2 ${f==="setup"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"1. API Setup"}),t.jsx("button",{onClick:()=>x("connect"),disabled:!i.clientId||!i.clientSecret,className:`pb-2 px-4 font-medium text-sm border-b-2 ${f==="connect"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"} ${!i.clientId||!i.clientSecret?"opacity-50 cursor-not-allowed":""}`,children:"2. Connect Account"})]}),f==="setup"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Setup Instructions"}),t.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[t.jsxs("p",{children:["1. Go to ",t.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google Cloud Console"})]}),t.jsx("p",{children:"2. Create a new project or select existing one"}),t.jsx("p",{children:"3. Enable Google Ads API"}),t.jsx("p",{children:"4. Create OAuth 2.0 credentials"}),t.jsx("p",{children:"5. Add your domain to authorized origins"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Client ID *"}),t.jsx("input",{type:"text",value:i.clientId,onChange:j=>l({...i,clientId:j.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Google Ads Client ID"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Client Secret *"}),t.jsx("input",{type:"password",value:i.clientSecret,onChange:j=>l({...i,clientSecret:j.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Google Ads Client Secret"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Redirect URI"}),t.jsx("input",{type:"text",value:i.redirectUri,onChange:j=>l({...i,redirectUri:j.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50",readOnly:!0}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This is automatically set to your current domain + /auth/google/callback"})]}),m&&t.jsx("div",{className:`p-3 rounded-lg ${m.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:t.jsx("p",{className:`text-sm ${m.success?"text-green-700":"text-red-700"}`,children:m.message})})]}),f==="connect"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Ready to Connect!"}),t.jsx("p",{className:"text-sm text-green-700",children:"Your API configuration is saved. Now you can connect your Google Ads accounts."})]}),t.jsxs("div",{className:"text-center py-4",children:[t.jsxs("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:[t.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Connect Google Ads Account"]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This will redirect you to Google OAuth to authorize access"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[f==="setup"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:g,disabled:d||!i.clientId||!i.clientSecret,className:"flex-1 bg-slate-600 hover:bg-slate-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg text-sm",children:d?"Testing...":"Test Configuration"}),t.jsx("button",{onClick:b,disabled:!i.clientId||!i.clientSecret,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Save & Continue"})]}),f==="connect"&&t.jsx("button",{onClick:()=>x("setup"),className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-medium py-2 px-4 rounded-lg text-sm",children:"Back to Setup"})]})]})}):null},vY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=N.useState(!1),[u,m]=N.useState(!1),[p,f]=N.useState([]),[x,b]=N.useState([]),[y,g]=N.useState(null),[j,k]=N.useState([]),[S,A]=N.useState(null),[w,E]=N.useState(null),[T,O]=N.useState(null),[D,I]=N.useState(!1),[M,L]=N.useState(!1),[B,z]=N.useState(()=>{const pe=localStorage.getItem("googleAdsConfig");if(pe)try{return JSON.parse(pe)}catch(Oe){console.error("Failed to parse saved Google Ads config:",Oe)}return{clientId:"your-google-ads-client-id.googleusercontent.com",clientSecret:"your-google-ads-client-secret",redirectUri:"https://crm.clienn.com/api/oauth/google-ads/callback"}}),[W,R]=N.useState({}),[H,U]=N.useState({}),q=e.find(pe=>pe.source==="Google Ads");N.useEffect(()=>{q?.isConnected&&Q()},[q]);const Q=async()=>{if(q){m(!0),E(null);try{const pe=(await Me.getGoogleAdsIntegrations()).find(Oe=>Oe.source==="Google Ads");if(pe&&(g(pe),pe.isConnected&&pe.connectedAccounts.length>0)){const Oe=pe.connectedAccounts;k(Oe);const ae=[],je={totalConversions:0,conversionRate:0,costPerConversion:0,totalCost:0};for(const Ie of Oe)if(Ie.isActive!==!1)try{const ee=await Me.getGoogleAdsCampaigns(pe._id,Ie.id);if(ee){const ot=ee.map(Rt=>({...Rt,accountId:Ie.id,accountName:Ie.name||`Account ${Ie.id}`}));ae.push(...ot)}const Ee=await Me.getGoogleAdsConversionData(pe._id,Ie.id);Ee&&(je.totalConversions+=Ee.totalConversions||0,je.totalCost+=Ee.totalCost||0)}catch(ee){console.warn(`Failed to load data for account ${Ie.id}:`,ee)}f(ae),je.totalConversions>0&&je.totalCost>0&&(je.conversionRate=je.totalConversions/ae.length*100,je.costPerConversion=je.totalCost/je.totalConversions),A(je)}}catch(pe){console.error("Failed to load Google Ads data:",pe),E(pe.message||"Failed to load Google Ads data. Please try again.")}finally{m(!1)}}},K=pe=>{O(pe),setTimeout(()=>O(null),5e3)},F=pe=>{E(pe),setTimeout(()=>E(null),5e3)},_=()=>{I(!0)},G=()=>{I(!1)},Z=()=>{L(!0)},oe=()=>{L(!1)},le=async()=>{L(!1),I(!0)},ge=async pe=>{if(window.confirm("Are you sure you want to disconnect this Google Ads account?"))try{await Me.updateGoogleAdsIntegration(y._id,{disconnectAccountId:pe}),k(Oe=>Oe.filter(ae=>ae.id!==pe)),await Q(),K("Account disconnected successfully!")}catch(Oe){console.error("Failed to disconnect account:",Oe),F(Oe.message||"Failed to disconnect account. Please try again.")}},ve=async pe=>{try{const Oe=!j.find(ae=>ae.id===pe).isActive;await Me.updateGoogleAdsIntegration(y._id,{toggleAccountId:pe,isActive:Oe}),k(ae=>ae.map(je=>je.id===pe?{...je,isActive:Oe}:je)),K(`Account ${Oe?"activated":"deactivated"} successfully!`)}catch(Oe){console.error("Failed to toggle account:",Oe),F(Oe.message||"Failed to update account status. Please try again.")}},fe=async pe=>{z(pe),localStorage.setItem("googleAdsConfig",JSON.stringify(pe)),K("Google Ads configuration saved successfully!")},Y=async pe=>{if(!pe.clientId||!pe.clientSecret){F("Please configure your Google Ads API credentials first");return}d(!0);try{let Oe=(await Me.getGoogleAdsIntegrations()).find(ae=>ae.source==="Google Ads");if(Oe)K("Google Ads integration already exists. Redirecting to OAuth...");else{const ae={name:"Google Ads Integration",clientId:pe.clientId,clientSecret:pe.clientSecret,redirectUri:pe.redirectUri};Oe=await Me.createGoogleAdsIntegration(ae)}try{const ae=await Me.requestWithRetry(`/oauth/google-ads/${Oe._id}/initiate`);if(ae.success&&ae.authUrl)window.location.href=ae.authUrl;else throw new Error("Failed to generate OAuth URL")}catch(ae){console.error("OAuth initiation failed:",ae);const je=`https://accounts.google.com/oauth/authorize?client_id=${pe.clientId}&redirect_uri=${encodeURIComponent(`${window.location.origin}/api/oauth/google-ads/callback`)}&scope=https://www.googleapis.com/auth/adwords&response_type=code&access_type=offline&prompt=consent&state=${Oe._id}`;window.location.href=je}}catch(Oe){console.error("Failed to connect Google Ads:",Oe),Oe.message?.includes("already exists")?F("Google Ads integration already exists for this organization. Please disconnect first if you want to reconnect."):F(Oe.message||"Failed to connect Google Ads. Please try again.")}finally{d(!1)}},ne=async()=>{if(!B.clientId||!B.clientSecret){F("Please configure your Google Ads API credentials first");return}d(!0);try{let pe=(await Me.getGoogleAdsIntegrations()).find(Oe=>Oe.source==="Google Ads");if(pe)K("Google Ads integration already exists. Redirecting to OAuth...");else{const Oe={name:"Google Ads Integration",clientId:B.clientId,clientSecret:B.clientSecret,redirectUri:B.redirectUri};pe=await Me.createGoogleAdsIntegration(Oe)}try{const Oe=await Me.requestWithRetry(`/oauth/google-ads/${pe._id}/initiate`);if(Oe.success&&Oe.authUrl)window.location.href=Oe.authUrl;else throw new Error("Failed to generate OAuth URL")}catch(Oe){console.error("OAuth initiation failed:",Oe);const ae=`https://accounts.google.com/oauth/authorize?client_id=${B.clientId}&redirect_uri=${encodeURIComponent(`${window.location.origin}/api/oauth/google-ads/callback`)}&scope=https://www.googleapis.com/auth/adwords&response_type=code&access_type=offline&prompt=consent&state=${pe._id}`;window.location.href=ae}}catch(pe){console.error("Failed to connect Google Ads:",pe),pe.message?.includes("already exists")?F("Google Ads integration already exists for this organization. Please disconnect first if you want to reconnect."):F(pe.message||"Failed to connect Google Ads. Please try again.")}finally{d(!1)}},ue=pe=>{window.confirm(`Are you sure you want to disconnect ${pe}? This will stop new leads from coming in.`)&&r(Oe=>Oe.map(ae=>ae.source===pe?{...ae,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:ae))},Ve=pe=>{b(Oe=>Oe.includes(pe)?Oe.filter(ae=>ae!==pe):[...Oe,pe])},Te=async()=>{if(y)try{await Me.updateGoogleAdsIntegration(y._id,{selectedCampaigns:x,updatedAt:new Date}),await Q(),K(`Campaigns saved successfully! ${x.length} campaigns selected.`)}catch(pe){console.error("Failed to save campaigns:",pe),F(pe.message||"Failed to save campaigns. Please try again.")}},Pe=async()=>{await Q()},Xe=async()=>{if(y)try{m(!0);const pe=await Me.testGoogleAdsIntegration(y._id);pe&&pe.connected?(K("Google Ads connection test successful! All accounts are working properly."),await Q()):F("Google Ads connection test failed. Please check your credentials and account permissions.")}catch(pe){console.error("Failed to test connection:",pe),F(pe.message||"Failed to test connection. Please try again.")}finally{m(!1)}};return t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Google Ads Integration"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Connect your Google Ads campaigns to capture leads and track conversions"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${q?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:q?.isConnected?"Connected":"Not Connected"})})]}),T&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[t.jsx("div",{className:"text-green-600",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success"}),t.jsx("p",{className:"text-sm text-green-700",children:T})]}),t.jsx("button",{onClick:()=>O(null),className:"text-green-600 hover:text-green-800",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[t.jsx("div",{className:"text-red-600",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),t.jsx("p",{className:"text-sm text-red-700",children:w})]}),t.jsx("button",{onClick:()=>E(null),className:"text-red-600 hover:text-red-800",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),q?.isConnected?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Campaign Selection"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Select which campaigns you want to track for lead generation"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:Te,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Save Selection"}),t.jsx("button",{onClick:Pe,disabled:u,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:u?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Refreshing..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]})]}),t.jsx("div",{className:"space-y-3",children:u?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600",children:"Loading campaigns..."})]}):p.length>0?p.map(pe=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",checked:x.includes(pe.id),onChange:()=>Ve(pe.id),className:"w-4 h-4 text-blue-600 rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-medium text-slate-800",children:pe.name}),pe.accountName&&t.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:pe.accountName})]}),t.jsxs("p",{className:"text-sm text-slate-600",children:["Status: ",pe.status,"  Impressions: ",pe.impressions?.toLocaleString()||0,"  Clicks: ",pe.clicks?.toLocaleString()||0,"  Conversions: ",pe.conversions||0]}),pe.budget&&t.jsxs("p",{className:"text-xs text-slate-500",children:["Budget: ",pe.budget.toFixed(2),pe.cost&&`  Cost: ${pe.cost.toFixed(2)}`]})]})]}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${pe.status==="ENABLED"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:pe.status})]},`${pe.accountId}-${pe.id}`)):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-slate-600",children:"No campaigns found. Connect your Google Ads account to load campaigns."})})})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Conversion Tracking"}),u?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600",children:"Loading conversion data..."})]}):S?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:Math.round(S.totalConversions||0)}),t.jsx("div",{className:"text-sm text-slate-600",children:"Total Conversions"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[S.conversionRate?S.conversionRate.toFixed(1):"0.0","%"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Conversion Rate"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:["",S.costPerConversion?S.costPerConversion.toFixed(2):"0.00"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Cost per Conversion"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:["",S.totalCost?S.totalCost.toFixed(2):"0.00"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Total Cost"})]})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-slate-600",children:"No conversion data available. Connect your Google Ads account and select campaigns to track conversions."})})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Account Management"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your connected Google Ads accounts"})]}),t.jsxs("button",{onClick:Z,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Manage Accounts (",j.length,")"]})]}),j.length>0&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[j.slice(0,3).map(pe=>t.jsx("div",{className:"p-3 border border-slate-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-slate-800 text-sm",children:pe.name||`Account ${pe.id}`}),t.jsxs("p",{className:"text-xs text-slate-600",children:["ID: ",pe.id]})]}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${pe.isActive!==!1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:pe.isActive!==!1?"Active":"Inactive"})]})},pe.id)),j.length>3&&t.jsx("div",{className:"p-3 border border-slate-200 rounded-lg flex items-center justify-center",children:t.jsxs("p",{className:"text-sm text-slate-600",children:["+",j.length-3," more accounts"]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("button",{onClick:Pe,disabled:u,className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:bg-slate-50 disabled:cursor-not-allowed transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync Campaigns"]}),t.jsx("div",{className:"text-xs text-slate-600",children:"Refresh campaign data"})]}),t.jsxs("button",{onClick:Xe,disabled:u||!q?.isConnected,className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:bg-slate-50 disabled:cursor-not-allowed transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Connection"]}),t.jsx("div",{className:"text-xs text-slate-600",children:"Verify API connection"})]}),t.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-slate-800 text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Reports"]}),t.jsx("div",{className:"text-xs text-slate-600",children:"Analytics dashboard"})]}),t.jsxs("button",{onClick:()=>ue("Google Ads"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-red-800 text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Disconnect"]}),t.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]})]}):t.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-orange-100 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-8 w-8 text-orange-600",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect Google Ads"}),t.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your Google Ads account to automatically capture leads from your campaigns and track conversion data."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("button",{onClick:_,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2",children:[t.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Setup API"]}),t.jsx("button",{onClick:ne,disabled:l||!B.clientId||!B.clientSecret,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Connect Google Ads Account"]})})]})]})}),t.jsx(yY,{isOpen:D,onClose:G,onSave:fe,onConnectAccount:Y,initialConfig:B}),t.jsx(bY,{isOpen:M,onClose:oe,accounts:j,onConnectAccount:le,onDisconnectAccount:ge,onToggleAccount:ve})]})},jY=({isOpen:e,onClose:r,onSubmit:n,isLoading:a=!1})=>{const[s,i]=N.useState(""),[l,d]=N.useState(""),u=p=>{p.preventDefault(),s.trim()&&l.trim()&&n(s.trim(),l.trim())},m=()=>{i(""),d(""),r()};return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:t.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:m})}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:t.jsxs("form",{onSubmit:u,children:[t.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:"Add New Form"}),t.jsx("button",{type:"button",onClick:m,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"formName",className:"block text-sm font-medium text-on-surface mb-2",children:"Form Name"}),t.jsx("input",{type:"text",id:"formName",value:s,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"e.g., Contact Form, Newsletter Signup",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"formUrl",className:"block text-sm font-medium text-on-surface mb-2",children:"Form URL"}),t.jsx("input",{type:"url",id:"formUrl",value:l,onChange:p=>d(p.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com/contact-form",required:!0})]})]})]}),t.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[t.jsx("button",{type:"button",onClick:m,disabled:a,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a||!s.trim()||!l.trim(),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:a?"Adding...":"Add Form"})]})]})})]})}):null},wY=({isOpen:e,onClose:r,onConfirm:n,title:a,message:s,confirmText:i="Confirm",cancelText:l="Cancel",isLoading:d=!1,type:u="danger"})=>{if(!e)return null;const m={danger:{button:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white",icon:"text-red-600 dark:text-red-400"},warning:{button:"bg-amber-600 hover:bg-amber-700 disabled:bg-amber-400 text-white",icon:"text-amber-600 dark:text-amber-400"},info:{button:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white",icon:"text-primary-600 dark:text-primary-400"}};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:t.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r})}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsxs("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:[t.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:a}),t.jsx("button",{onClick:r,className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`flex-shrink-0 ${m[u].icon}`,children:t.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u==="danger"&&t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}),u==="warning"&&t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}),u==="info"&&t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm text-on-surface",children:s})})]})]}),t.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[t.jsx("button",{type:"button",onClick:r,disabled:d,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors disabled:opacity-50",children:l}),t.jsx("button",{type:"button",onClick:n,disabled:d,className:`w-full sm:w-auto px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:cursor-not-allowed ${m[u].button}`,children:d?"Processing...":i})]})]})]})})},NY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),{addToast:l}=Xc(),[d,u]=N.useState(!1),[m,p]=N.useState(!1),[f,x]=N.useState(""),[b,y]=N.useState([]),[g,j]=N.useState(null),[k,S]=N.useState(null),[A,w]=N.useState([]),[E,T]=N.useState(null),[O,D]=N.useState(null),[I,M]=N.useState(!1),[L,B]=N.useState(!1),[z,W]=N.useState(!1),[R,H]=N.useState(""),U=e.find(Y=>Y.source==="Website");N.useEffect(()=>{U?.isConnected&&q()},[U]);const q=async()=>{if(U){p(!0),T(null);try{console.log("Loading website data for organization:",a?.id);const Y=await Me.getWebsiteIntegrations();console.log("Found integrations:",Y.length,Y.map(ue=>({id:ue._id,source:ue.source})));const ne=Y.find(ue=>ue.source==="Website");if(ne){console.log("Found website integration:",ne._id),j(ne),ne.additionalSettings?.trackingScript&&x(ne.additionalSettings.trackingScript),ne.connectedWebsites&&w(ne.connectedWebsites);try{const ue=await Me.getWebsiteAnalytics(ne._id);S(ue)}catch(ue){console.warn("Failed to load analytics:",ue)}try{const ue=await Me.getWebsiteFormPerformance(ne._id);ue&&ue.length>0?y(ue):ne.additionalSettings?.trackedForms?y(ne.additionalSettings.trackedForms):y([])}catch(ue){console.warn("Failed to load forms:",ue),ne.additionalSettings?.trackedForms&&y(ne.additionalSettings.trackedForms)}}else console.log("No website integration found")}catch(Y){console.error("Failed to load website data:",Y),T(Y.message||"Failed to load website data. Please try again.")}finally{p(!1)}}},Q=Y=>{D(Y),setTimeout(()=>D(null),5e3)},K=Y=>{T(Y),setTimeout(()=>T(null),5e3)},F=async()=>{u(!0);try{if(console.log("Starting tracking code generation..."),console.log("Current organization:",a?.id),console.log("Current integration:",g?._id),!a?.id)throw new Error("Organization ID is required");let Y;g?(Y=g,console.log("Using existing integration:",Y._id)):(console.log("Creating new website integration..."),Y=await Me.createWebsiteIntegration({name:"Website Integration",domains:A,apiEndpoint:`${window.location.origin}/api`}),console.log("Created integration:",Y?._id),j(Y)),console.log("Generating tracking code for integration:",Y._id);const ne=await Me.generateWebsiteTrackingCode(Y._id,{domains:A,apiEndpoint:`${window.location.origin}/api`});if(console.log("Tracking code generation result:",ne),console.log("Result keys:",Object.keys(ne||{})),console.log("Has trackingScript:",!!(ne&&ne.trackingScript)),console.log("Tracking script length:",ne?.trackingScript?.length||0),ne&&ne.trackingScript&&ne.trackingScript.trim().length>0)x(ne.trackingScript),Q("Tracking code generated successfully!");else throw console.error("No tracking script in result:",ne),console.error("Result details:",{hasResult:!!ne,hasTrackingScript:!!(ne&&ne.trackingScript),trackingScriptLength:ne?.trackingScript?.length||0,trackingScriptContent:ne?.trackingScript?.substring(0,200)||"empty"}),new Error("No tracking script returned from server")}catch(Y){console.error("Failed to generate tracking code:",Y),K(Y.message||"Failed to generate tracking code. Please try again.")}finally{u(!1)}},_=()=>{navigator.clipboard.writeText(f)},G=async()=>{if(g)try{p(!0),await Me.deactivateWebsiteIntegration(g._id),r(Y=>Y.map(ne=>ne.source==="Website"?{...ne,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:ne)),j(null),x(""),y([]),S(null),w([]),B(!1),Q("Website integration disconnected successfully!")}catch(Y){console.error("Failed to disconnect integration:",Y),K(Y.message||"Failed to disconnect integration. Please try again.")}finally{p(!1)}},Z=async Y=>{if(g)try{const ne=b.find(Te=>Te.id===Y);if(!ne)return;const ue=ne.status==="Active"?"Inactive":"Active";p(!0);const Ve=await Me.updateWebsiteForm(g._id,Y,{status:ue});Ve.success?(await q(),Q(`Form status updated to ${ue}`)):K(Ve.message||"Failed to update form status")}catch(ne){console.error("Failed to toggle form status:",ne),K(ne.message||"Failed to update form status. Please try again.")}finally{p(!1)}},oe=async()=>{await q()},le=async()=>{if(g)try{p(!0),(await Me.testWebsiteIntegration(g._id)).accessible?(Q("Website integration test successful!"),await q()):K("Website integration test failed. Please check your tracking code installation.")}catch(Y){console.error("Failed to test connection:",Y),K(Y.message||"Failed to test connection. Please try again.")}finally{p(!1)}},ge=Y=>{Y.preventDefault(),R.trim()&&!A.includes(R.trim())&&(w(ne=>[...ne,R.trim()]),H(""),W(!1),l({type:"success",title:"Domain Added",message:`Domain "${R.trim()}" has been added successfully.`}))},ve=()=>{M(!0)},fe=async(Y,ne)=>{if(g)try{p(!0);const ue=await Me.addWebsiteForm(g._id,{name:Y,url:ne});ue.success?(await q(),Q(`Form "${Y}" added successfully!`),M(!1)):K(ue.message||"Failed to add form")}catch(ue){console.error("Failed to add form:",ue),K(ue.message||"Failed to add form. Please try again.")}finally{p(!1)}};return t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Website Integration"}),t.jsx("p",{className:"text-subtle mt-1",children:"Track website forms and capture leads automatically"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${U?.isConnected?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:U?.isConnected?"Connected":"Not Connected"})})]}),O&&t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[t.jsx("div",{className:"text-green-600 dark:text-green-400",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Success"}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:O})]}),t.jsx("button",{onClick:()=>D(null),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E&&t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center gap-3",children:[t.jsx("div",{className:"text-red-600 dark:text-red-400",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:E})]}),t.jsx("button",{onClick:()=>T(null),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Tracking Code"}),t.jsx("p",{className:"text-subtle text-sm",children:"Install this code on your website to track forms"})]}),t.jsx("button",{onClick:F,disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l4-4m-4 4l-4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Code"]})})]}),f&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-background border border-muted rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-on-surface",children:"Tracking Script"}),t.jsx("button",{onClick:_,className:"text-xs bg-primary-600 hover:bg-primary-700 text-white font-bold py-1 px-2 rounded transition-colors",children:"Copy Code"})]}),t.jsx("pre",{className:"text-xs text-on-surface overflow-x-auto whitespace-pre-wrap",children:f})]}),t.jsxs("div",{className:"text-xs text-subtle",children:[t.jsx("p",{children:" Add this code before the closing head tag"}),t.jsx("p",{children:" Works with all major form builders (Contact Form 7, Gravity Forms, etc.)"})]})]})]}),t.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Connected Forms"}),t.jsx("p",{className:"text-subtle text-sm",children:"Manage your website forms and monitor submissions"})]}),t.jsx("button",{onClick:ve,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Add Form"})]}),t.jsx("div",{className:"space-y-3",children:m?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-subtle",children:"Loading forms..."})]}):b.length>0?b.map(Y=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-muted rounded-lg bg-background",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-on-surface text-sm",children:Y.name}),t.jsx("p",{className:"text-xs text-subtle truncate",children:Y.url}),t.jsxs("p",{className:"text-xs text-subtle",children:["Submissions: ",Y.totalSubmissions||0,"  Last Submission: ",Y.lastSubmission?new Date(Y.lastSubmission).toLocaleDateString():"Never"]}),Y.conversionRate&&t.jsxs("p",{className:"text-xs text-subtle",children:["Conversion Rate: ",Y.conversionRate.toFixed(1),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Y.status==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-muted text-subtle"}`,children:Y.status}),t.jsx("button",{onClick:()=>Z(Y.id),className:`text-xs font-bold py-1 px-2 rounded transition-colors ${Y.status==="Active"?"bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 hover:bg-green-200 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:Y.status==="Active"?"Disable":"Enable"})]})]},Y.id)):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-subtle",children:"No forms detected yet. Install the tracking code on your website to start capturing forms."})})})]})]}),t.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Website Performance"}),m?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),t.jsx("p",{className:"text-subtle",children:"Loading analytics..."})]}):k?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:k.totalForms||b.length}),t.jsx("div",{className:"text-sm text-subtle",children:"Total Forms"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:b.filter(Y=>Y.status==="Active").length}),t.jsx("div",{className:"text-sm text-subtle",children:"Active Forms"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:b.reduce((Y,ne)=>Y+(ne.totalSubmissions||0),0)}),t.jsx("div",{className:"text-sm text-subtle",children:"Total Submissions"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg bg-background",children:[t.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-1",children:[b.length>0?(b.reduce((Y,ne)=>Y+(ne.totalSubmissions||0),0)/b.length*100).toFixed(1):"0.0","%"]}),t.jsx("div",{className:"text-sm text-subtle",children:"Avg Conversion Rate"})]})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-subtle",children:"No analytics data available yet. Install the tracking code to start collecting data."})})]}),!U?.isConnected&&t.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-amber-600 dark:text-amber-400",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Website Not Connected"}),t.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Install the tracking code above to start capturing leads from your website forms."})]})]})}),t.jsxs("div",{className:"bg-surface rounded-lg border border-muted p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("button",{onClick:oe,disabled:m,className:"p-3 border border-muted rounded-lg hover:bg-background disabled:bg-background disabled:cursor-not-allowed transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-on-surface text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]}),t.jsx("div",{className:"text-xs text-subtle",children:"Reload analytics & forms"})]}),t.jsxs("button",{onClick:le,disabled:m||!U?.isConnected,className:"p-3 border border-muted rounded-lg hover:bg-background disabled:bg-background disabled:cursor-not-allowed transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-on-surface text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Integration"]}),t.jsx("div",{className:"text-xs text-subtle",children:"Verify tracking code"})]}),t.jsxs("button",{onClick:()=>B(!0),className:"p-3 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left",children:[t.jsxs("div",{className:"font-medium text-red-800 dark:text-red-400 text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Disconnect"]}),t.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Remove integration"})]})]})]}),t.jsx(jY,{isOpen:I,onClose:()=>M(!1),onSubmit:fe,isLoading:m}),t.jsx(wY,{isOpen:L,onClose:()=>B(!1),onConfirm:G,title:"Disconnect Website Integration",message:"Are you sure you want to disconnect the website integration? This will stop new leads from coming in and remove all associated data.",confirmText:"Disconnect",cancelText:"Cancel",type:"danger",isLoading:m}),z&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen p-2 sm:pt-4 sm:px-4 sm:pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:t.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:()=>W(!1)})}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),t.jsx("div",{className:"inline-block align-bottom bg-surface rounded-lg sm:rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle w-full max-w-lg sm:max-w-lg mx-2 border border-muted",children:t.jsxs("form",{onSubmit:ge,children:[t.jsxs("div",{className:"bg-surface px-3 sm:px-4 pt-3 sm:pt-5 pb-3 sm:pb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-on-surface pr-4",children:"Add Domain"}),t.jsx("button",{type:"button",onClick:()=>{W(!1),H("")},className:"flex-shrink-0 p-1 rounded-md text-subtle hover:text-on-surface hover:bg-muted transition-colors","aria-label":"Close modal",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{htmlFor:"domain",className:"block text-sm font-medium text-on-surface mb-2",children:"Domain Name"}),t.jsx("input",{type:"url",id:"domain",value:R,onChange:Y=>H(Y.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com",required:!0}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:"Enter the full URL including https://"})]})})]}),t.jsxs("div",{className:"bg-background px-3 sm:px-4 py-3 sm:py-4 flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 sm:justify-end",children:[t.jsx("button",{type:"button",onClick:()=>{W(!1),H("")},className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!R.trim()||A.includes(R.trim()),className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Add Domain"})]})]})})]})})]})},kY=({setting:e,onClose:r,onSave:n,onDisconnect:a,currentOrganization:s})=>{const[i,l]=N.useState({apiKey:e.apiKey||"",apiSecret:e.apiSecret||"",accountSid:e.accountSid||"",authToken:e.authToken||"",baseUrl:e.baseUrl||"",applicationId:e.applicationId||"",senderId:e.senderId||"",region:e.region||"us-east-1",connectionType:e.connectionType||"api_key",webhookUrl:e.webhookUrl||"",callbackUrl:e.callbackUrl||""}),[d,u]=N.useState(!1),[m,p]=N.useState(!1),[f,x]=N.useState(""),b=(S,A)=>{l(w=>({...w,[S]:A})),x("")},y=()=>{const S=i.apiKey.trim()||i.apiSecret.trim(),A=i.accountSid.trim()||i.authToken.trim(),w=i.applicationId.trim();return!S&&!A&&!w?(x("Please provide at least one form of authentication (API Key/Secret, Account SID/Token, or Application ID)"),!1):i.baseUrl&&!i.baseUrl.startsWith("http")?(x("Base URL must start with http:// or https://"),!1):!0},g=async()=>{if(y()){p(!0),x("");try{const S={organizationId:s?.id,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl};let A;e.id?A=await Me.updateCloudTelephonyIntegration(e.id,S):A=await Me.createCloudTelephonyIntegration(S);const w=await Me.testCloudTelephonyIntegration(A.id);w.success?alert("Connection test successful! Your telephony integration is working properly."):x(w.message||"Connection test failed")}catch(S){x(S.message||"Failed to test connection")}finally{p(!1)}}},j=async()=>{if(y()){u(!0),x("");try{const S={organizationId:s?.id,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl,status:"active"};let A;e.id?A=await Me.updateCloudTelephonyIntegration(e.id,S):A=await Me.createCloudTelephonyIntegration(S),await Me.activateCloudTelephonyIntegration(A.id),n({id:A.id,isConnected:!0,provider:"custom",apiKey:i.apiKey,apiSecret:i.apiSecret,accountSid:i.accountSid,authToken:i.authToken,baseUrl:i.baseUrl,applicationId:i.applicationId,senderId:i.senderId,region:i.region,connectionType:i.connectionType,webhookUrl:i.webhookUrl,callbackUrl:i.callbackUrl}),r()}catch(S){x(S.message||"Failed to connect telephony service")}finally{u(!1)}}},k=async()=>{if(!e.id){a(),r();return}try{await Me.deactivateCloudTelephonyIntegration(e.id),a(),r()}catch(S){x(S.message||"Failed to disconnect telephony service")}};return t.jsxs(it,{isOpen:!0,onClose:r,title:"Connect to Cloud Telephony",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-subtle text-sm",children:"Integrate with your cloud telephony provider to enable click-to-call, call logging, and more."}),f&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-red-600 text-sm",children:f})}),t.jsxs("div",{className:"p-4 bg-surface rounded-lg border border-muted space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Connection Type"}),t.jsxs("select",{value:i.connectionType,onChange:S=>b("connectionType",S.target.value),className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"api_key",children:"API Key & Secret"}),t.jsx("option",{value:"account_auth",children:"Account SID & Auth Token"}),t.jsx("option",{value:"application",children:"Application ID"}),t.jsx("option",{value:"oauth",children:"OAuth 2.0"})]})]}),i.connectionType==="api_key"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"API Key"}),t.jsx("input",{type:"text",value:i.apiKey,onChange:S=>b("apiKey",S.target.value),placeholder:"Enter your API Key",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"API Secret"}),t.jsx("input",{type:"password",value:i.apiSecret,onChange:S=>b("apiSecret",S.target.value),placeholder:"Enter your API Secret",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),i.connectionType==="account_auth"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Account SID"}),t.jsx("input",{type:"text",value:i.accountSid,onChange:S=>b("accountSid",S.target.value),placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Auth Token"}),t.jsx("input",{type:"password",value:i.authToken,onChange:S=>b("authToken",S.target.value),placeholder:"Enter your Auth Token",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),i.connectionType==="application"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Application ID"}),t.jsx("input",{type:"text",value:i.applicationId,onChange:S=>b("applicationId",S.target.value),placeholder:"Enter your Application ID",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Sender ID (Optional)"}),t.jsx("input",{type:"text",value:i.senderId,onChange:S=>b("senderId",S.target.value),placeholder:"YOUR_SENDER_ID",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Base URL"}),t.jsx("input",{type:"url",value:i.baseUrl,onChange:S=>b("baseUrl",S.target.value),placeholder:"https://api.your-provider.com",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:"Leave empty for default provider URL"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Region"}),t.jsxs("select",{value:i.region,onChange:S=>b("region",S.target.value),className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),t.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),t.jsx("option",{value:"eu-west-1",children:"EU West (Ireland)"}),t.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),t.jsx("option",{value:"ap-south-1",children:"Asia Pacific (Mumbai)"})]})]}),t.jsxs("div",{className:"border-t border-muted pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-subtle mb-3",children:"Webhook Configuration"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Webhook URL"}),t.jsx("input",{type:"url",value:i.webhookUrl,onChange:S=>b("webhookUrl",S.target.value),placeholder:"https://your-crm.com/webhooks/telephony",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:"URL to receive call and SMS events"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Callback URL (Optional)"}),t.jsx("input",{type:"url",value:i.callbackUrl,onChange:S=>b("callbackUrl",S.target.value),placeholder:"https://your-crm.com/callback",className:"block w-full bg-surface border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:"For delivery confirmations and status updates"})]})]})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{type:"button",onClick:g,disabled:m||d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Test Connection"]})})})]}),t.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-muted",children:[e.isConnected?t.jsx("button",{type:"button",onClick:k,disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Disconnect"}):t.jsx("div",{}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:j,disabled:d||m,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.isConnected?"Save Changes":"Connect"]})})]})]})]})},SY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=N.useState(!1),[u,m]=N.useState([]),[p,f]=N.useState({totalCalls:0,answered:0,avgDuration:"0m",conversionRate:0}),[x,b]=N.useState(!1),[y,g]=N.useState(!1),[j,k]=N.useState(!1),[S,A]=N.useState(!1),[w,E]=N.useState(null),[T,O]=N.useState(""),[D,I]=N.useState(!1),M=e.find(Z=>Z.source==="Cloud Telephony"),L=async()=>{if(M?.id){g(!0),O("");try{const Z=await Me.getCloudTelephonyPhoneNumbers(M.id);m(Z.map(oe=>({id:oe.id,number:oe.phoneNumber||oe.number,friendlyName:oe.friendlyName,capabilities:oe.capabilities,isActive:oe.isActive,status:oe.isActive?"Active":"Inactive",calls:0,type:oe.friendlyName||"Business"})))}catch(Z){O(Z.message||"Failed to fetch phone numbers")}finally{g(!1)}}},B=async()=>{if(M?.id){k(!0),O("");try{const Z=await Me.getCloudTelephonyAnalytics(M.id);f({totalCalls:Z.totalCalls||0,answered:Z.answered||0,avgDuration:Z.avgDuration||"0m",conversionRate:Z.conversionRate||0})}catch(Z){O(Z.message||"Failed to fetch analytics")}finally{k(!1)}}},z=async()=>{if(M?.id){A(!0),O("");try{const Z=await Me.getCloudTelephonyIVR(M.id);E(Z)}catch{console.log("IVR not configured yet")}finally{A(!1)}}};N.useEffect(()=>{M?.isConnected&&M?.id&&(L(),B(),z())},[M?.isConnected,M?.id]);const W=()=>{I(!0)},R=()=>{I(!1)},H=Z=>{q("Cloud Telephony",Z),I(!1)},U=()=>{Q("Cloud Telephony"),I(!1)},q=(Z,oe)=>r(le=>le.map(ge=>ge.source===Z?{...ge,...oe}:ge)),Q=async Z=>{if(!M?.id){r(oe=>oe.map(le=>le.source===Z?{...le,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:le));return}if(window.confirm(`Are you sure you want to disconnect ${Z}? This will stop call logging.`))try{await Me.deactivateCloudTelephonyIntegration(M.id),r(oe=>oe.map(le=>le.source===Z?{...le,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:le)),m([]),f({totalCalls:0,answered:0,avgDuration:"0m",conversionRate:0})}catch(oe){O(oe.message||"Failed to disconnect telephony")}},K=async Z=>{if(!M?.id)return;const oe=u.find(le=>le.id===Z);if(oe)try{await Me.updateCloudTelephonyPhoneNumber(M.id,Z,{isActive:!oe.isActive}),m(le=>le.map(ge=>ge.id===Z?{...ge,isActive:!ge.isActive,status:ge.isActive?"Inactive":"Active"}:ge))}catch(le){O(le.message||"Failed to update phone number")}},F=async()=>{if(!M?.id){O("Please connect your telephony service first");return}b(!0),O("");try{const Z=await Me.getCloudTelephonyPhoneNumbers(M.id);if(Z.length===0){const oe=prompt("Enter phone number (e.g., +1234567890):");if(!oe)return;const le=prompt("Enter friendly name (optional):"),ge=await Me.addCloudTelephonyPhoneNumber(M.id,{number:oe,friendlyName:le||void 0});m(ve=>[...ve,{id:ge.id,number:ge.phoneNumber||ge.number,friendlyName:ge.friendlyName,isActive:!0,status:"Active",calls:0,type:le||"Business"}])}else{const oe=Z.map((ve,fe)=>`${fe+1}. ${ve.phoneNumber||ve.number} ${ve.friendlyName?`(${ve.friendlyName})`:""}`).join(`
`),le=prompt(`Available numbers:
${oe}

Enter number to add (1-${Z.length}):`);if(!le)return;const ge=parseInt(le)-1;if(ge>=0&&ge<Z.length){const ve=Z[ge],fe=prompt("Enter friendly name (optional):",ve.friendlyName||""),Y=await Me.addCloudTelephonyPhoneNumber(M.id,{number:ve.phoneNumber||ve.number,friendlyName:fe||void 0});m(ne=>[...ne,{id:Y.id,number:Y.phoneNumber||Y.number,friendlyName:Y.friendlyName,isActive:!0,status:"Active",calls:0,type:fe||"Business"}])}}}catch(Z){O(Z.message||"Failed to add phone number")}finally{b(!1)}},_=async()=>{if(!M?.id){O("Please connect your telephony service first");return}const Z=prompt("Enter the number to call (e.g., +1234567890):");if(Z)try{await Me.makeTestCall(M.id,{to:Z,from:u.find(oe=>oe.isActive)?.number||"",message:"This is a test call from your CRM system."}),alert("Test call initiated successfully!")}catch(oe){O(oe.message||"Failed to make test call")}},G=async()=>{if(!M?.id){O("Please connect your telephony service first");return}const Z=prompt("Enter main menu prompt:","Press 1 for Sales, 2 for Support, 3 for Billing"),oe=prompt("Enter business hours:","Mon-Fri: 9AM-6PM, Sat: 10AM-4PM"),le=prompt("Enter after hours message:","Voicemail with callback option");if(!(!Z||!oe||!le))try{const ge={mainMenuPrompt:Z,businessHours:oe,afterHoursMessage:le,isEnabled:!0};await Me.updateCloudTelephonyIVR(M.id,ge),E(ge),alert("IVR configuration updated successfully!")}catch(ge){O(ge.message||"Failed to update IVR configuration")}};return t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-muted/50 rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5 text-on-surface",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Cloud Telephony Integration"}),t.jsx("p",{className:"text-subtle mt-1",children:"Track calls, manage IVR, and automate call routing"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${M?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:M?.isConnected?"Connected":"Not Connected"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Phone Numbers"}),t.jsx("p",{className:"text-subtle text-sm",children:"Manage your tracked phone numbers"})]}),t.jsx("button",{onClick:F,disabled:!M?.isConnected,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Add Number"})]}),T&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-red-600 text-sm",children:T})}),y?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),t.jsx("span",{className:"ml-2 text-subtle",children:"Loading phone numbers..."})]}):t.jsx("div",{className:"space-y-3",children:u.length===0?t.jsx("div",{className:"text-center py-8 text-subtle",children:M?.isConnected?"No phone numbers found. Add your first number to get started.":"Connect your telephony service to manage phone numbers."}):u.map(Z=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-muted rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-on-surface text-sm",children:Z.number}),t.jsxs("p",{className:"text-xs text-subtle",children:["Type: ",Z.type,"  Calls: ",Z.calls||0,Z.capabilities&&t.jsxs("span",{className:"ml-2",children:[Z.capabilities.sms&&" SMS",Z.capabilities.voice&&" Voice",Z.capabilities.mms&&" MMS"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Z.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:Z.status}),t.jsx("button",{onClick:()=>K(Z.id||""),disabled:!M?.isConnected,className:`text-xs font-bold py-1 px-2 rounded disabled:opacity-50 disabled:cursor-not-allowed ${Z.status==="Active"?"bg-red-100 hover:bg-red-200 text-red-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,children:Z.status==="Active"?"Disable":"Enable"})]})]},Z.id))})]}),t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"IVR Configuration"}),t.jsx("p",{className:"text-subtle text-sm",children:"Configure your interactive voice response system"})]}),t.jsx("button",{onClick:G,disabled:!M?.isConnected,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Configure IVR"})]}),S?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-subtle",children:"Loading IVR configuration..."})]}):w?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[t.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"Main Menu"}),t.jsx("p",{className:"text-xs text-subtle",children:w.mainMenuPrompt})]}),t.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[t.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"Business Hours"}),t.jsx("p",{className:"text-xs text-subtle",children:w.businessHours})]}),t.jsxs("div",{className:"p-3 border border-muted rounded-lg",children:[t.jsx("h4",{className:"font-medium text-on-surface text-sm",children:"After Hours"}),t.jsx("p",{className:"text-xs text-subtle",children:w.afterHoursMessage})]})]}):t.jsx("div",{className:"text-center py-8 text-subtle",children:M?.isConnected?'No IVR configuration found. Click "Configure IVR" to set up your interactive voice response system.':"Connect your telephony service to configure IVR."})]})]}),t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Call Analytics"}),j?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2 text-subtle",children:"Loading analytics..."})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-cyan-600 mb-1",children:p.totalCalls}),t.jsx("div",{className:"text-sm text-subtle",children:"Total Calls"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:p.answered}),t.jsx("div",{className:"text-sm text-subtle",children:"Answered"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:p.avgDuration}),t.jsx("div",{className:"text-sm text-subtle",children:"Avg. Duration"})]}),t.jsxs("div",{className:"text-center p-4 border border-muted rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[p.conversionRate,"%"]}),t.jsx("div",{className:"text-sm text-subtle",children:"Conversion Rate"})]})]})]}),M?.isConnected?t.jsxs("div",{className:"bg-background rounded-lg border border-muted p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("button",{onClick:_,disabled:!M?.isConnected,className:"p-3 border border-muted rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-on-surface text-sm",children:"Test Call"}),t.jsx("div",{className:"text-xs text-subtle",children:"Make test call"})]}),t.jsxs("button",{onClick:()=>i("/reports"),className:"p-3 border border-muted rounded-lg hover:bg-muted/50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-on-surface text-sm",children:"Call Reports"}),t.jsx("div",{className:"text-xs text-subtle",children:"View analytics"})]}),t.jsxs("button",{onClick:()=>Q("Cloud Telephony"),disabled:l,className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),t.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):t.jsx("div",{className:"bg-background rounded-lg border border-muted p-6",children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-8 w-8 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),t.jsx("h3",{className:"text-xl font-semibold text-on-surface mb-2",children:"Connect Cloud Telephony"}),t.jsx("p",{className:"text-subtle mb-6 max-w-md mx-auto",children:"Connect your cloud telephony system to automatically log calls, track call metrics, and manage IVR routing."}),t.jsx("button",{onClick:W,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Connect Telephony System"]})})]})}),D&&t.jsx(kY,{setting:M||{source:"Cloud Telephony",isConnected:!1,fieldMappings:[],organizationId:a?.id||""},onClose:R,onSave:H,onDisconnect:U,currentOrganization:a})]})},CY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=N.useState(!1),[u,m]=N.useState([{id:"1",name:"Welcome Series",status:"Active",subscribers:1245,sent:1245,opened:456,clicked:89},{id:"2",name:"Product Updates",status:"Active",subscribers:890,sent:890,opened:312,clicked:67},{id:"3",name:"Holiday Special",status:"Draft",subscribers:0,sent:0,opened:0,clicked:0}]),p=e.find(g=>g.source==="Email Marketing"),f=async()=>{d(!0);try{await new Promise(g=>setTimeout(g,2e3)),x("Email Marketing",{isConnected:!0})}catch(g){console.error("Failed to connect email marketing:",g)}finally{d(!1)}},x=(g,j)=>r(k=>k.map(S=>S.source===g?{...S,...j}:S)),b=g=>{window.confirm(`Are you sure you want to disconnect ${g}? This will stop email sync.`)&&r(j=>j.map(k=>k.source===g?{...k,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:k))},y=g=>{m(j=>j.map(k=>k.id===g?{...k,status:k.status==="Active"?"Paused":"Active"}:k))};return t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Email Marketing Integration"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Sync email campaigns and manage subscriber lists"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${p?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:p?.isConnected?"Connected":"Not Connected"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Email Lists"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your subscriber lists and segments"})]}),t.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create List"})]}),t.jsx("div",{className:"space-y-3",children:[{id:"1",name:"Newsletter Subscribers",count:1245,growth:"+12%"},{id:"2",name:"Product Updates",count:890,growth:"+8%"},{id:"3",name:"VIP Customers",count:234,growth:"+23%"},{id:"4",name:"Trial Users",count:567,growth:"+5%"}].map(g=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:g.name}),t.jsxs("p",{className:"text-xs text-slate-600",children:[g.count.toLocaleString()," subscribers"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-green-600 font-medium",children:g.growth}),t.jsx("button",{className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-1 px-2 rounded",children:"Edit"})]})]},g.id))})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Active Campaigns"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor your email campaign performance"})]}),t.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"New Campaign"})]}),t.jsx("div",{className:"space-y-3",children:u.map(g=>t.jsxs("div",{className:"p-3 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:g.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:g.status}),t.jsx("button",{onClick:()=>y(g.id),className:`text-xs font-bold py-1 px-2 rounded ${g.status==="Active"?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,children:g.status==="Active"?"Pause":"Activate"})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-slate-800",children:g.sent.toLocaleString()}),t.jsx("div",{className:"text-slate-600",children:"Sent"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-slate-800",children:g.opened.toLocaleString()}),t.jsx("div",{className:"text-slate-600",children:"Opened"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-medium text-slate-800",children:g.clicked}),t.jsx("div",{className:"text-slate-600",children:"Clicked"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"font-medium text-green-600",children:[g.sent>0?Math.round(g.opened/g.sent*100):0,"%"]}),t.jsx("div",{className:"text-slate-600",children:"Open Rate"})]})]})]},g.id))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Email Performance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"12,450"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Total Emails Sent"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"24.8%"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Average Open Rate"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"4.2%"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Click Rate"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"2.1%"}),t.jsx("div",{className:"text-sm text-slate-600",children:"Unsubscribe Rate"})]})]})]}),p?.isConnected?t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Send Test Email"}),t.jsx("div",{className:"text-xs text-slate-600",children:"Test email delivery"})]}),t.jsxs("button",{className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"View Reports"}),t.jsx("div",{className:"text-xs text-slate-600",children:"Email analytics"})]}),t.jsxs("button",{onClick:()=>b("Email Marketing"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),t.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):t.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect Email Platform"}),t.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your email marketing platform to sync subscriber lists, campaigns, and track email performance."}),t.jsx("button",{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Connect Email Platform"]})})]})})]})},gu=[{id:"twilio",name:"Twilio",logo:"",description:"Connect your Twilio account for SMS marketing",fields:[{name:"accountSid",label:"Account SID",type:"text",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",required:!0},{name:"authToken",label:"Auth Token",type:"password",placeholder:"Enter your auth token",required:!0},{name:"fromNumber",label:"From Number",type:"text",placeholder:"+1234567890",required:!0}]},{id:"msg91",name:"MSG91",logo:"",description:"Connect your MSG91 account for SMS marketing",fields:[{name:"apiKey",label:"API Key",type:"password",placeholder:"Enter your MSG91 API key",required:!0},{name:"senderId",label:"Sender ID",type:"text",placeholder:"YOURBRAND",required:!0}]},{id:"textlocal",name:"TextLocal",logo:"",description:"Connect your TextLocal account for SMS marketing",fields:[{name:"apiKey",label:"API Key",type:"password",placeholder:"Enter your TextLocal API key",required:!0},{name:"senderId",label:"Sender ID",type:"text",placeholder:"YOURBRAND",required:!0}]}],AY=({isOpen:e,onClose:r,onConnect:n,organizationId:a})=>{const[s,i]=N.useState(gu[0]),[l,d]=N.useState({}),[u,m]=N.useState(!1),[p,f]=N.useState(null),x=(g,j)=>{d(k=>({...k,[g]:j}))},b=async()=>{m(!0),f(null);try{const g=s.fields.filter(S=>S.required&&!l[S.name]).map(S=>S.label);if(g.length>0)throw new Error(`Please fill in: ${g.join(", ")}`);const j={organizationId:a,provider:s.id,name:`${s.name} SMS`,credentials:l,settings:{dailyLimit:1e3,rateLimit:10}},k=await Me.createSMSIntegration(j);if(k.success)n(k.data),r(),d({}),i(gu[0]);else throw new Error(k.message||"Failed to create SMS integration")}catch(g){console.error("SMS connection error:",g),f(g.message||"Failed to connect SMS provider")}finally{m(!1)}},y=()=>{u||(d({}),i(gu[0]),f(null),r())};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Connect SMS Provider"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Choose your SMS provider and enter your credentials"})]}),t.jsx("button",{onClick:y,disabled:u,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 border-b border-slate-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Choose SMS Provider"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:gu.map(g=>t.jsxs("button",{onClick:()=>i(g),className:`p-4 border-2 rounded-lg text-left transition-all ${s.id===g.id?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-2xl",children:g.logo}),t.jsx("span",{className:"font-semibold text-slate-800",children:g.name})]}),t.jsx("p",{className:"text-sm text-slate-600",children:g.description})]},g.id))})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["Configure ",s.name]}),p&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-red-800 font-medium",children:p})]})}),t.jsx("div",{className:"space-y-4",children:s.fields.map(g=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[g.label,g.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{type:g.type,value:l[g.name]||"",onChange:j=>x(g.name,j.target.value),placeholder:g.placeholder,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:u})]},g.name))}),t.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Where to find your credentials:"}),t.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[s.id==="twilio"&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:" Account SID and Auth Token are in your Twilio Console  Account Info"}),t.jsx("p",{children:" From Number should be a Twilio phone number you own"})]}),s.id==="msg91"&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:" API Key is available in your MSG91 Dashboard  API Keys"}),t.jsx("p",{children:" Sender ID is your registered sender ID with MSG91"})]}),s.id==="textlocal"&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:" API Key is available in your TextLocal Dashboard  Settings  API Keys"}),t.jsx("p",{children:" Sender ID is your registered sender name with TextLocal"})]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[t.jsx("button",{onClick:y,disabled:u,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:b,disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:u?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Connect Provider"]})})]})]})}):null},EY=({isOpen:e,onClose:r,organizationId:n,phoneLists:a})=>{const[s,i]=N.useState({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),[l,d]=N.useState(!1),[u,m]=N.useState(!1),[p,f]=N.useState(null),[x,b]=N.useState(null),y=(S,A)=>{i(w=>({...w,[S]:A}))},g=async()=>{if(!s.name||!s.message||!s.phoneListId){f("Please fill in all required fields");return}d(!0),f(null),b(null);try{const S={organizationId:n,name:s.name,message:s.message,listId:s.phoneListId,senderId:s.senderId||void 0,scheduledDate:u&&s.scheduledDate?s.scheduledDate:void 0},A=await Me.sendBulkSMS(S);if(A.success)b(`SMS campaign "${s.name}" ${u?"scheduled":"sent"} successfully!`),setTimeout(()=>{i({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),m(!1),r()},2e3);else throw new Error(A.message||"Failed to send SMS campaign")}catch(S){console.error("SMS campaign error:",S),f(S.message||"Failed to send SMS campaign")}finally{d(!1)}},j=()=>{l||(i({name:"",message:"",phoneListId:"",scheduledDate:"",senderId:""}),m(!1),f(null),b(null),r())},k=a.find(S=>S.id===s.phoneListId);return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Create SMS Campaign"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Send SMS messages to your subscribers"})]}),t.jsx("button",{onClick:j,disabled:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Campaign Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s.name,onChange:S=>y("name",S.target.value),placeholder:"e.g., Welcome Message Campaign",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Phone List ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:s.phoneListId,onChange:S=>y("phoneListId",S.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l,children:[t.jsx("option",{value:"",children:"Select a phone list"}),a.map(S=>t.jsxs("option",{value:S.id,children:[S.name," (",S.totalContacts||0," contacts)"]},S.id))]}),k&&t.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[k.totalContacts||0," subscribers will receive this message"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Message ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:s.message,onChange:S=>y("message",S.target.value),placeholder:"Enter your SMS message (160 characters max for single SMS)",rows:4,maxLength:160,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l}),t.jsxs("div",{className:"flex justify-between items-center mt-1",children:[t.jsxs("p",{className:"text-sm text-slate-600",children:["Use ","{{name}}"," for personalization"]}),t.jsxs("p",{className:`text-sm ${s.message.length>160?"text-red-600":"text-slate-600"}`,children:[s.message.length,"/160"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sender ID (Optional)"}),t.jsx("input",{type:"text",value:s.senderId,onChange:S=>y("senderId",S.target.value),placeholder:"e.g., YOURBRAND",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l}),t.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Leave empty to use default sender ID"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"scheduleCampaign",checked:u,onChange:S=>m(S.target.checked),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",disabled:l}),t.jsx("label",{htmlFor:"scheduleCampaign",className:"text-sm font-medium text-slate-700",children:"Schedule for later"})]}),u&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Schedule Date & Time"}),t.jsx("input",{type:"datetime-local",value:s.scheduledDate,onChange:S=>y("scheduledDate",S.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l})]})]}),p&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-red-800 font-medium",children:p})]})}),x&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("p",{className:"text-green-800 font-medium",children:x})]})}),s.name&&s.message&&s.phoneListId&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Campaign Preview"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",s.name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Recipients:"})," ",k?.name," (",k?.totalContacts||0," contacts)"]}),t.jsx("p",{children:t.jsx("strong",{children:"Message:"})}),t.jsx("div",{className:"bg-white p-3 rounded border text-slate-700 font-mono",children:s.message}),u&&s.scheduledDate&&t.jsxs("p",{children:[t.jsx("strong",{children:"Scheduled:"})," ",new Date(s.scheduledDate).toLocaleString()]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[t.jsx("button",{onClick:j,disabled:l,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:g,disabled:l||!s.name||!s.message||!s.phoneListId,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u?"Scheduling...":"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),u?"Schedule Campaign":"Send Campaign"]})})]})]})}):null},OY=({isOpen:e,onClose:r,onListCreated:n,organizationId:a})=>{const[s,i]=N.useState(""),[l,d]=N.useState(""),[u,m]=N.useState("US"),[p,f]=N.useState(!1),[x,b]=N.useState(null),y=async()=>{if(!s.trim()){b("Please enter a list name");return}f(!0),b(null);try{const j={organizationId:a,name:s.trim(),description:l.trim(),country:u},k=await Me.createSMSPhoneList(j);if(k.success)i(""),d(""),m("US"),n(),r();else throw new Error(k.message||"Failed to create phone list")}catch(j){console.error("Phone list creation error:",j),b(j.message||"Failed to create phone list")}finally{f(!1)}},g=()=>{p||(i(""),d(""),m("US"),b(null),r())};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Create Phone List"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Create a new SMS subscriber list"})]}),t.jsx("button",{onClick:g,disabled:p,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["List Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:s,onChange:j=>i(j.target.value),placeholder:"e.g., VIP Customers",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:p})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description (Optional)"}),t.jsx("textarea",{value:l,onChange:j=>d(j.target.value),placeholder:"Brief description of this list",rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:p})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),t.jsxs("select",{value:u,onChange:j=>m(j.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:p,children:[t.jsx("option",{value:"US",children:"United States"}),t.jsx("option",{value:"IN",children:"India"}),t.jsx("option",{value:"UK",children:"United Kingdom"}),t.jsx("option",{value:"CA",children:"Canada"}),t.jsx("option",{value:"AU",children:"Australia"}),t.jsx("option",{value:"DE",children:"Germany"}),t.jsx("option",{value:"FR",children:"France"}),t.jsx("option",{value:"JP",children:"Japan"}),t.jsx("option",{value:"BR",children:"Brazil"}),t.jsx("option",{value:"MX",children:"Mexico"})]})]}),x&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-red-800 font-medium",children:x})]})}),s&&t.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"List Preview"}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",s]}),l&&t.jsxs("p",{children:[t.jsx("strong",{children:"Description:"})," ",l]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Country:"})," ",u]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Initial Contacts:"})," 0"]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[t.jsx("button",{onClick:g,disabled:p,className:"px-4 py-2 text-slate-700 hover:text-slate-900 font-medium disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:y,disabled:p||!s.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:cursor-not-allowed",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create List"]})})]})]})}):null},TY=({settings:e,setSettings:r,customFieldDefs:n,currentOrganization:a,onSendTestLead:s})=>{const i=An(),[l,d]=N.useState(!1),[u,m]=N.useState(!0),[p,f]=N.useState(null),[x,b]=N.useState([]),[y,g]=N.useState(null),[j,k]=N.useState(null),[S,A]=N.useState(!1),[w,E]=N.useState(!1),[T,O]=N.useState(!1),D=e.find(W=>W.source==="SMS Marketing");N.useEffect(()=>{I()},[a]);const I=async()=>{if(a?.id){m(!0),f(null);try{const[W,R,H]=await Promise.all([Me.getSMSPhoneLists(a.id),Me.getSMSBalance(a.id),Me.getSMSAnalytics(a.id)]);b(W||[]),g(R||null),k(H||null)}catch(W){console.error("Error loading SMS data:",W),f("Failed to load SMS data. Please try again.")}finally{m(!1)}}},M=()=>{A(!0)},L=async W=>{B("SMS Marketing",{isConnected:!0,connectedAccounts:[W]}),await I()},B=(W,R)=>r(H=>H.map(U=>U.source===W?{...U,...R}:U)),z=W=>{window.confirm(`Are you sure you want to disconnect ${W}? This will stop SMS campaigns.`)&&r(R=>R.map(H=>H.source===W?{...H,isConnected:!1,connectedAccounts:[],connectedWebsites:[]}:H))};return u&&!D?.isConnected?t.jsx("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600",children:"Loading SMS integration..."})]})})}):t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"SMS Marketing Integration"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Send SMS campaigns and manage subscriber lists"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1.5 text-sm font-medium rounded-full ${D?.isConnected?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:l?"Connecting...":D?.isConnected?"Connected":"Not Connected"})})]}),p&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-red-800 font-medium",children:p})]}),t.jsx("button",{onClick:()=>f(null),className:"text-red-600 hover:text-red-800",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Phone Lists"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Manage your SMS subscriber lists"})]}),t.jsx("button",{onClick:()=>O(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create List"})]}),t.jsx("div",{className:"space-y-3",children:u?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto mb-2"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Loading phone lists..."})]}):p?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-red-600 text-sm mb-2",children:p}),t.jsx("button",{onClick:I,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Try Again"})]}):x.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-slate-600 mb-4",children:"No phone lists found"}),t.jsx("button",{onClick:()=>O(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create Your First List"})]}):x.map(W=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:W.name}),t.jsxs("p",{className:"text-xs text-slate-600",children:[W.totalContacts?.toLocaleString()||0," subscribers  ",W.country]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("button",{onClick:()=>alert(`Edit functionality for ${W.name} - Coming soon!`),className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 font-bold py-1 px-2 rounded",children:"Edit"})})]},W.id))})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"SMS Balance"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor your SMS credits and usage"})]}),t.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Buy Credits"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-slate-800",children:"Available Credits"}),t.jsx("p",{className:"text-sm text-slate-600",children:"SMS messages remaining"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:u?"...":y?.credits||0}),t.jsx("div",{className:"text-xs text-slate-600",children:"credits"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"text-center p-3 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:u?"...":y?.usedThisMonth||0}),t.jsx("div",{className:"text-xs text-slate-600",children:"Sent (30 days)"})]}),t.jsxs("div",{className:"text-center p-3 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-lg font-bold text-green-600 mb-1",children:[u?"...":(j?.deliveryRate||0).toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-slate-600",children:"Delivery Rate"})]})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"SMS Performance"}),u?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"}),t.jsx("p",{className:"text-slate-600",children:"Loading SMS performance data..."})]}):p?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-2",children:p}),t.jsx("button",{onClick:I,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Try Again"})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-indigo-600 mb-1",children:j?.totalSent||0}),t.jsx("div",{className:"text-sm text-slate-600",children:"Total SMS Sent"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[j?.deliveryRate?.toFixed(1)||"0.0","%"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Delivery Rate"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[j?.clickRate?.toFixed(1)||"0.0","%"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Click Rate"})]}),t.jsxs("div",{className:"text-center p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[j?.optOutRate?.toFixed(1)||"0.0","%"]}),t.jsx("div",{className:"text-sm text-slate-600",children:"Opt-out Rate"})]})]})]}),D?.isConnected?t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("button",{onClick:()=>E(!0),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Create Campaign"}),t.jsx("div",{className:"text-xs text-slate-600",children:"Send SMS campaign"})]}),t.jsxs("button",{onClick:()=>alert("Test SMS functionality - Coming soon!"),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"Send Test SMS"}),t.jsx("div",{className:"text-xs text-slate-600",children:"Test message delivery"})]}),t.jsxs("button",{onClick:()=>i("/reports"),className:"p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-slate-800 text-sm",children:"View Reports"}),t.jsx("div",{className:"text-xs text-slate-600",children:"SMS analytics"})]}),t.jsxs("button",{onClick:()=>z("SMS Marketing"),className:"p-3 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left",children:[t.jsx("div",{className:"font-medium text-red-800 text-sm",children:"Disconnect"}),t.jsx("div",{className:"text-xs text-red-600",children:"Remove integration"})]})]})]}):t.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:t.jsx("svg",{className:"h-8 w-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Connect SMS Platform"}),t.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"Connect your SMS marketing platform to send campaigns, manage subscriber lists, and track delivery."}),t.jsx("button",{onClick:M,disabled:l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg text-sm flex items-center gap-2 mx-auto",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Connect SMS Platform"]})})]})}),t.jsx(AY,{isOpen:S,onClose:()=>A(!1),onConnect:L,organizationId:a?.id||""}),t.jsx(EY,{isOpen:w,onClose:()=>E(!1),organizationId:a?.id||"",phoneLists:x}),t.jsx(OY,{isOpen:T,onClose:()=>O(!1),onListCreated:I,organizationId:a?.id||""})]})},PY=({settings:e,setSettings:r,webhooks:n,onAddWebhook:a,onDeleteWebhook:s,onUpdateWebhook:i,onTestWebhook:l,currentOrganization:d})=>{const u=An(),[m,p]=N.useState(!1),[f,x]=N.useState(!1),[b,y]=N.useState(!1),[g,j]=N.useState(null),[k,S]=N.useState(!1),[A,w]=N.useState(!1),[E,T]=N.useState(!1),[O,D]=N.useState({name:"",url:"",events:["lead.created","lead.updated"],isEnabled:!0});N.useEffect(()=>{I()},[]);const I=async(q=!1)=>{try{w(!0);const Q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!Q){console.error("No token found in localStorage");return}const K=Q.split(".");if(K.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",K.length);return}const F=await fetch(q?"https://crm.clienn.com/api/settings/api-key?unmasked=true":"https://crm.clienn.com/api/settings/api-key",{headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}});if(!F.ok){const G=await F.text();console.error("API Key fetch failed:",{status:F.status,statusText:F.statusText,error:G});return}const _=await F.json();console.log("API Key fetch response:",_),_.success?(j(_.data),q&&_.data.fullApiKey&&(S(!0),setTimeout(()=>S(!1),5e3))):console.error("API Key fetch returned error:",_.message)}catch(Q){console.error("Error fetching API key:",Q)}finally{w(!1)}},M=async()=>{try{p(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Generating API key with valid JWT token");const K=await fetch("https://crm.clienn.com/api/settings/api-key/generate",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!K.ok){const _=await K.text();console.error("Generate API key failed:",{status:K.status,statusText:K.statusText,error:_}),alert(`Failed to generate API key: ${K.statusText}`);return}const F=await K.json();console.log("Generate API key response:",F),F.success?(j(F.data),alert("API key generated successfully!")):alert(`Failed to generate API key: ${F.message}`)}catch(q){console.error("Error generating API key:",q),alert("Error generating API key. Please try again.")}finally{p(!1)}},L=async()=>{if(window.confirm("Are you sure you want to regenerate the API key? The old key will be invalidated immediately."))try{x(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Regenerating API key with valid JWT token");const K=await fetch("https://crm.clienn.com/api/settings/api-key/regenerate",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!K.ok){const _=await K.text();console.error("Regenerate API key failed:",{status:K.status,statusText:K.statusText,error:_}),alert(`Failed to regenerate API key: ${K.statusText}`);return}const F=await K.json();console.log("Regenerate API key response:",F),F.success?(j(F.data),alert("API key regenerated successfully!")):alert(`Failed to regenerate API key: ${F.message}`)}catch(q){console.error("Error regenerating API key:",q),alert("Error regenerating API key. Please try again.")}finally{x(!1)}},B=async()=>{if(window.confirm("Are you sure you want to revoke the API key? This will disable API access immediately."))try{y(!0);const q=localStorage.getItem("token")||localStorage.getItem("authToken");if(!q){console.error("No authentication token found"),alert("Authentication token not found. Please log in again.");return}const Q=q.split(".");if(Q.length!==3){console.error("Invalid token format. Expected JWT with 3 parts, got:",Q.length),alert("Invalid authentication token format. Please log in again.");return}console.log("Revoking API key with valid JWT token");const K=await fetch("https://crm.clienn.com/api/settings/api-key/revoke",{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});if(!K.ok){const _=await K.text();console.error("Revoke API key failed:",{status:K.status,statusText:K.statusText,error:_}),alert(`Failed to revoke API key: ${K.statusText}`);return}const F=await K.json();console.log("Revoke API key response:",F),F.success?(j(F.data),alert("API key revoked successfully!")):alert(`Failed to revoke API key: ${F.message}`)}catch(q){console.error("Error revoking API key:",q),alert("Error revoking API key. Please try again.")}finally{y(!1)}},z=()=>{g?.apiKey&&(navigator.clipboard.writeText(k?g.apiKey:g.apiKey.substring(0,8)+"..."+g.apiKey.substring(g.apiKey.length-4)),alert("API key copied to clipboard!"))},W=()=>{I(!0)},R=()=>{O.name.trim()&&O.url.trim()&&(a(O),D({name:"",url:"",events:["lead.created","lead.updated"],isEnabled:!0}),T(!1))},H=async q=>{try{const Q=await l(q);console.log("Webhook test result:",Q)}catch(Q){console.error("Webhook test failed:",Q)}},U=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"}];return t.jsxs("div",{className:"space-y-6 h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u("/settings/integrations"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"API & Webhooks"}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Manage your API keys and webhook configurations"})]})]}),t.jsxs("button",{onClick:()=>window.open("/api-docs","_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"View API Documentation"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"API Key Management"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Generate and manage your organization API keys"})]}),t.jsx("button",{onClick:M,disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2",children:m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Generate Key"]})})]}),g&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Your API Key"}),t.jsxs("div",{className:"flex gap-2",children:[!k&&t.jsx("button",{onClick:W,className:"text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",children:"Show Full Key"}),t.jsx("button",{onClick:z,className:"text-xs bg-slate-600 hover:bg-slate-700 text-white font-bold py-1 px-2 rounded",children:"Copy Key"})]})]}),t.jsx("code",{className:"text-xs text-slate-600 break-all",children:k?g.apiKey:g.apiKey.substring(0,8)+"..."+g.apiKey.substring(g.apiKey.length-4)}),k&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Full key visible for 5 seconds"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:L,disabled:f,className:"text-xs bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 disabled:cursor-not-allowed text-white font-bold py-1 px-3 rounded flex items-center gap-1",children:f?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Regenerating..."]}):"Regenerate Key"}),t.jsx("button",{onClick:B,disabled:b,className:"text-xs bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:cursor-not-allowed text-white font-bold py-1 px-3 rounded flex items-center gap-1",children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Revoking..."]}):"Revoke Key"})]}),t.jsxs("div",{className:"text-xs text-slate-600",children:[t.jsx("p",{children:" Keep this key secure and don't share it publicly"}),t.jsx("p",{children:" Use this key to authenticate API requests"}),t.jsx("p",{children:" Regenerate to invalidate the old key"}),t.jsx("p",{children:" Revoke to disable API access completely"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Webhook Management"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Create and manage webhooks for real-time notifications"})]}),t.jsx("button",{onClick:()=>T(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Create Webhook"})]}),E&&t.jsxs("div",{className:"space-y-4 p-4 border border-slate-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook Name"}),t.jsx("input",{type:"text",value:O.name,onChange:q=>D(Q=>({...Q,name:q.target.value})),placeholder:"e.g., Zapier Integration",className:"w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook URL"}),t.jsx("input",{type:"url",value:O.url,onChange:q=>D(Q=>({...Q,url:q.target.value})),placeholder:"https://your-app.com/webhook",className:"w-full bg-white border border-slate-300 rounded-md py-2 px-3 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Events"}),t.jsx("div",{className:"space-y-2",children:U.map(q=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:O.events.includes(q.value),onChange:Q=>{Q.target.checked?D(K=>({...K,events:[...K.events,q.value]})):D(K=>({...K,events:K.events.filter(F=>F!==q.value)}))},className:"mr-2"}),t.jsx("span",{className:"text-sm",children:q.label})]},q.value))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Create"}),t.jsx("button",{onClick:()=>T(!1),className:"bg-slate-300 hover:bg-slate-400 text-slate-700 font-bold py-2 px-3 rounded text-sm",children:"Cancel"})]})]}),t.jsx("div",{className:"space-y-3 mt-4",children:n.slice(0,2).map(q=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-slate-800 text-sm",children:q.name}),t.jsx("p",{className:"text-xs text-slate-600 truncate",children:q.url})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>H(q.id),className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 font-bold py-1 px-2 rounded",children:"Test"}),t.jsx("button",{onClick:()=>s(q.id),className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 font-bold py-1 px-2 rounded",children:"Delete"})]})]},q.id))})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Links"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("button",{onClick:()=>window.open("/api-docs","_blank"),className:"p-4 bg-gradient-to-br from-primary-50 to-primary-100 border border-primary-200 rounded-lg hover:from-primary-100 hover:to-primary-200 hover:border-primary-300 transition-all duration-200 text-left group shadow-sm hover:shadow-md",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-primary-200 rounded-lg group-hover:bg-primary-300 transition-colors",children:t.jsx("svg",{className:"h-6 w-6 text-primary-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-slate-800 group-hover:text-primary-800 transition-colors",children:"API Documentation"}),t.jsx("p",{className:"text-sm text-slate-600 group-hover:text-primary-700 transition-colors",children:"Complete API reference and guides"})]})]})}),t.jsx("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-100 border border-green-200 rounded-lg shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:t.jsx("svg",{className:"h-6 w-6 text-green-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-slate-800",children:"Webhook Testing"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Test your webhook endpoints"})]})]})})]})]})]})},n6=()=>{const e=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"lead.deleted",label:"Lead Deleted"},{value:"lead.stage_changed",label:"Stage Changed"},{value:"lead.assigned",label:"Lead Assigned"},{value:"lead.received",label:"Lead Received"}];return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"text-blue-600 bg-blue-50 p-3 rounded-xl",children:t.jsx(V.Code,{className:"h-8 w-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"API Documentation"}),t.jsx("p",{className:"text-xl text-gray-600 mt-2",children:"Integrate with Clienn CRM using our REST API and webhooks"})]})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:t.jsxs("div",{className:"space-y-12",children:[t.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Quick Start"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Authentication"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Use your API key in the Authorization header"}),t.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"Authorization: Bearer YOUR_API_KEY"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText("Authorization: Bearer YOUR_API_KEY"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Header"})]}),t.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Base URL"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"All API requests should use this base URL"}),t.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"https://crm.clienn.com/api"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText("https://crm.clienn.com/api"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Base URL"})]}),t.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Rate Limits"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"API rate limiting information"}),t.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[t.jsx("p",{children:" 1000 requests per hour"}),t.jsx("p",{children:" 100 requests per minute"})]})]}),t.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Content Type"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Use JSON for request bodies"}),t.jsx("code",{className:"text-xs bg-gray-100 p-3 rounded block text-gray-800",children:"Content-Type: application/json"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText("Content-Type: application/json"),className:"mt-3 text-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded",children:"Copy Header"})]})]})]}),t.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"API Endpoints"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Leads"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"GET /api/leads"}),t.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium",children:"GET"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Retrieve all leads with optional filtering"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsx("code",{className:"text-sm text-gray-800",children:"GET https://crm.clienn.com/api/leads"})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Query Parameters:"}),t.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[t.jsxs("li",{children:[t.jsx("code",{children:"limit"})," - Number of leads to return (default: 50)"]}),t.jsxs("li",{children:[t.jsx("code",{children:"offset"})," - Number of leads to skip (default: 0)"]}),t.jsxs("li",{children:[t.jsx("code",{children:"stage"})," - Filter by lead stage"]}),t.jsxs("li",{children:[t.jsx("code",{children:"assignedTo"})," - Filter by assigned user ID"]})]})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"POST /api/leads"}),t.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:"POST"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new lead"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:t.jsx("code",{className:"text-sm text-gray-800",children:"POST https://crm.clienn.com/api/leads"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),t.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "name": "John Doe",
  "email": "john@example.com",
  "phone": "+1234567890",
  "source": "website",
  "notes": "Interested in our services"
}`})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["PUT /api/leads/","{id}"]}),t.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-3 py-1 rounded-full font-medium",children:"PUT"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Update an existing lead"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:t.jsx("code",{className:"text-sm text-gray-800",children:"PUT https://crm.clienn.com/api/leads/123"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),t.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "stage": "Contacted",
  "notes": "Updated contact information"
}`})]})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["DELETE /api/leads/","{id}"]}),t.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-3 py-1 rounded-full font-medium",children:"DELETE"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Delete a lead"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsx("code",{className:"text-sm text-gray-800",children:"DELETE https://crm.clienn.com/api/leads/123"})})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Webhooks"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"GET /api/webhooks"}),t.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium",children:"GET"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"List all webhooks"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsx("code",{className:"text-sm text-gray-800",children:"GET https://crm.clienn.com/api/webhooks"})})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"POST /api/webhooks"}),t.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:"POST"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new webhook"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:t.jsx("code",{className:"text-sm text-gray-800",children:"POST https://crm.clienn.com/api/webhooks"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Request Body:"}),t.jsx("pre",{className:"text-xs bg-gray-100 p-3 rounded text-gray-800 overflow-x-auto",children:`{
  "name": "My Webhook",
  "url": "https://myapp.com/webhook",
  "events": ["lead.created", "lead.updated"],
  "isEnabled": true
}`})]})]})]})]})]})]}),t.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Webhook Events"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Webhooks are sent as POST requests to your configured URLs with JSON payloads. Each webhook includes an HMAC signature for verification."}),t.jsx("div",{className:"space-y-6",children:e.map(r=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.label}),t.jsxs("p",{className:"text-gray-600 mb-4",children:[r.value==="lead.created"&&"Triggered when a new lead is created in the CRM",r.value==="lead.updated"&&"Triggered when a lead's information is updated",r.value==="lead.deleted"&&"Triggered when a lead is deleted from the CRM",r.value==="lead.stage_changed"&&"Triggered when a lead moves to a different stage",r.value==="lead.assigned"&&"Triggered when a lead is assigned to a user",r.value==="lead.received"&&"Triggered when a lead is received from an external source"]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Sample Payload:"}),t.jsx("pre",{className:"text-xs text-gray-800 overflow-x-auto",children:`{
  "event": "${r.value}",
  "data": {
    "id": "lead_123",
    "name": "John Doe",
    "email": "john@example.com",
    "phone": "+1234567890",
    "source": "website",
    "createdAt": "2025-01-23T10:30:00Z",
    "organizationId": "org_456"
  },
  "timestamp": "2025-01-23T10:30:00Z",
  "webhookId": "webhook_789"
}`})]})]},r.value))})]}),t.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Authentication & Security"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"API Key Security"}),t.jsxs("ul",{className:"text-gray-600 space-y-2",children:[t.jsx("li",{children:" Keep your API keys secure and never share them publicly"}),t.jsx("li",{children:" Use HTTPS for all API requests"}),t.jsx("li",{children:" Rotate your keys regularly for security"}),t.jsx("li",{children:" Monitor your API usage for unusual activity"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Webhook Verification"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Each webhook request includes an X-Webhook-Signature header containing an HMAC-SHA256 signature of the payload."}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Verification Example:"}),t.jsx("pre",{className:"text-xs text-gray-800 overflow-x-auto",children:`const crypto = require('crypto');

const signature = req.headers['x-webhook-signature'];
const payload = JSON.stringify(req.body);
const expectedSignature = crypto
  .createHmac('sha256', 'your_webhook_secret')
  .update(payload)
  .digest('hex');

if (signature === expectedSignature) {
  // Webhook is authentic
}`})]})]})]})]}),t.jsx("section",{className:"bg-blue-50 border border-blue-200 rounded-xl p-8",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"text-blue-600 bg-blue-100 p-3 rounded-xl",children:t.jsx(V.Support,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Need Help?"}),t.jsx("p",{className:"text-blue-800 mb-4",children:"Our developer community and support team are here to help you integrate with Clienn CRM."}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("a",{href:"mailto:support@clienn.com",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact Support "}),t.jsx("a",{href:"https://docs.clienn.com",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Full Documentation "})]})]})]})})]})})]})},DY=({onClose:e,onAddTask:r,leads:n,users:a,teams:s,isSubmitting:i=!1})=>{const[l,d]=N.useState(""),[u,m]=N.useState("none"),[p,f]=N.useState({type:"user",id:a[0]?.id}),[x,b]=N.useState(()=>{const A=new Date;return A.setDate(A.getDate()+1),A.toISOString().split("T")[0]}),[y,g]=N.useState(null),j=N.useMemo(()=>{const A=a.map(E=>({value:`user-${E.id}`,label:E.name})),w=s.map(E=>({value:`team-${E.id}`,label:`Team: ${E.name}`}));return[{value:"all-all",label:"All Users"},...w,...A]},[a,s]),k=A=>{const[w,E]=A.split("-");f(w==="all"?{type:"all"}:w==="team"?{type:"team",id:E}:{type:"user",id:Number(E)})},S=async A=>{if(A.preventDefault(),g(null),!l||!p||!x){g("Please fill all required fields.");return}const w={title:l,dueDate:new Date(x).toISOString(),leadId:u==="none"?void 0:u};try{await r(w,p),e()}catch(E){g(E instanceof Error?E.message:"Failed to create task")}};return t.jsx(it,{isOpen:!0,onClose:e,title:"Add New Task",children:t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-800",children:y})})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Task Title"}),t.jsx("input",{type:"text",value:l,onChange:A=>d(A.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",placeholder:"Enter task title..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Assign To"}),t.jsxs("select",{value:`${p.type}-${p.id||"all"}`,onChange:A=>k(A.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",children:[t.jsx("option",{value:"",disabled:!0,children:"Select an option"}),j.map(A=>t.jsx("option",{value:A.value,children:A.label},A.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Related Lead (Optional)"}),t.jsxs("select",{value:u,onChange:A=>m(A.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500",children:[t.jsx("option",{value:"none",children:"None (General Task)"}),n.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Due Date"}),t.jsx("input",{type:"date",value:x,onChange:A=>b(A.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:e,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",disabled:i,children:i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):"Add Task"})]})]})})},IY=(e,r)=>{if(r)return{text:new Date(e).toLocaleDateString(),className:"text-green-500"};const n=new Date;n.setHours(0,0,0,0);const a=new Date(e);if(a.setHours(0,0,0,0),isNaN(a.getTime()))return{text:"Invalid Date",className:"text-subtle"};const s=a.getTime()-n.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i<0?{text:"Overdue",className:"text-red-500 font-semibold"}:i===0?{text:"Due Today",className:"text-orange-500 font-semibold"}:i===1?{text:"Due Tomorrow",className:"text-yellow-600"}:{text:new Date(e).toLocaleDateString(),className:"text-subtle"}},MY=({tasks:e,users:r,leads:n,teams:a,currentUser:s,updateTask:i,onAddTask:l,onDeleteTask:d,isLoading:u=!1,pipelineStages:m,customFieldDefs:p,whatsAppTemplates:f,smsTemplates:x,onUpdateLead:b,onScheduleMessage:y})=>{const[g,j]=N.useState("pending"),[k,S]=N.useState(!1),[A,w]=N.useState("my_tasks"),[E,T]=N.useState(!1),[O,D]=N.useState(null),[I,M]=N.useState(!1),[L,B]=N.useState(null),z=s.role===Wt.ADMIN||s.role===Wt.MANAGER,W=N.useMemo(()=>{console.log("Filtering tasks for user:",s.id,"Total tasks:",e.length);const G=e.filter(oe=>{const le=oe.assignedToId===s.id;return console.log("Task:",oe.id,"assignedToId:",oe.assignedToId,"currentUser.id:",s.id,"matches:",le),le});console.log("User tasks after filtering:",G.length);const Z=G.filter(oe=>g==="all"||g==="pending"&&!oe.isCompleted||g==="completed"&&oe.isCompleted).sort((oe,le)=>new Date(oe.dueDate).getTime()-new Date(le.dueDate).getTime());return console.log("Final filtered tasks:",Z.length,"for status:",g),Z},[e,g,s.id]),R=N.useMemo(()=>{if(!z)return{single:[],batches:[]};const G=e.filter(le=>le.createdById===s.id),Z=G.filter(le=>!le.batchId),oe=G.filter(le=>le.batchId).reduce((le,ge)=>(ge.batchId&&(le[ge.batchId]||(le[ge.batchId]=[]),le[ge.batchId].push(ge)),le),{});return{single:Z,batches:Object.values(oe).sort((le,ge)=>new Date(le[0].createdAt)>new Date(ge[0].createdAt)?-1:1)}},[e,s.id,z]),H=G=>r.find(Z=>Z.id===G),U=G=>G?n.find(Z=>Z.id===G):void 0,q=async G=>{try{D(null),await i(G)}catch(Z){D(Z instanceof Error?Z.message:"Failed to update task")}},Q=async G=>{if(window.confirm("Are you sure you want to delete this task?"))try{D(null),await d(G)}catch(Z){D(Z instanceof Error?Z.message:"Failed to delete task")}},K=G=>{B(G),M(!0)},F=()=>{M(!1),B(null)},_=G=>{l(G,{type:"user",id:s.id})};return t.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[k&&t.jsx(DY,{onClose:()=>S(!1),onAddTask:_,leads:n,users:r,teams:a,isSubmitting:E}),I&&L&&t.jsx(uT,{lead:L,users:r,tasks:e,pipelineStages:m,customFieldDefs:p,whatsAppTemplates:f,smsTemplates:x,onUpdateLead:b,onUpdateTask:i,onAddTask:_,onScheduleMessage:y,currentUser:s,onClose:F}),O&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-800",children:O})}),t.jsx("div",{className:"ml-auto pl-3",children:t.jsx("button",{onClick:()=>D(null),className:"inline-flex bg-red-50 rounded-md p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600",children:t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Tasks"}),t.jsx("p",{className:"text-subtle mt-1",children:"Manage your daily workload and assigned tasks."})]}),z&&t.jsxs("button",{onClick:()=>S(!0),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Add Task"]})]}),t.jsxs("div",{className:"flex border-b border-muted",children:[t.jsx("button",{onClick:()=>w("my_tasks"),className:`flex items-center gap-2 px-4 py-3 text-sm font-semibold -mb-px ${A==="my_tasks"?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:"My Tasks"}),z&&t.jsx("button",{onClick:()=>w("assigned_by_me"),className:`flex items-center gap-2 px-4 py-3 text-sm font-semibold -mb-px ${A==="assigned_by_me"?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:"Tasks I've Assigned"})]}),A==="my_tasks"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex p-1 bg-muted rounded-lg w-min",children:["pending","completed","all"].map(G=>t.jsx("button",{onClick:()=>j(G),className:`capitalize px-4 py-1.5 text-sm font-semibold rounded-md transition-colors ${g===G?"bg-surface shadow text-on-surface":"text-subtle hover:bg-surface/50"}`,children:G},G))}),t.jsx("div",{className:"flex-grow overflow-auto bg-surface rounded-xl shadow-sm border border-muted",children:u?t.jsxs("div",{className:"flex items-center justify-center p-16",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-subtle",children:"Loading tasks..."})]}):t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3 w-10"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Title"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Related To"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Due Date"}),t.jsx("th",{scope:"col",className:"relative px-6 py-3 w-16",children:t.jsx("span",{className:"sr-only",children:"Actions"})})]})}),t.jsxs("tbody",{className:"divide-y divide-muted",children:[W.map(G=>{const Z=U(G.leadId),oe=IY(G.dueDate,G.isCompleted);return t.jsxs("tr",{className:`group ${G.isCompleted?"bg-surface/50 opacity-70":"bg-surface"} hover:bg-muted/30 transition-colors duration-150`,children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:G.isCompleted,onChange:()=>q({...G,isCompleted:!G.isCompleted}),className:"h-5 w-5 rounded-md text-primary-600 focus:ring-primary-500 border-muted bg-background"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("span",{className:G.isCompleted?"line-through text-subtle":"text-on-surface",children:G.title})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Z?t.jsxs("button",{onClick:()=>K(Z),className:"flex items-center gap-2 text-subtle hover:text-primary-500 hover:underline transition-colors",children:[t.jsx(V.Link,{className:"h-4 w-4"}),Z.name]}):t.jsx("span",{className:"text-subtle",children:"-"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.jsxs("div",{className:`flex items-center gap-2 ${oe.className}`,children:[t.jsx(V.Calendar,{className:"h-4 w-4"}),t.jsx("span",{children:oe.text})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsx("button",{onClick:()=>Q(G.id),className:"text-subtle opacity-0 group-hover:opacity-100 hover:text-red-500 p-1 rounded-full hover:bg-muted transition-opacity",title:"Delete task",children:t.jsx(V.Delete,{className:"h-5 w-5"})})})]},G.id)}),W.length===0&&t.jsx("tr",{children:t.jsxs("td",{colSpan:5,className:"text-center p-16 text-subtle",children:[t.jsx(V.Tasks,{className:"h-12 w-12 mx-auto text-muted"}),t.jsxs("p",{className:"mt-2 font-semibold",children:["No ",g," tasks"]})]})})]})]})})]}),A==="assigned_by_me"&&z&&t.jsxs("div",{className:"space-y-4",children:[R.batches.map(G=>{const Z=G.filter(ge=>ge.isCompleted).length,oe=G.length,le=G[0];return t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-md border border-muted/50 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-on-surface",children:le.title}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-subtle mt-1",children:[t.jsx(V.Calendar,{className:"h-4 w-4"}),t.jsxs("span",{children:["Due: ",new Date(le.dueDate).toLocaleDateString()]})]})]}),t.jsx("button",{onClick:()=>window.confirm("Delete this entire batch of tasks?")&&G.forEach(ge=>d(ge.id)),className:"text-subtle hover:text-red-500 p-1 rounded-full hover:bg-muted",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm font-medium text-subtle mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[Z," / ",oe," Completed"]})]}),t.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:t.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Z/oe*100}%`}})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-subtle mb-2",children:"Assignees"}),t.jsxs("div",{className:"flex -space-x-2",children:[G.slice(0,7).map(ge=>{const ve=H(ge.assignedToId);return ve?t.jsx("img",{src:ve.avatar,title:ve.name,className:"h-8 w-8 rounded-full ring-2 ring-surface"},ge.id):null}),G.length>7&&t.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-surface bg-muted flex items-center justify-center text-xs font-semibold",children:["+",G.length-7]})]})]})]},le.batchId)}),R.single.map(G=>{const Z=H(G.assignedToId);return t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-md border border-muted/50 flex flex-wrap justify-between items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:`font-semibold text-on-surface ${G.isCompleted?"line-through text-subtle":""}`,children:G.title}),t.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm text-subtle mt-1",children:[Z&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:Z.avatar,className:"h-5 w-5 rounded-full",alt:Z.name}),t.jsx("span",{children:Z.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(V.Calendar,{className:"h-4 w-4"}),t.jsxs("span",{children:["Due: ",new Date(G.dueDate).toLocaleDateString()]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full ${G.isCompleted?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:G.isCompleted?"Completed":"Pending"}),t.jsx("button",{onClick:()=>d(G.id),className:"text-subtle hover:text-red-500 p-1 rounded-full hover:bg-muted",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]},G.id)}),R.batches.length===0&&R.single.length===0&&t.jsxs("div",{className:"text-center p-16 text-subtle bg-surface rounded-xl border border-muted",children:[t.jsx(V.Tasks,{className:"h-12 w-12 mx-auto text-muted"}),t.jsx("p",{className:"mt-2 font-semibold",children:"You haven't assigned any tasks yet"})]})]})]})},LY=({isOpen:e,onClose:r,onSave:n,isLoading:a=!1})=>{const[s,i]=N.useState(""),[l,d]=N.useState("#3b82f6"),[u,m]=N.useState({}),p=x=>{x.preventDefault();const b={};s.trim()||(b.name="Stage name is required"),l||(b.color="Stage color is required"),m(b),Object.keys(b).length===0&&n(s.trim(),l)},f=()=>{i(""),d("#3b82f6"),m({}),r()};return t.jsx(Yc,{isOpen:e,onClose:f,title:"Add New Stage",children:t.jsxs("form",{onSubmit:p,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"stageName",className:"block text-sm font-medium text-on-surface mb-2",children:"Stage Name *"}),t.jsx("input",{id:"stageName",type:"text",value:s,onChange:x=>i(x.target.value),placeholder:"Enter stage name (e.g., New Lead, Qualified, Proposal Sent)",className:`w-full px-3 py-2 bg-background border rounded-lg text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${u.name?"border-red-500":"border-muted"}`,disabled:a}),u.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"stageColor",className:"block text-sm font-medium text-on-surface mb-2",children:"Stage Color *"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{id:"stageColor",type:"color",value:l,onChange:x=>d(x.target.value),className:"w-12 h-10 p-1 border border-muted rounded-lg bg-transparent cursor-pointer disabled:opacity-50",disabled:a}),t.jsx("input",{type:"text",value:l,onChange:x=>d(x.target.value),placeholder:"#3b82f6",className:`flex-1 px-3 py-2 bg-background border rounded-lg text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${u.color?"border-red-500":"border-muted"}`,disabled:a})]}),u.color&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.color}),t.jsx("p",{className:"mt-1 text-xs text-subtle",children:"Choose a color that represents this stage in your pipeline"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors",disabled:a,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:a,children:[a&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a?"Adding Stage...":"Add Stage"]})]})]})})},_Y=({isOpen:e,onClose:r,onConfirm:n,stageName:a,stageColor:s,isLoading:i=!1,leadCount:l=0})=>{const d=()=>{n()},u=()=>{i||r()};return t.jsx(Yc,{isOpen:e,onClose:u,title:"Delete Stage",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(Lt.XCircle,{className:"w-5 h-5 text-red-600"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"Are you sure you want to delete this stage?"}),t.jsx("p",{className:"text-subtle",children:"This action cannot be undone. All leads currently in this stage will need to be reassigned."})]})]}),t.jsx("div",{className:"bg-background rounded-lg p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:s}}),t.jsx("span",{className:"font-medium text-on-surface",children:a}),l>0&&t.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[l," lead",l!==1?"s":""]})]})}),l>0&&t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Lt.XCircle,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Impact Warning"}),t.jsxs("p",{className:"text-sm text-amber-700",children:["This stage contains ",l," lead",l!==1?"s":"",". Deleting it will require you to move these leads to another stage."]})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50",disabled:i,children:"Cancel"}),t.jsxs("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:i,children:[i&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i?"Deleting...":"Delete Stage"]})]})]})})},FY=({isOpen:e,onClose:r,onSave:n,rule:a,customFieldDefs:s,isLoading:i=!1})=>{const[l,d]=N.useState({field:"source",operator:"equals",value:"",points:10}),[u,m]=N.useState({});N.useEffect(()=>{d(a?{field:a.field||"source",operator:a.operator||"equals",value:a.value||"",points:a.points||10}:{field:"source",operator:"equals",value:"",points:10}),m({})},[a,e]);const p=[{id:"source",name:"Source"},{id:"course",name:"Course"},{id:"city",name:"City"},{id:"company",name:"Company"},{id:"email",name:"Email"},{id:"phone",name:"Phone"},...s.map(y=>({id:`customFields.${y.id}`,name:`(Custom) ${y.name}`}))],f=[{value:"equals",label:"equals"},{value:"contains",label:"contains"},{value:"not_equals",label:"not equals"},{value:"is_set",label:"is set"},{value:"is_not_set",label:"is not set"},{value:"greater_than",label:"greater than"},{value:"less_than",label:"less than"},{value:"between",label:"between"}],x=y=>{y.preventDefault();const g={};if(l.field||(g.field="Field is required"),l.operator||(g.operator="Operator is required"),!["is_set","is_not_set"].includes(l.operator)&&!l.value.trim()&&(g.value="Value is required for this operator"),(l.points===void 0||l.points===null)&&(g.points="Points are required"),m(g),Object.keys(g).length===0){const j={...l,...a?.id&&!a.id.startsWith("new_")&&!a.id.startsWith("rule_")&&{id:a.id},organizationId:a?.organizationId||""};console.log("Submitting rule data:",j),n(j)}},b=()=>{i||r()};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-muted",children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:a?"Edit Scoring Rule":"Add Scoring Rule"}),t.jsx("button",{onClick:b,disabled:i,className:"text-subtle hover:text-on-surface disabled:opacity-50",children:t.jsx(Lt.Close,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Field"}),t.jsx("select",{value:l.field,onChange:y=>d(g=>({...g,field:y.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:i,children:p.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))}),u.field&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.field})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Condition"}),t.jsx("select",{value:l.operator,onChange:y=>d(g=>({...g,operator:y.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:i,children:f.map(y=>t.jsx("option",{value:y.value,children:y.label},y.value))}),u.operator&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.operator})]}),!["is_set","is_not_set"].includes(l.operator)&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Value"}),t.jsx("input",{type:"text",value:l.value,onChange:y=>d(g=>({...g,value:y.target.value})),className:"w-full bg-background border border-muted rounded-lg px-3 py-2 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter value to match",disabled:i}),u.value&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.value})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface mb-2",children:"Points"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>d(y=>({...y,points:y.points-1})),className:"w-10 h-10 bg-muted hover:bg-subtle/20 rounded-lg flex items-center justify-center text-xl font-bold text-on-surface disabled:opacity-50",disabled:i,children:""}),t.jsxs("div",{className:"flex-1 text-center",children:[t.jsx("span",{className:`text-lg font-bold ${l.points>=0?"text-green-500":"text-red-500"}`,children:l.points>=0?`+${l.points}`:l.points}),t.jsx("span",{className:"text-sm text-subtle ml-1",children:"points"})]}),t.jsx("button",{type:"button",onClick:()=>d(y=>({...y,points:y.points+1})),className:"w-10 h-10 bg-muted hover:bg-subtle/20 rounded-lg flex items-center justify-center text-xl font-bold text-on-surface disabled:opacity-50",disabled:i,children:"+"})]}),u.points&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.points})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:b,disabled:i,className:"flex-1 px-4 py-2 bg-muted hover:bg-subtle/20 text-on-surface rounded-lg font-medium disabled:opacity-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium disabled:opacity-50 transition-colors flex items-center justify-center",children:i?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):a?"Update Rule":"Add Rule"})]})]})]})}):null},RY=({isOpen:e,onClose:r,onConfirm:n,ruleDescription:a,isLoading:s=!1})=>{if(!e)return null;const i=()=>{s||r()},l=()=>{s||n()};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-surface rounded-xl shadow-2xl w-full max-w-md",children:[t.jsx("div",{className:"p-6 border-b border-muted",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(Lt.Delete,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-on-surface",children:"Delete Scoring Rule"}),t.jsx("p",{className:"text-sm text-subtle",children:"This action cannot be undone"})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-on-surface mb-6",children:"Are you sure you want to delete this scoring rule?"}),t.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[t.jsx("p",{className:"text-sm text-on-surface font-medium",children:"Rule:"}),t.jsx("p",{className:"text-sm text-subtle mt-1",children:a})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:i,disabled:s,className:"flex-1 px-4 py-2 bg-muted hover:bg-subtle/20 text-on-surface rounded-lg font-medium disabled:opacity-50 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:l,disabled:s,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 transition-colors flex items-center justify-center",children:s?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Lt.Delete,{className:"w-4 h-4 mr-2"}),"Delete Rule"]})})]})]})]})})},$Y=({organizationId:e,onFieldsChange:r})=>{const{fields:n,loading:a,createField:s,updateField:i,deleteField:l,updateFieldUsage:d,refreshFields:u}=hT(e),[m,p]=N.useState(!1),[f,x]=N.useState(null),[b,y]=N.useState({name:"",type:"text",variableType:"",options:"",isMappable:!0,isRequired:!1,category:"general",description:""}),[g,j]=N.useState(null),[k,S]=N.useState("all"),[A,w]=N.useState("all"),[E,T]=N.useState(""),[O,D]=N.useState(new Set),{addToast:I}=Xc();N.useEffect(()=>{r(n)},[n,r]);const M=(_,G)=>{I({type:G,title:_,duration:3e3})},L=()=>{y({name:"",type:"text",variableType:"",options:"",isMappable:!0,isRequired:!1,category:"general",description:""}),x(null),p(!1)},B=()=>{L(),p(!0)},z=_=>{x(_),y({name:_.name,type:_.type,variableType:_.variableType||"",options:_.options?.join(", ")||"",isMappable:_.isMappable,isRequired:_.isRequired,category:_.category||"general",description:_.description||""}),p(!0)},W=async _=>{_.preventDefault();try{const G={id:f?f.id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...b,organizationId:e,options:b.type==="dropdown"&&b.options?b.options.split(",").map(Z=>Z.trim()).filter(Z=>Z):void 0,variableType:b.type==="variable"?b.variableType:void 0};f?(await i(f._id,G),M("Custom field updated successfully","success")):(await s(G),M("Custom field created successfully","success")),L()}catch(G){console.error("Error saving custom field:",G),M("Failed to save custom field","error")}},R=async _=>{try{D(G=>new Set(G).add(_)),await l(_),M("Custom field deleted successfully","success"),j(null)}catch(G){console.error("Error deleting custom field:",G),M("Failed to delete custom field","error")}finally{D(G=>{const Z=new Set(G);return Z.delete(_),Z})}},H=async(_,G)=>{try{D(Z=>new Set(Z).add(_)),await i(_,{isMappable:G}),M(`Field ${G?"enabled":"disabled"} for mapping`,"success")}catch(Z){console.error("Error updating field mappable status:",Z),M("Failed to update field","error")}finally{D(Z=>{const oe=new Set(Z);return oe.delete(_),oe})}},U=async(_,G,Z)=>{try{D(oe=>new Set(oe).add(_)),await d(_,G,Z),M(`Field ${Z?"enabled":"disabled"} for ${G}`,"success")}catch(oe){console.error("Error updating field integration:",oe),M("Failed to update field integration","error")}finally{D(oe=>{const le=new Set(oe);return le.delete(_),le})}},q=async(_,G)=>{try{D(Z=>new Set(Z).add(_)),await i(_,{isRequired:G}),M(`Field ${G?"marked as required":"marked as optional"}`,"success")}catch(Z){console.error("Error updating field required status:",Z),M("Failed to update field","error")}finally{D(Z=>{const oe=new Set(Z);return oe.delete(_),oe})}},Q=n.filter(_=>{const G=E===""||_.name.toLowerCase().includes(E.toLowerCase())||_.description&&_.description.toLowerCase().includes(E.toLowerCase()),Z=A==="all"||_.category===A,oe=k==="all"||k==="mappable"&&_.isMappable||k==="categories"&&_.category!=="general";return G&&Z&&oe}),K=n.filter(_=>_.isMappable),F=Array.from(new Set(n.map(_=>_.category||"general")));return a?t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t.jsx("span",{className:"ml-2 text-on-surface",children:"Loading custom fields..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-4 sm:p-6 text-white",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-1 sm:mb-2",children:"Custom Fields Manager"}),t.jsx("p",{className:"text-primary-100 text-xs sm:text-sm",children:"Create and manage custom fields that will be available across all integrations and imports"})]}),t.jsxs("button",{onClick:B,className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-white text-primary-600 rounded-lg hover:bg-primary-50 font-semibold shadow-lg transition-all duration-200 flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Add New Field"})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[t.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:n.length}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Total Fields"})]})]})}),t.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:K.length}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Mappable Fields"})]})]})}),t.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:F.length}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Categories"})]})]})}),t.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-on-surface truncate",children:n.filter(_=>_.usage&&Object.values(_.usage).some(Boolean)).length}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle truncate",children:"Active Integrations"})]})]})})]}),t.jsx("div",{className:"bg-surface rounded-lg p-3 sm:p-4 border border-muted",children:t.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search fields...",value:E,onChange:_=>T(_.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-3 bg-background border border-muted rounded-lg focus:border-primary-500 focus:outline-none text-sm"})]}),t.jsxs("select",{value:A,onChange:_=>w(_.target.value),className:"px-3 py-2 sm:py-3 bg-background border border-muted rounded-lg focus:border-primary-500 focus:outline-none text-sm min-w-0",children:[t.jsx("option",{value:"all",children:"All Categories"}),F.map(_=>t.jsx("option",{value:_,children:_.charAt(0).toUpperCase()+_.slice(1)},_))]})]}),t.jsx("div",{className:"flex bg-muted rounded-lg p-1 overflow-x-auto",children:[{key:"all",label:"All Fields",count:n.length},{key:"mappable",label:"Mappable",count:K.length},{key:"categories",label:"By Category",count:F.length}].map(_=>t.jsxs("button",{onClick:()=>S(_.key),className:`px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 ${k===_.key?"bg-white text-primary-600 shadow-sm":"text-subtle hover:text-on-surface"}`,children:[t.jsx("span",{className:"hidden xs:inline",children:_.label}),t.jsx("span",{className:"xs:hidden",children:_.label.split(" ")[0]})," (",_.count,")"]},_.key))})]})}),m&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:t.jsx("div",{className:"bg-surface rounded-xl shadow-2xl max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[t.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${f?"bg-blue-100":"bg-green-100"}`,children:f?t.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}):t.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-on-surface truncate",children:[f?"Edit":"Create New"," Custom Field"]}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle",children:f?"Update field properties and settings":"Add a new custom field to your organization"})]})]}),t.jsxs("form",{onSubmit:W,className:"space-y-6",children:[t.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[t.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Basic Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Field Name *"}),t.jsx("input",{type:"text",value:b.name,onChange:_=>y({...b,name:_.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",placeholder:"e.g., Lead Score, Company Size",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Category"}),t.jsxs("select",{value:b.category,onChange:_=>y({...b,category:_.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",children:[t.jsx("option",{value:"general",children:"General"}),t.jsx("option",{value:"personal",children:"Personal Info"}),t.jsx("option",{value:"business",children:"Business Info"}),t.jsx("option",{value:"integration",children:"Integration"}),t.jsx("option",{value:"system",children:"System"})]})]})]}),t.jsxs("div",{className:"mt-3 sm:mt-4",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Description"}),t.jsx("textarea",{value:b.description,onChange:_=>y({...b,description:_.target.value}),rows:2,className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none resize-none",placeholder:"Describe what this field is used for..."})]})]}),t.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[t.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[t.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.jsx("span",{className:"text-sm sm:text-base",children:"Field Configuration"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Field Type *"}),t.jsxs("select",{value:b.type,onChange:_=>y({...b,type:_.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",children:[t.jsx("option",{value:"text",children:"Text"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"date",children:"Date"}),t.jsx("option",{value:"dropdown",children:"Dropdown"}),t.jsx("option",{value:"variable",children:"Variable"})]})]}),t.jsx("div",{className:"flex items-center gap-3 sm:pt-6",children:t.jsxs("label",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("input",{type:"checkbox",checked:b.isRequired,onChange:_=>y({...b,isRequired:_.target.checked}),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"text-xs sm:text-sm text-on-surface",children:"Required field"})]})})]}),b.type==="dropdown"&&t.jsxs("div",{className:"mt-3 sm:mt-4",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Dropdown Options (comma-separated)"}),t.jsx("input",{type:"text",value:b.options,onChange:_=>y({...b,options:_.target.value}),placeholder:"Option 1, Option 2, Option 3",className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none"})]}),b.type==="variable"&&t.jsxs("div",{className:"mt-3 sm:mt-4",children:[t.jsx("label",{className:"block text-xs sm:text-sm font-medium text-on-surface mb-1 sm:mb-2",children:"Variable Type *"}),t.jsxs("select",{value:b.variableType,onChange:_=>y({...b,variableType:_.target.value}),className:"w-full bg-background border border-muted rounded-lg p-2 sm:p-3 text-sm focus:border-primary-500 focus:outline-none",required:!0,children:[t.jsx("option",{value:"",children:"Select variable type"}),t.jsx("option",{value:"pipeline_status",children:"Sales Pipeline Status"})]})]})]}),t.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 sm:p-4",children:[t.jsxs("h4",{className:"font-semibold text-on-surface mb-3 sm:mb-4 flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Integration Settings"})]}),t.jsx("div",{className:"space-y-3",children:t.jsxs("label",{className:"flex items-start gap-3",children:[t.jsx("input",{type:"checkbox",checked:b.isMappable,onChange:_=>y({...b,isMappable:_.target.checked}),className:"rounded border-muted text-primary-600 focus:ring-primary-500 mt-0.5"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("span",{className:"text-sm font-medium text-on-surface",children:"Available for mapping"}),t.jsx("p",{className:"text-xs text-subtle",children:"Allow this field to be mapped in CSV imports and integrations"})]})]})})]}),t.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 pt-4 sm:pt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:L,className:"px-4 sm:px-6 py-2 sm:py-2 bg-muted text-on-surface rounded-lg hover:bg-muted/80 font-medium transition-colors text-sm sm:text-base",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 sm:px-6 py-2 sm:py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium transition-colors text-sm sm:text-base",children:f?"Update Field":"Create Field"})]})]})]})})}),t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[t.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-on-surface",children:["Fields (",Q.length,")"]}),Q.length>0&&t.jsxs("button",{onClick:u,className:"px-3 py-1.5 text-xs sm:text-sm text-primary-600 hover:text-primary-700 flex items-center gap-2 self-end sm:self-auto",children:[t.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t.jsx("span",{children:"Refresh"})]})]}),Q.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h4",{className:"text-lg font-medium text-on-surface mb-2",children:n.length===0?"No custom fields yet":"No fields match your filters"}),t.jsx("p",{className:"text-subtle mb-4",children:n.length===0?"Create your first custom field to get started with advanced lead management.":"Try adjusting your search terms or filters to see more results."}),n.length===0&&t.jsx("button",{onClick:B,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Create Your First Field"})]}):t.jsx("div",{className:"grid gap-3 sm:gap-4",children:Q.map(_=>t.jsxs("div",{className:`bg-surface rounded-xl p-4 sm:p-6 border transition-all duration-200 ${O.has(_._id)?"border-primary-300 shadow-lg":"border-muted hover:border-primary-200 hover:shadow-md"}`,children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2 sm:mb-3",children:[t.jsx("h4",{className:"text-base sm:text-lg font-semibold text-on-surface truncate",children:_.name}),t.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 ${_.type==="dropdown"?"bg-purple-100 text-purple-800":_.type==="number"?"bg-blue-100 text-blue-800":_.type==="date"?"bg-green-100 text-green-800":_.type==="variable"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:_.type}),_.category&&_.category!=="general"&&t.jsx("span",{className:"px-2 sm:px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium flex-shrink-0",children:_.category}),_.isRequired&&t.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium flex-shrink-0",children:"Required"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 ${_.isMappable?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.isMappable?"Mappable":"Not Mappable"})]}),_.description&&t.jsx("p",{className:"text-xs sm:text-sm text-subtle mb-2 sm:mb-3 line-clamp-2",children:_.description}),_.options&&_.options.length>0&&t.jsxs("div",{className:"mb-2 sm:mb-3",children:[t.jsx("p",{className:"text-xs text-subtle mb-1",children:"Options:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.options.slice(0,3).map((G,Z)=>t.jsx("span",{className:"px-2 py-1 bg-muted text-on-surface rounded-md text-xs truncate max-w-20",title:G,children:G},Z)),_.options.length>3&&t.jsxs("span",{className:"px-2 py-1 bg-muted text-subtle rounded-md text-xs",children:["+",_.options.length-3," more"]})]})]}),_.type==="variable"&&_.variableType&&t.jsxs("div",{className:"mb-2 sm:mb-3",children:[t.jsx("p",{className:"text-xs text-subtle mb-1",children:"Variable Type:"}),t.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-md text-xs font-medium",children:_.variableType==="pipeline_status"?"Sales Pipeline Status":"Users"})]}),_.usage&&Object.values(_.usage).some(Boolean)&&t.jsxs("div",{className:"mb-2 sm:mb-3",children:[t.jsx("p",{className:"text-xs text-subtle mb-1 sm:mb-2",children:"Active Integrations:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(_.usage).filter(([G,Z])=>Z).slice(0,4).map(([G,Z])=>t.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium truncate max-w-16",title:G.replace("in","").toUpperCase(),children:G.replace("in","").toUpperCase()},G)),Object.values(_.usage).filter(Boolean).length>4&&t.jsxs("span",{className:"px-2 py-1 bg-muted text-subtle rounded-full text-xs",children:["+",Object.values(_.usage).filter(Boolean).length-4]})]})]}),_.usage&&Object.values(_.usage).some(Boolean)&&t.jsxs("div",{className:"text-xs text-subtle",children:["Used in ",Object.values(_.usage).filter(Boolean).length," integration",Object.values(_.usage).filter(Boolean).length!==1?"s":""]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-2 ml-2 sm:ml-4",children:[t.jsxs("div",{className:"hidden lg:flex flex-col gap-2 mr-3",children:[t.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[t.jsx("input",{type:"checkbox",checked:_.isMappable,onChange:G=>H(_._id,G.target.checked),disabled:O.has(_._id),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"text-subtle",children:"Mappable"})]}),t.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[t.jsx("input",{type:"checkbox",checked:_.isRequired,onChange:G=>q(_._id,G.target.checked),disabled:O.has(_._id),className:"rounded border-muted text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"text-subtle",children:"Required"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-1 mr-0 sm:mr-3",children:[["Imports","Facebook","Google","Website","API"].slice(0,3).map(G=>{const Z=`in${G.toLowerCase()}`,oe=_.usage?.[Z]||!1;return t.jsx("button",{onClick:()=>U(_._id,G.toLowerCase(),!oe),disabled:O.has(_._id),className:`px-1.5 sm:px-2 py-1 rounded text-xs font-medium transition-colors ${oe?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,title:`${oe?"Disable":"Enable"} ${G}`,children:G},G)}),Object.values(_.usage||{}).filter(Boolean).length>3&&t.jsxs("span",{className:"px-1.5 py-1 text-xs text-subtle",children:["+",Object.values(_.usage||{}).filter(Boolean).length-3]})]}),t.jsxs("div",{className:"flex flex-row sm:flex-col gap-1 sm:gap-2",children:[t.jsx("button",{onClick:()=>z(_),disabled:O.has(_._id),className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-primary-100 text-primary-800 rounded-lg hover:bg-primary-200 text-xs sm:text-sm font-medium transition-colors disabled:opacity-50",children:"Edit"}),t.jsx("button",{onClick:()=>j(_._id),disabled:O.has(_._id),className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 text-xs sm:text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]})]}),O.has(_._id)&&t.jsx("div",{className:"absolute inset-0 bg-surface/80 rounded-xl flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),t.jsx("span",{className:"text-sm",children:"Updating..."})]})})]},_.id))})]}),g&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:t.jsx("div",{className:"bg-surface rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-on-surface",children:"Delete Custom Field"}),t.jsx("p",{className:"text-xs sm:text-sm text-subtle",children:"This action cannot be undone"})]})]}),(()=>{const _=n.find(G=>G._id===g);return t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[t.jsx("p",{className:"text-red-800 font-medium",children:_?.name}),t.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Type: ",_?.type,"  Category: ",_?.category||"general"]})]}),t.jsxs("div",{className:"space-y-3 text-sm text-on-surface",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),t.jsx("span",{children:"This field will be removed from all existing leads"})]}),_?.usage&&Object.values(_.usage).some(Boolean)&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),t.jsxs("span",{children:["This field is used in ",Object.values(_.usage).filter(Boolean).length," integrations"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:"This action cannot be undone"})]})]})]})})(),t.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>j(null),className:"px-4 sm:px-6 py-2 bg-muted text-on-surface rounded-lg hover:bg-muted/80 font-medium transition-colors text-sm sm:text-base",children:"Cancel"}),t.jsx("button",{onClick:()=>R(g),className:"px-4 sm:px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium transition-colors text-sm sm:text-base",children:"Delete Field"})]})]})})})]})},ii=({title:e,description:r,children:n,permission:a,hasPermission:s,initiallyOpen:i=!1})=>{const[l,d]=N.useState(i);return a&&s&&!s(a)?null:t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("button",{onClick:()=>d(!l),className:"md:pointer-events-none w-full flex justify-between items-start text-left p-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:e}),r&&t.jsx("p",{className:"text-subtle mt-1 max-w-2xl",children:r})]}),t.jsx(V.ChevronRight,{className:`md:hidden h-6 w-6 text-subtle transition-transform flex-shrink-0 mt-1 ${l?"rotate-90":""}`})]}),t.jsx("div",{className:`md:block ${l?"block":"hidden"}`,children:t.jsx("div",{className:"px-6 pb-6 pt-0 space-y-4",children:n})})]})},zY=e=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),BY=({currentUser:e,onUpdateProfile:r})=>{const[n,a]=N.useState(e.name),[s,i]=N.useState(e.phone||""),[l,d]=N.useState(e.avatar),[u,m]=N.useState(!1),[p,f]=N.useState(null),x=N.useRef(null),b=async g=>{g.preventDefault(),m(!0),f(null);try{await new Promise(j=>setTimeout(j,1e3)),r({name:n,avatar:l,phone:s}),f({type:"success",text:"Profile updated successfully!"})}catch{f({type:"error",text:"Failed to update profile. Please try again."})}finally{m(!1)}},y=async g=>{if(g.target.files&&g.target.files[0]){const j=g.target.files[0],k=await zY(j);d(k)}};return t.jsx(ii,{title:"My Profile",description:"Manage your personal information and preferences.",initiallyOpen:!0,children:t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsx("img",{src:l,alt:"Avatar",className:"h-24 w-24 rounded-full object-cover ring-4 ring-muted"}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("input",{type:"file",ref:x,onChange:y,accept:"image/*",className:"hidden"}),t.jsx("button",{type:"button",onClick:()=>x.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg",children:"Upload New Picture"}),t.jsx("p",{className:"text-xs text-subtle mt-2",children:"Recommended: 200x200px"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-muted",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-subtle",children:"Full Name"}),t.jsx("input",{id:"name",type:"text",value:n,onChange:g=>a(g.target.value),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-subtle",children:"Phone Number"}),t.jsx("input",{id:"phone",type:"tel",value:s,onChange:g=>i(g.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-subtle",children:"Email Address"}),t.jsx("input",{id:"email",type:"email",value:e.email,readOnly:!0,disabled:!0,className:"mt-1 block w-full bg-muted/50 border border-muted rounded-md text-subtle cursor-not-allowed py-2 px-3"})]})]}),t.jsx("div",{className:"flex justify-end pt-5",children:t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})})]})})},WY=({organization:e,plans:r,history:n,onUpgrade:a,onRefreshData:s})=>{const i=r.find(y=>y.id===e.subscriptionPlanId),[l,d]=N.useState(null),[u,m]=N.useState(null),[p,f]=N.useState(!1),x=async(y,g="monthly")=>{d(y),m(null);try{await a(y,g),m({type:"success",text:"Subscription updated successfully!"}),s()}catch{m({type:"error",text:"Failed to update subscription. Please try again."})}finally{d(null)}},b=async()=>{f(!0);try{const y=await fetch("/api/billing/download-monthly-invoices",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!y.ok)throw new Error("Failed to download invoices");const g=await y.blob(),j=window.URL.createObjectURL(g),k=document.createElement("a");k.href=j,k.download=`invoices-${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}.zip`,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(j),document.body.removeChild(k)}catch(y){console.error("Error downloading invoices:",y),m({type:"error",text:"Failed to download invoices. Please try again."})}finally{f(!1)}};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs(ii,{title:"My Subscription",description:"Manage your current plan and features.",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.filter(y=>y.price>0).map(y=>t.jsxs("div",{className:`p-6 rounded-lg border-2 ${i?.id===y.id?"border-primary-500 bg-primary-500/5":"border-muted"}`,children:[t.jsx("h4",{className:"font-bold text-lg text-on-surface",children:y.name}),t.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",y.price,t.jsx("span",{className:"text-sm font-normal text-subtle",children:"/mo"})]}),t.jsxs("p",{className:"text-xs text-subtle",children:[y.userLimit," Users"]}),t.jsx("ul",{className:"text-xs space-y-1 mt-4",children:y.features.slice(0,4).map(g=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(V.CheckCircle,{className:"h-4 w-4 text-green-500"})," ",g.replace(/_/g," ")]},g))}),t.jsx("button",{onClick:()=>x(y.id,"monthly"),disabled:i?.id===y.id||l===y.id,className:"w-full mt-6 py-2 rounded-lg font-semibold text-sm disabled:bg-primary-600 disabled:text-white disabled:cursor-not-allowed bg-muted hover:bg-primary-500/20 text-on-surface hover:text-primary-500 transition-colors",children:l===y.id?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):i?.id===y.id?"Current Plan":i&&y.price>i.price?"Upgrade":"Downgrade"})]},y.id))}),u&&t.jsx("div",{className:`mt-4 p-3 rounded-lg ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]}),t.jsxs(ii,{title:"Billing History",description:"Review your past payments and download invoices.",children:[t.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[t.jsx("div",{className:"text-sm text-subtle",children:"Showing last 50 transactions"}),t.jsx("button",{onClick:()=>b(),disabled:p,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-600/50 text-white font-semibold py-2 px-4 rounded-lg text-sm disabled:cursor-not-allowed flex items-center gap-2",children:p?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Downloading..."]}):"Download Monthly Invoices"})]}),t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Transaction ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Plan"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Amount"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Invoice"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:n.map(y=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(y.date).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 text-sm font-mono text-xs",children:y.transactionId||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm",children:y.planName}),t.jsxs("td",{className:"px-6 py-4 text-sm",children:["$",y.amount.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-800 text-green-200",children:y.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("a",{href:y.invoiceUrl,className:"text-primary-500 hover:underline text-sm font-semibold",children:"Download"})})]},y.id))})]})]})]})},UY=({stages:e,onAdd:r,onUpdate:n,onDelete:a})=>{const[s,i]=N.useState(e),[l,d]=N.useState(null),[u,m]=N.useState(0),[p,f]=N.useState(!1),[x,b]=N.useState(!1),[y,g]=N.useState(null);N.useEffect(()=>{console.log("DEBUG: PipelineSettings: Stages updated, re-syncing local state:",{stagesCount:e.length,localStagesCount:s.length,stages:e.map(O=>({id:O.id,name:O.name})),localStages:s.map(O=>({id:O.id,name:O.name}))}),i(e),m(O=>O+1)},[e]);const j=async(O,D)=>{console.log("DEBUG: handleAddStage called with:",{name:O,color:D}),d("add");try{await r(O,D),console.log("DEBUG: Stage creation successful, closing modal"),f(!1)}catch(I){console.error("Failed to add stage:",I)}finally{d(null)}},k=()=>{console.log("DEBUG: Opening add stage modal"),f(!0)},S=()=>{console.log("DEBUG: Closing add stage modal"),f(!1)},A=async(O,D,I)=>{console.log("DEBUG: handleUpdate called:",{id:O,field:D,value:I}),d(`update-${O}`);try{await n(O,D,I),console.log("DEBUG: Stage update successful")}catch(M){console.error("Failed to update stage:",M)}finally{d(null)}},w=async()=>{if(y){console.log("DEBUG: handleDeleteStage called for stage:",y.id,y.name),d(`delete-${y.id}`);try{await a(y.id),console.log("DEBUG: Stage deletion successful, updating local state"),i(O=>O.filter(D=>D.id!==y.id)),b(!1),g(null)}catch(O){console.error("Failed to delete stage:",O)}finally{d(null)}}},E=O=>{console.log("DEBUG: Opening delete modal for stage:",O.id,O.name),g(O),b(!0)},T=()=>{console.log("DEBUG: Closing delete stage modal"),b(!1),g(null)};return t.jsxs("div",{className:"space-y-3",children:[s.map(O=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded-lg",children:[t.jsx("input",{type:"color",value:O.color,onChange:D=>A(O.id,"color",D.target.value),disabled:l===`update-${O.id}`,className:"w-8 h-8 p-0 border-none rounded cursor-pointer bg-transparent disabled:opacity-50",style:{backgroundColor:O.color}}),t.jsx("input",{type:"text",value:O.name,onChange:D=>A(O.id,"name",D.target.value),onBlur:D=>A(O.id,"name",D.target.value),disabled:l===`update-${O.id}`,className:"flex-grow bg-transparent focus:bg-muted p-1 rounded-md disabled:opacity-50",placeholder:"Enter stage name..."}),t.jsx("button",{onClick:()=>E(O),disabled:l===`delete-${O.id}`,className:"text-red-400 hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed",children:l===`delete-${O.id}`?t.jsx("div",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):t.jsx(V.Delete,{className:"w-4 h-4"})})]},`${O.id}-${u}`)),t.jsx("button",{onClick:k,disabled:l==="add",className:"text-sm text-primary-500 font-semibold hover:text-primary-600 mt-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l==="add"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),"Adding..."]}):t.jsx(t.Fragment,{children:"+ Add Stage"})}),t.jsx(LY,{isOpen:p,onClose:S,onSave:j,isLoading:l==="add"}),y&&t.jsx(_Y,{isOpen:x,onClose:T,onConfirm:w,stageName:y.name,stageColor:y.color,isLoading:l===`delete-${y.id}`,leadCount:0})]})},qY=({organizationId:e,onFieldsChange:r})=>t.jsx($Y,{organizationId:e,onFieldsChange:r}),VY=({rules:e,customFieldDefs:r,onSave:n,onDelete:a,onRefreshRules:s})=>{const[i,l]=N.useState(!1),[d,u]=N.useState(!1),[m,p]=N.useState(null),[f,x]=N.useState(null),[b,y]=N.useState(null),g=N.useMemo(()=>[{id:"source",name:"Source"},{id:"course",name:"Course"},{id:"city",name:"City"},{id:"company",name:"Company"},{id:"email",name:"Email"},{id:"phone",name:"Phone"},...r.map(I=>({id:`customFields.${I.id}`,name:`(Custom) ${I.name}`}))],[r]),j=I=>{const M=g.find(L=>L.id===I);return M?M.name:I},k=I=>{const M=j(I.field),L=I.operator.replace("_"," "),B=["is_set","is_not_set"].includes(I.operator)?"":` "${I.value}"`,z=I.points>=0?`+${I.points}`:I.points;return`IF ${M} ${L}${B} THEN ${z} points`},S=()=>{p(null),l(!0)},A=I=>{p(I),l(!0)},w=async I=>{y("save");try{console.log("Saving rule data:",I);const M={...I};(!I.id||I.id.startsWith("new_")||I.id.startsWith("rule_"))&&(delete M.id,console.log("Removed temporary ID for new rule, letting backend generate it")),console.log("Final rule to save:",M),await n(M),l(!1),p(null),console.log("Rule saved successfully, UI updated immediately")}catch(M){console.error("Failed to save rule:",M)}finally{y(null)}},E=I=>{const M=I.id||I._id;if(!M){console.error("Rule missing ID:",I);return}console.log("Delete button clicked for rule:",M,"Has id field:",!!I.id,"MongoDB _id:",I._id),x(I),u(!0)},T=async()=>{if(!f){console.error("No rule selected for deletion");return}const I=f.id||f._id;if(!I){console.error("Rule ID is missing:",f);return}console.log("Confirming delete for rule:",I,"MongoDB _id:",f._id),y("delete");try{await a(I),u(!1),x(null),console.log("Rule deleted successfully, UI updated immediately")}catch(M){console.error("Failed to delete rule:",M)}finally{y(null)}},O=()=>{l(!1),p(null)},D=()=>{u(!1),x(null)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-on-surface",children:"Lead Scoring Rules"}),t.jsx("p",{className:"text-sm text-subtle",children:"Configure rules to automatically score your leads based on their properties"})]}),t.jsxs("button",{onClick:S,disabled:b!==null,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-600/50 text-white rounded-lg font-medium transition-colors",children:[t.jsx(V.Add,{className:"w-4 h-4"}),"Add Rule"]})]}),e.length===0?t.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg border-2 border-dashed border-muted",children:[t.jsx(V.Sparkles,{className:"w-12 h-12 text-muted mx-auto mb-4"}),t.jsx("h4",{className:"text-lg font-medium text-on-surface mb-2",children:"No scoring rules yet"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first rule to start automatically scoring leads based on their properties."}),t.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:[t.jsx(V.Add,{className:"w-4 h-4"}),"Create First Rule"]})]}):t.jsx("div",{className:"grid gap-3",children:e.map((I,M)=>t.jsx("div",{className:"group bg-background border border-muted rounded-lg p-4 hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"flex items-center gap-2 text-sm text-subtle mb-1",children:t.jsxs("span",{className:"bg-primary-100 text-primary-700 px-2 py-1 rounded-full text-xs font-medium",children:["Rule #",M+1]})}),t.jsx("p",{className:"text-on-surface font-medium leading-relaxed",children:k(I)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${I.points>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[I.points>=0?`+${I.points}`:I.points," pts"]}),t.jsx("button",{onClick:L=>{L.stopPropagation(),console.log("Delete button clicked for rule:",I.id),E(I)},disabled:b!==null,className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Delete rule",children:t.jsx(V.Delete,{className:"w-4 h-4"})}),t.jsx("button",{onClick:L=>{L.stopPropagation(),A(I)},disabled:b!==null,className:"p-1.5 text-subtle hover:text-on-surface hover:bg-muted rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Edit rule",children:t.jsx(V.Edit,{className:"w-4 h-4"})})]})]})},I.id))}),e.length>0&&t.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-on-surface mb-1",children:"Scoring Summary"}),t.jsxs("p",{className:"text-sm text-subtle",children:[e.length," rule",e.length!==1?"s":""," configured"]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"font-bold text-green-600",children:["+",e.filter(I=>I.points>0).reduce((I,M)=>I+M.points,0)]}),t.jsx("div",{className:"text-subtle",children:"Max Positive"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-bold text-red-600",children:e.filter(I=>I.points<0).reduce((I,M)=>I+M.points,0)}),t.jsx("div",{className:"text-subtle",children:"Max Negative"})]})]})]})}),t.jsx(FY,{isOpen:i,onClose:O,onSave:w,rule:m,customFieldDefs:r,isLoading:b==="save"}),f&&t.jsx(RY,{isOpen:d,onClose:D,onConfirm:T,ruleDescription:k(f),isLoading:b==="delete"})]})},HY=e=>{const{currentUser:r,hasPermission:n,currentOrganization:a,subscriptionPlans:s,billingHistory:i,onUpdateProfile:l,onUpgradeSubscription:d,onRefreshData:u,onRefreshLeadScoreRules:m}=e,[p,f]=N.useState("profile"),x=[{id:"profile",name:"My Profile",permission:!0},{id:"account",name:"Account & Billing",permission:n(Zt.MANAGE_SETTINGS)},{id:"pipeline",name:"Pipeline",permission:n(Zt.MANAGE_SETTINGS)},{id:"fields",name:"Custom Fields",permission:n(Zt.MANAGE_SETTINGS)},{id:"scoring",name:"Lead Scoring",permission:n(Zt.MANAGE_SETTINGS)},{id:"appearance",name:"Appearance",permission:!0}].filter(b=>b.permission);return a?t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-on-surface mb-2",children:"General Settings"}),t.jsx("div",{className:"border-b border-muted",children:t.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:x.map(b=>t.jsx("button",{onClick:()=>f(b.id),className:`${p===b.id?"border-primary-500 text-primary-500":"border-transparent text-subtle hover:text-on-surface hover:border-muted"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:b.name},b.id))})}),t.jsxs("div",{className:"pt-6",children:[p==="profile"&&t.jsx(BY,{currentUser:r,onUpdateProfile:l}),p==="account"&&t.jsx(WY,{organization:a,plans:s,history:i,onUpgrade:d,onRefreshData:u}),p==="appearance"&&t.jsx(ii,{title:"Appearance",description:"Customize the look and feel of your CRM.",children:t.jsxs("div",{className:"flex items-center justify-between p-4 bg-background rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:"Interface Theme"}),t.jsxs("button",{onClick:e.toggleTheme,className:"relative inline-flex items-center h-8 rounded-full p-1 bg-muted",children:[t.jsx("span",{className:`${e.theme==="light"?"bg-primary-500 text-white":"text-subtle"} px-3 py-1 text-sm rounded-full transition-colors`,children:"Light"}),t.jsx("span",{className:`${e.theme==="dark"?"bg-primary-600 text-white":"text-subtle"} px-3 py-1 text-sm rounded-full transition-colors`,children:"Dark"})]})]})}),p==="pipeline"&&t.jsx(ii,{title:"Pipeline Stages",description:"Customize the stages in your sales pipeline.",permission:Zt.MANAGE_SETTINGS,hasPermission:n,children:t.jsx(UY,{stages:e.pipelineStages,onAdd:e.onAddStage,onUpdate:e.onUpdateStage,onDelete:e.onDeleteStage})}),p==="fields"&&t.jsx(ii,{title:"Custom Fields",description:"Create and manage custom fields for your leads.",permission:Zt.MANAGE_SETTINGS,hasPermission:n,children:t.jsx(qY,{organizationId:a.id,onFieldsChange:b=>console.log("Fields updated:",b)})}),p==="scoring"&&t.jsx(ii,{title:"Lead Scoring",description:"Automate lead prioritization by setting up scoring rules.",permission:Zt.MANAGE_SETTINGS,hasPermission:n,children:t.jsx(VY,{rules:e.leadScoreRules,onSave:e.onSaveLeadScoreRule,onDelete:e.onDeleteLeadScoreRule,customFieldDefs:e.customFieldDefs,onRefreshRules:e.onRefreshLeadScoreRules})})]})]}):null},GY=({rule:e,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i=[],onClose:l,onSave:d})=>{const[u,m]=N.useState(e||{name:"",description:"",isEnabled:!0,trigger:{type:"NEW_LEAD"},conditions:[],action:{type:"ADD_TAG",tag:""}}),p=!!u.id,f=[{id:"source",name:"Source",type:"text"},{id:"dealValue",name:"Deal Value",type:"number"},{id:"score",name:"Score",type:"number"},{id:"campaign",name:"Campaign",type:"text"},{id:"tags",name:"Tags",type:"text"},{id:"stage",name:"Stage",type:"text"},...a],x=w=>{const E=w.target.value;E==="NEW_LEAD"&&m(T=>({...T,trigger:{type:"NEW_LEAD"}})),E==="LEAD_UNTOUCHED"&&m(T=>({...T,trigger:{type:"LEAD_UNTOUCHED",hours:24}})),E==="STAGE_CHANGED"&&m(T=>({...T,trigger:{type:"STAGE_CHANGED",toStage:s[0].id}})),E==="TASK_COMPLETED"&&m(T=>({...T,trigger:{type:"TASK_COMPLETED"}})),E==="LEAD_SCORE_REACHES"&&m(T=>({...T,trigger:{type:"LEAD_SCORE_REACHES",score:80}}))},b=w=>{u.trigger?.type==="LEAD_UNTOUCHED"&&m(E=>({...E,trigger:{type:"LEAD_UNTOUCHED",hours:Number(w)}})),u.trigger?.type==="STAGE_CHANGED"&&m(E=>({...E,trigger:{type:"STAGE_CHANGED",toStage:String(w)}})),u.trigger?.type==="LEAD_SCORE_REACHES"&&m(E=>({...E,trigger:{type:"LEAD_SCORE_REACHES",score:Number(w)}}))},y=()=>{m(w=>({...w,conditions:[...w.conditions||[],{id:Date.now().toString(),field:"source",operator:"equals",value:"",logic:"AND"}]}))},g=(w,E)=>{const T=[...u.conditions||[]];T[w]=E,m(O=>({...O,conditions:T}))},j=w=>{m(E=>({...E,conditions:(E.conditions||[]).filter((T,O)=>O!==w)}))},k=w=>{const E=w.target.value;E==="ADD_TAG"&&m(T=>({...T,action:{type:"ADD_TAG",tag:""}})),E==="ASSIGN_TO_USER"&&m(T=>({...T,action:{type:"ASSIGN_TO_USER",userId:r[0].id}})),E==="ASSIGN_TO_TEAM"&&m(T=>({...T,action:{type:"ASSIGN_TO_TEAM",teamId:n[0].id}})),E==="ASSIGN_ROUND_ROBIN"&&m(T=>({...T,action:{type:"ASSIGN_ROUND_ROBIN",teamId:n[0].id}})),E==="SEND_WEBHOOK"&&m(T=>({...T,action:{type:"SEND_WEBHOOK",url:""}})),E==="CREATE_TASK"&&m(T=>({...T,action:{type:"CREATE_TASK",title:"",dueDays:3}})),E==="ADD_TO_PHONE_LIST"&&m(T=>({...T,action:{type:"ADD_TO_PHONE_LIST",phoneListId:""}}))},S=(w,E)=>{m(T=>{if(!T.action)return T;const O={...T.action,[w]:E};return{...T,action:O}})},A=w=>{w.preventDefault(),d(u),l()};return t.jsx(it,{isOpen:!0,onClose:l,title:p?"Edit Automation Rule":"Add New Rule",children:t.jsxs("form",{onSubmit:A,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Rule Name"}),t.jsx("input",{type:"text",value:u.name,onChange:w=>m({...u,name:w.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Description"}),t.jsx("input",{type:"text",value:u.description,onChange:w=>m({...u,description:w.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{className:"p-4 border border-blue-500/30 bg-blue-500/5 rounded-lg space-y-4",children:[t.jsxs("h3",{className:"font-semibold text-on-surface flex items-center gap-2",children:[t.jsx("span",{className:"bg-blue-900/50 text-blue-300 font-semibold px-2 py-1 rounded-md text-xs",children:"WHEN"})," This happens... (Trigger)"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{value:u.trigger?.type,onChange:x,className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[t.jsx("option",{value:"NEW_LEAD",children:"A New Lead is Created"}),t.jsx("option",{value:"LEAD_UNTOUCHED",children:"Lead is Untouched For..."}),t.jsx("option",{value:"STAGE_CHANGED",children:"Lead Stage Changes to..."}),t.jsx("option",{value:"TASK_COMPLETED",children:"A Task is Completed"}),t.jsx("option",{value:"LEAD_SCORE_REACHES",children:"Lead Score Reaches..."})]}),u.trigger?.type==="LEAD_UNTOUCHED"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:u.trigger.hours,onChange:w=>b(w.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),t.jsx("span",{children:"hours"})]}),u.trigger?.type==="LEAD_SCORE_REACHES"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:u.trigger.score,onChange:w=>b(w.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),t.jsx("span",{children:"points"})]}),u.trigger?.type==="STAGE_CHANGED"&&t.jsx("select",{value:u.trigger.toStage,onChange:w=>b(w.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:s.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))})]}),t.jsxs("h4",{className:"font-semibold text-on-surface text-sm pt-2 flex items-center gap-2",children:[t.jsx("span",{className:"bg-gray-500/50 text-gray-300 font-semibold px-2 py-1 rounded-md text-xs",children:"AND"})," If these conditions match... (Optional)"]}),u.conditions?.map((w,E)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("select",{value:w.field,onChange:T=>g(E,{...w,field:T.target.value}),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:f.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))}),t.jsxs("select",{value:w.operator,onChange:T=>g(E,{...w,operator:T.target.value}),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[t.jsx("option",{value:"contains",children:"Contains"}),t.jsx("option",{value:"equals",children:"Is"}),t.jsx("option",{value:"not_equals",children:"Is Not"}),t.jsx("option",{value:"gt",children:">"}),t.jsx("option",{value:"lt",children:"<"})]}),t.jsx("input",{type:"text",value:w.value,onChange:T=>g(E,{...w,value:T.target.value}),placeholder:"Value",className:"bg-background border border-muted p-2 rounded-lg text-sm"}),t.jsx("button",{type:"button",onClick:()=>j(E),children:t.jsx(V.Delete,{className:"h-4 w-4 text-red-400"})})]},w.id)),t.jsx("button",{type:"button",onClick:y,className:"text-sm text-primary-500 font-semibold hover:text-primary-600",children:"+ Add Condition"})]}),t.jsxs("div",{className:"p-4 border border-purple-500/30 bg-purple-500/5 rounded-lg space-y-4",children:[t.jsxs("h3",{className:"font-semibold text-on-surface flex items-center gap-2",children:[t.jsx("span",{className:"bg-purple-900/50 text-purple-300 font-semibold px-2 py-1 rounded-md text-xs",children:"THEN"})," Do this... (Action)"]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("select",{value:u.action?.type,onChange:k,className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[t.jsx("option",{value:"ASSIGN_TO_USER",children:"Assign to User"}),t.jsx("option",{value:"ASSIGN_TO_TEAM",children:"Assign to Team"}),t.jsx("option",{value:"ASSIGN_ROUND_ROBIN",children:"Assign via Round Robin (in Team)"}),t.jsx("option",{value:"ADD_TAG",children:"Add Tag"}),t.jsx("option",{value:"SEND_WEBHOOK",children:"Send Webhook"}),t.jsx("option",{value:"CREATE_TASK",children:"Create a Task"}),t.jsx("option",{value:"ADD_TO_PHONE_LIST",children:"Add to Phone List"})]}),u.action?.type==="ASSIGN_TO_USER"&&t.jsx("select",{value:u.action.userId,onChange:w=>S("userId",Number(w.target.value)),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:r.filter(w=>w.role!=="Admin").map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))}),(u.action?.type==="ASSIGN_TO_TEAM"||u.action?.type==="ASSIGN_ROUND_ROBIN")&&t.jsx("select",{value:u.action.teamId,onChange:w=>S("teamId",w.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:n.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))}),u.action?.type==="ADD_TAG"&&t.jsx("input",{type:"text",value:u.action.tag,onChange:w=>S("tag",w.target.value),placeholder:"tag name",className:"bg-background border border-muted p-2 rounded-lg text-sm"}),u.action?.type==="SEND_WEBHOOK"&&t.jsx("input",{type:"url",value:u.action.url,onChange:w=>S("url",w.target.value),placeholder:"https://example.com/webhook",className:"w-full bg-background border border-muted p-2 rounded-lg text-sm"}),u.action?.type==="CREATE_TASK"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"text",value:u.action.title,onChange:w=>S("title",w.target.value),placeholder:"Task Title",className:"bg-background border border-muted p-2 rounded-lg text-sm flex-grow"}),t.jsx("span",{className:"text-sm text-subtle",children:"due in"}),t.jsx("input",{type:"number",value:u.action.dueDays,onChange:w=>S("dueDays",Number(w.target.value)),className:"bg-background border border-muted p-2 rounded-lg text-sm w-20"}),t.jsx("span",{className:"text-sm text-subtle",children:"days"})]}),u.action?.type==="ADD_TO_PHONE_LIST"&&t.jsxs("select",{value:u.action.phoneListId,onChange:w=>S("phoneListId",w.target.value),className:"bg-background border border-muted p-2 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:"Select a phone list"}),i.map(w=>t.jsxs("option",{value:w.id,children:[w.name," (",w.totalContacts||0," contacts)"]},w.id))]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:l,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Rule"})]})]})})},KY=({rule:e,users:r,teams:n,phoneLists:a,onToggle:s,onEdit:i,onDelete:l})=>{const d=m=>{const{action:p}=m;switch(p.type){case"ASSIGN_TO_USER":const f=r.find(g=>g.id===p.userId);return`Assign to ${f?f.name:"Unknown User"}`;case"ASSIGN_TO_TEAM":const x=n.find(g=>g.id===p.teamId);return`Assign to Team: ${x?x.name:"Unknown"}`;case"ASSIGN_ROUND_ROBIN":const b=n.find(g=>g.id===p.teamId);return`Round-Robin in Team: ${b?b.name:"Unknown"}`;case"ADD_TAG":return`Add tag: "${p.tag}"`;case"SEND_WEBHOOK":return"Send webhook to URL";case"CREATE_TASK":return`Create task: "${p.title}"`;case"ADD_TO_PHONE_LIST":const y=a.find(g=>g.id===p.phoneListId);return`Add to Phone List: ${y?y.name:"Unknown List"}`;default:return"Perform an action"}},u=m=>{const{trigger:p}=m;let f="";switch(p.type){case"NEW_LEAD":f="A new lead is created";break;case"LEAD_UNTOUCHED":f=`A lead is untouched for ${p.hours} hours`;break;case"STAGE_CHANGED":f="A lead's stage is changed";break;case"TASK_COMPLETED":f="A task is completed";break;case"LEAD_SCORE_REACHES":f=`Lead score reaches ${p.score}`;break}return m.conditions.length>0?`${f} that matches conditions...`:f};return t.jsxs("div",{className:"bg-surface rounded-lg shadow-lg p-6 flex flex-col justify-between",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-muted p-3 rounded-lg mr-4",children:t.jsx(V.Automation,{className:"h-6 w-6 text-primary-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-on-surface",children:e.name}),t.jsx("p",{className:"text-sm text-subtle mt-1",children:e.description})]})]}),t.jsxs("div",{className:"mt-4 space-y-2 text-xs",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"bg-blue-900/50 text-blue-300 font-semibold px-2 py-1 rounded-md",children:"WHEN"}),t.jsx("span",{className:"text-subtle pt-1",children:u(e)})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"bg-purple-900/50 text-purple-300 font-semibold px-2 py-1 rounded-md",children:"THEN"}),t.jsx("span",{className:"text-subtle pt-1",children:d(e)})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-muted",children:[t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:()=>s({...e,isEnabled:!e.isEnabled}),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]}),t.jsx("div",{className:"flex-grow"}),t.jsx("button",{onClick:()=>i(e),className:"p-1 text-subtle hover:text-on-surface",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>window.confirm(`Are you sure you want to delete the rule "${e.name}"?`)&&l(e.id),className:"p-1 text-subtle hover:text-red-400",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]})},YY=({rules:e,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i=[],onSaveRule:l,onDeleteRule:d})=>{const[u,m]=N.useState(!1),[p,f]=N.useState(null),x=(y=null)=>{f(y),m(!0)},b=()=>{f(null),m(!1)};return t.jsxs("div",{className:"space-y-8",children:[u&&t.jsx(GY,{rule:p,users:r,teams:n,customFieldDefs:a,pipelineStages:s,phoneLists:i,onClose:b,onSave:l}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-on-surface",children:"Automation"}),t.jsx("p",{className:"text-subtle mt-1",children:"Automate your sales and marketing workflows to save time."})]}),t.jsxs("button",{onClick:()=>x(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," New Rule"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(y=>t.jsx(KY,{rule:y,users:r,teams:n,phoneLists:i,onToggle:l,onEdit:x,onDelete:d},y.id))})]})},XY=({isOpen:e,onClose:r,onConfirm:n,teamName:a,isLoading:s=!1,memberCount:i=0,leadCount:l=0})=>{const d=()=>{n()},u=()=>{s||r()};return t.jsx(Yc,{isOpen:e,onClose:u,title:"Delete Team",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(Lt.XCircle,{className:"w-5 h-5 text-red-600"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"Are you sure you want to delete this team?"}),t.jsx("p",{className:"text-subtle",children:"This action cannot be undone. All team members will need to be reassigned to other teams."})]})]}),t.jsx("div",{className:"bg-background rounded-lg p-4 border border-muted",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full bg-primary-500 flex-shrink-0"}),t.jsx("span",{className:"font-medium text-on-surface",children:a}),t.jsxs("div",{className:"flex gap-2",children:[i>0&&t.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[i," member",i!==1?"s":""]}),l>0&&t.jsxs("span",{className:"text-sm text-subtle bg-muted px-2 py-1 rounded-full",children:[l," lead",l!==1?"s":""]})]})]})}),(i>0||l>0)&&t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Lt.XCircle,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Impact Warning"}),t.jsxs("p",{className:"text-sm text-amber-700",children:["This team has ",i>0&&`${i} member${i!==1?"s":""}`,i>0&&l>0&&" and ",l>0&&`${l} lead${l!==1?"s":""}`,i>0||l>0?". ":"","Deleting it will require you to reassign these members and leads to other teams."]})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50",disabled:s,children:"Cancel"}),t.jsxs("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:s,children:[s&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Deleting...":"Delete Team"]})]})]})})},JY=({team:e,users:r,onClose:n,onSave:a,isSubmitting:s=!1})=>{const[i,l]=N.useState(()=>e?{...e}:{name:"",leadId:0,memberIds:[]}),d=!!e?.id;N.useEffect(()=>{e?l({...e}):(l({name:"",leadId:0,memberIds:[]}),console.log("Reset form data for new team:",{name:"",leadId:0,memberIds:[]}))},[e]);const u=r.filter(x=>x.role===Wt.MANAGER||x.role===Wt.ADMIN),m=r.filter(x=>x.role===Wt.SALES_REP&&(!x.teamId||x.teamId===i.id)),p=x=>{l(b=>{const y=b.memberIds.includes(x)?b.memberIds.filter(g=>g!==x):[...b.memberIds,x];return{...b,memberIds:y}})},f=x=>{if(x.preventDefault(),!i.name||!i.leadId){alert("Team Name and Team Lead are required.");return}const b={...i};d?console.log("Updating existing team:",b):(delete b.id,console.log("Creating new team, cleaned data:",b)),a(b),n()};return t.jsx(it,{isOpen:!0,onClose:n,title:d?"Edit Team":"Create New Team",children:t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-on-surface",children:["Team Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:i.name,onChange:x=>l({...i,name:x.target.value}),required:!0,placeholder:"Enter team name",className:"w-full bg-background border border-muted rounded-lg shadow-sm py-3 px-4 text-on-surface placeholder-subtle focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200",disabled:s})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-on-surface",children:["Team Lead (Manager) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:i.leadId,onChange:x=>l({...i,leadId:Number(x.target.value)}),required:!0,className:"w-full bg-background border border-muted rounded-lg shadow-sm py-3 px-4 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 disabled:opacity-50",disabled:s,children:[t.jsx("option",{value:0,disabled:!0,children:"Select a manager"}),u.map(x=>t.jsxs("option",{value:x.id,children:[x.name," ",x.role===Wt.ADMIN&&"(Admin)"]},x.id))]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"block text-sm font-medium text-on-surface",children:"Team Members (Sales Reps)"}),t.jsxs("span",{className:"text-xs text-subtle",children:[i.memberIds.length," selected"]})]}),t.jsx("div",{className:"max-h-48 overflow-y-auto p-3 bg-background rounded-lg border border-muted",children:m.length===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("p",{className:"text-sm text-subtle",children:"No sales representatives available"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:"Add sales reps in the Users section first"})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map(x=>t.jsxs("label",{className:"flex items-center p-3 hover:bg-muted/50 rounded-lg cursor-pointer transition-colors duration-200",children:[t.jsx("input",{type:"checkbox",checked:i.memberIds.includes(x.id),onChange:()=>p(x.id),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 border-muted",disabled:s}),t.jsxs("div",{className:"ml-3 flex items-center gap-2 min-w-0",children:[t.jsx("img",{src:x.avatar,alt:x.name,className:"h-6 w-6 rounded-full flex-shrink-0"}),t.jsx("span",{className:"text-sm text-on-surface truncate",children:x.name})]})]},x.id))})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2.5 text-sm font-medium text-subtle bg-background border border-muted rounded-lg hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 order-2 sm:order-1",disabled:s,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-4 py-2.5 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 order-1 sm:order-2",disabled:s,children:[s&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"Saving...":d?"Update Team":"Create Team"]})]})]})})},ZY=({teams:e,users:r,onSaveTeam:n,onDeleteTeam:a})=>{const[s,i]=N.useState(!1),[l,d]=N.useState(null),[u,m]=N.useState(!1),[p,f]=N.useState(null),[x,b]=N.useState(!1),[y,g]=N.useState(!1),j=(T=null)=>{d(T),i(!0)},k=T=>{f(T),m(!0)},S=()=>{m(!1),f(null)},A=async T=>{b(!0);try{await n(T),i(!1),d(null)}catch(O){console.error("Failed to save team:",O)}finally{b(!1)}},w=async()=>{if(p){g(!0);try{await a(p.id),S()}catch(T){console.error("Failed to delete team:",T)}finally{g(!1)}}},E=T=>({memberCount:r.filter(O=>T.memberIds.includes(O.id)).length,leadCount:0});return t.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-on-surface",children:"Teams"}),t.jsx("p",{className:"text-sm sm:text-base text-subtle",children:"Organize your sales reps and managers into teams for better collaboration."})]}),t.jsxs("button",{onClick:()=>j(),className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-semibold py-2.5 px-4 rounded-lg flex items-center gap-2 transition-colors duration-200 shadow-sm hover:shadow-md w-full sm:w-auto justify-center",disabled:x,children:[x?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(V.Add,{className:"w-4 h-4"}),"New Team"]})]}),e.length===0?t.jsxs("div",{className:"text-center py-12 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(V.Team,{className:"w-8 h-8 text-subtle"})}),t.jsx("h3",{className:"text-lg font-medium text-on-surface mb-2",children:"No teams yet"}),t.jsx("p",{className:"text-subtle mb-6 max-w-sm mx-auto",children:"Get started by creating your first team to organize your sales team members."}),t.jsxs("button",{onClick:()=>j(),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2.5 px-4 rounded-lg inline-flex items-center gap-2 transition-colors duration-200",disabled:x,children:[t.jsx(V.Add,{className:"w-4 h-4"}),"Create Your First Team"]})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:e.map(T=>{const O=r.find(M=>M.id===T.leadId),D=r.filter(M=>T.memberIds.includes(M.id)),{memberCount:I}=E(T);return t.jsxs("div",{className:"bg-surface rounded-xl shadow-sm hover:shadow-md border border-muted/50 p-6 transition-all duration-200 group",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-primary-500 flex-shrink-0"}),t.jsx("h3",{className:"font-bold text-lg text-on-surface truncate",children:T.name})]}),t.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[t.jsx("button",{onClick:()=>j(T),className:"p-2 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors duration-200",title:"Edit team",disabled:x,children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>k(T),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete team",disabled:x,children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs font-semibold text-subtle uppercase tracking-wide mb-2",children:"Team Lead"}),O?t.jsxs("div",{className:"flex items-center gap-3 p-2 bg-background rounded-lg",children:[t.jsx("img",{src:O.avatar,alt:O.name,className:"h-8 w-8 rounded-full"}),t.jsx("span",{className:"text-sm font-medium text-on-surface",children:O.name})]}):t.jsx("div",{className:"p-2 bg-muted/50 rounded-lg",children:t.jsx("span",{className:"text-sm text-subtle",children:"No team lead assigned"})})]}),t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsxs("p",{className:"text-xs font-semibold text-subtle uppercase tracking-wide",children:["Members (",I,")"]})}),D.length>0?t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.slice(0,3).map(M=>t.jsxs("div",{className:"flex items-center gap-2 bg-background px-2 py-1 rounded-full",children:[t.jsx("img",{src:M.avatar,alt:M.name,className:"h-5 w-5 rounded-full"}),t.jsx("span",{className:"text-xs text-on-surface font-medium",children:M.name})]},M.id)),D.length>3&&t.jsx("div",{className:"flex items-center gap-2 bg-muted px-2 py-1 rounded-full",children:t.jsxs("span",{className:"text-xs text-subtle font-medium",children:["+",D.length-3," more"]})})]})}):t.jsx("div",{className:"p-3 bg-muted/30 rounded-lg text-center",children:t.jsx("span",{className:"text-sm text-subtle",children:"No members in this team"})})]})]},T.id)})}),s&&t.jsx(JY,{team:l,users:r,onClose:()=>{i(!1),d(null)},onSave:A,isSubmitting:x}),u&&p&&t.jsx(XY,{isOpen:u,onClose:S,onConfirm:w,teamName:p.name,isLoading:y,memberCount:E(p).memberCount,leadCount:E(p).leadCount})]})},QY=({template:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{id:"",name:"",body:"",organizationId:""}),i=!!a.id,l=d=>{d.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:i?"Edit Template":"Create New Template",children:t.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),t.jsx("input",{type:"text",value:a.name,onChange:d=>s({...a,name:d.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message Body"}),t.jsx("textarea",{rows:6,value:a.body,onChange:d=>s({...a,body:d.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"}),t.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{dealValue}}"}),", and ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center bg-background p-4 rounded-lg border border-muted h-full",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-4",children:"Live Preview"}),t.jsx("div",{className:"w-72 h-96 bg-slate-800 rounded-3xl p-4 flex flex-col shadow-2xl",style:{backgroundImage:"url(https://i.pinimg.com/736x/8c/98/99/8c98994518b575bfd8c949e91d20548b.jpg)",backgroundSize:"cover"},children:t.jsx("div",{className:"flex-grow rounded-lg mt-4 p-2 overflow-y-auto flex flex-col justify-end",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm p-2 rounded-lg max-w-xs self-start whitespace-pre-wrap shadow-md",children:a.body||"Your WhatsApp message will appear here..."})})})]}),t.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 pt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},eX=({campaign:e,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=N.useState(e||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,p]=N.useState(e?.status==="SCHEDULED"?"later":e?.status==="SENT"?"now":"draft"),[f,x]=N.useState((e?.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),b=y=>{y.preventDefault();const g={...d};m==="now"?(g.status="SENT",g.sentAt=new Date().toISOString(),g.scheduledAt=null):m==="later"?(g.status="SCHEDULED",g.scheduledAt=new Date(f).toISOString(),g.sentAt=null):(g.status="DRAFT",g.sentAt=null,g.scheduledAt=null),l(g),i()};return t.jsx(it,{isOpen:!0,onClose:i,title:e?.id?"Edit Campaign":"Create New Campaign",children:t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),t.jsx("input",{value:d.name,onChange:y=>u({...d,name:y.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"WhatsApp Template"}),t.jsxs("select",{value:d.templateId,onChange:y=>u({...d,templateId:y.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Select a template"}),r.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{className:"pt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),t.jsx(Kc,{conditions:d.conditions||[],onConditionsChange:y=>u({...d,conditions:y}),users:n,pipelineStages:a,customFieldDefs:s})]}),t.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&t.jsx("div",{className:"pl-9",children:t.jsx("input",{type:"datetime-local",value:f,onChange:y=>x(y.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},Vl=({title:e,description:r,children:n})=>t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:e}),r&&t.jsx("p",{className:"text-subtle mt-1 mb-6",children:r}),t.jsx("div",{className:"space-y-4",children:n})]}),tX=e=>`<script src="https://cdn.Clienn CRM.io/chatbot.js" data-org-id="${e.organizationId}" async defer><\/script>`,rX=({customFieldDefs:e,users:r,pipelineStages:n})=>{const[a,s]=N.useState("campaigns"),[i,l]=N.useState({type:null,data:null}),[d,u]=N.useState([]),[m,p]=N.useState([]),[f,x]=N.useState(null),[b,y]=N.useState(!0),[g,j]=N.useState(null),k=N.useRef(null),S=N.useRef(null),A={isEnabled:!1,welcomeMessage:"Hi there! Welcome to our website. I'm here to help you get started. What is your name?",thankYouMessage:"Thanks for the information! Someone from our team will get in touch with you shortly.",questions:[{id:crypto.randomUUID(),question:"Great, {{name}}! What's your email?",crmField:"email",type:"email"},{id:crypto.randomUUID(),question:"Thanks! And your phone number?",crmField:"phone",type:"phone"}],keywordRules:[],aiSystemPrompt:"You are a friendly and efficient assistant. Your goal is to collect visitor information to create a lead. Be concise and friendly.",widgetColor:"#25D366",widgetPosition:"bottom-right",widgetStyle:"icon",organizationId:""},w=f||A,E=N.useCallback(async(F,_)=>{if(!w)return;const G={...w,[F]:_};x(G),k.current&&clearTimeout(k.current),k.current=setTimeout(async()=>{await M(G)},1e3)},[w]);N.useEffect(()=>{(async()=>{try{y(!0),j(null);const F=localStorage.getItem("token")||localStorage.getItem("authToken"),_=F?{Authorization:`Bearer ${F}`}:{},[G,Z,oe]=await Promise.all([fetch("/api/marketing/templates/whatsapp",{headers:_}).then(le=>le.json()).then(le=>le.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/whatsapp",{headers:_}).then(le=>le.json()).then(le=>le.data||[]).catch(()=>[]),fetch("/api/settings/chatbot",{headers:_}).then(le=>le.json()).then(le=>le.data||null).catch(()=>null)]);u(G||[]),p(Z||[]),x(oe)}catch(F){console.error("Failed to fetch WhatsApp data:",F),j(`Failed to load data: ${F.message}`)}finally{y(!1)}})()},[]);const T=async F=>{try{const _=localStorage.getItem("token")||localStorage.getItem("authToken");if(!_)throw new Error("No authentication token found. Please log in again.");let G;if(F.id?G=await fetch(`/api/marketing/templates/whatsapp/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(F)}):G=await fetch("/api/marketing/templates/whatsapp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(F)}),!G.ok){const oe=await G.text();throw new Error(`Failed to save template: ${G.statusText} - ${oe}`)}const Z=await G.json();F.id?u(oe=>oe.map(le=>le.id===F.id?Z:le)):u(oe=>[...oe,Z])}catch(_){console.error("Failed to save template:",_),j(`Failed to save template: ${_.message}`)}},O=async F=>{if(confirm("Are you sure you want to delete this template?"))try{const _=localStorage.getItem("token")||localStorage.getItem("authToken");if(!_)throw new Error("No authentication token found. Please log in again.");const G=await fetch(`/api/marketing/templates/whatsapp/${F}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}});if(!G.ok){const Z=await G.text();throw new Error(`Failed to delete template: ${G.statusText} - ${Z}`)}u(Z=>Z.filter(oe=>oe.id!==F))}catch(_){console.error("Failed to delete template:",_),j(`Failed to delete template: ${_.message}`)}},D=async F=>{try{const _=localStorage.getItem("token")||localStorage.getItem("authToken");if(!_)throw new Error("No authentication token found. Please log in again.");let G;if(F.id?G=await fetch(`/api/marketing/campaigns/whatsapp/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(F)}):G=await fetch("/api/marketing/campaigns/whatsapp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(F)}),!G.ok){const oe=await G.text();throw new Error(`Failed to save campaign: ${G.statusText} - ${oe}`)}const Z=await G.json();F.id?p(oe=>oe.map(le=>le.id===F.id?Z:le)):p(oe=>[...oe,Z])}catch(_){console.error("Failed to save campaign:",_),j(`Failed to save campaign: ${_.message}`)}},I=async F=>{if(confirm("Are you sure you want to delete this campaign?"))try{const _=localStorage.getItem("token")||localStorage.getItem("authToken");if(!_)throw new Error("No authentication token found. Please log in again.");const G=await fetch(`/api/marketing/campaigns/whatsapp/${F}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}});if(!G.ok){const Z=await G.text();throw new Error(`Failed to delete campaign: ${G.statusText} - ${Z}`)}p(Z=>Z.filter(oe=>oe.id!==F))}catch(_){console.error("Failed to delete campaign:",_),j(`Failed to delete campaign: ${_.message}`)}},M=async F=>{try{const _=localStorage.getItem("token")||localStorage.getItem("authToken");if(!_)throw new Error("No authentication token found. Please log in again.");const G=await fetch("/api/settings/chatbot",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(F)});if(!G.ok){const oe=await G.text();throw new Error(`Failed to save chatbot config: ${G.statusText} - ${oe}`)}const Z=await G.json();x(Z)}catch(_){console.error("Failed to save chatbot config:",_),j(`Failed to save chatbot config: ${_.message}`)}},L=async F=>{try{const _={...F,status:"SENT",sentAt:new Date().toISOString()};await D(_),alert("Campaign sent successfully!")}catch(_){console.error("Failed to send campaign:",_),j(`Failed to send campaign: ${_.message}`)}},B=async F=>{try{const _={...F,status:"DRAFT",scheduledAt:null};await D(_),alert("Campaign unscheduled successfully!")}catch(_){console.error("Failed to unschedule campaign:",_),j(`Failed to unschedule campaign: ${_.message}`)}};if(b)return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-lg",children:"Loading WhatsApp data..."})]})});if(g)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:g}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const z=(F,_=null)=>{l({type:F,data:_})},W=()=>{l({type:null,data:null})},R=async(F,_,G)=>{if(!w)return;const Z=(w.questions||[]).map(le=>le.id===F?{...le,[_]:G}:le),oe={...w,questions:Z};x(oe),S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{await M(oe)},1e3)},H=async()=>{if(!w)return;const F={id:crypto.randomUUID(),question:"",crmField:"name",type:"text"},_={...w,questions:[...w.questions||[],F]};x(_),await M(_)},U=async F=>{if(!w)return;const _={...w,questions:(w.questions||[]).filter(G=>G.id!==F)};x(_),await M(_)},q=[{value:"name",label:"Name"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"company",label:"Company"},{value:"city",label:"City"},{value:"course",label:"Course"},...(e||[]).map(F=>({value:`customFields.${F.id}`,label:`(Custom) ${F.name}`}))],Q=F=>{switch(F.status){case"SENT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}},K=()=>{switch(a){case"campaigns":return"New Campaign";case"templates":return"New Template";default:return null}};return t.jsxs("div",{className:"space-y-6",children:[i.type==="template"&&t.jsx(QY,{template:i.data,onClose:W,onSave:T}),i.type==="campaign"&&t.jsx(eX,{campaign:i.data,templates:d,users:r,pipelineStages:n,customFieldDefs:e,onClose:W,onSave:D}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[t.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),t.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),t.jsx("button",{onClick:()=>s("chatbot"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="chatbot"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Website Chatbot"}),t.jsx("button",{onClick:()=>s("integration"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="integration"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Settings"})]}),K()&&t.jsxs("button",{onClick:()=>z(a),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",K()]})]}),a==="campaigns"&&(m.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(F=>t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:F.name}),Q(F)]}),F.status==="SCHEDULED"&&F.scheduledAt&&t.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(F.scheduledAt).toLocaleString()]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold",children:F.recipientCount.toLocaleString()}),t.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-2xl font-bold",children:[F.deliveryRate,"%"]}),t.jsx("p",{className:"text-xs text-subtle",children:"Delivery Rate"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>z("campaign",F),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),F.status==="DRAFT"&&t.jsx("button",{onClick:()=>L(F),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),F.status==="SCHEDULED"&&t.jsx("button",{onClick:()=>B(F),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),t.jsx("button",{onClick:()=>I(F.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]},F.id))}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Whatsapp,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No WhatsApp Campaigns Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first WhatsApp campaign to get started with WhatsApp marketing."}),t.jsxs("button",{onClick:()=>z("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="integration"&&t.jsxs(Vl,{title:"API Configuration",description:"Enter your credentials from your WhatsApp Business API provider (e.g., Meta, Twilio).",children:[t.jsx("input",{type:"password",placeholder:"API Key / Access Token",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3"}),t.jsx("input",{type:"password",placeholder:"API Secret / Account SID",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3"}),t.jsx("input",{type:"text",readOnly:!0,value:"https://api.Clienn CRM.io/webhooks/whatsapp",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 text-subtle cursor-not-allowed"})]}),a==="templates"&&(d.length>0?t.jsx(Vl,{title:"Message Templates",description:"Create reusable templates for quick and consistent communication.",children:t.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(F=>t.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:F.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>z("template",F),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>O(F.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),t.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap bg-muted/50 p-2 rounded",children:F.body})]},F.id))})}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Whatsapp,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No WhatsApp Templates Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first WhatsApp template to start building campaigns."}),t.jsxs("button",{onClick:()=>z("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="chatbot"&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs(Vl,{title:"Chatbot Status & Installation",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-background rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:"Enable Website Chatbot"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.isEnabled,onChange:F=>E("isEnabled",F.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-subtle",children:"Copy this code into your website's HTML before the closing `</body>` tag."}),t.jsx("pre",{className:"bg-background p-4 rounded-lg text-xs text-on-surface overflow-auto mt-2 font-mono",children:tX(w)})]})]}),t.jsx(Vl,{title:"Widget Customization",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Color"}),t.jsx("input",{type:"color",value:w.widgetColor,onChange:F=>E("widgetColor",F.target.value),className:"mt-1 w-full h-10 p-1 bg-background border border-muted rounded-md cursor-pointer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Style"}),t.jsxs("select",{value:w.widgetStyle,onChange:F=>E("widgetStyle",F.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3 h-10",children:[t.jsx("option",{value:"icon",children:"Icon only"}),t.jsx("option",{value:"button",children:"Button with text"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Widget Position"}),t.jsxs("select",{value:w.widgetPosition,onChange:F=>E("widgetPosition",F.target.value),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",children:[t.jsx("option",{value:"bottom-right",children:"Bottom Right"}),t.jsx("option",{value:"bottom-left",children:"Bottom Left"})]})]})]}),t.jsxs("div",{className:"relative h-80 bg-slate-200 dark:bg-slate-800 rounded-lg overflow-hidden flex items-center justify-center p-4",children:[t.jsx("p",{className:"text-sm text-subtle font-semibold",children:"Live Preview"}),t.jsx("div",{className:`absolute bottom-5 ${w.widgetPosition==="bottom-left"?"left-5":"right-5"}`,children:t.jsxs("button",{className:"transition-all duration-300 ease-in-out text-white shadow-lg flex items-center gap-2",style:{backgroundColor:w.widgetColor,borderRadius:w.widgetStyle==="icon"?"50%":"30px",padding:w.widgetStyle==="icon"?"1rem":"1rem 1.5rem"},children:[t.jsx(V.ChatBubble,{className:"w-6 h-6"}),w.widgetStyle==="button"&&t.jsx("span",{className:"font-semibold",children:"Chat with us"})]})})]})]})}),t.jsxs(Vl,{title:"Conversation Flow",description:"Define how the chatbot interacts with visitors.",children:[t.jsx("textarea",{value:w.welcomeMessage,onChange:F=>E("welcomeMessage",F.target.value),rows:3,className:"w-full bg-background border border-muted rounded-md py-2 px-3",placeholder:"Welcome message..."}),t.jsxs("div",{className:"space-y-2",children:[(w.questions||[]).map((F,_)=>t.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr_auto] items-center gap-2 p-2 bg-background rounded-md",children:[t.jsxs("span",{className:"text-subtle font-bold",children:[_+1,"."]}),t.jsx("input",{type:"text",value:F.question,onChange:G=>R(F.id,"question",G.target.value),placeholder:"Question...",className:"bg-surface border border-muted p-1 rounded-md"}),t.jsx("span",{className:"text-subtle text-sm",children:"maps to:"}),t.jsx("select",{value:F.crmField,onChange:G=>R(F.id,"crmField",G.target.value),className:"bg-surface border border-muted p-1 rounded-md text-sm",children:q.map(G=>t.jsx("option",{value:G.value,children:G.label},G.value))}),t.jsx("button",{onClick:()=>U(F.id),className:"text-red-400 hover:text-red-300",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]},F.id)),t.jsx("button",{onClick:H,className:"text-sm text-primary-500 font-semibold",children:"+ Add Question"})]}),t.jsx("textarea",{value:w.thankYouMessage,onChange:F=>E("thankYouMessage",F.target.value),rows:3,className:"w-full bg-background border border-muted rounded-md py-2 px-3",placeholder:"Thank you message..."})]})]})]})},nX=({onLogin:e,content:r,features:n})=>{const[a,s]=N.useState(""),[i,l]=N.useState(""),[d,u]=N.useState(!1),[m,p]=N.useState(null),[f,x]=N.useState(!1),[b,y]=N.useState(0);N.useEffect(()=>{const j=setInterval(()=>{y(k=>(k+1)%n.length)},5e3);return()=>clearInterval(j)},[n.length]);const g=async j=>{j.preventDefault(),p(null),x(!0);const k=await e(a,i);k&&p(k),x(!1)};return t.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-2 bg-background",children:[t.jsxs("div",{className:"hidden lg:flex flex-col justify-between p-12 bg-slate-100 dark:bg-slate-900/50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 z-0",children:[t.jsx("div",{className:"animate-float absolute -top-20 -left-20 w-96 h-96 bg-gradient-to-r from-blue-200 to-purple-200 dark:from-blue-900/50 dark:to-purple-900/50 rounded-full blur-3xl opacity-50",style:{animationDelay:"0s"}}),t.jsx("div",{className:"animate-float absolute -bottom-20 -right-10 w-96 h-96 bg-gradient-to-r from-yellow-200 to-pink-200 dark:from-yellow-900/50 dark:to-pink-900/50 rounded-full blur-3xl opacity-50",style:{animationDelay:"3s"}})]}),t.jsx("div",{className:"relative z-10",children:t.jsxs(vt,{to:"/",className:"flex items-center gap-3",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center my-auto",children:[t.jsx("div",{className:"relative w-full max-w-lg h-72 mb-8 rounded-2xl shadow-2xl overflow-hidden bg-muted",children:n.map((j,k)=>t.jsx("img",{src:j.image.src,alt:j.image.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${b===k?"opacity-100":"opacity-0"}`},j.id))}),t.jsx("div",{className:"relative h-32 w-full max-w-lg",children:n.map((j,k)=>t.jsxs("div",{className:`absolute inset-0 transition-all duration-700 ease-in-out ${b===k?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:j.title}),t.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400 max-w-md mx-auto line-clamp-3",children:j.description})]},j.id))})]}),t.jsx("div",{className:"relative z-10 flex justify-center space-x-3",children:n.map((j,k)=>t.jsx("button",{onClick:()=>y(k),"aria-label":`Go to slide ${k+1}`,className:`w-2.5 h-2.5 rounded-full transition-all duration-300 ${b===k?"bg-primary-500 scale-125":"bg-slate-400 dark:bg-slate-600 hover:bg-primary-300"}`},k))})]}),t.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-sm",children:[t.jsxs(vt,{to:"/",className:"block text-center mb-8 group",children:[t.jsx(V.Logo,{className:"h-10 w-auto text-primary-500 mx-auto transition-transform group-hover:scale-110"}),t.jsx("h2",{className:"mt-6 text-2xl font-bold text-on-surface",children:"Welcome Back"}),t.jsx("p",{className:"text-subtle text-sm",children:"Sign in to continue to Clienn CRM"})]}),t.jsx("div",{className:"bg-surface p-8 rounded-xl shadow-2xl border border-muted/50",children:t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[m&&t.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm",role:"alert",children:m}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-subtle",children:"Email"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a,onChange:j=>s(j.target.value),className:`mt-1 block w-full px-3 py-2 bg-background border border-muted rounded-md text-sm shadow-sm placeholder-subtle 
                                    focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/50 transition duration-150`})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-subtle",children:"Password"}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,value:i,onChange:j=>l(j.target.value),className:`block w-full px-3 py-2 bg-background border border-muted rounded-md text-sm shadow-sm placeholder-subtle 
                                        focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/50 transition duration-150`}),t.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute inset-y-0 right-0 flex items-center px-3 text-subtle",children:d?t.jsx(V.EyeOff,{className:"h-5 w-5"}):t.jsx(V.Eye,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign In with OTP"}),t.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot Password?"})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-surface focus:ring-primary-500 disabled:bg-primary-400 disabled:cursor-not-allowed",children:f?"Signing In...":"Sign In"})})]})}),t.jsxs("div",{className:"mt-8 text-center text-sm text-subtle space-y-2",children:[t.jsxs("p",{children:["Don't have an account? ",t.jsx(vt,{to:"/",className:"font-medium text-primary-400 hover:text-primary-300",children:"Start your free trial"})]}),t.jsx("p",{children:t.jsx(vt,{to:"/",className:"font-medium text-subtle hover:text-on-surface",children:" Back to Home"})})]})]})})]})},a6=e=>{if(e===null||e<0)return"N/A";const r=Math.floor(e/1e3),n=Math.floor(r/3600),a=Math.floor(r%3600/60),s=Math.floor(r%60);return[n>0?`${n}h`:"",a>0?`${a}m`:"",s>0?`${s}s`:""].filter(Boolean).join(" ")||"0s"},aX=({users:e,onToggleTracking:r})=>t.jsxs("div",{className:"bg-surface rounded-lg shadow-lg",children:[t.jsxs("div",{className:"p-4 border-b border-muted",children:[t.jsx("h3",{className:"font-semibold text-on-surface",children:"Manage User Tracking"}),t.jsx("p",{className:"text-sm text-subtle",children:"Enable or disable activity tracking for individual users."})]}),t.jsx("div",{className:"max-h-72 overflow-y-auto",children:e.filter(n=>n.role!==Wt.ADMIN&&n.role!==Wt.SUPER_ADMIN).map(n=>t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-muted last:border-b-0",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("img",{src:n.avatar,alt:n.name,className:"h-10 w-10 rounded-full object-cover"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"font-medium text-on-surface",children:n.name}),t.jsx("p",{className:"text-sm text-subtle",children:n.role})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n.isTrackingEnabled,onChange:()=>r(n.id),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},n.id))})]}),sX=({users:e,sessionLogs:r,teams:n,onToggleTracking:a,currentUser:s})=>{const[i,l]=N.useState("all"),[d,u]=N.useState("all"),[m,p]=N.useState("all"),f=N.useMemo(()=>{let y=r;const g=new Date;if(i!=="all"){let S=new Date;i==="today"?S.setHours(0,0,0,0):i==="7d"?S.setDate(g.getDate()-7):i==="this_month"?S=new Date(g.getFullYear(),g.getMonth(),1):i==="last_month"&&(S=new Date(g.getFullYear(),g.getMonth()-1,1),g.setDate(0)),y=y.filter(A=>{const w=new Date(A.loginTime);return w>=S&&w<=g})}const j=new Set(e.filter(S=>S.isTrackingEnabled).map(S=>S.id));let k=new Set(j);if(d!=="all"){const S=n.find(A=>A.id===d);if(S){const A=new Set([...S.memberIds,S.leadId]);k=new Set([...k].filter(w=>A.has(w)))}else k=new Set}if(m!=="all"){const S=parseInt(m,10);k.has(S)?k=new Set([S]):k=new Set}return y.filter(S=>k.has(S.userId)).sort((S,A)=>new Date(A.loginTime).getTime()-new Date(S.loginTime).getTime())},[r,e,n,i,d,m]),x=N.useMemo(()=>{const y=f.reduce((S,A)=>S+(A.durationMs||0),0)/36e5,g=f.filter(S=>S.durationMs),j=g.length>0?g.reduce((S,A)=>S+(A.durationMs||0),0)/g.length:0,k=new Set(f.map(S=>S.userId));return{totalHours:y,avgSessionDuration:j,trackedUsersCount:k.size}},[f]),b=N.useMemo(()=>{if(d==="all")return e.filter(j=>j.isTrackingEnabled);const y=n.find(j=>j.id===d);if(!y)return[];const g=new Set([...y.memberIds,y.leadId]);return e.filter(j=>g.has(j.id)&&j.isTrackingEnabled)},[e,n,d]);return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Tracking Dashboard"}),t.jsx("p",{className:"text-subtle mt-1",children:"Monitor employee activity and productivity."})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-surface rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Date Range"}),t.jsxs("select",{value:i,onChange:y=>l(y.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"7d",children:"Last 7 Days"}),t.jsx("option",{value:"this_month",children:"This Month"}),t.jsx("option",{value:"last_month",children:"Last Month"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Team"}),t.jsxs("select",{value:d,onChange:y=>{u(y.target.value),p("all")},className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"all",children:"All Teams"}),n.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Employee"}),t.jsxs("select",{value:m,onChange:y=>p(y.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"all",children:"All Employees"}),b.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(tr,{title:"Active Employees",value:x.trackedUsersCount.toString(),subtext:"Based on filters",icon:t.jsx(V.Team,{className:"h-6 w-6 text-blue-400"})}),t.jsx(tr,{title:"Total Hours Logged",value:`${x.totalHours.toFixed(2)}h`,subtext:"Based on filters",icon:t.jsx(V.Activity,{className:"h-6 w-6 text-purple-400"})}),t.jsx(tr,{title:"Avg. Session Duration",value:a6(x.avgSessionDuration),subtext:"Based on filters",icon:t.jsx(V.Tasks,{className:"h-6 w-6 text-green-400"})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsx(aX,{users:e,onToggleTracking:a})}),t.jsxs("div",{className:"lg:col-span-2 bg-surface rounded-lg shadow-lg",children:[t.jsx("div",{className:"p-4 border-b border-muted",children:t.jsx("h3",{className:"font-semibold text-on-surface",children:"Recent Sessions"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Login Time"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Logout Time"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase tracking-wider",children:"Duration"})]})}),t.jsxs("tbody",{className:"divide-y divide-muted",children:[f.map(y=>{const g=e.find(j=>j.id===y.userId);return g?t.jsxs("tr",{className:"hover:bg-muted/30",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("img",{src:g.avatar,alt:g.name,className:"h-8 w-8 rounded-full"}),t.jsx("span",{className:"ml-3 text-sm font-medium text-on-surface",children:g.name})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-subtle",children:new Date(y.loginTime).toLocaleString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-subtle",children:y.logoutTime?new Date(y.logoutTime).toLocaleString():t.jsx("span",{className:"text-green-400 font-semibold",children:"Online"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-on-surface",children:a6(y.durationMs)})]},y.id):null}),f.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center p-8 text-subtle",children:"No session data matches the current filters."})})]})]})})]})]})]})},zn=({title:e,children:r})=>{const[n,a]=N.useState(!1);return t.jsxs("div",{className:"bg-surface rounded-lg shadow-lg border border-muted",children:[t.jsxs("button",{onClick:()=>a(!n),className:"w-full flex justify-between items-center p-4 text-left font-bold text-lg",children:[e,t.jsx("span",{className:`transform transition-transform ${n?"rotate-180":""}`,children:""})]}),n&&t.jsx("div",{className:"p-4 border-t border-muted",children:r})]})},at=({label:e,children:r,description:n})=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:e}),r,n&&t.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),iX=e=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),Hl=({label:e,src:r,alt:n,onSrcChange:a,onAltChange:s,recommendedSize:i})=>{const l=N.useRef(null),d=async u=>{if(u.target.files&&u.target.files[0]){const m=await iX(u.target.files[0]);a(m)}};return t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:e}),t.jsxs("div",{className:"flex items-center gap-4",children:[r&&t.jsx("img",{src:r,alt:"Preview",className:"w-24 h-24 object-cover rounded-md bg-muted"}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("input",{type:"file",ref:l,onChange:d,accept:"image/*",className:"hidden"}),t.jsx("button",{type:"button",onClick:()=>l.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Upload Image"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:i})]})]}),t.jsx(at,{label:"Image Alt Text",children:t.jsx("input",{type:"text",value:n,onChange:u=>s(u.target.value),className:"w-full bg-background border border-muted p-1 rounded"})})]})},oX=({content:e,onSave:r})=>{const[n,a]=N.useState(e),s=(u,m,p)=>{a(f=>({...f,[u]:{...f[u],[m]:p}}))},i=(u,m,p,f,x)=>{const b=x||"items";a(y=>{const g=[...y[u][b]];return g[m]={...g[m],[p]:f},{...y,[u]:{...y[u],[b]:g}}})},l=u=>{a(m=>{const p=crypto.randomUUID();let f,x="items";u==="features"&&(f={id:p,title:"New Feature",description:"",image:{src:"",alt:""}}),u==="testimonials"&&(f={id:p,quote:"",author:"",company:"",avatar:{src:"",alt:""}}),u==="faq"&&(f={id:p,q:"New Question?",a:""}),u==="contactForm"&&(x="fields",f={id:p,label:"New Field",type:"text",required:!1}),u==="chatbot"&&(x="questions",f={id:p,question:"New Question?",crmField:"name"}),u==="howItWorks"&&(x="steps",f={id:p,icon:"Connect",title:"New Step",description:""}),(u==="integrations"||u==="trustedBy")&&(x="logos",f={src:"",alt:"",name:"New Logo"}),u==="footer"&&(x="columns",f={title:"New Column",links:[]}),u==="funnel"&&(x="stages",f={name:"New Stage",value:0});const b=[...m[u][x],f];return{...m,[u]:{...m[u],[x]:b}}})},d=(u,m,p)=>{const f=p||"items";a(x=>{const b=x[u][f].filter((y,g)=>g!==m);return{...x,[u]:{...x[u],[f]:b}}})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Homepage Content Management"}),t.jsx("button",{onClick:()=>r(n),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Changes"})]}),t.jsx(zn,{title:"Login Page",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Title",children:t.jsx("input",{type:"text",value:n.loginPage.title,onChange:u=>s("loginPage","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Subtitle",children:t.jsx("textarea",{value:n.loginPage.subtitle,onChange:u=>s("loginPage","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"CTA Text",children:t.jsx("input",{type:"text",value:n.loginPage.cta,onChange:u=>s("loginPage","cta",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),t.jsx(Hl,{label:"Login Image",src:n.loginPage.image.src,alt:n.loginPage.image.alt,onSrcChange:u=>a(m=>({...m,loginPage:{...m.loginPage,image:{...m.loginPage.image,src:u}}})),onAltChange:u=>a(m=>({...m,loginPage:{...m.loginPage,image:{...m.loginPage.image,alt:u}}})),recommendedSize:"Recommended: 1024x768px"})]})}),t.jsx(zn,{title:"Hero Section",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(at,{label:"Main Title",children:t.jsx("input",{type:"text",value:n.hero.title,onChange:u=>s("hero","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Gradient Title",children:t.jsx("input",{type:"text",value:n.hero.gradientTitle,onChange:u=>s("hero","gradientTitle",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"CTA Button 1 Text",children:t.jsx("input",{type:"text",value:n.hero.cta1,onChange:u=>s("hero","cta1",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"CTA Button 2 Text",children:t.jsx("input",{type:"text",value:n.hero.cta2,onChange:u=>s("hero","cta2",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(at,{label:"Subtitle",children:t.jsx("textarea",{value:n.hero.subtitle,onChange:u=>s("hero","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})})})]})}),t.jsx(zn,{title:"Trusted By Logos",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.trustedBy.title,onChange:u=>s("trustedBy","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),n.trustedBy.logos.map((u,m)=>t.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Logo ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("trustedBy",m,"logos"),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsx(at,{label:"Logo Name",children:t.jsx("input",{type:"text",value:u.name,onChange:p=>i("trustedBy",m,"name",p.target.value,"logos"),className:"w-full bg-background border border-muted p-1 rounded"})}),t.jsx(Hl,{label:"Logo Image",src:u.src,alt:u.alt,onSrcChange:p=>i("trustedBy",m,"src",p,"logos"),onAltChange:p=>i("trustedBy",m,"alt",p,"logos"),recommendedSize:"Recommended: 200x48px"})]},m)),t.jsx("button",{type:"button",onClick:()=>l("trustedBy"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Logo"})]})}),t.jsx(zn,{title:"How It Works Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.howItWorks.title,onChange:u=>s("howItWorks","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Section Subtitle",children:t.jsx("textarea",{value:n.howItWorks.subtitle,onChange:u=>s("howItWorks","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),n.howItWorks.steps.map((u,m)=>t.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Step ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("howItWorks",m,"steps"),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsx(at,{label:"Title",children:t.jsx("input",{type:"text",value:u.title,onChange:p=>i("howItWorks",m,"title",p.target.value,"steps"),className:"w-full bg-background border border-muted p-1 rounded"})}),t.jsx(at,{label:"Description",children:t.jsx("textarea",{value:u.description,onChange:p=>i("howItWorks",m,"description",p.target.value,"steps"),rows:2,className:"w-full bg-background border border-muted p-1 rounded"})}),t.jsx(at,{label:"Icon",children:t.jsxs("select",{value:u.icon,onChange:p=>i("howItWorks",m,"icon",p.target.value,"steps"),className:"w-full bg-background border border-muted p-1 rounded",children:[t.jsx("option",{value:"Connect",children:"Connect"}),t.jsx("option",{value:"AutomateSteps",children:"Automate"}),t.jsx("option",{value:"Grow",children:"Grow"})]})})]},u.id)),t.jsx("button",{type:"button",onClick:()=>l("howItWorks"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Step"})]})}),t.jsx(zn,{title:"Features Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.features.title,onChange:u=>s("features","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Section Subtitle",children:t.jsx("textarea",{value:n.features.subtitle,onChange:u=>s("features","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx("h4",{className:"font-semibold pt-2",children:"Feature Items"}),n.features.items.map((u,m)=>t.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Feature ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("features",m),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsx(at,{label:"Title",children:t.jsx("input",{type:"text",value:u.title,onChange:p=>i("features",m,"title",p.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Description",children:t.jsx("textarea",{value:u.description,onChange:p=>i("features",m,"description",p.target.value,"items"),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Hl,{label:"Feature Image",src:u.image.src,alt:u.image.alt,onSrcChange:p=>i("features",m,"image",{...u.image,src:p},"items"),onAltChange:p=>i("features",m,"image",{...u.image,alt:p},"items"),recommendedSize:"Recommended: 800x600px"})]},u.id)),t.jsx("button",{type:"button",onClick:()=>l("features"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Feature"})]})}),t.jsx(zn,{title:"Integrations Showcase",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.integrations.title,onChange:u=>s("integrations","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Section Subtitle",children:t.jsx("textarea",{value:n.integrations.subtitle,onChange:u=>s("integrations","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),n.integrations.logos.map((u,m)=>t.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Logo ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("integrations",m,"logos"),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsx(at,{label:"Logo Name",children:t.jsx("input",{type:"text",value:u.name,onChange:p=>i("integrations",m,"name",p.target.value,"logos"),className:"w-full bg-background border border-muted p-1 rounded"})}),t.jsx(Hl,{label:"Logo Image",src:u.src,alt:u.alt,onSrcChange:p=>i("integrations",m,"src",p,"logos"),onAltChange:p=>i("integrations",m,"alt",p,"logos"),recommendedSize:"Recommended: 200x48px"})]},m)),t.jsx("button",{type:"button",onClick:()=>l("integrations"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Logo"})]})}),t.jsx(zn,{title:"Sales Funnel Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.funnel.title,onChange:u=>s("funnel","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Section Subtitle",children:t.jsx("textarea",{value:n.funnel.subtitle,onChange:u=>s("funnel","subtitle",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx("h4",{className:"font-semibold pt-2",children:"Funnel Stages"}),n.funnel.stages.map((u,m)=>t.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Stage ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("funnel",m,"stages"),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(at,{label:"Stage Name",children:t.jsx("input",{type:"text",value:u.name,onChange:p=>i("funnel",m,"name",p.target.value,"stages"),className:"w-full bg-background border border-muted p-1 rounded"})}),t.jsx(at,{label:"Value (Number of Leads)",children:t.jsx("input",{type:"number",value:u.value,onChange:p=>i("funnel",m,"value",Number(p.target.value),"stages"),className:"w-full bg-background border border-muted p-1 rounded"})})]})]},m)),t.jsx("button",{type:"button",onClick:()=>l("funnel"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Stage"})]})}),t.jsx(zn,{title:"Testimonials Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Section Title",children:t.jsx("input",{type:"text",value:n.testimonials.title,onChange:u=>s("testimonials","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),n.testimonials.items.map((u,m)=>t.jsxs("div",{className:"p-3 border border-muted rounded-md space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h4",{className:"font-semibold",children:["Testimonial ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("testimonials",m),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsx(at,{label:"Quote",children:t.jsx("textarea",{value:u.quote,onChange:p=>i("testimonials",m,"quote",p.target.value,"items"),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Author",children:t.jsx("input",{type:"text",value:u.author,onChange:p=>i("testimonials",m,"author",p.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Company",children:t.jsx("input",{type:"text",value:u.company,onChange:p=>i("testimonials",m,"company",p.target.value,"items"),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Hl,{label:"Avatar",src:u.avatar.src,alt:u.avatar.alt,onSrcChange:p=>i("testimonials",m,"avatar",{...u.avatar,src:p},"items"),onAltChange:p=>i("testimonials",m,"avatar",{...u.avatar,alt:p},"items"),recommendedSize:"Recommended: 128x128px"})]},u.id)),t.jsx("button",{type:"button",onClick:()=>l("testimonials"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Testimonial"})]})}),t.jsx(zn,{title:"Contact Form Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Title",children:t.jsx("input",{type:"text",value:n.contactForm.title,onChange:u=>s("contactForm","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Subtitle",children:t.jsx("textarea",{value:n.contactForm.subtitle,onChange:u=>s("contactForm","subtitle",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Webhook URL",children:t.jsx("input",{type:"url",value:n.contactForm.webhookUrl,onChange:u=>s("contactForm","webhookUrl",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Address",children:t.jsx("input",{type:"text",value:n.contactForm.address,onChange:u=>s("contactForm","address",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Email",children:t.jsx("input",{type:"email",value:n.contactForm.email,onChange:u=>s("contactForm","email",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Phone",children:t.jsx("input",{type:"tel",value:n.contactForm.phone,onChange:u=>s("contactForm","phone",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Map Embed URL",children:t.jsx("textarea",{value:n.contactForm.mapSrc,onChange:u=>s("contactForm","mapSrc",u.target.value),rows:4,className:"w-full bg-background border border-muted p-2 rounded font-mono text-xs"})}),t.jsx("h4",{className:"font-semibold pt-2",children:"Form Fields"}),n.contactForm.fields.map((u,m)=>t.jsxs("div",{className:"p-2 border border-muted rounded-md space-y-2 bg-background",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h5",{className:"font-semibold text-sm",children:["Field ",m+1]}),t.jsx("button",{type:"button",onClick:()=>d("contactForm",m,"fields"),className:"text-red-500",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(at,{label:"Label",children:t.jsx("input",{type:"text",value:u.label,onChange:p=>i("contactForm",m,"label",p.target.value,"fields"),className:"w-full bg-surface border-muted p-1 rounded"})}),t.jsx(at,{label:"Type",children:t.jsxs("select",{value:u.type,onChange:p=>i("contactForm",m,"type",p.target.value,"fields"),className:"w-full bg-surface border-muted p-1 rounded",children:[t.jsx("option",{value:"text",children:"Text"}),t.jsx("option",{value:"email",children:"Email"}),t.jsx("option",{value:"textarea",children:"Textarea"})]})})]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx("input",{type:"checkbox",checked:u.required,onChange:p=>i("contactForm",m,"required",p.target.checked,"fields")})," Required"]})]},u.id)),t.jsx("button",{type:"button",onClick:()=>l("contactForm"),className:"text-sm text-primary-500 font-semibold",children:"+ Add Field"})]})}),t.jsx(zn,{title:"Final CTA Section",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Title",children:t.jsx("input",{type:"text",value:n.finalCta.title,onChange:u=>s("finalCta","title",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Subtitle",children:t.jsx("input",{type:"text",value:n.finalCta.subtitle,onChange:u=>s("finalCta","subtitle",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"CTA Button Text",children:t.jsx("input",{type:"text",value:n.finalCta.cta,onChange:u=>s("finalCta","cta",u.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]})}),t.jsx(zn,{title:"Footer",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(at,{label:"Company Description",children:t.jsx("textarea",{value:n.footer.description,onChange:u=>s("footer","description",u.target.value),rows:3,className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(at,{label:"Company Address",children:t.jsx("textarea",{value:n.footer.address,onChange:u=>s("footer","address",u.target.value),rows:2,className:"w-full bg-background border border-muted p-2 rounded"})})]})})]})},ro=({label:e,children:r,description:n})=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:e}),r,n&&t.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),lX=e=>new Promise((r,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>r(a.result),a.onerror=s=>n(s)}),cX=({label:e,src:r,alt:n,onSrcChange:a,onAltChange:s,recommendedSize:i})=>{const l=N.useRef(null),d=async u=>{if(u.target.files&&u.target.files[0]){const m=await lX(u.target.files[0]);a(m)}};return t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:e}),t.jsxs("div",{className:"flex items-center gap-4",children:[r?t.jsx("img",{src:r,alt:"Preview",className:"w-24 h-16 object-cover rounded-md bg-muted"}):t.jsx("div",{className:"w-24 h-16 bg-muted rounded-md"}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("input",{type:"file",ref:l,onChange:d,accept:"image/*",className:"hidden"}),t.jsx("button",{type:"button",onClick:()=>l.current?.click(),className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Upload Image"}),t.jsx("p",{className:"text-xs text-subtle mt-1",children:i})]})]}),t.jsx(ro,{label:"Image Alt Text",children:t.jsx("input",{type:"text",value:n,onChange:u=>s(u.target.value),className:"w-full bg-background border border-muted p-1 rounded"})})]})},D0=({title:e,children:r,initiallyOpen:n=!1})=>t.jsxs("details",{className:"bg-surface rounded-lg border border-muted",open:n,children:[t.jsxs("summary",{className:"font-semibold text-on-surface p-4 cursor-pointer flex justify-between items-center list-none",children:[e,t.jsx(V.ChevronRight,{className:"h-5 w-5 transform transition-transform details-open:rotate-90"})]}),t.jsx("div",{className:"p-4 border-t border-muted space-y-4",children:r})]}),dX=({value:e,onChange:r})=>{const n=N.useRef(null),[a,s]=N.useState(!1),[i,l]=N.useState(""),{addToast:d}=Xc(),u=(f,x=null)=>{document.execCommand(f,!1,x),n.current?.focus()},m=()=>{s(!0)},p=f=>{f.preventDefault(),i.trim()&&(u("createLink",i.trim()),l(""),s(!1),d({type:"success",title:"Link Added",message:"Link has been successfully added to the selected text."}))};return t.jsxs("div",{className:"bg-surface rounded-lg border border-muted flex flex-col flex-grow min-h-[600px]",children:[t.jsxs("div",{className:"p-2 border-b border-muted flex gap-1 flex-wrap flex-shrink-0",children:[t.jsx("button",{type:"button",onClick:()=>u("bold"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"B"}),t.jsx("button",{type:"button",onClick:()=>u("italic"),className:"p-1 rounded hover:bg-muted text-sm italic w-8 h-8",children:"I"}),t.jsx("button",{type:"button",onClick:()=>u("underline"),className:"p-1 rounded hover:bg-muted text-sm underline w-8 h-8",children:"U"}),t.jsx("button",{type:"button",onClick:()=>u("strikeThrough"),className:"p-1 rounded hover:bg-muted text-sm line-through w-8 h-8",children:"S"}),t.jsx("div",{className:"w-px bg-muted mx-1"}),t.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h1>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H1"}),t.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h2>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H2"}),t.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h3>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H3"}),t.jsx("button",{type:"button",onClick:()=>u("formatBlock","<h4>"),className:"p-1 rounded hover:bg-muted text-sm font-bold w-8 h-8",children:"H4"}),t.jsx("div",{className:"w-px bg-muted mx-1"}),t.jsx("button",{type:"button",onClick:()=>u("insertUnorderedList"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:t.jsx(V.ListUl,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:()=>u("insertOrderedList"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:t.jsx(V.ListOl,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:()=>u("formatBlock","<blockquote>"),className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:t.jsx(V.Quote,{className:"h-4 w-4"})}),t.jsx("div",{className:"w-px bg-muted mx-1"}),t.jsx("button",{type:"button",onClick:m,className:"p-1 rounded hover:bg-muted w-8 h-8 flex items-center justify-center",children:t.jsx(V.Link,{className:"h-4 w-4"})})]}),t.jsx("div",{ref:n,contentEditable:!0,suppressContentEditableWarning:!0,onInput:f=>r(f.currentTarget.innerHTML),className:"w-full h-full p-4 bg-transparent focus:outline-none resize-none prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e}}),a&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-surface rounded-lg p-6 w-96 max-w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-4",children:"Add Link"}),t.jsxs("form",{onSubmit:p,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"linkUrl",className:"block text-sm font-medium text-subtle mb-2",children:"URL"}),t.jsx("input",{type:"url",id:"linkUrl",value:i,onChange:f=>l(f.target.value),className:"w-full px-3 py-2 border border-muted rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-background text-on-surface",placeholder:"https://example.com",required:!0,autoFocus:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>{s(!1),l("")},className:"px-4 py-2 text-sm font-medium text-subtle hover:text-on-surface hover:bg-muted border border-muted rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors",children:"Add Link"})]})]})]})})]})},uX=({post:e,users:r,onSave:n,onClose:a})=>{const[s,i]=N.useState(e||{title:"",slug:"",excerpt:"",content:"",tags:[],authorId:r.find(f=>f.role!=="Super Admin")?.id,featuredImage:{src:"",alt:""},seo:{title:"",description:""},focusKeyword:""}),[l,d]=N.useState("Saved"),u=(f,x)=>{let b=s.slug;f==="title"&&!e&&!s.slug&&(b=x.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),i(y=>({...y,[f]:x,slug:b,seo:{...y.seo,title:f==="title"?x:y.seo?.title}}))},m=f=>{i(x=>({...x,content:f}))},p=()=>{d("Saving...");const f={...s,id:s.id||crypto.randomUUID(),publishedAt:s.publishedAt||new Date().toISOString()};n(f),setTimeout(()=>d("Saved"),500)};return N.useEffect(()=>{d("Unsaved changes");const f=setTimeout(()=>{},2e3);return()=>clearTimeout(f)},[s]),t.jsxs("div",{className:"bg-background text-on-surface h-full flex flex-col",children:[t.jsxs("header",{className:"flex-shrink-0 bg-surface border-b border-muted p-4 flex justify-between items-center",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-sm font-semibold text-subtle hover:text-on-surface",children:[t.jsx(V.ChevronRight,{className:"h-5 w-5 rotate-180"})," Back to Blog List"]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-sm text-subtle italic",children:l}),t.jsx("button",{onClick:p,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Publish"})]})]}),t.jsxs("main",{className:"flex-1 grid grid-cols-1 lg:grid-cols-[1fr_400px] gap-6 p-6 overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col gap-6 overflow-y-auto pr-2",children:[t.jsx(ro,{label:"Post Title",children:t.jsx("input",{type:"text",value:s.title,onChange:f=>u("title",f.target.value),required:!0,className:"w-full bg-surface border border-muted p-3 rounded-lg text-lg font-semibold"})}),t.jsx(dX,{value:s.content||"",onChange:m})]}),t.jsxs("aside",{className:"space-y-4 overflow-y-auto pr-2",children:[t.jsxs(D0,{title:"Publish",initiallyOpen:!0,children:[t.jsx(ro,{label:"Status",children:t.jsxs("select",{className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{children:"Draft"}),t.jsx("option",{children:"Published"})]})}),t.jsx(ro,{label:"Publish Date",children:t.jsx("input",{type:"datetime-local",className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx("p",{className:"text-xs text-subtle hover:underline cursor-pointer",children:"Revisions (3)"})]}),t.jsx(D0,{title:"Featured Image",children:t.jsx(cX,{label:"",src:s.featuredImage?.src||"",alt:s.featuredImage?.alt||"",onSrcChange:f=>i(x=>({...x,featuredImage:{...x.featuredImage,src:f}})),onAltChange:f=>i(x=>({...x,featuredImage:{...x.featuredImage,alt:f}})),recommendedSize:"1200x630px for social"})}),t.jsxs(D0,{title:"Tags & Excerpt",children:[t.jsx(ro,{label:"Tags",children:t.jsx("input",{type:"text",value:Array.isArray(s.tags)?s.tags.join(", "):"",onChange:f=>i({...s,tags:f.target.value.split(",").map(x=>x.trim())}),className:"w-full bg-background border border-muted p-2 rounded",placeholder:"sales, crm, growth"})}),t.jsx(ro,{label:"Excerpt",children:t.jsx("textarea",{value:s.excerpt,onChange:f=>u("excerpt",f.target.value),rows:4,className:"w-full bg-background border border-muted p-2 rounded"})})]})]})]})]})},mX=({data:e,onSave:r})=>{const[n,a]=N.useState(e),s=()=>{r(n),alert("Pricing page data saved!")},i=(x,b)=>{a(y=>y.map(g=>g.id===x?{...g,category:b}:g))},l=()=>{const x={id:crypto.randomUUID(),category:"New Category",features:[]};a(b=>[...b,x])},d=x=>{window.confirm("Are you sure you want to delete this entire category and all its features?")&&a(b=>b.filter(y=>y.id!==x))},u=(x,b,y,g)=>{a(j=>j.map(k=>k.id===x?{...k,features:k.features.map(S=>S.id===b?{...S,[y]:g}:S)}:k))},m=(x,b,y,g)=>{a(j=>j.map(k=>k.id===x?{...k,features:k.features.map(S=>S.id===b?{...S,values:{...S.values,[y]:g}}:S)}:k))},p=x=>{const b={id:crypto.randomUUID(),name:"New Feature",description:"",values:{free:"false",basic:"false",pro:"false",enterprise:"false"}};a(y=>y.map(g=>g.id===x?{...g,features:[...g.features,b]}:g))},f=(x,b)=>{a(y=>y.map(g=>g.id===x?{...g,features:g.features.filter(j=>j.id!==b)}:g))};return t.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Pricing Page Feature Comparison"}),t.jsx("button",{onClick:s,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]}),t.jsx("p",{className:"text-sm text-subtle",children:'Manage the detailed feature comparison table shown on the public pricing page. For values, you can enter a string like "5 Users" or "Unlimited", or you can type "true" or "false" to show a checkmark or a cross.'}),t.jsx("div",{className:"space-y-8",children:n.map(x=>t.jsxs("div",{className:"p-4 border border-muted rounded-lg bg-background",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("input",{type:"text",value:x.category,onChange:b=>i(x.id,b.target.value),className:"font-bold text-xl bg-transparent border-b-2 border-muted focus:border-primary-500 focus:outline-none w-full"}),t.jsx("button",{onClick:()=>d(x.id),className:"text-red-500 hover:text-red-400 ml-4",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted text-sm",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/4",children:"Feature"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/4",children:"Description (Tooltip)"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Free"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Basic"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Pro"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-subtle w-1/6",children:"Enterprise"}),t.jsx("th",{className:"px-3 py-2 text-right font-semibold text-subtle"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:x.features.map(b=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-3 py-2",children:t.jsx("input",{type:"text",value:b.name,onChange:y=>u(x.id,b.id,"name",y.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("input",{type:"text",value:b.description,onChange:y=>u(x.id,b.id,"description",y.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})}),["free","basic","pro","enterprise"].map(y=>t.jsx("td",{className:"px-3 py-2",children:t.jsx("input",{type:"text",value:String(b.values[y]),onChange:g=>m(x.id,b.id,y,g.target.value),className:"w-full bg-surface p-1 rounded border border-transparent focus:border-muted"})},y)),t.jsx("td",{className:"px-3 py-2 text-right",children:t.jsx("button",{onClick:()=>f(x.id,b.id),className:"text-red-500 hover:text-red-400 p-1",children:t.jsx(V.Delete,{className:"h-4 w-4"})})})]},b.id))})]})}),t.jsx("button",{onClick:()=>p(x.id),className:"text-sm font-semibold text-primary-500 mt-3",children:"+ Add Feature"})]},x.id))}),t.jsxs("button",{onClick:l,className:"font-semibold text-primary-500 flex items-center gap-2 mt-4",children:[t.jsx(V.Add,{className:"w-5 h-5"})," Add Category"]})]})},pX=({coupon:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{code:"",type:"percentage",value:10,isActive:!0}),i=l=>{l.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:e?.id?"Edit Coupon":"Create Coupon",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Coupon Code"}),t.jsx("input",{type:"text",value:a.code,onChange:l=>s(d=>({...d,code:l.target.value.toUpperCase()})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Type"}),t.jsxs("select",{value:a.type,onChange:l=>s(d=>({...d,type:l.target.value})),className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"percentage",children:"Percentage (%)"}),t.jsx("option",{value:"fixed",children:"Fixed Amount ($)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Value"}),t.jsx("input",{type:"number",value:a.value,onChange:l=>s(d=>({...d,value:Number(l.target.value)})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Expires At (Optional)"}),t.jsx("input",{type:"date",value:a.expiresAt?new Date(a.expiresAt).toISOString().split("T")[0]:"",onChange:l=>s(d=>({...d,expiresAt:l.target.value?new Date(l.target.value).toISOString():void 0})),className:"w-full bg-background border border-muted p-2 rounded"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Coupon"})]})]})})},hX=({coupons:e,onSaveCoupon:r,onDeleteCoupon:n,offerStrip:a,onUpdateOfferStrip:s})=>{const[i,l]=N.useState(!1),[d,u]=N.useState(null),[m,p]=N.useState(a||C6),f=(b=null)=>{u(b),l(!0)},x=()=>{s(m),alert("Offer strip updated!")};return t.jsxs("div",{className:"space-y-8",children:[i&&t.jsx(pX,{coupon:d,onClose:()=>l(!1),onSave:r}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Discount Coupons"}),t.jsxs("button",{onClick:()=>f(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-3 rounded-lg text-sm flex items-center gap-2",children:[t.jsx(V.Add,{className:"w-4 h-4"})," New Coupon"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted text-sm",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Code"}),t.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Type"}),t.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Value"}),t.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Status"}),t.jsx("th",{className:"px-4 py-2 text-left font-semibold text-subtle",children:"Expires"}),t.jsx("th",{className:"px-4 py-2 text-right font-semibold text-subtle"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:e.map(b=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2 font-mono font-bold",children:b.code}),t.jsx("td",{className:"px-4 py-2 capitalize",children:b.type}),t.jsx("td",{className:"px-4 py-2",children:b.type==="percentage"?`${b.value}%`:`$${b.value}`}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${b.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.isActive?"Active":"Inactive"})}),t.jsx("td",{className:"px-4 py-2 text-subtle",children:b.expiresAt?new Date(b.expiresAt).toLocaleDateString():"Never"}),t.jsxs("td",{className:"px-4 py-2 text-right",children:[t.jsx("button",{onClick:()=>f(b),className:"p-1",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>n(b.id),className:"p-1",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]},b.id))})]})})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Promotional Offer Strip"}),t.jsx("button",{onClick:x,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-3 rounded-lg text-sm",children:"Save"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx("input",{type:"checkbox",checked:m.isEnabled,onChange:b=>p(y=>({...y,isEnabled:b.target.checked}))})," Enable offer strip"]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Display Text"}),t.jsx("input",{type:"text",value:m.text,onChange:b=>p(y=>({...y,text:b.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"CTA Text (Optional)"}),t.jsx("input",{type:"text",value:m.ctaText,onChange:b=>p(y=>({...y,ctaText:b.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"CTA Link (Optional)"}),t.jsx("input",{type:"text",value:m.ctaLink,onChange:b=>p(y=>({...y,ctaLink:b.target.value})),className:"w-full bg-background border border-muted p-2 rounded"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Auto-disable At (Optional)"}),t.jsx("input",{type:"date",value:m.autoDisableAt?new Date(m.autoDisableAt).toISOString().split("T")[0]:"",onChange:b=>p(y=>({...y,autoDisableAt:b.target.value?new Date(b.target.value).toISOString():void 0})),className:"w-full bg-background border border-muted p-2 rounded"})]})]})]})]})},Ht=({label:e,children:r,description:n})=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:e}),r,n&&t.jsx("p",{className:"text-xs text-subtle mt-1",children:n})]}),I0=({title:e,description:r,children:n,actions:a})=>t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-on-surface",children:e}),r&&t.jsx("p",{className:"text-subtle mt-1 text-sm",children:r})]}),a]}),t.jsx("div",{className:"space-y-4",children:n})]}),xp=({checked:e,onChange:r})=>t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",onClick:n=>{n.preventDefault(),n.stopPropagation(),r(!e)},children:[t.jsx("input",{type:"checkbox",checked:e,onChange:n=>r(n.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]}),fX=({organizations:e,users:r,leads:n,plans:a,tasks:s})=>{const i=e.length,l=r.length,d=n.length,u=N.useMemo(()=>e.reduce((f,x)=>{const b=a.find(y=>y.id===x.subscriptionPlanId);return f+(b?b.price:0)},0),[e,a]),m=N.useMemo(()=>{const f=e.reduce((x,b)=>{const y=a.find(j=>j.id===b.subscriptionPlanId),g=y?y.name:"Unknown";return x[g]=(x[g]||0)+1,x},{});return Object.entries(f).map(([x,b])=>({name:x,value:b}))},[e,a]),p=["#0088FE","#00C49F","#FFBB28","#FF8042"];return t.jsxs("div",{className:"space-y-8",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Platform Overview"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(tr,{title:"Total Organizations",value:i.toString(),icon:t.jsx(V.Team,{className:"h-6 w-6 text-blue-400"})}),t.jsx(tr,{title:"Total Users",value:l.toString(),icon:t.jsx(V.Leads,{className:"h-6 w-6 text-purple-400"})}),t.jsx(tr,{title:"Total Leads",value:d.toString(),icon:t.jsx(V.Reports,{className:"h-6 w-6 text-green-400"})}),t.jsx(tr,{title:"Estimated MRR",value:`$${u.toLocaleString()}`,icon:t.jsx(V.Billing,{className:"h-6 w-6 text-orange-400"})})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Organizations by Plan"}),t.jsx(Fr,{width:"100%",height:300,children:t.jsxs(fp,{children:[t.jsx(On,{data:m,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:m.map((f,x)=>t.jsx(Hn,{fill:p[x%p.length]},`cell-${x}`))}),t.jsx(Bt,{}),t.jsx(Nn,{})]})})]})})]})},xX=({org:e,plans:r,onClose:n,onSave:a})=>{const[s,i]=N.useState(e||{name:"",code:"",subscriptionPlanId:r[0].id,manuallyAssignedFeatures:[]}),l=["DASHBOARD","REPORTS","TRACKING","LEADS","TASKS","EMAIL","WHATSAPP","SMS","CALLS","AUTOMATION","INTEGRATIONS","USERS","TEAMS","SETTINGS","API_ACCESS"],d=N.useMemo(()=>{const p=r.find(f=>f.id===s.subscriptionPlanId);return p?new Set(p.features):new Set},[s.subscriptionPlanId,r]),u=p=>{i(f=>{if(!f)return f;const x=f.manuallyAssignedFeatures||[],b=x.includes(p)?x.filter(y=>y!==p):[...x,p];return{...f,manuallyAssignedFeatures:b}})},m=p=>{p.preventDefault(),a(s),n()};return t.jsx(it,{isOpen:!0,onClose:n,title:e?.id?"Edit Organization":"Add Organization",children:t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsx(Ht,{label:"Organization Name",children:t.jsx("input",{type:"text",value:s.name,onChange:p=>i(f=>({...f,name:p.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsx(Ht,{label:"Login Code",children:t.jsx("input",{type:"text",value:s.code,onChange:p=>i(f=>({...f,code:p.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsx(Ht,{label:"Subscription Plan",children:t.jsx("select",{value:s.subscriptionPlanId,onChange:p=>i(f=>({...f,subscriptionPlanId:p.target.value})),className:"w-full bg-background border border-muted p-2 rounded",children:r.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))})}),t.jsxs("div",{className:"pt-4 mt-4 border-t border-muted",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Manual Feature Assignment"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Override plan settings by manually enabling or disabling specific features for this organization."}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto p-2 bg-background rounded-md",children:l.map(p=>{const f=d.has(p),x=s.manuallyAssignedFeatures?.includes(p);return t.jsxs("label",{className:"flex items-start p-3 bg-surface rounded-lg border border-muted hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x,onChange:()=>u(p),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500 mt-1"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("span",{className:"font-medium text-sm text-on-surface",children:p}),t.jsx("p",{className:`text-xs ${f?"text-green-500":"text-subtle"}`,children:f?"Included in plan":"Not in plan"})]})]},p)})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:n,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},gX=({organizations:e,users:r,leads:n,plans:a,onUpdate:s,onDelete:i,onAdd:l})=>{const[d,u]=N.useState(!1),[m,p]=N.useState(null),f=(b=null)=>{p(b),u(!0)},x=b=>{const y=e.find(g=>g.id===b);if(y){const g=new Date;g.setFullYear(g.getFullYear()+1),s({...y,subscriptionExpiresAt:g.toISOString()})}};return t.jsxs("div",{className:"space-y-6",children:[d&&t.jsx(xX,{org:m,plans:a,onClose:()=>u(!1),onSave:m?.id?s:l}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Organizations"}),t.jsxs("button",{onClick:()=>f(),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[t.jsx(V.Add,{className:"w-5 h-5"})," Add Organization"]})]}),t.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Plan"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Users"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Subscription"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:e.map(b=>{const y=a.find(k=>k.id===b.subscriptionPlanId),g=r.filter(k=>k.organizationId===b.id).length,j=new Date(b.subscriptionExpiresAt)<new Date;return t.jsxs("tr",{className:j?"bg-red-500/5":"",children:[t.jsx("td",{className:"px-6 py-4 font-semibold",children:b.name}),t.jsx("td",{className:"px-6 py-4",children:y?.name}),t.jsx("td",{className:"px-6 py-4",children:g}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:j?"Expired":"Active"}),t.jsxs("p",{className:"text-xs text-subtle mt-1",children:[j?"Ended on":"Ends on"," ",new Date(b.subscriptionExpiresAt).toLocaleDateString()]})]}),t.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[t.jsx("button",{onClick:()=>f(b),className:"p-1 text-subtle hover:text-on-surface",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>i(b.id),className:"p-1 text-subtle hover:text-red-400",children:t.jsx(V.Delete,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>x(b.id),disabled:!j,className:"text-sm bg-blue-500/20 text-blue-400 font-semibold py-1 px-2 rounded-md hover:bg-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed",children:"Renew"})]})]},b.id)})})]})})]})},bX=({inquiries:e,setInquiries:r})=>{const[n,a]=N.useState("ALL"),[s,i]=N.useState("ALL"),[l,d]=N.useState(""),[u,m]=N.useState(""),[p,f]=N.useState(""),[x,b]=N.useState(new Set),y=(w,E)=>{r(T=>T.map(O=>O.id===w?{...O,status:E}:O))},g=N.useMemo(()=>e.filter(w=>n==="ALL"||w.status===n).filter(w=>s==="ALL"||w.type===s).filter(w=>{if(!l&&!u)return!0;const E=new Date(w.createdAt);return!(l&&E<new Date(l)||u&&E>new Date(new Date(u).setHours(23,59,59,999)))}).filter(w=>{if(!p.trim())return!0;const E=p.toLowerCase();return w.name.toLowerCase().includes(E)||w.email.toLowerCase().includes(E)||w.phone&&w.phone.includes(E)||w.company&&w.company.toLowerCase().includes(E)||w.message.toLowerCase().includes(E)}).sort((w,E)=>new Date(E.createdAt).getTime()-new Date(w.createdAt).getTime()),[e,n,s,l,u,p]),j=w=>{w.target.checked?b(new Set(g.map(E=>E.id))):b(new Set)},k=w=>{b(E=>{const T=new Set(E);return T.has(w)?T.delete(w):T.add(w),T})},S=()=>{const w=g.filter(D=>x.has(D.id));if(w.length===0){alert("Please select inquiries to export.");return}let E="data:text/csv;charset=utf-8,";E+=`ID,Type,Name,Email,Phone,Company,Message,CreatedAt,Status
`,w.forEach(D=>{const I=[D.id,D.type,D.name,D.email,D.phone||"",D.company||"",`"${D.message.replace(/"/g,'""')}"`,D.createdAt,D.status].join(",");E+=I+`\r
`});const T=encodeURI(E),O=document.createElement("a");O.setAttribute("href",T),O.setAttribute("download","inquiries.csv"),document.body.appendChild(O),O.click(),document.body.removeChild(O)},A=Object.values(S6);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Lead Inquiries"}),t.jsxs("button",{onClick:S,disabled:x.size===0,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 disabled:opacity-50",children:[t.jsx(V.Export,{className:"w-5 h-5"})," Export Selected (",x.size,")"]})]}),t.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(Ht,{label:"Status",children:t.jsxs("select",{value:n,onChange:w=>a(w.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"ALL",children:"All Statuses"}),A.map(w=>t.jsx("option",{value:w,children:w},w))]})}),t.jsx(Ht,{label:"Type",children:t.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"ALL",children:"All Types"}),t.jsx("option",{value:"Contact Form",children:"Contact Form"}),t.jsx("option",{value:"Chatbot",children:"Chatbot"})]})}),t.jsx(Ht,{label:"Start Date",children:t.jsx("input",{type:"date",value:l,onChange:w=>d(w.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Ht,{label:"End Date",children:t.jsx("input",{type:"date",value:u,onChange:w=>m(w.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),t.jsx("div",{children:t.jsx(Ht,{label:"Search",children:t.jsx("input",{type:"text",value:p,onChange:w=>f(w.target.value),placeholder:"Search by name, email, phone, message...",className:"w-full bg-background border border-muted p-2 rounded"})})})]}),t.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3",children:t.jsx("input",{type:"checkbox",onChange:j,checked:x.size>0&&x.size===g.length})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Email"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Phone"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Message"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Status"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:g.map(w=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:x.has(w.id),onChange:()=>k(w.id)})}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle whitespace-nowrap",children:new Date(w.createdAt).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:w.type}),t.jsx("td",{className:"px-6 py-4 font-semibold",children:w.name}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:w.email}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:w.phone||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle max-w-xs truncate",title:w.message,children:w.message}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("select",{value:w.status,onChange:E=>y(w.id,E.target.value),className:"bg-background border border-muted p-1 rounded-md text-sm",children:A.map(E=>t.jsx("option",{value:E,children:E},E))})})]},w.id))})]})})]})},yX=({plans:e,onSave:r,onDelete:n})=>{const[a,s]=N.useState(e),i=(m,p,f)=>{s(x=>x.map(b=>b.id===m?{...b,[p]:f}:b))},l=(m,p)=>{s(f=>f.map(x=>{if(x.id===m){const b=x.features.includes(p)?x.features.filter(y=>y!==p):[...x.features,p];return{...x,features:b}}return x}))},d=()=>{a.forEach(m=>r(m)),alert("Plans saved!")},u=["DASHBOARD","REPORTS","TRACKING","LEADS","TASKS","EMAIL","WHATSAPP","SMS","CALLS","AUTOMATION","INTEGRATIONS","USERS","TEAMS","SETTINGS","API_ACCESS"];return t.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Subscription Plans"}),t.jsx("button",{onClick:d,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Changes"})]}),t.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 items-start",children:a.map(m=>t.jsxs("div",{className:"bg-background p-6 rounded-xl border border-muted/50 space-y-4",children:[t.jsx("input",{type:"text",value:m.name,onChange:p=>i(m.id,"name",p.target.value),className:"w-full bg-surface border border-muted p-2 rounded-lg text-lg font-bold"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(Ht,{label:"Monthly Price ($)",children:t.jsx("input",{type:"number",value:m.price,onChange:p=>i(m.id,"price",Number(p.target.value)),className:"w-full bg-surface border border-muted p-2 rounded"})}),t.jsx(Ht,{label:"User Limit",children:t.jsx("input",{type:"number",value:m.userLimit,onChange:p=>i(m.id,"userLimit",Number(p.target.value)),className:"w-full bg-surface border border-muted p-2 rounded"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Features"}),t.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto pr-2",children:u.map(p=>t.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:m.features.includes(p),onChange:()=>l(m.id,p),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),p]},p))})]})]},m.id))})]})},vX=({addon:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{name:"",description:"",monthlyPrice:0,featureTag:""}),i=l=>{l.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:e?.id?"Edit Addon":"New Addon",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsx(Ht,{label:"Name",children:t.jsx("input",{type:"text",value:a.name,onChange:l=>s(d=>({...d,name:l.target.value})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsx(Ht,{label:"Description",children:t.jsx("textarea",{value:a.description,onChange:l=>s(d=>({...d,description:l.target.value})),rows:3,className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsx(Ht,{label:"Monthly Price ($)",children:t.jsx("input",{type:"number",value:a.monthlyPrice,onChange:l=>s(d=>({...d,monthlyPrice:Number(l.target.value)})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsx(Ht,{label:"Feature Tag",children:t.jsx("input",{type:"text",value:a.featureTag,onChange:l=>s(d=>({...d,featureTag:l.target.value.toUpperCase()})),className:"w-full bg-background border border-muted p-2 rounded",required:!0})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},jX=({addons:e,onSave:r,onDelete:n})=>{const[a,s]=N.useState(!1),[i,l]=N.useState(null),d={AI_FEATURES:t.jsx(V.Sparkles,{className:"h-8 w-8 text-purple-400"}),WHATSAPP:t.jsx(V.Whatsapp,{className:"h-8 w-8 text-green-400"}),ADVANCED_ANALYTICS:t.jsx(V.Analytics,{className:"h-8 w-8 text-blue-400"}),WHITE_LABEL:t.jsx(V.Globe,{className:"h-8 w-8 text-orange-400"})};return t.jsxs("div",{className:"space-y-6 bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[a&&t.jsx(vX,{addon:i,onClose:()=>s(!1),onSave:r}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Available Add-ons"}),t.jsx("button",{onClick:()=>{l(null),s(!0)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"New Addon"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:e.map(u=>t.jsxs("div",{className:"bg-background p-6 rounded-xl border border-muted/50 text-center flex flex-col items-center",children:[t.jsx("div",{className:"p-4 bg-muted rounded-full",children:d[u.featureTag]||t.jsx(V.Bolt,{className:"h-8 w-8"})}),t.jsx("h3",{className:"font-bold text-lg mt-4",children:u.name}),t.jsx("p",{className:"text-subtle text-sm mt-1 flex-grow",children:u.description}),t.jsxs("p",{className:"text-3xl font-bold mt-4",children:["$",u.monthlyPrice,t.jsx("span",{className:"text-base font-normal text-subtle",children:"/mo"})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx("button",{onClick:()=>{l(u),s(!0)},className:"text-sm font-semibold text-primary-500",children:"Edit"}),t.jsx("button",{onClick:()=>n(u.id),className:"text-sm font-semibold text-red-500",children:"Delete"})]})]},u.id))})]})},wX=({settings:e,onSave:r,onUpdatePaymentGatewaySettings:n})=>{const a=[{provider:"stripe",name:"Stripe",config:{apiKey:"",apiSecret:""},isEnabled:!1},{provider:"razorpay",name:"Razorpay",config:{apiKey:"",apiSecret:""},isEnabled:!1},{provider:"paypal",name:"PayPal",config:{clientId:"",clientSecret:""},isEnabled:!1},{provider:"payu",name:"PayU",config:{merchantKey:"",merchantSalt:""},isEnabled:!1},{provider:"paytm",name:"Paytm",config:{merchantId:"",merchantKey:""},isEnabled:!1},{provider:"square",name:"Square",config:{applicationId:"",accessToken:""},isEnabled:!1},{provider:"braintree",name:"Braintree",config:{merchantId:"",publicKey:"",privateKey:""},isEnabled:!1},{provider:"adyen",name:"Adyen",config:{apiKey:"",merchantAccount:""},isEnabled:!1},{provider:"authorize.net",name:"Authorize.net",config:{apiLoginId:"",transactionKey:""},isEnabled:!1}],[s,i]=N.useState(e.length>0?e:a),[l,d]=N.useState(null),u=s.find(A=>A.provider===l);N.useEffect(()=>{e.length>0&&i(e)},[e]);const[m,p]=N.useState(null),f=async()=>{try{p(null),await r(s),p({show:!0,success:!0,message:"Payment gateway settings saved successfully!"}),setTimeout(()=>p(null),3e3)}catch{p({show:!0,success:!1,message:"Failed to save payment gateway settings. Please try again."})}},x=async(A,w)=>{i(E=>E.map(T=>T.provider===A?{...T,isEnabled:w}:T));try{const E=s.find(T=>T.provider===A);if(E){const T={...E,isEnabled:w};await Me.updateSuperAdminPaymentGatewaySettingByProvider(A,T),i(O=>O.map(D=>D.provider===A?T:D)),n(s.map(O=>O.provider===A?T:O))}}catch(E){console.error("Failed to update payment gateway status:",E),i(T=>T.map(O=>O.provider===A?{...O,isEnabled:!w}:O)),alert("Failed to update payment gateway status. Please try again.")}},b=A=>{i(w=>w.map(E=>E.provider===A.provider?A:E)),d(null)},[y,g]=N.useState(null),j=async A=>{try{const w=await Me.testSuperAdminPaymentGateway(A);if(w.success)g({show:!0,success:!0,message:"Test payment completed successfully!",transactionId:w.transactionId,provider:A});else{const E=w.error&&(w.error.includes("not configured")||w.error.includes("not set")||w.error.includes("missing"));g({show:!0,success:!1,message:E?`Configuration Required: ${w.error}. Please configure the ${A} payment gateway credentials first.`:w.error||"Test payment failed. Please check your configuration.",provider:A})}}catch(w){console.error("Test payment error:",w),g({show:!0,success:!1,message:"Test payment failed. Please check your configuration.",provider:A})}},k=A=>({stripe:{apiKey:"Publishable Key",apiSecret:"Secret Key"},razorpay:{apiKey:"Key ID",apiSecret:"Key Secret"},paypal:{clientId:"Client ID",clientSecret:"Client Secret"},payu:{merchantKey:"Merchant Key",merchantSalt:"Merchant Salt"},paytm:{merchantId:"Merchant ID",merchantKey:"Merchant Key"},square:{applicationId:"Application ID",accessToken:"Access Token"},braintree:{merchantId:"Merchant ID",publicKey:"Public Key",privateKey:"Private Key"},adyen:{apiKey:"API Key",merchantAccount:"Merchant Account"},"authorize.net":{apiLoginId:"API Login ID",transactionKey:"Transaction Key"}})[A]||{},S={stripe:"https://cdn.worldvectorlogo.com/logos/stripe-4.svg",razorpay:"https://cdn.worldvectorlogo.com/logos/razorpay.svg",paypal:"https://cdn.worldvectorlogo.com/logos/paypal-3.svg",payu:"https://cdn.worldvectorlogo.com/logos/payu.svg",paytm:"https://cdn.worldvectorlogo.com/logos/paytm.svg",square:"https://cdn.worldvectorlogo.com/logos/square-3.svg",braintree:"https://cdn.worldvectorlogo.com/logos/braintree.svg",adyen:"https://cdn.worldvectorlogo.com/logos/adyen.svg","authorize.net":"https://cdn.worldvectorlogo.com/logos/authorize-net.svg"};return t.jsxs("div",{className:"space-y-8",children:[l&&u&&t.jsxs(it,{isOpen:!0,onClose:()=>d(null),title:`Configure ${u.name}`,children:[t.jsx("div",{className:"space-y-4",children:Object.entries(k(l)).map(([A,w])=>t.jsx(Ht,{label:w,children:t.jsx("input",{type:"password",value:u.config[A]||"",onChange:E=>i(T=>T.map(O=>O.provider===l?{...O,config:{...O.config,[A]:E.target.value}}:O)),className:"w-full bg-background border border-muted p-2 rounded font-mono",placeholder:`Enter ${w}`})},A))}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:()=>d(null),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>b(u),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]}),m&&m.show&&t.jsx("div",{className:`p-4 rounded-lg border ${m.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[m.success?t.jsx(V.CheckCircle,{className:"h-5 w-5 text-green-600"}):t.jsx(V.XCircle,{className:"h-5 w-5 text-red-600"}),t.jsx("span",{className:"font-medium",children:m.message})]})}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Payment Gateways"}),t.jsx("button",{onClick:f,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(A=>t.jsxs("div",{className:`bg-surface p-6 rounded-xl shadow-lg border ${A.isEnabled?"border-primary-500/50":"border-muted/50"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("img",{src:S[A.provider],alt:A.name,className:"h-8"}),t.jsx(xp,{checked:A.isEnabled,onChange:w=>x(A.provider,w)})]}),t.jsx("h3",{className:"font-semibold text-lg mb-2",children:A.name}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Secure payment processing with advanced fraud protection and PCI compliance."}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-subtle",children:"Status:"}),t.jsx("span",{className:`font-medium ${A.isEnabled?"text-green-500":"text-red-500"}`,children:A.isEnabled?"Enabled":"Disabled"})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-subtle",children:"Provider:"}),t.jsx("span",{className:"font-medium capitalize",children:A.provider})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>d(A.provider),className:"flex-1 bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm",children:"Configure"}),t.jsx("button",{onClick:()=>j(A.provider),disabled:!A.isEnabled,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg text-sm disabled:cursor-not-allowed",children:"Test Payment"})]})]},A.provider))})]})},NX=({tickets:e,organizations:r,users:n,onUpdateStatus:a})=>{const[s,i]=N.useState("OPEN"),[l,d]=N.useState(null),u=N.useMemo(()=>s==="ALL"?e:e.filter(p=>p.status===s),[e,s]),m={OPEN:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",IN_PROGRESS:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",RESOLVED:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"};return t.jsxs("div",{className:"space-y-6",children:[l&&t.jsxs(it,{isOpen:!0,onClose:()=>d(null),title:`Ticket #${l.id.slice(0,8)}`,children:[t.jsx("h3",{className:"text-lg font-bold",children:l.subject}),t.jsx("div",{className:"mt-4 space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:(l.replies||[]).map((p,f)=>{const x=n.find(y=>y.id===p.authorId),b=x?.role==="Super Admin";return t.jsxs("div",{className:`flex items-start gap-3 ${b?"flex-row-reverse":""}`,children:[t.jsx("img",{src:x?.avatar,className:"w-8 h-8 rounded-full"}),t.jsxs("div",{className:`p-3 rounded-lg max-w-lg ${b?"bg-primary-500 text-white":"bg-muted"}`,children:[t.jsx("p",{className:"text-sm",children:p.message}),t.jsx("p",{className:`text-xs mt-1 ${b?"text-primary-200":"text-subtle"}`,children:new Date(p.timestamp).toLocaleString()})]})]},f)})})]}),t.jsx("h2",{className:"text-2xl font-bold",children:"Support Tickets"}),t.jsx("div",{className:"flex gap-2 p-1 bg-surface rounded-lg border border-muted w-min",children:["OPEN","IN_PROGRESS","RESOLVED","ALL"].map(p=>t.jsx("button",{onClick:()=>i(p),className:`px-3 py-1 text-sm font-semibold rounded-md ${s===p?"bg-primary-600 text-white":"text-subtle"}`,children:p},p))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(p=>{const f=r.find(b=>b.id===p.organizationId),x=n.find(b=>b.id===p.userId);return t.jsxs("div",{onClick:()=>d(p),className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 space-y-3 cursor-pointer hover:border-primary-500/50 transition-colors",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:p.subject}),t.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full ${m[p.status]}`,children:p.status})]}),t.jsxs("p",{className:"text-sm text-subtle",children:["From: ",x?.name||"N/A"," at ",f?.name||"N/A"]}),t.jsxs("p",{className:"text-xs text-subtle pt-2 border-t border-muted",children:["Last update: ",new Date(p.lastReplyAt).toLocaleString()]})]},p.id)})})]})},kX=({logs:e,users:r})=>{const[n,a]=N.useState("all"),[s,i]=N.useState("all"),[l,d]=N.useState(e),[u,m]=N.useState(!1),[p,f]=N.useState(1),[x,b]=N.useState(1),[y,g]=N.useState(""),[j,k]=N.useState(""),S=async(O=1)=>{m(!0);try{const D=new URLSearchParams({page:O.toString(),limit:"50",...n!=="all"&&{action:n},...s!=="all"&&{actorId:s},...y&&{startDate:y},...j&&{endDate:j}}),I=await fetch(`${window.location.origin}/api/super-admin/audit-logs?${D}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(I.ok){const M=await I.json();d(M.logs),b(M.pagination.pages),f(M.pagination.page)}else console.error("Failed to fetch audit logs:",I.status,I.statusText)}catch(D){console.error("Failed to fetch audit logs:",D)}finally{m(!1)}};N.useEffect(()=>{S(1)},[n,s,y,j]);const A=N.useMemo(()=>Array.from(new Set(e.map(O=>O.action))),[e]),w=N.useMemo(()=>r,[r]),E=[{value:"all",label:"All Actions"},{value:"ORGANIZATION_CREATED",label:"Organization Created"},{value:"ORGANIZATION_UPDATED",label:"Organization Updated"},{value:"ORGANIZATION_DELETED",label:"Organization Deleted"},{value:"PLAN_CREATED",label:"Plan Created"},{value:"PLAN_UPDATED",label:"Plan Updated"},{value:"PLAN_DELETED",label:"Plan Deleted"},{value:"ADDON_CREATED",label:"Addon Created"},{value:"ADDON_UPDATED",label:"Addon Updated"},{value:"ADDON_DELETED",label:"Addon Deleted"},{value:"PAYMENT_GATEWAY_CREATED",label:"Payment Gateway Created"},{value:"PAYMENT_GATEWAY_UPDATED",label:"Payment Gateway Updated"},{value:"PAYMENT_GATEWAY_DELETED",label:"Payment Gateway Deleted"},{value:"BLOG_POST_CREATED",label:"Blog Post Created"},{value:"BLOG_POST_UPDATED",label:"Blog Post Updated"},{value:"BLOG_POST_DELETED",label:"Blog Post Deleted"},{value:"COUPON_CREATED",label:"Coupon Created"},{value:"COUPON_UPDATED",label:"Coupon Updated"},{value:"COUPON_DELETED",label:"Coupon Deleted"},{value:"TICKET_STATUS_UPDATED",label:"Ticket Status Updated"},{value:"INQUIRY_STATUS_UPDATED",label:"Inquiry Status Updated"},{value:"USER_LOGIN",label:"User Login"}],T={ORGANIZATION_CREATED:t.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),ORGANIZATION_UPDATED:t.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),ORGANIZATION_DELETED:t.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),PLAN_CREATED:t.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),PLAN_UPDATED:t.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),PLAN_DELETED:t.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),USER_LOGIN:t.jsx(V.Key,{className:"h-4 w-4 text-yellow-500"}),PAYMENT_GATEWAY_UPDATED:t.jsx(V.Key,{className:"h-4 w-4 text-purple-500"}),TICKET_STATUS_UPDATED:t.jsx(V.Support,{className:"h-4 w-4 text-orange-500"}),BLOG_POST_CREATED:t.jsx(V.Blog,{className:"h-4 w-4 text-green-500"}),BLOG_POST_UPDATED:t.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),BLOG_POST_DELETED:t.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),ADDON_CREATED:t.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),ADDON_UPDATED:t.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),ADDON_DELETED:t.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),COUPON_CREATED:t.jsx(V.Add,{className:"h-4 w-4 text-green-500"}),COUPON_UPDATED:t.jsx(V.Edit,{className:"h-4 w-4 text-blue-500"}),COUPON_DELETED:t.jsx(V.Delete,{className:"h-4 w-4 text-red-500"}),INQUIRY_STATUS_UPDATED:t.jsx(V.Leads,{className:"h-4 w-4 text-orange-500"})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Security & Audit Logs"}),t.jsxs("button",{onClick:()=>S(1),disabled:u,className:"bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[t.jsx(V.Activity,{className:`h-4 w-4 ${u?"animate-spin":""}`}),"Refresh"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-surface rounded-lg border border-muted",children:[t.jsx(Ht,{label:"Filter by Action Type",children:t.jsxs("select",{value:n,onChange:O=>a(O.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[E.map(O=>t.jsx("option",{value:O.value,children:O.label},O.value)),A.filter(O=>!E.some(D=>D.value===O)).map(O=>t.jsx("option",{value:O,children:O.replace(/_/g," ")},O))]})}),t.jsx(Ht,{label:"Filter by User",children:t.jsxs("select",{value:s,onChange:O=>i(O.target.value),className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"all",children:"All Users"}),w.map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})}),t.jsx(Ht,{label:"Start Date",children:t.jsx("input",{type:"date",value:y,onChange:O=>g(O.target.value),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Ht,{label:"End Date",children:t.jsx("input",{type:"date",value:j,onChange:O=>k(O.target.value),className:"w-full bg-background border border-muted p-2 rounded"})})]}),t.jsx("div",{className:"bg-surface rounded-lg shadow-lg overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Action"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Details"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Administrator"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"IP Address"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Timestamp"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:u?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t.jsx("span",{className:"ml-2",children:"Loading audit logs..."})]})})}):l.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-subtle",children:"No audit logs found matching the current filters."})}):l.map(O=>{const D=typeof O.actorId=="object"?O.actorId:r.find(I=>I.id===O.actorId);return t.jsxs("tr",{className:"hover:bg-muted/20",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[T[O.action]||t.jsx("div",{className:"w-4 h-4"}),t.jsx("p",{className:"font-mono text-xs font-semibold bg-muted/50 w-fit px-2 py-1 rounded-md",children:O.action.replace(/_/g," ")})]})}),t.jsx("td",{className:"px-6 py-4 text-sm max-w-xs truncate",title:O.details,children:O.details}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle",children:typeof D=="object"?D.name:"Unknown"}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle font-mono",children:O.ipAddress||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm text-subtle whitespace-nowrap",children:new Date(O.timestamp).toLocaleString()})]},O.id)})})]})}),x>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[t.jsx("button",{onClick:()=>S(p-1),disabled:p===1||u,className:"px-3 py-1 bg-muted hover:bg-subtle/20 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Previous"}),t.jsxs("span",{className:"text-sm text-subtle",children:["Page ",p," of ",x]}),t.jsx("button",{onClick:()=>S(p+1),disabled:p===x||u,className:"px-3 py-1 bg-muted hover:bg-subtle/20 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Next"})]})]})},SX=({healthData:e,apiLogs:r,errorLogs:n})=>{const[a,s]=N.useState("api"),[i,l]=N.useState(null),[d,u]=N.useState(!0),[m,p]=N.useState(10),[f,x]=N.useState(!0),[b,y]=N.useState(null),g=async(w=!1)=>{w&&(u(!0),y(null));try{const E=await Me.getSuperAdminMonitoring();l(E),y(null),x(!0)}catch{y("Failed to fetch monitoring data. Using sample data."),x(!1)}finally{w&&u(!1)}};if(N.useEffect(()=>{g(!0);let w=null;return f&&(w=setInterval(()=>g(!1),m*1e3)),()=>{w&&clearInterval(w)}},[m,f]),d)return t.jsxs("div",{className:"space-y-8",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"System Monitoring"}),t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})]});const j=i?.serviceStatus||{API:"Unknown",Database:"Unknown","Facebook Sync":"Unknown"},k=i?.healthData||[],S=i?.apiLogs||r,A=i?.errorLogs||n;return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"System Monitoring"}),t.jsxs("div",{className:"flex items-center gap-4",onClick:w=>w.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xp,{checked:f,onChange:w=>x(w)}),t.jsx("span",{className:"text-sm font-medium",children:"Auto Refresh"})]}),t.jsx("label",{className:"text-sm font-medium",children:"Refresh every:"}),t.jsxs("select",{value:m,onChange:w=>p(Number(w.target.value)),className:"bg-background border border-muted p-2 rounded text-sm",disabled:!f,children:[t.jsx("option",{value:10,children:"10 seconds"}),t.jsx("option",{value:15,children:"15 seconds"}),t.jsx("option",{value:30,children:"30 seconds"}),t.jsx("option",{value:60,children:"1 minute"})]}),t.jsx("button",{onClick:()=>g(!0),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Refresh Now"})]})]}),b&&t.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:b}),i&&t.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Successfully loaded real system monitoring data from database!"}),!i&&!b&&t.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",children:"Loading real system monitoring data..."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"CPU Load"}),t.jsx(Fr,{width:"100%",height:100,children:t.jsxs(O0,{data:k,margin:{top:10,right:0,left:0,bottom:0},children:[t.jsx(Bt,{formatter:w=>[`${w}%`,"CPU Load"]}),t.jsx(da,{type:"monotone",dataKey:"cpuLoad",stroke:"#8884d8",fill:"#8884d8"})]})}),t.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["CPU Load (",k[k.length-1]?.cpuLoad||0,"%)"]})]}),t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"Memory Usage"}),t.jsx(Fr,{width:"100%",height:100,children:t.jsxs(O0,{data:k,margin:{top:10,right:0,left:0,bottom:0},children:[t.jsx(Bt,{formatter:w=>[`${w}%`,"Memory Usage"]}),t.jsx(da,{type:"monotone",dataKey:"memoryUsage",stroke:"#82ca9d",fill:"#82ca9d"})]})}),t.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["Memory (",k[k.length-1]?.memoryUsage||0,"%)"]})]}),t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"text-sm font-semibold text-subtle text-center",children:"Response Time"}),t.jsx(Fr,{width:"100%",height:100,children:t.jsxs(O0,{data:k,margin:{top:10,right:0,left:0,bottom:0},children:[t.jsx(Bt,{formatter:w=>[`${w}ms`,"Response Time"]}),t.jsx(da,{type:"monotone",dataKey:"responseTime",stroke:"#ffc658",fill:"#ffc658"})]})}),t.jsxs("p",{className:"text-center text-lg font-bold text-on-surface mt-2",children:["Response (",k[k.length-1]?.responseTime||0,"ms)"]})]})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"font-semibold mb-3",children:"Service Status"}),t.jsx("div",{className:"space-y-2",children:Object.entries(j).map(([w,E])=>t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{children:w}),t.jsx("span",{className:`font-semibold ${E==="Operational"?"text-green-500":"text-orange-500"}`,children:E})]},w))})]})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"border-b border-muted flex",children:[t.jsx("button",{onClick:()=>s("api"),className:`px-4 py-2 text-sm font-semibold ${a==="api"?"border-b-2 border-primary-500":"text-subtle"}`,children:"API Logs"}),t.jsx("button",{onClick:()=>s("error"),className:`px-4 py-2 text-sm font-semibold ${a==="error"?"border-b-2 border-primary-500":"text-subtle"}`,children:"Error Logs"})]}),t.jsx("div",{className:"max-h-80 overflow-y-auto mt-4 font-mono text-xs",children:(a==="api"?S:A).slice(0,50).map(w=>t.jsxs("p",{className:"border-b border-muted/50 py-1",children:[`[${new Date(w.timestamp).toLocaleTimeString()}] `," ","statusCode"in w?`(${w.statusCode}) ${w.endpoint}`:`[${w.severity.toUpperCase()}] ${w.message}`]},w.id))})]})]})},CX=({rule:e,emailTemplates:r,superAdmins:n,onClose:a,onSave:s})=>{const[i,l]=N.useState(e||{name:"",description:"",isEnabled:!0,trigger:{type:"TRIAL_STARTED"},action:{type:"SEND_EMAIL_TO_ADMIN",templateId:r[0]?.id}}),d=p=>{const f=p.target.value;l(f==="TRIAL_EXPIRING"?x=>({...x,trigger:{type:f,daysBefore:3}}):x=>({...x,trigger:{type:f}}))},u=p=>{const f=p.target.value;f==="SEND_EMAIL_TO_ADMIN"&&l(x=>({...x,action:{type:f,templateId:r[0]?.id}})),f==="SEND_EMAIL_TO_SUPER_ADMIN"&&l(x=>({...x,action:{type:f,recipientId:n[0]?.id}}))},m=p=>{p.preventDefault(),s(i),a()};return t.jsx(it,{isOpen:!0,onClose:a,title:e?.id?"Edit Global Rule":"New Global Rule",children:t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsx(Ht,{label:"Rule Name",children:t.jsx("input",{type:"text",value:i.name,onChange:p=>l({...i,name:p.target.value}),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Ht,{label:"Description",children:t.jsx("input",{type:"text",value:i.description,onChange:p=>l({...i,description:p.target.value}),className:"w-full bg-background border border-muted p-2 rounded"})}),t.jsx(Ht,{label:"Trigger",children:t.jsxs("select",{value:i.trigger?.type,onChange:d,className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"ORGANIZATION_CREATED",children:"Organization is Created"}),t.jsx("option",{value:"TRIAL_STARTED",children:"Trial is Started"}),t.jsx("option",{value:"TRIAL_EXPIRING",children:"Trial is Expiring"}),t.jsx("option",{value:"SUBSCRIPTION_PAYMENT_FAILED",children:"Subscription Payment Fails"}),t.jsx("option",{value:"SUBSCRIPTION_CANCELED",children:"Subscription is Canceled"})]})}),t.jsx(Ht,{label:"Action",children:t.jsxs("select",{value:i.action?.type,onChange:u,className:"w-full bg-background border border-muted p-2 rounded",children:[t.jsx("option",{value:"SEND_EMAIL_TO_ADMIN",children:"Send Email to Org Admin"}),t.jsx("option",{value:"SEND_EMAIL_TO_SUPER_ADMIN",children:"Send Email to Super Admin"})]})}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save"})]})]})})},AX=({rules:e,emailTemplates:r,superAdmins:n,onSave:a,onDelete:s})=>{const[i,l]=N.useState(!1),[d,u]=N.useState(null);return t.jsxs("div",{className:"space-y-6",children:[i&&t.jsx(CX,{rule:d,emailTemplates:r,superAdmins:n,onClose:()=>l(!1),onSave:a}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Global Automation"}),t.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[t.jsx(V.Add,{className:"w-5 h-5"})," New Rule"]})]}),t.jsx("div",{className:"space-y-4",children:e.map(m=>t.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold",children:m.name}),t.jsx("p",{className:"text-sm text-subtle",children:m.description})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(xp,{checked:m.isEnabled,onChange:p=>a({...m,isEnabled:p})}),t.jsx("button",{onClick:()=>{u(m),l(!0)},children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>s(m.id),children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]},m.id))})]})},EX=({organizations:e,plans:r,fetchAnalyticsData:n})=>{const[a,s]=N.useState(null),[i,l]=N.useState(!0);if(N.useEffect(()=>{(async()=>{try{l(!0);const u=await n();s(u)}catch(u){console.error("Failed to load analytics data:",u)}finally{l(!1)}})()},[n]),i)return t.jsxs("div",{className:"space-y-8",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Platform Analytics"}),t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})]});const d=a?.mrrData||[{name:"Jan",mrr:0},{name:"Feb",mrr:0},{name:"Mar",mrr:0},{name:"Apr",mrr:0},{name:"May",mrr:0},{name:"Jun",mrr:0}];return t.jsxs("div",{className:"space-y-8",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Platform Analytics"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"font-semibold text-lg mb-4",children:"MRR Growth"}),t.jsx(Fr,{width:"100%",height:300,children:t.jsxs(nT,{data:d,children:[t.jsx(hi,{strokeDasharray:"3 3"}),t.jsx(Kn,{dataKey:"name"}),t.jsx(Cn,{tickFormatter:u=>`${u/1e3}k`}),t.jsx(Bt,{formatter:u=>`${u.toLocaleString()}`}),t.jsx(Nn,{}),t.jsx(Qo,{type:"monotone",dataKey:"mrr",stroke:"#8884d8",strokeWidth:2})]})})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Platform Statistics"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-subtle",children:"Total Organizations"}),t.jsx("span",{className:"font-semibold",children:a?.totalOrganizations||0})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-subtle",children:"Active Organizations"}),t.jsx("span",{className:"font-semibold text-green-500",children:a?.activeOrganizations||0})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-subtle",children:"Current MRR"}),t.jsxs("span",{className:"font-semibold",children:["$",d[d.length-1]?.mrr?.toLocaleString()||0]})]})]})]})]})]})},OX=e=>{const{organizations:r,users:n,leads:a,tasks:s,subscriptionPlans:i,supportTickets:l,auditLogs:d,globalAnnouncement:u,addons:m,systemHealthData:p,apiUsageLogs:f,errorLogs:x,globalAutomationRules:b,globalEmailTemplates:y,onSaveGlobalRule:g,onDeleteGlobalRule:j,homepageContent:k,blogPosts:S,onSaveBlogPost:A,onDeleteBlogPost:w,inquiries:E,setInquiries:T,setLeads:O,onLogout:D,onAddOrganization:I,onUpdateOrganization:M,onDeleteOrganization:L,onSaveSubscriptionPlan:B,onDeleteSubscriptionPlan:z,onUpdateTicketStatus:W,onSaveAnnouncement:R,onSaveUser:H,globalIntegrationStatus:U,onUpdateGlobalIntegrationStatus:q,localizationSettings:Q,onUpdateLocalizationSettings:K,onUpdateHomepageContent:F,paymentGatewaySettings:_,onUpdatePaymentGatewaySettings:G,pricingComparisonData:Z,onUpdatePricingComparisonData:oe}=e,[le,ge]=N.useState("overview"),[ve,fe]=N.useState("subscriptions"),[Y,ne]=N.useState(null),[ue,Ve]=N.useState(!1),[Te,Pe]=N.useState(null),Xe=je=>{e.onSaveBlogPost(je),ne(null)};if(Y){const je=Y==="new"?null:Y;return t.jsx(uX,{post:je,users:n,onSave:Xe,onClose:()=>ne(null)})}const pe=()=>{switch(le){case"overview":return t.jsx(fX,{organizations:r,users:n,leads:a,plans:i,tasks:s});case"organizations":return t.jsx(gX,{organizations:r,users:n,leads:a,plans:i,onUpdate:M,onDelete:L,onAdd:I});case"lead_inquiries":return t.jsx(bX,{inquiries:E,setInquiries:T});case"plans":return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex border-b border-muted",children:[t.jsx("button",{onClick:()=>fe("subscriptions"),className:`px-4 py-2 text-sm font-semibold ${ve==="subscriptions"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Subscription Plans"}),t.jsx("button",{onClick:()=>fe("features"),className:`px-4 py-2 text-sm font-semibold ${ve==="features"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Feature Comparison"}),t.jsx("button",{onClick:()=>fe("coupons"),className:`px-4 py-2 text-sm font-semibold ${ve==="coupons"?"border-b-2 border-primary-500 text-on-surface":"text-subtle hover:border-muted"}`,children:"Coupons & Offers"})]}),ve==="subscriptions"&&t.jsxs("div",{className:"space-y-8",children:[t.jsx(yX,{plans:i,onSave:B,onDelete:z}),t.jsx(jX,{addons:m,onSave:e.onSaveAddon,onDelete:e.onDeleteAddon})]}),ve==="features"&&t.jsx(mX,{data:Z,onSave:oe}),ve==="coupons"&&t.jsx(hX,{coupons:e.coupons,onSaveCoupon:e.onSaveCoupon,onDeleteCoupon:e.onDeleteCoupon,offerStrip:e.offerStrip,onUpdateOfferStrip:e.onUpdateOfferStrip})]});case"payment_gateway":return t.jsx(wX,{settings:_,onSave:G,onUpdatePaymentGatewaySettings:G});case"blog":return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Blog Management"}),t.jsxs("button",{onClick:()=>ne("new"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[t.jsx(V.Add,{className:"w-5 h-5"})," New Post"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:S.map(je=>{const Ie=n.find(ee=>ee.id===je.authorId);return t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 overflow-hidden flex flex-col",children:[t.jsx("img",{src:je.featuredImage.src,alt:je.featuredImage.alt,className:"h-48 w-full object-cover"}),t.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[t.jsx("h3",{className:"font-bold text-lg",children:je.title}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-subtle mt-2",children:[t.jsx("img",{src:Ie?.avatar,className:"h-6 w-6 rounded-full"}),t.jsx("span",{children:Ie?.name}),t.jsx("span",{children:""}),t.jsx("span",{children:new Date(je.publishedAt).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-subtle mt-4 pt-2 border-t border-muted flex-grow items-end",children:[t.jsxs("span",{children:[t.jsx(V.Eye,{className:"h-4 w-4 inline mr-1"})," ",je.views]}),t.jsxs("span",{children:[t.jsx(V.ChatBubble,{className:"h-4 w-4 inline mr-1"})," ",je.comments]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 mt-auto",children:[t.jsx("button",{onClick:()=>ne(je),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),t.jsx("button",{onClick:()=>w(je.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]})]},je.id)})})]});case"cms":return t.jsx(oX,{content:k,onSave:F});case"monitoring":return t.jsx(SX,{healthData:[],apiLogs:[],errorLogs:[]});case"automation":return t.jsx(AX,{rules:b,emailTemplates:y,superAdmins:n.filter(je=>je.role==="Super Admin"),onSave:g,onDelete:j});case"analytics":return t.jsx(EX,{organizations:r,plans:i,fetchAnalyticsData:e.fetchAnalyticsData});case"support":return t.jsx(NX,{tickets:l,organizations:r,users:n,onUpdateStatus:W});case"security":return t.jsx(kX,{logs:d,users:n});case"settings":return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Global Settings"}),t.jsx("button",{className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save All Settings"})]}),t.jsxs(I0,{title:"Platform Announcement",description:"Display a banner to all users.",children:[t.jsx("textarea",{defaultValue:u.message,rows:2,className:"w-full bg-background border border-muted p-2 rounded"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("select",{defaultValue:u.type,className:"bg-background border border-muted p-2 rounded text-sm",children:[t.jsx("option",{value:"info",children:"Info"}),t.jsx("option",{value:"warning",children:"Warning"}),t.jsx("option",{value:"critical",children:"Critical"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xp,{checked:u.isActive,onChange:()=>{}}),t.jsx("span",{children:"Active"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx(I0,{title:"Localization",children:t.jsx("p",{children:"Localization settings here..."})}),t.jsx(I0,{title:"Global Integrations",children:t.jsx("p",{children:"Integration settings here..."})})]})]});default:return null}},Oe=[{id:"overview",name:"Overview",icon:t.jsx(V.Dashboard,{})},{id:"organizations",name:"Organizations",icon:t.jsx(V.Team,{})},{id:"lead_inquiries",name:"Lead Inquiries",icon:t.jsx(V.Leads,{})},{id:"plans",name:"Pricing & Plans",icon:t.jsx(V.Billing,{})},{id:"payment_gateway",name:"Payment Gateway",icon:t.jsx(V.Key,{})},{id:"blog",name:"Blog Management",icon:t.jsx(V.Blog,{})},{id:"cms",name:"Homepage CMS",icon:t.jsx(V.Globe,{})},{id:"monitoring",name:"System Monitoring",icon:t.jsx(V.Activity,{})},{id:"automation",name:"Global Automation",icon:t.jsx(V.Automation,{})},{id:"analytics",name:"Analytics",icon:t.jsx(V.Analytics,{})},{id:"support",name:"Support",icon:t.jsx(V.Support,{})},{id:"security",name:"Security & Audits",icon:t.jsx(V.Security,{})},{id:"settings",name:"Global Settings",icon:t.jsx(V.Settings,{})}],ae=({onLinkClick:je})=>t.jsxs("nav",{className:"w-64 bg-surface flex flex-col h-screen border-r border-muted flex-shrink-0",children:[t.jsxs(vt,{to:"/super-admin",className:"h-16 flex items-center px-4 border-b border-muted group",children:[t.jsx(V.Logo,{className:"h-8 w-auto text-primary-500 transition-transform group-hover:scale-110"}),t.jsx("h1",{className:"ml-3 text-lg font-bold group-hover:text-primary-500 transition-colors",children:"Super Admin"})]}),t.jsx("div",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:Oe.map(Ie=>t.jsxs("button",{onClick:()=>{ge(Ie.id),je?.()},className:`w-full flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200 ${le===Ie.id?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[X.cloneElement(Ie.icon,{className:"h-5 w-5 mr-3"}),t.jsx("span",{children:Ie.name})]},Ie.id))}),t.jsx("div",{className:"p-4 border-t border-muted",children:t.jsxs("button",{onClick:D,className:"w-full flex items-center text-sm font-semibold text-subtle hover:text-red-500 transition-colors p-2 rounded-lg",children:[t.jsx(V.Logout,{className:"h-5 w-5 mr-2"}),"Logout"]})})]});return t.jsxs("div",{className:"min-h-screen bg-background text-on-surface flex flex-col md:flex-row",children:[t.jsx("div",{className:"hidden md:block",children:t.jsx(ae,{})}),ue&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>Ve(!1),children:t.jsx("div",{className:"absolute top-0 left-0 h-full",onClick:je=>je.stopPropagation(),children:t.jsx(ae,{onLinkClick:()=>Ve(!1)})})}),Te&&t.jsx(it,{isOpen:!0,onClose:()=>Pe(null),title:"Test Payment Result",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Te.success?t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(V.CheckCircle,{className:"h-6 w-6 text-green-600"})}):t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(V.XCircle,{className:"h-6 w-6 text-red-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:`text-lg font-semibold ${Te.success?"text-green-800":"text-red-800"}`,children:Te.success?"Test Successful":"Test Failed"}),t.jsxs("p",{className:"text-sm text-subtle capitalize",children:[Te.provider," Payment Gateway"]})]})]}),t.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-muted mb-6",children:[t.jsx("p",{className:"text-sm text-on-surface",children:Te.message}),Te.success&&Te.transactionId&&t.jsxs("div",{className:"mt-3 p-2 bg-muted rounded text-xs font-mono",children:["Transaction ID: ",Te.transactionId]})]}),t.jsx("div",{className:"flex justify-end gap-3",children:t.jsx("button",{onClick:()=>Pe(null),className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-colors",children:"Close"})})]})}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsxs("header",{className:"md:hidden h-16 bg-surface border-b border-muted flex items-center justify-between px-4",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("button",{onClick:()=>Ve(!0),children:t.jsx(V.Menu,{className:"h-6 w-6"})})]}),t.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:pe()})]})]})},TX=({value:e,onChange:r})=>t.jsxs("div",{className:"bg-background border border-muted rounded-md h-full flex flex-col",children:[t.jsxs("div",{className:"p-2 border-b border-muted flex gap-2 flex-shrink-0",children:[t.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm font-bold w-7 h-7",children:"B"}),t.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm italic w-7 h-7",children:"I"}),t.jsx("button",{type:"button",className:"p-1 rounded hover:bg-muted text-sm underline w-7 h-7",children:"U"})]}),t.jsx("textarea",{value:e,onChange:n=>r(n.target.value),className:"w-full p-2 bg-transparent focus:outline-none flex-grow resize-none",placeholder:"<html>...</html>"})]}),PX=({template:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{name:"",subject:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:e?.id?"Edit Email Template":"Create New Template",children:t.jsxs("form",{onSubmit:i,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4 flex flex-col",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),t.jsx("input",{value:a.name,onChange:l=>s({...a,name:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Email Subject"}),t.jsx("input",{value:a.subject,onChange:l=>s({...a,subject:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{className:"flex-grow flex flex-col",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Body (HTML)"}),t.jsx(TX,{value:a.body||"",onChange:l=>s({...a,body:l})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-1",children:"Live Preview"}),t.jsxs("div",{className:"w-full h-full bg-background p-4 rounded-lg border border-muted overflow-y-auto",children:[t.jsx("div",{className:"font-semibold text-on-surface p-2 bg-muted rounded-t-md",children:a.subject||"Your Subject Here"}),t.jsx("div",{className:"p-2 prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:a.body||"<p>Your email content will appear here...</p>"}})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},DX=({campaign:e,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l,onSend:d,onSchedule:u})=>{const[m,p]=N.useState(e||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[f,x]=N.useState(e?.status==="SCHEDULED"?"later":e?.status==="SENT"?"now":"draft"),[b,y]=N.useState((e?.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),g=j=>{j.preventDefault();const k={...m};f==="now"&&d?d(k):f==="later"&&u?u(k,b):(f==="now"?(k.status="SENT",k.sentAt=new Date().toISOString(),k.scheduledAt=null):f==="later"?(k.status="SCHEDULED",k.scheduledAt=new Date(b).toISOString(),k.sentAt=null):(k.status="DRAFT",k.sentAt=null,k.scheduledAt=null),l(k)),i()};return t.jsx(it,{isOpen:!0,onClose:i,title:e?.id?"Edit Campaign":"Create New Campaign",children:t.jsxs("form",{onSubmit:g,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),t.jsx("input",{value:m.name,onChange:j=>p({...m,name:j.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Email Template"}),t.jsx("select",{value:m.templateId,onChange:j=>p({...m,templateId:j.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:r.map(j=>t.jsx("option",{value:j.id,children:j.name},j.id))})]}),t.jsxs("div",{className:"pt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),t.jsx(Kc,{conditions:m.conditions||[],onConditionsChange:j=>p({...m,conditions:j}),users:n,pipelineStages:a,customFieldDefs:s})]}),t.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"draft",checked:f==="draft",onChange:j=>x(j.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"now",checked:f==="now",onChange:j=>x(j.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"later",checked:f==="later",onChange:j=>x(j.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),f==="later"&&t.jsx("div",{className:"pl-9",children:t.jsx("input",{type:"datetime-local",value:b,onChange:j=>y(j.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},IX=({users:e,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=N.useState("campaigns"),[i,l]=N.useState(null),[d,u]=N.useState(null),[m,p]=N.useState([]),[f,x]=N.useState([]),[b,y]=N.useState(!0),[g,j]=N.useState(null);N.useEffect(()=>{(async()=>{try{y(!0),j(null);const L=localStorage.getItem("token")||localStorage.getItem("authToken"),B=L?{Authorization:`Bearer ${L}`}:{},[z,W]=await Promise.all([fetch("/api/marketing/templates/email",{headers:B}).then(R=>R.json()).then(R=>R.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/email",{headers:B}).then(R=>R.json()).then(R=>R.data||[]).catch(()=>[])]);p(z||[]),x(W||[])}catch(L){console.error("Failed to fetch email marketing data:",L),j(`Failed to load data: ${L.message}`)}finally{y(!1)}})()},[]);const k=async L=>{try{let B;if(L.id)B=await fetch(`/api/marketing/templates/email/${L.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});else{const W=localStorage.getItem("token")||localStorage.getItem("authToken");if(!W)throw new Error("No authentication token found. Please log in again.");B=await fetch("/api/marketing/templates/email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify(L)})}if(!B.ok)throw new Error("Failed to save template");const z=await B.json();L.id?p(W=>W.map(R=>R.id===L.id?z:R)):p(W=>[...W,z])}catch(B){console.error("Failed to save template:",B),j(`Failed to save template: ${B.message}`)}},S=async L=>{if(confirm("Are you sure you want to delete this template?"))try{if(!(await fetch(`/api/marketing/templates/email/${L}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");p(B=>B.filter(z=>z.id!==L))}catch(B){console.error("Failed to delete template:",B),j(`Failed to delete template: ${B.message}`)}},A=async L=>{try{let B;if(L.id)B=await fetch(`/api/marketing/campaigns/email/${L.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});else{const W=localStorage.getItem("token")||localStorage.getItem("authToken");if(!W)throw new Error("No authentication token found. Please log in again.");B=await fetch("/api/marketing/campaigns/email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify(L)})}if(!B.ok)throw new Error("Failed to save campaign");const z=await B.json();L.id?x(W=>W.map(R=>R.id===L.id?z:R)):x(W=>[...W,z])}catch(B){console.error("Failed to save campaign:",B),j(`Failed to save campaign: ${B.message}`)}},w=async L=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/email/${L}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");x(B=>B.filter(z=>z.id!==L))}catch(B){console.error("Failed to delete campaign:",B),j(`Failed to delete campaign: ${B.message}`)}},E=async L=>{try{const B={...L,status:"SENT",sentAt:new Date().toISOString()};await A(B),alert("Campaign sent successfully!")}catch(B){console.error("Failed to send campaign:",B),j(`Failed to send campaign: ${B.message}`)}},T=async(L,B)=>{try{const z={...L,status:"SCHEDULED",scheduledAt:new Date(B).toISOString()};await A(z),alert("Campaign scheduled successfully!")}catch(z){console.error("Failed to schedule campaign:",z),j(`Failed to schedule campaign: ${z.message}`)}},O=async L=>{try{const B={...L,status:"DRAFT",scheduledAt:null};await A(B),alert("Campaign unscheduled successfully!")}catch(B){console.error("Failed to unschedule campaign:",B),j(`Failed to unschedule campaign: ${B.message}`)}};if(b)return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-lg",children:"Loading email marketing data..."})]})});if(g)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:g}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const D=(L,B=null)=>{u(B),l(L)},I=()=>{u(null),l(null)},M=L=>{switch(L.status){case"SENT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return t.jsxs("div",{className:"space-y-6",children:[i==="template"&&t.jsx(PX,{template:d,onClose:I,onSave:k}),i==="campaign"&&t.jsx(DX,{campaign:d,templates:m,onClose:I,onSave:A,onSend:E,onSchedule:T,users:e,pipelineStages:r,customFieldDefs:n}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[t.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),t.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),t.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),t.jsxs("button",{onClick:()=>D(a==="templates"?"template":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="templates"?"New Template":"New Campaign"]})]}),a==="campaigns"&&(f.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(L=>t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:L.name}),M(L)]}),L.status==="SCHEDULED"&&L.scheduledAt&&t.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(L.scheduledAt).toLocaleString()]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold",children:L.recipientCount.toLocaleString()}),t.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-2xl font-bold",children:[L.openRate,"%"]}),t.jsx("p",{className:"text-xs text-subtle",children:"Open Rate"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>D("campaign",L),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),L.status==="DRAFT"&&t.jsx("button",{onClick:()=>E(L),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),L.status==="SCHEDULED"&&t.jsx("button",{onClick:()=>O(L),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),t.jsx("button",{onClick:()=>w(L.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]},L.id))}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Email,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Email Campaigns Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first email campaign to get started with email marketing."}),t.jsxs("button",{onClick:()=>D("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="templates"&&(m.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(L=>t.jsxs("div",{className:"bg-surface p-4 rounded-xl shadow-lg border border-muted/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h3",{className:"font-semibold text-on-surface",children:L.name}),t.jsxs("div",{className:"space-x-2",children:[t.jsx("button",{onClick:()=>D("template",L),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>S(L.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"mt-2 bg-background p-3 border border-muted rounded-md h-32 overflow-hidden relative group",children:[t.jsx("div",{className:"font-semibold text-sm",children:L.subject}),t.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none opacity-60",dangerouslySetInnerHTML:{__html:L.body}}),t.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-background to-transparent"})]})]},L.id))}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Email,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Email Templates Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first email template to start building campaigns."}),t.jsxs("button",{onClick:()=>D("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="analytics"&&(f.length>0?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(tr,{title:"Total Campaigns",value:f.length.toString(),icon:t.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),t.jsx(tr,{title:"Total Emails Sent",value:f.filter(L=>L.status==="SENT").reduce((L,B)=>L+B.recipientCount,0).toLocaleString(),icon:t.jsx(V.Email,{className:"h-6 w-6 text-blue-400"})}),t.jsx(tr,{title:"Avg. Open Rate",value:`${(f.reduce((L,B)=>L+B.openRate,0)/(f.length||1)).toFixed(1)}%`,icon:t.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted/50",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 text-on-surface",children:"Campaign Performance"}),t.jsx(Fr,{width:"100%",height:300,children:t.jsxs(hp,{data:f.filter(L=>L.status==="SENT"),children:[t.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),t.jsx(Kn,{dataKey:"name",stroke:"var(--subtle)",tick:{fontSize:12}}),t.jsx(Cn,{yAxisId:"left",orientation:"left",stroke:"#8884d8",label:{value:"Recipients",angle:-90,position:"insideLeft"}}),t.jsx(Cn,{yAxisId:"right",orientation:"right",stroke:"#82ca9d",label:{value:"Open Rate (%)",angle:-90,position:"insideRight"}}),t.jsx(Bt,{contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"}}),t.jsx(Nn,{}),t.jsx(Gn,{yAxisId:"left",dataKey:"recipientCount",fill:"#8884d8",name:"Recipients",radius:[4,4,0,0]}),t.jsx(Gn,{yAxisId:"right",dataKey:"openRate",fill:"#82ca9d",name:"Open Rate (%)",radius:[4,4,0,0]})]})})]})]}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),t.jsx("p",{className:"text-subtle mb-4",children:"Send some email campaigns to see analytics and performance data here."}),t.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},MX=({template:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{name:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:e?.id?"Edit SMS Template":"Create New Template",children:t.jsxs("form",{onSubmit:i,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Template Name"}),t.jsx("input",{type:"text",value:a.name,onChange:l=>s({...a,name:l.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Message Body"}),t.jsx("textarea",{rows:6,value:a.body,onChange:l=>s({...a,body:l.target.value}),required:!0,className:"mt-1 block w-full bg-background border border-muted rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500"}),t.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", and ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center bg-background p-4 rounded-lg border border-muted h-full",children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-4",children:"Live Preview"}),t.jsxs("div",{className:"w-72 h-96 bg-slate-800 rounded-3xl p-4 flex flex-col shadow-2xl",children:[t.jsx("div",{className:"bg-white/10 h-6 w-32 rounded-full mx-auto"}),t.jsx("div",{className:"flex-grow bg-slate-900 rounded-lg mt-4 p-2 overflow-y-auto",children:t.jsx("div",{className:"bg-blue-500 text-white text-sm p-2 rounded-lg max-w-xs self-start whitespace-pre-wrap",children:a.body||"Your SMS message will appear here..."})})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Template"})]})]})})},LX=({campaign:e,templates:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=N.useState(e||{name:"",templateId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,p]=N.useState(e?.status==="SCHEDULED"?"later":e?.status==="SENT"?"now":"draft"),[f,x]=N.useState((e?.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),b=y=>{y.preventDefault();const g={...d};m==="now"?(g.status="SENT",g.sentAt=new Date().toISOString(),g.scheduledAt=null):m==="later"?(g.status="SCHEDULED",g.scheduledAt=new Date(f).toISOString(),g.sentAt=null):(g.status="DRAFT",g.sentAt=null,g.scheduledAt=null),l(g),i()};return t.jsx(it,{isOpen:!0,onClose:i,title:e?.id?"Edit Campaign":"Create New Campaign",children:t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),t.jsx("input",{value:d.name,onChange:y=>u({...d,name:y.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"SMS Template"}),t.jsxs("select",{value:d.templateId,onChange:y=>u({...d,templateId:y.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Select a template"}),r.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{className:"pt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive this campaign. Leave empty to send to all leads."}),t.jsx(Kc,{conditions:d.conditions||[],onConditionsChange:y=>u({...d,conditions:y}),users:n,pipelineStages:a,customFieldDefs:s})]}),t.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Send Immediately"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&t.jsx("div",{className:"pl-9",children:t.jsx("input",{type:"datetime-local",value:f,onChange:y=>x(y.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},_X=({users:e,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=N.useState("campaigns"),[i,l]=N.useState({type:null,data:null}),[d,u]=N.useState([]),[m,p]=N.useState([]),[f,x]=N.useState(!0),[b,y]=N.useState(null);N.useEffect(()=>{(async()=>{try{x(!0),y(null);const D=localStorage.getItem("token")||localStorage.getItem("authToken"),I=D?{Authorization:`Bearer ${D}`}:{},[M,L]=await Promise.all([fetch("/api/marketing/templates/sms",{headers:I}).then(B=>B.json()).then(B=>B.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/sms",{headers:I}).then(B=>B.json()).then(B=>B.data||[]).catch(()=>[])]);u(M||[]),p(L||[])}catch(D){console.error("Failed to fetch SMS marketing data:",D),y(`Failed to load data: ${D.message}`)}finally{x(!1)}})()},[]);const g=async D=>{try{let I;if(D.id)I=await fetch(`/api/marketing/templates/sms/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/templates/sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(D)})}if(!I.ok)throw new Error("Failed to save template");const M=await I.json();D.id?u(L=>L.map(B=>B.id===D.id?M:B)):u(L=>[...L,M])}catch(I){console.error("Failed to save template:",I),y(`Failed to save template: ${I.message}`)}},j=async D=>{if(confirm("Are you sure you want to delete this template?"))try{if(!(await fetch(`/api/marketing/templates/sms/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete template");u(I=>I.filter(M=>M.id!==D))}catch(I){console.error("Failed to delete template:",I),y(`Failed to delete template: ${I.message}`)}},k=async D=>{try{let I;if(D.id)I=await fetch(`/api/marketing/campaigns/sms/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/campaigns/sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(D)})}if(!I.ok)throw new Error("Failed to save campaign");const M=await I.json();D.id?p(L=>L.map(B=>B.id===D.id?M:B)):p(L=>[...L,M])}catch(I){console.error("Failed to save campaign:",I),y(`Failed to save campaign: ${I.message}`)}},S=async D=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/sms/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");p(I=>I.filter(M=>M.id!==D))}catch(I){console.error("Failed to delete campaign:",I),y(`Failed to delete campaign: ${I.message}`)}},A=async D=>{try{const I={...D,status:"SENT",sentAt:new Date().toISOString()};await k(I),alert("Campaign sent successfully!")}catch(I){console.error("Failed to send campaign:",I),y(`Failed to send campaign: ${I.message}`)}},w=async D=>{try{const I={...D,status:"DRAFT",scheduledAt:null};await k(I),alert("Campaign unscheduled successfully!")}catch(I){console.error("Failed to unschedule campaign:",I),y(`Failed to unschedule campaign: ${I.message}`)}};if(f)return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-lg",children:"Loading SMS marketing data..."})]})});if(b)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:b}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const E=(D,I=null)=>l({type:D,data:I}),T=()=>l({type:null,data:null}),O=D=>{switch(D.status){case"SENT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"SENT"});case"DRAFT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return t.jsxs("div",{className:"space-y-6",children:[i.type==="template"&&t.jsx(MX,{template:i.data,onClose:T,onSave:g}),i.type==="campaign"&&t.jsx(LX,{campaign:i.data,templates:d,onClose:T,onSave:k,users:e,pipelineStages:r,customFieldDefs:n}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[t.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),t.jsx("button",{onClick:()=>s("templates"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="templates"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Templates"}),t.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),t.jsxs("button",{onClick:()=>E(a==="templates"?"template":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="templates"?"New Template":"New Campaign"]})]}),a==="campaigns"&&(m.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(D=>t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:D.name}),O(D)]}),D.status==="SCHEDULED"&&D.scheduledAt&&t.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(D.scheduledAt).toLocaleString()]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold",children:D.recipientCount.toLocaleString()}),t.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-2xl font-bold",children:[D.deliveryRate,"%"]}),t.jsx("p",{className:"text-xs text-subtle",children:"Delivery Rate"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>E("campaign",D),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),D.status==="DRAFT"&&t.jsx("button",{onClick:()=>A(D),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Send"}),D.status==="SCHEDULED"&&t.jsx("button",{onClick:()=>w(D),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),t.jsx("button",{onClick:()=>S(D.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]},D.id))}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.SMS,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No SMS Campaigns Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first SMS campaign to get started with SMS marketing."}),t.jsxs("button",{onClick:()=>E("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="templates"&&(d.length>0?t.jsx("div",{className:"bg-surface rounded-xl shadow-lg p-6",children:t.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(D=>t.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:D.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>E("template",D),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>j(D.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),t.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap p-2 bg-muted/50 rounded",children:D.body})]},D.id))})}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.SMS,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No SMS Templates Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first SMS template to start building campaigns."}),t.jsxs("button",{onClick:()=>E("template"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Template"]})]})})),a==="analytics"&&(m.length>0?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(tr,{title:"Total Campaigns",value:m.length.toString(),icon:t.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),t.jsx(tr,{title:"Total SMS Sent",value:m.filter(D=>D.status==="SENT").reduce((D,I)=>D+I.recipientCount,0).toLocaleString(),icon:t.jsx(V.SMS,{className:"h-6 w-6 text-blue-400"})}),t.jsx(tr,{title:"Avg. Delivery Rate",value:`${(m.reduce((D,I)=>D+I.deliveryRate,0)/(m.length||1)).toFixed(1)}%`,icon:t.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),t.jsx("p",{className:"text-subtle mb-4",children:"Send some SMS campaigns to see analytics and performance data here."}),t.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},M0=({label:e,value:r,onChange:n,options:a})=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:e}),t.jsx("select",{value:r,onChange:s=>n(s.target.value),className:"w-full mt-1 bg-surface border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:a.map(s=>t.jsx("option",{value:s.value,children:s.label},s.value))})]});class FX extends N.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){return this.state.hasError?this.props.fallback||t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:"Something went wrong"}),t.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Try Again"})]})}):this.props.children}}const RX=e=>{const{x:r,y:n,width:a,height:s,value:i,name:l}=e,d=r+a/2,u=n+s/2,m=Math.min(16,Math.max(10,a*.12,s*.35)),p=Math.min(14,Math.max(8,a*.1,s*.25));if(s<30||a<50)return t.jsx("text",{x:d,y:u,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:p,fontWeight:"bold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:i});const f=m+3+p+2,x=u-f/2;return t.jsxs("g",{children:[t.jsx("text",{x:d,y:x+m/2,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:m,fontWeight:"bold",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:l}),t.jsxs("text",{x:d,y:x+m+2+p/2,fill:"#ffffff",textAnchor:"middle",dominantBaseline:"middle",fontSize:p,fontWeight:"600",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:["(",i,")"]})]})},$X=()=>{const[e,r]=N.useState(null),[n,a]=N.useState(!0),[s,i]=N.useState(null),[l,d]=N.useState("all"),[u,m]=N.useState("all"),[p,f]=N.useState("all"),[x,b]=N.useState([]),[y,g]=N.useState([]),[j,k]=N.useState(!1),[S,A]=N.useState(!1);N.useEffect(()=>{(async()=>{try{a(!0),console.log("Fetching reports data...");const z=await Me.getReportsData();console.log("Reports data received:",z),r(z),i(null)}catch(z){console.error("Failed to fetch reports data:",z),i(`Failed to load reports data: ${z.message}`)}finally{a(!1)}})()},[]);const w=N.useMemo(()=>{if(!e)return console.log("No reports data available"),{salesFunnelData:[],leadSourceData:[],salesRepData:[],teamPerformanceData:[],conversionData:[],leadTrendData:[],summary:{totalLeads:0,totalUsers:0,totalStages:0,totalTeams:0,avgLeadsPerRep:0}};console.log("Processing reports data:",e);const z=x.length>0?e.salesFunnelData.filter(R=>x.includes(R.stageId)):e.salesFunnelData,W=y.length>0?e.leadSourceData.filter(R=>y.includes(R.name)):e.leadSourceData;return{...e,salesFunnelData:z,leadSourceData:W}},[e,x,y]),{salesFunnelData:E=[],leadSourceData:T=[],salesRepData:O=[],teamPerformanceData:D=[]}=w||{},I=N.useMemo(()=>!E||!Array.isArray(E)?(console.log("No salesFunnelData available:",E),[]):(console.log("Funnel data (already sorted by backend):",E),E),[E]),M=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1"],L=Math.PI/180,B=({cx:z,cy:W,midAngle:R,innerRadius:H,outerRadius:U,percent:q,index:Q})=>{const K=H+(U-H)*.5,F=z+K*Math.cos(-R*L),_=W+K*Math.sin(-R*L);return t.jsx("text",{x:F,y:_,fill:"white",textAnchor:"middle",dominantBaseline:"central",children:`${(q*100).toFixed(0)}%`})};return n?t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-lg",children:"Loading reports data..."})]})}):s||!w?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Reports & Analytics"}),t.jsx("p",{className:"text-subtle mt-1",children:"Analyze performance and gain insights into your sales pipeline."})]}),t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:s||"No data available"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})]}):t.jsx(FX,{children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Reports & Analytics"}),t.jsx("p",{className:"text-subtle mt-1",children:"Analyze performance and gain insights into your sales pipeline."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-surface rounded-lg",children:[t.jsx(M0,{label:"Date Range",value:l,onChange:d,options:[{value:"all",label:"All Time"},{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"}]}),t.jsx(M0,{label:"Team",value:u,onChange:m,options:[{value:"all",label:"All Teams"},...D?.map(z=>({value:z.name,label:z.name}))||[]]}),t.jsx(M0,{label:"Sales Rep",value:p,onChange:f,options:[{value:"all",label:"All Reps"},...O?.map(z=>({value:z.name,label:z.name}))||[]]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg h-96 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[t.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Sales Funnel"}),t.jsx("button",{onClick:()=>k(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-lg text-sm",children:"Edit"})]}),t.jsx("div",{className:"flex-1 w-full",children:I.length>0?t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(cT,{children:[t.jsx(Bt,{formatter:(z,W)=>[z,W],labelFormatter:z=>`Stage: ${z}`,contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),t.jsx(Va,{dataKey:"value",data:I,isAnimationActive:!0,animationBegin:200,animationDuration:1200,cx:"50%",cy:"50%",children:t.jsx(on,{position:"center",fill:"#fff",stroke:"none",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},content:t.jsx(RX,{})})})]})}):t.jsx("div",{className:"flex items-center justify-center h-full text-subtle",children:"No funnel data available"})})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-on-surface",children:"Lead Source Performance"}),t.jsx("button",{onClick:()=>A(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded-lg text-sm",children:"Edit"})]}),T&&T.length>0?t.jsx(Fr,{width:"100%",height:300,children:t.jsxs(fp,{children:[t.jsx(On,{data:T,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,labelLine:!1,label:B,children:T.map((z,W)=>t.jsx(Hn,{fill:M[W%M.length]},`cell-${W}`))}),t.jsx(Bt,{}),t.jsx(Nn,{})]})}):t.jsx("div",{className:"flex items-center justify-center h-48 text-subtle",children:"No lead source data available"})]})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-lg",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4 text-on-surface",children:"Sales Rep Leaderboard"}),t.jsx("div",{className:"overflow-x-auto",children:O&&O.length>0?t.jsxs("table",{className:"min-w-full divide-y divide-muted",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Rep"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Leads Assigned"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Deals Won"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-subtle uppercase",children:"Total Value"})]})}),t.jsx("tbody",{className:"divide-y divide-muted",children:O.map(z=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 font-medium text-on-surface",children:z.name}),t.jsx("td",{className:"px-6 py-4 text-subtle",children:z.leads}),t.jsx("td",{className:"px-6 py-4 text-subtle",children:z.won}),t.jsxs("td",{className:"px-6 py-4 text-subtle",children:["$",z.value.toLocaleString()]})]},z.name))})]}):t.jsx("div",{className:"flex items-center justify-center h-32 text-subtle",children:"No sales rep data available"})})]}),t.jsx(it,{isOpen:j,onClose:()=>k(!1),title:"Select Sales Stages for Funnel",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-subtle",children:"Choose which sales stages to include in the funnel chart:"}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(e?.stages||[]).map(z=>{const W=e?.salesFunnelData?.find(H=>H.stageId===z.id),R=W?W.value:0;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:x.length===0||x.includes(z.id),onChange:H=>{H.target.checked?b(U=>[...U,z.id]):b(U=>U.filter(q=>q!==z.id))},className:"rounded border-muted"}),t.jsxs("span",{className:"text-sm",children:[z.name," (",R,")"]})]},z.id)})}),t.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[t.jsx("button",{onClick:()=>{b([]),k(!1)},className:"px-4 py-2 text-sm text-subtle hover:text-on-surface",children:"Reset to All"}),t.jsx("button",{onClick:()=>k(!1),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm",children:"Apply"})]})]})}),t.jsx(it,{isOpen:S,onClose:()=>A(!1),title:"Select Lead Sources for Pie Chart",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-subtle",children:"Choose which lead sources to include in the pie chart:"}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e?.leadSourceData.map(z=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.length===0||y.includes(z.name),onChange:W=>{W.target.checked?g(R=>[...R,z.name]):g(R=>R.filter(H=>H!==z.name))},className:"rounded border-muted"}),t.jsxs("span",{className:"text-sm",children:[z.name," (",z.value,")"]})]},z.name))}),t.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[t.jsx("button",{onClick:()=>{g([]),A(!1)},className:"px-4 py-2 text-sm text-subtle hover:text-on-surface",children:"Reset to All"}),t.jsx("button",{onClick:()=>A(!1),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm",children:"Apply"})]})]})})]})})},zX=({script:e,onClose:r,onSave:n})=>{const[a,s]=N.useState(e||{name:"",body:""}),i=l=>{l.preventDefault(),n(a),r()};return t.jsx(it,{isOpen:!0,onClose:r,title:e?.id?"Edit Call Script":"Create New Script",children:t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Script Name"}),t.jsx("input",{value:a.name,onChange:l=>s({...a,name:l.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Script Body"}),t.jsx("textarea",{value:a.body,onChange:l=>s({...a,body:l.target.value}),rows:8,className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0}),t.jsxs("p",{className:"text-xs text-subtle mt-1",children:["Use variables like ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{name}}"}),", ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{course}}"}),", and ",t.jsx("code",{className:"bg-muted px-1 rounded-sm",children:"{{user_name}}"}),"."]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:r,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Script"})]})]})})},BX=({campaign:e,scripts:r,users:n,pipelineStages:a,customFieldDefs:s,onClose:i,onSave:l})=>{const[d,u]=N.useState(e||{name:"",scriptId:r[0]?.id,status:"DRAFT",conditions:[]}),[m,p]=N.useState(e?.status==="SCHEDULED"?"later":e?.status==="SENT"?"now":"draft"),[f,x]=N.useState((e?.scheduledAt?new Date(e.scheduledAt).toISOString().slice(0,16):"")||new Date(Date.now()+3600*1e3).toISOString().slice(0,16)),b=y=>{y.preventDefault();const g={...d};m==="now"?(g.status="SENT",g.sentAt=new Date().toISOString(),g.scheduledAt=null):m==="later"?(g.status="SCHEDULED",g.scheduledAt=new Date(f).toISOString(),g.sentAt=null):(g.status="DRAFT",g.sentAt=null,g.scheduledAt=null),l(g),i()};return t.jsx(it,{isOpen:!0,onClose:i,title:e?.id?"Edit Call Campaign":"Create New Call Campaign",children:t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Campaign Name"}),t.jsx("input",{value:d.name,onChange:y=>u({...d,name:y.target.value}),type:"text",className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle",children:"Call Script"}),t.jsxs("select",{value:d.scriptId,onChange:y=>u({...d,scriptId:y.target.value}),className:"mt-1 block w-full bg-background border border-muted rounded-md py-2 px-3",required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Select a script"}),r.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]}),t.jsxs("div",{className:"pt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface",children:"Target Audience"}),t.jsx("p",{className:"text-sm text-subtle mb-4",children:"Define which leads will receive a call in this campaign."}),t.jsx(Kc,{conditions:d.conditions||[],onConditionsChange:y=>u({...d,conditions:y}),users:n,pipelineStages:a,customFieldDefs:s})]}),t.jsxs("div",{className:"pt-4 border-t border-muted mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"Scheduling Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"draft",checked:m==="draft",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Save as Draft"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"now",checked:m==="now",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Start Immediately"})]}),t.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-muted/50 cursor-pointer",children:[t.jsx("input",{type:"radio",value:"later",checked:m==="later",onChange:y=>p(y.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium",children:"Schedule for Later"})]}),m==="later"&&t.jsx("div",{className:"pl-9",children:t.jsx("input",{type:"datetime-local",value:f,onChange:y=>x(y.target.value),className:"bg-background border border-muted p-2 rounded-md text-sm"})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Save Campaign"})]})]})})},WX=({users:e,pipelineStages:r,customFieldDefs:n})=>{const[a,s]=N.useState("campaigns"),[i,l]=N.useState({type:null,data:null}),[d,u]=N.useState([]),[m,p]=N.useState([]),[f,x]=N.useState(!0),[b,y]=N.useState(null);N.useEffect(()=>{(async()=>{try{x(!0),y(null);const D=localStorage.getItem("token")||localStorage.getItem("authToken"),I=D?{Authorization:`Bearer ${D}`}:{},[M,L]=await Promise.all([fetch("/api/marketing/scripts/call",{headers:I}).then(B=>B.json()).then(B=>B.data||[]).catch(()=>[]),fetch("/api/marketing/campaigns/call",{headers:I}).then(B=>B.json()).then(B=>B.data||[]).catch(()=>[])]);u(M||[]),p(L||[])}catch(D){console.error("Failed to fetch call data:",D),y(`Failed to load data: ${D.message}`)}finally{x(!1)}})()},[]);const g=async D=>{try{let I;if(D.id)I=await fetch(`/api/marketing/scripts/call/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/scripts/call",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(D)})}if(!I.ok)throw new Error("Failed to save script");const M=await I.json();D.id?u(L=>L.map(B=>B.id===D.id?M:B)):u(L=>[...L,M])}catch(I){console.error("Failed to save script:",I),y(`Failed to save script: ${I.message}`)}},j=async D=>{if(confirm("Are you sure you want to delete this script?"))try{if(!(await fetch(`/api/marketing/scripts/call/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete script");u(I=>I.filter(M=>M.id!==D))}catch(I){console.error("Failed to delete script:",I),y(`Failed to delete script: ${I.message}`)}},k=async D=>{try{let I;if(D.id)I=await fetch(`/api/marketing/campaigns/call/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});else{const L=localStorage.getItem("token")||localStorage.getItem("authToken");if(!L)throw new Error("No authentication token found. Please log in again.");I=await fetch("/api/marketing/campaigns/call",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(D)})}if(!I.ok)throw new Error("Failed to save campaign");const M=await I.json();D.id?p(L=>L.map(B=>B.id===D.id?M:B)):p(L=>[...L,M])}catch(I){console.error("Failed to save campaign:",I),y(`Failed to save campaign: ${I.message}`)}},S=async D=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/marketing/campaigns/call/${D}`,{method:"DELETE"})).ok)throw new Error("Failed to delete campaign");p(I=>I.filter(M=>M.id!==D))}catch(I){console.error("Failed to delete campaign:",I),y(`Failed to delete campaign: ${I.message}`)}},A=async D=>{try{const I={...D,status:"SENT",sentAt:new Date().toISOString()};await k(I),alert("Campaign started successfully!")}catch(I){console.error("Failed to start campaign:",I),y(`Failed to start campaign: ${I.message}`)}},w=async D=>{try{const I={...D,status:"DRAFT",scheduledAt:null};await k(I),alert("Campaign unscheduled successfully!")}catch(I){console.error("Failed to unschedule campaign:",I),y(`Failed to unschedule campaign: ${I.message}`)}};if(f)return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-lg",children:"Loading call data..."})]})});if(b)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-lg mb-2",children:b}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})})});const E=(D,I=null)=>l({type:D,data:I}),T=()=>l({type:null,data:null}),O=D=>{switch(D.status){case"SENT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:"COMPLETED"});case"DRAFT":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",children:"DRAFT"});case"SCHEDULED":return t.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:"SCHEDULED"})}};return t.jsxs("div",{className:"space-y-6",children:[i.type==="script"&&t.jsx(zX,{script:i.data,onClose:T,onSave:g}),i.type==="campaign"&&t.jsx(BX,{campaign:i.data,scripts:d,onClose:T,onSave:k,users:e,pipelineStages:r,customFieldDefs:n}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex border border-muted bg-surface rounded-lg p-1",children:[t.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="campaigns"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Campaigns"}),t.jsx("button",{onClick:()=>s("scripts"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="scripts"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Scripts"}),t.jsx("button",{onClick:()=>s("analytics"),className:`px-4 py-1.5 text-sm font-semibold rounded-md ${a==="analytics"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:"Analytics"})]}),t.jsxs("button",{onClick:()=>E(a==="scripts"?"script":"campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," ",a==="scripts"?"New Script":"New Campaign"]})]}),a==="campaigns"&&(m.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(D=>t.jsxs("div",{className:"bg-surface rounded-xl shadow-lg border border-muted/50 p-5 flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("h3",{className:"font-bold text-on-surface flex-grow pr-4",children:D.name}),O(D)]}),D.status==="SCHEDULED"&&D.scheduledAt&&t.jsxs("p",{className:"text-xs text-blue-500 dark:text-blue-400 font-medium mt-1",children:["Scheduled for: ",new Date(D.scheduledAt).toLocaleString()]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 flex-grow",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold",children:D.recipientCount.toLocaleString()}),t.jsx("p",{className:"text-xs text-subtle",children:"Recipients"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-2xl font-bold",children:[D.connectionRate,"%"]}),t.jsx("p",{className:"text-xs text-subtle",children:"Connection Rate"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-muted",children:[t.jsx("button",{onClick:()=>E("campaign",D),className:"flex-1 text-center bg-muted hover:bg-subtle/20 text-on-surface text-sm font-semibold py-2 px-3 rounded-lg",children:"Edit"}),D.status==="DRAFT"&&t.jsx("button",{onClick:()=>A(D),className:"flex-1 text-center bg-green-500/20 hover:bg-green-500/30 text-green-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Start"}),D.status==="SCHEDULED"&&t.jsx("button",{onClick:()=>w(D),className:"flex-1 text-center bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-500 text-sm font-semibold py-2 px-3 rounded-lg",children:"Unschedule"}),t.jsx("button",{onClick:()=>S(D.id),className:"p-2 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-lg",children:t.jsx(V.Delete,{className:"h-5 w-5"})})]})]},D.id))}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Call,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Call Campaigns Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first call campaign to get started with call marketing."}),t.jsxs("button",{onClick:()=>E("campaign"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Campaign"]})]})})),a==="scripts"&&(d.length>0?t.jsx("div",{className:"bg-surface rounded-xl shadow-lg p-6",children:t.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:d.map(D=>t.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:D.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>E("script",D),className:"p-1.5 text-subtle hover:text-primary-500 hover:bg-primary-500/10 rounded-full",children:t.jsx(V.Edit,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>j(D.id),className:"p-1.5 text-subtle hover:text-red-500 hover:bg-red-500/10 rounded-full",children:t.jsx(V.Delete,{className:"h-4 w-4"})})]})]}),t.jsx("p",{className:"text-sm text-subtle mt-2 whitespace-pre-wrap p-2 bg-muted/50 rounded",children:D.body})]},D.id))})}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Call,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Call Scripts Found"}),t.jsx("p",{className:"text-subtle mb-4",children:"Create your first call script to start building campaigns."}),t.jsxs("button",{onClick:()=>E("script"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Add,{className:"w-5 h-5 mr-2"})," Create Your First Script"]})]})})),a==="analytics"&&(m.length>0?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(tr,{title:"Total Campaigns",value:m.length.toString(),icon:t.jsx(V.Marketing,{className:"h-6 w-6 text-indigo-400"})}),t.jsx(tr,{title:"Total Calls Placed",value:m.filter(D=>D.status==="SENT").reduce((D,I)=>D+I.recipientCount,0).toLocaleString(),icon:t.jsx(V.Call,{className:"h-6 w-6 text-purple-400"})}),t.jsx(tr,{title:"Avg. Connection Rate",value:`${(m.reduce((D,I)=>D+I.connectionRate,0)/(m.length||1)).toFixed(1)}%`,icon:t.jsx(V.Success,{className:"h-6 w-6 text-green-400"})})]}):t.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:t.jsxs("div",{children:[t.jsx(V.Analytics,{className:"h-16 w-16 text-subtle mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-on-surface mb-2",children:"No Analytics Data Available"}),t.jsx("p",{className:"text-subtle mb-4",children:"Start some call campaigns to see analytics and performance data here."}),t.jsxs("button",{onClick:()=>s("campaigns"),className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg flex items-center mx-auto",children:[t.jsx(V.Marketing,{className:"w-5 h-5 mr-2"})," View Campaigns"]})]})}))]})},UX=e=>new Promise(r=>setTimeout(r,e)),qX=({config:e})=>{const[r,n]=N.useState(!1),[a,s]=N.useState([]),[i,l]=N.useState(0),[d,u]=N.useState(""),[m,p]=N.useState({}),[f,x]=N.useState(!1),[b,y]=N.useState(!1),g=N.useRef(null),j=()=>{g.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(j,[a]),N.useEffect(()=>{r&&(s([{sender:"bot",text:e.welcomeMessage}]),l(0),p({}),y(!1),x(!0),setTimeout(()=>{e.questions.length>0&&s(S=>[...S,{sender:"bot",text:e.questions[0].question}]),x(!1)},500))},[r,e.welcomeMessage,e.questions]);const k=S=>{if(S.preventDefault(),!d.trim()||f||b)return;const A={sender:"user",text:d};s(w=>[...w,A]),u("")};return N.useEffect(()=>{(async()=>{if(a.length>0&&a[a.length-1].sender==="user"&&!b&&!f){if(x(!0),i<e.questions.length){const S=e.questions[i],A=a[a.length-1].text,w={...m,[S.crmField]:A};p(w);const E=i+1;if(await UX(1e3),E<e.questions.length){const T=e.questions[E].question.replace(/{{(.*?)}}/g,(O,D)=>w[D.trim()]||"");s(O=>[...O,{sender:"bot",text:T}]),l(E)}else console.log("Chat completed. Captured lead data:",w),s(T=>[...T,{sender:"bot",text:e.thankYouMessage}]),y(!0)}x(!1)}})()},[a,e.questions,e.thankYouMessage,i,b,m,f]),t.jsxs("div",{className:"fixed bottom-5 right-5 z-50",children:[t.jsx("div",{className:`transition-all duration-300 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:t.jsxs("div",{className:"w-80 h-[450px] bg-surface rounded-xl shadow-2xl flex flex-col border border-muted overflow-hidden",children:[t.jsxs("header",{className:"p-4 text-white flex items-center justify-between flex-shrink-0",style:{backgroundColor:e.color},children:[t.jsx("h3",{className:"font-bold",children:"Clienn CRM Assistant"}),t.jsx("button",{onClick:()=>n(!1),children:t.jsx(V.Close,{className:"w-5 h-5"})})]}),t.jsxs("main",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[a.map((S,A)=>t.jsx("div",{className:`flex ${S.sender==="bot"?"justify-start":"justify-end"}`,children:t.jsx("p",{className:`max-w-[80%] p-2 rounded-lg text-sm ${S.sender==="bot"?"bg-muted text-on-surface":"text-white"}`,style:{backgroundColor:S.sender==="user"?e.color:void 0},children:S.text})},A)),f&&t.jsx("div",{className:"flex justify-start",children:t.jsxs("div",{className:"p-2 rounded-lg bg-muted flex items-center gap-1",children:[t.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce [animation-delay:-0.3s]"}),t.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce [animation-delay:-0.15s]"}),t.jsx("span",{className:"h-2 w-2 bg-subtle rounded-full animate-bounce"})]})}),t.jsx("div",{ref:g})]}),t.jsx("footer",{className:"p-2 border-t border-muted flex-shrink-0",children:t.jsxs("form",{onSubmit:k,className:"flex gap-2",children:[t.jsx("input",{type:"text",value:d,onChange:S=>u(S.target.value),placeholder:"Type your message...",disabled:b||f,className:"flex-1 bg-background border border-muted rounded-full py-2 px-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500"}),t.jsx("button",{type:"submit",className:"p-2 rounded-full text-white",style:{backgroundColor:e.color},disabled:b||f,children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})})]})}),t.jsxs("button",{onClick:()=>n(!r),className:`transition-all duration-300 ease-in-out text-white shadow-lg flex items-center gap-2 ${r?"opacity-0 scale-90 pointer-events-none":"opacity-100 scale-100"}`,style:{backgroundColor:e.color,borderRadius:e.style==="icon"?"50%":"30px",padding:e.style==="icon"?"1rem":"1rem 1.5rem"},children:[t.jsx(V.ChatBubble,{className:"w-6 h-6"}),e.style==="button"&&t.jsx("span",{className:"font-semibold",children:"Chat with us"})]})]})},fT=({isOpen:e,onClose:r,plan:n})=>{const[a,s]=N.useState("form"),[i,l]=N.useState(null),[d,u]=N.useState([]),[m,p]=N.useState({name:"",number:"",expiry:"",cvc:""});N.useEffect(()=>{e&&(s("form"),f())},[e]);const f=async()=>{try{const g=await Me.requestWithRetry("/api/public/enabled-payment-gateways",{method:"GET"});u(g.gateways||[]),g.gateways&&g.gateways.length>0&&l(g.gateways[0])}catch(g){console.error("Failed to fetch enabled gateways:",g),u(["stripe","paypal"]),l("stripe")}};if(!e||!n)return null;const x=g=>{const{name:j,value:k}=g.target;if(j==="number"){const S=k.replace(/\D/g,"").replace(/(\d{4})/g,"$1 ").trim();p(A=>({...A,[j]:S.slice(0,19)}))}else if(j==="expiry"){const S=k.replace(/\D/g,"").replace(/(\d{2})/,"$1/").trim();p(A=>({...A,[j]:S.slice(0,5)}))}else p(j==="cvc"?S=>({...S,[j]:k.replace(/\D/g,"").slice(0,4)}):S=>({...S,[j]:k}))},b=g=>{g.preventDefault(),s("processing"),setTimeout(()=>{s("success")},2e3)},y=()=>{switch(a){case"processing":return t.jsxs("div",{className:"text-center p-8 h-80 flex flex-col justify-center",children:[t.jsxs("svg",{className:"animate-spin h-12 w-12 text-primary-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Processing your request..."}),t.jsx("p",{className:"text-sm text-subtle",children:"This will only take a moment."})]});case"success":return t.jsxs("div",{className:"text-center p-8 h-80 flex flex-col justify-center",children:[t.jsx(V.CheckCircle,{className:"h-16 w-16 text-green-500 mx-auto"}),t.jsx("h3",{className:"mt-4 text-2xl font-bold",children:"Success! Your Trial has Started"}),t.jsx("p",{className:"text-subtle mt-2 max-w-sm mx-auto",children:"Your card will not be charged until your 14-day free trial ends. You can cancel anytime. You can now log in to get started with Clienn CRM."}),t.jsx(vt,{to:"/login",onClick:r,className:"mt-6 inline-block bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-lg",children:"Go to Login"})]});case"form":default:const g={stripe:"https://cdn.worldvectorlogo.com/logos/stripe-4.svg",razorpay:"https://cdn.worldvectorlogo.com/logos/razorpay.svg",paypal:"https://cdn.worldvectorlogo.com/logos/paypal-3.svg",payu:"https://cdn.worldvectorlogo.com/logos/payu.svg",paytm:"https://cdn.worldvectorlogo.com/logos/paytm.svg",square:"https://cdn.worldvectorlogo.com/logos/square-3.svg",braintree:"https://cdn.worldvectorlogo.com/logos/braintree.svg",adyen:"https://cdn.worldvectorlogo.com/logos/adyen.svg","authorize.net":"https://cdn.worldvectorlogo.com/logos/authorize-net.svg"},j={stripe:"Stripe",razorpay:"Razorpay",paypal:"PayPal",payu:"PayU",paytm:"Paytm",square:"Square",braintree:"Braintree",adyen:"Adyen","authorize.net":"Authorize.net"};return t.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-bold",children:"Start your 14-day free trial"}),t.jsxs("div",{className:"bg-background p-4 rounded-lg border border-muted",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"font-semibold",children:[n.name," Plan"]}),t.jsxs("span",{className:"font-bold text-lg",children:[n.price,t.jsx("span",{className:"text-sm font-normal text-subtle",children:"/mo"})]})]}),t.jsx("ul",{className:"text-xs text-subtle mt-2 space-y-1",children:n.features.map(k=>t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(V.CheckCircle,{className:"h-3 w-3 text-green-500"})," ",k]},k))})]}),d.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-semibold text-sm",children:"Choose Payment Method"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(k=>t.jsxs("button",{type:"button",onClick:()=>l(k),className:`p-3 border rounded-lg flex items-center gap-3 hover:bg-muted/50 transition-colors ${i===k?"border-primary-500 bg-primary-50":"border-muted"}`,children:[t.jsx("img",{src:g[k],alt:j[k],className:"h-6 w-6"}),t.jsx("span",{className:"text-sm font-medium",children:j[k]})]},k))})]}),t.jsxs("p",{className:"text-xs text-subtle",children:["After your 14-day trial, your plan will automatically renew at ",n.price,"/month. You can cancel at any time before the trial ends and you won't be charged."]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{type:"text",name:"name",value:m.name,onChange:x,placeholder:"Name on Card",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),t.jsx("input",{type:"text",name:"number",value:m.number,onChange:x,placeholder:"Card Number",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",name:"expiry",value:m.expiry,onChange:x,placeholder:"MM / YY",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"}),t.jsx("input",{type:"text",name:"cvc",value:m.cvc,onChange:x,placeholder:"CVC",required:!0,className:"w-full bg-background border border-muted p-3 rounded-md text-sm"})]}),t.jsx("button",{type:"submit",className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg",children:"Start Free Trial"})]})]})}};return t.jsx(it,{isOpen:e,onClose:a==="processing"?()=>{}:r,title:a==="form"?"Checkout":"",children:y()})},Pj=e=>{const[r,n]=N.useState(null),a=N.useRef(null),s=N.useRef(null);return N.useEffect(()=>{a.current&&a.current.disconnect();const{triggerOnce:i,...l}=e;return a.current=new IntersectionObserver(([d])=>{d.isIntersecting&&(n(d),i&&s.current&&a.current?.unobserve(s.current))},l),s.current&&a.current.observe(s.current),()=>a.current?.disconnect()},[e]),[s,r]},Bn=({children:e,className:r,id:n,as:a="section"})=>{const[s,i]=Pj({threshold:.1,triggerOnce:!0}),l=!!i;return t.jsx(a,{id:n,ref:s,className:`fade-in-section ${l?"is-visible":""} ${r}`,children:e})},VX=({value:e})=>{const[r,n]=N.useState(0),[a,s]=Pj({threshold:.5,triggerOnce:!0}),i=!!s;return N.useEffect(()=>{if(i){let l=0;const d=e;if(l===d)return;const u=1500/d,m=setInterval(()=>{l+=1,n(l),l===d&&clearInterval(m)},u);return()=>clearInterval(m)}},[i,e]),t.jsx("span",{ref:a,children:r})},HX=({plan:e,onStartTrial:r})=>{const n=e.price==="$0"?"Get Started":e.name==="Enterprise"?"Contact Us":"Start Free Trial";return t.jsxs("div",{className:`group relative p-8 rounded-2xl border ${e.isPopular?"border-primary-500":"border-muted"} bg-surface flex flex-col transition-all duration-300 hover:scale-[1.03] hover:shadow-2xl hover:shadow-primary-500/10`,children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://tailwindcss.com/_next/static/media/grid.25c96030.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))] dark:invert opacity-5"}),t.jsx("div",{className:"absolute -inset-px rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:`radial-gradient(400px at ${Math.random()*100}% ${Math.random()*100}%, rgba(59, 130, 246, 0.2), transparent 80%)`}}),t.jsxs("div",{className:"relative",children:[e.isPopular&&t.jsx("div",{className:"absolute top-0 -translate-y-[150%] left-1/2 -translate-x-1/2 px-3 py-1 text-sm font-semibold text-white bg-primary-500 rounded-full whitespace-nowrap",children:"Most Popular"}),t.jsx("h3",{className:"text-xl font-bold",children:e.name}),t.jsx("p",{className:"mt-2 text-subtle",children:e.description}),t.jsxs("p",{className:"mt-6 text-4xl font-bold",children:[e.price,t.jsx("span",{className:"text-base font-normal text-subtle",children:"/month"})]}),t.jsx("ul",{className:"mt-6 space-y-3 flex-grow",children:e.features.map(a=>t.jsxs("li",{className:"flex items-center gap-3",children:[t.jsx(V.CheckCircle,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),t.jsx("span",{className:"text-sm",children:a})]},a))}),t.jsx("button",{onClick:r,className:`mt-8 block w-full text-center px-6 py-3 text-sm font-semibold rounded-lg transition-colors ${e.isPopular?"bg-primary-600 text-white hover:bg-primary-700":"bg-muted text-on-surface hover:bg-primary-500/10"}`,children:n})]})]})},s6=({testimonial:e})=>t.jsxs("div",{className:"w-80 md:w-96 flex-shrink-0 bg-surface p-8 rounded-2xl shadow-lg border border-muted h-full flex flex-col items-center mx-4 transition-transform duration-300 hover:-translate-y-2",children:[t.jsx("img",{src:e.avatar.src,alt:e.avatar.alt,loading:"lazy",className:"w-16 h-16 rounded-full mb-4 object-cover ring-2 ring-muted"}),t.jsxs("p",{className:"text-lg text-on-surface flex-grow text-center",children:['"',e.quote,'"']}),t.jsxs("div",{className:"mt-6 text-center",children:[t.jsx("p",{className:"font-semibold",children:e.author}),t.jsx("p",{className:"text-sm text-subtle",children:e.company})]})]}),GX=({content:e,blogPosts:r})=>{const{hero:n,trustedBy:a,features:s,pricing:i,testimonials:l,faq:d,finalCta:u,growthChart:m,funnel:p,contactForm:f,chatbot:x,blog:b,howItWorks:y,integrations:g}=e,j=pa(),[k,S]=N.useState(s.items[0]),[A,w]=N.useState("monthly"),[E,T]=N.useState(null),[O,D]=N.useState({}),[I,M]=N.useState(!1),[L,B]=N.useState(!1),[z,W]=Pj({threshold:.2,triggerOnce:!0}),R=!!W,[H,U]=N.useState(!1),[q,Q]=N.useState(null),[K,F]=N.useState(!1),_=N.useRef(null);N.useEffect(()=>{j.hash==="#privacy"&&(F(!0),setTimeout(()=>{_.current?.scrollIntoView({behavior:"smooth",block:"start"})},100))},[j.hash]);const G=Y=>{Q(Y),U(!0)},Z=l.items.slice(0,Math.ceil(l.items.length/2)),oe=l.items.slice(Math.ceil(l.items.length/2)),le=(Y,ne)=>{D(ue=>({...ue,[Y]:ne}))},ge=async Y=>{Y.preventDefault(),M(!0),console.log("Submitting to webhook:",f.webhookUrl),console.log("Form data:",O),await new Promise(ne=>setTimeout(ne,1500)),M(!1),B(!0),D({})},ve={Connect:t.jsx(V.Connect,{className:"h-8 w-8"}),AutomateSteps:t.jsx(V.AutomateSteps,{className:"h-8 w-8"}),Grow:t.jsx(V.Grow,{className:"h-8 w-8"})},fe={dashboard:t.jsx(V.Dashboard,{className:"h-6 w-6"}),summary:t.jsx(V.Sparkles,{className:"h-6 w-6"}),automation:t.jsx(V.Automation,{className:"h-6 w-6"}),reporting:t.jsx(V.Reports,{className:"h-6 w-6"})};return t.jsxs(t.Fragment,{children:[t.jsx(fT,{isOpen:H,onClose:()=>U(!1),plan:q}),x.enabled&&t.jsx(qX,{config:x}),t.jsx("section",{className:"py-20 sm:py-24 lg:py-32 overflow-hidden",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[t.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-on-surface",children:[n.title," ",t.jsx("br",{}),t.jsx("span",{className:"bg-gradient-to-r from-primary-500 to-purple-500 bg-clip-text text-transparent bg-[length:200%_auto] animate-gradient",children:n.gradientTitle})]}),t.jsx("p",{className:"mt-6 max-w-2xl mx-auto text-lg text-subtle",children:n.subtitle}),t.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row justify-center items-center gap-4",children:[t.jsx("button",{onClick:()=>G(i.monthlyPlans.find(Y=>Y.isPopular)||i.monthlyPlans[2]),className:"px-8 py-3 text-base font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-transform hover:scale-105 w-full sm:w-auto",children:n.cta1}),t.jsx("a",{href:"#contact",onClick:Y=>{Y.preventDefault(),document.getElementById("contact")?.scrollIntoView({behavior:"smooth"})},className:"px-8 py-3 text-base font-semibold text-on-surface bg-muted rounded-lg hover:bg-primary-500/10 transition-transform hover:scale-105 w-full sm:w-auto",children:n.cta2})]})]})}),t.jsx("div",{className:"py-12 bg-surface",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("h2",{className:"text-center text-sm font-semibold text-subtle uppercase tracking-wider",children:a.title}),t.jsx("div",{className:"group mt-8 w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:t.jsx("div",{className:"flex w-max animate-infinite-scroll group-hover:[animation-play-state:paused]",children:[...a.logos,...a.logos].map((Y,ne)=>t.jsx("div",{className:"px-8 flex-shrink-0",children:t.jsx("img",{src:Y.src,alt:Y.alt,className:"h-12 w-auto transition-transform duration-300 hover:scale-110"})},`${Y.name}-${ne}`))})})]})}),t.jsx(Bn,{id:"how-it-works",className:"py-20 sm:py-24",as:"div",children:t.jsxs("div",{ref:z,className:`container mx-auto px-4 sm:px-6 lg:px-8 fade-in-child ${R?"is-visible":""}`,children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:y.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle max-w-2xl mx-auto",children:y.subtitle})]}),t.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 text-center relative",children:[t.jsx("div",{className:`hidden md:block absolute top-8 left-0 w-full h-px draw-line ${R?"is-visible":""}`,children:t.jsx("svg",{width:"100%",height:"2",className:"overflow-visible",children:t.jsx("path",{className:"line-path",d:"M 16.66% 0 L 83.33% 0",strokeWidth:"2",stroke:"var(--muted)",strokeDasharray:"8 8",fill:"none"})})}),y.steps.map((Y,ne)=>t.jsxs("div",{className:`p-6 transition-transform duration-300 hover:-translate-y-2 anim-child anim-child-${ne+1} relative`,children:[t.jsxs("div",{className:"relative inline-block",children:[t.jsx("div",{className:"flex items-center justify-center h-16 w-16 mx-auto rounded-full bg-primary-500/10 text-primary-500 ring-8 ring-background",children:ve[Y.icon]}),t.jsx("div",{className:"absolute -top-2 -right-2 flex items-center justify-center h-8 w-8 rounded-full bg-primary-500 text-white font-bold text-sm",children:ne+1})]}),t.jsx("h3",{className:"mt-6 text-xl font-semibold",children:Y.title}),t.jsx("p",{className:"mt-2 text-subtle",children:Y.description})]},Y.id))]})]})}),t.jsx(Bn,{id:"features",className:"py-20 sm:py-24 bg-surface",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:s.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:s.subtitle})]}),t.jsxs("div",{className:"mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[t.jsx("div",{role:"tablist","aria-label":"Product features",className:"flex flex-col gap-4",children:s.items.map(Y=>t.jsxs("button",{id:`feature-tab-${Y.id}`,role:"tab","aria-selected":k.id===Y.id,"aria-controls":`feature-panel-${Y.id}`,onClick:()=>S(Y),className:`p-4 rounded-lg text-left transition-all duration-300 ${k.id===Y.id?"bg-primary-500/10 ring-2 ring-primary-500":"hover:bg-muted"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-2 rounded-lg transition-colors ${k.id===Y.id?"bg-primary-500 text-white":"bg-muted text-primary-500"}`,children:fe[Y.id]}),t.jsx("h3",{className:"font-semibold text-on-surface",children:Y.title})]}),k.id===Y.id&&t.jsx("p",{className:"mt-2 text-sm text-subtle pl-12",children:Y.description})]},Y.id))}),t.jsx("div",{className:"lg:col-span-2 relative h-96",children:s.items.map(Y=>t.jsx("div",{id:`feature-panel-${Y.id}`,role:"tabpanel","aria-labelledby":`feature-tab-${Y.id}`,className:`absolute inset-0 transition-opacity duration-500 ${k.id===Y.id?"opacity-100 visible":"opacity-0 invisible"}`,children:t.jsx("img",{src:Y.image.src,alt:Y.image.alt,loading:"lazy",className:"w-full h-full object-cover rounded-xl shadow-2xl ring-1 ring-muted/50"})},Y.id))})]})]})}),t.jsx(Bn,{id:"growth",className:"py-20 sm:py-24",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:m.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:m.subtitle}),t.jsxs("div",{className:"mt-8 bg-primary-500/10 p-6 rounded-lg text-center",children:[t.jsxs("p",{className:"text-5xl font-bold text-primary-500",children:[t.jsx(VX,{value:m.stat.value}),"%"]}),t.jsx("p",{className:"mt-2 text-sm font-semibold text-primary-600",children:m.stat.label})]})]}),t.jsxs("div",{className:"bg-surface p-6 rounded-xl shadow-lg border border-muted",children:[t.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:"Typical Growth Trajectory"}),t.jsx(Fr,{width:"100%",height:250,children:t.jsxs(hp,{data:m.chartData,children:[t.jsx(hi,{strokeDasharray:"3 3",stroke:"var(--muted)"}),t.jsx(Kn,{dataKey:"month",stroke:"var(--subtle)"}),t.jsx(Cn,{stroke:"var(--subtle)",tickFormatter:Y=>`${Y}%`}),t.jsx(Bt,{cursor:{fill:"var(--muted)"},contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"},formatter:Y=>[`${Y}%`,"Conversion Rate"]}),t.jsx(Gn,{dataKey:"value",name:"Conversion Rate",fill:"#3b82f6",radius:[4,4,0,0]})]})})]})]})})}),t.jsx(Bn,{id:"funnel",className:"py-20 sm:py-24 bg-surface",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:p.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:p.subtitle}),p.stages.length>1&&t.jsxs("div",{className:"mt-8 bg-purple-500/10 p-6 rounded-lg text-center",children:[t.jsxs("p",{className:"text-5xl font-bold text-purple-500",children:[(p.stages[p.stages.length-1].value/p.stages[0].value*100).toFixed(1),"%"]}),t.jsx("p",{className:"mt-2 text-sm font-semibold text-purple-600",children:"Overall Conversion Rate"})]})]}),t.jsx("div",{className:"bg-background p-6 rounded-xl shadow-lg border border-muted h-[400px]",children:t.jsx(Fr,{width:"100%",height:"100%",children:t.jsxs(cT,{children:[t.jsx(Bt,{contentStyle:{backgroundColor:"var(--surface)",border:"1px solid var(--muted)"}}),t.jsxs(Va,{dataKey:"value",data:p.stages,isAnimationActive:!0,children:[p.stages.map((Y,ne)=>t.jsx(Hn,{fill:["#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef"][ne%5]},`cell-${ne}`)),t.jsx(on,{position:"center",fill:"#fff",stroke:"none",dataKey:"name",className:"font-semibold"})]})]})})})]})})}),t.jsx(Bn,{id:"integrations",className:"py-20 sm:py-24",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:g.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle max-w-2xl mx-auto",children:g.subtitle})]}),t.jsx("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center",children:g.logos.map(Y=>t.jsx("div",{className:"flex justify-center transition duration-300 transform hover:scale-110 hover:shadow-2xl rounded-full p-2",children:t.jsx("img",{src:Y.src,alt:Y.alt,className:"h-12 w-auto"})},Y.name))})]})}),t.jsx(Bn,{id:"pricing",className:"py-20 sm:py-24 bg-surface",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:i.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:i.subtitle})]}),t.jsxs("div",{className:"flex justify-center items-center gap-4 mb-8",children:[t.jsx("span",{className:`font-medium ${A==="monthly"?"text-primary-500":"text-subtle"}`,children:"Monthly"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:A==="yearly",onChange:()=>w(A==="monthly"?"yearly":"monthly"),className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-8 bg-muted rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]}),t.jsx("span",{className:`font-medium ${A==="yearly"?"text-primary-500":"text-subtle"}`,children:"Yearly"}),t.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2.5 py-1 rounded-full dark:bg-green-900 dark:text-green-300",children:"Save 20%"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:(A==="monthly"?i.monthlyPlans:i.yearlyPlans).map(Y=>{const ne=()=>{Y.name==="Free"?window.location.hash="/login":Y.name==="Enterprise"?document.getElementById("contact")?.scrollIntoView({behavior:"smooth"}):G(Y)};return t.jsx(HX,{plan:Y,onStartTrial:ne},Y.name)})})]})}),t.jsx(Bn,{id:"testimonials",className:"py-20 sm:py-24",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center relative",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:l.title}),t.jsxs("div",{className:"mt-16 space-y-8",children:[t.jsx("div",{className:"group w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:t.jsx("div",{className:"flex w-max animate-infinite-scroll group-hover:[animation-play-state:paused]",children:[...Z,...Z].map((Y,ne)=>t.jsx(s6,{testimonial:Y},`${Y.id}-1-${ne}`))})}),t.jsx("div",{className:"group w-full overflow-hidden",style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},children:t.jsx("div",{className:"flex w-max animate-infinite-scroll-reverse group-hover:[animation-play-state:paused]",children:[...oe,...oe].map((Y,ne)=>t.jsx(s6,{testimonial:Y},`${Y.id}-2-${ne}`))})})]})]})}),t.jsx(Bn,{id:"blog",className:"py-20 sm:py-24 bg-surface",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:b.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:b.subtitle})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.slice(0,3).map(Y=>t.jsxs(vt,{to:`/blog/${Y.slug}`,className:"group block bg-background rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden",children:[t.jsx("div",{className:"overflow-hidden",children:t.jsx("img",{src:Y.featuredImage.src,alt:Y.featuredImage.alt,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:Y.tags.join(", ")}),t.jsx("h3",{className:"mt-2 text-lg font-bold group-hover:text-primary-500 transition-colors",children:Y.title}),t.jsx("p",{className:"mt-2 text-sm text-subtle line-clamp-3",children:Y.excerpt})]})]},Y.id))}),t.jsx("div",{className:"text-center mt-12",children:t.jsx(vt,{to:"/blog",className:"font-semibold text-primary-500 hover:text-primary-600",children:"View All Posts "})})]})}),t.jsx(Bn,{id:"faq",className:"py-20 sm:py-24 bg-background",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:d.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:d.subtitle})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 max-w-4xl mx-auto",children:d.items.map(Y=>t.jsxs("div",{className:"border-b border-muted",children:[t.jsxs("button",{id:`faq-button-${Y.id}`,onClick:()=>T(E===Y.id?null:Y.id),"aria-expanded":E===Y.id,"aria-controls":`faq-panel-${Y.id}`,className:"w-full flex justify-between items-center text-left font-semibold py-4 hover:bg-muted/50 rounded-t-lg px-2 text-on-surface",children:[t.jsx("span",{children:Y.q}),t.jsx("span",{className:`transform transition-transform duration-300 ${E===Y.id?"rotate-180":""}`,children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.jsx("div",{id:`faq-panel-${Y.id}`,role:"region","aria-labelledby":`faq-button-${Y.id}`,className:`overflow-hidden transition-all duration-300 ease-in-out ${E===Y.id?"max-h-60":"max-h-0"}`,children:t.jsx("p",{className:"pt-2 pb-4 px-2 text-subtle",children:Y.a})})]},Y.id))})]})}),t.jsxs(Bn,{id:"contact",className:"py-20 sm:py-24 relative overflow-hidden bg-surface",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary-500/10 to-purple-500/10 blur-3xl opacity-50 dark:opacity-20"}),t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:f.title}),t.jsx("p",{className:"mt-4 text-lg text-subtle",children:f.subtitle})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-start",children:[t.jsxs("div",{className:"space-y-8 order-2 lg:order-1",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:t.jsx(V.MapPin,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Our Office"}),t.jsx("p",{className:"text-subtle",children:f.address})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:t.jsx(V.Envelope,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Email Us"}),t.jsx("a",{href:`mailto:${f.email}`,className:"text-subtle hover:text-primary-500 transition-colors",children:f.email})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-3 bg-primary-500/10 rounded-lg",children:t.jsx(V.Phone,{className:"h-6 w-6 text-primary-500 flex-shrink-0"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Call Us"}),t.jsx("a",{href:`tel:${f.phone.replace(/\s/g,"")}`,className:"text-subtle hover:text-primary-500 transition-colors",children:f.phone})]})]})]}),t.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-2xl overflow-hidden shadow-lg border border-muted/50",children:t.jsx("iframe",{src:f.mapSrc,width:"100%",height:"100%",style:{border:0},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Location of Our Office on Google Maps"})})]}),t.jsx("div",{className:"bg-surface/50 dark:bg-surface/20 backdrop-blur-lg p-8 rounded-2xl shadow-2xl border border-muted/50 order-1 lg:order-2",children:L?t.jsxs("div",{className:"text-center p-8 transition-all duration-500",children:[t.jsx(V.CheckCircle,{className:"h-16 w-16 mx-auto text-green-500 mb-4"}),t.jsx("h3",{className:"text-2xl font-semibold",children:"Thank You!"}),t.jsx("p",{className:"text-subtle mt-2",children:"Your message has been sent. Our team will get back to you shortly."})]}):t.jsxs("form",{onSubmit:ge,className:"space-y-8",children:[f.fields.map(Y=>t.jsxs("div",{className:"relative z-0",children:[Y.type==="textarea"?t.jsx("textarea",{id:Y.id,name:Y.id,rows:4,required:Y.required,value:O[Y.id]||"",onChange:ne=>le(Y.id,ne.target.value),className:"block py-2.5 px-0 w-full text-sm text-on-surface bg-transparent border-0 border-b-2 border-muted appearance-none focus:outline-none focus:ring-0 focus:border-primary-500 peer",placeholder:" "}):t.jsx("input",{id:Y.id,name:Y.id,type:Y.type,required:Y.required,value:O[Y.id]||"",onChange:ne=>le(Y.id,ne.target.value),className:"block py-2.5 px-0 w-full text-sm text-on-surface bg-transparent border-0 border-b-2 border-muted appearance-none focus:outline-none focus:ring-0 focus:border-primary-500 peer",placeholder:" "}),t.jsx("label",{htmlFor:Y.id,className:"absolute text-sm text-subtle duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-primary-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:Y.label})]},Y.id)),t.jsx("button",{type:"submit",disabled:I,className:"w-full flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg disabled:bg-primary-400 transition-all duration-300 transform hover:scale-105",children:I?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):t.jsxs(t.Fragment,{children:["Send Message ",t.jsx(V.ChevronRight,{className:"h-5 w-5"})]})})]})})]})]})]}),t.jsxs(Bn,{id:"privacy",className:"relative py-20 sm:py-24 bg-surface overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-purple-500/5"}),t.jsx("div",{className:"absolute top-1/4 left-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl opacity-30"}),t.jsx("div",{className:"absolute bottom-1/4 right-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl opacity-30"}),t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full shadow-lg",children:t.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Privacy Policy"})]}),t.jsx("p",{className:"text-sm text-gray-300",children:"Last updated: 13 October 2025"})]}),t.jsxs("div",{className:"relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl shadow-2xl border border-slate-700/50 overflow-hidden backdrop-blur-sm hover:shadow-blue-500/10 transition-shadow duration-500",children:[t.jsx("div",{className:"absolute -inset-px rounded-2xl opacity-0 hover:opacity-100 transition-opacity duration-500 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-blue-500/20 blur-sm"}),t.jsxs("div",{className:"absolute inset-0 opacity-40",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-500/10 to-transparent rounded-full blur-2xl"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-purple-500/10 to-transparent rounded-full blur-2xl"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-full blur-3xl"})]}),t.jsxs("button",{onClick:()=>F(!K),className:"relative w-full p-6 text-left flex items-center justify-between hover:bg-slate-800/50 transition-all duration-300 group","aria-expanded":K,"aria-controls":"privacy-content",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors",children:t.jsx("svg",{className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),t.jsx("span",{className:"text-lg font-semibold text-white group-hover:text-blue-300 transition-colors",children:"Privacy Policy"})]}),t.jsx("svg",{className:`h-5 w-5 text-gray-400 transform transition-transform duration-300 ${K?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{id:"privacy-content",className:`relative overflow-hidden transition-all duration-300 ease-in-out ${K?"max-h-[40vh] opacity-100":"max-h-0 opacity-0"}`,children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-slate-800/50 to-transparent pointer-events-none z-10"}),t.jsx("div",{className:`p-6 ${K?"overflow-y-auto":""}`,style:{maxHeight:K?"40vh":"0px"},children:t.jsxs("div",{className:"prose prose-sm max-w-none text-white",children:[t.jsxs("p",{className:"mb-4 text-white",children:["At ",t.jsx("strong",{className:"text-blue-400",children:"Clienn CRM"}),", your privacy and data protection are our highest priorities. This Privacy Policy explains how we collect, use, store, and protect your personal and organizational data when you use our CRM, LMS, and integrated marketing services."]}),t.jsx("p",{className:"mb-6 text-white",children:"By using Clienn CRM, you agree to this Privacy Policy. If you do not agree, please stop using the platform immediately."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"1. Overview"}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"2. What Information We Collect"}),t.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.1 Account Information"}),t.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"Name, email address, phone number"}),t.jsx("li",{children:"Organization details, designation, and team role"}),t.jsx("li",{children:"Billing and subscription information"})]}),t.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.2 Usage Data"}),t.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"Actions you take within the CRM (lead creation, task updates, note additions)"}),t.jsx("li",{children:"Feature usage metrics (e.g., campaigns, imports, communication logs)"}),t.jsx("li",{children:"Device details (browser type, OS, IP address, time zone)"})]}),t.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.3 Leads and Contacts"}),t.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"Lead name, email, phone number, and any notes or interactions logged by your team"}),t.jsx("li",{children:"Source information (e.g., Facebook Lead Ads, Google Forms, or manual entries)"})]}),t.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.4 Integrations"}),t.jsxs("ul",{className:"list-disc pl-6 mb-4 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"API keys and tokens from third-party services (e.g., Meta, Google, WhatsApp, Zoom)"}),t.jsx("li",{children:"Consent-based data sharing for leads and campaigns"})]}),t.jsx("h4",{className:"text-base font-semibold mb-3 text-blue-300",children:"2.5 Cookies and Tracking"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We use cookies for session management, analytics, and feature optimization."}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can control cookie preferences in your browser."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"3. How We Use the Data"}),t.jsx("p",{className:"mb-4 text-sm text-white",children:"We process your data for the following purposes:"}),t.jsx("div",{className:"overflow-x-auto mb-6",children:t.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Purpose"}),t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Description"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Account Management"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To create, manage, and authenticate user accounts"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Service Delivery"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To provide CRM/LMS features, integrations, and dashboards"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Communication"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To send updates, notifications, and support messages"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"AI Recommendations"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To improve lead scoring, engagement prediction, and campaign optimization"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Compliance & Security"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To prevent fraud, unauthorized access, and misuse of the system"})]})]})]})}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"4. AI-Driven Processing"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"Our platform uses AI models to recommend actions (e.g., lead priority, follow-up timing, and communication templates)."}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"These recommendations are based on anonymized and aggregated data."}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"We do not use your private lead data for any external AI model training."}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can request opt-out of AI-based insights anytime."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"5. Data Sharing & Third-Party Services"}),t.jsx("p",{className:"mb-4 text-sm font-semibold text-white",children:"We never sell your data."}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We may share limited information only under these conditions:"}),t.jsx("div",{className:"overflow-x-auto mb-6",children:t.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Type"}),t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Shared With"}),t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Purpose"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Analytics"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Google Analytics, Mixpanel"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To understand feature usage"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Integrations"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Meta, Google, WhatsApp API"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"To sync leads and send communications"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Payment Gateways"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Razorpay, Stripe"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"For subscription and plan renewals"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Cloud Services"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"AWS, MongoDB Atlas, Neon PostgreSQL"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"For secure hosting and data storage"})]})]})]})}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"All third parties comply with strict contractual obligations and data protection standards."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"6. Organization-Level Privacy"}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"Clienn CRM operates in a multi-tenant architecture:"}),t.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"Each organization's data is logically and physically isolated."}),t.jsx("li",{children:"Super Admins can view only their organization's users and leads."}),t.jsx("li",{children:"No cross-organization data access is permitted."})]}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"7. Data Retention Policy"}),t.jsx("div",{className:"overflow-x-auto mb-6",children:t.jsxs("table",{className:"w-full text-sm border-collapse border border-slate-600",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Data Type"}),t.jsx("th",{className:"border border-slate-600 p-2 text-left font-semibold text-blue-400",children:"Retention Period"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Account and organization data"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Until account deletion"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Leads and communications"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"As long as your subscription is active"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Billing records"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"7 years (as required by law)"})]}),t.jsxs("tr",{className:"bg-slate-800",children:[t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Logs and backups"}),t.jsx("td",{className:"border border-slate-600 p-2 text-gray-200",children:"Up to 90 days"})]})]})]})}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"You can request data deletion via email or the in-app Support section."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"8. Data Security"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We implement multiple layers of protection:"}),t.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:"SSL/TLS encryption for all data in transit"}),t.jsx("li",{children:"Role-based access control (RBAC)"}),t.jsx("li",{children:"Encrypted passwords and tokens (bcrypt + JWT)"}),t.jsx("li",{children:"Regular security audits and vulnerability scans"}),t.jsx("li",{children:"Geo-redundant backups and uptime monitoring"})]}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"9. Your Rights"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"You have full control over your data:"}),t.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Access"}),"  Request a copy of your data"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Correction"}),"  Update inaccurate information"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Deletion"}),"  Request permanent deletion"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Portability"}),"  Export your CRM data in structured format"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Consent Withdrawal"}),"  Opt-out of marketing or data sharing"]})]}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"To exercise any of these rights, contact us via the in-app support form or email below."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"10. International Data Transfer"}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"If you are located outside India, your data may be processed in India or other countries where our servers and partners are located. We ensure equivalent data protection measures in compliance with GDPR and DPDP (India)."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"11. Children's Privacy"}),t.jsx("p",{className:"mb-6 text-sm text-gray-200 leading-relaxed",children:"Our services are not directed to individuals under the age of 18. We do not knowingly collect personal data from minors."}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"12. Policy Updates"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"We may update this Privacy Policy periodically."}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"When changes are made, we will:"}),t.jsxs("ul",{className:"list-disc pl-6 mb-6 text-sm text-gray-200 leading-relaxed",children:[t.jsx("li",{children:'Update the "Last Updated" date, and'}),t.jsx("li",{children:"Notify all users via dashboard or email."})]}),t.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-400 border-b border-blue-400 pb-2",children:"13. Contact Us"}),t.jsx("p",{className:"mb-4 text-sm text-gray-200 leading-relaxed",children:"If you have any questions, concerns, or complaints about privacy or data usage:"}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg mb-6",children:[t.jsx("p",{className:"text-sm font-semibold text-white",children:"Data Protection Officer (DPO)"}),t.jsx("p",{className:"text-sm font-semibold text-white",children:"Clienn CRM | Zetta Edutech Private Limited"}),t.jsx("a",{href:"mailto:support@Clienn CRM.io",className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:" Email: support@Clienn CRM.io"}),t.jsx("p",{className:"text-sm text-gray-200",children:" Address: New Delhi, India"})]})]})})]})]})]})})]}),t.jsxs("section",{className:"relative bg-slate-900 text-white overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-purple-600 opacity-80"}),t.jsx("div",{className:"absolute -bottom-1/2 -left-1/4 w-full h-full bg-gradient-to-r from-primary-500/30 to-transparent rounded-full blur-3xl transform rotate-45"}),t.jsxs("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[t.jsx("h2",{className:"text-4xl font-bold",children:u.title}),t.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-slate-200",children:u.subtitle}),t.jsx("div",{className:"mt-8",children:t.jsxs("button",{onClick:()=>G(i.monthlyPlans.find(Y=>Y.isPopular)||i.monthlyPlans[2]),className:"inline-flex items-center gap-2 px-8 py-3 text-base font-semibold text-primary-600 bg-white rounded-lg hover:bg-gray-200 transition-transform hover:scale-105 shadow-lg",children:[u.cta," ",t.jsx(V.Rocket,{className:"h-5 w-5"})]})})]})]})]})},i6=({lead:e,templates:r,currentUser:n,onClose:a,onSend:s})=>{const[i,l]=N.useState("template"),[d,u]=N.useState(r[0]?.id||""),[m,p]=N.useState(""),f=()=>{if(i==="custom")return m;const b=r.find(y=>y.id===d);return b?b.body.replace(/{{name}}/g,e.name).replace(/{{user_name}}/g,n.name).replace(/{{course}}/g,e.course||"the course").replace(/{{dealValue}}/g,e.dealValue.toLocaleString()):""},x=()=>{const b=f();if(!b.trim()){alert("Message cannot be empty.");return}s(b)};return t.jsxs(it,{isOpen:!0,onClose:a,title:`Send WhatsApp to ${e.name}`,children:[t.jsxs("div",{className:"flex border-b border-muted mb-4",children:[t.jsx("button",{onClick:()=>l("template"),className:`px-4 py-2 text-sm font-medium ${i==="template"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Use Template"}),t.jsx("button",{onClick:()=>l("custom"),className:`px-4 py-2 text-sm font-medium ${i==="custom"?"border-b-2 border-primary-500 text-on-surface":"text-subtle"}`,children:"Custom Message"})]}),i==="template"?t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Select Template"}),t.jsx("select",{value:d,onChange:b=>u(b.target.value),className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(b=>t.jsx("option",{value:b.id,children:b.name},b.id))})]}):t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-subtle",children:"Write a custom message"}),t.jsx("textarea",{value:m,onChange:b=>p(b.target.value),rows:5,className:"w-full mt-1 bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{className:"mt-4 p-4 bg-background rounded-lg border border-muted",children:[t.jsx("h4",{className:"text-sm font-semibold text-subtle mb-2",children:"Message Preview:"}),t.jsx("p",{className:"text-sm text-on-surface whitespace-pre-wrap",children:f()})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:a,className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsxs("button",{type:"button",onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[t.jsx(V.Whatsapp,{className:"h-5 w-5 mr-2"})," Send Message"]})]})]})},o6=({lead:e,onAddTask:r,onCancel:n,currentUser:a})=>{const[s,i]=N.useState(""),[l,d]=N.useState(""),[u,m]=N.useState(""),[p,f]=N.useState(!0),x=N.useRef(null),b=N.useRef(null);N.useEffect(()=>{const S=new Date;S.setDate(S.getDate()+1),S.setHours(9,0,0,0);const A=S.toISOString().split("T")[0],w=S.toTimeString().slice(0,5);d(A),m(w)},[]);const y=S=>{if(S.preventDefault(),!s.trim())return;if(!l||!u){alert("Please select a due date and time.");return}const A=new Date(`${l}T${u}`);if(A<=new Date){alert("Please select a future date and time.");return}const w={title:s,leadId:e.id,assignedToId:e.assignedToId,isCompleted:!1,dueDate:A.toISOString(),createdById:a.id,organizationId:a.organizationId,reminderEnabled:p};p&&g(w,A),r(w),i(""),n()},g=(S,A)=>{const w=new Date,E=A.getTime()-w.getTime();E>0&&setTimeout(()=>{j(S)},E)},j=S=>{"Notification"in window&&Notification.permission==="granted"?new Notification(`Task Reminder: ${S.title}`,{body:`Task for lead "${e.name}" is due now`,icon:"/favicon.ico",tag:`task-${S.id}`}):k(S)},k=S=>{const A=document.createElement("div");A.id="task-reminder-popup",A.innerHTML=`
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-surface rounded-xl p-6 max-w-lg mx-4 shadow-2xl border border-muted">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-500 text-white rounded-full p-3 mr-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-on-surface"> Task Reminder</h3>
                            <p class="text-sm text-subtle">Don't miss your important task!</p>
                        </div>
                    </div>

                    <div class="bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 mb-6 border-l-4 border-primary-500">
                        <h4 class="text-lg font-semibold text-primary-800 dark:text-primary-200 mb-2">
                            "${S.title}"
                        </h4>
                        <p class="text-primary-700 dark:text-primary-300 mb-3">
                            Hey there! You have an important task to complete for your lead <strong>"${e.name}"</strong>.
                        </p>
                        <p class="text-primary-600 dark:text-primary-400 text-sm">
                            Completing this task will boost your performance and help convert more leads. Stay on top of your game! 
                        </p>
                    </div>

                    <div class="flex gap-3 justify-end">
                        <button onclick="document.getElementById('task-reminder-popup').remove()"
                                class="bg-muted hover:bg-subtle/80 text-on-surface font-semibold py-2 px-6 rounded-lg transition-colors">
                            Remind me later
                        </button>
                        <button onclick="window.location.href='/leads/${e.id}'"
                                class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-lg flex items-center gap-2 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                            Go to Task
                        </button>
                    </div>

                    <div class="mt-4 text-center">
                        <p class="text-xs text-subtle">
                            This reminder will auto-close in <span id="countdown">10</span> seconds
                        </p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(A);let w=10;const E=A.querySelector("#countdown"),T=setInterval(()=>{if(w--,E&&(E.textContent=w.toString()),w<=0){clearInterval(T);const O=document.getElementById("task-reminder-popup");O&&O.remove()}},1e3);setTimeout(()=>{clearInterval(T);const O=document.getElementById("task-reminder-popup");O&&O.remove()},1e4)};return t.jsxs("form",{onSubmit:y,className:"p-4 space-y-4 bg-surface border border-muted rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Task Title"}),t.jsx("input",{type:"text",value:s,onChange:S=>i(S.target.value),placeholder:"What needs to be done?",autoFocus:!0,className:"w-full bg-background border border-muted p-3 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Date"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:x,type:"date",value:l,onChange:S=>d(S.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-month-field]:text-on-surface [&::-webkit-datetime-edit-day-field]:text-on-surface [&::-webkit-datetime-edit-year-field]:text-on-surface",min:new Date().toISOString().split("T")[0],required:!0}),t.jsx("button",{type:"button",onClick:()=>{x.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:t.jsx(V.Calendar,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Due Time"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:b,type:"time",value:u,onChange:S=>m(S.target.value),className:"w-full bg-background border border-muted p-3 pr-10 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden [&::-webkit-datetime-edit-fields-wrapper]:bg-background [&::-webkit-datetime-edit-text]:text-on-surface [&::-webkit-datetime-edit-hour-field]:text-on-surface [&::-webkit-datetime-edit-minute-field]:text-on-surface [&::-webkit-datetime-edit-ampm-field]:text-on-surface",required:!0}),t.jsx("button",{type:"button",onClick:()=>{b.current?.showPicker?.()},className:"absolute inset-y-0 right-0 flex items-center pr-3 hover:text-primary-500 transition-colors",children:t.jsx(V.Activity,{className:"h-5 w-5 text-subtle hover:text-primary-500"})})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"reminder-enabled",checked:p,onChange:S=>f(S.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-muted rounded"}),t.jsx("label",{htmlFor:"reminder-enabled",className:"text-sm text-subtle",children:"Enable reminder notification"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:n,className:"bg-muted hover:bg-subtle/20 text-on-surface font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors",children:"Add Task"})]})]})},Gl=({title:e,children:r,initiallyOpen:n=!1})=>{const[a,s]=N.useState(n);return t.jsxs("div",{className:"border-t border-muted first-of-type:border-t-0",children:[t.jsxs("button",{onClick:()=>s(!a),className:"md:cursor-default md:pointer-events-none w-full flex justify-between items-center py-3 text-left",children:[t.jsx("h4",{className:"font-semibold text-on-surface",children:e}),t.jsx(V.ChevronRight,{className:`md:hidden h-5 w-5 text-subtle transition-transform ${a?"rotate-90":""}`})]}),t.jsx("div",{className:`pl-2 pb-4 space-y-4 md:block ${a?"block":"hidden"}`,children:r})]})},KX=({leads:e,users:r,tasks:n,pipelineStages:a,customFieldDefs:s,whatsAppTemplates:i,smsTemplates:l,onUpdateLead:d,onUpdateTask:u,onAddTask:m,onAddNote:p,onScheduleMessage:f,onRefreshLeadById:x,currentUser:b,isStandalone:y=!1,isDedicatedPage:g=!1})=>{const{leadId:j}=y6(),k=e.find(ee=>ee.id===j||ee._id===j),[S,A]=N.useState(!1),[w,E]=N.useState(!1),[T,O]=N.useState(0);console.log("LeadDetailPage Debug:",{leadId:j,leadFound:!!k,leadsCount:e.length,availableLeadIds:e.map(ee=>({id:ee.id,_id:ee._id})),firstFewLeads:e.slice(0,3).map(ee=>({id:ee.id,_id:ee._id,name:ee.name}))}),N.useEffect(()=>{!k&&j&&x&&!S&&(console.log("Lead not found in array, attempting silent refresh from backend:",j),A(!0),x(j).then(ee=>{ee?console.log("Successfully refreshed lead from backend:",ee):console.log("Lead not found in backend either"),A(!1)}).catch(ee=>{console.error("Failed to refresh lead:",ee),A(!1)}))},[k,j,x]);const[D,I]=N.useState("tasks"),[M,L]=N.useState(k||null),[B,z]=N.useState(!1),[W,R]=N.useState(!1),[H,U]=N.useState(!1),[q,Q]=N.useState(!1),[K,F]=N.useState({open:!1,type:null}),[_,G]=N.useState("idle"),[Z,oe]=N.useState(!1),[le,ge]=N.useState(new Set),ve=N.useMemo(()=>k,[k]),fe=N.useMemo(()=>n.filter(ee=>ee.leadId===k?.id),[n,k?.id]);N.useEffect(()=>{k&&L(k)},[k]),N.useEffect(()=>{k&&(oe(!1),ge(new Set))},[k]);const Y=N.useCallback(async()=>{if(x&&M?.id&&!w){const ee=Date.now();if(ee-T<5e3){console.log("Refresh throttled, too soon since last refresh");return}try{console.log("Refreshing lead data for:",M.id),O(ee),E(!0);const Ee=await x(M.id);Ee?(console.log("Lead data refreshed successfully"),L(Ee),oe(!1),ge(new Set)):console.warn("No refreshed lead data received")}catch(Ee){console.error("Failed to refresh lead data:",Ee)}finally{setTimeout(()=>{E(!1)},1e3)}}},[x,M?.id,w,T]),ne=N.useCallback((ee,Ee)=>{if(!M)return;const ot={...M,[ee]:Ee};L(ot),oe(!0),ge(Rt=>new Set(Rt).add(ee))},[M]),ue=async ee=>{if(!(!M||!ve)&&(z(!1),M.id)){G("saving");try{await p({content:`Sent WhatsApp: "${ee}"`,leadId:M.id}),G("saved"),await Y(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Ee){console.error("Failed to save WhatsApp activity:",Ee),G("error"),setTimeout(()=>G("idle"),3e3)}}},Ve=async ee=>{if(!(!M||!ve)&&(R(!1),M.id)){G("saving");try{await p({content:`Sent SMS: "${ee}"`,leadId:M.id}),G("saved"),await Y(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Ee){console.error("Failed to save SMS activity:",Ee),G("error"),setTimeout(()=>G("idle"),3e3)}}},Te=async(ee,Ee)=>{if(!(!M||!ve)&&(U(!1),M.id)){G("saving");try{await p({content:`Logged call. Outcome: ${ee}. Notes: "${Ee}"`,leadId:M.id}),G("saved"),await Y(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(ot){console.error("Failed to save call log:",ot),G("error"),setTimeout(()=>G("idle"),3e3)}}},[Pe,Xe]=N.useState(!1),[pe,Oe]=N.useState(""),ae=()=>{Xe(!0),Oe("")},je=async()=>{if(!M||!pe.trim())return;const ee=pe.trim();if(Xe(!1),Oe(""),M.id){G("saving");try{await p({content:ee,leadId:M.id}),G("saved"),await Y(),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(Ee){console.error("Failed to save note:",Ee),G("error"),setTimeout(()=>G("idle"),3e3)}}},Ie=async()=>{if(!(!M||!ve)){G("saving");try{const{_id:ee,createdAt:Ee,updatedAt:ot,...Rt}=M,$t={...Rt,id:M.id};await d($t,ve),G("saved"),oe(!1),ge(new Set),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("timelineRefresh",{detail:{leadId:M.id}})),setTimeout(()=>G("idle"),2e3)}catch(ee){console.error("Failed to save lead:",ee),G("error"),setTimeout(()=>G("idle"),3e3)}}};return N.useEffect(()=>()=>{},[]),!M||!ve?S||w?t.jsxs("div",{className:"text-center p-8",children:[t.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold",children:w?"Refreshing lead...":"Loading lead..."}),t.jsxs("p",{className:"text-subtle mt-2",children:["Lead ID: ",j]})]}):(console.error("Lead not found:",{leadId:j,availableLeads:e.map(ee=>({id:ee.id,_id:ee._id})),leadExists:e.some(ee=>ee.id===j||ee._id===j),isLoadingLead:S}),t.jsxs("div",{className:"text-center p-8",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Lead not found"}),t.jsxs("p",{className:"text-subtle mt-2",children:["Lead ID: ",j]}),t.jsxs("p",{className:"text-subtle",children:["Available leads: ",e.length]}),t.jsx(vt,{to:"/leads",className:"text-primary-500 mt-4 inline-block",children:"Go back to leads list"})]})):g?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("div",{className:"sticky top-0 z-50 bg-surface border-b border-muted shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(vt,{to:"/leads",className:"flex items-center gap-2 text-subtle hover:text-on-surface",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Leads"]}),t.jsx("div",{className:"h-6 w-px bg-muted"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-xl font-semibold text-on-surface",children:M.name}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-primary-100 text-primary-800 rounded-full",children:a.find(ee=>ee.id===M.stage)?.name||"Unknown Stage"}),t.jsx("span",{className:"text-sm text-subtle",children:r.find(ee=>ee.id===M.assignedToId)?.name||"Unassigned"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[Z&&t.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mr-4",children:[t.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm",children:"Unsaved changes"})]}),t.jsx("button",{onClick:Ie,disabled:_==="saving",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium py-2 px-4 rounded-lg flex items-center gap-2",children:_==="saving"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes ",le.size>0&&`(${le.size})`]})})]})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-on-surface mb-4",children:"Contact & Deal Information"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Contact Details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),t.jsx("input",{type:"text",value:M.name,onChange:ee=>ne("name",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),t.jsx("input",{type:"email",value:M.email,onChange:ee=>ne("email",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),t.jsx("input",{type:"tel",value:M.phone,onChange:ee=>ne("phone",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),t.jsx("input",{type:"tel",value:M.alternatePhone,onChange:ee=>ne("alternatePhone",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),t.jsx("input",{type:"text",value:M.company,onChange:ee=>ne("company",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),t.jsx("input",{type:"text",value:M.city,onChange:ee=>ne("city",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),t.jsxs("select",{value:M.source,onChange:ee=>ne("source",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:[t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Facebook",children:"Facebook"}),t.jsx("option",{value:"Google Ads",children:"Google Ads"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold Call",children:"Cold Call"}),t.jsx("option",{value:"Chatbot",children:"Chatbot"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),t.jsx("select",{value:M.assignedToId,onChange:ee=>ne("assignedToId",parseInt(ee.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(ee=>t.jsx("option",{value:ee.id,children:ee.name},ee.id))})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Deal Details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),t.jsx("select",{value:M.stage,onChange:ee=>ne("stage",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",children:a.map(ee=>t.jsx("option",{value:ee.id,children:ee.name},ee.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),t.jsx("input",{type:"number",value:M.dealValue,onChange:ee=>ne("dealValue",Number(ee.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),t.jsx("input",{type:"text",value:M.course,onChange:ee=>ne("course",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Lead Score"}),t.jsx("input",{type:"number",value:M.score,onChange:ee=>ne("score",Number(ee.target.value)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Marketing Details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),t.jsx("input",{type:"text",value:M.campaign,onChange:ee=>ne("campaign",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),t.jsx("input",{type:"text",value:Array.isArray(M.tags)?M.tags.join(", "):"",onChange:ee=>ne("tags",ee.target.value.split(",").map(Ee=>Ee.trim()).filter(Boolean)),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Comma-separated tags"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Facebook Information"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),t.jsx("input",{type:"text",value:M.facebookCampaign||"",onChange:ee=>ne("facebookCampaign",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),t.jsx("input",{type:"text",value:M.facebookAdset||"",onChange:ee=>ne("facebookAdset",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),t.jsx("input",{type:"text",value:M.facebookAd||"",onChange:ee=>ne("facebookAd",ee.target.value),className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),s.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-subtle mb-3",children:"Custom Fields"}),t.jsx("div",{className:"space-y-3",children:s.map(ee=>t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:ee.name}),t.jsx("input",{type:ee.type==="date"?"date":"text",value:M.customFields?.[ee.id]||"",onChange:Ee=>{const ot={...M.customFields||{},[ee.id]:Ee.target.value},Rt={...M,customFields:ot};L(Rt),oe(!0),ge($t=>new Set($t).add(`customField_${ee.id}`))},className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500"})]},ee.id))})]})]})]})}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"bg-surface rounded-xl shadow-sm border border-muted overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-muted",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[t.jsx(V.Call,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Log Call"})]}),t.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[t.jsx(V.Whatsapp,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"WhatsApp"})]}),t.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[t.jsx(V.SMS,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"SMS"})]}),t.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[t.jsx(V.Tasks,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Add Task"})]}),t.jsxs("button",{onClick:()=>ae(),className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-subtle/50 text-on-surface rounded-lg",children:[t.jsx(V.Note,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Add Note"})]})]})}),t.jsx("div",{className:"border-b border-muted",children:t.jsxs("div",{className:"flex",children:[t.jsxs("button",{onClick:()=>I("tasks"),className:`relative px-4 py-3 text-sm font-medium ${D==="tasks"?"border-b-2 border-primary-500 text-primary-600":"text-subtle hover:text-on-surface"}`,children:["Tasks",fe.filter(ee=>!ee.isCompleted).length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:fe.filter(ee=>!ee.isCompleted).length})})]}),t.jsxs("button",{onClick:()=>I("scheduled"),className:`relative px-4 py-3 text-sm font-medium ${D==="scheduled"?"border-b-2 border-primary-500 text-primary-600":"text-subtle hover:text-on-surface"}`,children:["Scheduled",(M.scheduledMessages||[]).length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(M.scheduledMessages||[]).length})})]})]})}),t.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[D==="tasks"&&t.jsxs("div",{className:"space-y-2",children:[q&&t.jsx(o6,{lead:M,onAddTask:m,onCancel:()=>Q(!1),currentUser:b}),fe.map(ee=>t.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[t.jsx("input",{type:"checkbox",checked:ee.isCompleted,onChange:()=>u({...ee,isCompleted:!ee.isCompleted}),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),t.jsx("p",{className:`flex-grow text-sm ${ee.isCompleted?"line-through text-subtle":""}`,children:ee.title}),t.jsx("p",{className:"text-xs text-subtle",children:new Date(ee.dueDate).toLocaleDateString()})]},ee.id||ee._id)),fe.length===0&&!q&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),D==="scheduled"&&t.jsxs("div",{className:"space-y-3",children:[(M.scheduledMessages||[]).map(ee=>t.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[t.jsxs("p",{className:"text-sm font-semibold",children:[ee.type," scheduled for ",new Date(ee.scheduledAt).toLocaleString()]}),t.jsxs("p",{className:"text-sm text-subtle mt-1",children:['"',ee.content,'"']})]},ee.id)),(M.scheduledMessages||[]).length===0&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})})]})}),B&&t.jsx(i6,{lead:M,templates:i,currentUser:b,onClose:()=>z(!1),onSend:ue}),W&&t.jsx(pv,{lead:M,templates:l,currentUser:b,onClose:()=>R(!1),onSend:Ve}),H&&t.jsx(mv,{onClose:()=>U(!1),onLog:Te}),K.open&&K.type&&t.jsx(uv,{lead:M,currentUser:b,type:K.type,onClose:()=>F({open:!1,type:null}),onSchedule:f}),Pe&&t.jsx(it,{isOpen:Pe,onClose:()=>Xe(!1),title:"Add Note",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Note Content"}),t.jsx("textarea",{value:pe,onChange:ee=>Oe(ee.target.value),rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your note...",autoFocus:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:()=>Xe(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:je,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add Note"})]})]})})]}):t.jsxs("div",{className:"space-y-6",children:[B&&t.jsx(i6,{lead:M,templates:i,currentUser:b,onClose:()=>z(!1),onSend:ue}),W&&t.jsx(pv,{lead:M,templates:l,currentUser:b,onClose:()=>R(!1),onSend:Ve}),H&&t.jsx(mv,{onClose:()=>U(!1),onLog:Te}),K.open&&K.type&&t.jsx(uv,{lead:M,currentUser:b,type:K.type,onClose:()=>F({open:!1,type:null}),onSchedule:f}),Pe&&t.jsx(it,{isOpen:Pe,onClose:()=>Xe(!1),title:"Add Note",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-subtle mb-2",children:"Note Content"}),t.jsx("textarea",{value:pe,onChange:ee=>Oe(ee.target.value),rows:4,className:"w-full bg-background border border-muted rounded-lg py-2 px-3 text-on-surface focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your note...",autoFocus:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-muted",children:[t.jsx("button",{type:"button",onClick:()=>Xe(!1),className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"button",onClick:je,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg",children:"Add Note"})]})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:M.name}),Z&&t.jsxs("div",{className:"flex items-center gap-2 text-orange-500",children:[t.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm",children:"Unsaved changes"})]}),_==="saving"&&t.jsxs("div",{className:"flex items-center gap-2 text-primary-500",children:[t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary-500 border-t-transparent rounded-full"}),t.jsx("span",{className:"text-sm",children:"Saving..."})]}),_==="saved"&&t.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("span",{className:"text-sm",children:"Saved"})]}),_==="error"&&t.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t.jsx("span",{className:"text-sm",children:"Save failed"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[Z&&t.jsx("button",{onClick:Ie,disabled:_==="saving",className:"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:_==="saving"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes ",le.size>0&&`(${le.size})`]})}),!y&&t.jsx(vt,{to:"/leads",className:"bg-muted hover:bg-subtle/80 text-on-surface font-bold py-2 px-4 rounded-lg text-center",children:"Back to Leads List"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[t.jsxs("div",{className:"lg:col-span-1 bg-surface p-6 rounded-xl shadow-sm border border-muted",children:[t.jsx(Gl,{title:"Contact Information",initiallyOpen:!0,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Name"}),t.jsx("input",{type:"text",value:M.name,onChange:ee=>ne("name",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Email"}),t.jsx("input",{type:"email",value:M.email,onChange:ee=>ne("email",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Phone"}),t.jsx("input",{type:"tel",value:M.phone,onChange:ee=>ne("phone",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Alternate Phone"}),t.jsx("input",{type:"tel",value:M.alternatePhone,onChange:ee=>ne("alternatePhone",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Company"}),t.jsx("input",{type:"text",value:M.company,onChange:ee=>ne("company",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"City"}),t.jsx("input",{type:"text",value:M.city,onChange:ee=>ne("city",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Source"}),t.jsxs("select",{value:M.source,onChange:ee=>ne("source",ee.target.value),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:[t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Facebook",children:"Facebook"}),t.jsx("option",{value:"Google Ads",children:"Google Ads"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold Call",children:"Cold Call"}),t.jsx("option",{value:"Chatbot",children:"Chatbot"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Owner"}),t.jsx("select",{value:M.assignedToId,onChange:ee=>ne("assignedToId",parseInt(ee.target.value)),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:r.map(ee=>t.jsx("option",{value:ee.id,children:ee.name},ee.id))})]})]})}),t.jsx(Gl,{title:"Deal Information",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Pipeline Stage"}),t.jsx("select",{value:M.stage,onChange:ee=>ne("stage",ee.target.value),className:"w-full bg-transparent py-1 text-on-surface focus:outline-none border-b border-transparent focus:border-primary-500",children:a.map(ee=>t.jsx("option",{value:ee.id,children:ee.name},ee.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Deal Value"}),t.jsx("input",{type:"number",value:M.dealValue,onChange:ee=>ne("dealValue",Number(ee.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Course Interest"}),t.jsx("input",{type:"text",value:M.course,onChange:ee=>ne("course",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Lead Score"}),t.jsx("input",{type:"number",value:M.score,onChange:ee=>ne("score",Number(ee.target.value)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]})}),t.jsx(Gl,{title:"Marketing Information",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Campaign"}),t.jsx("input",{type:"text",value:M.campaign,onChange:ee=>ne("campaign",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Tags"}),t.jsx("input",{type:"text",value:Array.isArray(M.tags)?M.tags.join(", "):"",onChange:ee=>ne("tags",ee.target.value.split(",").map(Ee=>Ee.trim()).filter(Boolean)),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500",placeholder:"Comma-separated tags"})]})]})}),t.jsx(Gl,{title:"Facebook Details",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Campaign"}),t.jsx("input",{type:"text",value:M.facebookCampaign||"",onChange:ee=>ne("facebookCampaign",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Adset"}),t.jsx("input",{type:"text",value:M.facebookAdset||"",onChange:ee=>ne("facebookAdset",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:"Facebook Ad"}),t.jsx("input",{type:"text",value:M.facebookAd||"",onChange:ee=>ne("facebookAd",ee.target.value),className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]})]})}),s.length>0&&t.jsx(Gl,{title:"Custom Fields",children:s.map(ee=>t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-subtle",children:ee.name}),t.jsx("input",{type:ee.type==="date"?"date":"text",value:M.customFields?.[ee.id]||"",onChange:Ee=>{const ot={...M.customFields||{},[ee.id]:Ee.target.value},Rt={...M,customFields:ot};L(Rt),oe(!0),ge($t=>new Set($t).add(`customField_${ee.id}`))},className:"w-full bg-transparent border-b border-muted py-1 text-on-surface focus:outline-none focus:border-primary-500"})]},ee.id))})]}),t.jsxs("div",{className:"lg:col-span-2 flex flex-col overflow-hidden bg-surface rounded-xl shadow-sm border border-muted",children:[t.jsx("div",{className:"flex-shrink-0 p-2 flex flex-wrap items-center justify-between gap-2 border-b border-muted",children:t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{onClick:()=>I("tasks"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${D==="tasks"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Tasks",fe.filter(ee=>!ee.isCompleted).length>0&&t.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[t.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 items-center justify-center text-white text-xs",children:fe.filter(ee=>!ee.isCompleted).length})]})]}),t.jsxs("button",{onClick:()=>I("scheduled"),className:`relative px-3 py-1.5 text-sm font-semibold rounded-md ${D==="scheduled"?"bg-primary-600 text-white":"text-subtle hover:bg-muted"}`,children:["Scheduled",(M.scheduledMessages||[]).length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:t.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-orange-500 items-center justify-center text-white text-xs",children:(M.scheduledMessages||[]).length})})]})]})}),t.jsxs("div",{className:"flex-shrink-0 p-2 grid grid-cols-2 sm:grid-cols-5 items-center gap-2 border-b border-muted",children:[t.jsxs("button",{onClick:()=>U(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Call,{className:"h-4 w-4"}),"Log Call"]}),t.jsxs("button",{onClick:()=>z(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Whatsapp,{className:"h-4 w-4"}),"WhatsApp"]}),t.jsxs("button",{onClick:()=>R(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.SMS,{className:"h-4 w-4"}),"SMS"]}),t.jsxs("button",{onClick:()=>Q(!0),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Tasks,{className:"h-4 w-4"}),"Add Task"]}),t.jsxs("button",{onClick:()=>ae(),className:"flex-1 text-sm flex items-center justify-center gap-2 p-2 bg-muted rounded-lg hover:bg-primary-500/10 hover:text-primary-500",children:[t.jsx(V.Note,{className:"h-4 w-4"}),"Add Note"]})]}),t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-6",children:[D==="tasks"&&t.jsxs("div",{className:"space-y-2",children:[q&&t.jsx(o6,{lead:M,onAddTask:m,onCancel:()=>Q(!1),currentUser:b}),fe.map(ee=>t.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[t.jsx("input",{type:"checkbox",checked:ee.isCompleted,onChange:()=>{console.log("Task checkbox clicked:",ee),u({...ee,isCompleted:!ee.isCompleted})},className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),t.jsx("p",{className:`flex-grow text-sm ${ee.isCompleted?"line-through text-subtle":""}`,children:ee.title}),t.jsx("p",{className:"text-xs text-subtle",children:new Date(ee.dueDate).toLocaleDateString()})]},ee.id||ee._id)),fe.length===0&&!q&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No tasks for this lead."})]}),D==="scheduled"&&t.jsxs("div",{className:"divide-y divide-muted",children:[(M.scheduledMessages||[]).map(ee=>t.jsxs("div",{className:"py-3",children:[t.jsxs("p",{className:"text-sm font-semibold",children:[ee.type," scheduled for ",new Date(ee.scheduledAt).toLocaleString()]}),t.jsxs("p",{className:"text-sm text-subtle bg-muted p-2 rounded-md mt-1",children:['"',ee.content,'"']})]},ee.id)),(M.scheduledMessages||[]).length===0&&t.jsx("p",{className:"text-center text-subtle py-8",children:"No messages scheduled."})]})]})]})]})]})},YX=()=>{const e=[{to:"/settings",name:"General",icon:t.jsx(V.Settings,{})},{to:"/settings/users",name:"Users & Permissions",icon:t.jsx(V.Team,{})},{to:"/settings/teams",name:"Teams",icon:t.jsx(V.Leads,{})},{to:"/settings/integrations",name:"Integrations",icon:t.jsx(V.Integrations,{})},{to:"/settings/automation",name:"Automation",icon:t.jsx(V.Automation,{})}];return t.jsx(pT,{children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 lg:gap-8 h-full",children:[t.jsxs("aside",{className:"lg:w-64 xl:w-72 flex-shrink-0",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-on-surface mb-4 sm:mb-6 hidden sm:block",children:"Settings"}),t.jsx("nav",{className:"flex space-x-1 sm:space-x-2 lg:space-x-0 lg:space-y-1 lg:flex-col overflow-x-auto -mx-2 sm:-mx-4 px-2 sm:px-4 pb-2 lg:pb-0 lg:mx-0 lg:px-0 lg:overflow-x-visible",children:e.map(r=>t.jsxs(k6,{to:r.to,end:r.to==="/settings",className:({isActive:n})=>`flex-shrink-0 flex items-center px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg transition-colors duration-200 text-sm sm:text-base ${n?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[X.cloneElement(r.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 sm:mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:r.name})]},r.to))})]}),t.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:t.jsx(gv,{})})]})})},XX=()=>{const e=[{to:"/marketing/email",name:"Email",icon:t.jsx(V.Email,{className:"h-5 w-5"})},{to:"/marketing/sms",name:"SMS",icon:t.jsx(V.SMS,{className:"h-5 w-5"})},{to:"/marketing/whatsapp",name:"WhatsApp & Chatbot",icon:t.jsx(V.Whatsapp,{className:"h-5 w-5"})},{to:"/marketing/call",name:"Calls",icon:t.jsx(V.Call,{className:"h-5 w-5"})}];return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-on-surface",children:"Marketing"}),t.jsx("p",{className:"text-subtle mt-1",children:"Engage with your audience through Email, SMS, and WhatsApp."})]})}),t.jsx("div",{className:"flex border-b border-muted",children:e.map(r=>t.jsxs(k6,{to:r.to,className:({isActive:n})=>`flex items-center gap-2 px-6 py-3 text-sm font-semibold ${n?"border-b-2 border-primary-500 text-on-surface":"text-subtle border-b-2 border-transparent hover:border-muted"}`,children:[r.icon,t.jsx("span",{children:r.name})]},r.to))}),t.jsx("div",{className:"pt-2",children:t.jsx(gv,{})})]})},JX=({to:e,children:r,onClick:n})=>e.startsWith("http")||e.startsWith("mailto")||e.startsWith("#")?t.jsx("a",{href:e,onClick:n,className:"block text-center text-lg font-semibold text-on-surface py-3 hover:bg-muted rounded-lg transition-colors",children:r}):t.jsx(vt,{to:e,onClick:n,className:"block text-center text-lg font-semibold text-on-surface py-3 hover:bg-muted rounded-lg transition-colors",children:r}),ZX=({theme:e,toggleTheme:r,content:n,offerStrip:a})=>{const[s,i]=N.useState(!1),[l,d]=N.useState(!1),[u,m]=N.useState(!1);N.useEffect(()=>{const b=()=>{i(window.scrollY>10)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]),N.useEffect(()=>(document.body.style.overflow=l?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[l]);const p={LinkedIn:t.jsx(V.LinkedIn,{className:"h-5 w-5"}),Twitter:t.jsx(V.Twitter,{className:"h-5 w-5"}),Facebook:t.jsx(V.Facebook,{className:"h-5 w-5"}),Youtube:t.jsx(V.Youtube,{className:"h-5 w-5"}),Instagram:t.jsx(V.Instagram,{className:"h-5 w-5"})},f=[{to:"/#features",text:"Features"},{to:"/pricing",text:"Pricing"},{to:"/blog",text:"Blog"},{to:"/#privacy",text:"Privacy"},{to:"/#contact",text:"Contact"}],x=a&&a.isEnabled&&!u&&(!a.autoDisableAt||new Date<new Date(a.autoDisableAt));return t.jsxs("div",{className:"bg-background text-on-surface font-sans",children:[x&&a&&t.jsxs("div",{className:"bg-primary-600 text-white p-2.5 text-center text-sm relative",children:[t.jsx("span",{children:a.text}),a.ctaText&&a.ctaLink&&t.jsxs("a",{href:a.ctaLink,className:"font-bold underline ml-2 hover:opacity-80",children:[a.ctaText," "]}),t.jsx("button",{onClick:()=>m(!0),className:"absolute top-1/2 right-4 -translate-y-1/2 p-1 rounded-full hover:bg-white/20","aria-label":"Dismiss promotional banner",children:t.jsx(V.Close,{className:"h-4 w-4"})})]}),t.jsx("header",{className:`sticky top-0 bg-background/80 backdrop-blur-lg z-50 transition-shadow ${s?"shadow-md shadow-slate-900/5":""}`,children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[t.jsxs(vt,{to:"/",className:"flex items-center gap-3",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),t.jsx("nav",{"aria-label":"Main navigation",className:"hidden md:flex items-center gap-8",children:f.map(b=>t.jsx(vt,{to:b.to,className:"text-sm font-semibold text-subtle hover:text-on-surface transition-colors",children:b.text},b.text))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-muted text-subtle hover:text-on-surface",children:e==="dark"?t.jsx(V.Sun,{className:"h-5 w-5"}):t.jsx(V.Moon,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(vt,{to:"/login",className:"text-sm font-semibold text-primary-500 hover:text-primary-600",children:"Log In"}),t.jsx(vt,{to:"/login",className:"hidden sm:block px-4 py-2 text-sm font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Start Free Trial"})]}),t.jsx("button",{onClick:()=>d(!0),className:"p-2 md:hidden",children:t.jsx(V.Menu,{className:"h-6 w-6"})})]})]})}),l&&t.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex flex-col p-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs(vt,{to:"/",onClick:()=>d(!1),className:"flex items-center gap-3",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),t.jsx("button",{onClick:()=>d(!1),className:"p-2",children:t.jsx(V.Close,{className:"h-6 w-6"})})]}),t.jsx("nav",{className:"flex flex-col gap-4",children:f.map(b=>t.jsx(JX,{to:b.to,onClick:()=>d(!1),children:b.text},b.text))}),t.jsx("div",{className:"mt-auto pt-8 border-t border-muted space-y-4",children:t.jsx(vt,{to:"/login",onClick:()=>d(!1),className:"block w-full text-center px-4 py-3 text-lg font-semibold text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors",children:"Start Free Trial"})})]}),t.jsx("main",{children:t.jsx(gv,{})}),t.jsx("footer",{className:"bg-surface border-t border-muted",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 gap-8",children:[t.jsxs("div",{className:"col-span-full lg:col-span-2 mb-8 lg:mb-0 pr-8",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("span",{className:"text-xl font-bold",children:"Clienn CRM"})]}),t.jsx("p",{className:"mt-4 text-sm text-subtle",children:n.footer.description}),t.jsx("p",{className:"mt-4 text-sm text-subtle",children:n.footer.address})]}),n.footer.columns.map(b=>t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-on-surface uppercase tracking-wider text-sm",children:b.title}),t.jsx("ul",{className:"mt-4 space-y-3 text-sm",children:b.links.map(y=>{const{url:g,text:j}=y;if(g.startsWith("/#/")){const k=g.substring(2);return t.jsx("li",{children:t.jsx(vt,{to:k?`/${k}`:"/",className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:j})},j)}if(g.startsWith("/")&&!g.startsWith("//"))return t.jsx("li",{children:t.jsx(vt,{to:g,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:j})},j);if(g.startsWith("#")&&g.length>1){const k=`/${g}`;return t.jsx("li",{children:t.jsx(vt,{to:k,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",children:j})},j)}return t.jsx("li",{children:t.jsx("a",{href:g,className:"text-subtle hover:text-on-surface transition-colors block py-3 px-2 rounded hover:bg-muted/50 cursor-pointer",target:"_blank",rel:"noopener noreferrer",children:j})},j)})})]},b.title))]}),t.jsxs("div",{className:"mt-12 pt-8 border-t border-muted flex flex-col sm:flex-row justify-between items-center text-sm",children:[t.jsxs("div",{className:"flex items-center gap-4 text-subtle order-2 sm:order-1 mt-4 sm:mt-0",children:[t.jsx("p",{children:n.footer.legal.copyright}),n.footer.legal.links.map(b=>t.jsx("a",{href:b.url,className:"hover:text-on-surface transition-colors",children:b.text},b.text))]}),t.jsx("div",{className:"flex gap-4 order-1 sm:order-2",children:n.footer.socialLinks.map(b=>t.jsxs("a",{href:b.url,className:"text-subtle hover:text-on-surface transition-colors",children:[p[b.name],t.jsx("span",{className:"sr-only",children:b.name})]},b.name))})]})]})})]})},QX=({post:e,author:r})=>t.jsxs(vt,{to:`/blog/${e.slug}`,className:"group block bg-surface rounded-xl shadow-lg border border-muted/50 hover:shadow-primary-500/10 transition-all duration-300 overflow-hidden transform hover:-translate-y-1",children:[t.jsx("div",{className:"overflow-hidden",children:t.jsx("img",{src:e.featuredImage.src,alt:e.featuredImage.alt,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:e.tags.join("  ")}),t.jsx("h3",{className:"mt-2 text-xl font-bold text-on-surface group-hover:text-primary-500 transition-colors",children:e.title}),t.jsx("p",{className:"mt-3 text-sm text-subtle line-clamp-3",children:e.excerpt}),t.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[t.jsx("img",{src:r?.avatar,alt:r?.name,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-on-surface",children:r?.name}),t.jsx("p",{className:"text-xs text-subtle",children:new Date(e.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),l6=({blogPosts:e,users:r})=>{const[n,a]=iD(),s=n.get("category"),[i,l]=N.useState(s);N.useEffect(()=>{l(s)},[s]);const d=N.useMemo(()=>{const b=new Set;return e.forEach(y=>{y.tags.forEach(g=>b.add(g))}),Array.from(b).sort()},[e]),u=b=>{a(b?{category:b}:{})},m=N.useMemo(()=>{const b=[...e].sort((y,g)=>new Date(g.publishedAt).getTime()-new Date(y.publishedAt).getTime());return i?b.filter(y=>y.tags.includes(i)):b},[e,i]),p=m[0],f=m.slice(1),x=b=>r.find(y=>y.id===b);return t.jsx("div",{className:"py-12 sm:py-16",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Clienn CRM Blog"}),t.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-subtle",children:"Insights, strategies, and tips on sales, marketing automation, and business growth."})]}),t.jsxs("nav",{className:"mb-12 flex flex-wrap justify-center gap-2",children:[t.jsx("button",{onClick:()=>u(null),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${i?"bg-surface text-on-surface hover:bg-muted":"bg-primary-600 text-white"}`,children:"All Posts"}),d.map(b=>t.jsx("button",{onClick:()=>u(b),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${i===b?"bg-primary-600 text-white":"bg-surface text-on-surface hover:bg-muted"}`,children:b},b))]}),p&&t.jsx("section",{className:"mb-16",children:t.jsxs(vt,{to:`/blog/${p.slug}`,className:"group grid grid-cols-1 lg:grid-cols-2 gap-8 items-center bg-surface p-8 rounded-2xl shadow-xl border border-muted/50 hover:shadow-primary-500/10 transition-shadow duration-300",children:[t.jsx("div",{className:"overflow-hidden rounded-lg",children:t.jsx("img",{src:p.featuredImage.src,alt:p.featuredImage.alt,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-primary-500 font-semibold",children:p.tags.join("  ")}),t.jsx("h2",{className:"mt-4 text-3xl font-bold text-on-surface group-hover:text-primary-500 transition-colors",children:p.title}),t.jsx("p",{className:"mt-4 text-base text-subtle line-clamp-4",children:p.excerpt}),t.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[t.jsx("img",{src:x(p.authorId)?.avatar,alt:x(p.authorId)?.name,className:"w-12 h-12 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-on-surface",children:x(p.authorId)?.name}),t.jsx("p",{className:"text-xs text-subtle",children:new Date(p.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}),t.jsx("section",{children:f.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map(b=>t.jsx(QX,{post:b,author:x(b.authorId)},b.id))}):p?null:t.jsxs("div",{className:"text-center py-16 bg-surface rounded-lg",children:[t.jsx("h3",{className:"text-xl font-semibold",children:"No posts found"}),t.jsxs("p",{className:"text-subtle mt-2",children:['There are no blog posts in the "',i,'" category yet.']})]})})]})})},eJ=({post:e,author:r})=>t.jsxs(vt,{to:`/blog/${e.slug}`,className:"group block",children:[t.jsx("div",{className:"overflow-hidden rounded-lg",children:t.jsx("img",{src:e.featuredImage.src,alt:e.featuredImage.alt,className:"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsx("h3",{className:"mt-4 text-lg font-bold group-hover:text-primary-500 transition-colors",children:e.title}),t.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-subtle",children:[t.jsx("img",{src:r?.avatar,alt:r?.name,className:"w-6 h-6 rounded-full object-cover"}),t.jsx("span",{children:r?.name}),t.jsx("span",{children:""}),t.jsx("span",{children:new Date(e.publishedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),c6=({blogPosts:e,users:r})=>{const{slug:n}=y6(),a=e.find(d=>d.slug===n);N.useEffect(()=>{window.scrollTo(0,0),a&&(document.title=a.seo.title)},[a]);const s=N.useMemo(()=>a?e.filter(d=>d.id!==a.id&&d.tags.some(u=>a.tags.includes(u))).sort((d,u)=>new Date(u.publishedAt).getTime()-new Date(d.publishedAt).getTime()).slice(0,3):[],[a,e]);if(!a)return t.jsxs("div",{className:"text-center py-20",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Post not found"}),t.jsx(vt,{to:"/blog",className:"mt-4 inline-block text-primary-500 hover:underline",children:" Back to all posts"})]});const i=r.find(d=>d.id===a.authorId),l={twitter:`https://twitter.com/intent/tweet?url=${window.location.href}&text=${encodeURIComponent(a.title)}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${window.location.href}&title=${encodeURIComponent(a.title)}&summary=${encodeURIComponent(a.excerpt)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${window.location.href}`};return t.jsxs("article",{className:"bg-surface",children:[t.jsxs("header",{className:"relative py-24 sm:py-32 lg:py-40",children:[t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("img",{src:a.featuredImage.src,alt:"",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-surface via-surface/80 to-transparent"})]}),t.jsxs("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl text-center",children:[t.jsx("div",{className:"flex justify-center gap-2",children:a.tags.map(d=>t.jsx(vt,{to:`/blog?category=${d}`,className:"bg-white/10 backdrop-blur-sm text-on-surface text-xs font-bold px-2.5 py-1 rounded-full border border-white/20 hover:bg-white/20 transition-colors",children:d},d))}),t.jsx("h1",{className:"mt-4 text-4xl sm:text-5xl font-extrabold tracking-tight text-on-surface",children:a.title}),t.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4",children:[i&&t.jsx("img",{src:i.avatar,alt:i.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/50"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-on-surface",children:i?.name||"Clienn CRM Team"}),t.jsxs("p",{className:"text-xs text-on-surface/80",children:["Published on ",new Date(a.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]})]}),t.jsx("div",{className:"py-12 sm:py-16",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[t.jsx("div",{className:"prose dark:prose-invert prose-lg max-w-none",style:{whiteSpace:"pre-wrap"},children:a.content}),t.jsxs("div",{className:"mt-12 pt-8 border-t border-muted text-center",children:[t.jsx("h3",{className:"font-semibold text-on-surface",children:"Share this post"}),t.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[t.jsx("a",{href:l.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:t.jsx(V.Twitter,{className:"h-5 w-5"})}),t.jsx("a",{href:l.linkedin,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:t.jsx(V.LinkedIn,{className:"h-5 w-5"})}),t.jsx("a",{href:l.facebook,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-muted rounded-full text-subtle hover:bg-primary-500/10 hover:text-primary-500 transition-colors",children:t.jsx(V.Facebook,{className:"h-5 w-5"})})]})]}),s.length>0&&t.jsxs("div",{className:"mt-16 pt-12 border-t border-muted",children:[t.jsx("h2",{className:"text-2xl font-bold text-center",children:"You Might Also Like"}),t.jsx("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(d=>t.jsx(eJ,{post:d,author:r.find(u=>u.id===d.authorId)},d.id))})]})]})})]})},tJ=({plan:e,onCtaClick:r})=>{const n=e.price==="$0"?"Get Started":e.name==="Enterprise"?"Contact Us":"Start 14-Day Trial";return t.jsxs("div",{className:"p-6 h-full flex flex-col items-center text-center",children:[e.isPopular&&t.jsx("span",{className:"mb-4 px-3 py-1 text-sm font-semibold text-white bg-primary-500 rounded-full",children:"Most Popular"}),t.jsx("h3",{className:"text-2xl font-bold",children:e.name}),t.jsxs("p",{className:"mt-4 text-5xl font-bold",children:[e.price,t.jsx("span",{className:"text-base font-normal text-subtle",children:"/mo"})]}),t.jsx("p",{className:"mt-2 text-subtle text-center flex-grow h-12",children:e.description}),t.jsx("button",{onClick:r,className:`mt-8 w-full px-6 py-3 text-sm font-semibold rounded-lg transition-colors ${e.isPopular?"bg-primary-600 text-white hover:bg-primary-700":"bg-muted text-on-surface hover:bg-primary-500/10"}`,children:n})]})},bu=e=>typeof e=="boolean"?e?t.jsx(V.CheckCircle,{className:"h-6 w-6 text-green-500 mx-auto"}):t.jsx(V.XCircle,{className:"h-6 w-6 text-subtle/50 mx-auto"}):t.jsx("span",{className:"text-sm font-medium",children:e}),rJ=({content:e,comparisonData:r})=>{const[n,a]=N.useState("monthly"),[s,i]=N.useState(!1),[l,d]=N.useState(null),u=n==="monthly"?e.monthlyPlans:e.yearlyPlans,m=p=>{p.name==="Free"?window.location.hash="/login":p.name==="Enterprise"?window.location.hash="/#contact":(d(p),i(!0))};return t.jsxs(t.Fragment,{children:[t.jsx(fT,{isOpen:s,onClose:()=>i(!1),plan:l}),t.jsx("div",{className:"py-12 sm:py-16 bg-background",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight",children:"Flexible pricing for teams of all sizes"}),t.jsx("p",{className:"mt-6 text-lg text-subtle",children:"Choose the plan that's right for you. No hidden fees, and you can change your plan at any time."})]}),t.jsxs("div",{className:"flex justify-center items-center gap-4 my-12",children:[t.jsx("span",{className:`font-medium ${n==="monthly"?"text-primary-500":"text-subtle"}`,children:"Monthly"}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n==="yearly",onChange:()=>a(n==="monthly"?"yearly":"monthly"),className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-8 bg-muted rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]}),t.jsx("span",{className:`font-medium ${n==="yearly"?"text-primary-500":"text-subtle"}`,children:"Yearly"}),t.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2.5 py-1 rounded-full dark:bg-green-900 dark:text-green-300",children:"Save 20%"})]}),t.jsx("div",{className:"w-full overflow-x-auto relative border border-muted rounded-2xl shadow-xl shadow-slate-900/5",children:t.jsxs("table",{className:"w-full border-collapse min-w-[1200px] text-on-surface",children:[t.jsx("thead",{className:"sticky top-0 z-20 bg-background/80 backdrop-blur-lg",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left p-6 w-[32%] sticky left-0 bg-background/80 backdrop-blur-lg z-30",children:t.jsx("h2",{className:"text-2xl font-bold",children:"Compare features"})}),u.map(p=>t.jsx("th",{className:`p-0 w-[17%] border-l border-muted ${p.isPopular?"bg-primary-500/5":""}`,children:t.jsx(tJ,{plan:p,onCtaClick:()=>m(p)})},p.name))]})}),t.jsx("tbody",{children:r.map(p=>t.jsxs(X.Fragment,{children:[t.jsx("tr",{className:"bg-muted/50",children:t.jsx("th",{colSpan:5,className:"text-left p-3 font-bold text-on-surface sticky left-0 bg-muted/50 z-10",children:p.category})}),p.features.map(f=>t.jsxs("tr",{className:"border-b border-muted last:border-b-0 hover:bg-muted/30",children:[t.jsx("td",{title:f.description,className:"p-4 text-sm font-semibold sticky left-0 bg-background z-10",children:f.name}),t.jsx("td",{className:"p-4 text-center border-l border-muted",children:bu(f.values.free)}),t.jsx("td",{className:"p-4 text-center border-l border-muted",children:bu(f.values.basic)}),t.jsx("td",{className:`p-4 text-center border-l border-muted ${u[2].isPopular?"bg-primary-500/5":""}`,children:bu(f.values.pro)}),t.jsx("td",{className:"p-4 text-center border-l border-muted",children:bu(f.values.enterprise)})]},f.id))]},p.id))})]})})]})})]})},nJ="https://crm.clienn.com/api",d6=({currentUser:e,currentOrganization:r,hasPermission:n,hasFeature:a,onLogout:s,onLinkClick:i})=>{const l=pa(),d=l.pathname.startsWith("/marketing"),[u,m]=N.useState(d);N.useEffect(()=>{d&&m(!0)},[d]);const p=[{path:"/dashboard",icon:t.jsx(V.Dashboard,{}),name:"Leads Dashboard",feature:"DASHBOARD"},{path:"/reports",icon:t.jsx(V.Reports,{}),name:"Reports",feature:"REPORTS"},{path:"/tracking",icon:t.jsx(V.Activity,{}),name:"Tracking Dashboard",permission:Zt.VIEW_TRACKING_DASHBOARD,feature:"TRACKING"},{path:"/leads",icon:t.jsx(V.Leads,{}),name:"Leads",feature:"LEADS"},{path:"/tasks",icon:t.jsx(V.Tasks,{}),name:"Tasks",feature:"TASKS"},{path:"/marketing",icon:t.jsx(V.Marketing,{}),name:"Marketing",subItems:[{path:"/marketing/email",name:"Email Campaigns",feature:"EMAIL"},{path:"/marketing/sms",name:"SMS Campaigns",feature:"SMS"},{path:"/marketing/whatsapp",name:"WhatsApp",feature:"WHATSAPP"},{path:"/marketing/call",name:"Call Campaigns",feature:"CALLS"}]},{path:"/blog",icon:t.jsx(V.Blog,{}),name:"Blog",isOrgFeature:!0}].filter(x=>x.isOrgFeature?!!r?.hasBlogAccess:!0),f=({item:x,isSubItem:b=!1})=>{const y=l.pathname.startsWith(x.path)&&(x.path!=="/"||l.pathname==="/"),g=x.subItems&&x.subItems.length>0,j=k=>{g?(k.preventDefault(),m(!u)):i&&i()};return x.permission&&!n(x.permission)||x.feature&&!a(x.feature)?null:t.jsxs(t.Fragment,{children:[t.jsxs(vt,{to:x.path,onClick:j,className:`flex items-center p-3 rounded-lg transition-colors duration-200 ${b?"pl-10 text-sm":"text-base"} ${y?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[x.icon&&X.cloneElement(x.icon,{className:"h-6 w-6 mr-3"}),t.jsx("span",{className:"flex-1",children:x.name}),g&&t.jsx("svg",{className:`w-5 h-5 transition-transform ${u?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),g&&u&&t.jsx("div",{className:"pl-6 space-y-1 mt-1",children:x.subItems?.map(k=>k.feature&&!a(k.feature)?null:t.jsx(f,{item:k,isSubItem:!0},k.path))})]})};return!e||!r?null:t.jsxs("div",{className:"bg-surface text-on-surface w-64 flex flex-col h-full border-r border-muted flex-shrink-0",children:[t.jsxs(vt,{to:"/dashboard",className:"h-16 flex items-center px-4 border-b border-muted group",children:[t.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-8 w-auto transition-transform group-hover:scale-110"}),t.jsx("h1",{className:"ml-3 text-lg font-bold group-hover:text-primary-500 transition-colors",children:r.name})]}),t.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:p.map(x=>t.jsx(f,{item:x},x.path))}),t.jsxs("div",{className:"p-4 border-t border-muted",children:[t.jsxs(vt,{to:"/settings",onClick:i,className:`w-full flex items-center p-3 rounded-lg transition-colors duration-200 text-base ${l.pathname.startsWith("/settings")?"bg-primary-600 text-white":"text-subtle hover:bg-muted hover:text-on-surface"}`,children:[t.jsx(V.Settings,{className:"h-6 w-6 mr-3"})," Settings"]}),t.jsxs("div",{className:"flex items-center mt-4",children:[t.jsx("img",{src:e.avatar,alt:e.name,className:"h-10 w-10 rounded-full"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-semibold",children:e.name}),t.jsx("p",{className:"text-xs text-subtle",children:e.role})]}),t.jsx("button",{onClick:s,className:"ml-auto p-2 text-subtle hover:text-red-500 transition-colors",children:t.jsx(V.Logout,{className:"h-5 w-5"})})]})]})]})},aJ=({onMenuClick:e})=>t.jsxs("div",{className:"md:hidden h-16 bg-surface border-b border-muted flex items-center justify-between px-4",children:[t.jsx(V.Logo,{className:"h-8 w-8 text-primary-500"}),t.jsx("button",{onClick:e,children:t.jsx(V.Menu,{className:"h-6 w-6"})})]}),sJ=()=>{const[e,r]=N.useState(()=>localStorage.getItem("theme")||"dark"),[n,a]=N.useState(null),[s,i]=N.useState(!0),[l,d]=N.useState(!0),[u,m]=N.useState(null),[p,f]=N.useState(localStorage.getItem("authToken")),[x,b]=N.useState([]),[y,g]=N.useState([]),[j,k]=N.useState([]),[S,A]=N.useState([]),[w,E]=N.useState([]),[T,O]=N.useState([]),[D,I]=N.useState([]),[M,L]=N.useState([]),[B,z]=N.useState([]),[W,R]=N.useState([]),[H,U]=N.useState([]),[q,Q]=N.useState(null),[K,F]=N.useState([]),[_,G]=N.useState([]),[Z,oe]=N.useState([]),[le,ge]=N.useState([]),[ve,fe]=N.useState([]),[Y,ne]=N.useState([]),[ue,Ve]=N.useState([]),[Te,Pe]=N.useState([]),[Xe,pe]=N.useState([]),[Oe,ae]=N.useState([]),[je,Ie]=N.useState([]),[ee,Ee]=N.useState([]),[ot,Rt]=N.useState([]),[$t,$r]=N.useState(null),[ur,zr]=N.useState([]),[br,Ye]=N.useState([]),[Tr,yr]=N.useState([]),[ie,he]=N.useState([]),[Fe,Ke]=N.useState([]),[Pt,Xt]=N.useState([]),[ct,mt]=N.useState([]),[Nr,fa]=N.useState(null),[vi,Ps]=N.useState([]),[Tn,ji]=N.useState(dD),[ln,wi]=N.useState([]),[xa,ga]=N.useState([]),[Br,Ha]=N.useState(lD),[ba,ya]=N.useState([]),[Ga,Pn]=N.useState([]),[Ka,Ya]=N.useState(null),[Xa,Pr]=N.useState(cD),[Ds,Ni]=N.useState([]),Qn=An(),te=N.useCallback(async(ce,be="GET",qe=null)=>{const We={"Content-Type":"application/json"};p&&(We.Authorization=`Bearer ${p}`);const yt={method:be,headers:We};qe&&(yt.body=JSON.stringify(qe));const pt=await fetch(ce,yt);if(pt.status===401&&ze(),!pt.ok){const un=await pt.json();throw new Error(un.message||`Request failed with status ${pt.status}`)}return pt.status===204?null:pt.json()},[p]);N.useEffect(()=>{const ce=localStorage.getItem("currentUser");ce&&p&&a(JSON.parse(ce)),i(!1)},[p]),N.useEffect(()=>{(async()=>{if(n&&p)try{d(!0);let ce="/api/data/app-data";n.role===Wt.SUPER_ADMIN&&(ce="/api/data/super-admin-data");const be=await te(ce);O(be.organizations||[]),b(be.users||[]),g(be.leads||[]),k(be.tasks||[]),A(be.teams||[]),console.log("DEBUG: Raw stages data from backend:",be.stages?.length||0,be.stages?.map(qe=>({id:qe.id,name:qe.name}))),E(be.stages||[]),I(be.integrationLogs||[]),L(be.automationRules||[]),z(be.customFieldDefs||[]),R(be.whatsAppTemplates||[]),U(be.smsTemplates||[]),Q(be.chatbotConfig||null),F(be.userSessionLogs||[]),G(be.integrationSettings||[]),oe(be.webhooks||[]),ge(be.emailTemplates||[]),fe(be.emailCampaigns||[]),ne(be.smsCampaigns||[]),Ve(be.whatsAppCampaigns||[]),Pe(be.callScripts||[]),pe(be.callCampaigns||[]),ae(be.leadScoreRules||[]),Ee(be.supportTickets||[]),Rt(be.auditLogs||[]),wi(be.billingHistory||[]),ga(be.savedFilters||[]),Ie(be.subscriptionPlans||[]),n.role===Wt.SUPER_ADMIN&&(Ye(be.systemHealthData||[]),yr(be.apiUsageLogs||[]),he(be.errorLogs||[]),Ke(be.globalAutomationRules||[]),Xt(be.globalEmailTemplates||[]),mt(be.globalIntegrationStatus||[]),fa(be.localizationSettings||null),Ps(be.paymentGatewaySettings||[]),ya(be.inquiries||[]),Ha(be.blogPosts||[]),Pn(be.coupons||[]),Ya(be.offerStrip||C6),Pr(be.pricingComparisonData||[]),zr(be.addons||[]))}catch(ce){console.error("Failed to fetch app data:",ce),ze()}finally{d(!1)}else p||(d(!1),i(!1))})()},[n,p,te]),N.useEffect(()=>{document.documentElement.className=e,localStorage.setItem("theme",e)},[e]),N.useEffect(()=>{if(n&&T.length>0){const ce=T.find(be=>be.id===n.organizationId);ce?(console.log("Organization found and loaded:",ce),m(ce)):(console.warn("Organization not found for user:",{userId:n.id,userOrgId:n.organizationId,availableOrgs:T.map(be=>({id:be.id,name:be.name}))}),m(null))}else n||m(null)},[n,T]);const we=()=>r(e==="dark"?"light":"dark"),De=N.useCallback(async(ce,be)=>{try{const qe=await fetch(`${nJ}//auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ce,password:be})});if(!qe.ok){let pt="Unknown error";try{pt=await qe.text()}catch{pt="Failed to read error response"}let un="Login failed";try{un=JSON.parse(pt).message||un}catch{pt&&pt.length>0&&pt!=="Failed to read error response"&&(un=pt)}throw qe.status===401?new Error("Invalid email or password"):qe.status>=500?new Error("Server error. Please check if the backend server is running."):new Error(un)}let We;try{const pt=await qe.text();if(!pt.trim())throw new Error("Empty response from server");We=JSON.parse(pt)}catch(pt){throw console.error("Login JSON Parse Error:",pt),new Error(`Invalid response from server: ${pt.message}`)}if(!We.success)throw new Error(We.message||"Login failed");const yt=We.data||We;localStorage.setItem("currentUser",JSON.stringify(yt)),localStorage.setItem("authToken",yt.token),f(yt.token),a(yt),yt.role===Wt.SUPER_ADMIN?Qn("/super-admin"):Qn("/dashboard");return}catch(qe){return qe.message||"An unknown error occurred."}},[Qn]),ze=N.useCallback(()=>{a(null),f(null),localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),Qn("/login")},[Qn]),_e=N.useCallback(ce=>n?n.role===Wt.ADMIN?!0:n.permissions.includes(ce):!1,[n]),nr=N.useRef(!1),wt=N.useCallback(ce=>{if(!u)return console.warn("hasFeature called but no current organization"),!1;if(u.manuallyAssignedFeatures?.includes(ce))return console.log(`Feature ${ce} granted via manual assignment`),!0;let be=je.find(We=>We.id===u.subscriptionPlanId);if(!be){const We=u.subscriptionPlanId.startsWith("plan_")?u.subscriptionPlanId.substring(5):`plan_${u.subscriptionPlanId}`;be=je.find(yt=>yt.id===We)}if(!be)return nr.current||(console.warn("No subscription plan found for organization:",{orgId:u.id,orgPlanId:u.subscriptionPlanId,availablePlans:je.map(We=>({id:We.id,name:We.name}))}),nr.current=!0),!1;const qe=be.features.includes(ce);return console.log(`Feature check for ${ce}:`,{organization:u.name,plan:be.name,planFeatures:be.features,hasAccess:qe}),qe},[u,je]),ft=async(ce,be,qe)=>{const We=be.id,yt=be._id,pt=!!(yt||We&&typeof We=="string"&&We.trim()!==""&&We!=="undefined"&&We!=="null");console.log("createOrUpdateItem Debug:",{endpoint:ce,itemId:We,item_id:yt,hasValidId:pt,itemIdType:typeof We,itemIdLength:typeof We=="string"?We.length:"N/A"});const un=pt,Oi=un?"PUT":"POST",Qa=pt?yt||We:void 0,ol=un&&Qa?`${ce}/${Qa}`:ce;console.log("createOrUpdateItem Debug:",{endpoint:ce,isUpdate:un,method:Oi,identifier:Qa,url:ol,hasValidId:pt});const Ls=await te(ol,Oi,be);return qe(es=>Oi==="PUT"?es.map(va=>va._id===Ls._id||va.id===Ls.id?Ls:va):[Ls,...es]),Ls},et=async(ce,be,qe)=>{await te(`${ce}/${be}`,"DELETE"),qe(We=>We.filter(yt=>yt._id!==be&&yt.id!==be))},Dn=async ce=>{await ft("/api/leads",ce,g)},Ja=async(ce,be)=>{console.log("App.tsx - onUpdateLead called:",{updatedLeadId:ce.id,updatedLead_id:ce._id,hasId:!!(ce.id||ce._id)}),g(We=>Array.isArray(We)?We.map(yt=>yt.id===ce.id||yt._id===ce._id?ce:yt):(console.error("Leads state is not an array:",We),We));const qe=await ft("/api/leads",ce,g);return console.log("App.tsx - onUpdateLead result:",qe),!0},gp=ce=>et("/api/leads",ce,g),Jc=async ce=>{if(n&&p)try{const be=await te(`/api/leads/${ce}`);return g(qe=>qe.some(We=>We.id===ce||We._id===ce)?qe.map(We=>We.id===ce||We._id===ce?be:We):(console.log("Adding refreshed lead to array:",be),[...qe,be])),be}catch(be){throw console.error("Failed to refresh lead:",be),be}},Za=async ce=>{await ft("/api/tasks",ce,k)},cn=ce=>et("/api/tasks",ce,k),el=async(ce,be)=>{try{if(be){console.log("Creating batch tasks:",{taskData:ce,assignment:be});const qe=await te("/api/tasks/batch","POST",{taskData:ce,assignment:be});console.log("Batch tasks created:",qe),k(We=>[...We,...qe])}else if(ce.title&&ce.leadId){console.log("Creating single task:",ce);const qe=await te("/api/tasks","POST",ce);console.log("Single task created:",qe),k(We=>[...We,qe])}else console.error("Invalid task data:",ce)}catch(qe){throw console.error("Failed to create task:",qe),qe}},Xr=async ce=>{try{if(await te("/api/notes","POST",ce),y.find(be=>be.id===ce.leadId)){const be=await te(`/api/leads/${ce.leadId}`);be&&g(qe=>qe.map(We=>We.id===ce.leadId?be:We))}}catch(be){console.error("Failed to create note:",be)}},tl=ce=>ft("/api/settings/users",ce,b),bp=ce=>et("/api/settings/users",ce,b),yp=async(ce,be)=>{const qe={name:ce,color:be,organizationId:u?.id},We=await te("/api/settings/stages","POST",qe);E(yt=>[...yt,We])},ki=(ce,be,qe)=>{const We=w.find(yt=>yt._id===ce);We&&ft("/api/settings/stages",{...We,[be]:qe},E)},Si=async ce=>{try{await te(`/api/settings/stages/${ce}`,"DELETE"),E(be=>be.filter(qe=>qe.id!==ce&&qe._id!==ce))}catch(be){throw console.error("Failed to delete stage:",be),be}},Is=ce=>ft("/api/automation/rules",ce,L),Ci=ce=>et("/api/automation/rules",ce,L),vp=ce=>ft("/api/settings/teams",ce,A),jp=ce=>et("/api/settings/teams",ce,A),rl=ce=>ft("/api/super-admin/plans",ce,Ie),Zc=ce=>et("/api/super-admin/plans",ce,Ie),nl=ce=>ft("/api/super-admin/addons",ce,zr),Ms=ce=>et("/api/super-admin/addons",ce,zr),wp=ce=>ft("/api/super-admin/coupons",ce,Pn),al=ce=>et("/api/super-admin/coupons",ce,Pn),bt=ce=>ft("/api/super-admin/blog",ce,Ha),Qc=ce=>et("/api/super-admin/blog",ce,Ha),ed=ce=>ft("/api/super-admin/automation-rules",ce,Ke),sl=ce=>et("/api/super-admin/automation-rules",ce,Ke),td=async ce=>{const be=await te("/api/super-admin/offer-strip","PUT",ce);Ya(be)},rd=async ce=>{const be=await te("/api/super-admin/pricing-data","PUT",ce);Pr(be)},Ai=async ce=>{const be=await te(`/api/leads/${ce.leadId}/schedule-message`,"POST",ce);g(qe=>qe.map(We=>We._id===be._id?be:We))},il=async(ce,be)=>{const{updatedLeads:qe}=await te("/api/leads/bulk-assign","POST",{leadIds:ce,assignedToId:be});g(We=>We.map(yt=>qe.find(pt=>pt._id===yt._id)||yt))},Ei=async ce=>{await te("/api/leads/bulk","DELETE",{leadIds:ce}),g(be=>be.filter(qe=>!ce.includes(qe.id)))},[ea,dn]=N.useState(!1);if(s||n&&l)return t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background text-on-surface",children:"Loading Application..."});if(!n)return t.jsxs(u2,{children:[t.jsxs(ut,{element:t.jsx(ZX,{theme:e,toggleTheme:we,content:Tn,offerStrip:Ka}),children:[t.jsx(ut,{index:!0,element:t.jsx(GX,{content:Tn,blogPosts:Br})}),t.jsx(ut,{path:"/pricing",element:t.jsx(rJ,{content:Tn.pricing,comparisonData:Xa})}),t.jsx(ut,{path:"/blog",element:t.jsx(l6,{blogPosts:Br,users:x})}),t.jsx(ut,{path:"/blog/:slug",element:t.jsx(c6,{blogPosts:Br,users:x})}),t.jsx(ut,{path:"/api-docs",element:t.jsx(n6,{})})]}),t.jsx(ut,{path:"/login",element:t.jsx(nX,{onLogin:De,content:Tn.loginPage,features:Tn.features.items})}),t.jsx(ut,{path:"*",element:t.jsx(nu,{to:"/"})})]});if(n.role===Wt.SUPER_ADMIN)return t.jsx(OX,{organizations:T,users:x,leads:y,tasks:j,subscriptionPlans:je,supportTickets:ee,auditLogs:ot,globalAnnouncement:$t,addons:ur,systemHealthData:br,apiUsageLogs:Tr,errorLogs:ie,globalAutomationRules:Fe,globalEmailTemplates:Pt,homepageContent:Tn,blogPosts:Br,paymentGatewaySettings:vi,inquiries:ba,pricingComparisonData:Xa,setInquiries:ya,setLeads:g,onLogout:ze,onAddOrganization:ce=>ft("/api/super-admin/organizations",ce,O),onUpdateOrganization:ce=>ft("/api/super-admin/organizations",ce,O),onDeleteOrganization:ce=>et("/api/super-admin/organizations",ce,O),onSaveSubscriptionPlan:rl,onDeleteSubscriptionPlan:Zc,onUpdateTicketStatus:(ce,be)=>ft("/api/super-admin/support-tickets",{_id:ce,status:be},Ee),onSaveAnnouncement:$r,onSaveUser:tl,globalIntegrationStatus:ct,onUpdateGlobalIntegrationStatus:mt,localizationSettings:Nr,onUpdateLocalizationSettings:fa,onUpdateHomepageContent:ji,onSaveBlogPost:bt,onDeleteBlogPost:Qc,onUpdatePaymentGatewaySettings:Ps,onSaveGlobalRule:ed,onDeleteGlobalRule:sl,onUpdatePricingComparisonData:rd,onSaveAddon:nl,onDeleteAddon:Ms,coupons:Ga,onSaveCoupon:wp,onDeleteCoupon:al,offerStrip:Ka,onUpdateOfferStrip:td,fetchAnalyticsData:async()=>({totalOrganizations:T.length,activeOrganizations:T.filter(ce=>new Date(ce.subscriptionExpiresAt)>new Date).length,mrrData:[]})});if(!u)return t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background text-on-surface",children:"Loading organization... If this persists, please log out and log back in."});const ta=t.jsxs(u2,{children:[t.jsx(ut,{path:"/",element:t.jsx(nu,{to:"/dashboard"})}),t.jsx(ut,{path:"/dashboard",element:t.jsx(LK,{leads:y,users:x,pipelineStages:w,customWidgets:Ds,onSaveWidget:ce=>{},onDeleteWidget:ce=>{}})}),t.jsx(ut,{path:"/leads",element:t.jsx(rY,{leads:y,users:x,pipelineStages:w,customFieldDefs:B,tasks:j,whatsAppTemplates:W,smsTemplates:H,addLead:Dn,deleteLead:gp,currentUser:n,hasPermission:_e,savedFilters:xa,onSaveFilter:async ce=>{await ft("/api/settings/filters",ce,ga)},onDeleteFilter:ce=>et("/api/settings/filters",ce,ga),onBulkAssign:il,onBulkDelete:Ei,onUpdateLead:Ja,onUpdateTask:Za,onAddTask:el,onScheduleMessage:Ai,onImportLeads:async()=>{}})}),t.jsx(ut,{path:"/leads/:leadId",element:t.jsx(KX,{leads:y,users:x,pipelineStages:w,customFieldDefs:B,tasks:j,whatsAppTemplates:W,smsTemplates:H,currentUser:n,onUpdateLead:Ja,onUpdateTask:Za,onAddTask:el,onAddNote:Xr,onScheduleMessage:Ai,onRefreshLeadById:Jc})}),t.jsx(ut,{path:"/tasks",element:t.jsx(MY,{tasks:j,users:x,leads:y,teams:S,currentUser:n,updateTask:Za,onAddTask:el,onDeleteTask:cn,pipelineStages:w,customFieldDefs:B,whatsAppTemplates:W,smsTemplates:H,onUpdateLead:Ja,onScheduleMessage:Ai})}),t.jsx(ut,{path:"/reports",element:t.jsx($X,{})}),t.jsx(ut,{path:"/tracking",element:_e(Zt.VIEW_TRACKING_DASHBOARD)?t.jsx(sX,{users:x,sessionLogs:K,teams:S,onToggleTracking:ce=>tl({...x.find(be=>be.id===ce),isTrackingEnabled:!x.find(be=>be.id===ce).isTrackingEnabled}),currentUser:n}):t.jsx(nu,{to:"/dashboard"})}),t.jsxs(ut,{path:"/marketing",element:t.jsx(XX,{}),children:[t.jsx(ut,{path:"email",element:t.jsx(IX,{users:x,pipelineStages:w,customFieldDefs:B})}),t.jsx(ut,{path:"sms",element:t.jsx(_X,{users:x,pipelineStages:w,customFieldDefs:B})}),t.jsx(ut,{path:"whatsapp",element:t.jsx(rX,{customFieldDefs:B,users:x,pipelineStages:w})}),t.jsx(ut,{path:"call",element:t.jsx(WX,{users:x,pipelineStages:w,customFieldDefs:B})})]}),t.jsx(ut,{path:"/blog",element:t.jsx(l6,{blogPosts:Br,users:x})}),t.jsx(ut,{path:"/blog/:slug",element:t.jsx(c6,{blogPosts:Br,users:x})}),t.jsx(ut,{path:"/api-docs",element:t.jsx(n6,{})}),t.jsxs(ut,{path:"/settings",element:t.jsx(YX,{}),children:[t.jsx(ut,{index:!0,element:t.jsx(HY,{pipelineStages:w,onAddStage:yp,onUpdateStage:ki,onDeleteStage:Si,customFieldDefs:B,onAddCustomField:ce=>ft("/api/settings/custom-fields",{name:"New Field",type:ce,isMappable:!0,isRequired:!1},z),onUpdateCustomField:(ce,be)=>ft("/api/settings/custom-fields",{_id:ce,...be},z),onDeleteCustomField:ce=>et("/api/settings/custom-fields",ce,z),leadScoreRules:Oe,onSaveLeadScoreRule:ce=>ft("/api/settings/score-rules",ce,ae),onDeleteLeadScoreRule:ce=>et("/api/settings/score-rules",ce,ae),theme:e,toggleTheme:we,currentUser:n,hasPermission:_e,currentOrganization:u,subscriptionPlans:je,onUpdateProfile:ce=>ft("/api/users/profile",{...n,...ce},be=>b(qe=>qe.map(We=>We.id===n.id?be[0]:We))).then(()=>a(be=>be?{...be,...ce}:null)),billingHistory:ln,addons:ur,onUpdateOrganization:ce=>te(`/api/organizations/${u._id}`,"PUT",ce).then(O),onUpgradeSubscription:(ce,be)=>{},onRefreshData:()=>{}})}),t.jsx(ut,{path:"users",element:t.jsx(lY,{users:x,teams:S,onSaveUser:tl,onDeleteUser:ce=>bp(ce.toString())})}),t.jsx(ut,{path:"teams",element:t.jsx(ZY,{teams:S,users:x,onSaveTeam:vp,onDeleteTeam:jp})}),t.jsx(ut,{path:"integrations",element:t.jsx(uY,{logs:D,settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,webhooks:Z,onAddWebhook:ce=>ft("/api/webhooks",ce,oe),onDeleteWebhook:ce=>et("/api/webhooks",ce,oe),onUpdateWebhook:ce=>ft("/api/webhooks",ce,oe),onSendTestLead:()=>{},syncFacebookLeads:()=>{}})}),t.jsx(ut,{path:"integrations/facebook",element:t.jsx(gY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/google-ads",element:t.jsx(vY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/website",element:t.jsx(NY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/cloud-telephony",element:t.jsx(SY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/email-marketing",element:t.jsx(CY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/sms-marketing",element:t.jsx(TY,{settings:_,setSettings:G,customFieldDefs:B,currentOrganization:u,onSendTestLead:()=>{}})}),t.jsx(ut,{path:"integrations/api-webhooks",element:t.jsx(PY,{settings:_,setSettings:G,webhooks:Z,onAddWebhook:ce=>ft("/api/webhooks",ce,oe),onDeleteWebhook:ce=>et("/api/webhooks",ce,oe),onUpdateWebhook:ce=>ft("/api/webhooks",ce,oe),onTestWebhook:async ce=>({success:!0,status:200,responseTime:150}),currentOrganization:u})}),t.jsx(ut,{path:"automation",element:t.jsx(YY,{rules:M,users:x,teams:S,customFieldDefs:B,pipelineStages:w,onSaveRule:Is,onDeleteRule:Ci})})]}),t.jsx(ut,{path:"*",element:t.jsx(nu,{to:"/dashboard"})})]});return t.jsxs("div",{className:"h-screen w-screen bg-background text-on-surface flex flex-col md:flex-row",children:[t.jsx("div",{className:"hidden md:flex",children:t.jsx(d6,{currentUser:n,currentOrganization:u,hasPermission:_e,hasFeature:wt,onLogout:ze})}),ea&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>dn(!1),children:t.jsx("div",{className:"absolute top-0 left-0 h-full",onClick:ce=>ce.stopPropagation(),children:t.jsx(d6,{currentUser:n,currentOrganization:u,hasPermission:_e,hasFeature:wt,onLogout:ze,onLinkClick:()=>dn(!1)})})}),t.jsx(aJ,{onMenuClick:()=>dn(!0)}),t.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:ta})]})},xT=document.getElementById("root");if(!xT)throw new Error("Could not find root element to mount to");const iJ=rP.createRoot(xT);iJ.render(t.jsx(X.StrictMode,{children:t.jsx(pT,{children:t.jsx(tD,{children:t.jsx(sJ,{})})})}));
